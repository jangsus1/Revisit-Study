var XNe=Object.defineProperty;var QNe=(e,t,n)=>t in e?XNe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var JNe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Eu=(e,t,n)=>QNe(e,typeof t!="symbol"?t+"":t,n);var dBt=JNe((ajt,iZ)=>{function ZNe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function e3e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var DF={exports:{}},N2={},NF={exports:{}},sr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LZ;function t3e(){if(LZ)return sr;LZ=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(U,X,V){this.props=U,this.context=X,this.refs=g,this.updater=V||h}y.prototype.isReactComponent={},y.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,X,"setState")},y.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function x(){}x.prototype=y.prototype;function b(U,X,V){this.props=U,this.context=X,this.refs=g,this.updater=V||h}var _=b.prototype=new x;_.constructor=b,p(_,y.prototype),_.isPureReactComponent=!0;var E=Array.isArray,T=Object.prototype.hasOwnProperty,k={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function R(U,X,V){var K,ee={},fe=null,Ee=null;if(X!=null)for(K in X.ref!==void 0&&(Ee=X.ref),X.key!==void 0&&(fe=""+X.key),X)T.call(X,K)&&!I.hasOwnProperty(K)&&(ee[K]=X[K]);var ye=arguments.length-2;if(ye===1)ee.children=V;else if(1<ye){for(var _e=Array(ye),De=0;De<ye;De++)_e[De]=arguments[De+2];ee.children=_e}if(U&&U.defaultProps)for(K in ye=U.defaultProps,ye)ee[K]===void 0&&(ee[K]=ye[K]);return{$$typeof:e,type:U,key:fe,ref:Ee,props:ee,_owner:k.current}}function D(U,X){return{$$typeof:e,type:U.type,key:X,ref:U.ref,props:U.props,_owner:U._owner}}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function M(U){var X={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(V){return X[V]})}var z=/\/+/g;function F(U,X){return typeof U=="object"&&U!==null&&U.key!=null?M(""+U.key):X.toString(36)}function H(U,X,V,K,ee){var fe=typeof U;(fe==="undefined"||fe==="boolean")&&(U=null);var Ee=!1;if(U===null)Ee=!0;else switch(fe){case"string":case"number":Ee=!0;break;case"object":switch(U.$$typeof){case e:case t:Ee=!0}}if(Ee)return Ee=U,ee=ee(Ee),U=K===""?"."+F(Ee,0):K,E(ee)?(V="",U!=null&&(V=U.replace(z,"$&/")+"/"),H(ee,X,V,"",function(De){return De})):ee!=null&&(L(ee)&&(ee=D(ee,V+(!ee.key||Ee&&Ee.key===ee.key?"":(""+ee.key).replace(z,"$&/")+"/")+U)),X.push(ee)),1;if(Ee=0,K=K===""?".":K+":",E(U))for(var ye=0;ye<U.length;ye++){fe=U[ye];var _e=K+F(fe,ye);Ee+=H(fe,X,V,_e,ee)}else if(_e=d(U),typeof _e=="function")for(U=_e.call(U),ye=0;!(fe=U.next()).done;)fe=fe.value,_e=K+F(fe,ye++),Ee+=H(fe,X,V,_e,ee);else if(fe==="object")throw X=String(U),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Ee}function Q(U,X,V){if(U==null)return U;var K=[],ee=0;return H(U,K,"","",function(fe){return X.call(V,fe,ee++)}),K}function J(U){if(U._status===-1){var X=U._result;X=X(),X.then(function(V){(U._status===0||U._status===-1)&&(U._status=1,U._result=V)},function(V){(U._status===0||U._status===-1)&&(U._status=2,U._result=V)}),U._status===-1&&(U._status=0,U._result=X)}if(U._status===1)return U._result.default;throw U._result}var ne={current:null},Z={transition:null},ie={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:Z,ReactCurrentOwner:k};function q(){throw Error("act(...) is not supported in production builds of React.")}return sr.Children={map:Q,forEach:function(U,X,V){Q(U,function(){X.apply(this,arguments)},V)},count:function(U){var X=0;return Q(U,function(){X++}),X},toArray:function(U){return Q(U,function(X){return X})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},sr.Component=y,sr.Fragment=n,sr.Profiler=i,sr.PureComponent=b,sr.StrictMode=r,sr.Suspense=u,sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,sr.act=q,sr.cloneElement=function(U,X,V){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var K=p({},U.props),ee=U.key,fe=U.ref,Ee=U._owner;if(X!=null){if(X.ref!==void 0&&(fe=X.ref,Ee=k.current),X.key!==void 0&&(ee=""+X.key),U.type&&U.type.defaultProps)var ye=U.type.defaultProps;for(_e in X)T.call(X,_e)&&!I.hasOwnProperty(_e)&&(K[_e]=X[_e]===void 0&&ye!==void 0?ye[_e]:X[_e])}var _e=arguments.length-2;if(_e===1)K.children=V;else if(1<_e){ye=Array(_e);for(var De=0;De<_e;De++)ye[De]=arguments[De+2];K.children=ye}return{$$typeof:e,type:U.type,key:ee,ref:fe,props:K,_owner:Ee}},sr.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:s,_context:U},U.Consumer=U},sr.createElement=R,sr.createFactory=function(U){var X=R.bind(null,U);return X.type=U,X},sr.createRef=function(){return{current:null}},sr.forwardRef=function(U){return{$$typeof:a,render:U}},sr.isValidElement=L,sr.lazy=function(U){return{$$typeof:c,_payload:{_status:-1,_result:U},_init:J}},sr.memo=function(U,X){return{$$typeof:l,type:U,compare:X===void 0?null:X}},sr.startTransition=function(U){var X=Z.transition;Z.transition={};try{U()}finally{Z.transition=X}},sr.unstable_act=q,sr.useCallback=function(U,X){return ne.current.useCallback(U,X)},sr.useContext=function(U){return ne.current.useContext(U)},sr.useDebugValue=function(){},sr.useDeferredValue=function(U){return ne.current.useDeferredValue(U)},sr.useEffect=function(U,X){return ne.current.useEffect(U,X)},sr.useId=function(){return ne.current.useId()},sr.useImperativeHandle=function(U,X,V){return ne.current.useImperativeHandle(U,X,V)},sr.useInsertionEffect=function(U,X){return ne.current.useInsertionEffect(U,X)},sr.useLayoutEffect=function(U,X){return ne.current.useLayoutEffect(U,X)},sr.useMemo=function(U,X){return ne.current.useMemo(U,X)},sr.useReducer=function(U,X,V){return ne.current.useReducer(U,X,V)},sr.useRef=function(U){return ne.current.useRef(U)},sr.useState=function(U){return ne.current.useState(U)},sr.useSyncExternalStore=function(U,X,V){return ne.current.useSyncExternalStore(U,X,V)},sr.useTransition=function(){return ne.current.useTransition()},sr.version="18.3.1",sr}var MZ;function l$(){return MZ||(MZ=1,NF.exports=t3e()),NF.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FZ;function n3e(){if(FZ)return N2;FZ=1;var e=l$(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!s.hasOwnProperty(c)&&(f[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:i.current}}return N2.Fragment=n,N2.jsx=o,N2.jsxs=o,N2}var BZ;function r3e(){return BZ||(BZ=1,DF.exports=n3e()),DF.exports}var S=r3e(),O=l$();const Mr=qc(O),i3e=ZNe({__proto__:null,default:Mr},[O]);var BP={},OF={exports:{}},yl={},$F={exports:{}},LF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jZ;function s3e(){return jZ||(jZ=1,function(e){function t(Z,ie){var q=Z.length;Z.push(ie);e:for(;0<q;){var U=q-1>>>1,X=Z[U];if(0<i(X,ie))Z[U]=ie,Z[q]=X,q=U;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ie=Z[0],q=Z.pop();if(q!==ie){Z[0]=q;e:for(var U=0,X=Z.length,V=X>>>1;U<V;){var K=2*(U+1)-1,ee=Z[K],fe=K+1,Ee=Z[fe];if(0>i(ee,q))fe<X&&0>i(Ee,ee)?(Z[U]=Ee,Z[fe]=q,U=fe):(Z[U]=ee,Z[K]=q,U=K);else if(fe<X&&0>i(Ee,q))Z[U]=Ee,Z[fe]=q,U=fe;else break e}}return ie}function i(Z,ie){var q=Z.sortIndex-ie.sortIndex;return q!==0?q:Z.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(Z){for(var ie=n(l);ie!==null;){if(ie.callback===null)r(l);else if(ie.startTime<=Z)r(l),ie.sortIndex=ie.expirationTime,t(u,ie);else break;ie=n(l)}}function E(Z){if(g=!1,_(Z),!p)if(n(u)!==null)p=!0,J(T);else{var ie=n(l);ie!==null&&ne(E,ie.startTime-Z)}}function T(Z,ie){p=!1,g&&(g=!1,x(R),R=-1),h=!0;var q=d;try{for(_(ie),f=n(u);f!==null&&(!(f.expirationTime>ie)||Z&&!M());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var X=U(f.expirationTime<=ie);ie=e.unstable_now(),typeof X=="function"?f.callback=X:f===n(u)&&r(u),_(ie)}else r(u);f=n(u)}if(f!==null)var V=!0;else{var K=n(l);K!==null&&ne(E,K.startTime-ie),V=!1}return V}finally{f=null,d=q,h=!1}}var k=!1,I=null,R=-1,D=5,L=-1;function M(){return!(e.unstable_now()-L<D)}function z(){if(I!==null){var Z=e.unstable_now();L=Z;var ie=!0;try{ie=I(!0,Z)}finally{ie?F():(k=!1,I=null)}}else k=!1}var F;if(typeof b=="function")F=function(){b(z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Q=H.port2;H.port1.onmessage=z,F=function(){Q.postMessage(null)}}else F=function(){y(z,0)};function J(Z){I=Z,k||(k=!0,F())}function ne(Z,ie){R=y(function(){Z(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,J(T))},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(Z){switch(d){case 1:case 2:case 3:var ie=3;break;default:ie=d}var q=d;d=ie;try{return Z()}finally{d=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Z,ie){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var q=d;d=Z;try{return ie()}finally{d=q}},e.unstable_scheduleCallback=function(Z,ie,q){var U=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?U+q:U):q=U,Z){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=q+X,Z={id:c++,callback:ie,priorityLevel:Z,startTime:q,expirationTime:X,sortIndex:-1},q>U?(Z.sortIndex=q,t(l,Z),n(u)===null&&Z===n(l)&&(g?(x(R),R=-1):g=!0,ne(E,q-U))):(Z.sortIndex=X,t(u,Z),p||h||(p=!0,J(T))),Z},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(Z){var ie=d;return function(){var q=d;d=ie;try{return Z.apply(this,arguments)}finally{d=q}}}}(LF)),LF}var UZ;function o3e(){return UZ||(UZ=1,$F.exports=s3e()),$F.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zZ;function a3e(){if(zZ)return yl;zZ=1;var e=l$(),t=o3e();function n(m){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+m,A=1;A<arguments.length;A++)v+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+m+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(m,v){o(m,v),o(m+"Capture",v)}function o(m,v){for(i[m]=v,m=0;m<v.length;m++)r.add(v[m])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(m){return u.call(f,m)?!0:u.call(c,m)?!1:l.test(m)?f[m]=!0:(c[m]=!0,!1)}function h(m,v,A,N){if(A!==null&&A.type===0)return!1;switch(typeof v){case"function":case"symbol":return!0;case"boolean":return N?!1:A!==null?!A.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function p(m,v,A,N){if(v===null||typeof v>"u"||h(m,v,A,N))return!0;if(N)return!1;if(A!==null)switch(A.type){case 3:return!v;case 4:return v===!1;case 5:return isNaN(v);case 6:return isNaN(v)||1>v}return!1}function g(m,v,A,N,j,G,se){this.acceptsBooleans=v===2||v===3||v===4,this.attributeName=N,this.attributeNamespace=j,this.mustUseProperty=A,this.propertyName=m,this.type=v,this.sanitizeURL=G,this.removeEmptyString=se}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){y[m]=new g(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var v=m[0];y[v]=new g(v,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){y[m]=new g(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){y[m]=new g(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){y[m]=new g(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){y[m]=new g(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){y[m]=new g(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){y[m]=new g(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){y[m]=new g(m,5,!1,m.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function b(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var v=m.replace(x,b);y[v]=new g(v,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var v=m.replace(x,b);y[v]=new g(v,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var v=m.replace(x,b);y[v]=new g(v,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){y[m]=new g(m,1,!1,m.toLowerCase(),null,!1,!1)}),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){y[m]=new g(m,1,!1,m.toLowerCase(),null,!0,!0)});function _(m,v,A,N){var j=y.hasOwnProperty(v)?y[v]:null;(j!==null?j.type!==0:N||!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(p(v,A,j,N)&&(A=null),N||j===null?d(v)&&(A===null?m.removeAttribute(v):m.setAttribute(v,""+A)):j.mustUseProperty?m[j.propertyName]=A===null?j.type===3?!1:"":A:(v=j.attributeName,N=j.attributeNamespace,A===null?m.removeAttribute(v):(j=j.type,A=j===3||j===4&&A===!0?"":""+A,N?m.setAttributeNS(N,v,A):m.setAttribute(v,A))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),k=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),M=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ie(m){return m===null||typeof m!="object"?null:(m=Z&&m[Z]||m["@@iterator"],typeof m=="function"?m:null)}var q=Object.assign,U;function X(m){if(U===void 0)try{throw Error()}catch(A){var v=A.stack.trim().match(/\n( *(at )?)/);U=v&&v[1]||""}return`
`+U+m}var V=!1;function K(m,v){if(!m||V)return"";V=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(qe){var N=qe}Reflect.construct(m,[],v)}else{try{v.call()}catch(qe){N=qe}m.call(v.prototype)}else{try{throw Error()}catch(qe){N=qe}m()}}catch(qe){if(qe&&N&&typeof qe.stack=="string"){for(var j=qe.stack.split(`
`),G=N.stack.split(`
`),se=j.length-1,ve=G.length-1;1<=se&&0<=ve&&j[se]!==G[ve];)ve--;for(;1<=se&&0<=ve;se--,ve--)if(j[se]!==G[ve]){if(se!==1||ve!==1)do if(se--,ve--,0>ve||j[se]!==G[ve]){var Te=`
`+j[se].replace(" at new "," at ");return m.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",m.displayName)),Te}while(1<=se&&0<=ve);break}}}finally{V=!1,Error.prepareStackTrace=A}return(m=m?m.displayName||m.name:"")?X(m):""}function ee(m){switch(m.tag){case 5:return X(m.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return m=K(m.type,!1),m;case 11:return m=K(m.type.render,!1),m;case 1:return m=K(m.type,!0),m;default:return""}}function fe(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case I:return"Fragment";case k:return"Portal";case D:return"Profiler";case R:return"StrictMode";case F:return"Suspense";case H:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case M:return(m.displayName||"Context")+".Consumer";case L:return(m._context.displayName||"Context")+".Provider";case z:var v=m.render;return m=m.displayName,m||(m=v.displayName||v.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case Q:return v=m.displayName||null,v!==null?v:fe(m.type)||"Memo";case J:v=m._payload,m=m._init;try{return fe(m(v))}catch{}}return null}function Ee(m){var v=m.type;switch(m.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=v.render,m=m.displayName||m.name||"",v.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(v);case 8:return v===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function ye(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function _e(m){var v=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function De(m){var v=_e(m)?"checked":"value",A=Object.getOwnPropertyDescriptor(m.constructor.prototype,v),N=""+m[v];if(!m.hasOwnProperty(v)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var j=A.get,G=A.set;return Object.defineProperty(m,v,{configurable:!0,get:function(){return j.call(this)},set:function(se){N=""+se,G.call(this,se)}}),Object.defineProperty(m,v,{enumerable:A.enumerable}),{getValue:function(){return N},setValue:function(se){N=""+se},stopTracking:function(){m._valueTracker=null,delete m[v]}}}}function me(m){m._valueTracker||(m._valueTracker=De(m))}function de(m){if(!m)return!1;var v=m._valueTracker;if(!v)return!0;var A=v.getValue(),N="";return m&&(N=_e(m)?m.checked?"true":"false":m.value),m=N,m!==A?(v.setValue(m),!0):!1}function $e(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Pe(m,v){var A=v.checked;return q({},v,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??m._wrapperState.initialChecked})}function Ze(m,v){var A=v.defaultValue==null?"":v.defaultValue,N=v.checked!=null?v.checked:v.defaultChecked;A=ye(v.value!=null?v.value:A),m._wrapperState={initialChecked:N,initialValue:A,controlled:v.type==="checkbox"||v.type==="radio"?v.checked!=null:v.value!=null}}function it(m,v){v=v.checked,v!=null&&_(m,"checked",v,!1)}function Ge(m,v){it(m,v);var A=ye(v.value),N=v.type;if(A!=null)N==="number"?(A===0&&m.value===""||m.value!=A)&&(m.value=""+A):m.value!==""+A&&(m.value=""+A);else if(N==="submit"||N==="reset"){m.removeAttribute("value");return}v.hasOwnProperty("value")?ut(m,v.type,A):v.hasOwnProperty("defaultValue")&&ut(m,v.type,ye(v.defaultValue)),v.checked==null&&v.defaultChecked!=null&&(m.defaultChecked=!!v.defaultChecked)}function et(m,v,A){if(v.hasOwnProperty("value")||v.hasOwnProperty("defaultValue")){var N=v.type;if(!(N!=="submit"&&N!=="reset"||v.value!==void 0&&v.value!==null))return;v=""+m._wrapperState.initialValue,A||v===m.value||(m.value=v),m.defaultValue=v}A=m.name,A!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,A!==""&&(m.name=A)}function ut(m,v,A){(v!=="number"||$e(m.ownerDocument)!==m)&&(A==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+A&&(m.defaultValue=""+A))}var Tt=Array.isArray;function xt(m,v,A,N){if(m=m.options,v){v={};for(var j=0;j<A.length;j++)v["$"+A[j]]=!0;for(A=0;A<m.length;A++)j=v.hasOwnProperty("$"+m[A].value),m[A].selected!==j&&(m[A].selected=j),j&&N&&(m[A].defaultSelected=!0)}else{for(A=""+ye(A),v=null,j=0;j<m.length;j++){if(m[j].value===A){m[j].selected=!0,N&&(m[j].defaultSelected=!0);return}v!==null||m[j].disabled||(v=m[j])}v!==null&&(v.selected=!0)}}function Dt(m,v){if(v.dangerouslySetInnerHTML!=null)throw Error(n(91));return q({},v,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function Ue(m,v){var A=v.value;if(A==null){if(A=v.children,v=v.defaultValue,A!=null){if(v!=null)throw Error(n(92));if(Tt(A)){if(1<A.length)throw Error(n(93));A=A[0]}v=A}v==null&&(v=""),A=v}m._wrapperState={initialValue:ye(A)}}function Ft(m,v){var A=ye(v.value),N=ye(v.defaultValue);A!=null&&(A=""+A,A!==m.value&&(m.value=A),v.defaultValue==null&&m.defaultValue!==A&&(m.defaultValue=A)),N!=null&&(m.defaultValue=""+N)}function tn(m){var v=m.textContent;v===m._wrapperState.initialValue&&v!==""&&v!==null&&(m.value=v)}function Re(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ve(m,v){return m==null||m==="http://www.w3.org/1999/xhtml"?Re(v):m==="http://www.w3.org/2000/svg"&&v==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var yt,$t=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(v,A,N,j){MSApp.execUnsafeLocalFunction(function(){return m(v,A,N,j)})}:m}(function(m,v){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=v;else{for(yt=yt||document.createElement("div"),yt.innerHTML="<svg>"+v.valueOf().toString()+"</svg>",v=yt.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;v.firstChild;)m.appendChild(v.firstChild)}});function Bt(m,v){if(v){var A=m.firstChild;if(A&&A===m.lastChild&&A.nodeType===3){A.nodeValue=v;return}}m.textContent=v}var dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nn=["Webkit","ms","Moz","O"];Object.keys(dn).forEach(function(m){Nn.forEach(function(v){v=v+m.charAt(0).toUpperCase()+m.substring(1),dn[v]=dn[m]})});function dr(m,v,A){return v==null||typeof v=="boolean"||v===""?"":A||typeof v!="number"||v===0||dn.hasOwnProperty(m)&&dn[m]?(""+v).trim():v+"px"}function ti(m,v){m=m.style;for(var A in v)if(v.hasOwnProperty(A)){var N=A.indexOf("--")===0,j=dr(A,v[A],N);A==="float"&&(A="cssFloat"),N?m.setProperty(A,j):m[A]=j}}var kn=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bn(m,v){if(v){if(kn[m]&&(v.children!=null||v.dangerouslySetInnerHTML!=null))throw Error(n(137,m));if(v.dangerouslySetInnerHTML!=null){if(v.children!=null)throw Error(n(60));if(typeof v.dangerouslySetInnerHTML!="object"||!("__html"in v.dangerouslySetInnerHTML))throw Error(n(61))}if(v.style!=null&&typeof v.style!="object")throw Error(n(62))}}function Xr(m,v){if(m.indexOf("-")===-1)return typeof v.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ir=null;function zs(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var gi=null,ni=null,yi=null;function Ar(m){if(m=Ao(m)){if(typeof gi!="function")throw Error(n(280));var v=m.stateNode;v&&(v=ow(v),gi(m.stateNode,m.type,v))}}function Vs(m){ni?yi?yi.push(m):yi=[m]:ni=m}function Yu(){if(ni){var m=ni,v=yi;if(yi=ni=null,Ar(m),v)for(m=0;m<v.length;m++)Ar(v[m])}}function Eo(m,v){return m(v)}function Ra(){}var kr=!1;function ui(m,v,A){if(kr)return m(v,A);kr=!0;try{return Eo(m,v,A)}finally{kr=!1,(ni!==null||yi!==null)&&(Ra(),Yu())}}function $r(m,v){var A=m.stateNode;if(A===null)return null;var N=ow(A);if(N===null)return null;A=N[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(m=m.type,N=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!N;break e;default:m=!1}if(m)return null;if(A&&typeof A!="function")throw Error(n(231,v,typeof A));return A}var os=!1;if(a)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){os=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch{os=!1}function vi(m,v,A,N,j,G,se,ve,Te){var qe=Array.prototype.slice.call(arguments,3);try{v.apply(A,qe)}catch(vt){this.onError(vt)}}var Hs=!1,Ts=null,ro=!1,pu=null,qf={onError:function(m){Hs=!0,Ts=m}};function hr(m,v,A,N,j,G,se,ve,Te){Hs=!1,Ts=null,vi.apply(qf,arguments)}function Ku(m,v,A,N,j,G,se,ve,Te){if(hr.apply(this,arguments),Hs){if(Hs){var qe=Ts;Hs=!1,Ts=null}else throw Error(n(198));ro||(ro=!0,pu=qe)}}function Di(m){var v=m,A=m;if(m.alternate)for(;v.return;)v=v.return;else{m=v;do v=m,v.flags&4098&&(A=v.return),m=v.return;while(m)}return v.tag===3?A:null}function Qo(m){if(m.tag===13){var v=m.memoizedState;if(v===null&&(m=m.alternate,m!==null&&(v=m.memoizedState)),v!==null)return v.dehydrated}return null}function io(m){if(Di(m)!==m)throw Error(n(188))}function mh(m){var v=m.alternate;if(!v){if(v=Di(m),v===null)throw Error(n(188));return v!==m?null:m}for(var A=m,N=v;;){var j=A.return;if(j===null)break;var G=j.alternate;if(G===null){if(N=j.return,N!==null){A=N;continue}break}if(j.child===G.child){for(G=j.child;G;){if(G===A)return io(j),m;if(G===N)return io(j),v;G=G.sibling}throw Error(n(188))}if(A.return!==N.return)A=j,N=G;else{for(var se=!1,ve=j.child;ve;){if(ve===A){se=!0,A=j,N=G;break}if(ve===N){se=!0,N=j,A=G;break}ve=ve.sibling}if(!se){for(ve=G.child;ve;){if(ve===A){se=!0,A=G,N=j;break}if(ve===N){se=!0,N=G,A=j;break}ve=ve.sibling}if(!se)throw Error(n(189))}}if(A.alternate!==N)throw Error(n(190))}if(A.tag!==3)throw Error(n(188));return A.stateNode.current===A?m:v}function Wf(m){return m=mh(m),m!==null?Wc(m):null}function Wc(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var v=Wc(m);if(v!==null)return v;m=m.sibling}return null}var Gc=t.unstable_scheduleCallback,ql=t.unstable_cancelCallback,Wl=t.unstable_shouldYield,Gl=t.unstable_requestPaint,Yn=t.unstable_now,Gf=t.unstable_getCurrentPriorityLevel,Ss=t.unstable_ImmediatePriority,mu=t.unstable_UserBlockingPriority,as=t.unstable_NormalPriority,Xu=t.unstable_LowPriority,Yf=t.unstable_IdlePriority,Qu=null,Cs=null;function gh(m){if(Cs&&typeof Cs.onCommitFiberRoot=="function")try{Cs.onCommitFiberRoot(Qu,m,void 0,(m.current.flags&128)===128)}catch{}}var As=Math.clz32?Math.clz32:pe,ae=Math.log,we=Math.LN2;function pe(m){return m>>>=0,m===0?32:31-(ae(m)/we|0)|0}var ke=64,Oe=4194304;function Ae(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function tt(m,v){var A=m.pendingLanes;if(A===0)return 0;var N=0,j=m.suspendedLanes,G=m.pingedLanes,se=A&268435455;if(se!==0){var ve=se&~j;ve!==0?N=Ae(ve):(G&=se,G!==0&&(N=Ae(G)))}else se=A&~j,se!==0?N=Ae(se):G!==0&&(N=Ae(G));if(N===0)return 0;if(v!==0&&v!==N&&!(v&j)&&(j=N&-N,G=v&-v,j>=G||j===16&&(G&4194240)!==0))return v;if(N&4&&(N|=A&16),v=m.entangledLanes,v!==0)for(m=m.entanglements,v&=N;0<v;)A=31-As(v),j=1<<A,N|=m[A],v&=~j;return N}function ht(m,v){switch(m){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gt(m,v){for(var A=m.suspendedLanes,N=m.pingedLanes,j=m.expirationTimes,G=m.pendingLanes;0<G;){var se=31-As(G),ve=1<<se,Te=j[se];Te===-1?(!(ve&A)||ve&N)&&(j[se]=ht(ve,v)):Te<=v&&(m.expiredLanes|=ve),G&=~ve}}function pt(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function At(){var m=ke;return ke<<=1,!(ke&4194240)&&(ke=64),m}function zt(m){for(var v=[],A=0;31>A;A++)v.push(m);return v}function Tn(m,v,A){m.pendingLanes|=v,v!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,v=31-As(v),m[v]=A}function on(m,v){var A=m.pendingLanes&~v;m.pendingLanes=v,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=v,m.mutableReadLanes&=v,m.entangledLanes&=v,v=m.entanglements;var N=m.eventTimes;for(m=m.expirationTimes;0<A;){var j=31-As(A),G=1<<j;v[j]=0,N[j]=-1,m[j]=-1,A&=~G}}function jn(m,v){var A=m.entangledLanes|=v;for(m=m.entanglements;A;){var N=31-As(A),j=1<<N;j&v|m[N]&v&&(m[N]|=v),A&=~j}}var an=0;function Zn(m){return m&=-m,1<m?4<m?m&268435455?16:536870912:4:1}var us,Jo,Ju,Kf,Yl,Xf=!1,qs=[],Ni=null,Ws=null,Zo=null,Kl=new Map,ea=new Map,Pa=[],rg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zu(m,v){switch(m){case"focusin":case"focusout":Ni=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Zo=null;break;case"pointerover":case"pointerout":Kl.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":ea.delete(v.pointerId)}}function Ui(m,v,A,N,j,G){return m===null||m.nativeEvent!==G?(m={blockedOn:v,domEventName:A,eventSystemFlags:N,nativeEvent:G,targetContainers:[j]},v!==null&&(v=Ao(v),v!==null&&Jo(v)),m):(m.eventSystemFlags|=N,v=m.targetContainers,j!==null&&v.indexOf(j)===-1&&v.push(j),m)}function L1(m,v,A,N,j){switch(v){case"focusin":return Ni=Ui(Ni,m,v,A,N,j),!0;case"dragenter":return Ws=Ui(Ws,m,v,A,N,j),!0;case"mouseover":return Zo=Ui(Zo,m,v,A,N,j),!0;case"pointerover":var G=j.pointerId;return Kl.set(G,Ui(Kl.get(G)||null,m,v,A,N,j)),!0;case"gotpointercapture":return G=j.pointerId,ea.set(G,Ui(ea.get(G)||null,m,v,A,N,j)),!0}return!1}function sm(m){var v=Zc(m.target);if(v!==null){var A=Di(v);if(A!==null){if(v=A.tag,v===13){if(v=Qo(A),v!==null){m.blockedOn=v,Yl(m.priority,function(){Ju(A)});return}}else if(v===3&&A.stateNode.current.memoizedState.isDehydrated){m.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Xl(m){if(m.blockedOn!==null)return!1;for(var v=m.targetContainers;0<v.length;){var A=ur(m.domEventName,m.eventSystemFlags,v[0],m.nativeEvent);if(A===null){A=m.nativeEvent;var N=new A.constructor(A.type,A);ir=N,A.target.dispatchEvent(N),ir=null}else return v=Ao(A),v!==null&&Jo(v),m.blockedOn=A,!1;v.shift()}return!0}function Yc(m,v,A){Xl(m)&&A.delete(v)}function ig(){Xf=!1,Ni!==null&&Xl(Ni)&&(Ni=null),Ws!==null&&Xl(Ws)&&(Ws=null),Zo!==null&&Xl(Zo)&&(Zo=null),Kl.forEach(Yc),ea.forEach(Yc)}function er(m,v){m.blockedOn===v&&(m.blockedOn=null,Xf||(Xf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ig)))}function Kn(m){function v(j){return er(j,m)}if(0<qs.length){er(qs[0],m);for(var A=1;A<qs.length;A++){var N=qs[A];N.blockedOn===m&&(N.blockedOn=null)}}for(Ni!==null&&er(Ni,m),Ws!==null&&er(Ws,m),Zo!==null&&er(Zo,m),Kl.forEach(v),ea.forEach(v),A=0;A<Pa.length;A++)N=Pa[A],N.blockedOn===m&&(N.blockedOn=null);for(;0<Pa.length&&(A=Pa[0],A.blockedOn===null);)sm(A),A.blockedOn===null&&Pa.shift()}var Ql=E.ReactCurrentBatchConfig,ge=!0;function Se(m,v,A,N){var j=an,G=Ql.transition;Ql.transition=null;try{an=1,Jt(m,v,A,N)}finally{an=j,Ql.transition=G}}function Ye(m,v,A,N){var j=an,G=Ql.transition;Ql.transition=null;try{an=4,Jt(m,v,A,N)}finally{an=j,Ql.transition=G}}function Jt(m,v,A,N){if(ge){var j=ur(m,v,A,N);if(j===null)LS(m,v,N,Un,A),Zu(m,N);else if(L1(j,m,v,A,N))N.stopPropagation();else if(Zu(m,N),v&4&&-1<rg.indexOf(m)){for(;j!==null;){var G=Ao(j);if(G!==null&&us(G),G=ur(m,v,A,N),G===null&&LS(m,v,N,Un,A),G===j)break;j=G}j!==null&&N.stopPropagation()}else LS(m,v,N,null,A)}}var Un=null;function ur(m,v,A,N){if(Un=null,m=zs(N),m=Zc(m),m!==null)if(v=Di(m),v===null)m=null;else if(A=v.tag,A===13){if(m=Qo(v),m!==null)return m;m=null}else if(A===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;m=null}else v!==m&&(m=null);return Un=m,null}function Fr(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gf()){case Ss:return 1;case mu:return 4;case as:case Xu:return 16;case Yf:return 536870912;default:return 16}default:return 16}}var un=null,vr=null,Ir=null;function ls(){if(Ir)return Ir;var m,v=vr,A=v.length,N,j="value"in un?un.value:un.textContent,G=j.length;for(m=0;m<A&&v[m]===j[m];m++);var se=A-m;for(N=1;N<=se&&v[A-N]===j[G-N];N++);return Ir=j.slice(m,1<N?1-N:void 0)}function Da(m){var v=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&v===13&&(m=13)):m=v,m===10&&(m=13),32<=m||m===13?m:0}function bi(){return!0}function Kc(){return!1}function Qi(m){function v(A,N,j,G,se){this._reactName=A,this._targetInst=j,this.type=N,this.nativeEvent=G,this.target=se,this.currentTarget=null;for(var ve in m)m.hasOwnProperty(ve)&&(A=m[ve],this[ve]=A?A(G):G[ve]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?bi:Kc,this.isPropagationStopped=Kc,this}return q(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),v}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},om=Qi(el),Jl=q({},el,{view:0,detail:0}),Hx=Qi(Jl),Gs,Qf,ks,am=q({},Jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xc,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==ks&&(ks&&m.type==="mousemove"?(Gs=m.screenX-ks.screenX,Qf=m.screenY-ks.screenY):Qf=Gs=0,ks=m),Gs)},movementY:function(m){return"movementY"in m?m.movementY:Qf}}),um=Qi(am),tl=q({},am,{dataTransfer:0}),lm=Qi(tl),yh=q({},Jl,{relatedTarget:0}),Gr=Qi(yh),Zl=q({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),ec=Qi(Zl),qx=q({},el,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),sg=Qi(qx),Wx=q({},el,{data:0}),M1=Qi(Wx),og={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},To={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jf(m){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(m):(m=cm[m])?!!v[m]:!1}function Xc(){return Jf}var P=q({},Jl,{key:function(m){if(m.key){var v=og[m.key]||m.key;if(v!=="Unidentified")return v}return m.type==="keypress"?(m=Da(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?To[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xc,charCode:function(m){return m.type==="keypress"?Da(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?Da(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),W=Qi(P),te=q({},am,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ue=Qi(te),Fe=q({},Jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xc}),Ke=Qi(Fe),Lt=q({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lr=Qi(Lt),Is=q({},am,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),lr=Qi(Is),Br=[9,13,27,32],zi=a&&"CompositionEvent"in window,So=null;a&&"documentMode"in document&&(So=document.documentMode);var Na=a&&"TextEvent"in window&&!So,vh=a&&(!zi||So&&8<So&&11>=So),ag=" ",MR=!1;function FR(m,v){switch(m){case"keyup":return Br.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BR(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var ug=!1;function lg(m,v){switch(m){case"compositionend":return BR(v);case"keypress":return v.which!==32?null:(MR=!0,ag);case"textInput":return m=v.data,m===ag&&MR?null:m;default:return null}}function Y5(m,v){if(ug)return m==="compositionend"||!zi&&FR(m,v)?(m=ls(),Ir=vr=un=null,ug=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return vh&&v.locale!=="ko"?null:v.data;default:return null}}var K5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gx(m){var v=m&&m.nodeName&&m.nodeName.toLowerCase();return v==="input"?!!K5[m.type]:v==="textarea"}function DS(m,v,A,N){Vs(N),v=nw(v,"onChange"),0<v.length&&(A=new om("onChange","change",null,A,N),m.push({event:A,listeners:v}))}var nl=null,bh=null;function X5(m){WR(m,0)}function Yx(m){var v=Vn(m);if(de(v))return m}function Q5(m,v){if(m==="change")return v}var fm=!1;if(a){var gu;if(a){var Kx="oninput"in document;if(!Kx){var jR=document.createElement("div");jR.setAttribute("oninput","return;"),Kx=typeof jR.oninput=="function"}gu=Kx}else gu=!1;fm=gu&&(!document.documentMode||9<document.documentMode)}function UR(){nl&&(nl.detachEvent("onpropertychange",zR),bh=nl=null)}function zR(m){if(m.propertyName==="value"&&Yx(bh)){var v=[];DS(v,bh,m,zs(m)),ui(X5,v)}}function J5(m,v,A){m==="focusin"?(UR(),nl=v,bh=A,nl.attachEvent("onpropertychange",zR)):m==="focusout"&&UR()}function Z5(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Yx(bh)}function cg(m,v){if(m==="click")return Yx(v)}function Ne(m,v){if(m==="input"||m==="change")return Yx(v)}function nt(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var He=typeof Object.is=="function"?Object.is:nt;function Wt(m,v){if(He(m,v))return!0;if(typeof m!="object"||m===null||typeof v!="object"||v===null)return!1;var A=Object.keys(m),N=Object.keys(v);if(A.length!==N.length)return!1;for(N=0;N<A.length;N++){var j=A[N];if(!u.call(v,j)||!He(m[j],v[j]))return!1}return!0}function In(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function Rr(m,v){var A=In(m);m=0;for(var N;A;){if(A.nodeType===3){if(N=m+A.textContent.length,m<=v&&N>=v)return{node:A,offset:v-m};m=N}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=In(A)}}function cs(m,v){return m&&v?m===v?!0:m&&m.nodeType===3?!1:v&&v.nodeType===3?cs(m,v.parentNode):"contains"in m?m.contains(v):m.compareDocumentPosition?!!(m.compareDocumentPosition(v)&16):!1:!1}function Qr(){for(var m=window,v=$e();v instanceof m.HTMLIFrameElement;){try{var A=typeof v.contentWindow.location.href=="string"}catch{A=!1}if(A)m=v.contentWindow;else break;v=$e(m.document)}return v}function F1(m){var v=m&&m.nodeName&&m.nodeName.toLowerCase();return v&&(v==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||v==="textarea"||m.contentEditable==="true")}function eF(m){var v=Qr(),A=m.focusedElem,N=m.selectionRange;if(v!==A&&A&&A.ownerDocument&&cs(A.ownerDocument.documentElement,A)){if(N!==null&&F1(A)){if(v=N.start,m=N.end,m===void 0&&(m=v),"selectionStart"in A)A.selectionStart=v,A.selectionEnd=Math.min(m,A.value.length);else if(m=(v=A.ownerDocument||document)&&v.defaultView||window,m.getSelection){m=m.getSelection();var j=A.textContent.length,G=Math.min(N.start,j);N=N.end===void 0?G:Math.min(N.end,j),!m.extend&&G>N&&(j=N,N=G,G=j),j=Rr(A,G);var se=Rr(A,N);j&&se&&(m.rangeCount!==1||m.anchorNode!==j.node||m.anchorOffset!==j.offset||m.focusNode!==se.node||m.focusOffset!==se.offset)&&(v=v.createRange(),v.setStart(j.node,j.offset),m.removeAllRanges(),G>N?(m.addRange(v),m.extend(se.node,se.offset)):(v.setEnd(se.node,se.offset),m.addRange(v)))}}for(v=[],m=A;m=m.parentNode;)m.nodeType===1&&v.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<v.length;A++)m=v[A],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var rl=a&&"documentMode"in document&&11>=document.documentMode,Zf=null,NS=null,Qc=null,fg=!1;function B1(m,v,A){var N=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;fg||Zf==null||Zf!==$e(N)||(N=Zf,"selectionStart"in N&&F1(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),Qc&&Wt(Qc,N)||(Qc=N,N=nw(NS,"onSelect"),0<N.length&&(v=new om("onSelect","select",null,v,A),m.push({event:v,listeners:N}),v.target=Zf)))}function Pr(m,v){var A={};return A[m.toLowerCase()]=v.toLowerCase(),A["Webkit"+m]="webkit"+v,A["Moz"+m]="moz"+v,A}var dg={animationend:Pr("Animation","AnimationEnd"),animationiteration:Pr("Animation","AnimationIteration"),animationstart:Pr("Animation","AnimationStart"),transitionend:Pr("Transition","TransitionEnd")},Xx={},j1={};a&&(j1=document.createElement("div").style,"AnimationEvent"in window||(delete dg.animationend.animation,delete dg.animationiteration.animation,delete dg.animationstart.animation),"TransitionEvent"in window||delete dg.transitionend.transition);function Qx(m){if(Xx[m])return Xx[m];if(!dg[m])return m;var v=dg[m],A;for(A in v)if(v.hasOwnProperty(A)&&A in j1)return Xx[m]=v[A];return m}var VR=Qx("animationend"),HR=Qx("animationiteration"),U1=Qx("animationstart"),ed=Qx("transitionend"),z1=new Map,OS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tc(m,v){z1.set(m,v),s(v,[m])}for(var Jx=0;Jx<OS.length;Jx++){var Zx=OS[Jx],ew=Zx.toLowerCase(),qR=Zx[0].toUpperCase()+Zx.slice(1);tc(ew,"on"+qR)}tc(VR,"onAnimationEnd"),tc(HR,"onAnimationIteration"),tc(U1,"onAnimationStart"),tc("dblclick","onDoubleClick"),tc("focusin","onFocus"),tc("focusout","onBlur"),tc(ed,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dm=new Set("cancel close invalid load scroll toggle".split(" ").concat(td));function V1(m,v,A){var N=m.type||"unknown-event";m.currentTarget=A,Ku(N,v,void 0,m),m.currentTarget=null}function WR(m,v){v=(v&4)!==0;for(var A=0;A<m.length;A++){var N=m[A],j=N.event;N=N.listeners;e:{var G=void 0;if(v)for(var se=N.length-1;0<=se;se--){var ve=N[se],Te=ve.instance,qe=ve.currentTarget;if(ve=ve.listener,Te!==G&&j.isPropagationStopped())break e;V1(j,ve,qe),G=Te}else for(se=0;se<N.length;se++){if(ve=N[se],Te=ve.instance,qe=ve.currentTarget,ve=ve.listener,Te!==G&&j.isPropagationStopped())break e;V1(j,ve,qe),G=Te}}}if(ro)throw m=pu,ro=!1,pu=null,m}function xi(m,v){var A=v[sw];A===void 0&&(A=v[sw]=new Set);var N=m+"__bubble";A.has(N)||(tw(v,m,2,!1),A.add(N))}function $S(m,v,A){var N=0;v&&(N|=4),tw(A,m,N,v)}var hm="_reactListening"+Math.random().toString(36).slice(2);function xh(m){if(!m[hm]){m[hm]=!0,r.forEach(function(A){A!=="selectionchange"&&(dm.has(A)||$S(A,!1,m),$S(A,!0,m))});var v=m.nodeType===9?m:m.ownerDocument;v===null||v[hm]||(v[hm]=!0,$S("selectionchange",!1,v))}}function tw(m,v,A,N){switch(Fr(v)){case 1:var j=Se;break;case 4:j=Ye;break;default:j=Jt}A=j.bind(null,v,A,m),j=void 0,!os||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(j=!0),N?j!==void 0?m.addEventListener(v,A,{capture:!0,passive:j}):m.addEventListener(v,A,!0):j!==void 0?m.addEventListener(v,A,{passive:j}):m.addEventListener(v,A,!1)}function LS(m,v,A,N,j){var G=N;if(!(v&1)&&!(v&2)&&N!==null)e:for(;;){if(N===null)return;var se=N.tag;if(se===3||se===4){var ve=N.stateNode.containerInfo;if(ve===j||ve.nodeType===8&&ve.parentNode===j)break;if(se===4)for(se=N.return;se!==null;){var Te=se.tag;if((Te===3||Te===4)&&(Te=se.stateNode.containerInfo,Te===j||Te.nodeType===8&&Te.parentNode===j))return;se=se.return}for(;ve!==null;){if(se=Zc(ve),se===null)return;if(Te=se.tag,Te===5||Te===6){N=G=se;continue e}ve=ve.parentNode}}N=N.return}ui(function(){var qe=G,vt=zs(A),St=[];e:{var mt=z1.get(m);if(mt!==void 0){var Gt=om,en=m;switch(m){case"keypress":if(Da(A)===0)break e;case"keydown":case"keyup":Gt=W;break;case"focusin":en="focus",Gt=Gr;break;case"focusout":en="blur",Gt=Gr;break;case"beforeblur":case"afterblur":Gt=Gr;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Gt=um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Gt=lm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Gt=Ke;break;case VR:case HR:case U1:Gt=ec;break;case ed:Gt=Lr;break;case"scroll":Gt=Hx;break;case"wheel":Gt=lr;break;case"copy":case"cut":case"paste":Gt=sg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Gt=ue}var nn=(v&4)!==0,Hi=!nn&&m==="scroll",Be=nn?mt!==null?mt+"Capture":null:mt;nn=[];for(var Ie=qe,ze;Ie!==null;){ze=Ie;var Rt=ze.stateNode;if(ze.tag===5&&Rt!==null&&(ze=Rt,Be!==null&&(Rt=$r(Ie,Be),Rt!=null&&nn.push(hg(Ie,Rt,ze)))),Hi)break;Ie=Ie.return}0<nn.length&&(mt=new Gt(mt,en,null,A,vt),St.push({event:mt,listeners:nn}))}}if(!(v&7)){e:{if(mt=m==="mouseover"||m==="pointerover",Gt=m==="mouseout"||m==="pointerout",mt&&A!==ir&&(en=A.relatedTarget||A.fromElement)&&(Zc(en)||en[yu]))break e;if((Gt||mt)&&(mt=vt.window===vt?vt:(mt=vt.ownerDocument)?mt.defaultView||mt.parentWindow:window,Gt?(en=A.relatedTarget||A.toElement,Gt=qe,en=en?Zc(en):null,en!==null&&(Hi=Di(en),en!==Hi||en.tag!==5&&en.tag!==6)&&(en=null)):(Gt=null,en=qe),Gt!==en)){if(nn=um,Rt="onMouseLeave",Be="onMouseEnter",Ie="mouse",(m==="pointerout"||m==="pointerover")&&(nn=ue,Rt="onPointerLeave",Be="onPointerEnter",Ie="pointer"),Hi=Gt==null?mt:Vn(Gt),ze=en==null?mt:Vn(en),mt=new nn(Rt,Ie+"leave",Gt,A,vt),mt.target=Hi,mt.relatedTarget=ze,Rt=null,Zc(vt)===qe&&(nn=new nn(Be,Ie+"enter",en,A,vt),nn.target=ze,nn.relatedTarget=Hi,Rt=nn),Hi=Rt,Gt&&en)t:{for(nn=Gt,Be=en,Ie=0,ze=nn;ze;ze=pg(ze))Ie++;for(ze=0,Rt=Be;Rt;Rt=pg(Rt))ze++;for(;0<Ie-ze;)nn=pg(nn),Ie--;for(;0<ze-Ie;)Be=pg(Be),ze--;for(;Ie--;){if(nn===Be||Be!==null&&nn===Be.alternate)break t;nn=pg(nn),Be=pg(Be)}nn=null}else nn=null;Gt!==null&&fs(St,mt,Gt,nn,!1),en!==null&&Hi!==null&&fs(St,Hi,en,nn,!0)}}e:{if(mt=qe?Vn(qe):window,Gt=mt.nodeName&&mt.nodeName.toLowerCase(),Gt==="select"||Gt==="input"&&mt.type==="file")var rn=Q5;else if(Gx(mt))if(fm)rn=Ne;else{rn=Z5;var yn=J5}else(Gt=mt.nodeName)&&Gt.toLowerCase()==="input"&&(mt.type==="checkbox"||mt.type==="radio")&&(rn=cg);if(rn&&(rn=rn(m,qe))){DS(St,rn,A,vt);break e}yn&&yn(m,mt,qe),m==="focusout"&&(yn=mt._wrapperState)&&yn.controlled&&mt.type==="number"&&ut(mt,"number",mt.value)}switch(yn=qe?Vn(qe):window,m){case"focusin":(Gx(yn)||yn.contentEditable==="true")&&(Zf=yn,NS=qe,Qc=null);break;case"focusout":Qc=NS=Zf=null;break;case"mousedown":fg=!0;break;case"contextmenu":case"mouseup":case"dragend":fg=!1,B1(St,A,vt);break;case"selectionchange":if(rl)break;case"keydown":case"keyup":B1(St,A,vt)}var vn;if(zi)e:{switch(m){case"compositionstart":var Sn="onCompositionStart";break e;case"compositionend":Sn="onCompositionEnd";break e;case"compositionupdate":Sn="onCompositionUpdate";break e}Sn=void 0}else ug?FR(m,A)&&(Sn="onCompositionEnd"):m==="keydown"&&A.keyCode===229&&(Sn="onCompositionStart");Sn&&(vh&&A.locale!=="ko"&&(ug||Sn!=="onCompositionStart"?Sn==="onCompositionEnd"&&ug&&(vn=ls()):(un=vt,vr="value"in un?un.value:un.textContent,ug=!0)),yn=nw(qe,Sn),0<yn.length&&(Sn=new M1(Sn,m,null,A,vt),St.push({event:Sn,listeners:yn}),vn?Sn.data=vn:(vn=BR(A),vn!==null&&(Sn.data=vn)))),(vn=Na?lg(m,A):Y5(m,A))&&(qe=nw(qe,"onBeforeInput"),0<qe.length&&(vt=new M1("onBeforeInput","beforeinput",null,A,vt),St.push({event:vt,listeners:qe}),vt.data=vn))}WR(St,v)})}function hg(m,v,A){return{instance:m,listener:v,currentTarget:A}}function nw(m,v){for(var A=v+"Capture",N=[];m!==null;){var j=m,G=j.stateNode;j.tag===5&&G!==null&&(j=G,G=$r(m,A),G!=null&&N.unshift(hg(m,G,j)),G=$r(m,v),G!=null&&N.push(hg(m,G,j))),m=m.return}return N}function pg(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function fs(m,v,A,N,j){for(var G=v._reactName,se=[];A!==null&&A!==N;){var ve=A,Te=ve.alternate,qe=ve.stateNode;if(Te!==null&&Te===N)break;ve.tag===5&&qe!==null&&(ve=qe,j?(Te=$r(A,G),Te!=null&&se.unshift(hg(A,Te,ve))):j||(Te=$r(A,G),Te!=null&&se.push(hg(A,Te,ve)))),A=A.return}se.length!==0&&m.push({event:v,listeners:se})}var Co=/\r\n?/g,tF=/\u0000|\uFFFD/g;function GR(m){return(typeof m=="string"?m:""+m).replace(Co,`
`).replace(tF,"")}function H1(m,v,A){if(v=GR(v),GR(m)!==v&&A)throw Error(n(425))}function rw(){}var q1=null,pm=null;function W1(m,v){return m==="textarea"||m==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var wh=typeof setTimeout=="function"?setTimeout:void 0,G1=typeof clearTimeout=="function"?clearTimeout:void 0,mg=typeof Promise=="function"?Promise:void 0,iw=typeof queueMicrotask=="function"?queueMicrotask:typeof mg<"u"?function(m){return mg.resolve(null).then(m).catch(gg)}:wh;function gg(m){setTimeout(function(){throw m})}function MS(m,v){var A=v,N=0;do{var j=A.nextSibling;if(m.removeChild(A),j&&j.nodeType===8)if(A=j.data,A==="/$"){if(N===0){m.removeChild(j),Kn(v);return}N--}else A!=="$"&&A!=="$?"&&A!=="$!"||N++;A=j}while(A);Kn(v)}function _h(m){for(;m!=null;m=m.nextSibling){var v=m.nodeType;if(v===1||v===3)break;if(v===8){if(v=m.data,v==="$"||v==="$!"||v==="$?")break;if(v==="/$")return null}}return m}function YR(m){m=m.previousSibling;for(var v=0;m;){if(m.nodeType===8){var A=m.data;if(A==="$"||A==="$!"||A==="$?"){if(v===0)return m;v--}else A==="/$"&&v++}m=m.previousSibling}return null}var yg=Math.random().toString(36).slice(2),Jc="__reactFiber$"+yg,Eh="__reactProps$"+yg,yu="__reactContainer$"+yg,sw="__reactEvents$"+yg,oe="__reactListeners$"+yg,vg="__reactHandles$"+yg;function Zc(m){var v=m[Jc];if(v)return v;for(var A=m.parentNode;A;){if(v=A[yu]||A[Jc]){if(A=v.alternate,v.child!==null||A!==null&&A.child!==null)for(m=YR(m);m!==null;){if(A=m[Jc])return A;m=YR(m)}return v}m=A,A=m.parentNode}return null}function Ao(m){return m=m[Jc]||m[yu],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function Vn(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(n(33))}function ow(m){return m[Eh]||null}var FS=[],bg=-1;function Oa(m){return{current:m}}function wi(m){0>bg||(m.current=FS[bg],FS[bg]=null,bg--)}function li(m,v){bg++,FS[bg]=m.current,m.current=v}var Th={},ko=Oa(Th),$a=Oa(!1),ta=Th;function xg(m,v){var A=m.type.contextTypes;if(!A)return Th;var N=m.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===v)return N.__reactInternalMemoizedMaskedChildContext;var j={},G;for(G in A)j[G]=v[G];return N&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=v,m.__reactInternalMemoizedMaskedChildContext=j),j}function La(m){return m=m.childContextTypes,m!=null}function aw(){wi($a),wi(ko)}function KR(m,v,A){if(ko.current!==Th)throw Error(n(168));li(ko,v),li($a,A)}function XR(m,v,A){var N=m.stateNode;if(v=v.childContextTypes,typeof N.getChildContext!="function")return A;N=N.getChildContext();for(var j in N)if(!(j in v))throw Error(n(108,Ee(m)||"Unknown",j));return q({},A,N)}function il(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Th,ta=ko.current,li(ko,m),li($a,$a.current),!0}function QR(m,v,A){var N=m.stateNode;if(!N)throw Error(n(169));A?(m=XR(m,v,ta),N.__reactInternalMemoizedMergedChildContext=m,wi($a),wi(ko),li(ko,m)):wi($a),li($a,A)}var nd=null,uw=!1,BS=!1;function JR(m){nd===null?nd=[m]:nd.push(m)}function mm(m){uw=!0,JR(m)}function Sh(){if(!BS&&nd!==null){BS=!0;var m=0,v=an;try{var A=nd;for(an=1;m<A.length;m++){var N=A[m];do N=N(!0);while(N!==null)}nd=null,uw=!1}catch(j){throw nd!==null&&(nd=nd.slice(m+1)),Gc(Ss,Sh),j}finally{an=v,BS=!1}}return null}var wg=[],Io=0,lw=null,cw=0,sl=[],ol=0,gm=null,ef=1,tf="";function ym(m,v){wg[Io++]=cw,wg[Io++]=lw,lw=m,cw=v}function ZR(m,v,A){sl[ol++]=ef,sl[ol++]=tf,sl[ol++]=gm,gm=m;var N=ef;m=tf;var j=32-As(N)-1;N&=~(1<<j),A+=1;var G=32-As(v)+j;if(30<G){var se=j-j%5;G=(N&(1<<se)-1).toString(32),N>>=se,j-=se,ef=1<<32-As(v)+j|A<<j|N,tf=G+m}else ef=1<<G|A<<j|N,tf=m}function Y1(m){m.return!==null&&(ym(m,1),ZR(m,1,0))}function vm(m){for(;m===lw;)lw=wg[--Io],wg[Io]=null,cw=wg[--Io],wg[Io]=null;for(;m===gm;)gm=sl[--ol],sl[ol]=null,tf=sl[--ol],sl[ol]=null,ef=sl[--ol],sl[ol]=null}var Ro=null,vu=null,_i=!1,nc=null;function nf(m,v){var A=hl(5,null,null,0);A.elementType="DELETED",A.stateNode=v,A.return=m,v=m.deletions,v===null?(m.deletions=[A],m.flags|=16):v.push(A)}function fw(m,v){switch(m.tag){case 5:var A=m.type;return v=v.nodeType!==1||A.toLowerCase()!==v.nodeName.toLowerCase()?null:v,v!==null?(m.stateNode=v,Ro=m,vu=_h(v.firstChild),!0):!1;case 6:return v=m.pendingProps===""||v.nodeType!==3?null:v,v!==null?(m.stateNode=v,Ro=m,vu=null,!0):!1;case 13:return v=v.nodeType!==8?null:v,v!==null?(A=gm!==null?{id:ef,overflow:tf}:null,m.memoizedState={dehydrated:v,treeContext:A,retryLane:1073741824},A=hl(18,null,null,0),A.stateNode=v,A.return=m,m.child=A,Ro=m,vu=null,!0):!1;default:return!1}}function rd(m){return(m.mode&1)!==0&&(m.flags&128)===0}function Ma(m){if(_i){var v=vu;if(v){var A=v;if(!fw(m,v)){if(rd(m))throw Error(n(418));v=_h(A.nextSibling);var N=Ro;v&&fw(m,v)?nf(N,A):(m.flags=m.flags&-4097|2,_i=!1,Ro=m)}}else{if(rd(m))throw Error(n(418));m.flags=m.flags&-4097|2,_i=!1,Ro=m}}}function eP(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;Ro=m}function K1(m){if(m!==Ro)return!1;if(!_i)return eP(m),_i=!0,!1;var v;if((v=m.tag!==3)&&!(v=m.tag!==5)&&(v=m.type,v=v!=="head"&&v!=="body"&&!W1(m.type,m.memoizedProps)),v&&(v=vu)){if(rd(m))throw jS(),Error(n(418));for(;v;)nf(m,v),v=_h(v.nextSibling)}if(eP(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));e:{for(m=m.nextSibling,v=0;m;){if(m.nodeType===8){var A=m.data;if(A==="/$"){if(v===0){vu=_h(m.nextSibling);break e}v--}else A!=="$"&&A!=="$!"&&A!=="$?"||v++}m=m.nextSibling}vu=null}}else vu=Ro?_h(m.stateNode.nextSibling):null;return!0}function jS(){for(var m=vu;m;)m=_h(m.nextSibling)}function rf(){vu=Ro=null,_i=!1}function sf(m){nc===null?nc=[m]:nc.push(m)}var tP=E.ReactCurrentBatchConfig;function X1(m,v,A){if(m=A.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(n(309));var N=A.stateNode}if(!N)throw Error(n(147,m));var j=N,G=""+m;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===G?v.ref:(v=function(se){var ve=j.refs;se===null?delete ve[G]:ve[G]=se},v._stringRef=G,v)}if(typeof m!="string")throw Error(n(284));if(!A._owner)throw Error(n(290,m))}return m}function bm(m,v){throw m=Object.prototype.toString.call(v),Error(n(31,m==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":m))}function nP(m){var v=m._init;return v(m._payload)}function US(m){function v(Be,Ie){if(m){var ze=Be.deletions;ze===null?(Be.deletions=[Ie],Be.flags|=16):ze.push(Ie)}}function A(Be,Ie){if(!m)return null;for(;Ie!==null;)v(Be,Ie),Ie=Ie.sibling;return null}function N(Be,Ie){for(Be=new Map;Ie!==null;)Ie.key!==null?Be.set(Ie.key,Ie):Be.set(Ie.index,Ie),Ie=Ie.sibling;return Be}function j(Be,Ie){return Be=lc(Be,Ie),Be.index=0,Be.sibling=null,Be}function G(Be,Ie,ze){return Be.index=ze,m?(ze=Be.alternate,ze!==null?(ze=ze.index,ze<Ie?(Be.flags|=2,Ie):ze):(Be.flags|=2,Ie)):(Be.flags|=1048576,Ie)}function se(Be){return m&&Be.alternate===null&&(Be.flags|=2),Be}function ve(Be,Ie,ze,Rt){return Ie===null||Ie.tag!==6?(Ie=A2(ze,Be.mode,Rt),Ie.return=Be,Ie):(Ie=j(Ie,ze),Ie.return=Be,Ie)}function Te(Be,Ie,ze,Rt){var rn=ze.type;return rn===I?vt(Be,Ie,ze.props.children,Rt,ze.key):Ie!==null&&(Ie.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===J&&nP(rn)===Ie.type)?(Rt=j(Ie,ze.props),Rt.ref=X1(Be,Ie,ze),Rt.return=Be,Rt):(Rt=Ww(ze.type,ze.key,ze.props,null,Be.mode,Rt),Rt.ref=X1(Be,Ie,ze),Rt.return=Be,Rt)}function qe(Be,Ie,ze,Rt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==ze.containerInfo||Ie.stateNode.implementation!==ze.implementation?(Ie=k2(ze,Be.mode,Rt),Ie.return=Be,Ie):(Ie=j(Ie,ze.children||[]),Ie.return=Be,Ie)}function vt(Be,Ie,ze,Rt,rn){return Ie===null||Ie.tag!==7?(Ie=Rm(ze,Be.mode,Rt,rn),Ie.return=Be,Ie):(Ie=j(Ie,ze),Ie.return=Be,Ie)}function St(Be,Ie,ze){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Ie=A2(""+Ie,Be.mode,ze),Ie.return=Be,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case T:return ze=Ww(Ie.type,Ie.key,Ie.props,null,Be.mode,ze),ze.ref=X1(Be,null,Ie),ze.return=Be,ze;case k:return Ie=k2(Ie,Be.mode,ze),Ie.return=Be,Ie;case J:var Rt=Ie._init;return St(Be,Rt(Ie._payload),ze)}if(Tt(Ie)||ie(Ie))return Ie=Rm(Ie,Be.mode,ze,null),Ie.return=Be,Ie;bm(Be,Ie)}return null}function mt(Be,Ie,ze,Rt){var rn=Ie!==null?Ie.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number")return rn!==null?null:ve(Be,Ie,""+ze,Rt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case T:return ze.key===rn?Te(Be,Ie,ze,Rt):null;case k:return ze.key===rn?qe(Be,Ie,ze,Rt):null;case J:return rn=ze._init,mt(Be,Ie,rn(ze._payload),Rt)}if(Tt(ze)||ie(ze))return rn!==null?null:vt(Be,Ie,ze,Rt,null);bm(Be,ze)}return null}function Gt(Be,Ie,ze,Rt,rn){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number")return Be=Be.get(ze)||null,ve(Ie,Be,""+Rt,rn);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case T:return Be=Be.get(Rt.key===null?ze:Rt.key)||null,Te(Ie,Be,Rt,rn);case k:return Be=Be.get(Rt.key===null?ze:Rt.key)||null,qe(Ie,Be,Rt,rn);case J:var yn=Rt._init;return Gt(Be,Ie,ze,yn(Rt._payload),rn)}if(Tt(Rt)||ie(Rt))return Be=Be.get(ze)||null,vt(Ie,Be,Rt,rn,null);bm(Ie,Rt)}return null}function en(Be,Ie,ze,Rt){for(var rn=null,yn=null,vn=Ie,Sn=Ie=0,Ds=null;vn!==null&&Sn<ze.length;Sn++){vn.index>Sn?(Ds=vn,vn=null):Ds=vn.sibling;var Dr=mt(Be,vn,ze[Sn],Rt);if(Dr===null){vn===null&&(vn=Ds);break}m&&vn&&Dr.alternate===null&&v(Be,vn),Ie=G(Dr,Ie,Sn),yn===null?rn=Dr:yn.sibling=Dr,yn=Dr,vn=Ds}if(Sn===ze.length)return A(Be,vn),_i&&ym(Be,Sn),rn;if(vn===null){for(;Sn<ze.length;Sn++)vn=St(Be,ze[Sn],Rt),vn!==null&&(Ie=G(vn,Ie,Sn),yn===null?rn=vn:yn.sibling=vn,yn=vn);return _i&&ym(Be,Sn),rn}for(vn=N(Be,vn);Sn<ze.length;Sn++)Ds=Gt(vn,Be,Sn,ze[Sn],Rt),Ds!==null&&(m&&Ds.alternate!==null&&vn.delete(Ds.key===null?Sn:Ds.key),Ie=G(Ds,Ie,Sn),yn===null?rn=Ds:yn.sibling=Ds,yn=Ds);return m&&vn.forEach(function(Mh){return v(Be,Mh)}),_i&&ym(Be,Sn),rn}function nn(Be,Ie,ze,Rt){var rn=ie(ze);if(typeof rn!="function")throw Error(n(150));if(ze=rn.call(ze),ze==null)throw Error(n(151));for(var yn=rn=null,vn=Ie,Sn=Ie=0,Ds=null,Dr=ze.next();vn!==null&&!Dr.done;Sn++,Dr=ze.next()){vn.index>Sn?(Ds=vn,vn=null):Ds=vn.sibling;var Mh=mt(Be,vn,Dr.value,Rt);if(Mh===null){vn===null&&(vn=Ds);break}m&&vn&&Mh.alternate===null&&v(Be,vn),Ie=G(Mh,Ie,Sn),yn===null?rn=Mh:yn.sibling=Mh,yn=Mh,vn=Ds}if(Dr.done)return A(Be,vn),_i&&ym(Be,Sn),rn;if(vn===null){for(;!Dr.done;Sn++,Dr=ze.next())Dr=St(Be,Dr.value,Rt),Dr!==null&&(Ie=G(Dr,Ie,Sn),yn===null?rn=Dr:yn.sibling=Dr,yn=Dr);return _i&&ym(Be,Sn),rn}for(vn=N(Be,vn);!Dr.done;Sn++,Dr=ze.next())Dr=Gt(vn,Be,Sn,Dr.value,Rt),Dr!==null&&(m&&Dr.alternate!==null&&vn.delete(Dr.key===null?Sn:Dr.key),Ie=G(Dr,Ie,Sn),yn===null?rn=Dr:yn.sibling=Dr,yn=Dr);return m&&vn.forEach(function(xF){return v(Be,xF)}),_i&&ym(Be,Sn),rn}function Hi(Be,Ie,ze,Rt){if(typeof ze=="object"&&ze!==null&&ze.type===I&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case T:e:{for(var rn=ze.key,yn=Ie;yn!==null;){if(yn.key===rn){if(rn=ze.type,rn===I){if(yn.tag===7){A(Be,yn.sibling),Ie=j(yn,ze.props.children),Ie.return=Be,Be=Ie;break e}}else if(yn.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===J&&nP(rn)===yn.type){A(Be,yn.sibling),Ie=j(yn,ze.props),Ie.ref=X1(Be,yn,ze),Ie.return=Be,Be=Ie;break e}A(Be,yn);break}else v(Be,yn);yn=yn.sibling}ze.type===I?(Ie=Rm(ze.props.children,Be.mode,Rt,ze.key),Ie.return=Be,Be=Ie):(Rt=Ww(ze.type,ze.key,ze.props,null,Be.mode,Rt),Rt.ref=X1(Be,Ie,ze),Rt.return=Be,Be=Rt)}return se(Be);case k:e:{for(yn=ze.key;Ie!==null;){if(Ie.key===yn)if(Ie.tag===4&&Ie.stateNode.containerInfo===ze.containerInfo&&Ie.stateNode.implementation===ze.implementation){A(Be,Ie.sibling),Ie=j(Ie,ze.children||[]),Ie.return=Be,Be=Ie;break e}else{A(Be,Ie);break}else v(Be,Ie);Ie=Ie.sibling}Ie=k2(ze,Be.mode,Rt),Ie.return=Be,Be=Ie}return se(Be);case J:return yn=ze._init,Hi(Be,Ie,yn(ze._payload),Rt)}if(Tt(ze))return en(Be,Ie,ze,Rt);if(ie(ze))return nn(Be,Ie,ze,Rt);bm(Be,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"?(ze=""+ze,Ie!==null&&Ie.tag===6?(A(Be,Ie.sibling),Ie=j(Ie,ze),Ie.return=Be,Be=Ie):(A(Be,Ie),Ie=A2(ze,Be.mode,Rt),Ie.return=Be,Be=Ie),se(Be)):A(Be,Ie)}return Hi}var Vi=US(!0),dw=US(!1),Q1=Oa(null),bu=null,Ch=null,_g=null;function id(){_g=Ch=bu=null}function hw(m){var v=Q1.current;wi(Q1),m._currentValue=v}function so(m,v,A){for(;m!==null;){var N=m.alternate;if((m.childLanes&v)!==v?(m.childLanes|=v,N!==null&&(N.childLanes|=v)):N!==null&&(N.childLanes&v)!==v&&(N.childLanes|=v),m===A)break;m=m.return}}function Ah(m,v){bu=m,_g=Ch=null,m=m.dependencies,m!==null&&m.firstContext!==null&&(m.lanes&v&&(ra=!0),m.firstContext=null)}function al(m){var v=m._currentValue;if(_g!==m)if(m={context:m,memoizedValue:v,next:null},Ch===null){if(bu===null)throw Error(n(308));Ch=m,bu.dependencies={lanes:0,firstContext:m}}else Ch=Ch.next=m;return v}var xm=null;function zS(m){xm===null?xm=[m]:xm.push(m)}function pw(m,v,A,N){var j=v.interleaved;return j===null?(A.next=A,zS(v)):(A.next=j.next,j.next=A),v.interleaved=A,sd(m,N)}function sd(m,v){m.lanes|=v;var A=m.alternate;for(A!==null&&(A.lanes|=v),A=m,m=m.return;m!==null;)m.childLanes|=v,A=m.alternate,A!==null&&(A.childLanes|=v),A=m,m=m.return;return A.tag===3?A.stateNode:null}var ul=!1;function mw(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rP(m,v){m=m.updateQueue,v.updateQueue===m&&(v.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function od(m,v){return{eventTime:m,lane:v,tag:0,payload:null,callback:null,next:null}}function ll(m,v,A){var N=m.updateQueue;if(N===null)return null;if(N=N.shared,br&2){var j=N.pending;return j===null?v.next=v:(v.next=j.next,j.next=v),N.pending=v,sd(m,A)}return j=N.interleaved,j===null?(v.next=v,zS(N)):(v.next=j.next,j.next=v),N.interleaved=v,sd(m,A)}function gw(m,v,A){if(v=v.updateQueue,v!==null&&(v=v.shared,(A&4194240)!==0)){var N=v.lanes;N&=m.pendingLanes,A|=N,v.lanes=A,jn(m,A)}}function iP(m,v){var A=m.updateQueue,N=m.alternate;if(N!==null&&(N=N.updateQueue,A===N)){var j=null,G=null;if(A=A.firstBaseUpdate,A!==null){do{var se={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};G===null?j=G=se:G=G.next=se,A=A.next}while(A!==null);G===null?j=G=v:G=G.next=v}else j=G=v;A={baseState:N.baseState,firstBaseUpdate:j,lastBaseUpdate:G,shared:N.shared,effects:N.effects},m.updateQueue=A;return}m=A.lastBaseUpdate,m===null?A.firstBaseUpdate=v:m.next=v,A.lastBaseUpdate=v}function Eg(m,v,A,N){var j=m.updateQueue;ul=!1;var G=j.firstBaseUpdate,se=j.lastBaseUpdate,ve=j.shared.pending;if(ve!==null){j.shared.pending=null;var Te=ve,qe=Te.next;Te.next=null,se===null?G=qe:se.next=qe,se=Te;var vt=m.alternate;vt!==null&&(vt=vt.updateQueue,ve=vt.lastBaseUpdate,ve!==se&&(ve===null?vt.firstBaseUpdate=qe:ve.next=qe,vt.lastBaseUpdate=Te))}if(G!==null){var St=j.baseState;se=0,vt=qe=Te=null,ve=G;do{var mt=ve.lane,Gt=ve.eventTime;if((N&mt)===mt){vt!==null&&(vt=vt.next={eventTime:Gt,lane:0,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null});e:{var en=m,nn=ve;switch(mt=v,Gt=A,nn.tag){case 1:if(en=nn.payload,typeof en=="function"){St=en.call(Gt,St,mt);break e}St=en;break e;case 3:en.flags=en.flags&-65537|128;case 0:if(en=nn.payload,mt=typeof en=="function"?en.call(Gt,St,mt):en,mt==null)break e;St=q({},St,mt);break e;case 2:ul=!0}}ve.callback!==null&&ve.lane!==0&&(m.flags|=64,mt=j.effects,mt===null?j.effects=[ve]:mt.push(ve))}else Gt={eventTime:Gt,lane:mt,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},vt===null?(qe=vt=Gt,Te=St):vt=vt.next=Gt,se|=mt;if(ve=ve.next,ve===null){if(ve=j.shared.pending,ve===null)break;mt=ve,ve=mt.next,mt.next=null,j.lastBaseUpdate=mt,j.shared.pending=null}}while(!0);if(vt===null&&(Te=St),j.baseState=Te,j.firstBaseUpdate=qe,j.lastBaseUpdate=vt,v=j.shared.interleaved,v!==null){j=v;do se|=j.lane,j=j.next;while(j!==v)}else G===null&&(j.shared.lanes=0);Dh|=se,m.lanes=se,m.memoizedState=St}}function VS(m,v,A){if(m=v.effects,v.effects=null,m!==null)for(v=0;v<m.length;v++){var N=m[v],j=N.callback;if(j!==null){if(N.callback=null,N=A,typeof j!="function")throw Error(n(191,j));j.call(N)}}}var J1={},of=Oa(J1),Z1=Oa(J1),Tg=Oa(J1);function ad(m){if(m===J1)throw Error(n(174));return m}function HS(m,v){switch(li(Tg,v),li(Z1,m),li(of,J1),m=v.nodeType,m){case 9:case 11:v=(v=v.documentElement)?v.namespaceURI:Ve(null,"");break;default:m=m===8?v.parentNode:v,v=m.namespaceURI||null,m=m.tagName,v=Ve(v,m)}wi(of),li(of,v)}function kh(){wi(of),wi(Z1),wi(Tg)}function qS(m){ad(Tg.current);var v=ad(of.current),A=Ve(v,m.type);v!==A&&(li(Z1,m),li(of,A))}function yw(m){Z1.current===m&&(wi(of),wi(Z1))}var Si=Oa(0);function wm(m){for(var v=m;v!==null;){if(v.tag===13){var A=v.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if(v.flags&128)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===m)break;for(;v.sibling===null;){if(v.return===null||v.return===m)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var WS=[];function vw(){for(var m=0;m<WS.length;m++)WS[m]._workInProgressVersionPrimary=null;WS.length=0}var ev=E.ReactCurrentDispatcher,GS=E.ReactCurrentBatchConfig,Ih=0,Oi=null,Ji=null,Rs=null,Sg=!1,tv=!1,_m=0,Xn=0;function Po(){throw Error(n(321))}function YS(m,v){if(v===null)return!1;for(var A=0;A<v.length&&A<m.length;A++)if(!He(m[A],v[A]))return!1;return!0}function Em(m,v,A,N,j,G){if(Ih=G,Oi=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,ev.current=m===null||m.memoizedState===null?rF:Sw,m=A(N,j),tv){G=0;do{if(tv=!1,_m=0,25<=G)throw Error(n(301));G+=1,Rs=Ji=null,v.updateQueue=null,ev.current=Ig,m=A(N,j)}while(tv)}if(ev.current=Tw,v=Ji!==null&&Ji.next!==null,Ih=0,Rs=Ji=Oi=null,Sg=!1,v)throw Error(n(300));return m}function bw(){var m=_m!==0;return _m=0,m}function af(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rs===null?Oi.memoizedState=Rs=m:Rs=Rs.next=m,Rs}function cl(){if(Ji===null){var m=Oi.alternate;m=m!==null?m.memoizedState:null}else m=Ji.next;var v=Rs===null?Oi.memoizedState:Rs.next;if(v!==null)Rs=v,Ji=m;else{if(m===null)throw Error(n(310));Ji=m,m={memoizedState:Ji.memoizedState,baseState:Ji.baseState,baseQueue:Ji.baseQueue,queue:Ji.queue,next:null},Rs===null?Oi.memoizedState=Rs=m:Rs=Rs.next=m}return Rs}function Do(m,v){return typeof v=="function"?v(m):v}function KS(m){var v=cl(),A=v.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=m;var N=Ji,j=N.baseQueue,G=A.pending;if(G!==null){if(j!==null){var se=j.next;j.next=G.next,G.next=se}N.baseQueue=j=G,A.pending=null}if(j!==null){G=j.next,N=N.baseState;var ve=se=null,Te=null,qe=G;do{var vt=qe.lane;if((Ih&vt)===vt)Te!==null&&(Te=Te.next={lane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),N=qe.hasEagerState?qe.eagerState:m(N,qe.action);else{var St={lane:vt,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null};Te===null?(ve=Te=St,se=N):Te=Te.next=St,Oi.lanes|=vt,Dh|=vt}qe=qe.next}while(qe!==null&&qe!==G);Te===null?se=N:Te.next=ve,He(N,v.memoizedState)||(ra=!0),v.memoizedState=N,v.baseState=se,v.baseQueue=Te,A.lastRenderedState=N}if(m=A.interleaved,m!==null){j=m;do G=j.lane,Oi.lanes|=G,Dh|=G,j=j.next;while(j!==m)}else j===null&&(A.lanes=0);return[v.memoizedState,A.dispatch]}function Cg(m){var v=cl(),A=v.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=m;var N=A.dispatch,j=A.pending,G=v.memoizedState;if(j!==null){A.pending=null;var se=j=j.next;do G=m(G,se.action),se=se.next;while(se!==j);He(G,v.memoizedState)||(ra=!0),v.memoizedState=G,v.baseQueue===null&&(v.baseState=G),A.lastRenderedState=G}return[G,N]}function xw(){}function XS(m,v){var A=Oi,N=cl(),j=v(),G=!He(N.memoizedState,j);if(G&&(N.memoizedState=j,ra=!0),N=N.queue,uf(ud.bind(null,A,N,m),[m]),N.getSnapshot!==v||G||Rs!==null&&Rs.memoizedState.tag&1){if(A.flags|=2048,Ag(9,Fa.bind(null,A,N,j,v),void 0,null),Ks===null)throw Error(n(349));Ih&30||QS(A,v,j)}return j}function QS(m,v,A){m.flags|=16384,m={getSnapshot:v,value:A},v=Oi.updateQueue,v===null?(v={lastEffect:null,stores:null},Oi.updateQueue=v,v.stores=[m]):(A=v.stores,A===null?v.stores=[m]:A.push(m))}function Fa(m,v,A,N){v.value=A,v.getSnapshot=N,ww(v)&&JS(m)}function ud(m,v,A){return A(function(){ww(v)&&JS(m)})}function ww(m){var v=m.getSnapshot;m=m.value;try{var A=v();return!He(m,A)}catch{return!0}}function JS(m){var v=sd(m,1);v!==null&&uc(v,m,1,-1)}function nv(m){var v=af();return typeof m=="function"&&(m=m()),v.memoizedState=v.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:m},v.queue=m,m=m.dispatch=cP.bind(null,Oi,m),[v.memoizedState,m]}function Ag(m,v,A,N){return m={tag:m,create:v,destroy:A,deps:N,next:null},v=Oi.updateQueue,v===null?(v={lastEffect:null,stores:null},Oi.updateQueue=v,v.lastEffect=m.next=m):(A=v.lastEffect,A===null?v.lastEffect=m.next=m:(N=A.next,A.next=m,m.next=N,v.lastEffect=m)),m}function _w(){return cl().memoizedState}function rv(m,v,A,N){var j=af();Oi.flags|=m,j.memoizedState=Ag(1|v,A,void 0,N===void 0?null:N)}function kg(m,v,A,N){var j=cl();N=N===void 0?null:N;var G=void 0;if(Ji!==null){var se=Ji.memoizedState;if(G=se.destroy,N!==null&&YS(N,se.deps)){j.memoizedState=Ag(v,A,G,N);return}}Oi.flags|=m,j.memoizedState=Ag(1|v,A,G,N)}function Ew(m,v){return rv(8390656,8,m,v)}function uf(m,v){return kg(2048,8,m,v)}function sP(m,v){return kg(4,2,m,v)}function ld(m,v){return kg(4,4,m,v)}function ZS(m,v){if(typeof v=="function")return m=m(),v(m),function(){v(null)};if(v!=null)return m=m(),v.current=m,function(){v.current=null}}function e2(m,v,A){return A=A!=null?A.concat([m]):null,kg(4,4,ZS.bind(null,v,m),A)}function iv(){}function oP(m,v){var A=cl();v=v===void 0?null:v;var N=A.memoizedState;return N!==null&&v!==null&&YS(v,N[1])?N[0]:(A.memoizedState=[m,v],m)}function aP(m,v){var A=cl();v=v===void 0?null:v;var N=A.memoizedState;return N!==null&&v!==null&&YS(v,N[1])?N[0]:(m=m(),A.memoizedState=[m,v],m)}function uP(m,v,A){return Ih&21?(He(A,v)||(A=At(),Oi.lanes|=A,Dh|=A,m.baseState=!0),v):(m.baseState&&(m.baseState=!1,ra=!0),m.memoizedState=A)}function lP(m,v){var A=an;an=A!==0&&4>A?A:4,m(!0);var N=GS.transition;GS.transition={};try{m(!1),v()}finally{an=A,GS.transition=N}}function t2(){return cl().memoizedState}function nF(m,v,A){var N=$h(m);if(A={lane:N,action:A,hasEagerState:!1,eagerState:null,next:null},n2(m))na(v,A);else if(A=pw(m,v,A,N),A!==null){var j=oa();uc(A,m,N,j),rc(A,v,N)}}function cP(m,v,A){var N=$h(m),j={lane:N,action:A,hasEagerState:!1,eagerState:null,next:null};if(n2(m))na(v,j);else{var G=m.alternate;if(m.lanes===0&&(G===null||G.lanes===0)&&(G=v.lastRenderedReducer,G!==null))try{var se=v.lastRenderedState,ve=G(se,A);if(j.hasEagerState=!0,j.eagerState=ve,He(ve,se)){var Te=v.interleaved;Te===null?(j.next=j,zS(v)):(j.next=Te.next,Te.next=j),v.interleaved=j;return}}catch{}finally{}A=pw(m,v,j,N),A!==null&&(j=oa(),uc(A,m,N,j),rc(A,v,N))}}function n2(m){var v=m.alternate;return m===Oi||v!==null&&v===Oi}function na(m,v){tv=Sg=!0;var A=m.pending;A===null?v.next=v:(v.next=A.next,A.next=v),m.pending=v}function rc(m,v,A){if(A&4194240){var N=v.lanes;N&=m.pendingLanes,A|=N,v.lanes=A,jn(m,A)}}var Tw={readContext:al,useCallback:Po,useContext:Po,useEffect:Po,useImperativeHandle:Po,useInsertionEffect:Po,useLayoutEffect:Po,useMemo:Po,useReducer:Po,useRef:Po,useState:Po,useDebugValue:Po,useDeferredValue:Po,useTransition:Po,useMutableSource:Po,useSyncExternalStore:Po,useId:Po,unstable_isNewReconciler:!1},rF={readContext:al,useCallback:function(m,v){return af().memoizedState=[m,v===void 0?null:v],m},useContext:al,useEffect:Ew,useImperativeHandle:function(m,v,A){return A=A!=null?A.concat([m]):null,rv(4194308,4,ZS.bind(null,v,m),A)},useLayoutEffect:function(m,v){return rv(4194308,4,m,v)},useInsertionEffect:function(m,v){return rv(4,2,m,v)},useMemo:function(m,v){var A=af();return v=v===void 0?null:v,m=m(),A.memoizedState=[m,v],m},useReducer:function(m,v,A){var N=af();return v=A!==void 0?A(v):v,N.memoizedState=N.baseState=v,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:v},N.queue=m,m=m.dispatch=nF.bind(null,Oi,m),[N.memoizedState,m]},useRef:function(m){var v=af();return m={current:m},v.memoizedState=m},useState:nv,useDebugValue:iv,useDeferredValue:function(m){return af().memoizedState=m},useTransition:function(){var m=nv(!1),v=m[0];return m=lP.bind(null,m[1]),af().memoizedState=m,[v,m]},useMutableSource:function(){},useSyncExternalStore:function(m,v,A){var N=Oi,j=af();if(_i){if(A===void 0)throw Error(n(407));A=A()}else{if(A=v(),Ks===null)throw Error(n(349));Ih&30||QS(N,v,A)}j.memoizedState=A;var G={value:A,getSnapshot:v};return j.queue=G,Ew(ud.bind(null,N,G,m),[m]),N.flags|=2048,Ag(9,Fa.bind(null,N,G,A,v),void 0,null),A},useId:function(){var m=af(),v=Ks.identifierPrefix;if(_i){var A=tf,N=ef;A=(N&~(1<<32-As(N)-1)).toString(32)+A,v=":"+v+"R"+A,A=_m++,0<A&&(v+="H"+A.toString(32)),v+=":"}else A=Xn++,v=":"+v+"r"+A.toString(32)+":";return m.memoizedState=v},unstable_isNewReconciler:!1},Sw={readContext:al,useCallback:oP,useContext:al,useEffect:uf,useImperativeHandle:e2,useInsertionEffect:sP,useLayoutEffect:ld,useMemo:aP,useReducer:KS,useRef:_w,useState:function(){return KS(Do)},useDebugValue:iv,useDeferredValue:function(m){var v=cl();return uP(v,Ji.memoizedState,m)},useTransition:function(){var m=KS(Do)[0],v=cl().memoizedState;return[m,v]},useMutableSource:xw,useSyncExternalStore:XS,useId:t2,unstable_isNewReconciler:!1},Ig={readContext:al,useCallback:oP,useContext:al,useEffect:uf,useImperativeHandle:e2,useInsertionEffect:sP,useLayoutEffect:ld,useMemo:aP,useReducer:Cg,useRef:_w,useState:function(){return Cg(Do)},useDebugValue:iv,useDeferredValue:function(m){var v=cl();return Ji===null?v.memoizedState=m:uP(v,Ji.memoizedState,m)},useTransition:function(){var m=Cg(Do)[0],v=cl().memoizedState;return[m,v]},useMutableSource:xw,useSyncExternalStore:XS,useId:t2,unstable_isNewReconciler:!1};function fl(m,v){if(m&&m.defaultProps){v=q({},v),m=m.defaultProps;for(var A in m)v[A]===void 0&&(v[A]=m[A]);return v}return v}function Cw(m,v,A,N){v=m.memoizedState,A=A(N,v),A=A==null?v:q({},v,A),m.memoizedState=A,m.lanes===0&&(m.updateQueue.baseState=A)}var Aw={isMounted:function(m){return(m=m._reactInternals)?Di(m)===m:!1},enqueueSetState:function(m,v,A){m=m._reactInternals;var N=oa(),j=$h(m),G=od(N,j);G.payload=v,A!=null&&(G.callback=A),v=ll(m,G,j),v!==null&&(uc(v,m,j,N),gw(v,m,j))},enqueueReplaceState:function(m,v,A){m=m._reactInternals;var N=oa(),j=$h(m),G=od(N,j);G.tag=1,G.payload=v,A!=null&&(G.callback=A),v=ll(m,G,j),v!==null&&(uc(v,m,j,N),gw(v,m,j))},enqueueForceUpdate:function(m,v){m=m._reactInternals;var A=oa(),N=$h(m),j=od(A,N);j.tag=2,v!=null&&(j.callback=v),v=ll(m,j,N),v!==null&&(uc(v,m,N,A),gw(v,m,N))}};function r2(m,v,A,N,j,G,se){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(N,G,se):v.prototype&&v.prototype.isPureReactComponent?!Wt(A,N)||!Wt(j,G):!0}function Tm(m,v,A){var N=!1,j=Th,G=v.contextType;return typeof G=="object"&&G!==null?G=al(G):(j=La(v)?ta:ko.current,N=v.contextTypes,G=(N=N!=null)?xg(m,j):Th),v=new v(A,G),m.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Aw,m.stateNode=v,v._reactInternals=m,N&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=j,m.__reactInternalMemoizedMaskedChildContext=G),v}function Rg(m,v,A,N){m=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(A,N),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(A,N),v.state!==m&&Aw.enqueueReplaceState(v,v.state,null)}function i2(m,v,A,N){var j=m.stateNode;j.props=A,j.state=m.memoizedState,j.refs={},mw(m);var G=v.contextType;typeof G=="object"&&G!==null?j.context=al(G):(G=La(v)?ta:ko.current,j.context=xg(m,G)),j.state=m.memoizedState,G=v.getDerivedStateFromProps,typeof G=="function"&&(Cw(m,v,G,A),j.state=m.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(v=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),v!==j.state&&Aw.enqueueReplaceState(j,j.state,null),Eg(m,A,j,N),j.state=m.memoizedState),typeof j.componentDidMount=="function"&&(m.flags|=4194308)}function Sm(m,v){try{var A="",N=v;do A+=ee(N),N=N.return;while(N);var j=A}catch(G){j=`
Error generating stack: `+G.message+`
`+G.stack}return{value:m,source:v,stack:j,digest:null}}function kw(m,v,A){return{value:m,source:null,stack:A??null,digest:v??null}}function Pg(m,v){try{console.error(v.value)}catch(A){setTimeout(function(){throw A})}}var fP=typeof WeakMap=="function"?WeakMap:Map;function sv(m,v,A){A=od(-1,A),A.tag=3,A.payload={element:null};var N=v.value;return A.callback=function(){Bw||(Bw=!0,x2=N),Pg(m,v)},A}function Iw(m,v,A){A=od(-1,A),A.tag=3;var N=m.type.getDerivedStateFromError;if(typeof N=="function"){var j=v.value;A.payload=function(){return N(j)},A.callback=function(){Pg(m,v)}}var G=m.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(A.callback=function(){Pg(m,v),typeof N!="function"&&(Nh===null?Nh=new Set([this]):Nh.add(this));var se=v.stack;this.componentDidCatch(v.value,{componentStack:se!==null?se:""})}),A}function ov(m,v,A){var N=m.pingCache;if(N===null){N=m.pingCache=new fP;var j=new Set;N.set(v,j)}else j=N.get(v),j===void 0&&(j=new Set,N.set(v,j));j.has(A)||(j.add(A),m=fF.bind(null,m,v,A),v.then(m,m))}function dP(m){do{var v;if((v=m.tag===13)&&(v=m.memoizedState,v=v!==null?v.dehydrated!==null:!0),v)return m;m=m.return}while(m!==null);return null}function s2(m,v,A,N,j){return m.mode&1?(m.flags|=65536,m.lanes=j,m):(m===v?m.flags|=65536:(m.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(v=od(-1,1),v.tag=2,ll(A,v,1))),A.lanes|=1),m)}var Rw=E.ReactCurrentOwner,ra=!1;function oo(m,v,A,N){v.child=m===null?dw(v,null,A,N):Vi(v,m.child,A,N)}function hP(m,v,A,N,j){A=A.render;var G=v.ref;return Ah(v,j),N=Em(m,v,A,N,G,j),A=bw(),m!==null&&!ra?(v.updateQueue=m.updateQueue,v.flags&=-2053,m.lanes&=~j,ic(m,v,j)):(_i&&A&&Y1(v),v.flags|=1,oo(m,v,N,j),v.child)}function o2(m,v,A,N,j){if(m===null){var G=A.type;return typeof G=="function"&&!qw(G)&&G.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(v.tag=15,v.type=G,lf(m,v,G,N,j)):(m=Ww(A.type,null,N,v,v.mode,j),m.ref=v.ref,m.return=v,v.child=m)}if(G=m.child,!(m.lanes&j)){var se=G.memoizedProps;if(A=A.compare,A=A!==null?A:Wt,A(se,N)&&m.ref===v.ref)return ic(m,v,j)}return v.flags|=1,m=lc(G,N),m.ref=v.ref,m.return=v,v.child=m}function lf(m,v,A,N,j){if(m!==null){var G=m.memoizedProps;if(Wt(G,N)&&m.ref===v.ref)if(ra=!1,v.pendingProps=N=G,(m.lanes&j)!==0)m.flags&131072&&(ra=!0);else return v.lanes=m.lanes,ic(m,v,j)}return l2(m,v,A,N,j)}function a2(m,v,A){var N=v.pendingProps,j=N.children,G=m!==null?m.memoizedState:null;if(N.mode==="hidden")if(!(v.mode&1))v.memoizedState={baseLanes:0,cachePool:null,transitions:null},li($g,wu),wu|=A;else{if(!(A&1073741824))return m=G!==null?G.baseLanes|A:A,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:m,cachePool:null,transitions:null},v.updateQueue=null,li($g,wu),wu|=m,null;v.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=G!==null?G.baseLanes:A,li($g,wu),wu|=N}else G!==null?(N=G.baseLanes|A,v.memoizedState=null):N=A,li($g,wu),wu|=N;return oo(m,v,j,A),v.child}function u2(m,v){var A=v.ref;(m===null&&A!==null||m!==null&&m.ref!==A)&&(v.flags|=512,v.flags|=2097152)}function l2(m,v,A,N,j){var G=La(A)?ta:ko.current;return G=xg(v,G),Ah(v,j),A=Em(m,v,A,N,G,j),N=bw(),m!==null&&!ra?(v.updateQueue=m.updateQueue,v.flags&=-2053,m.lanes&=~j,ic(m,v,j)):(_i&&N&&Y1(v),v.flags|=1,oo(m,v,A,j),v.child)}function c2(m,v,A,N,j){if(La(A)){var G=!0;il(v)}else G=!1;if(Ah(v,j),v.stateNode===null)Dw(m,v),Tm(v,A,N),i2(v,A,N,j),N=!0;else if(m===null){var se=v.stateNode,ve=v.memoizedProps;se.props=ve;var Te=se.context,qe=A.contextType;typeof qe=="object"&&qe!==null?qe=al(qe):(qe=La(A)?ta:ko.current,qe=xg(v,qe));var vt=A.getDerivedStateFromProps,St=typeof vt=="function"||typeof se.getSnapshotBeforeUpdate=="function";St||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(ve!==N||Te!==qe)&&Rg(v,se,N,qe),ul=!1;var mt=v.memoizedState;se.state=mt,Eg(v,N,se,j),Te=v.memoizedState,ve!==N||mt!==Te||$a.current||ul?(typeof vt=="function"&&(Cw(v,A,vt,N),Te=v.memoizedState),(ve=ul||r2(v,A,ve,N,mt,Te,qe))?(St||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(v.flags|=4194308)):(typeof se.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=N,v.memoizedState=Te),se.props=N,se.state=Te,se.context=qe,N=ve):(typeof se.componentDidMount=="function"&&(v.flags|=4194308),N=!1)}else{se=v.stateNode,rP(m,v),ve=v.memoizedProps,qe=v.type===v.elementType?ve:fl(v.type,ve),se.props=qe,St=v.pendingProps,mt=se.context,Te=A.contextType,typeof Te=="object"&&Te!==null?Te=al(Te):(Te=La(A)?ta:ko.current,Te=xg(v,Te));var Gt=A.getDerivedStateFromProps;(vt=typeof Gt=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(ve!==St||mt!==Te)&&Rg(v,se,N,Te),ul=!1,mt=v.memoizedState,se.state=mt,Eg(v,N,se,j);var en=v.memoizedState;ve!==St||mt!==en||$a.current||ul?(typeof Gt=="function"&&(Cw(v,A,Gt,N),en=v.memoizedState),(qe=ul||r2(v,A,qe,N,mt,en,Te)||!1)?(vt||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(N,en,Te),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(N,en,Te)),typeof se.componentDidUpdate=="function"&&(v.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof se.componentDidUpdate!="function"||ve===m.memoizedProps&&mt===m.memoizedState||(v.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||ve===m.memoizedProps&&mt===m.memoizedState||(v.flags|=1024),v.memoizedProps=N,v.memoizedState=en),se.props=N,se.state=en,se.context=Te,N=qe):(typeof se.componentDidUpdate!="function"||ve===m.memoizedProps&&mt===m.memoizedState||(v.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||ve===m.memoizedProps&&mt===m.memoizedState||(v.flags|=1024),N=!1)}return f2(m,v,A,N,G,j)}function f2(m,v,A,N,j,G){u2(m,v);var se=(v.flags&128)!==0;if(!N&&!se)return j&&QR(v,A,!1),ic(m,v,G);N=v.stateNode,Rw.current=v;var ve=se&&typeof A.getDerivedStateFromError!="function"?null:N.render();return v.flags|=1,m!==null&&se?(v.child=Vi(v,m.child,null,G),v.child=Vi(v,null,ve,G)):oo(m,v,ve,G),v.memoizedState=N.state,j&&QR(v,A,!0),v.child}function pP(m){var v=m.stateNode;v.pendingContext?KR(m,v.pendingContext,v.pendingContext!==v.context):v.context&&KR(m,v.context,!1),HS(m,v.containerInfo)}function cf(m,v,A,N,j){return rf(),sf(j),v.flags|=256,oo(m,v,A,N),v.child}var av={dehydrated:null,treeContext:null,retryLane:0};function uv(m){return{baseLanes:m,cachePool:null,transitions:null}}function Pw(m,v,A){var N=v.pendingProps,j=Si.current,G=!1,se=(v.flags&128)!==0,ve;if((ve=se)||(ve=m!==null&&m.memoizedState===null?!1:(j&2)!==0),ve?(G=!0,v.flags&=-129):(m===null||m.memoizedState!==null)&&(j|=1),li(Si,j&1),m===null)return Ma(v),m=v.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?(v.mode&1?m.data==="$!"?v.lanes=8:v.lanes=1073741824:v.lanes=1,null):(se=N.children,m=N.fallback,G?(N=v.mode,G=v.child,se={mode:"hidden",children:se},!(N&1)&&G!==null?(G.childLanes=0,G.pendingProps=se):G=Gw(se,N,0,null),m=Rm(m,N,A,null),G.return=v,m.return=v,G.sibling=m,v.child=G,v.child.memoizedState=uv(A),v.memoizedState=av,m):Dg(v,se));if(j=m.memoizedState,j!==null&&(ve=j.dehydrated,ve!==null))return wn(m,v,se,N,ve,j,A);if(G){G=N.fallback,se=v.mode,j=m.child,ve=j.sibling;var Te={mode:"hidden",children:N.children};return!(se&1)&&v.child!==j?(N=v.child,N.childLanes=0,N.pendingProps=Te,v.deletions=null):(N=lc(j,Te),N.subtreeFlags=j.subtreeFlags&14680064),ve!==null?G=lc(ve,G):(G=Rm(G,se,A,null),G.flags|=2),G.return=v,N.return=v,N.sibling=G,v.child=N,N=G,G=v.child,se=m.child.memoizedState,se=se===null?uv(A):{baseLanes:se.baseLanes|A,cachePool:null,transitions:se.transitions},G.memoizedState=se,G.childLanes=m.childLanes&~A,v.memoizedState=av,N}return G=m.child,m=G.sibling,N=lc(G,{mode:"visible",children:N.children}),!(v.mode&1)&&(N.lanes=A),N.return=v,N.sibling=null,m!==null&&(A=v.deletions,A===null?(v.deletions=[m],v.flags|=16):A.push(m)),v.child=N,v.memoizedState=null,N}function Dg(m,v){return v=Gw({mode:"visible",children:v},m.mode,0,null),v.return=m,m.child=v}function cd(m,v,A,N){return N!==null&&sf(N),Vi(v,m.child,null,A),m=Dg(v,v.pendingProps.children),m.flags|=2,v.memoizedState=null,m}function wn(m,v,A,N,j,G,se){if(A)return v.flags&256?(v.flags&=-257,N=kw(Error(n(422))),cd(m,v,se,N)):v.memoizedState!==null?(v.child=m.child,v.flags|=128,null):(G=N.fallback,j=v.mode,N=Gw({mode:"visible",children:N.children},j,0,null),G=Rm(G,j,se,null),G.flags|=2,N.return=v,G.return=v,N.sibling=G,v.child=N,v.mode&1&&Vi(v,m.child,null,se),v.child.memoizedState=uv(se),v.memoizedState=av,G);if(!(v.mode&1))return cd(m,v,se,null);if(j.data==="$!"){if(N=j.nextSibling&&j.nextSibling.dataset,N)var ve=N.dgst;return N=ve,G=Error(n(419)),N=kw(G,N,void 0),cd(m,v,se,N)}if(ve=(se&m.childLanes)!==0,ra||ve){if(N=Ks,N!==null){switch(se&-se){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=j&(N.suspendedLanes|se)?0:j,j!==0&&j!==G.retryLane&&(G.retryLane=j,sd(m,j),uc(N,m,j,-1))}return C2(),N=kw(Error(n(421))),cd(m,v,se,N)}return j.data==="$?"?(v.flags|=128,v.child=m.child,v=dF.bind(null,m),j._reactRetry=v,null):(m=G.treeContext,vu=_h(j.nextSibling),Ro=v,_i=!0,nc=null,m!==null&&(sl[ol++]=ef,sl[ol++]=tf,sl[ol++]=gm,ef=m.id,tf=m.overflow,gm=v),v=Dg(v,N.children),v.flags|=4096,v)}function lv(m,v,A){m.lanes|=v;var N=m.alternate;N!==null&&(N.lanes|=v),so(m.return,v,A)}function cv(m,v,A,N,j){var G=m.memoizedState;G===null?m.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:N,tail:A,tailMode:j}:(G.isBackwards=v,G.rendering=null,G.renderingStartTime=0,G.last=N,G.tail=A,G.tailMode=j)}function Rh(m,v,A){var N=v.pendingProps,j=N.revealOrder,G=N.tail;if(oo(m,v,N.children,A),N=Si.current,N&2)N=N&1|2,v.flags|=128;else{if(m!==null&&m.flags&128)e:for(m=v.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&lv(m,A,v);else if(m.tag===19)lv(m,A,v);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===v)break e;for(;m.sibling===null;){if(m.return===null||m.return===v)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}N&=1}if(li(Si,N),!(v.mode&1))v.memoizedState=null;else switch(j){case"forwards":for(A=v.child,j=null;A!==null;)m=A.alternate,m!==null&&wm(m)===null&&(j=A),A=A.sibling;A=j,A===null?(j=v.child,v.child=null):(j=A.sibling,A.sibling=null),cv(v,!1,j,A,G);break;case"backwards":for(A=null,j=v.child,v.child=null;j!==null;){if(m=j.alternate,m!==null&&wm(m)===null){v.child=j;break}m=j.sibling,j.sibling=A,A=j,j=m}cv(v,!0,A,null,G);break;case"together":cv(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function Dw(m,v){!(v.mode&1)&&m!==null&&(m.alternate=null,v.alternate=null,v.flags|=2)}function ic(m,v,A){if(m!==null&&(v.dependencies=m.dependencies),Dh|=v.lanes,!(A&v.childLanes))return null;if(m!==null&&v.child!==m.child)throw Error(n(153));if(v.child!==null){for(m=v.child,A=lc(m,m.pendingProps),v.child=A,A.return=v;m.sibling!==null;)m=m.sibling,A=A.sibling=lc(m,m.pendingProps),A.return=v;A.sibling=null}return v.child}function mP(m,v,A){switch(v.tag){case 3:pP(v),rf();break;case 5:qS(v);break;case 1:La(v.type)&&il(v);break;case 4:HS(v,v.stateNode.containerInfo);break;case 10:var N=v.type._context,j=v.memoizedProps.value;li(Q1,N._currentValue),N._currentValue=j;break;case 13:if(N=v.memoizedState,N!==null)return N.dehydrated!==null?(li(Si,Si.current&1),v.flags|=128,null):A&v.child.childLanes?Pw(m,v,A):(li(Si,Si.current&1),m=ic(m,v,A),m!==null?m.sibling:null);li(Si,Si.current&1);break;case 19:if(N=(A&v.childLanes)!==0,m.flags&128){if(N)return Rh(m,v,A);v.flags|=128}if(j=v.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),li(Si,Si.current),N)break;return null;case 22:case 23:return v.lanes=0,a2(m,v,A)}return ic(m,v,A)}var ao,d2,gP,h2;ao=function(m,v){for(var A=v.child;A!==null;){if(A.tag===5||A.tag===6)m.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===v)break;for(;A.sibling===null;){if(A.return===null||A.return===v)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},d2=function(){},gP=function(m,v,A,N){var j=m.memoizedProps;if(j!==N){m=v.stateNode,ad(of.current);var G=null;switch(A){case"input":j=Pe(m,j),N=Pe(m,N),G=[];break;case"select":j=q({},j,{value:void 0}),N=q({},N,{value:void 0}),G=[];break;case"textarea":j=Dt(m,j),N=Dt(m,N),G=[];break;default:typeof j.onClick!="function"&&typeof N.onClick=="function"&&(m.onclick=rw)}Bn(A,N);var se;A=null;for(qe in j)if(!N.hasOwnProperty(qe)&&j.hasOwnProperty(qe)&&j[qe]!=null)if(qe==="style"){var ve=j[qe];for(se in ve)ve.hasOwnProperty(se)&&(A||(A={}),A[se]="")}else qe!=="dangerouslySetInnerHTML"&&qe!=="children"&&qe!=="suppressContentEditableWarning"&&qe!=="suppressHydrationWarning"&&qe!=="autoFocus"&&(i.hasOwnProperty(qe)?G||(G=[]):(G=G||[]).push(qe,null));for(qe in N){var Te=N[qe];if(ve=j!=null?j[qe]:void 0,N.hasOwnProperty(qe)&&Te!==ve&&(Te!=null||ve!=null))if(qe==="style")if(ve){for(se in ve)!ve.hasOwnProperty(se)||Te&&Te.hasOwnProperty(se)||(A||(A={}),A[se]="");for(se in Te)Te.hasOwnProperty(se)&&ve[se]!==Te[se]&&(A||(A={}),A[se]=Te[se])}else A||(G||(G=[]),G.push(qe,A)),A=Te;else qe==="dangerouslySetInnerHTML"?(Te=Te?Te.__html:void 0,ve=ve?ve.__html:void 0,Te!=null&&ve!==Te&&(G=G||[]).push(qe,Te)):qe==="children"?typeof Te!="string"&&typeof Te!="number"||(G=G||[]).push(qe,""+Te):qe!=="suppressContentEditableWarning"&&qe!=="suppressHydrationWarning"&&(i.hasOwnProperty(qe)?(Te!=null&&qe==="onScroll"&&xi("scroll",m),G||ve===Te||(G=[])):(G=G||[]).push(qe,Te))}A&&(G=G||[]).push("style",A);var qe=G;(v.updateQueue=qe)&&(v.flags|=4)}},h2=function(m,v,A,N){A!==N&&(v.flags|=4)};function fv(m,v){if(!_i)switch(m.tailMode){case"hidden":v=m.tail;for(var A=null;v!==null;)v.alternate!==null&&(A=v),v=v.sibling;A===null?m.tail=null:A.sibling=null;break;case"collapsed":A=m.tail;for(var N=null;A!==null;)A.alternate!==null&&(N=A),A=A.sibling;N===null?v||m.tail===null?m.tail=null:m.tail.sibling=null:N.sibling=null}}function uo(m){var v=m.alternate!==null&&m.alternate.child===m.child,A=0,N=0;if(v)for(var j=m.child;j!==null;)A|=j.lanes|j.childLanes,N|=j.subtreeFlags&14680064,N|=j.flags&14680064,j.return=m,j=j.sibling;else for(j=m.child;j!==null;)A|=j.lanes|j.childLanes,N|=j.subtreeFlags,N|=j.flags,j.return=m,j=j.sibling;return m.subtreeFlags|=N,m.childLanes=A,v}function iF(m,v,A){var N=v.pendingProps;switch(vm(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return uo(v),null;case 1:return La(v.type)&&aw(),uo(v),null;case 3:return N=v.stateNode,kh(),wi($a),wi(ko),vw(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(m===null||m.child===null)&&(K1(v)?v.flags|=4:m===null||m.memoizedState.isDehydrated&&!(v.flags&256)||(v.flags|=1024,nc!==null&&(E2(nc),nc=null))),d2(m,v),uo(v),null;case 5:yw(v);var j=ad(Tg.current);if(A=v.type,m!==null&&v.stateNode!=null)gP(m,v,A,N,j),m.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!N){if(v.stateNode===null)throw Error(n(166));return uo(v),null}if(m=ad(of.current),K1(v)){N=v.stateNode,A=v.type;var G=v.memoizedProps;switch(N[Jc]=v,N[Eh]=G,m=(v.mode&1)!==0,A){case"dialog":xi("cancel",N),xi("close",N);break;case"iframe":case"object":case"embed":xi("load",N);break;case"video":case"audio":for(j=0;j<td.length;j++)xi(td[j],N);break;case"source":xi("error",N);break;case"img":case"image":case"link":xi("error",N),xi("load",N);break;case"details":xi("toggle",N);break;case"input":Ze(N,G),xi("invalid",N);break;case"select":N._wrapperState={wasMultiple:!!G.multiple},xi("invalid",N);break;case"textarea":Ue(N,G),xi("invalid",N)}Bn(A,G),j=null;for(var se in G)if(G.hasOwnProperty(se)){var ve=G[se];se==="children"?typeof ve=="string"?N.textContent!==ve&&(G.suppressHydrationWarning!==!0&&H1(N.textContent,ve,m),j=["children",ve]):typeof ve=="number"&&N.textContent!==""+ve&&(G.suppressHydrationWarning!==!0&&H1(N.textContent,ve,m),j=["children",""+ve]):i.hasOwnProperty(se)&&ve!=null&&se==="onScroll"&&xi("scroll",N)}switch(A){case"input":me(N),et(N,G,!0);break;case"textarea":me(N),tn(N);break;case"select":case"option":break;default:typeof G.onClick=="function"&&(N.onclick=rw)}N=j,v.updateQueue=N,N!==null&&(v.flags|=4)}else{se=j.nodeType===9?j:j.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Re(A)),m==="http://www.w3.org/1999/xhtml"?A==="script"?(m=se.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof N.is=="string"?m=se.createElement(A,{is:N.is}):(m=se.createElement(A),A==="select"&&(se=m,N.multiple?se.multiple=!0:N.size&&(se.size=N.size))):m=se.createElementNS(m,A),m[Jc]=v,m[Eh]=N,ao(m,v,!1,!1),v.stateNode=m;e:{switch(se=Xr(A,N),A){case"dialog":xi("cancel",m),xi("close",m),j=N;break;case"iframe":case"object":case"embed":xi("load",m),j=N;break;case"video":case"audio":for(j=0;j<td.length;j++)xi(td[j],m);j=N;break;case"source":xi("error",m),j=N;break;case"img":case"image":case"link":xi("error",m),xi("load",m),j=N;break;case"details":xi("toggle",m),j=N;break;case"input":Ze(m,N),j=Pe(m,N),xi("invalid",m);break;case"option":j=N;break;case"select":m._wrapperState={wasMultiple:!!N.multiple},j=q({},N,{value:void 0}),xi("invalid",m);break;case"textarea":Ue(m,N),j=Dt(m,N),xi("invalid",m);break;default:j=N}Bn(A,j),ve=j;for(G in ve)if(ve.hasOwnProperty(G)){var Te=ve[G];G==="style"?ti(m,Te):G==="dangerouslySetInnerHTML"?(Te=Te?Te.__html:void 0,Te!=null&&$t(m,Te)):G==="children"?typeof Te=="string"?(A!=="textarea"||Te!=="")&&Bt(m,Te):typeof Te=="number"&&Bt(m,""+Te):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(i.hasOwnProperty(G)?Te!=null&&G==="onScroll"&&xi("scroll",m):Te!=null&&_(m,G,Te,se))}switch(A){case"input":me(m),et(m,N,!1);break;case"textarea":me(m),tn(m);break;case"option":N.value!=null&&m.setAttribute("value",""+ye(N.value));break;case"select":m.multiple=!!N.multiple,G=N.value,G!=null?xt(m,!!N.multiple,G,!1):N.defaultValue!=null&&xt(m,!!N.multiple,N.defaultValue,!0);break;default:typeof j.onClick=="function"&&(m.onclick=rw)}switch(A){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}}N&&(v.flags|=4)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return uo(v),null;case 6:if(m&&v.stateNode!=null)h2(m,v,m.memoizedProps,N);else{if(typeof N!="string"&&v.stateNode===null)throw Error(n(166));if(A=ad(Tg.current),ad(of.current),K1(v)){if(N=v.stateNode,A=v.memoizedProps,N[Jc]=v,(G=N.nodeValue!==A)&&(m=Ro,m!==null))switch(m.tag){case 3:H1(N.nodeValue,A,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&H1(N.nodeValue,A,(m.mode&1)!==0)}G&&(v.flags|=4)}else N=(A.nodeType===9?A:A.ownerDocument).createTextNode(N),N[Jc]=v,v.stateNode=N}return uo(v),null;case 13:if(wi(Si),N=v.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(_i&&vu!==null&&v.mode&1&&!(v.flags&128))jS(),rf(),v.flags|=98560,G=!1;else if(G=K1(v),N!==null&&N.dehydrated!==null){if(m===null){if(!G)throw Error(n(318));if(G=v.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(n(317));G[Jc]=v}else rf(),!(v.flags&128)&&(v.memoizedState=null),v.flags|=4;uo(v),G=!1}else nc!==null&&(E2(nc),nc=null),G=!0;if(!G)return v.flags&65536?v:null}return v.flags&128?(v.lanes=A,v):(N=N!==null,N!==(m!==null&&m.memoizedState!==null)&&N&&(v.child.flags|=8192,v.mode&1&&(m===null||Si.current&1?Ps===0&&(Ps=3):C2())),v.updateQueue!==null&&(v.flags|=4),uo(v),null);case 4:return kh(),d2(m,v),m===null&&xh(v.stateNode.containerInfo),uo(v),null;case 10:return hw(v.type._context),uo(v),null;case 17:return La(v.type)&&aw(),uo(v),null;case 19:if(wi(Si),G=v.memoizedState,G===null)return uo(v),null;if(N=(v.flags&128)!==0,se=G.rendering,se===null)if(N)fv(G,!1);else{if(Ps!==0||m!==null&&m.flags&128)for(m=v.child;m!==null;){if(se=wm(m),se!==null){for(v.flags|=128,fv(G,!1),N=se.updateQueue,N!==null&&(v.updateQueue=N,v.flags|=4),v.subtreeFlags=0,N=A,A=v.child;A!==null;)G=A,m=N,G.flags&=14680066,se=G.alternate,se===null?(G.childLanes=0,G.lanes=m,G.child=null,G.subtreeFlags=0,G.memoizedProps=null,G.memoizedState=null,G.updateQueue=null,G.dependencies=null,G.stateNode=null):(G.childLanes=se.childLanes,G.lanes=se.lanes,G.child=se.child,G.subtreeFlags=0,G.deletions=null,G.memoizedProps=se.memoizedProps,G.memoizedState=se.memoizedState,G.updateQueue=se.updateQueue,G.type=se.type,m=se.dependencies,G.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),A=A.sibling;return li(Si,Si.current&1|2),v.child}m=m.sibling}G.tail!==null&&Yn()>Cm&&(v.flags|=128,N=!0,fv(G,!1),v.lanes=4194304)}else{if(!N)if(m=wm(se),m!==null){if(v.flags|=128,N=!0,A=m.updateQueue,A!==null&&(v.updateQueue=A,v.flags|=4),fv(G,!0),G.tail===null&&G.tailMode==="hidden"&&!se.alternate&&!_i)return uo(v),null}else 2*Yn()-G.renderingStartTime>Cm&&A!==1073741824&&(v.flags|=128,N=!0,fv(G,!1),v.lanes=4194304);G.isBackwards?(se.sibling=v.child,v.child=se):(A=G.last,A!==null?A.sibling=se:v.child=se,G.last=se)}return G.tail!==null?(v=G.tail,G.rendering=v,G.tail=v.sibling,G.renderingStartTime=Yn(),v.sibling=null,A=Si.current,li(Si,N?A&1|2:A&1),v):(uo(v),null);case 22:case 23:return S2(),N=v.memoizedState!==null,m!==null&&m.memoizedState!==null!==N&&(v.flags|=8192),N&&v.mode&1?wu&1073741824&&(uo(v),v.subtreeFlags&6&&(v.flags|=8192)):uo(v),null;case 24:return null;case 25:return null}throw Error(n(156,v.tag))}function sF(m,v){switch(vm(v),v.tag){case 1:return La(v.type)&&aw(),m=v.flags,m&65536?(v.flags=m&-65537|128,v):null;case 3:return kh(),wi($a),wi(ko),vw(),m=v.flags,m&65536&&!(m&128)?(v.flags=m&-65537|128,v):null;case 5:return yw(v),null;case 13:if(wi(Si),m=v.memoizedState,m!==null&&m.dehydrated!==null){if(v.alternate===null)throw Error(n(340));rf()}return m=v.flags,m&65536?(v.flags=m&-65537|128,v):null;case 19:return wi(Si),null;case 4:return kh(),null;case 10:return hw(v.type._context),null;case 22:case 23:return S2(),null;case 24:return null;default:return null}}var Nw=!1,Ci=!1,ia=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function Ng(m,v){var A=m.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(N){$i(m,v,N)}else A.current=null}function dv(m,v,A){try{A()}catch(N){$i(m,v,N)}}var yP=!1;function oF(m,v){if(q1=ge,m=Qr(),F1(m)){if("selectionStart"in m)var A={start:m.selectionStart,end:m.selectionEnd};else e:{A=(A=m.ownerDocument)&&A.defaultView||window;var N=A.getSelection&&A.getSelection();if(N&&N.rangeCount!==0){A=N.anchorNode;var j=N.anchorOffset,G=N.focusNode;N=N.focusOffset;try{A.nodeType,G.nodeType}catch{A=null;break e}var se=0,ve=-1,Te=-1,qe=0,vt=0,St=m,mt=null;t:for(;;){for(var Gt;St!==A||j!==0&&St.nodeType!==3||(ve=se+j),St!==G||N!==0&&St.nodeType!==3||(Te=se+N),St.nodeType===3&&(se+=St.nodeValue.length),(Gt=St.firstChild)!==null;)mt=St,St=Gt;for(;;){if(St===m)break t;if(mt===A&&++qe===j&&(ve=se),mt===G&&++vt===N&&(Te=se),(Gt=St.nextSibling)!==null)break;St=mt,mt=St.parentNode}St=Gt}A=ve===-1||Te===-1?null:{start:ve,end:Te}}else A=null}A=A||{start:0,end:0}}else A=null;for(pm={focusedElem:m,selectionRange:A},ge=!1,Xt=v;Xt!==null;)if(v=Xt,m=v.child,(v.subtreeFlags&1028)!==0&&m!==null)m.return=v,Xt=m;else for(;Xt!==null;){v=Xt;try{var en=v.alternate;if(v.flags&1024)switch(v.tag){case 0:case 11:case 15:break;case 1:if(en!==null){var nn=en.memoizedProps,Hi=en.memoizedState,Be=v.stateNode,Ie=Be.getSnapshotBeforeUpdate(v.elementType===v.type?nn:fl(v.type,nn),Hi);Be.__reactInternalSnapshotBeforeUpdate=Ie}break;case 3:var ze=v.stateNode.containerInfo;ze.nodeType===1?ze.textContent="":ze.nodeType===9&&ze.documentElement&&ze.removeChild(ze.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Rt){$i(v,v.return,Rt)}if(m=v.sibling,m!==null){m.return=v.return,Xt=m;break}Xt=v.return}return en=yP,yP=!1,en}function fd(m,v,A){var N=v.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var j=N=N.next;do{if((j.tag&m)===m){var G=j.destroy;j.destroy=void 0,G!==void 0&&dv(v,A,G)}j=j.next}while(j!==N)}}function hv(m,v){if(v=v.updateQueue,v=v!==null?v.lastEffect:null,v!==null){var A=v=v.next;do{if((A.tag&m)===m){var N=A.create;A.destroy=N()}A=A.next}while(A!==v)}}function Ow(m){var v=m.ref;if(v!==null){var A=m.stateNode;switch(m.tag){case 5:m=A;break;default:m=A}typeof v=="function"?v(m):v.current=m}}function vP(m){var v=m.alternate;v!==null&&(m.alternate=null,vP(v)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(v=m.stateNode,v!==null&&(delete v[Jc],delete v[Eh],delete v[sw],delete v[oe],delete v[vg])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function bP(m){return m.tag===5||m.tag===3||m.tag===4}function xP(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||bP(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function p2(m,v,A){var N=m.tag;if(N===5||N===6)m=m.stateNode,v?A.nodeType===8?A.parentNode.insertBefore(m,v):A.insertBefore(m,v):(A.nodeType===8?(v=A.parentNode,v.insertBefore(m,A)):(v=A,v.appendChild(m)),A=A._reactRootContainer,A!=null||v.onclick!==null||(v.onclick=rw));else if(N!==4&&(m=m.child,m!==null))for(p2(m,v,A),m=m.sibling;m!==null;)p2(m,v,A),m=m.sibling}function $w(m,v,A){var N=m.tag;if(N===5||N===6)m=m.stateNode,v?A.insertBefore(m,v):A.appendChild(m);else if(N!==4&&(m=m.child,m!==null))for($w(m,v,A),m=m.sibling;m!==null;)$w(m,v,A),m=m.sibling}var Ys=null,sc=!1;function ff(m,v,A){for(A=A.child;A!==null;)m2(m,v,A),A=A.sibling}function m2(m,v,A){if(Cs&&typeof Cs.onCommitFiberUnmount=="function")try{Cs.onCommitFiberUnmount(Qu,A)}catch{}switch(A.tag){case 5:Ci||Ng(A,v);case 6:var N=Ys,j=sc;Ys=null,ff(m,v,A),Ys=N,sc=j,Ys!==null&&(sc?(m=Ys,A=A.stateNode,m.nodeType===8?m.parentNode.removeChild(A):m.removeChild(A)):Ys.removeChild(A.stateNode));break;case 18:Ys!==null&&(sc?(m=Ys,A=A.stateNode,m.nodeType===8?MS(m.parentNode,A):m.nodeType===1&&MS(m,A),Kn(m)):MS(Ys,A.stateNode));break;case 4:N=Ys,j=sc,Ys=A.stateNode.containerInfo,sc=!0,ff(m,v,A),Ys=N,sc=j;break;case 0:case 11:case 14:case 15:if(!Ci&&(N=A.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){j=N=N.next;do{var G=j,se=G.destroy;G=G.tag,se!==void 0&&(G&2||G&4)&&dv(A,v,se),j=j.next}while(j!==N)}ff(m,v,A);break;case 1:if(!Ci&&(Ng(A,v),N=A.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=A.memoizedProps,N.state=A.memoizedState,N.componentWillUnmount()}catch(ve){$i(A,v,ve)}ff(m,v,A);break;case 21:ff(m,v,A);break;case 22:A.mode&1?(Ci=(N=Ci)||A.memoizedState!==null,ff(m,v,A),Ci=N):ff(m,v,A);break;default:ff(m,v,A)}}function Og(m){var v=m.updateQueue;if(v!==null){m.updateQueue=null;var A=m.stateNode;A===null&&(A=m.stateNode=new ia),v.forEach(function(N){var j=hF.bind(null,m,N);A.has(N)||(A.add(N),N.then(j,j))})}}function xu(m,v){var A=v.deletions;if(A!==null)for(var N=0;N<A.length;N++){var j=A[N];try{var G=m,se=v,ve=se;e:for(;ve!==null;){switch(ve.tag){case 5:Ys=ve.stateNode,sc=!1;break e;case 3:Ys=ve.stateNode.containerInfo,sc=!0;break e;case 4:Ys=ve.stateNode.containerInfo,sc=!0;break e}ve=ve.return}if(Ys===null)throw Error(n(160));m2(G,se,j),Ys=null,sc=!1;var Te=j.alternate;Te!==null&&(Te.return=null),j.return=null}catch(qe){$i(j,v,qe)}}if(v.subtreeFlags&12854)for(v=v.child;v!==null;)g2(v,m),v=v.sibling}function g2(m,v){var A=m.alternate,N=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(xu(v,m),oc(m),N&4){try{fd(3,m,m.return),hv(3,m)}catch(nn){$i(m,m.return,nn)}try{fd(5,m,m.return)}catch(nn){$i(m,m.return,nn)}}break;case 1:xu(v,m),oc(m),N&512&&A!==null&&Ng(A,A.return);break;case 5:if(xu(v,m),oc(m),N&512&&A!==null&&Ng(A,A.return),m.flags&32){var j=m.stateNode;try{Bt(j,"")}catch(nn){$i(m,m.return,nn)}}if(N&4&&(j=m.stateNode,j!=null)){var G=m.memoizedProps,se=A!==null?A.memoizedProps:G,ve=m.type,Te=m.updateQueue;if(m.updateQueue=null,Te!==null)try{ve==="input"&&G.type==="radio"&&G.name!=null&&it(j,G),Xr(ve,se);var qe=Xr(ve,G);for(se=0;se<Te.length;se+=2){var vt=Te[se],St=Te[se+1];vt==="style"?ti(j,St):vt==="dangerouslySetInnerHTML"?$t(j,St):vt==="children"?Bt(j,St):_(j,vt,St,qe)}switch(ve){case"input":Ge(j,G);break;case"textarea":Ft(j,G);break;case"select":var mt=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!G.multiple;var Gt=G.value;Gt!=null?xt(j,!!G.multiple,Gt,!1):mt!==!!G.multiple&&(G.defaultValue!=null?xt(j,!!G.multiple,G.defaultValue,!0):xt(j,!!G.multiple,G.multiple?[]:"",!1))}j[Eh]=G}catch(nn){$i(m,m.return,nn)}}break;case 6:if(xu(v,m),oc(m),N&4){if(m.stateNode===null)throw Error(n(162));j=m.stateNode,G=m.memoizedProps;try{j.nodeValue=G}catch(nn){$i(m,m.return,nn)}}break;case 3:if(xu(v,m),oc(m),N&4&&A!==null&&A.memoizedState.isDehydrated)try{Kn(v.containerInfo)}catch(nn){$i(m,m.return,nn)}break;case 4:xu(v,m),oc(m);break;case 13:xu(v,m),oc(m),j=m.child,j.flags&8192&&(G=j.memoizedState!==null,j.stateNode.isHidden=G,!G||j.alternate!==null&&j.alternate.memoizedState!==null||(b2=Yn())),N&4&&Og(m);break;case 22:if(vt=A!==null&&A.memoizedState!==null,m.mode&1?(Ci=(qe=Ci)||vt,xu(v,m),Ci=qe):xu(v,m),oc(m),N&8192){if(qe=m.memoizedState!==null,(m.stateNode.isHidden=qe)&&!vt&&m.mode&1)for(Xt=m,vt=m.child;vt!==null;){for(St=Xt=vt;Xt!==null;){switch(mt=Xt,Gt=mt.child,mt.tag){case 0:case 11:case 14:case 15:fd(4,mt,mt.return);break;case 1:Ng(mt,mt.return);var en=mt.stateNode;if(typeof en.componentWillUnmount=="function"){N=mt,A=mt.return;try{v=N,en.props=v.memoizedProps,en.state=v.memoizedState,en.componentWillUnmount()}catch(nn){$i(N,A,nn)}}break;case 5:Ng(mt,mt.return);break;case 22:if(mt.memoizedState!==null){Ph(St);continue}}Gt!==null?(Gt.return=mt,Xt=Gt):Ph(St)}vt=vt.sibling}e:for(vt=null,St=m;;){if(St.tag===5){if(vt===null){vt=St;try{j=St.stateNode,qe?(G=j.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none"):(ve=St.stateNode,Te=St.memoizedProps.style,se=Te!=null&&Te.hasOwnProperty("display")?Te.display:null,ve.style.display=dr("display",se))}catch(nn){$i(m,m.return,nn)}}}else if(St.tag===6){if(vt===null)try{St.stateNode.nodeValue=qe?"":St.memoizedProps}catch(nn){$i(m,m.return,nn)}}else if((St.tag!==22&&St.tag!==23||St.memoizedState===null||St===m)&&St.child!==null){St.child.return=St,St=St.child;continue}if(St===m)break e;for(;St.sibling===null;){if(St.return===null||St.return===m)break e;vt===St&&(vt=null),St=St.return}vt===St&&(vt=null),St.sibling.return=St.return,St=St.sibling}}break;case 19:xu(v,m),oc(m),N&4&&Og(m);break;case 21:break;default:xu(v,m),oc(m)}}function oc(m){var v=m.flags;if(v&2){try{e:{for(var A=m.return;A!==null;){if(bP(A)){var N=A;break e}A=A.return}throw Error(n(160))}switch(N.tag){case 5:var j=N.stateNode;N.flags&32&&(Bt(j,""),N.flags&=-33);var G=xP(m);$w(m,G,j);break;case 3:case 4:var se=N.stateNode.containerInfo,ve=xP(m);p2(m,ve,se);break;default:throw Error(n(161))}}catch(Te){$i(m,m.return,Te)}m.flags&=-3}v&4096&&(m.flags&=-4097)}function Lw(m,v,A){Xt=m,y2(m)}function y2(m,v,A){for(var N=(m.mode&1)!==0;Xt!==null;){var j=Xt,G=j.child;if(j.tag===22&&N){var se=j.memoizedState!==null||Nw;if(!se){var ve=j.alternate,Te=ve!==null&&ve.memoizedState!==null||Ci;ve=Nw;var qe=Ci;if(Nw=se,(Ci=Te)&&!qe)for(Xt=j;Xt!==null;)se=Xt,Te=se.child,se.tag===22&&se.memoizedState!==null?wP(j):Te!==null?(Te.return=se,Xt=Te):wP(j);for(;G!==null;)Xt=G,y2(G),G=G.sibling;Xt=j,Nw=ve,Ci=qe}ac(m)}else j.subtreeFlags&8772&&G!==null?(G.return=j,Xt=G):ac(m)}}function ac(m){for(;Xt!==null;){var v=Xt;if(v.flags&8772){var A=v.alternate;try{if(v.flags&8772)switch(v.tag){case 0:case 11:case 15:Ci||hv(5,v);break;case 1:var N=v.stateNode;if(v.flags&4&&!Ci)if(A===null)N.componentDidMount();else{var j=v.elementType===v.type?A.memoizedProps:fl(v.type,A.memoizedProps);N.componentDidUpdate(j,A.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var G=v.updateQueue;G!==null&&VS(v,G,N);break;case 3:var se=v.updateQueue;if(se!==null){if(A=null,v.child!==null)switch(v.child.tag){case 5:A=v.child.stateNode;break;case 1:A=v.child.stateNode}VS(v,se,A)}break;case 5:var ve=v.stateNode;if(A===null&&v.flags&4){A=ve;var Te=v.memoizedProps;switch(v.type){case"button":case"input":case"select":case"textarea":Te.autoFocus&&A.focus();break;case"img":Te.src&&(A.src=Te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(v.memoizedState===null){var qe=v.alternate;if(qe!==null){var vt=qe.memoizedState;if(vt!==null){var St=vt.dehydrated;St!==null&&Kn(St)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ci||v.flags&512&&Ow(v)}catch(mt){$i(v,v.return,mt)}}if(v===m){Xt=null;break}if(A=v.sibling,A!==null){A.return=v.return,Xt=A;break}Xt=v.return}}function Ph(m){for(;Xt!==null;){var v=Xt;if(v===m){Xt=null;break}var A=v.sibling;if(A!==null){A.return=v.return,Xt=A;break}Xt=v.return}}function wP(m){for(;Xt!==null;){var v=Xt;try{switch(v.tag){case 0:case 11:case 15:var A=v.return;try{hv(4,v)}catch(Te){$i(v,A,Te)}break;case 1:var N=v.stateNode;if(typeof N.componentDidMount=="function"){var j=v.return;try{N.componentDidMount()}catch(Te){$i(v,j,Te)}}var G=v.return;try{Ow(v)}catch(Te){$i(v,G,Te)}break;case 5:var se=v.return;try{Ow(v)}catch(Te){$i(v,se,Te)}}}catch(Te){$i(v,v.return,Te)}if(v===m){Xt=null;break}var ve=v.sibling;if(ve!==null){ve.return=v.return,Xt=ve;break}Xt=v.return}}var _P=Math.ceil,Mw=E.ReactCurrentDispatcher,v2=E.ReactCurrentOwner,dl=E.ReactCurrentBatchConfig,br=0,Ks=null,ds=null,lo=0,wu=0,$g=Oa(0),Ps=0,pv=null,Dh=0,mv=0,Fw=0,gv=null,Ba=null,b2=0,Cm=1/0,dd=null,Bw=!1,x2=null,Nh=null,jw=!1,Oh=null,sa=0,yv=0,w2=null,Uw=-1,vv=0;function oa(){return br&6?Yn():Uw!==-1?Uw:Uw=Yn()}function $h(m){return m.mode&1?br&2&&lo!==0?lo&-lo:tP.transition!==null?(vv===0&&(vv=At()),vv):(m=an,m!==0||(m=window.event,m=m===void 0?16:Fr(m.type)),m):1}function uc(m,v,A,N){if(50<yv)throw yv=0,w2=null,Error(n(185));Tn(m,A,N),(!(br&2)||m!==Ks)&&(m===Ks&&(!(br&2)&&(mv|=A),Ps===4&&Lh(m,lo)),ja(m,N),A===1&&br===0&&!(v.mode&1)&&(Cm=Yn()+500,uw&&Sh()))}function ja(m,v){var A=m.callbackNode;gt(m,v);var N=tt(m,m===Ks?lo:0);if(N===0)A!==null&&ql(A),m.callbackNode=null,m.callbackPriority=0;else if(v=N&-N,m.callbackPriority!==v){if(A!=null&&ql(A),v===1)m.tag===0?mm(EP.bind(null,m)):JR(EP.bind(null,m)),iw(function(){!(br&6)&&Sh()}),A=null;else{switch(Zn(N)){case 1:A=Ss;break;case 4:A=mu;break;case 16:A=as;break;case 536870912:A=Yf;break;default:A=as}A=RP(A,zw.bind(null,m))}m.callbackPriority=v,m.callbackNode=A}}function zw(m,v){if(Uw=-1,vv=0,br&6)throw Error(n(327));var A=m.callbackNode;if(Lg()&&m.callbackNode!==A)return null;var N=tt(m,m===Ks?lo:0);if(N===0)return null;if(N&30||N&m.expiredLanes||v)v=Vw(m,N);else{v=N;var j=br;br|=2;var G=SP();(Ks!==m||lo!==v)&&(dd=null,Cm=Yn()+500,km(m,v));do try{lF();break}catch(ve){TP(m,ve)}while(!0);id(),Mw.current=G,br=j,ds!==null?v=0:(Ks=null,lo=0,v=Ps)}if(v!==0){if(v===2&&(j=pt(m),j!==0&&(N=j,v=_2(m,j))),v===1)throw A=pv,km(m,0),Lh(m,N),ja(m,Yn()),A;if(v===6)Lh(m,N);else{if(j=m.current.alternate,!(N&30)&&!aF(j)&&(v=Vw(m,N),v===2&&(G=pt(m),G!==0&&(N=G,v=_2(m,G))),v===1))throw A=pv,km(m,0),Lh(m,N),ja(m,Yn()),A;switch(m.finishedWork=j,m.finishedLanes=N,v){case 0:case 1:throw Error(n(345));case 2:Im(m,Ba,dd);break;case 3:if(Lh(m,N),(N&130023424)===N&&(v=b2+500-Yn(),10<v)){if(tt(m,0)!==0)break;if(j=m.suspendedLanes,(j&N)!==N){oa(),m.pingedLanes|=m.suspendedLanes&j;break}m.timeoutHandle=wh(Im.bind(null,m,Ba,dd),v);break}Im(m,Ba,dd);break;case 4:if(Lh(m,N),(N&4194240)===N)break;for(v=m.eventTimes,j=-1;0<N;){var se=31-As(N);G=1<<se,se=v[se],se>j&&(j=se),N&=~G}if(N=j,N=Yn()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*_P(N/1960))-N,10<N){m.timeoutHandle=wh(Im.bind(null,m,Ba,dd),N);break}Im(m,Ba,dd);break;case 5:Im(m,Ba,dd);break;default:throw Error(n(329))}}}return ja(m,Yn()),m.callbackNode===A?zw.bind(null,m):null}function _2(m,v){var A=gv;return m.current.memoizedState.isDehydrated&&(km(m,v).flags|=256),m=Vw(m,v),m!==2&&(v=Ba,Ba=A,v!==null&&E2(v)),m}function E2(m){Ba===null?Ba=m:Ba.push.apply(Ba,m)}function aF(m){for(var v=m;;){if(v.flags&16384){var A=v.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var N=0;N<A.length;N++){var j=A[N],G=j.getSnapshot;j=j.value;try{if(!He(G(),j))return!1}catch{return!1}}}if(A=v.child,v.subtreeFlags&16384&&A!==null)A.return=v,v=A;else{if(v===m)break;for(;v.sibling===null;){if(v.return===null||v.return===m)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function Lh(m,v){for(v&=~Fw,v&=~mv,m.suspendedLanes|=v,m.pingedLanes&=~v,m=m.expirationTimes;0<v;){var A=31-As(v),N=1<<A;m[A]=-1,v&=~N}}function EP(m){if(br&6)throw Error(n(327));Lg();var v=tt(m,0);if(!(v&1))return ja(m,Yn()),null;var A=Vw(m,v);if(m.tag!==0&&A===2){var N=pt(m);N!==0&&(v=N,A=_2(m,N))}if(A===1)throw A=pv,km(m,0),Lh(m,v),ja(m,Yn()),A;if(A===6)throw Error(n(345));return m.finishedWork=m.current.alternate,m.finishedLanes=v,Im(m,Ba,dd),ja(m,Yn()),null}function T2(m,v){var A=br;br|=1;try{return m(v)}finally{br=A,br===0&&(Cm=Yn()+500,uw&&Sh())}}function Am(m){Oh!==null&&Oh.tag===0&&!(br&6)&&Lg();var v=br;br|=1;var A=dl.transition,N=an;try{if(dl.transition=null,an=1,m)return m()}finally{an=N,dl.transition=A,br=v,!(br&6)&&Sh()}}function S2(){wu=$g.current,wi($g)}function km(m,v){m.finishedWork=null,m.finishedLanes=0;var A=m.timeoutHandle;if(A!==-1&&(m.timeoutHandle=-1,G1(A)),ds!==null)for(A=ds.return;A!==null;){var N=A;switch(vm(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&aw();break;case 3:kh(),wi($a),wi(ko),vw();break;case 5:yw(N);break;case 4:kh();break;case 13:wi(Si);break;case 19:wi(Si);break;case 10:hw(N.type._context);break;case 22:case 23:S2()}A=A.return}if(Ks=m,ds=m=lc(m.current,null),lo=wu=v,Ps=0,pv=null,Fw=mv=Dh=0,Ba=gv=null,xm!==null){for(v=0;v<xm.length;v++)if(A=xm[v],N=A.interleaved,N!==null){A.interleaved=null;var j=N.next,G=A.pending;if(G!==null){var se=G.next;G.next=j,N.next=se}A.pending=N}xm=null}return m}function TP(m,v){do{var A=ds;try{if(id(),ev.current=Tw,Sg){for(var N=Oi.memoizedState;N!==null;){var j=N.queue;j!==null&&(j.pending=null),N=N.next}Sg=!1}if(Ih=0,Rs=Ji=Oi=null,tv=!1,_m=0,v2.current=null,A===null||A.return===null){Ps=1,pv=v,ds=null;break}e:{var G=m,se=A.return,ve=A,Te=v;if(v=lo,ve.flags|=32768,Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var qe=Te,vt=ve,St=vt.tag;if(!(vt.mode&1)&&(St===0||St===11||St===15)){var mt=vt.alternate;mt?(vt.updateQueue=mt.updateQueue,vt.memoizedState=mt.memoizedState,vt.lanes=mt.lanes):(vt.updateQueue=null,vt.memoizedState=null)}var Gt=dP(se);if(Gt!==null){Gt.flags&=-257,s2(Gt,se,ve,G,v),Gt.mode&1&&ov(G,qe,v),v=Gt,Te=qe;var en=v.updateQueue;if(en===null){var nn=new Set;nn.add(Te),v.updateQueue=nn}else en.add(Te);break e}else{if(!(v&1)){ov(G,qe,v),C2();break e}Te=Error(n(426))}}else if(_i&&ve.mode&1){var Hi=dP(se);if(Hi!==null){!(Hi.flags&65536)&&(Hi.flags|=256),s2(Hi,se,ve,G,v),sf(Sm(Te,ve));break e}}G=Te=Sm(Te,ve),Ps!==4&&(Ps=2),gv===null?gv=[G]:gv.push(G),G=se;do{switch(G.tag){case 3:G.flags|=65536,v&=-v,G.lanes|=v;var Be=sv(G,Te,v);iP(G,Be);break e;case 1:ve=Te;var Ie=G.type,ze=G.stateNode;if(!(G.flags&128)&&(typeof Ie.getDerivedStateFromError=="function"||ze!==null&&typeof ze.componentDidCatch=="function"&&(Nh===null||!Nh.has(ze)))){G.flags|=65536,v&=-v,G.lanes|=v;var Rt=Iw(G,ve,v);iP(G,Rt);break e}}G=G.return}while(G!==null)}AP(A)}catch(rn){v=rn,ds===A&&A!==null&&(ds=A=A.return);continue}break}while(!0)}function SP(){var m=Mw.current;return Mw.current=Tw,m===null?Tw:m}function C2(){(Ps===0||Ps===3||Ps===2)&&(Ps=4),Ks===null||!(Dh&268435455)&&!(mv&268435455)||Lh(Ks,lo)}function Vw(m,v){var A=br;br|=2;var N=SP();(Ks!==m||lo!==v)&&(dd=null,km(m,v));do try{uF();break}catch(j){TP(m,j)}while(!0);if(id(),br=A,Mw.current=N,ds!==null)throw Error(n(261));return Ks=null,lo=0,Ps}function uF(){for(;ds!==null;)CP(ds)}function lF(){for(;ds!==null&&!Wl();)CP(ds)}function CP(m){var v=IP(m.alternate,m,wu);m.memoizedProps=m.pendingProps,v===null?AP(m):ds=v,v2.current=null}function AP(m){var v=m;do{var A=v.alternate;if(m=v.return,v.flags&32768){if(A=sF(A,v),A!==null){A.flags&=32767,ds=A;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Ps=6,ds=null;return}}else if(A=iF(A,v,wu),A!==null){ds=A;return}if(v=v.sibling,v!==null){ds=v;return}ds=v=m}while(v!==null);Ps===0&&(Ps=5)}function Im(m,v,A){var N=an,j=dl.transition;try{dl.transition=null,an=1,cF(m,v,A,N)}finally{dl.transition=j,an=N}return null}function cF(m,v,A,N){do Lg();while(Oh!==null);if(br&6)throw Error(n(327));A=m.finishedWork;var j=m.finishedLanes;if(A===null)return null;if(m.finishedWork=null,m.finishedLanes=0,A===m.current)throw Error(n(177));m.callbackNode=null,m.callbackPriority=0;var G=A.lanes|A.childLanes;if(on(m,G),m===Ks&&(ds=Ks=null,lo=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||jw||(jw=!0,RP(as,function(){return Lg(),null})),G=(A.flags&15990)!==0,A.subtreeFlags&15990||G){G=dl.transition,dl.transition=null;var se=an;an=1;var ve=br;br|=4,v2.current=null,oF(m,A),g2(A,m),eF(pm),ge=!!q1,pm=q1=null,m.current=A,Lw(A),Gl(),br=ve,an=se,dl.transition=G}else m.current=A;if(jw&&(jw=!1,Oh=m,sa=j),G=m.pendingLanes,G===0&&(Nh=null),gh(A.stateNode),ja(m,Yn()),v!==null)for(N=m.onRecoverableError,A=0;A<v.length;A++)j=v[A],N(j.value,{componentStack:j.stack,digest:j.digest});if(Bw)throw Bw=!1,m=x2,x2=null,m;return sa&1&&m.tag!==0&&Lg(),G=m.pendingLanes,G&1?m===w2?yv++:(yv=0,w2=m):yv=0,Sh(),null}function Lg(){if(Oh!==null){var m=Zn(sa),v=dl.transition,A=an;try{if(dl.transition=null,an=16>m?16:m,Oh===null)var N=!1;else{if(m=Oh,Oh=null,sa=0,br&6)throw Error(n(331));var j=br;for(br|=4,Xt=m.current;Xt!==null;){var G=Xt,se=G.child;if(Xt.flags&16){var ve=G.deletions;if(ve!==null){for(var Te=0;Te<ve.length;Te++){var qe=ve[Te];for(Xt=qe;Xt!==null;){var vt=Xt;switch(vt.tag){case 0:case 11:case 15:fd(8,vt,G)}var St=vt.child;if(St!==null)St.return=vt,Xt=St;else for(;Xt!==null;){vt=Xt;var mt=vt.sibling,Gt=vt.return;if(vP(vt),vt===qe){Xt=null;break}if(mt!==null){mt.return=Gt,Xt=mt;break}Xt=Gt}}}var en=G.alternate;if(en!==null){var nn=en.child;if(nn!==null){en.child=null;do{var Hi=nn.sibling;nn.sibling=null,nn=Hi}while(nn!==null)}}Xt=G}}if(G.subtreeFlags&2064&&se!==null)se.return=G,Xt=se;else e:for(;Xt!==null;){if(G=Xt,G.flags&2048)switch(G.tag){case 0:case 11:case 15:fd(9,G,G.return)}var Be=G.sibling;if(Be!==null){Be.return=G.return,Xt=Be;break e}Xt=G.return}}var Ie=m.current;for(Xt=Ie;Xt!==null;){se=Xt;var ze=se.child;if(se.subtreeFlags&2064&&ze!==null)ze.return=se,Xt=ze;else e:for(se=Ie;Xt!==null;){if(ve=Xt,ve.flags&2048)try{switch(ve.tag){case 0:case 11:case 15:hv(9,ve)}}catch(rn){$i(ve,ve.return,rn)}if(ve===se){Xt=null;break e}var Rt=ve.sibling;if(Rt!==null){Rt.return=ve.return,Xt=Rt;break e}Xt=ve.return}}if(br=j,Sh(),Cs&&typeof Cs.onPostCommitFiberRoot=="function")try{Cs.onPostCommitFiberRoot(Qu,m)}catch{}N=!0}return N}finally{an=A,dl.transition=v}}return!1}function Hw(m,v,A){v=Sm(A,v),v=sv(m,v,1),m=ll(m,v,1),v=oa(),m!==null&&(Tn(m,1,v),ja(m,v))}function $i(m,v,A){if(m.tag===3)Hw(m,m,A);else for(;v!==null;){if(v.tag===3){Hw(v,m,A);break}else if(v.tag===1){var N=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Nh===null||!Nh.has(N))){m=Sm(A,m),m=Iw(v,m,1),v=ll(v,m,1),m=oa(),v!==null&&(Tn(v,1,m),ja(v,m));break}}v=v.return}}function fF(m,v,A){var N=m.pingCache;N!==null&&N.delete(v),v=oa(),m.pingedLanes|=m.suspendedLanes&A,Ks===m&&(lo&A)===A&&(Ps===4||Ps===3&&(lo&130023424)===lo&&500>Yn()-b2?km(m,0):Fw|=A),ja(m,v)}function kP(m,v){v===0&&(m.mode&1?(v=Oe,Oe<<=1,!(Oe&130023424)&&(Oe=4194304)):v=1);var A=oa();m=sd(m,v),m!==null&&(Tn(m,v,A),ja(m,A))}function dF(m){var v=m.memoizedState,A=0;v!==null&&(A=v.retryLane),kP(m,A)}function hF(m,v){var A=0;switch(m.tag){case 13:var N=m.stateNode,j=m.memoizedState;j!==null&&(A=j.retryLane);break;case 19:N=m.stateNode;break;default:throw Error(n(314))}N!==null&&N.delete(v),kP(m,A)}var IP;IP=function(m,v,A){if(m!==null)if(m.memoizedProps!==v.pendingProps||$a.current)ra=!0;else{if(!(m.lanes&A)&&!(v.flags&128))return ra=!1,mP(m,v,A);ra=!!(m.flags&131072)}else ra=!1,_i&&v.flags&1048576&&ZR(v,cw,v.index);switch(v.lanes=0,v.tag){case 2:var N=v.type;Dw(m,v),m=v.pendingProps;var j=xg(v,ko.current);Ah(v,A),j=Em(null,v,N,m,j,A);var G=bw();return v.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,La(N)?(G=!0,il(v)):G=!1,v.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,mw(v),j.updater=Aw,v.stateNode=j,j._reactInternals=v,i2(v,N,m,A),v=f2(null,v,N,!0,G,A)):(v.tag=0,_i&&G&&Y1(v),oo(null,v,j,A),v=v.child),v;case 16:N=v.elementType;e:{switch(Dw(m,v),m=v.pendingProps,j=N._init,N=j(N._payload),v.type=N,j=v.tag=mF(N),m=fl(N,m),j){case 0:v=l2(null,v,N,m,A);break e;case 1:v=c2(null,v,N,m,A);break e;case 11:v=hP(null,v,N,m,A);break e;case 14:v=o2(null,v,N,fl(N.type,m),A);break e}throw Error(n(306,N,""))}return v;case 0:return N=v.type,j=v.pendingProps,j=v.elementType===N?j:fl(N,j),l2(m,v,N,j,A);case 1:return N=v.type,j=v.pendingProps,j=v.elementType===N?j:fl(N,j),c2(m,v,N,j,A);case 3:e:{if(pP(v),m===null)throw Error(n(387));N=v.pendingProps,G=v.memoizedState,j=G.element,rP(m,v),Eg(v,N,null,A);var se=v.memoizedState;if(N=se.element,G.isDehydrated)if(G={element:N,isDehydrated:!1,cache:se.cache,pendingSuspenseBoundaries:se.pendingSuspenseBoundaries,transitions:se.transitions},v.updateQueue.baseState=G,v.memoizedState=G,v.flags&256){j=Sm(Error(n(423)),v),v=cf(m,v,N,A,j);break e}else if(N!==j){j=Sm(Error(n(424)),v),v=cf(m,v,N,A,j);break e}else for(vu=_h(v.stateNode.containerInfo.firstChild),Ro=v,_i=!0,nc=null,A=dw(v,null,N,A),v.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(rf(),N===j){v=ic(m,v,A);break e}oo(m,v,N,A)}v=v.child}return v;case 5:return qS(v),m===null&&Ma(v),N=v.type,j=v.pendingProps,G=m!==null?m.memoizedProps:null,se=j.children,W1(N,j)?se=null:G!==null&&W1(N,G)&&(v.flags|=32),u2(m,v),oo(m,v,se,A),v.child;case 6:return m===null&&Ma(v),null;case 13:return Pw(m,v,A);case 4:return HS(v,v.stateNode.containerInfo),N=v.pendingProps,m===null?v.child=Vi(v,null,N,A):oo(m,v,N,A),v.child;case 11:return N=v.type,j=v.pendingProps,j=v.elementType===N?j:fl(N,j),hP(m,v,N,j,A);case 7:return oo(m,v,v.pendingProps,A),v.child;case 8:return oo(m,v,v.pendingProps.children,A),v.child;case 12:return oo(m,v,v.pendingProps.children,A),v.child;case 10:e:{if(N=v.type._context,j=v.pendingProps,G=v.memoizedProps,se=j.value,li(Q1,N._currentValue),N._currentValue=se,G!==null)if(He(G.value,se)){if(G.children===j.children&&!$a.current){v=ic(m,v,A);break e}}else for(G=v.child,G!==null&&(G.return=v);G!==null;){var ve=G.dependencies;if(ve!==null){se=G.child;for(var Te=ve.firstContext;Te!==null;){if(Te.context===N){if(G.tag===1){Te=od(-1,A&-A),Te.tag=2;var qe=G.updateQueue;if(qe!==null){qe=qe.shared;var vt=qe.pending;vt===null?Te.next=Te:(Te.next=vt.next,vt.next=Te),qe.pending=Te}}G.lanes|=A,Te=G.alternate,Te!==null&&(Te.lanes|=A),so(G.return,A,v),ve.lanes|=A;break}Te=Te.next}}else if(G.tag===10)se=G.type===v.type?null:G.child;else if(G.tag===18){if(se=G.return,se===null)throw Error(n(341));se.lanes|=A,ve=se.alternate,ve!==null&&(ve.lanes|=A),so(se,A,v),se=G.sibling}else se=G.child;if(se!==null)se.return=G;else for(se=G;se!==null;){if(se===v){se=null;break}if(G=se.sibling,G!==null){G.return=se.return,se=G;break}se=se.return}G=se}oo(m,v,j.children,A),v=v.child}return v;case 9:return j=v.type,N=v.pendingProps.children,Ah(v,A),j=al(j),N=N(j),v.flags|=1,oo(m,v,N,A),v.child;case 14:return N=v.type,j=fl(N,v.pendingProps),j=fl(N.type,j),o2(m,v,N,j,A);case 15:return lf(m,v,v.type,v.pendingProps,A);case 17:return N=v.type,j=v.pendingProps,j=v.elementType===N?j:fl(N,j),Dw(m,v),v.tag=1,La(N)?(m=!0,il(v)):m=!1,Ah(v,A),Tm(v,N,j),i2(v,N,j,A),f2(null,v,N,!0,m,A);case 19:return Rh(m,v,A);case 22:return a2(m,v,A)}throw Error(n(156,v.tag))};function RP(m,v){return Gc(m,v)}function pF(m,v,A,N){this.tag=m,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hl(m,v,A,N){return new pF(m,v,A,N)}function qw(m){return m=m.prototype,!(!m||!m.isReactComponent)}function mF(m){if(typeof m=="function")return qw(m)?1:0;if(m!=null){if(m=m.$$typeof,m===z)return 11;if(m===Q)return 14}return 2}function lc(m,v){var A=m.alternate;return A===null?(A=hl(m.tag,v,m.key,m.mode),A.elementType=m.elementType,A.type=m.type,A.stateNode=m.stateNode,A.alternate=m,m.alternate=A):(A.pendingProps=v,A.type=m.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=m.flags&14680064,A.childLanes=m.childLanes,A.lanes=m.lanes,A.child=m.child,A.memoizedProps=m.memoizedProps,A.memoizedState=m.memoizedState,A.updateQueue=m.updateQueue,v=m.dependencies,A.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},A.sibling=m.sibling,A.index=m.index,A.ref=m.ref,A}function Ww(m,v,A,N,j,G){var se=2;if(N=m,typeof m=="function")qw(m)&&(se=1);else if(typeof m=="string")se=5;else e:switch(m){case I:return Rm(A.children,j,G,v);case R:se=8,j|=8;break;case D:return m=hl(12,A,v,j|2),m.elementType=D,m.lanes=G,m;case F:return m=hl(13,A,v,j),m.elementType=F,m.lanes=G,m;case H:return m=hl(19,A,v,j),m.elementType=H,m.lanes=G,m;case ne:return Gw(A,j,G,v);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case L:se=10;break e;case M:se=9;break e;case z:se=11;break e;case Q:se=14;break e;case J:se=16,N=null;break e}throw Error(n(130,m==null?m:typeof m,""))}return v=hl(se,A,v,j),v.elementType=m,v.type=N,v.lanes=G,v}function Rm(m,v,A,N){return m=hl(7,m,N,v),m.lanes=A,m}function Gw(m,v,A,N){return m=hl(22,m,N,v),m.elementType=ne,m.lanes=A,m.stateNode={isHidden:!1},m}function A2(m,v,A){return m=hl(6,m,null,v),m.lanes=A,m}function k2(m,v,A){return v=hl(4,m.children!==null?m.children:[],m.key,v),v.lanes=A,v.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},v}function gF(m,v,A,N,j){this.tag=v,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.identifierPrefix=N,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function I2(m,v,A,N,j,G,se,ve,Te){return m=new gF(m,v,A,ve,Te),v===1?(v=1,G===!0&&(v|=8)):v=0,G=hl(3,null,null,v),m.current=G,G.stateNode=m,G.memoizedState={element:N,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},mw(G),m}function yF(m,v,A){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:k,key:N==null?null:""+N,children:m,containerInfo:v,implementation:A}}function PP(m){if(!m)return Th;m=m._reactInternals;e:{if(Di(m)!==m||m.tag!==1)throw Error(n(170));var v=m;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(La(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(n(171))}if(m.tag===1){var A=m.type;if(La(A))return XR(m,A,v)}return v}function DP(m,v,A,N,j,G,se,ve,Te){return m=I2(A,N,!0,m,j,G,se,ve,Te),m.context=PP(null),A=m.current,N=oa(),j=$h(A),G=od(N,j),G.callback=v??null,ll(A,G,j),m.current.lanes=j,Tn(m,j,N),ja(m,N),m}function Yw(m,v,A,N){var j=v.current,G=oa(),se=$h(j);return A=PP(A),v.context===null?v.context=A:v.pendingContext=A,v=od(G,se),v.payload={element:m},N=N===void 0?null:N,N!==null&&(v.callback=N),m=ll(j,v,se),m!==null&&(uc(m,j,se,G),gw(m,j,se)),se}function Kw(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function NP(m,v){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var A=m.retryLane;m.retryLane=A!==0&&A<v?A:v}}function R2(m,v){NP(m,v),(m=m.alternate)&&NP(m,v)}var OP=typeof reportError=="function"?reportError:function(m){console.error(m)};function P2(m){this._internalRoot=m}bv.prototype.render=P2.prototype.render=function(m){var v=this._internalRoot;if(v===null)throw Error(n(409));Yw(m,v,null,null)},bv.prototype.unmount=P2.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var v=m.containerInfo;Am(function(){Yw(null,m,null,null)}),v[yu]=null}};function bv(m){this._internalRoot=m}bv.prototype.unstable_scheduleHydration=function(m){if(m){var v=Kf();m={blockedOn:null,target:m,priority:v};for(var A=0;A<Pa.length&&v!==0&&v<Pa[A].priority;A++);Pa.splice(A,0,m),A===0&&sm(m)}};function Xw(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function Qw(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function $P(){}function vF(m,v,A,N,j){if(j){if(typeof N=="function"){var G=N;N=function(){var qe=Kw(se);G.call(qe)}}var se=DP(v,N,m,0,null,!1,!1,"",$P);return m._reactRootContainer=se,m[yu]=se.current,xh(m.nodeType===8?m.parentNode:m),Am(),se}for(;j=m.lastChild;)m.removeChild(j);if(typeof N=="function"){var ve=N;N=function(){var qe=Kw(Te);ve.call(qe)}}var Te=I2(m,0,!1,null,null,!1,!1,"",$P);return m._reactRootContainer=Te,m[yu]=Te.current,xh(m.nodeType===8?m.parentNode:m),Am(function(){Yw(v,Te,A,N)}),Te}function Jw(m,v,A,N,j){var G=A._reactRootContainer;if(G){var se=G;if(typeof j=="function"){var ve=j;j=function(){var Te=Kw(se);ve.call(Te)}}Yw(v,se,m,j)}else se=vF(A,v,m,j,N);return Kw(se)}us=function(m){switch(m.tag){case 3:var v=m.stateNode;if(v.current.memoizedState.isDehydrated){var A=Ae(v.pendingLanes);A!==0&&(jn(v,A|1),ja(v,Yn()),!(br&6)&&(Cm=Yn()+500,Sh()))}break;case 13:Am(function(){var N=sd(m,1);if(N!==null){var j=oa();uc(N,m,1,j)}}),R2(m,1)}},Jo=function(m){if(m.tag===13){var v=sd(m,134217728);if(v!==null){var A=oa();uc(v,m,134217728,A)}R2(m,134217728)}},Ju=function(m){if(m.tag===13){var v=$h(m),A=sd(m,v);if(A!==null){var N=oa();uc(A,m,v,N)}R2(m,v)}},Kf=function(){return an},Yl=function(m,v){var A=an;try{return an=m,v()}finally{an=A}},gi=function(m,v,A){switch(v){case"input":if(Ge(m,A),v=A.name,A.type==="radio"&&v!=null){for(A=m;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+v)+'][type="radio"]'),v=0;v<A.length;v++){var N=A[v];if(N!==m&&N.form===m.form){var j=ow(N);if(!j)throw Error(n(90));de(N),Ge(N,j)}}}break;case"textarea":Ft(m,A);break;case"select":v=A.value,v!=null&&xt(m,!!A.multiple,v,!1)}},Eo=T2,Ra=Am;var Zw={usingClientEntryPoint:!1,Events:[Ao,Vn,ow,Vs,Yu,T2]},xv={findFiberByHostInstance:Zc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bF={bundleType:xv.bundleType,version:xv.version,rendererPackageName:xv.rendererPackageName,rendererConfig:xv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=Wf(m),m===null?null:m.stateNode},findFiberByHostInstance:xv.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var e_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!e_.isDisabled&&e_.supportsFiber)try{Qu=e_.inject(bF),Cs=e_}catch{}}return yl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zw,yl.createPortal=function(m,v){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xw(v))throw Error(n(200));return yF(m,v,null,A)},yl.createRoot=function(m,v){if(!Xw(m))throw Error(n(299));var A=!1,N="",j=OP;return v!=null&&(v.unstable_strictMode===!0&&(A=!0),v.identifierPrefix!==void 0&&(N=v.identifierPrefix),v.onRecoverableError!==void 0&&(j=v.onRecoverableError)),v=I2(m,1,!1,null,null,A,!1,N,j),m[yu]=v.current,xh(m.nodeType===8?m.parentNode:m),new P2(v)},yl.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var v=m._reactInternals;if(v===void 0)throw typeof m.render=="function"?Error(n(188)):(m=Object.keys(m).join(","),Error(n(268,m)));return m=Wf(v),m=m===null?null:m.stateNode,m},yl.flushSync=function(m){return Am(m)},yl.hydrate=function(m,v,A){if(!Qw(v))throw Error(n(200));return Jw(null,m,v,!0,A)},yl.hydrateRoot=function(m,v,A){if(!Xw(m))throw Error(n(405));var N=A!=null&&A.hydratedSources||null,j=!1,G="",se=OP;if(A!=null&&(A.unstable_strictMode===!0&&(j=!0),A.identifierPrefix!==void 0&&(G=A.identifierPrefix),A.onRecoverableError!==void 0&&(se=A.onRecoverableError)),v=DP(v,null,m,1,A??null,j,!1,G,se),m[yu]=v.current,xh(m),N)for(m=0;m<N.length;m++)A=N[m],j=A._getVersion,j=j(A._source),v.mutableSourceEagerHydrationData==null?v.mutableSourceEagerHydrationData=[A,j]:v.mutableSourceEagerHydrationData.push(A,j);return new bv(v)},yl.render=function(m,v,A){if(!Qw(v))throw Error(n(200));return Jw(null,m,v,!1,A)},yl.unmountComponentAtNode=function(m){if(!Qw(m))throw Error(n(40));return m._reactRootContainer?(Am(function(){Jw(null,null,m,!1,function(){m._reactRootContainer=null,m[yu]=null})}),!0):!1},yl.unstable_batchedUpdates=T2,yl.unstable_renderSubtreeIntoContainer=function(m,v,A,N){if(!Qw(A))throw Error(n(200));if(m==null||m._reactInternals===void 0)throw Error(n(38));return Jw(m,v,A,!1,N)},yl.version="18.3.1-next-f1338f8080-20240426",yl}var VZ;function nhe(){if(VZ)return OF.exports;VZ=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),OF.exports=a3e(),OF.exports}var HZ;function u3e(){if(HZ)return BP;HZ=1;var e=nhe();return BP.createRoot=e.createRoot,BP.hydrateRoot=e.hydrateRoot,BP}var l3e=u3e();const c3e=qc(l3e);var Yh=function(){return Yh=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Yh.apply(this,arguments)};function iI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function f3e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var YN="right-scroll-bar-position",KN="width-before-scroll-bar",d3e="with-scroll-bars-hidden",h3e="--removed-body-scroll-bar-size";function MF(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function p3e(e,t){var n=O.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var m3e=typeof window<"u"?O.useLayoutEffect:O.useEffect,qZ=new WeakMap;function g3e(e,t){var n=p3e(null,function(r){return e.forEach(function(i){return MF(i,r)})});return m3e(function(){var r=qZ.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||MF(a,null)}),s.forEach(function(a){i.has(a)||MF(a,o)})}qZ.set(n,e)},[e]),n}function y3e(e){return e}function v3e(e,t){t===void 0&&(t=y3e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function b3e(e){e===void 0&&(e={});var t=v3e(null);return t.options=Yh({async:!0,ssr:!1},e),t}var rhe=function(e){var t=e.sideCar,n=iI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return O.createElement(r,Yh({},n))};rhe.isSideCarExport=!0;function x3e(e,t){return e.useMedium(t),rhe}var ihe=b3e(),FF=function(){},c$=O.forwardRef(function(e,t){var n=O.useRef(null),r=O.useState({onScrollCapture:FF,onWheelCapture:FF,onTouchMoveCapture:FF}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,g=e.allowPinchZoom,y=e.as,x=y===void 0?"div":y,b=e.gapMode,_=iI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=d,T=g3e([n,t]),k=Yh(Yh({},_),i);return O.createElement(O.Fragment,null,c&&O.createElement(E,{sideCar:ihe,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:b}),o?O.cloneElement(O.Children.only(a),Yh(Yh({},k),{ref:T})):O.createElement(x,Yh({},k,{className:u,ref:T}),a))});c$.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};c$.classNames={fullWidth:KN,zeroRight:YN};var she=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function w3e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=she();return t&&e.setAttribute("nonce",t),e}function _3e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function E3e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var T3e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=w3e())&&(_3e(t,n),E3e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},S3e=function(){var e=T3e();return function(t,n){O.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},C3e=function(){var e=S3e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},A3e={left:0,top:0,right:0,gap:0},BF=function(e){return parseInt(e||"",10)||0},k3e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[BF(n),BF(r),BF(i)]},I3e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return A3e;var t=k3e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},R3e=C3e(),J_="data-scroll-locked",P3e=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(d3e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(J_,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(YN,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(KN,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(YN," .").concat(YN,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(KN," .").concat(KN,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(J_,`] {
    `).concat(h3e,": ").concat(a,`px;
  }
`)},WZ=function(){var e=parseInt(document.body.getAttribute(J_)||"0",10);return isFinite(e)?e:0},D3e=function(){O.useEffect(function(){return document.body.setAttribute(J_,(WZ()+1).toString()),function(){var e=WZ()-1;e<=0?document.body.removeAttribute(J_):document.body.setAttribute(J_,e.toString())}},[])},N3e=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;D3e();var s=O.useMemo(function(){return I3e(i)},[i]);return O.createElement(R3e,{styles:P3e(s,!t,i,n?"":"!important")})};function O3e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=she();return t&&e.setAttribute("nonce",t),e}function $3e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function L3e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var M3e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=O3e())&&($3e(t,n),L3e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},F3e=function(){var e=M3e();return function(t,n){O.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},B3e=function(){var e=F3e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},mj=!1;if(typeof window<"u")try{var jP=Object.defineProperty({},"passive",{get:function(){return mj=!0,!0}});window.addEventListener("test",jP,jP),window.removeEventListener("test",jP,jP)}catch{mj=!1}var r_=mj?{passive:!1}:!1,j3e=function(e){return e.tagName==="TEXTAREA"},ohe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!j3e(e)&&n[t]==="visible")},U3e=function(e){return ohe(e,"overflowY")},z3e=function(e){return ohe(e,"overflowX")},GZ=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=ahe(e,r);if(i){var s=uhe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},V3e=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},H3e=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},ahe=function(e,t){return e==="v"?U3e(t):z3e(t)},uhe=function(e,t){return e==="v"?V3e(t):H3e(t)},q3e=function(e,t){return e==="h"&&t==="rtl"?-1:1},W3e=function(e,t,n,r,i){var s=q3e(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=uhe(e,a),p=h[0],g=h[1],y=h[2],x=g-y-s*p;(p||x)&&ahe(e,a)&&(f+=x,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},UP=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},YZ=function(e){return[e.deltaX,e.deltaY]},KZ=function(e){return e&&"current"in e?e.current:e},G3e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Y3e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},K3e=0,i_=[];function X3e(e){var t=O.useRef([]),n=O.useRef([0,0]),r=O.useRef(),i=O.useState(K3e++)[0],s=O.useState(B3e)[0],o=O.useRef(e);O.useEffect(function(){o.current=e},[e]),O.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=f3e([e.lockRef.current],(e.shards||[]).map(KZ),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=O.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var x=UP(g),b=n.current,_="deltaX"in g?g.deltaX:b[0]-x[0],E="deltaY"in g?g.deltaY:b[1]-x[1],T,k=g.target,I=Math.abs(_)>Math.abs(E)?"h":"v";if("touches"in g&&I==="h"&&k.type==="range")return!1;var R=GZ(I,k);if(!R)return!0;if(R?T=I:(T=I==="v"?"h":"v",R=GZ(I,k)),!R)return!1;if(!r.current&&"changedTouches"in g&&(_||E)&&(r.current=T),!T)return!0;var D=r.current||T;return W3e(D,y,g,D==="h"?_:E)},[]),u=O.useCallback(function(g){var y=g;if(!(!i_.length||i_[i_.length-1]!==s)){var x="deltaY"in y?YZ(y):UP(y),b=t.current.filter(function(T){return T.name===y.type&&(T.target===y.target||y.target===T.shadowParent)&&G3e(T.delta,x)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var _=(o.current.shards||[]).map(KZ).filter(Boolean).filter(function(T){return T.contains(y.target)}),E=_.length>0?a(y,_[0]):!o.current.noIsolation;E&&y.cancelable&&y.preventDefault()}}},[]),l=O.useCallback(function(g,y,x,b){var _={name:g,delta:y,target:x,should:b,shadowParent:Q3e(x)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(E){return E!==_})},1)},[]),c=O.useCallback(function(g){n.current=UP(g),r.current=void 0},[]),f=O.useCallback(function(g){l(g.type,YZ(g),g.target,a(g,e.lockRef.current))},[]),d=O.useCallback(function(g){l(g.type,UP(g),g.target,a(g,e.lockRef.current))},[]);O.useEffect(function(){return i_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,r_),document.addEventListener("touchmove",u,r_),document.addEventListener("touchstart",c,r_),function(){i_=i_.filter(function(g){return g!==s}),document.removeEventListener("wheel",u,r_),document.removeEventListener("touchmove",u,r_),document.removeEventListener("touchstart",c,r_)}},[]);var h=e.removeScrollBar,p=e.inert;return O.createElement(O.Fragment,null,p?O.createElement(s,{styles:Y3e(i)}):null,h?O.createElement(N3e,{gapMode:e.gapMode}):null)}function Q3e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const J3e=x3e(ihe,X3e);var EE=O.forwardRef(function(e,t){return O.createElement(c$,Yh({},e,{ref:t,sideCar:J3e}))});EE.classNames=c$.classNames;function Ti(e){return Object.keys(e)}function jF(e){return e&&typeof e=="object"&&!Array.isArray(e)}function AV(e,t){const n={...e},r=t;return jF(e)&&jF(t)&&Object.keys(t).forEach(i=>{jF(r[i])&&i in e?n[i]=AV(n[i],r[i]):n[i]=r[i]}),n}function Z3e(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function eOe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function WA(e){const t=eOe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function UF(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function lhe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?UF(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?UF(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?UF(s):s}}return r}return n}const We=lhe("rem",{shouldScale:!0}),kO=lhe("em");function s1(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function che(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function o1(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==O.Fragment:!1}function ka(e){const t=O.createContext(null);return[({children:i,value:s})=>S.jsx(t.Provider,{value:s,children:i}),()=>{const i=O.useContext(t);if(i===null)throw new Error(e);return i}]}function a1(e=null){const t=O.createContext(e);return[({children:i,value:s})=>S.jsx(t.Provider,{value:s,children:i}),()=>O.useContext(t)]}function IO(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function RO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function tOe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function nOe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function rOe(e,t,n){return RO(e,n)===RO(t,n)}function kV({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=RO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(g=>rOe(a.currentTarget,g,e)),l=u.findIndex(g=>a.currentTarget===g),c=nOe(l,u,r),f=tOe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const g=u.length-1;!u[g].disabled&&u[g].focus();break}}}}const iOe={app:100,modal:200,popover:300,overlay:400,max:9999};function zl(e){return iOe[e]}const gj=()=>{};function sOe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||gj:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function zn(e,t="size",n=!0){if(e!==void 0)return che(e)?n?We(e):e:`var(--${t}-${e})`}function Zs(e){return zn(e,"mantine-spacing")}function oi(e){return e===void 0?"var(--mantine-radius-default)":zn(e,"mantine-radius")}function wa(e){return zn(e,"mantine-font-size")}function fhe(e){return zn(e,"mantine-line-height",!1)}function IV(e){if(e)return zn(e,"mantine-shadow",!1)}function ep(e,t){return n=>{e==null||e(n),t==null||t(n)}}function RV(e,t){return e in t?WA(t[e]):WA(e)}function GA(e,t){const n=e.map(r=>({value:r,px:RV(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Rd(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function oOe(e,t,n){var r;return n?Array.from(((r=RO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function aOe(){const[e,t]=O.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Kh(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Z_(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function Zg(e){const t=O.useRef(e);return O.useEffect(()=>{t.current=e}),O.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const uOe=()=>{};function f$(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,i=Zg(e),s=O.useRef(0),o=Object.assign(O.useCallback((...a)=>{window.clearTimeout(s.current);const u=()=>{s.current!==0&&(s.current=0,i(...a))};o.flush=u,s.current=window.setTimeout(u,n)},[i,n]),{flush:uOe});return O.useEffect(()=>()=>{window.clearTimeout(s.current),r&&o.flush()},[o,r]),o}const XZ=["mousedown","touchstart"];function lOe(e,t,n){const r=O.useRef(null);return O.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||XZ).forEach(s=>document.addEventListener(s,i)),()=>{(t||XZ).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function cOe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function fOe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function dOe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=O.useState(n?t:fOe(e)),s=O.useRef(null);return O.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),cOe(s.current,o=>i(o.matches))},[e]),r}const ix=typeof document<"u"?O.useLayoutEffect:O.useEffect;function _p(e,t){const n=O.useRef(!1);O.useEffect(()=>()=>{n.current=!1},[]),O.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function dhe({opened:e,shouldReturnFocus:t=!0}){const n=O.useRef(null),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return _p(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const hOe=/input|select|textarea|button|object/,hhe="a, input, select, textarea, button, object, [tabindex]";function pOe(e){return e.style.display==="none"}function mOe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(pOe(n))return!1;n=n.parentNode}return!0}function phe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function yj(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(phe(e));return(hOe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&mOe(e)}function mhe(e){const t=phe(e);return(Number.isNaN(t)||t>=0)&&yj(e)}function gOe(e){return Array.from(e.querySelectorAll(hhe)).filter(mhe)}function yOe(e,t){const n=gOe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function vOe(e=!0){const t=O.useRef(null),n=i=>{let s=i.querySelector("[data-autofocus]");if(!s){const o=Array.from(i.querySelectorAll(hhe));s=o.find(mhe)||o.find(yj)||null,!s&&yj(i)&&(s=i)}s&&s.focus({preventScroll:!0})},r=O.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return O.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=s=>{s.key==="Tab"&&t.current&&yOe(t.current,s)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const bOe=e=>(e+1)%1e6;function xOe(){const[,e]=O.useReducer(bOe,0);return e}const wOe=Mr.useId||(()=>{});function _Oe(){const e=wOe();return e?`mantine-${e.replace(/:/g,"")}`:""}function qu(e){const t=_Oe(),[n,r]=O.useState(t);return ix(()=>{r(Z_())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function ghe(e,t,n){O.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function PO(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function yhe(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=PO(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i?i():PO(r,null)}),t.clear()}}}function xo(...e){return O.useCallback(yhe(...e),e)}function EOe(e,t,n="ltr"){const r=O.useRef(null),i=O.useRef(!1),s=O.useRef(!1),o=O.useRef(0),[a,u]=O.useState(!1);return O.useEffect(()=>{i.current=!0},[]),O.useEffect(()=>{var b,_;const l=({x:E,y:T})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const k=r.current.getBoundingClientRect();if(k.width&&k.height){const I=Kh((E-k.left)/k.width,0,1);e({x:n==="ltr"?I:1-I,y:Kh((T-k.top)/k.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",g),document.addEventListener("mouseup",h),document.addEventListener("touchmove",x),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=E=>{d(),E.preventDefault(),g(E)},g=E=>l({x:E.clientX,y:E.clientY}),y=E=>{E.cancelable&&E.preventDefault(),d(),x(E)},x=E=>{E.cancelable&&E.preventDefault(),l({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY})};return(b=r.current)==null||b.addEventListener("mousedown",p),(_=r.current)==null||_.addEventListener("touchstart",y,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",y))}},[n,e]),{ref:r,active:a}}function qo({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=O.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function d$(e,t){return dOe("(prefers-reduced-motion: reduce)",e,t)}const TOe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function sI(e){const t=O.useRef(0),n=O.useRef(null),[r,i]=O.useState(TOe),s=O.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return O.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function SOe(e){const[t,{width:n,height:r}]=sI(e);return{ref:t,width:n,height:r}}function PV(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=O.useState(e),o=O.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=O.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=O.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function COe(e){const t=O.useRef(void 0);return O.useEffect(()=>{t.current=e},[e]),t.current}function AOe(e,t){const n=Zg(e),r=O.useRef(null),i=O.useRef(null),s=O.useRef(!0),o=O.useRef(t),a=O.useRef(-1),u=()=>window.clearTimeout(a.current),l=O.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=O.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=O.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return O.useEffect(()=>{o.current=t},[t]),[f,u]}function kOe(e,t){const[n,r]=O.useState(e),[i,s]=AOe(r,t);return O.useEffect(()=>s,[]),[n,i]}function IOe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function ROe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});ix(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>IOe(`${e}:${String(r)}`,i[0])}return[t,n]}var POe={};function DOe(){return typeof process<"u"&&POe?"production":"development"}function QZ(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function h$(e){var n;const t=Mr.version;return typeof Mr.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function vhe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=vhe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Fs(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=vhe(e))&&(r&&(r+=" "),r+=t);return r}const NOe={};function OOe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Fs(t[r],i):t[r]=i})}),t}function p$({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||NOe);return OOe(s)}function DO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const bhe=O.createContext(null);function u1(){const e=O.useContext(bhe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function $Oe(){return u1().cssVariablesResolver}function LOe(){return u1().classNamesPrefix}function DV(){return u1().getStyleNonce}function MOe(){return u1().withStaticClasses}function FOe(){return u1().headless}function BOe(){var e;return(e=u1().stylesTransform)==null?void 0:e.sx}function jOe(){var e;return(e=u1().stylesTransform)==null?void 0:e.styles}function UOe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function zOe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function VOe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function HOe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function NV(e){return UOe(e)?zOe(e):e.startsWith("rgb")?VOe(e):e.startsWith("hsl")?HOe(e):{r:0,g:0,b:0,a:1}}function zP(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=NV(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function YA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function zF(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function qOe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function WOe(e){if(e.startsWith("oklch("))return(qOe(e)||0)/100;const{r:t,g:n,b:r}=NV(e),i=t/255,s=n/255,o=r/255,a=zF(i),u=zF(s),l=zF(o);return .2126*a+.7152*u+.0722*l}function O2(e,t=.179){return e.startsWith("var(")?!1:WOe(e)>t}function Bp({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:O2(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:O2(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:O2(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][YA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:O2(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:O2(e,t.luminanceThreshold),shade:s,variable:void 0}}function Ii(e,t){const n=Bp({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function vj(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Ii(n.from,t),i=Ii(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function zh(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=NV(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const s_=zh,GOe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Bp({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${We(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${We(1)} solid transparent`}:{background:e,hover:zP(e,.1),color:a,border:`${We(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${We(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:zh(a,.1),hover:zh(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${We(1)} solid transparent`}}return{background:zh(e,.1),hover:zh(e,.12),color:e,border:`${We(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${We(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:zh(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${We(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:zh(e,.05),color:e,border:`${We(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${We(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:zh(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${We(1)} solid transparent`}}return{background:"transparent",hover:zh(e,.12),color:e,border:`${We(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${We(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${We(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${We(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:zP(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${We(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:zP(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${We(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:zP(t.white,.01),color:e,border:`${We(1)} solid transparent`}:n==="gradient"?{background:vj(r,t),hover:vj(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${We(1)} solid var(--mantine-color-default-border)`}:{}},YOe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},JZ="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",OV={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:YOe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:GOe,autoContrast:!1,luminanceThreshold:.3,fontFamily:JZ,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:JZ,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:We(34),lineHeight:"1.3"},h2:{fontSize:We(26),lineHeight:"1.35"},h3:{fontSize:We(22),lineHeight:"1.4"},h4:{fontSize:We(18),lineHeight:"1.45"},h5:{fontSize:We(16),lineHeight:"1.5"},h6:{fontSize:We(14),lineHeight:"1.5"}}},fontSizes:{xs:We(12),sm:We(14),md:We(16),lg:We(18),xl:We(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:We(2),sm:We(4),md:We(8),lg:We(16),xl:We(32)},spacing:{xs:We(10),sm:We(12),md:We(16),lg:We(20),xl:We(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), 0 ${We(1)} ${We(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${We(10)} ${We(15)} ${We(-5)}, rgba(0, 0, 0, 0.04) 0 ${We(7)} ${We(7)} ${We(-5)}`,md:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${We(20)} ${We(25)} ${We(-5)}, rgba(0, 0, 0, 0.04) 0 ${We(10)} ${We(10)} ${We(-5)}`,lg:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${We(28)} ${We(23)} ${We(-7)}, rgba(0, 0, 0, 0.04) 0 ${We(12)} ${We(12)} ${We(-7)}`,xl:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${We(36)} ${We(28)} ${We(-7)}, rgba(0, 0, 0, 0.04) 0 ${We(17)} ${We(17)} ${We(-7)}`},other:{},components:{}};function ZZ(e){return e==="auto"||e==="dark"||e==="light"}function KOe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return ZZ(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&ZZ(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const XOe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",eee="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function VF(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function tee(e){if(!(e.primaryColor in e.colors))throw new Error(XOe);if(typeof e.primaryShade=="object"&&(!VF(e.primaryShade.dark)||!VF(e.primaryShade.light)))throw new Error(eee);if(typeof e.primaryShade=="number"&&!VF(e.primaryShade))throw new Error(eee)}function QOe(e,t){var r;if(!t)return tee(e),e;const n=AV(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),tee(n),n}const $V=O.createContext(null),JOe=()=>O.useContext($V)||OV;function to(){const e=O.useContext($V);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function xhe({theme:e,children:t,inherit:n=!0}){const r=JOe(),i=O.useMemo(()=>QOe(n?r:OV,e),[e,r,n]);return S.jsx($V.Provider,{value:i,children:t})}xhe.displayName="@mantine/core/MantineThemeProvider";function ZOe(){const e=to(),t=DV(),n=Ti(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=WA(e.breakpoints[i]),a=s?`${o-.1}px`:kO(o-.1),u=s?`${o}px`:kO(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return S.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function HF(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function $2(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function e4e(e,t){const n=HF(e.variables),r=n?$2(t,n):"",i=HF(e.dark),s=HF(e.light),o=i?$2(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?$2(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function sx({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Bp({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function nee(e,t){return sx({color:e.colors[e.primaryColor][YA(e,t)],theme:e,autoContrast:null})}function VP({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=YA(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:s_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:s_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:s_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=YA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:s_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:s_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:s_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function t4e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function o_(e,t,n){Ti(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const whe=e=>{const t=YA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:We(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":nee(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":nee(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};o_(r.variables,e.breakpoints,"breakpoint"),o_(r.variables,e.spacing,"spacing"),o_(r.variables,e.fontSizes,"font-size"),o_(r.variables,e.lineHeights,"line-height"),o_(r.variables,e.shadows,"shadow"),o_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Ti(e.colors).forEach(s=>{const o=e.colors[s];if(t4e(o)){Object.assign(r.light,VP({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,VP({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,VP({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,VP({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Ti(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function n4e({theme:e,generator:t}){const n=whe(e),r=t==null?void 0:t(e);return r?AV(n,r):n}const qF=whe(OV);function r4e(e){const t={variables:{},light:{},dark:{}};return Ti(e.variables).forEach(n=>{qF.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Ti(e.light).forEach(n=>{qF.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Ti(e.dark).forEach(n=>{qF.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function i4e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function _he({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=to(),r=DV(),i=$Oe(),s=n4e({theme:n,generator:i}),o=e===":root"&&t,a=o?r4e(s):s,u=e4e(a,e);return u?S.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":i4e(e)}`}}):null}_he.displayName="@mantine/CssVariables";function s4e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function a_(e,t){var i;const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=e!=="auto"?e:n?"dark":"light";(i=t())==null||i.setAttribute("data-mantine-color-scheme",r)}function o4e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=O.useRef(null),[s,o]=O.useState(()=>e.get(t)),a=r||s,u=O.useCallback(c=>{r||(a_(c,n),o(c),e.set(c))},[e.set,a,r]),l=O.useCallback(()=>{o(t),a_(t,n),e.clear()},[e.clear,t]);return O.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),ix(()=>{a_(e.get(t),n)},[]),O.useEffect(()=>{var f;if(r)return a_(r,n),()=>{};r===void 0&&a_(s,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=d=>{s==="auto"&&a_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function a4e({respectReducedMotion:e,getRootElement:t}){ix(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}s4e();function Ehe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=KOe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:g,setColorScheme:y,clearColorScheme:x}=o4e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return a4e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),S.jsx(bhe.Provider,{value:{colorScheme:g,setColorScheme:y,clearColorScheme:x,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:S.jsxs(xhe,{theme:e,children:[o&&S.jsx(_he,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&S.jsx(ZOe,{}),t]})})}Ehe.displayName="@mantine/core/MantineProvider";function ox({classNames:e,styles:t,props:n,stylesCtx:r}){const i=to();return{resolvedClassNames:p$({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:DO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const u4e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function l4e({theme:e,options:t,unstyled:n}){return Fs((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||u4e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function c4e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return p$({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function ree({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return p$({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function f4e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function d4e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function h4e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function p4e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=p$({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function m4e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function g4e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Fs(l4e({theme:e,options:t,unstyled:a||h}),p4e({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),m4e({options:t,classes:o,selector:r,unstyled:a}),ree({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),ree({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),c4e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),f4e({rootSelector:l,selector:r,className:u}),d4e({selector:r,classes:o,unstyled:a||h}),d&&!h&&h4e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function y4e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return DO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function bj({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...bj({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function v4e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...s1(n[r])}}),t),{})}function b4e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=v4e([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function x4e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&y4e({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&DO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&DO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...b4e({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?bj({style:u,theme:e}):null,...bj({style:r==null?void 0:r.style,theme:e})}}function w4e({props:e,stylesCtx:t,themeName:n}){var o;const r=to(),i=(o=jOe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Qt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=to(),h=LOe(),p=MOe(),g=FOe(),y=(Array.isArray(e)?e:[e]).filter(_=>_),{withStylesTransform:x,getTransformedStyles:b}=w4e({props:n,stylesCtx:r,themeName:y});return(_,E)=>({className:g4e({theme:d,options:E,themeName:y,selector:_,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:g,transformedStyles:b([E==null?void 0:E.styles,l])}),style:x4e({theme:d,themeName:y,selector:_,options:E,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:g,withStylesTransform:x})})}function ST(e,t){return typeof e=="boolean"?e:t.autoContrast}function Qe(e,t,n){var o;const r=to(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...s1(n)}}function WF(e){return Ti(e).reduce((t,n)=>e[n]!==void 0?`${t}${Z3e(n)}:${e[n]};`:t,"").trim()}function _4e({selector:e,styles:t,media:n,container:r}){const i=t?WF(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${WF(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${WF(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function ax(e){const t=DV();return S.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:_4e(e)}})}function ux(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:g,pr:y,pe:x,ps:b,bd:_,bg:E,c:T,opacity:k,ff:I,fz:R,fw:D,lts:L,ta:M,lh:z,fs:F,tt:H,td:Q,w:J,miw:ne,maw:Z,h:ie,mih:q,mah:U,bgsz:X,bgp:V,bgr:K,bga:ee,pos:fe,top:Ee,left:ye,bottom:_e,right:De,inset:me,display:de,flex:$e,hiddenFrom:Pe,visibleFrom:Ze,lightHidden:it,darkHidden:Ge,sx:et,...ut}=e;return{styleProps:s1({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:g,pr:y,pe:x,ps:b,bd:_,bg:E,c:T,opacity:k,ff:I,fz:R,fw:D,lts:L,ta:M,lh:z,fs:F,tt:H,td:Q,w:J,miw:ne,maw:Z,h:ie,mih:q,mah:U,bgsz:X,bgp:V,bgr:K,bga:ee,pos:fe,top:Ee,left:ye,bottom:_e,right:De,inset:me,display:de,flex:$e,hiddenFrom:Pe,visibleFrom:Ze,lightHidden:it,darkHidden:Ge,sx:et}),rest:ut}}const E4e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function LV(e,t){const n=Bp({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function T4e(e,t){const n=Bp({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:LV(e,t)}function S4e(e,t){if(typeof e=="number")return We(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${We(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${LV(i.join(" "),t)}`),s.trim()}return e}const iee={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function C4e(e){return typeof e=="string"&&e in iee?iee[e]:e}const A4e=["h1","h2","h3","h4","h5","h6"];function k4e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&A4e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?We(e):e}function I4e(e){return e}const R4e=["h1","h2","h3","h4","h5","h6"];function P4e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&R4e.includes(e)?`var(--mantine-${e}-line-height)`:e}function D4e(e){return typeof e=="number"?We(e):e}function N4e(e,t){if(typeof e=="number")return We(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return We(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const GF={color:LV,textColor:T4e,fontSize:k4e,spacing:N4e,identity:I4e,size:D4e,lineHeight:P4e,fontFamily:C4e,border:S4e};function see(e){return e.replace("(min-width: ","").replace("em)","")}function O4e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(see(i))-Number(see(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function $4e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function L4e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function M4e(e){return typeof e=="object"&&e!==null?Ti(e).filter(t=>t!=="base"):[]}function F4e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function The({styleProps:e,data:t,theme:n}){return O4e(Ti(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=L4e(e[i]);if(!$4e(e[i]))return o.forEach(l=>{r.inlineStyles[l]=GF[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=M4e(e[i]);return o.forEach(l=>{a&&(r.styles[l]=GF[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:GF[s.type](F4e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function oI(){return`__m__-${O.useId().replace(/:/g,"")}`}function MV(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...MV(r,t)}),{}):typeof e=="function"?e(t):e??{}}function She(e){return e.startsWith("data-")?e:`data-${e}`}function B4e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[She(n)]=e[n]),t},{})}function Che(e){return e?typeof e=="string"?{[She(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...Che(n)}),{}):B4e(e):null}function xj(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...xj(r,t)}),{}):typeof e=="function"?e(t):e??{}}function j4e({theme:e,style:t,vars:n,styleProps:r}){const i=xj(t,e),s=xj(n,e);return{...i,...s,...r}}const Ahe=O.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var R;const g=to(),y=e||"div",{styleProps:x,rest:b}=ux(h),_=BOe(),E=(R=_==null?void 0:_())==null?void 0:R(x.sx),T=oI(),k=The({styleProps:x,theme:g,data:E4e}),I={ref:p,style:j4e({theme:g,style:t,vars:n,styleProps:k.inlineStyles}),className:Fs(r,E,{[T]:k.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":che(o)?void 0:o||void 0,size:d,...Che(s),...b};return S.jsxs(S.Fragment,{children:[k.hasResponsiveStyles&&S.jsx(ax,{selector:`.${T}`,styles:k.styles,media:k.media}),typeof f=="function"?f(I):S.jsx(y,{...I})]})});Ahe.displayName="@mantine/core/Box";const Le=Ahe;function khe(e){return e}function U4e(e){const t=e;return n=>{const r=O.forwardRef((i,s)=>S.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function Et(e){const t=O.forwardRef(e);return t.extend=khe,t.withProps=n=>{const r=O.forwardRef((i,s)=>S.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function no(e){const t=O.forwardRef(e);return t.withProps=n=>{const r=O.forwardRef((i,s)=>S.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=khe,t}const z4e=O.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function l1(){return O.useContext(z4e)}var m$=nhe();const CC=qc(m$);function V4e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function YF(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const L2=typeof window<"u"&&window.requestAnimationFrame;function H4e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=O.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=O.useState(r?{}:o),l=p=>{m$.flushSync(()=>u(p))},c=p=>{l(g=>({...g,...p}))};function f(p){const g=e||V4e(p);return{transition:`height ${g}ms ${t}, opacity ${g}ms ${t}`}}_p(()=>{typeof L2=="function"&&L2(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),L2(()=>{const p=YF(i);c({...f(p),height:p})})}:()=>{const p=YF(i);c({...f(p),willChange:"height",height:p}),L2(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const g=YF(i);g===a.height?l({}):c({height:g}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:g="ref",...y}={}){const x=y[g];return{"aria-hidden":!r,...y,[g]:yhe(i,x),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const q4e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},g$=Et((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Qe("Collapse",q4e,e),c=to(),f=d$(),h=(c.respectReducedMotion?f:!1)?0:i,p=H4e({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?S.jsx(Le,{...l,children:n}):null:S.jsx(Le,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...MV(o,c)},ref:t,...l}),children:n})});g$.displayName="@mantine/core/Collapse";const[W4e,Of]=ka("ScrollArea.Root component was not found in tree");function TE(e,t){const n=Zg(t);ix(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const G4e=O.forwardRef((e,t)=>{const{style:n,...r}=e,i=Of(),[s,o]=O.useState(0),[a,u]=O.useState(0),l=!!(s&&a);return TE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),TE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?S.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),Y4e=O.forwardRef((e,t)=>{const n=Of(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?S.jsx(G4e,{...e,ref:t}):null}),K4e={scrollHideDelay:1e3,type:"hover"},Ihe=O.forwardRef((e,t)=>{const n=Qe("ScrollAreaRoot",K4e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=O.useState(null),[l,c]=O.useState(null),[f,d]=O.useState(null),[h,p]=O.useState(null),[g,y]=O.useState(null),[x,b]=O.useState(0),[_,E]=O.useState(0),[T,k]=O.useState(!1),[I,R]=O.useState(!1),D=xo(t,L=>u(L));return S.jsx(W4e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:T,onScrollbarXEnabledChange:k,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:I,onScrollbarYEnabledChange:R,onCornerWidthChange:b,onCornerHeightChange:E},children:S.jsx(Le,{...o,ref:D,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${x}px`,"--sa-corner-height":s!=="xy"?"0px":`${_}px`}})})});Ihe.displayName="@mantine/core/ScrollAreaRoot";function Rhe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function y$(e){const t=Rhe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Phe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function X4e(e,[t,n]){return Math.min(n,Math.max(t,e))}function oee(e,t,n="ltr"){const r=y$(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=X4e(e,u);return Phe([0,o],[0,a])(l)}function Q4e(e,t,n,r="ltr"){const i=y$(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return Phe([u,l],f)(e)}function Dhe(e,t){return e>0&&e<t}function NO(e){return e?parseInt(e,10):0}function fb(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[J4e,Nhe]=ka("ScrollAreaScrollbar was not found in tree"),Ohe=O.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Of(),[h,p]=O.useState(null),g=xo(t,R=>p(R)),y=O.useRef(null),x=O.useRef(""),{viewport:b}=d,_=n.content-n.viewport,E=Zg(l),T=Zg(a),k=f$(c,10),I=R=>{if(y.current){const D=R.clientX-y.current.left,L=R.clientY-y.current.top;u({x:D,y:L})}};return O.useEffect(()=>{const R=D=>{const L=D.target;(h==null?void 0:h.contains(L))&&E(D,_)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[b,h,_,E]),O.useEffect(T,[n,T]),TE(h,k),TE(d.content,k),S.jsx(J4e,{value:{scrollbar:h,hasThumb:r,onThumbChange:Zg(i),onThumbPointerUp:Zg(s),onThumbPositionChange:T,onThumbPointerDown:Zg(o)},children:S.jsx("div",{...f,ref:g,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:fb(e.onPointerDown,R=>{R.preventDefault(),R.button===0&&(R.target.setPointerCapture(R.pointerId),y.current=h.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",I(R))}),onPointerMove:fb(e.onPointerMove,I),onPointerUp:fb(e.onPointerUp,R=>{R.preventDefault();const D=R.target;D.hasPointerCapture(R.pointerId)&&D.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=x.current,y.current=null})})})}),$he=O.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Of(),[a,u]=O.useState(),l=O.useRef(null),c=xo(t,l,o.onScrollbarXChange);return O.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),S.jsx(Ohe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${y$(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),Dhe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:NO(a.paddingLeft),paddingEnd:NO(a.paddingRight)}})}})});$he.displayName="@mantine/core/ScrollAreaScrollbarX";const Lhe=O.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Of(),[a,u]=O.useState(),l=O.useRef(null),c=xo(t,l,o.onScrollbarYChange);return O.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),S.jsx(Ohe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${y$(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),Dhe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:NO(a.paddingTop),paddingEnd:NO(a.paddingBottom)}})}})});Lhe.displayName="@mantine/core/ScrollAreaScrollbarY";const v$=O.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=l1(),s=Of(),o=O.useRef(null),a=O.useRef(0),[u,l]=O.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Rhe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>Q4e(h,a.current,u,p);return n==="horizontal"?S.jsx($he,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=oee(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?S.jsx(Lhe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=oee(h,u);u.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null});v$.displayName="@mantine/core/ScrollAreaScrollbarVisible";const FV=O.forwardRef((e,t)=>{const n=Of(),{forceMount:r,...i}=e,[s,o]=O.useState(!1),a=e.orientation==="horizontal",u=f$(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return TE(n.viewport,u),TE(n.content,u),r||s?S.jsx(v$,{"data-state":s?"visible":"hidden",...i,ref:t}):null});FV.displayName="@mantine/core/ScrollAreaScrollbarAuto";const Mhe=O.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Of(),[s,o]=O.useState(!1);return O.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?S.jsx(FV,{"data-state":s?"visible":"hidden",...r,ref:t}):null});Mhe.displayName="@mantine/core/ScrollAreaScrollbarHover";const Z4e=O.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Of(),s=e.orientation==="horizontal",[o,a]=O.useState("hidden"),u=f$(()=>a("idle"),100);return O.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),O.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?S.jsx(v$,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:fb(e.onPointerEnter,()=>a("interacting")),onPointerLeave:fb(e.onPointerLeave,()=>a("idle"))}):null}),wj=O.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Of(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return O.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?S.jsx(Mhe,{...r,ref:t,forceMount:n}):i.type==="scroll"?S.jsx(Z4e,{...r,ref:t,forceMount:n}):i.type==="auto"?S.jsx(FV,{...r,ref:t,forceMount:n}):i.type==="always"?S.jsx(v$,{...r,ref:t}):null});wj.displayName="@mantine/core/ScrollAreaScrollbar";function e6e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Fhe=O.forwardRef((e,t)=>{const{style:n,...r}=e,i=Of(),s=Nhe(),{onThumbPositionChange:o}=s,a=xo(t,c=>s.onThumbChange(c)),u=O.useRef(void 0),l=f$(()=>{u.current&&(u.current(),u.current=void 0)},100);return O.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=e6e(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),S.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:fb(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:fb(e.onPointerUp,s.onThumbPointerUp)})});Fhe.displayName="@mantine/core/ScrollAreaThumb";const _j=O.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Nhe();return n||i.hasThumb?S.jsx(Fhe,{ref:t,...r}):null});_j.displayName="@mantine/core/ScrollAreaThumb";const Bhe=O.forwardRef(({children:e,style:t,...n},r)=>{const i=Of(),s=xo(r,i.onViewportChange);return S.jsx(Le,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:S.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});Bhe.displayName="@mantine/core/ScrollAreaViewport";var BV={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const jhe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},t6e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":We(t)}}),_0=Et((e,t)=>{const n=Qe("ScrollArea",jhe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:g,offsetScrollbars:y,scrollbars:x,onBottomReached:b,onTopReached:_,...E}=n,[T,k]=O.useState(!1),I=Qt({name:"ScrollArea",props:n,classes:BV,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:t6e});return S.jsxs(Ihe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:x,...I("root"),...E,children:[S.jsx(Bhe,{...d,...I("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":y===!0?"xy":y||void 0,"data-scrollbars":x||void 0,onScroll:R=>{var z;(z=d==null?void 0:d.onScroll)==null||z.call(d,R),p==null||p({x:R.currentTarget.scrollLeft,y:R.currentTarget.scrollTop});const{scrollTop:D,scrollHeight:L,clientHeight:M}=R.currentTarget;D-(L-M)>=0&&(b==null||b()),D===0&&(_==null||_())},children:g}),(x==="xy"||x==="x")&&S.jsx(wj,{...I("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:S.jsx(_j,{...I("thumb")})}),(x==="xy"||x==="y")&&S.jsx(wj,{...I("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:S.jsx(_j,{...I("thumb")})}),S.jsx(Y4e,{...I("corner"),"data-hovered":T||void 0,"data-hidden":c==="never"||void 0})]})});_0.displayName="@mantine/core/ScrollArea";const jV=Et((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:g,style:y,vars:x,onBottomReached:b,onTopReached:_,...E}=Qe("ScrollAreaAutosize",jhe,e);return S.jsx(Le,{...E,ref:t,style:[{display:"flex",overflow:"auto"},y],children:S.jsx(Le,{style:{display:"flex",flexDirection:"column",flex:1},children:S.jsx(_0,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:x,scrollbars:g,onBottomReached:b,onTopReached:_,children:n})})})});_0.classes=BV;jV.displayName="@mantine/core/ScrollAreaAutosize";jV.classes=BV;_0.Autosize=jV;var Uhe={root:"m_87cf2631"};const n6e={__staticSelector:"UnstyledButton"},Nc=no((e,t)=>{const n=Qe("UnstyledButton",n6e,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Qt({name:s,props:n,classes:Uhe,className:r,style:l,classNames:a,styles:u,unstyled:o});return S.jsx(Le,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Nc.classes=Uhe;Nc.displayName="@mantine/core/UnstyledButton";var zhe={root:"m_515a97f8"};const r6e={},UV=Et((e,t)=>{const n=Qe("VisuallyHidden",r6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Qt({name:"VisuallyHidden",classes:zhe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return S.jsx(Le,{component:"span",ref:t,...c("root"),...l})});UV.classes=zhe;UV.displayName="@mantine/core/VisuallyHidden";var Vhe={root:"m_1b7284a3"};const i6e={},s6e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:oi(t),"--paper-shadow":IV(n)}}),CT=no((e,t)=>{const n=Qe("Paper",i6e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,g=Qt({name:"Paper",props:n,classes:Vhe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:s6e});return S.jsx(Le,{ref:t,mod:[{"data-with-border":u},h],...g("root"),variant:d,...p})});CT.classes=Vhe;CT.displayName="@mantine/core/Paper";function b$(){return typeof window<"u"}function Hhe(e){return qhe(e)?(e.nodeName||"").toLowerCase():"#document"}function AT(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function o6e(e){var t;return(t=(qhe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function qhe(e){return b$()?e instanceof Node||e instanceof AT(e).Node:!1}function Sl(e){return b$()?e instanceof Element||e instanceof AT(e).Element:!1}function zV(e){return b$()?e instanceof HTMLElement||e instanceof AT(e).HTMLElement:!1}function Ej(e){return!b$()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof AT(e).ShadowRoot}function a6e(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function aee(e){return["html","body","#document"].includes(Hhe(e))}function u6e(e){return AT(e).getComputedStyle(e)}function l6e(e){if(Hhe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ej(e)&&e.host||o6e(e);return Ej(t)?t.host:t}function uee(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function KA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Ej(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Whe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Ghe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function c6e(e){return h6e()?!1:!lee()&&e.width===0&&e.height===0||lee()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function f6e(){return/apple/i.test(navigator.vendor)}function lee(){const e=/android/i;return e.test(Whe())||e.test(Ghe())}function d6e(){return Whe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function h6e(){return Ghe().includes("jsdom/")}function Tj(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function p6e(e){return"nativeEvent"in e}function m6e(e){return e.matches("html,body")}function tb(e){return(e==null?void 0:e.ownerDocument)||document}function KF(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function R_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const g6e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function y6e(e){return zV(e)&&e.matches(g6e)}const wc=Math.min,Xa=Math.max,OO=Math.round,HP=Math.floor,Ry=e=>({x:e,y:e}),v6e={left:"right",right:"left",bottom:"top",top:"bottom"},b6e={start:"end",end:"start"};function Sj(e,t,n){return Xa(e,wc(t,n))}function E0(e,t){return typeof e=="function"?e(t):e}function Vd(e){return e.split("-")[0]}function kT(e){return e.split("-")[1]}function VV(e){return e==="x"?"y":"x"}function HV(e){return e==="y"?"height":"width"}function lx(e){return["top","bottom"].includes(Vd(e))?"y":"x"}function qV(e){return VV(lx(e))}function x6e(e,t,n){n===void 0&&(n=!1);const r=kT(e),i=qV(e),s=HV(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=$O(o)),[o,$O(o)]}function w6e(e){const t=$O(e);return[Cj(e),t,Cj(t)]}function Cj(e){return e.replace(/start|end/g,t=>b6e[t])}function _6e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function E6e(e,t,n,r){const i=kT(e);let s=_6e(Vd(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(Cj)))),s}function $O(e){return e.replace(/left|right|bottom|top/g,t=>v6e[t])}function T6e(e){return{top:0,right:0,bottom:0,left:0,...e}}function WV(e){return typeof e!="number"?T6e(e):{top:e,right:e,bottom:e,left:e}}function SE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function cee(e,t,n){let{reference:r,floating:i}=e;const s=lx(t),o=qV(t),a=HV(o),u=Vd(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(kT(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const S6e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=cee(l,r,u),d=r,h={},p=0;for(let g=0;g<a.length;g++){const{name:y,fn:x}=a[g],{x:b,y:_,data:E,reset:T}=await x({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=b??c,f=_??f,h={...h,[y]:{...h[y],...E}},T&&p<=50&&(p++,typeof T=="object"&&(T.placement&&(d=T.placement),T.rects&&(l=T.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):T.rects),{x:c,y:f}=cee(l,d,u)),g=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function GV(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=E0(t,e),p=WV(h),y=a[d?f==="floating"?"reference":"floating":f],x=SE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),b=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},T=SE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:_,strategy:u}):b);return{top:(x.top-T.top+p.top)/E.y,bottom:(T.bottom-x.bottom+p.bottom)/E.y,left:(x.left-T.left+p.left)/E.x,right:(T.right-x.right+p.right)/E.x}}const C6e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=E0(e,t)||{};if(l==null)return{};const f=WV(c),d={x:n,y:r},h=qV(i),p=HV(h),g=await o.getDimensions(l),y=h==="y",x=y?"top":"left",b=y?"bottom":"right",_=y?"clientHeight":"clientWidth",E=s.reference[p]+s.reference[h]-d[h]-s.floating[p],T=d[h]-s.reference[h],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let I=k?k[_]:0;(!I||!await(o.isElement==null?void 0:o.isElement(k)))&&(I=a.floating[_]||s.floating[p]);const R=E/2-T/2,D=I/2-g[p]/2-1,L=wc(f[x],D),M=wc(f[b],D),z=L,F=I-g[p]-M,H=I/2-g[p]/2+R,Q=Sj(z,H,F),J=!u.arrow&&kT(i)!=null&&H!==Q&&s.reference[p]/2-(H<z?L:M)-g[p]/2<0,ne=J?H<z?H-z:H-F:0;return{[h]:d[h]+ne,data:{[h]:Q,centerOffset:H-Q-ne,...J&&{alignmentOffset:ne}},reset:J}}}),A6e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...y}=E0(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const x=Vd(i),b=Vd(a)===a,_=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=d||(b||!g?[$O(a)]:w6e(a));!d&&p!=="none"&&E.push(...E6e(a,g,p,_));const T=[a,...E],k=await GV(t,y),I=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&I.push(k[x]),f){const z=x6e(i,o,_);I.push(k[z[0]],k[z[1]])}if(R=[...R,{placement:i,overflows:I}],!I.every(z=>z<=0)){var D,L;const z=(((D=s.flip)==null?void 0:D.index)||0)+1,F=T[z];if(F)return{data:{index:z,overflows:R},reset:{placement:F}};let H=(L=R.filter(Q=>Q.overflows[0]<=0).sort((Q,J)=>Q.overflows[1]-J.overflows[1])[0])==null?void 0:L.placement;if(!H)switch(h){case"bestFit":{var M;const Q=(M=R.map(J=>[J.placement,J.overflows.filter(ne=>ne>0).reduce((ne,Z)=>ne+Z,0)]).sort((J,ne)=>J[1]-ne[1])[0])==null?void 0:M[0];Q&&(H=Q);break}case"initialPlacement":H=a;break}if(i!==H)return{reset:{placement:H}}}return{}}}};function Yhe(e){const t=wc(...e.map(s=>s.left)),n=wc(...e.map(s=>s.top)),r=Xa(...e.map(s=>s.right)),i=Xa(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function k6e(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>SE(Yhe(i)))}const I6e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=E0(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=k6e(c),d=SE(Yhe(c)),h=WV(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(y=>u>y.left-h.left&&u<y.right+h.right&&l>y.top-h.top&&l<y.bottom+h.bottom)||d;if(f.length>=2){if(lx(n)==="y"){const L=f[0],M=f[f.length-1],z=Vd(n)==="top",F=L.top,H=M.bottom,Q=z?L.left:M.left,J=z?L.right:M.right,ne=J-Q,Z=H-F;return{top:F,bottom:H,left:Q,right:J,width:ne,height:Z,x:Q,y:F}}const y=Vd(n)==="left",x=Xa(...f.map(L=>L.right)),b=wc(...f.map(L=>L.left)),_=f.filter(L=>y?L.left===b:L.right===x),E=_[0].top,T=_[_.length-1].bottom,k=b,I=x,R=I-k,D=T-E;return{top:E,bottom:T,left:k,right:I,width:R,height:D,x:k,y:E}}return d}const g=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==g.reference.x||i.reference.y!==g.reference.y||i.reference.width!==g.reference.width||i.reference.height!==g.reference.height?{reset:{rects:g}}:{}}}};async function R6e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Vd(n),a=kT(n),u=lx(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=E0(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const P6e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await R6e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},D6e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x,y:b}=y;return{x,y:b}}},...u}=E0(e,t),l={x:n,y:r},c=await GV(t,u),f=lx(Vd(i)),d=VV(f);let h=l[d],p=l[f];if(s){const y=d==="y"?"top":"left",x=d==="y"?"bottom":"right",b=h+c[y],_=h-c[x];h=Sj(b,h,_)}if(o){const y=f==="y"?"top":"left",x=f==="y"?"bottom":"right",b=p+c[y],_=p-c[x];p=Sj(b,p,_)}const g=a.fn({...t,[d]:h,[f]:p});return{...g,data:{x:g.x-n,y:g.y-r}}}}},N6e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=E0(e,t),c={x:n,y:r},f=lx(i),d=VV(f);let h=c[d],p=c[f];const g=E0(a,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(u){const _=d==="y"?"height":"width",E=s.reference[d]-s.floating[_]+y.mainAxis,T=s.reference[d]+s.reference[_]-y.mainAxis;h<E?h=E:h>T&&(h=T)}if(l){var x,b;const _=d==="y"?"width":"height",E=["top","left"].includes(Vd(i)),T=s.reference[f]-s.floating[_]+(E&&((x=o.offset)==null?void 0:x[f])||0)+(E?0:y.crossAxis),k=s.reference[f]+s.reference[_]+(E?0:((b=o.offset)==null?void 0:b[f])||0)-(E?y.crossAxis:0);p<T?p=T:p>k&&(p=k)}return{[d]:h,[f]:p}}}},O6e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=E0(e,t),u=await GV(t,a),l=Vd(n),c=kT(n),f=lx(n)==="y",{width:d,height:h}=r.floating;let p,g;l==="top"||l==="bottom"?(p=l,g=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=l,p=c==="end"?"top":"bottom");const y=h-u.top-u.bottom,x=d-u.left-u.right,b=wc(h-u[p],y),_=wc(d-u[g],x),E=!t.middlewareData.shift;let T=b,k=_;if(f?k=c||E?wc(_,x):x:T=c||E?wc(b,y):y,E&&!c){const R=Xa(u.left,0),D=Xa(u.right,0),L=Xa(u.top,0),M=Xa(u.bottom,0);f?k=d-2*(R!==0||D!==0?R+D:Xa(u.left,u.right)):T=h-2*(L!==0||M!==0?L+M:Xa(u.top,u.bottom))}await o({...t,availableWidth:k,availableHeight:T});const I=await i.getDimensions(s.floating);return d!==I.width||h!==I.height?{reset:{rects:!0}}:{}}}};function IT(e){return Khe(e)?(e.nodeName||"").toLowerCase():"#document"}function Ac(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function z0(e){var t;return(t=(Khe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Khe(e){return e instanceof Node||e instanceof Ac(e).Node}function Ep(e){return e instanceof Element||e instanceof Ac(e).Element}function Tp(e){return e instanceof HTMLElement||e instanceof Ac(e).HTMLElement}function fee(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ac(e).ShadowRoot}function aI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Hd(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function $6e(e){return["table","td","th"].includes(IT(e))}function YV(e){const t=KV(),n=Hd(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function L6e(e){let t=Py(e);for(;Tp(t)&&!CE(t);){if(YV(t))return t;t=Py(t)}return null}function KV(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function CE(e){return["html","body","#document"].includes(IT(e))}function Hd(e){return Ac(e).getComputedStyle(e)}function x$(e){return Ep(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Py(e){if(IT(e)==="html")return e;const t=e.assignedSlot||e.parentNode||fee(e)&&e.host||z0(e);return fee(t)?t.host:t}function Xhe(e){const t=Py(e);return CE(t)?e.ownerDocument?e.ownerDocument.body:e.body:Tp(t)&&aI(t)?t:Xhe(t)}function u0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Xhe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Ac(i);return s?t.concat(o,o.visualViewport||[],aI(i)?i:[],o.frameElement&&n?u0(o.frameElement):[]):t.concat(i,u0(i,[],n))}function Qhe(e){const t=Hd(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Tp(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=OO(n)!==s||OO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function XV(e){return Ep(e)?e:e.contextElement}function eE(e){const t=XV(e);if(!Tp(t))return Ry(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Qhe(t);let o=(s?OO(n.width):n.width)/r,a=(s?OO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const M6e=Ry(0);function Jhe(e){const t=Ac(e);return!KV()||!t.visualViewport?M6e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function F6e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ac(e)?!1:t}function Cb(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=XV(e);let o=Ry(1);t&&(r?Ep(r)&&(o=eE(r)):o=eE(e));const a=F6e(s,n,r)?Jhe(s):Ry(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Ac(s),h=r&&Ep(r)?Ac(r):r;let p=d,g=p.frameElement;for(;g&&r&&h!==p;){const y=eE(g),x=g.getBoundingClientRect(),b=Hd(g),_=x.left+(g.clientLeft+parseFloat(b.paddingLeft))*y.x,E=x.top+(g.clientTop+parseFloat(b.paddingTop))*y.y;u*=y.x,l*=y.y,c*=y.x,f*=y.y,u+=_,l+=E,p=Ac(g),g=p.frameElement}}return SE({width:c,height:f,x:u,y:l})}const B6e=[":popover-open",":modal"];function QV(e){return B6e.some(t=>{try{return e.matches(t)}catch{return!1}})}function j6e(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=z0(r),a=t?QV(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=Ry(1);const c=Ry(0),f=Tp(r);if((f||!f&&!s)&&((IT(r)!=="body"||aI(o))&&(u=x$(r)),Tp(r))){const d=Cb(r);l=eE(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function U6e(e){return Array.from(e.getClientRects())}function Zhe(e){return Cb(z0(e)).left+x$(e).scrollLeft}function z6e(e){const t=z0(e),n=x$(e),r=e.ownerDocument.body,i=Xa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Xa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Zhe(e);const a=-n.scrollTop;return Hd(r).direction==="rtl"&&(o+=Xa(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function V6e(e,t){const n=Ac(e),r=z0(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=KV();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function H6e(e,t){const n=Cb(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Tp(e)?eE(e):Ry(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function dee(e,t,n){let r;if(t==="viewport")r=V6e(e,n);else if(t==="document")r=z6e(z0(e));else if(Ep(t))r=H6e(t,n);else{const i=Jhe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return SE(r)}function epe(e,t){const n=Py(e);return n===t||!Ep(n)||CE(n)?!1:Hd(n).position==="fixed"||epe(n,t)}function q6e(e,t){const n=t.get(e);if(n)return n;let r=u0(e,[],!1).filter(a=>Ep(a)&&IT(a)!=="body"),i=null;const s=Hd(e).position==="fixed";let o=s?Py(e):e;for(;Ep(o)&&!CE(o);){const a=Hd(o),u=YV(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||aI(o)&&!u&&epe(e,o))?r=r.filter(c=>c!==o):i=a,o=Py(o)}return t.set(e,r),r}function W6e(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?QV(t)?[]:q6e(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=dee(t,c,i);return l.top=Xa(f.top,l.top),l.right=wc(f.right,l.right),l.bottom=wc(f.bottom,l.bottom),l.left=Xa(f.left,l.left),l},dee(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function G6e(e){const{width:t,height:n}=Qhe(e);return{width:t,height:n}}function Y6e(e,t,n){const r=Tp(t),i=z0(t),s=n==="fixed",o=Cb(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=Ry(0);if(r||!r&&!s)if((IT(t)!=="body"||aI(i))&&(a=x$(t)),r){const f=Cb(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Zhe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function XF(e){return Hd(e).position==="static"}function hee(e,t){return!Tp(e)||Hd(e).position==="fixed"?null:t?t(e):e.offsetParent}function tpe(e,t){const n=Ac(e);if(QV(e))return n;if(!Tp(e)){let i=Py(e);for(;i&&!CE(i);){if(Ep(i)&&!XF(i))return i;i=Py(i)}return n}let r=hee(e,t);for(;r&&$6e(r)&&XF(r);)r=hee(r,t);return r&&CE(r)&&XF(r)&&!YV(r)?n:r||L6e(e)||n}const K6e=async function(e){const t=this.getOffsetParent||tpe,n=this.getDimensions,r=await n(e.floating);return{reference:Y6e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function X6e(e){return Hd(e).direction==="rtl"}const Q6e={convertOffsetParentRelativeRectToViewportRelativeRect:j6e,getDocumentElement:z0,getClippingRect:W6e,getOffsetParent:tpe,getElementRects:K6e,getClientRects:U6e,getDimensions:G6e,getScale:eE,isElement:Ep,isRTL:X6e};function J6e(e,t){let n=null,r;const i=z0(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=HP(c),p=HP(i.clientWidth-(l+f)),g=HP(i.clientHeight-(c+d)),y=HP(l),b={rootMargin:-h+"px "+-p+"px "+-g+"px "+-y+"px",threshold:Xa(0,wc(1,u))||1};let _=!0;function E(T){const k=T[0].intersectionRatio;if(k!==u){if(!_)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(e)}return o(!0),s}function Z6e(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=XV(e),c=i||s?[...l?u0(l):[],...u0(t)]:[];c.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),s&&x.addEventListener("resize",n)});const f=l&&a?J6e(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(x=>{let[b]=x;b&&b.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,g=u?Cb(e):null;u&&y();function y(){const x=Cb(e);g&&(x.x!==g.x||x.y!==g.y||x.width!==g.width||x.height!==g.height)&&n(),g=x,p=requestAnimationFrame(y)}return n(),()=>{var x;c.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f==null||f(),(x=h)==null||x.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const e$e=P6e,t$e=D6e,n$e=A6e,r$e=O6e,pee=C6e,i$e=I6e,s$e=N6e,o$e=(e,t,n)=>{const r=new Map,i={platform:Q6e,...n},s={...i.platform,_c:r};return S6e(e,t,{...i,platform:s})};var XN=typeof document<"u"?O.useLayoutEffect:O.useEffect;function LO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!LO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!LO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function npe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function mee(e,t){const n=npe(e);return Math.round(t*n)/n}function QF(e){const t=O.useRef(e);return XN(()=>{t.current=e}),t}function a$e(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=O.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=O.useState(r);LO(d,r)||h(r);const[p,g]=O.useState(null),[y,x]=O.useState(null),b=O.useCallback(Z=>{Z!==k.current&&(k.current=Z,g(Z))},[]),_=O.useCallback(Z=>{Z!==I.current&&(I.current=Z,x(Z))},[]),E=s||p,T=o||y,k=O.useRef(null),I=O.useRef(null),R=O.useRef(c),D=u!=null,L=QF(u),M=QF(i),z=QF(l),F=O.useCallback(()=>{if(!k.current||!I.current)return;const Z={placement:t,strategy:n,middleware:d};M.current&&(Z.platform=M.current),o$e(k.current,I.current,Z).then(ie=>{const q={...ie,isPositioned:z.current!==!1};H.current&&!LO(R.current,q)&&(R.current=q,m$.flushSync(()=>{f(q)}))})},[d,t,n,M,z]);XN(()=>{l===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,f(Z=>({...Z,isPositioned:!1})))},[l]);const H=O.useRef(!1);XN(()=>(H.current=!0,()=>{H.current=!1}),[]),XN(()=>{if(E&&(k.current=E),T&&(I.current=T),E&&T){if(L.current)return L.current(E,T,F);F()}},[E,T,F,L,D]);const Q=O.useMemo(()=>({reference:k,floating:I,setReference:b,setFloating:_}),[b,_]),J=O.useMemo(()=>({reference:E,floating:T}),[E,T]),ne=O.useMemo(()=>{const Z={position:n,left:0,top:0};if(!J.floating)return Z;const ie=mee(J.floating,c.x),q=mee(J.floating,c.y);return a?{...Z,transform:"translate("+ie+"px, "+q+"px)",...npe(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:q}},[n,a,J.floating,c.x,c.y]);return O.useMemo(()=>({...c,update:F,refs:Q,elements:J,floatingStyles:ne}),[c,F,Q,J,ne])}const u$e=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?pee({element:r.current,padding:i}).fn(n):{}:r?pee({element:r,padding:i}).fn(n):{}}}},rpe=(e,t)=>({...e$e(e),options:[e,t]}),JV=(e,t)=>({...t$e(e),options:[e,t]}),gee=(e,t)=>({...s$e(e),options:[e,t]}),MO=(e,t)=>({...n$e(e),options:[e,t]}),l$e=(e,t)=>({...r$e(e),options:[e,t]}),dA=(e,t)=>({...i$e(e),options:[e,t]}),ipe=(e,t)=>({...u$e(e),options:[e,t]}),spe={...i3e},c$e=spe.useInsertionEffect,f$e=c$e||(e=>e());function Ym(e){const t=O.useRef(()=>{});return f$e(()=>{t.current=e}),O.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var ap=typeof document<"u"?O.useLayoutEffect:O.useEffect;let yee=!1,d$e=0;const vee=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+d$e++;function h$e(){const[e,t]=O.useState(()=>yee?vee():void 0);return ap(()=>{e==null&&t(vee())},[]),O.useEffect(()=>{yee=!0},[]),e}const p$e=spe.useId,ope=p$e||h$e;function m$e(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const g$e=O.createContext(null),y$e=O.createContext(null),ZV=()=>{var e;return((e=O.useContext(g$e))==null?void 0:e.id)||null},eH=()=>O.useContext(y$e);function tH(e){return"data-floating-ui-"+e}function JF(e){const t=O.useRef(e);return ap(()=>{t.current=e}),t}const bee=tH("safe-polygon");function QN(e,t,n){return n&&!Tj(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function v$e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:f=0,move:d=!0}=t,h=eH(),p=ZV(),g=JF(l),y=JF(u),x=JF(n),b=O.useRef(),_=O.useRef(-1),E=O.useRef(),T=O.useRef(-1),k=O.useRef(!0),I=O.useRef(!1),R=O.useRef(()=>{}),D=O.useRef(!1),L=O.useCallback(()=>{var ne;const Z=(ne=i.current.openEvent)==null?void 0:ne.type;return(Z==null?void 0:Z.includes("mouse"))&&Z!=="mousedown"},[i]);O.useEffect(()=>{if(!a)return;function ne(Z){let{open:ie}=Z;ie||(clearTimeout(_.current),clearTimeout(T.current),k.current=!0,D.current=!1)}return s.on("openchange",ne),()=>{s.off("openchange",ne)}},[a,s]),O.useEffect(()=>{if(!a||!g.current||!n)return;function ne(ie){L()&&r(!1,ie,"hover")}const Z=tb(o.floating).documentElement;return Z.addEventListener("mouseleave",ne),()=>{Z.removeEventListener("mouseleave",ne)}},[o.floating,n,r,a,g,L]);const M=O.useCallback(function(ne,Z,ie){Z===void 0&&(Z=!0),ie===void 0&&(ie="hover");const q=QN(y.current,"close",b.current);q&&!E.current?(clearTimeout(_.current),_.current=window.setTimeout(()=>r(!1,ne,ie),q)):Z&&(clearTimeout(_.current),r(!1,ne,ie))},[y,r]),z=Ym(()=>{R.current(),E.current=void 0}),F=Ym(()=>{if(I.current){const ne=tb(o.floating).body;ne.style.pointerEvents="",ne.removeAttribute(bee),I.current=!1}}),H=Ym(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);O.useEffect(()=>{if(!a)return;function ne(U){if(clearTimeout(_.current),k.current=!1,c&&!Tj(b.current)||f>0&&!QN(y.current,"open"))return;const X=QN(y.current,"open",b.current);X?_.current=window.setTimeout(()=>{x.current||r(!0,U,"hover")},X):n||r(!0,U,"hover")}function Z(U){if(H())return;R.current();const X=tb(o.floating);if(clearTimeout(T.current),D.current=!1,g.current&&i.current.floatingContext){n||clearTimeout(_.current),E.current=g.current({...i.current.floatingContext,tree:h,x:U.clientX,y:U.clientY,onClose(){F(),z(),H()||M(U,!0,"safe-polygon")}});const K=E.current;X.addEventListener("mousemove",K),R.current=()=>{X.removeEventListener("mousemove",K)};return}(b.current==="touch"?!KA(o.floating,U.relatedTarget):!0)&&M(U)}function ie(U){H()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:h,x:U.clientX,y:U.clientY,onClose(){F(),z(),H()||M(U)}})(U))}if(Sl(o.domReference)){var q;const U=o.domReference;return n&&U.addEventListener("mouseleave",ie),(q=o.floating)==null||q.addEventListener("mouseleave",ie),d&&U.addEventListener("mousemove",ne,{once:!0}),U.addEventListener("mouseenter",ne),U.addEventListener("mouseleave",Z),()=>{var X;n&&U.removeEventListener("mouseleave",ie),(X=o.floating)==null||X.removeEventListener("mouseleave",ie),d&&U.removeEventListener("mousemove",ne),U.removeEventListener("mouseenter",ne),U.removeEventListener("mouseleave",Z)}}},[o,a,e,c,f,d,M,z,F,r,n,x,h,y,g,i,H]),ap(()=>{var ne;if(a&&n&&(ne=g.current)!=null&&ne.__options.blockPointerEvents&&L()){I.current=!0;const ie=o.floating;if(Sl(o.domReference)&&ie){var Z;const q=tb(o.floating).body;q.setAttribute(bee,"");const U=o.domReference,X=h==null||(Z=h.nodesRef.current.find(V=>V.id===p))==null||(Z=Z.context)==null?void 0:Z.elements.floating;return X&&(X.style.pointerEvents=""),q.style.pointerEvents="none",U.style.pointerEvents="auto",ie.style.pointerEvents="auto",()=>{q.style.pointerEvents="",U.style.pointerEvents="",ie.style.pointerEvents=""}}}},[a,n,p,o,h,g,L]),ap(()=>{n||(b.current=void 0,D.current=!1,z(),F())},[n,z,F]),O.useEffect(()=>()=>{z(),clearTimeout(_.current),clearTimeout(T.current),F()},[a,o.domReference,z,F]);const Q=O.useMemo(()=>{function ne(Z){b.current=Z.pointerType}return{onPointerDown:ne,onPointerEnter:ne,onMouseMove(Z){const{nativeEvent:ie}=Z;function q(){!k.current&&!x.current&&r(!0,ie,"hover")}c&&!Tj(b.current)||n||f===0||D.current&&Z.movementX**2+Z.movementY**2<2||(clearTimeout(T.current),b.current==="touch"?q():(D.current=!0,T.current=window.setTimeout(q,f)))}}},[c,r,n,x,f]),J=O.useMemo(()=>({onMouseEnter(){clearTimeout(_.current)},onMouseLeave(ne){H()||M(ne.nativeEvent,!1)}}),[M,H]);return O.useMemo(()=>a?{reference:Q,floating:J}:{},[a,Q,J])}const Aj=()=>{},ape=O.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:Aj,setState:Aj,isInstantPhase:!1}),upe=()=>O.useContext(ape);function b$e(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=O.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=O.useRef(null),a=O.useCallback(u=>{s({currentId:u})},[]);return ap(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),O.createElement(ape.Provider,{value:O.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function x$e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s,enabled:o=!0}=t,a=s??i,u=upe(),{currentId:l,setCurrentId:c,initialDelay:f,setState:d,timeoutMs:h}=u;return ap(()=>{o&&l&&(d({delay:{open:1,close:QN(f,"close")}}),l!==a&&r(!1))},[o,a,r,d,l,f]),ap(()=>{function p(){r(!1),d({delay:f,currentId:null})}if(o&&l&&!n&&l===a){if(h){const g=window.setTimeout(p,h);return()=>{clearTimeout(g)}}p()}},[o,n,d,l,a,r,f,h]),ap(()=>{o&&(c===Aj||!n||c(a))},[o,n,c,a]),u}function ZF(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const w$e="data-floating-ui-focusable",_$e={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},E$e={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},xee=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function T$e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:p}=t,g=eH(),y=Ym(typeof u=="function"?u:()=>!1),x=typeof u=="function"?y:u,b=O.useRef(!1),_=O.useRef(!1),{escapeKey:E,outsidePress:T}=xee(h),{escapeKey:k,outsidePress:I}=xee(p),R=O.useRef(!1),D=Ym(Q=>{var J;if(!n||!o||!a||Q.key!=="Escape"||R.current)return;const ne=(J=s.current.floatingContext)==null?void 0:J.nodeId,Z=g?ZF(g.nodesRef.current,ne):[];if(!E&&(Q.stopPropagation(),Z.length>0)){let ie=!0;if(Z.forEach(q=>{var U;if((U=q.context)!=null&&U.open&&!q.context.dataRef.current.__escapeKeyBubbles){ie=!1;return}}),!ie)return}r(!1,p6e(Q)?Q.nativeEvent:Q,"escape-key")}),L=Ym(Q=>{var J;const ne=()=>{var Z;D(Q),(Z=R_(Q))==null||Z.removeEventListener("keydown",ne)};(J=R_(Q))==null||J.addEventListener("keydown",ne)}),M=Ym(Q=>{var J;const ne=b.current;b.current=!1;const Z=_.current;if(_.current=!1,l==="click"&&Z||ne||typeof x=="function"&&!x(Q))return;const ie=R_(Q),q="["+tH("inert")+"]",U=tb(i.floating).querySelectorAll(q);let X=Sl(ie)?ie:null;for(;X&&!aee(X);){const fe=l6e(X);if(aee(fe)||!Sl(fe))break;X=fe}if(U.length&&Sl(ie)&&!m6e(ie)&&!KA(ie,i.floating)&&Array.from(U).every(fe=>!KA(X,fe)))return;if(zV(ie)&&H){const fe=ie.clientWidth>0&&ie.scrollWidth>ie.clientWidth,Ee=ie.clientHeight>0&&ie.scrollHeight>ie.clientHeight;let ye=Ee&&Q.offsetX>ie.clientWidth;if(Ee&&u6e(ie).direction==="rtl"&&(ye=Q.offsetX<=ie.offsetWidth-ie.clientWidth),ye||fe&&Q.offsetY>ie.clientHeight)return}const V=(J=s.current.floatingContext)==null?void 0:J.nodeId,K=g&&ZF(g.nodesRef.current,V).some(fe=>{var Ee;return KF(Q,(Ee=fe.context)==null?void 0:Ee.elements.floating)});if(KF(Q,i.floating)||KF(Q,i.domReference)||K)return;const ee=g?ZF(g.nodesRef.current,V):[];if(ee.length>0){let fe=!0;if(ee.forEach(Ee=>{var ye;if((ye=Ee.context)!=null&&ye.open&&!Ee.context.dataRef.current.__outsidePressBubbles){fe=!1;return}}),!fe)return}r(!1,Q,"outside-press")}),z=Ym(Q=>{var J;const ne=()=>{var Z;M(Q),(Z=R_(Q))==null||Z.removeEventListener(l,ne)};(J=R_(Q))==null||J.addEventListener(l,ne)});O.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=E,s.current.__outsidePressBubbles=T;let Q=-1;function J(U){r(!1,U,"ancestor-scroll")}function ne(){window.clearTimeout(Q),R.current=!0}function Z(){Q=window.setTimeout(()=>{R.current=!1},a6e()?5:0)}const ie=tb(i.floating);a&&(ie.addEventListener("keydown",k?L:D,k),ie.addEventListener("compositionstart",ne),ie.addEventListener("compositionend",Z)),x&&ie.addEventListener(l,I?z:M,I);let q=[];return d&&(Sl(i.domReference)&&(q=u0(i.domReference)),Sl(i.floating)&&(q=q.concat(u0(i.floating))),!Sl(i.reference)&&i.reference&&i.reference.contextElement&&(q=q.concat(u0(i.reference.contextElement)))),q=q.filter(U=>{var X;return U!==((X=ie.defaultView)==null?void 0:X.visualViewport)}),q.forEach(U=>{U.addEventListener("scroll",J,{passive:!0})}),()=>{a&&(ie.removeEventListener("keydown",k?L:D,k),ie.removeEventListener("compositionstart",ne),ie.removeEventListener("compositionend",Z)),x&&ie.removeEventListener(l,I?z:M,I),q.forEach(U=>{U.removeEventListener("scroll",J)}),window.clearTimeout(Q)}},[s,i,a,x,l,n,r,d,o,E,T,D,k,L,M,I,z]),O.useEffect(()=>{b.current=!1},[x,l]);const F=O.useMemo(()=>({onKeyDown:D,[_$e[f]]:Q=>{c&&r(!1,Q.nativeEvent,"reference-press")}}),[D,r,c,f]),H=O.useMemo(()=>({onKeyDown:D,onMouseDown(){_.current=!0},onMouseUp(){_.current=!0},[E$e[l]]:()=>{b.current=!0}}),[D,l]);return O.useMemo(()=>o?{reference:F,floating:H}:{},[o,F,H])}function S$e(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=ope(),s=O.useRef({}),[o]=O.useState(()=>m$e()),a=ZV()!=null,[u,l]=O.useState(r.reference),c=Ym((h,p,g)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:g,nested:a}),n==null||n(h,p,g)}),f=O.useMemo(()=>({setPositionReference:l}),[]),d=O.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return O.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function nH(e){e===void 0&&(e={});const{nodeId:t}=e,n=S$e({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=O.useState(null),[a,u]=O.useState(null),c=(i==null?void 0:i.domReference)||s,f=O.useRef(null),d=eH();ap(()=>{c&&(f.current=c)},[c]);const h=a$e({...e,elements:{...i,...a&&{reference:a}}}),p=O.useCallback(_=>{const E=Sl(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;u(E),h.refs.setReference(E)},[h.refs]),g=O.useCallback(_=>{(Sl(_)||_===null)&&(f.current=_,o(_)),(Sl(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!Sl(_))&&h.refs.setReference(_)},[h.refs]),y=O.useMemo(()=>({...h.refs,setReference:g,setPositionReference:p,domReference:f}),[h.refs,g,p]),x=O.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),b=O.useMemo(()=>({...h,...r,refs:y,elements:x,nodeId:t}),[h,y,x,t,r]);return ap(()=>{r.dataRef.current.floatingContext=b;const _=d==null?void 0:d.nodesRef.current.find(E=>E.id===t);_&&(_.context=b)}),O.useMemo(()=>({...h,context:b,refs:y,elements:x}),[h,y,x,b])}function C$e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=O.useRef(!1),c=O.useRef(),f=O.useRef(!0);O.useEffect(()=>{if(!a)return;const h=AT(o.domReference);function p(){!n&&zV(o.domReference)&&o.domReference===uee(tb(o.domReference))&&(l.current=!0)}function g(){f.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",g,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",g,!0)}},[o.domReference,n,a]),O.useEffect(()=>{if(!a)return;function h(p){let{reason:g}=p;(g==="reference-press"||g==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),O.useEffect(()=>()=>{clearTimeout(c.current)},[]);const d=O.useMemo(()=>({onPointerDown(h){c6e(h.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const p=R_(h.nativeEvent);if(u&&Sl(p))try{if(f6e()&&d6e())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!f.current&&!y6e(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const p=h.relatedTarget,g=h.nativeEvent,y=Sl(p)&&p.hasAttribute(tH("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var x;const b=uee(o.domReference?o.domReference.ownerDocument:document);!p&&b===o.domReference||KA((x=s.current.floatingContext)==null?void 0:x.refs.floating.current,b)||KA(o.domReference,b)||y||r(!1,g,"focus")})}}),[s,o.domReference,r,u]);return O.useMemo(()=>a?{reference:d}:{},[a,d])}const wee="active",_ee="selected";function e8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[wee]:o,[_ee]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1,[w$e]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[wee,_ee].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return(d=r.get(l))==null?void 0:d.map(y=>y(...p)).find(y=>y!==void 0)}}}else o[l]=c}),o),{})}}function A$e(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=O.useCallback(a=>e8(a,e,"reference"),t),s=O.useCallback(a=>e8(a,e,"floating"),n),o=O.useCallback(a=>e8(a,e,"item"),r);return O.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const k$e=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function I$e(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=k$e.get(o))!=null?n:o,u=ope(),c=ZV()!=null,f=O.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,o]),d=O.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,o]),h=O.useCallback(p=>{let{active:g,selected:y}=p;const x={role:"option",...g&&{id:i+"-option"}};switch(o){case"select":return{...x,"aria-selected":g&&y};case"combobox":return{...x,...g&&{"aria-selected":!0}}}return{}},[i,o]);return O.useMemo(()=>s?{reference:f,floating:d,item:h}:{},[s,f,d,h])}function lpe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Eee(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Tee(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const R$e={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function P$e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[R$e[u]]:r},f=-t/2;return u==="left"?{...c,...Eee(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:u==="right"?{...c,...Eee(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:u==="top"?{...c,...Tee(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:u==="bottom"?{...c,...Tee(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const rH=O.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=l1();return s?S.jsx("div",{...l,ref:c,style:{...u,...P$e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});rH.displayName="@mantine/core/FloatingArrow";var cpe={root:"m_9814e45f"};const D$e={zIndex:zl("modal")},N$e=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&zh(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${We(i)})`:void 0,"--overlay-radius":s===void 0?void 0:oi(s),"--overlay-z-index":o==null?void 0:o.toString()}}),AE=no((e,t)=>{const n=Qe("Overlay",D$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:g,color:y,backgroundOpacity:x,mod:b,..._}=n,E=Qt({name:"Overlay",props:n,classes:cpe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:N$e});return S.jsx(Le,{ref:t,...E("root"),mod:[{center:c,fixed:l},b],..._,children:f})});AE.classes=cpe;AE.displayName="@mantine/core/Overlay";function O$e(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const $$e={},fpe=O.forwardRef((e,t)=>{const{children:n,target:r,...i}=Qe("Portal",$$e,e),[s,o]=O.useState(!1),a=O.useRef(null);return ix(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:O$e(i),PO(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:m$.createPortal(S.jsx(S.Fragment,{children:n}),a.current)});fpe.displayName="@mantine/core/Portal";function c1({withinPortal:e=!0,children:t,...n}){return e?S.jsx(fpe,{...n,children:t}):S.jsx(S.Fragment,{children:t})}c1.displayName="@mantine/core/OptionalPortal";const M2=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),qP={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...M2("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...M2("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...M2("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...M2("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...M2("top"),common:{transformOrigin:"top right"}}},See={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function L$e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in qP?{transitionProperty:qP[e].transitionProperty,...i,...qP[e].common,...qP[e][See[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[See[t]]}}function M$e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:u,exitDelay:l}){const c=to(),f=d$(),d=c.respectReducedMotion?f:!1,[h,p]=O.useState(d?0:e),[g,y]=O.useState(r?"entered":"exited"),x=O.useRef(-1),b=O.useRef(-1),_=O.useRef(-1),E=k=>{const I=k?i:s,R=k?o:a;window.clearTimeout(x.current);const D=d?0:k?e:t;p(D),D===0?(typeof I=="function"&&I(),typeof R=="function"&&R(),y(k?"entered":"exited")):_.current=requestAnimationFrame(()=>{CC.flushSync(()=>{y(k?"pre-entering":"pre-exiting")}),_.current=requestAnimationFrame(()=>{typeof I=="function"&&I(),y(k?"entering":"exiting"),x.current=window.setTimeout(()=>{typeof R=="function"&&R(),y(k?"entered":"exited")},D)})})},T=k=>{if(window.clearTimeout(b.current),typeof(k?u:l)!="number"){E(k);return}b.current=window.setTimeout(()=>{E(k)},k?u:l)};return _p(()=>{T(r)},[r]),O.useEffect(()=>()=>{window.clearTimeout(x.current),cancelAnimationFrame(_.current)},[]),{transitionDuration:h,transitionStatus:g,transitionTimingFunction:n||"ease"}}function jp({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:g}=M$e({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d});return h===0?i?S.jsx(S.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:S.jsx(S.Fragment,{children:s(L$e({transition:t,duration:h,state:p,timingFunction:g}))})}jp.displayName="@mantine/core/Transition";const[F$e,dpe]=ka("Popover component was not found in the tree");function w$({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=vOe(t),s=xo(i,r);return o1(e)?O.cloneElement(e,{[n]:s}):e}function hpe(e){return S.jsx(UV,{tabIndex:-1,"data-autofocus":!0,...e})}w$.displayName="@mantine/core/FocusTrap";hpe.displayName="@mantine/core/FocusTrapInitialFocus";w$.InitialFocus=hpe;var ppe={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const B$e={},iH=Et((e,t)=>{var y,x,b,_;const n=Qe("PopoverDropdown",B$e,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=dpe(),h=dhe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},g=xo(t,d.floating);return d.disabled?null:S.jsx(c1,{...d.portalProps,withinPortal:d.withinPortal,children:S.jsx(jp,{mounted:d.opened,...d.transitionProps,transition:((y=d.transitionProps)==null?void 0:y.transition)||"fade",duration:((x=d.transitionProps)==null?void 0:x.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((b=d.transitionProps)==null?void 0:b.exitDuration)=="number"?d.transitionProps.exitDuration:(_=d.transitionProps)==null?void 0:_.duration,children:E=>S.jsx(w$,{active:d.trapFocus&&d.opened,innerRef:g,children:S.jsxs(Le,{...p,...f,variant:u,onKeyDownCapture:sOe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...E,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:We(d.width)},d.resolvedStyles.dropdown,c==null?void 0:c.dropdown,i]}),children:[o,S.jsx(rH,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});iH.classes=ppe;iH.displayName="@mantine/core/PopoverDropdown";const j$e={refProp:"ref",popupType:"dialog"},mpe=Et((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Qe("PopoverTarget",j$e,e);if(!o1(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=dpe(),u=xo(a.reference,h$(n),t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return O.cloneElement(n,{...o,...l,...a.targetProps,className:Fs(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});mpe.displayName="@mantine/core/PopoverTarget";function gpe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=O.useState(0);O.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return Z6e(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),_p(()=>{t.update()},r),_p(()=>{s(o=>o+1)},[e])}function U$e(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function z$e(e,t){const n=U$e(e.middlewares),r=[rpe(e.offset)];return n.shift&&r.push(JV(typeof n.shift=="boolean"?{limiter:gee(),padding:5}:{limiter:gee(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?MO():MO(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?dA():dA(n.inline)),r.push(ipe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(l$e({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o,...a}){var c;const l=((c=t().refs.floating.current)==null?void 0:c.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:s,availableHeight:o,...a}):Object.assign(l,{maxWidth:`${s}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(l,{width:`${i.reference.width}px`})}})),r}function V$e(e){const[t,n]=qo({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=O.useRef(t),i=()=>{t&&n(!1)},s=()=>n(!t),o=nH({strategy:e.strategy,placement:e.position,middleware:z$e(e,()=>o)});return gpe({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),_p(()=>{var a;(a=e.onPositionChange)==null||a.call(e,o.placement)},[o.placement]),_p(()=>{var a,u;t!==r.current&&(t?(u=e.onOpen)==null||u.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:i,onToggle:s}}const H$e={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:zl("popover"),__staticSelector:"Popover",width:"max-content"},q$e=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:oi(t),"--popover-shadow":IV(n)}});function _a(e){var Ft,tn,Re,Ve,yt,$t;const t=Qe("Popover",H$e,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:c,width:f,middlewares:d,withArrow:h,arrowSize:p,arrowOffset:g,arrowRadius:y,arrowPosition:x,unstyled:b,classNames:_,styles:E,closeOnClickOutside:T,withinPortal:k,portalProps:I,closeOnEscape:R,clickOutsideEvents:D,trapFocus:L,onClose:M,onOpen:z,onChange:F,zIndex:H,radius:Q,shadow:J,id:ne,defaultOpened:Z,__staticSelector:ie,withRoles:q,disabled:U,returnFocus:X,variant:V,keepMounted:K,vars:ee,floatingStrategy:fe,withOverlay:Ee,overlayProps:ye,..._e}=t,De=Qt({name:ie,props:t,classes:ppe,classNames:_,styles:E,unstyled:b,rootSelector:"dropdown",vars:ee,varsResolver:q$e}),{resolvedStyles:me}=ox({classNames:_,styles:E,props:t}),de=O.useRef(null),[$e,Pe]=O.useState(null),[Ze,it]=O.useState(null),{dir:Ge}=l1(),et=qu(ne),ut=V$e({middlewares:d,width:f,position:lpe(Ge,r),offset:typeof i=="number"?i+(h?p/2:0):i,arrowRef:de,arrowOffset:g,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:Z,onChange:F,onOpen:z,onClose:M,strategy:fe});lOe(()=>T&&ut.onClose(),D,[$e,Ze]);const Tt=O.useCallback(Bt=>{Pe(Bt),ut.floating.refs.setReference(Bt)},[ut.floating.refs.setReference]),xt=O.useCallback(Bt=>{it(Bt),ut.floating.refs.setFloating(Bt)},[ut.floating.refs.setFloating]),Dt=O.useCallback(()=>{var Bt;(Bt=u==null?void 0:u.onExited)==null||Bt.call(u),l==null||l()},[u==null?void 0:u.onExited,l]),Ue=O.useCallback(()=>{var Bt;(Bt=u==null?void 0:u.onEntered)==null||Bt.call(u),c==null||c()},[u==null?void 0:u.onEntered,c]);return S.jsxs(F$e,{value:{returnFocus:X,disabled:U,controlled:ut.controlled,reference:Tt,floating:xt,x:ut.floating.x,y:ut.floating.y,arrowX:(Re=(tn=(Ft=ut.floating)==null?void 0:Ft.middlewareData)==null?void 0:tn.arrow)==null?void 0:Re.x,arrowY:($t=(yt=(Ve=ut.floating)==null?void 0:Ve.middlewareData)==null?void 0:yt.arrow)==null?void 0:$t.y,opened:ut.opened,arrowRef:de,transitionProps:{...u,onExited:Dt,onEntered:Ue},width:f,withArrow:h,arrowSize:p,arrowOffset:g,arrowRadius:y,arrowPosition:x,placement:ut.floating.placement,trapFocus:L,withinPortal:k,portalProps:I,zIndex:H,radius:Q,shadow:J,closeOnEscape:R,onClose:ut.onClose,onToggle:ut.onToggle,getTargetId:()=>`${et}-target`,getDropdownId:()=>`${et}-dropdown`,withRoles:q,targetProps:_e,__staticSelector:ie,classNames:_,styles:E,unstyled:b,variant:V,keepMounted:K,getStyles:De,resolvedStyles:me,floatingStrategy:fe},children:[n,Ee&&S.jsx(jp,{transition:"fade",mounted:ut.opened,duration:(u==null?void 0:u.duration)||250,exitDuration:(u==null?void 0:u.exitDuration)||250,children:Bt=>S.jsx(c1,{withinPortal:k,children:S.jsx(AE,{...ye,...De("overlay",{className:ye==null?void 0:ye.className,style:[Bt,ye==null?void 0:ye.style]})})})})]})}_a.Target=mpe;_a.Dropdown=iH;_a.displayName="@mantine/core/Popover";_a.extend=e=>e;var Pd={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const ype=O.forwardRef(({className:e,...t},n)=>S.jsxs(Le,{component:"span",className:Fs(Pd.barsLoader,e),...t,ref:n,children:[S.jsx("span",{className:Pd.bar}),S.jsx("span",{className:Pd.bar}),S.jsx("span",{className:Pd.bar})]}));ype.displayName="@mantine/core/Bars";const vpe=O.forwardRef(({className:e,...t},n)=>S.jsxs(Le,{component:"span",className:Fs(Pd.dotsLoader,e),...t,ref:n,children:[S.jsx("span",{className:Pd.dot}),S.jsx("span",{className:Pd.dot}),S.jsx("span",{className:Pd.dot})]}));vpe.displayName="@mantine/core/Dots";const bpe=O.forwardRef(({className:e,...t},n)=>S.jsx(Le,{component:"span",className:Fs(Pd.ovalLoader,e),...t,ref:n}));bpe.displayName="@mantine/core/Oval";const xpe={bars:ype,oval:bpe,dots:vpe},W$e={loaders:xpe,type:"oval"},G$e=(e,{size:t,color:n})=>({root:{"--loader-size":zn(t,"loader-size"),"--loader-color":n?Ii(n,e):void 0}}),Up=Et((e,t)=>{const n=Qe("Loader",W$e,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...g}=n,y=Qt({name:"Loader",props:n,classes:Pd,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:G$e});return p?S.jsx(Le,{...y("root"),ref:t,...g,children:p}):S.jsx(Le,{...y("root"),ref:t,component:d[s],variant:h,size:r,...g})});Up.defaultLoaders=xpe;Up.classes=Pd;Up.displayName="@mantine/core/Loader";var RT={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const Cee={orientation:"horizontal"},Y$e=(e,{borderWidth:t})=>({group:{"--ai-border-width":We(t)}}),sH=Et((e,t)=>{const n=Qe("ActionIconGroup",Cee,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Qe("ActionIconGroup",Cee,e),p=Qt({name:"ActionIconGroup",props:n,classes:RT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Y$e,rootSelector:"group"});return S.jsx(Le,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});sH.classes=RT;sH.displayName="@mantine/core/ActionIconGroup";const Aee={},K$e=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":zn(o,"section-height"),"--section-padding-x":zn(o,"section-padding-x"),"--section-fz":wa(o),"--section-radius":t===void 0?void 0:oi(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},oH=Et((e,t)=>{const n=Qe("ActionIconGroupSection",Aee,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=Qe("ActionIconGroupSection",Aee,e),p=Qt({name:"ActionIconGroupSection",props:n,classes:RT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:K$e,rootSelector:"groupSection"});return S.jsx(Le,{...p("groupSection"),ref:t,variant:l,...h})});oH.classes=RT;oH.displayName="@mantine/core/ActionIconGroupSection";const X$e={},Q$e=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":zn(t,"ai-size"),"--ai-radius":n===void 0?void 0:oi(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},f1=no((e,t)=>{const n=Qe("ActionIcon",X$e,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:g,vars:y,children:x,disabled:b,"data-disabled":_,autoContrast:E,mod:T,...k}=n,I=Qt({name:["ActionIcon",p],props:n,className:r,style:u,classes:RT,classNames:o,styles:a,unstyled:i,vars:y,varsResolver:Q$e});return S.jsxs(Nc,{...I("root",{active:!b&&!l&&!_}),...k,unstyled:i,variant:s,size:f,disabled:b||l,ref:t,mod:[{loading:l,disabled:b||_},T],children:[S.jsx(jp,{mounted:!!l,transition:"slide-down",duration:150,children:R=>S.jsx(Le,{component:"span",...I("loader",{style:R}),"aria-hidden":!0,children:S.jsx(Up,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),S.jsx(Le,{component:"span",mod:{loading:l},...I("icon"),children:x})]})});f1.classes=RT;f1.displayName="@mantine/core/ActionIcon";f1.Group=sH;f1.GroupSection=oH;const wpe=O.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>S.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:S.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));wpe.displayName="@mantine/core/CloseIcon";var _pe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const J$e={variant:"subtle"},Z$e=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":zn(t,"cb-size"),"--cb-radius":n===void 0?void 0:oi(n),"--cb-icon-size":We(r)}}),d1=no((e,t)=>{const n=Qe("CloseButton",J$e,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:g,mod:y,__staticSelector:x,...b}=n,_=Qt({name:x||"CloseButton",props:n,className:a,style:l,classes:_pe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:Z$e});return S.jsxs(Nc,{ref:t,...b,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},y],..._("root",{variant:p,active:!h&&!d}),children:[g||S.jsx(wpe,{}),i]})});d1.classes=_pe;d1.displayName="@mantine/core/CloseButton";function eLe(e){return O.Children.toArray(e).filter(Boolean)}var Epe={root:"m_4081bf90"};const tLe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},nLe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Zs(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),is=Et((e,t)=>{const n=Qe("Group",tLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:g,variant:y,__size:x,mod:b,..._}=n,E=eLe(u),T=E.length,k=Zs(l??"md"),R={childWidth:`calc(${100/T}% - (${k} - ${k} / ${T}))`},D=Qt({name:"Group",props:n,stylesCtx:R,className:i,style:s,classes:Epe,classNames:r,styles:o,unstyled:a,vars:g,varsResolver:nLe});return S.jsx(Le,{...D("root"),ref:t,variant:y,mod:[{grow:h},b],size:x,..._,children:E})});is.classes=Epe;is.displayName="@mantine/core/Group";const[rLe,V0]=ka("ModalBase component was not found in tree");function iLe({opened:e,transitionDuration:t}){const[n,r]=O.useState(e),i=O.useRef(-1),o=d$()?0:t;return O.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function sLe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=qu(e),[u,l]=O.useState(!1),[c,f]=O.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=iLe({opened:n,transitionDuration:d});return ghe("keydown",p=>{var g;p.key==="Escape"&&i&&n&&((g=p.target)==null?void 0:g.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),dhe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Tpe=O.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:s,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:u,returnFocus:l,closeOnClickOutside:c,withinPortal:f,portalProps:d,lockScroll:h,children:p,zIndex:g,shadow:y,padding:x,__vars:b,unstyled:_,removeScrollProps:E,...T},k)=>{const{_id:I,titleMounted:R,bodyMounted:D,shouldLockScroll:L,setTitleMounted:M,setBodyMounted:z}=sLe({id:r,transitionProps:i,opened:t,trapFocus:a,closeOnEscape:u,onClose:n,returnFocus:l}),{key:F,...H}=E||{};return S.jsx(c1,{...d,withinPortal:f,children:S.jsx(rLe,{value:{opened:t,onClose:n,closeOnClickOutside:c,onExitTransitionEnd:s,onEnterTransitionEnd:o,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${I}-title`,getBodyId:()=>`${I}-body`,titleMounted:R,bodyMounted:D,setTitleMounted:M,setBodyMounted:z,trapFocus:a,closeOnEscape:u,zIndex:g,unstyled:_},children:S.jsx(EE,{enabled:L&&h,...H,children:S.jsx(Le,{ref:k,...T,__vars:{...b,"--mb-z-index":(g||zl("modal")).toString(),"--mb-shadow":IV(y),"--mb-padding":Zs(x)},children:p})},F)})})});Tpe.displayName="@mantine/core/ModalBase";function oLe(){const e=V0();return O.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var kE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const Spe=O.forwardRef(({className:e,...t},n)=>{const r=oLe(),i=V0();return S.jsx(Le,{ref:n,...t,id:r,className:Fs({[kE.body]:!i.unstyled},e)})});Spe.displayName="@mantine/core/ModalBaseBody";const Cpe=O.forwardRef(({className:e,onClick:t,...n},r)=>{const i=V0();return S.jsx(d1,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Fs({[kE.close]:!i.unstyled},e),unstyled:i.unstyled})});Cpe.displayName="@mantine/core/ModalBaseCloseButton";const Ape=O.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=V0();return S.jsx(jp,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var u,l,c;(u=a.onExitTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onExited)==null||c.call(l)},onEntered:()=>{var u,l,c;(u=a.onEnterTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onEntered)==null||c.call(l)},...e,children:u=>S.jsx("div",{...n,className:Fs({[kE.inner]:!a.unstyled},n.className),children:S.jsx(w$,{active:a.opened&&a.trapFocus,innerRef:o,children:S.jsx(CT,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,u],className:Fs({[kE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})});Ape.displayName="@mantine/core/ModalBaseContent";const kpe=O.forwardRef(({className:e,...t},n)=>{const r=V0();return S.jsx(Le,{component:"header",ref:n,className:Fs({[kE.header]:!r.unstyled},e),...t})});kpe.displayName="@mantine/core/ModalBaseHeader";const aLe={duration:200,timingFunction:"ease",transition:"fade"};function uLe(e){const t=V0();return{...aLe,...t.transitionProps,...e}}const Ipe=O.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...i},s)=>{const o=V0(),a=uLe(t);return S.jsx(jp,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:u=>S.jsx(AE,{ref:s,fixed:!0,style:[n,u],zIndex:o.zIndex,unstyled:o.unstyled,onClick:l=>{e==null||e(l),o.closeOnClickOutside&&o.onClose()},...i})})});Ipe.displayName="@mantine/core/ModalBaseOverlay";function lLe(){const e=V0();return O.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const Rpe=O.forwardRef(({className:e,...t},n)=>{const r=lLe(),i=V0();return S.jsx(Le,{component:"h2",ref:n,className:Fs({[kE.title]:!i.unstyled},e),...t,id:r})});Rpe.displayName="@mantine/core/ModalBaseTitle";function cLe({children:e}){return S.jsx(S.Fragment,{children:e})}const[fLe,dLe]=a1({size:"sm"}),hLe={},Ppe=Et((e,t)=>{const n=Qe("InputClearButton",hLe,e),{size:r,variant:i,vars:s,classNames:o,styles:a,...u}=n,l=dLe(),{resolvedClassNames:c,resolvedStyles:f}=ox({classNames:o,styles:a,props:n});return S.jsx(d1,{variant:i||"transparent",ref:t,size:r||(l==null?void 0:l.size)||"sm",classNames:c,styles:f,__staticSelector:"InputClearButton",...u})});Ppe.displayName="@mantine/core/InputClearButton";const[pLe,PT]=a1({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var $f={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const kee={},mLe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${wa(t)} - ${We(2)})`}}),_$=Et((e,t)=>{const n=Qe("InputDescription",kee,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Qe("InputDescription",kee,n),p=PT(),g=Qt({name:["InputWrapper",c],props:n,classes:$f,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:mLe}),y=f&&(p==null?void 0:p.getStyles)||g;return S.jsx(Le,{component:"p",ref:t,variant:d,size:l,...y("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});_$.classes=$f;_$.displayName="@mantine/core/InputDescription";const gLe={},yLe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${wa(t)} - ${We(2)})`}}),E$=Et((e,t)=>{const n=Qe("InputError",gLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Qt({name:["InputWrapper",c],props:n,classes:$f,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:yLe}),g=PT(),y=f&&(g==null?void 0:g.getStyles)||p;return S.jsx(Le,{component:"p",ref:t,variant:d,size:l,...y("error",g!=null&&g.getStyles?{className:i,style:s}:void 0),...h})});E$.classes=$f;E$.displayName="@mantine/core/InputError";const Iee={labelElement:"label"},vLe=(e,{size:t})=>({label:{"--input-label-size":wa(t),"--input-asterisk-color":void 0}}),T$=Et((e,t)=>{const n=Qe("InputLabel",Iee,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:g,variant:y,mod:x,...b}=Qe("InputLabel",Iee,n),_=Qt({name:["InputWrapper",g],props:n,classes:$f,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:vLe}),E=PT(),T=(E==null?void 0:E.getStyles)||_;return S.jsxs(Le,{...T("label",E!=null&&E.getStyles?{className:i,style:s}:void 0),component:l,variant:y,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},x],onMouseDown:k=>{h==null||h(k),!k.defaultPrevented&&k.detail>1&&k.preventDefault()},...b,children:[p,f&&S.jsx("span",{...T("required"),"aria-hidden":!0,children:" *"})]})});T$.classes=$f;T$.displayName="@mantine/core/InputLabel";const Ree={},aH=Et((e,t)=>{const n=Qe("InputPlaceholder",Ree,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Qe("InputPlaceholder",Ree,n),p=Qt({name:["InputPlaceholder",l],props:n,classes:$f,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return S.jsx(Le,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});aH.classes=$f;aH.displayName="@mantine/core/InputPlaceholder";function bLe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const xLe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},wLe=(e,{size:t})=>({label:{"--input-label-size":wa(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${wa(t)} - ${We(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${wa(t)} - ${We(2)})`}}),uH=Et((e,t)=>{const n=Qe("InputWrapper",xLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:g,description:y,labelProps:x,descriptionProps:b,errorProps:_,labelElement:E,children:T,withAsterisk:k,id:I,required:R,__stylesApiProps:D,mod:L,...M}=n,z=Qt({name:["InputWrapper",f],props:D||n,classes:$f,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wLe}),F={size:l,variant:c,__staticSelector:f},H=qu(I),Q=typeof k=="boolean"?k:R,J=(_==null?void 0:_.id)||`${H}-error`,ne=(b==null?void 0:b.id)||`${H}-description`,Z=H,ie=!!g&&typeof g!="boolean",q=!!y,U=`${ie?J:""} ${q?ne:""}`,X=U.trim().length>0?U.trim():void 0,V=(x==null?void 0:x.id)||`${H}-label`,K=p&&S.jsx(T$,{labelElement:E,id:V,htmlFor:Z,required:Q,...F,...x,children:p},"label"),ee=q&&S.jsx(_$,{...b,...F,size:(b==null?void 0:b.size)||F.size,id:(b==null?void 0:b.id)||ne,children:y},"description"),fe=S.jsx(O.Fragment,{children:d(T)},"input"),Ee=ie&&O.createElement(E$,{..._,...F,size:(_==null?void 0:_.size)||F.size,key:"error",id:(_==null?void 0:_.id)||J},g),ye=h.map(_e=>{switch(_e){case"label":return K;case"input":return fe;case"description":return ee;case"error":return Ee;default:return null}});return S.jsx(pLe,{value:{getStyles:z,describedBy:X,inputId:Z,labelId:V,...bLe(h,{hasDescription:q,hasError:ie})},children:S.jsx(Le,{ref:t,variant:c,size:l,mod:[{error:!!g},L],...z("root"),...M,children:ye})})});uH.classes=$f;uH.displayName="@mantine/core/InputWrapper";const _Le={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},ELe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":zn(t.size,"input-height"),"--input-fz":wa(t.size),"--input-radius":t.radius===void 0?void 0:oi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?We(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?We(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?zn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),pi=no((e,t)=>{const n=Qe("Input",_Le,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:g,leftSectionProps:y,leftSectionWidth:x,rightSection:b,rightSectionProps:_,rightSectionWidth:E,rightSectionPointerEvents:T,leftSectionPointerEvents:k,variant:I,vars:R,pointer:D,multiline:L,radius:M,id:z,withAria:F,withErrorStyles:H,mod:Q,inputSize:J,__clearSection:ne,__clearable:Z,__defaultRightSection:ie,...q}=n,{styleProps:U,rest:X}=ux(q),V=PT(),K={offsetBottom:V==null?void 0:V.offsetBottom,offsetTop:V==null?void 0:V.offsetTop},ee=Qt({name:["Input",l],props:c||n,classes:$f,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:K,rootSelector:"wrapper",vars:R,varsResolver:ELe}),fe=F?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":V==null?void 0:V.describedBy,id:(V==null?void 0:V.inputId)||z}:{},Ee=b||Z&&ne||ie;return S.jsx(fLe,{value:{size:f||"sm"},children:S.jsxs(Le,{...ee("wrapper"),...U,...d,mod:[{error:!!h&&H,pointer:D,disabled:p,multiline:L,"data-with-right-section":!!b,"data-with-left-section":!!g},Q],variant:I,size:f,children:[g&&S.jsx("div",{...y,"data-position":"left",...ee("section",{className:y==null?void 0:y.className,style:y==null?void 0:y.style}),children:g}),S.jsx(Le,{component:"input",...X,...fe,ref:t,required:u,mod:{disabled:p,error:!!h&&H},variant:I,__size:J,...ee("input")}),Ee&&S.jsx("div",{..._,"data-position":"right",...ee("section",{className:_==null?void 0:_.className,style:_==null?void 0:_.style}),children:Ee})]})})});pi.classes=$f;pi.Wrapper=uH;pi.Label=T$;pi.Error=E$;pi.Description=_$;pi.Placeholder=aH;pi.ClearButton=Ppe;pi.displayName="@mantine/core/Input";function TLe(e,t,n){const r=Qe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:g,descriptionProps:y,wrapperProps:x,id:b,size:_,style:E,inputContainer:T,inputWrapperOrder:k,withAsterisk:I,variant:R,vars:D,mod:L,...M}=r,{styleProps:z,rest:F}=ux(M),H={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:g,descriptionProps:y,unstyled:f,styles:l,size:_,style:E,inputContainer:T,inputWrapperOrder:k,withAsterisk:I,variant:R,id:b,mod:L,...x};return{...F,classNames:u,styles:l,unstyled:f,wrapperProps:{...H,...z},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:_,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:R,id:b}}}const SLe={__staticSelector:"InputBase",withAria:!0},Lf=no((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=TLe("InputBase",SLe,e);return S.jsx(pi.Wrapper,{...r,children:S.jsx(pi,{...n,...i,ref:t})})});Lf.classes={...pi.classes,...pi.Wrapper.classes};Lf.displayName="@mantine/core/InputBase";const CLe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Dpe={root:"m_8bffd616"};const ALe={},sn=no((e,t)=>{const n=Qe("Flex",ALe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:g,...y}=n,x=Qt({name:"Flex",classes:Dpe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),b=to(),_=oI(),E=The({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:g},theme:b,data:CLe});return S.jsxs(S.Fragment,{children:[E.hasResponsiveStyles&&S.jsx(ax,{selector:`.${_}`,styles:E.styles,media:E.media}),S.jsx(Le,{ref:t,...x("root",{className:_,style:s1(E.inlineStyles)}),...y})]})});sn.classes=Dpe;sn.displayName="@mantine/core/Flex";const[kLe,lH]=ka("Accordion component was not found in the tree");function S$({style:e,size:t=16,...n}){return S.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:We(t),height:We(t),display:"block"},...n,children:S.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}S$.displayName="@mantine/core/AccordionChevron";const[ILe,Npe]=ka("Accordion.Item component was not found in the tree");var uI={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const RLe={},cH=Et((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Qe("AccordionControl",RLe,e),{value:g}=Npe(),y=lH(),x=y.isItemActive(g),b=typeof y.order=="number",_=`h${y.order}`,E=S.jsxs(Nc,{...p,...y.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:y.variant}),unstyled:y.unstyled,mod:["accordion-control",{active:x,"chevron-position":y.chevronPosition,disabled:d},h],ref:t,onClick:T=>{l==null||l(T),y.onChange(g)},type:"button",disabled:d,"aria-expanded":x,"aria-controls":y.getRegionId(g),id:y.getControlId(g),onKeyDown:kV({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:y.loop,orientation:"vertical",onKeyDown:c}),children:[S.jsx(Le,{component:"span",mod:{rotate:!y.disableChevronRotation&&x,position:y.chevronPosition},...y.getStyles("chevron",{classNames:n,styles:s}),children:a||y.chevron}),S.jsx("span",{...y.getStyles("label",{classNames:n,styles:s}),children:f}),u&&S.jsx(Le,{component:"span",mod:{"chevron-position":y.chevronPosition},...y.getStyles("icon",{classNames:n,styles:s}),children:u})]});return b?S.jsx(_,{...y.getStyles("itemTitle",{classNames:n,styles:s}),children:E}):E});cH.displayName="@mantine/core/AccordionControl";cH.classes=uI;const PLe={},fH=Et((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Qe("AccordionItem",PLe,e),c=lH();return S.jsx(ILe,{value:{value:a},children:S.jsx(Le,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});fH.displayName="@mantine/core/AccordionItem";fH.classes=uI;const DLe={},dH=Et((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Qe("AccordionPanel",DLe,e),{value:l}=Npe(),c=lH();return S.jsx(g$,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:S.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});dH.displayName="@mantine/core/AccordionPanel";dH.classes=uI;const NLe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:S.jsx(S$,{})},OLe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:We(n),"--accordion-radius":r===void 0?void 0:oi(r)}});function Ka(e){const t=Qe("Accordion",NLe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:g,disableChevronRotation:y,chevronPosition:x,chevronSize:b,order:_,chevron:E,variant:T,radius:k,...I}=t,R=qu(h),[D,L]=qo({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),M=H=>Array.isArray(D)?D.includes(H):H===D,z=H=>{const Q=Array.isArray(D)?D.includes(H)?D.filter(J=>J!==H):[...D,H]:H===D?null:H;L(Q)},F=Qt({name:"Accordion",classes:uI,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:OLe});return S.jsx(kLe,{value:{isItemActive:M,onChange:z,getControlId:IO(`${R}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:IO(`${R}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:g,disableChevronRotation:y,chevronPosition:x,order:_,chevron:E,loop:p,getStyles:F,variant:T,unstyled:o},children:S.jsx(Le,{...F("root"),id:R,...I,variant:T,"data-accordion":!0,children:u})})}const $Le=e=>e;Ka.extend=$Le;Ka.withProps=U4e(Ka);Ka.classes=uI;Ka.displayName="@mantine/core/Accordion";Ka.Item=fH;Ka.Panel=dH;Ka.Control=cH;Ka.Chevron=S$;var Ope={root:"m_7f854edf"};const LLe={position:{bottom:0,right:0},zIndex:zl("modal"),withinPortal:!0},MLe=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":We(n==null?void 0:n.top),"--affix-left":We(n==null?void 0:n.left),"--affix-bottom":We(n==null?void 0:n.bottom),"--affix-right":We(n==null?void 0:n.right)}}),hH=Et((e,t)=>{const n=Qe("Affix",LLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,portalProps:l,zIndex:c,withinPortal:f,position:d,...h}=n,p=Qt({name:"Affix",classes:Ope,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MLe});return S.jsx(c1,{...l,withinPortal:f,children:S.jsx(Le,{ref:t,...p("root"),...h})})});hH.classes=Ope;hH.displayName="@mantine/core/Affix";var $pe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const FLe={},BLe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:oi(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},l0=Et((e,t)=>{const n=Qe("Alert",FLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:g,onClose:y,closeButtonLabel:x,variant:b,autoContrast:_,...E}=n,T=Qt({name:"Alert",classes:$pe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:BLe}),k=qu(h),I=f&&`${k}-title`||void 0,R=`${k}-body`;return S.jsx(Le,{id:k,...T("root",{variant:b}),variant:b,ref:t,...E,role:"alert","aria-describedby":R,"aria-labelledby":I,children:S.jsxs("div",{...T("wrapper"),children:[p&&S.jsx("div",{...T("icon"),children:p}),S.jsxs("div",{...T("body"),children:[f&&S.jsx("div",{...T("title"),"data-with-close-button":g||void 0,children:S.jsx("span",{id:I,...T("label"),children:f})}),d&&S.jsx("div",{id:R,...T("message"),"data-variant":b,children:d})]}),g&&S.jsx(d1,{...T("closeButton"),onClick:y,variant:"transparent",size:16,iconSize:16,"aria-label":x,unstyled:a})]})})});l0.classes=$pe;l0.displayName="@mantine/core/Alert";var Lpe={root:"m_b6d8b162"};function jLe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const ULe={inherit:!1},zLe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":wa(i),"--text-lh":fhe(i),"--text-gradient":t==="gradient"?vj(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Ii(s,e):void 0}}),bt=no((e,t)=>{const n=Qe("Text",ULe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:g,variant:y,mod:x,size:b,..._}=n,E=Qt({name:["Text",l],props:n,classes:Lpe,className:f,style:d,classNames:h,styles:p,unstyled:g,vars:c,varsResolver:zLe});return S.jsx(Le,{...E("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:y,mod:[{"data-truncate":jLe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},x],size:b,..._})});bt.classes=Lpe;bt.displayName="@mantine/core/Text";var Mpe={root:"m_849cf0da"};const VLe={underline:"hover"},cx=no((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Qe("Anchor",VLe,e);return S.jsx(bt,{component:"a",ref:t,className:Fs({[Mpe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});cx.classes=Mpe;cx.displayName="@mantine/core/Anchor";const[HLe,DT]=ka("AppShell was not found in tree");var h1={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const qLe={},pH=Et((e,t)=>{const n=Qe("AppShellAside",qLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=DT();return h.disabled?null:S.jsx(Le,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});pH.classes=h1;pH.displayName="@mantine/core/AppShellAside";const WLe={},mH=Et((e,t)=>{var p;const n=Qe("AppShellFooter",WLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=DT();return h.disabled?null:S.jsx(Le,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Fs({[EE.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});mH.classes=h1;mH.displayName="@mantine/core/AppShellFooter";const GLe={},gH=Et((e,t)=>{var p;const n=Qe("AppShellHeader",GLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=DT();return h.disabled?null:S.jsx(Le,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Fs({[EE.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});gH.classes=h1;gH.displayName="@mantine/core/AppShellHeader";const YLe={},yH=Et((e,t)=>{const n=Qe("AppShellMain",YLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=DT();return S.jsx(Le,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});yH.classes=h1;yH.displayName="@mantine/core/AppShellMain";function lI(e){return typeof e=="object"?e.base:e}function cI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function fI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function KLe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),cI(s)){const f=We(lI(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(fI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=We(s.base),e["--app-shell-aside-offset"]=We(s.base)),Ti(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=We(s[f]),t[f]["--app-shell-aside-offset"]=We(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=RV(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function XLe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(cI(r)){const o=We(lI(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}fI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=We(r.base),s&&(e["--app-shell-footer-offset"]=We(r.base))),Ti(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=We(r[o]),s&&(t[o]["--app-shell-footer-offset"]=We(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function QLe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(cI(r)){const o=We(lI(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}fI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=We(r.base),s&&(e["--app-shell-header-offset"]=We(r.base))),Ti(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=We(r[o]),s&&(t[o]["--app-shell-header-offset"]=We(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function JLe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),cI(s)){const f=We(lI(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(fI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=We(s.base),e["--app-shell-navbar-offset"]=We(s.base)),Ti(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=We(s[f]),t[f]["--app-shell-navbar-offset"]=We(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=RV(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function t8(e){return Number(e)===0?"0px":Zs(e)}function ZLe({padding:e,baseStyles:t,minMediaStyles:n}){cI(e)&&(t["--app-shell-padding"]=t8(lI(e))),fI(e)&&(e.base&&(t["--app-shell-padding"]=t8(e.base)),Ti(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=t8(e[r]))}))}function eMe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};JLe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),KLe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),QLe({baseStyles:u,minMediaStyles:o,header:t}),XLe({baseStyles:u,minMediaStyles:o,footer:n}),ZLe({baseStyles:u,minMediaStyles:o,padding:i});const l=GA(Ti(o),s.breakpoints).map(d=>({query:`(min-width: ${kO(d.px)})`,styles:o[d.value]})),c=GA(Ti(a),s.breakpoints).map(d=>({query:`(max-width: ${kO(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function tMe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=to(),o=u1(),{media:a,baseStyles:u}=eMe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return S.jsx(ax,{media:a,styles:u,selector:o.cssVariablesSelector})}const nMe={},vH=Et((e,t)=>{const n=Qe("AppShellNavbar",nMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=DT();return h.disabled?null:S.jsx(Le,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});vH.classes=h1;vH.displayName="@mantine/core/AppShellNavbar";const rMe={},bH=no((e,t)=>{const n=Qe("AppShellSection",rMe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=DT();return S.jsx(Le,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});bH.classes=h1;bH.displayName="@mantine/core/AppShellSection";function iMe({transitionDuration:e,disabled:t}){const[n,r]=O.useState(!0),i=O.useRef(-1),s=O.useRef(-1);return ghe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>O.startTransition(()=>{r(!1)}),200)}),ix(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>O.startTransition(()=>{r(!1)}),e||0)},[t,e]),n}const sMe={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:zl("app")},oMe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),ci=Et((e,t)=>{const n=Qe("AppShell",sMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:g,layout:y,disabled:x,aside:b,footer:_,offsetScrollbars:E=y!=="alt",mod:T,...k}=n,I=Qt({name:"AppShell",classes:h1,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oMe}),R=iMe({disabled:x,transitionDuration:d});return S.jsxs(HLe,{value:{getStyles:I,withBorder:c,zIndex:g,disabled:x,offsetScrollbars:E},children:[S.jsx(tMe,{navbar:l,header:p,aside:b,footer:_,padding:f}),S.jsx(Le,{ref:t,...I("root"),mod:[{resizing:R,layout:y,disabled:x},T],...k})]})});ci.classes=h1;ci.displayName="@mantine/core/AppShell";ci.Navbar=vH;ci.Header=gH;ci.Main=yH;ci.Aside=pH;ci.Footer=mH;ci.Section=bH;function Fpe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Fpe(t))}:e}function Bpe(e){return e?e.map(t=>Fpe(t)):[]}function xH(e){return e.reduce((t,n)=>"group"in n?{...t,...xH(n.items)}:(t[n.value]=n,t),{})}var $l={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const aMe={error:null},uMe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":zn(t,"combobox-chevron-size")}}),wH=Et((e,t)=>{const n=Qe("ComboboxChevron",aMe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Qt({name:"ComboboxChevron",classes:$l,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:uMe,rootSelector:"chevron"});return S.jsx(Le,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:S.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});wH.classes=$l;wH.displayName="@mantine/core/ComboboxChevron";const[lMe,Mf]=ka("Combobox component was not found in tree"),jpe=O.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>S.jsx(pi.ClearButton,{ref:s,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));jpe.displayName="@mantine/core/ComboboxClearButton";const cMe={},_H=Et((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Qe("ComboboxDropdown",cMe,e),u=Mf();return S.jsx(_a.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});_H.classes=$l;_H.displayName="@mantine/core/ComboboxDropdown";const fMe={refProp:"ref"},Upe=Et((e,t)=>{const{children:n,refProp:r}=Qe("ComboboxDropdownTarget",fMe,e);if(Mf(),!o1(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return S.jsx(_a.Target,{ref:t,refProp:r,children:n})});Upe.displayName="@mantine/core/ComboboxDropdownTarget";const dMe={},EH=Et((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("ComboboxEmpty",dMe,e),u=Mf();return S.jsx(Le,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});EH.classes=$l;EH.displayName="@mantine/core/ComboboxEmpty";function TH({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Mf(),[a,u]=O.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const hMe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},zpe=Et((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Qe("ComboboxEventsTarget",hMe,e);if(!o1(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Mf(),f=TH({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return O.cloneElement(n,{...f,...l,[r]:xo(t,c.store.targetRef,h$(n))})});zpe.displayName="@mantine/core/ComboboxEventsTarget";const pMe={},SH=Et((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("ComboboxFooter",pMe,e),u=Mf();return S.jsx(Le,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});SH.classes=$l;SH.displayName="@mantine/core/ComboboxFooter";const mMe={},CH=Et((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Qe("ComboboxGroup",mMe,e),c=Mf();return S.jsxs(Le,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&S.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});CH.classes=$l;CH.displayName="@mantine/core/ComboboxGroup";const gMe={},AH=Et((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("ComboboxHeader",gMe,e),u=Mf();return S.jsx(Le,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});AH.classes=$l;AH.displayName="@mantine/core/ComboboxHeader";function Vpe({value:e,valuesDivider:t=",",...n}){return S.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Vpe.displayName="@mantine/core/ComboboxHiddenInput";const yMe={},kH=Et((e,t)=>{const n=Qe("ComboboxOption",yMe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:g,...y}=n,x=Mf(),b=O.useId(),_=l||b;return S.jsx(Le,{...x.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...y,ref:t,id:_,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},g],role:"option",onClick:E=>{var T;h?E.preventDefault():((T=x.onOptionSubmit)==null||T.call(x,n.value,n),u==null||u(E))},onMouseDown:E=>{E.preventDefault(),f==null||f(E)},onMouseOver:E=>{x.resetSelectionOnOptionHover&&x.store.resetSelectedOption(),d==null||d(E)}})});kH.classes=$l;kH.displayName="@mantine/core/ComboboxOption";const vMe={},IH=Et((e,t)=>{const n=Qe("ComboboxOptions",vMe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Mf(),d=qu(a);return O.useEffect(()=>{f.store.setListId(d)},[d]),S.jsx(Le,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});IH.classes=$l;IH.displayName="@mantine/core/ComboboxOptions";const bMe={withAriaAttributes:!0,withKeyboardNavigation:!0},RH=Et((e,t)=>{const n=Qe("ComboboxSearch",bMe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Mf(),h=d.getStyles("search"),p=TH({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return S.jsx(pi,{ref:xo(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});RH.classes=$l;RH.displayName="@mantine/core/ComboboxSearch";const xMe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Hpe=Et((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Qe("ComboboxTarget",xMe,e);if(!o1(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Mf(),f=TH({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=O.cloneElement(n,{...f,...l});return S.jsx(_a.Target,{ref:xo(t,c.store.targetRef),children:d})});Hpe.displayName="@mantine/core/ComboboxTarget";function wMe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function _Me(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function EMe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function PH({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=qo({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=O.useRef(null),c=O.useRef(-1),f=O.useRef(null),d=O.useRef(null),h=O.useRef(-1),p=O.useRef(-1),g=O.useRef(-1),y=O.useCallback((J="unknown")=>{a||(u(!0),i==null||i(J))},[u,i,a]),x=O.useCallback((J="unknown")=>{a&&(u(!1),r==null||r(J))},[u,r,a]),b=O.useCallback((J="unknown")=>{a?x(J):y(J)},[x,y,a]),_=O.useCallback(()=>{const J=document.querySelector(`#${l.current} [data-combobox-selected]`);J==null||J.removeAttribute("data-combobox-selected"),J==null||J.removeAttribute("aria-selected")},[]),E=O.useCallback(J=>{const ne=document.getElementById(l.current),Z=ne==null?void 0:ne.querySelectorAll("[data-combobox-option]");if(!Z)return null;const ie=J>=Z.length?0:J<0?Z.length-1:J;return c.current=ie,Z!=null&&Z[ie]&&!Z[ie].hasAttribute("data-combobox-disabled")?(_(),Z[ie].setAttribute("data-combobox-selected","true"),Z[ie].setAttribute("aria-selected","true"),Z[ie].scrollIntoView({block:"nearest",behavior:o}),Z[ie].id):null},[o,_]),T=O.useCallback(()=>{const J=document.querySelector(`#${l.current} [data-combobox-active]`);if(J){const ne=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Z=Array.from(ne).findIndex(ie=>ie===J);return E(Z)}return E(0)},[E]),k=O.useCallback(()=>E(_Me(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),I=O.useCallback(()=>E(wMe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),R=O.useCallback(()=>E(EMe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[E]),D=O.useCallback((J="selected",ne)=>{g.current=window.setTimeout(()=>{var q;const Z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ie=Array.from(Z).findIndex(U=>U.hasAttribute(`data-combobox-${J}`));c.current=ie,ne!=null&&ne.scrollIntoView&&((q=Z[ie])==null||q.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),L=O.useCallback(()=>{c.current=-1,_()},[_]),M=O.useCallback(()=>{const J=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ne=J==null?void 0:J[c.current];ne==null||ne.click()},[]),z=O.useCallback(J=>{l.current=J},[]),F=O.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),H=O.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),Q=O.useCallback(()=>c.current,[]);return O.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(g.current)},[]),{dropdownOpened:a,openDropdown:y,closeDropdown:x,toggleDropdown:b,selectedOptionIndex:c.current,getSelectedOptionIndex:Q,selectOption:E,selectFirstOption:R,selectActiveOption:T,selectNextOption:k,selectPreviousOption:I,resetSelectedOption:L,updateSelectedOptionIndex:D,listId:l.current,setListId:z,clickSelectedOption:M,searchRef:f,focusSearchInput:F,targetRef:d,focusTarget:H}}const TMe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},SMe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":wa(t),"--combobox-option-padding":zn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:We(n),"--combobox-option-fz":wa(t),"--combobox-option-padding":zn(t,"combobox-option-padding")}});function Er(e){const t=Qe("Combobox",TMe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...g}=t,y=PH(),x=o||y,b=Qt({name:h||"Combobox",classes:$l,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:SMe}),_=()=>{l==null||l(),x.closeDropdown()};return S.jsx(lMe,{value:{getStyles:b,store:x,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:S.jsx(_a,{opened:x.dropdownOpened,...g,onChange:E=>!E&&_(),withRoles:!1,unstyled:i,children:s})})}const CMe=e=>e;Er.extend=CMe;Er.classes=$l;Er.displayName="@mantine/core/Combobox";Er.Target=Hpe;Er.Dropdown=_H;Er.Options=IH;Er.Option=kH;Er.Search=RH;Er.Empty=EH;Er.Chevron=wH;Er.Footer=SH;Er.Header=AH;Er.EventsTarget=zpe;Er.DropdownTarget=Upe;Er.Group=CH;Er.ClearButton=jpe;Er.HiddenInput=Vpe;var qpe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Wpe=qpe,C$=O.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:g="label",variant:y,style:x,vars:b,mod:_,...E},T)=>{const k=Qt({name:e,props:t,className:n,style:x,classes:qpe,classNames:r,styles:i,unstyled:s});return S.jsx(Le,{...k("root"),ref:T,__vars:{"--label-fz":wa(d),"--label-lh":zn(d,"label-lh")},mod:[{"label-position":h},_],variant:y,size:d,...E,children:S.jsxs(Le,{component:p,htmlFor:p==="label"?l:void 0,...k("body"),children:[o,S.jsxs("div",{...k("labelWrapper"),"data-disabled":c||void 0,children:[a&&S.jsx(Le,{component:g,htmlFor:g==="label"?l:void 0,...k("label"),"data-disabled":c||void 0,children:a}),u&&S.jsx(pi.Description,{size:d,__inheritStyles:!1,...k("description"),children:u}),f&&typeof f!="boolean"&&S.jsx(pi.Error,{size:d,__inheritStyles:!1,...k("error"),children:f})]})]})})});C$.displayName="@mantine/core/InlineInput";const Gpe=O.createContext(null),AMe=Gpe.Provider,Ype=()=>O.useContext(Gpe),[kMe,IMe]=a1();var Kpe={card:"m_26775b0a"};const RMe={withBorder:!0},PMe=(e,{radius:t})=>({card:{"--card-radius":oi(t)}}),DH=Et((e,t)=>{const n=Qe("CheckboxCard",RMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,defaultChecked:p,onChange:g,...y}=n,x=Qt({name:"CheckboxCard",classes:Kpe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PMe,rootSelector:"card"}),b=Ype(),_=typeof l=="boolean"?l:b?b.value.includes(d||""):void 0,[E,T]=qo({value:_,defaultValue:p,finalValue:!1,onChange:g});return S.jsx(kMe,{value:{checked:E},children:S.jsx(Nc,{ref:t,mod:[{"with-border":f,checked:E},c],...x("card"),...y,role:"checkbox","aria-checked":E,onClick:k=>{h==null||h(k),b==null||b.onChange(d||""),T(!E)}})})});DH.displayName="@mantine/core/CheckboxCard";DH.classes=Kpe;function NH({children:e,role:t}){const n=PT();return n?S.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):S.jsx(S.Fragment,{children:e})}const DMe={},OH=Et((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Qe("CheckboxGroup",DMe,e),[c,f]=qo({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(g=>g!==p):[...c,p])};return S.jsx(AMe,{value:{value:c,onChange:d,size:s},children:S.jsx(pi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:S.jsx(NH,{role:"group",children:a})})})});OH.classes=pi.Wrapper.classes;OH.displayName="@mantine/core/CheckboxGroup";function Xpe({size:e,style:t,...n}){const r=e!==void 0?{width:We(e),height:We(e),...t}:t;return S.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:S.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Qpe({indeterminate:e,...t}){return e?S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:S.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):S.jsx(Xpe,{...t})}var Jpe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const NMe={icon:Qpe},OMe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Bp({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":zn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:oi(t),"--checkbox-color":s==="outline"?u:Ii(n,e),"--checkbox-icon-color":i?Ii(i,e):ST(o,e)?sx({color:n,theme:e,autoContrast:o}):void 0}}},$H=Et((e,t)=>{const n=Qe("CheckboxIndicator",NMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:g,mod:y,variant:x,disabled:b,..._}=n,E=l,T=Qt({name:"CheckboxIndicator",classes:Jpe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OMe,rootSelector:"indicator"}),k=IMe(),I=typeof g=="boolean"||typeof c=="boolean"?g||c:(k==null?void 0:k.checked)||!1;return S.jsx(Le,{ref:t,...T("indicator",{variant:x}),variant:x,mod:[{checked:I,disabled:b},y],..._,children:S.jsx(E,{indeterminate:c,...T("icon")})})});$H.displayName="@mantine/core/CheckboxIndicator";$H.classes=Jpe;var Zpe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const $Me={labelPosition:"right",icon:Qpe},LMe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Bp({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":zn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:oi(t),"--checkbox-color":s==="outline"?u:Ii(n,e),"--checkbox-icon-color":i?Ii(i,e):ST(o,e)?sx({color:n,theme:e,autoContrast:o}):void 0}}},eu=Et((e,t)=>{const n=Qe("Checkbox",$Me,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,checked:g,labelPosition:y,description:x,error:b,disabled:_,variant:E,indeterminate:T,icon:k,rootRef:I,iconColor:R,onChange:D,autoContrast:L,mod:M,...z}=n,F=Ype(),H=d||(F==null?void 0:F.size),Q=k,J=Qt({name:"Checkbox",props:n,classes:Zpe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:LMe}),{styleProps:ne,rest:Z}=ux(z),ie=qu(f),q=F?{checked:F.value.includes(Z.value),onChange:U=>{F.onChange(U),D==null||D(U)}}:{};return S.jsx(C$,{...J("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:ie,size:H,labelPosition:y,label:c,description:x,error:b,disabled:_,classNames:r,styles:o,unstyled:a,"data-checked":q.checked||g||void 0,variant:E,ref:I,mod:M,...ne,...p,children:S.jsxs(Le,{...J("inner"),mod:{"data-label-position":y},children:[S.jsx(Le,{component:"input",id:ie,ref:t,checked:g,disabled:_,mod:{error:!!b,indeterminate:T},...J("input",{focusable:!0,variant:E}),onChange:D,...Z,...q,type:"checkbox"}),S.jsx(Q,{indeterminate:T,...J("icon")})]})})});eu.classes={...Zpe,...Wpe};eu.displayName="@mantine/core/Checkbox";eu.Group=OH;eu.Indicator=$H;eu.Card=DH;function IE(e){return"group"in e}function eme({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;IE(o)&&i.push({group:o.group,items:eme({options:o.items,search:t,limit:n-i.length})}),IE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function MMe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function tme(e,t=new Set){if(Array.isArray(e))for(const n of e)if(IE(n))tme(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function FMe(e,t){return Array.isArray(e)?e.includes(t):e===t}function nme({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!IE(e)){const a=FMe(n,e.value),u=t&&a&&S.jsx(Xpe,{className:$l.optionsDropdownCheckIcon}),l=S.jsxs(S.Fragment,{children:[r==="left"&&u,S.jsx("span",{children:e.label}),r==="right"&&u]});return S.jsx(Er.Option,{value:e.value,disabled:e.disabled,className:Fs({[$l.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>S.jsx(nme,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return S.jsx(Er.Group,{label:e.group,children:o})}function rme({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:g,scrollAreaProps:y,"aria-label":x}){tme(e);const _=typeof i=="string"?(r||eme)({options:e,search:u?i:"",limit:s??1/0}):e,E=MMe(_),T=_.map(k=>S.jsx(nme,{data:k,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:g},IE(k)?k.group:k.value));return S.jsx(Er.Dropdown,{hidden:t||n&&E,children:S.jsxs(Er.Options,{labelledBy:p,"aria-label":x,children:[a?S.jsx(_0.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...y,children:T}):T,E&&d&&S.jsx(Er.Empty,{children:d})]})})}var ime={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const BMe={},jMe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":zn(s,"badge-height"),"--badge-padding-x":zn(s,"badge-padding-x"),"--badge-fz":zn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:oi(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Ii(n,e):void 0}}},Ld=no((e,t)=>{const n=Qe("Badge",BMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:g,fullWidth:y,autoContrast:x,circle:b,mod:_,...E}=n,T=Qt({name:"Badge",props:n,classes:ime,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jMe});return S.jsxs(Le,{variant:g,mod:[{block:y,circle:b,"with-right-section":!!h,"with-left-section":!!d},_],...T("root",{variant:g}),ref:t,...E,children:[d&&S.jsx("span",{...T("section"),"data-position":"left",children:d}),S.jsx("span",{...T("label"),children:p}),h&&S.jsx("span",{...T("section"),"data-position":"right",children:h})]})});Ld.classes=ime;Ld.displayName="@mantine/core/Badge";var NT={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const Pee={orientation:"horizontal"},UMe=(e,{borderWidth:t})=>({group:{"--button-border-width":We(t)}}),LH=Et((e,t)=>{const n=Qe("ButtonGroup",Pee,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Qe("ButtonGroup",Pee,e),p=Qt({name:"ButtonGroup",props:n,classes:NT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:UMe,rootSelector:"group"});return S.jsx(Le,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});LH.classes=NT;LH.displayName="@mantine/core/ButtonGroup";const Dee={},zMe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":zn(o,"section-height"),"--section-padding-x":zn(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?wa(o.replace("compact-","")):wa(o),"--section-radius":t===void 0?void 0:oi(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},MH=Et((e,t)=>{const n=Qe("ButtonGroupSection",Dee,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=Qe("ButtonGroupSection",Dee,e),p=Qt({name:"ButtonGroupSection",props:n,classes:NT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:zMe,rootSelector:"groupSection"});return S.jsx(Le,{...p("groupSection"),ref:t,variant:l,...h})});MH.classes=NT;MH.displayName="@mantine/core/ButtonGroupSection";const VMe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${We(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},HMe={},qMe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":zn(s,"button-height"),"--button-padding-x":zn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?wa(s.replace("compact-","")):wa(s),"--button-radius":t===void 0?void 0:oi(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},hn=no((e,t)=>{const n=Qe("Button",HMe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:g,gradient:y,classNames:x,styles:b,unstyled:_,"data-disabled":E,autoContrast:T,mod:k,...I}=n,R=Qt({name:"Button",props:n,classes:NT,className:s,style:r,classNames:x,styles:b,unstyled:_,vars:i,varsResolver:qMe}),D=!!l,L=!!c;return S.jsxs(Nc,{ref:t,...R("root",{active:!a&&!p&&!E}),unstyled:_,variant:d,disabled:a||p,mod:[{disabled:a||E,loading:p,block:f,"with-left-section":D,"with-right-section":L},k],...I,children:[S.jsx(jp,{mounted:!!p,transition:VMe,duration:150,children:M=>S.jsx(Le,{component:"span",...R("loader",{style:M}),"aria-hidden":!0,children:S.jsx(Up,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...g})})}),S.jsxs("span",{...R("inner"),children:[l&&S.jsx(Le,{component:"span",...R("section"),mod:{position:"left"},children:l}),S.jsx(Le,{component:"span",mod:{loading:p},...R("label"),children:u}),c&&S.jsx(Le,{component:"span",...R("section"),mod:{position:"right"},children:c})]})]})});hn.classes=NT;hn.displayName="@mantine/core/Button";hn.Group=LH;hn.GroupSection=MH;const[WMe,GMe]=ka("Card component was not found in tree");var FH={root:"m_e615b15f",section:"m_599a2148"};const YMe={},A$=no((e,t)=>{const n=Qe("CardSection",YMe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=GMe();return S.jsx(Le,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});A$.classes=FH;A$.displayName="@mantine/core/CardSection";const KMe={},XMe=(e,{padding:t})=>({root:{"--card-padding":Zs(t)}}),OT=no((e,t)=>{const n=Qe("Card",KMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Qt({name:"Card",props:n,classes:FH,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XMe}),h=O.Children.toArray(l),p=h.map((g,y)=>typeof g=="object"&&g&&"type"in g&&g.type===A$?O.cloneElement(g,{"data-first-section":y===0||void 0,"data-last-section":y===h.length-1||void 0}):g);return S.jsx(WMe,{value:{getStyles:d},children:S.jsx(CT,{ref:t,unstyled:a,...d("root"),...f,children:p})})});OT.classes=FH;OT.displayName="@mantine/core/Card";OT.Section=A$;var sme={root:"m_4451eb3a"};const QMe={},T0=no((e,t)=>{const n=Qe("Center",QMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Qt({name:"Center",props:n,classes:sme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return S.jsx(Le,{ref:t,mod:[{inline:l},c],...d("root"),...f})});T0.classes=sme;T0.displayName="@mantine/core/Center";var ome={root:"m_b183c0a2"};const JMe={},ZMe=(e,{color:t})=>({root:{"--code-bg":t?Ii(t,e):void 0}}),hA=Et((e,t)=>{const n=Qe("Code",JMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Qt({name:"Code",props:n,classes:ome,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZMe});return S.jsx(Le,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});hA.classes=ome;hA.displayName="@mantine/core/Code";var ame={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const Nee={withShadow:!0},e5e=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:oi(t),"--cs-size":We(n)}}),BH=no((e,t)=>{const n=Qe("ColorSwatch",Nee,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:p,...g}=Qe("ColorSwatch",Nee,n),y=Qt({name:"ColorSwatch",props:n,classes:ame,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:e5e});return S.jsxs(Le,{ref:t,variant:p,size:c,...y("root",{focusable:!0}),...g,children:[S.jsx("span",{...y("alphaOverlay")}),d&&S.jsx("span",{...y("shadowOverlay")}),S.jsx("span",{...y("colorOverlay",{style:{backgroundColor:l}})}),S.jsx("span",{...y("childrenOverlay"),children:h})]})});BH.classes=ame;BH.displayName="@mantine/core/ColorSwatch";var ume={root:"m_7485cace"};const t5e={},n5e=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:zn(t,"container-size")}}),S0=Et((e,t)=>{const n=Qe("Container",t5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Qt({name:"Container",classes:ume,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:n5e});return S.jsx(Le,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});S0.classes=ume;S0.displayName="@mantine/core/Container";var lme={root:"m_3eebeb36",label:"m_9e365f20"};const r5e={orientation:"horizontal"},i5e=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Ii(t,e):void 0,"--divider-border-style":n,"--divider-size":zn(r,"divider-size")}}),fx=Et((e,t)=>{const n=Qe("Divider",r5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,g=Qt({name:"Divider",classes:lme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:i5e});return S.jsx(Le,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...g("root"),...p,role:"separator",children:f&&S.jsx(Le,{component:"span",mod:{position:d},...g("label"),children:f})})});fx.classes=lme;fx.displayName="@mantine/core/Divider";function s5e({open:e,close:t,openDelay:n,closeDelay:r}){const i=O.useRef(-1),s=O.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return O.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[Oee,cme]=ka("Grid component was not found in tree"),kj=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,$ee=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":kj(e,t),Lee=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Mee=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function o5e({span:e,order:t,offset:n,selector:r}){var h;const i=to(),s=cme(),o=s.breakpoints||i.breakpoints,u=Rd(e)===void 0?12:Rd(e),l=s1({"--col-order":(h=Rd(t))==null?void 0:h.toString(),"--col-flex-grow":Lee(u,s.grow),"--col-flex-basis":kj(u,s.columns),"--col-width":u==="content"?"auto":void 0,"--col-max-width":$ee(u,s.columns,s.grow),"--col-offset":Mee(Rd(n),s.columns)}),c=Ti(o).reduce((p,g)=>{var y;return p[g]||(p[g]={}),typeof t=="object"&&t[g]!==void 0&&(p[g]["--col-order"]=(y=t[g])==null?void 0:y.toString()),typeof e=="object"&&e[g]!==void 0&&(p[g]["--col-flex-grow"]=Lee(e[g],s.grow),p[g]["--col-flex-basis"]=kj(e[g],s.columns),p[g]["--col-width"]=e[g]==="content"?"auto":void 0,p[g]["--col-max-width"]=$ee(e[g],s.columns,s.grow)),typeof n=="object"&&n[g]!==void 0&&(p[g]["--col-offset"]=Mee(n[g],s.columns)),p},{}),d=GA(Ti(c),o).filter(p=>Ti(c[p.value]).length>0).map(p=>({query:s.type==="container"?`mantine-grid (min-width: ${o[p.value]})`:`(min-width: ${o[p.value]})`,styles:c[p.value]}));return S.jsx(ax,{styles:l,media:s.type==="container"?void 0:d,container:s.type==="container"?d:void 0,selector:r})}var jH={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const a5e={span:12},UH=Et((e,t)=>{const n=Qe("GridCol",a5e,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=cme(),h=oI();return S.jsxs(S.Fragment,{children:[S.jsx(o5e,{selector:`.${h}`,span:u,order:l,offset:c}),S.jsx(Le,{ref:t,...d.getStyles("col",{className:Fs(i,h),style:s,classNames:r,styles:o}),...f})]})});UH.classes=jH;UH.displayName="@mantine/core/GridCol";function Fee({gutter:e,selector:t,breakpoints:n,type:r}){const i=to(),s=n||i.breakpoints,o=s1({"--grid-gutter":Zs(Rd(e))}),a=Ti(s).reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--grid-gutter"]=Zs(e[f])),c),{}),l=GA(Ti(a),s).filter(c=>Ti(a[c.value]).length>0).map(c=>({query:r==="container"?`mantine-grid (min-width: ${s[c.value]})`:`(min-width: ${s[c.value]})`,styles:a[c.value]}));return S.jsx(ax,{styles:o,media:r==="container"?void 0:l,container:r==="container"?l:void 0,selector:t})}const u5e={gutter:"md",grow:!1,columns:12},l5e=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),tp=Et((e,t)=>{const n=Qe("Grid",u5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,breakpoints:g,type:y,...x}=n,b=Qt({name:"Grid",classes:jH,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:l5e}),_=oI();return y==="container"&&g?S.jsxs(Oee,{value:{getStyles:b,grow:l,columns:f||12,breakpoints:g,type:y},children:[S.jsx(Fee,{selector:`.${_}`,...n}),S.jsx("div",{...b("container"),children:S.jsx(Le,{ref:t,...b("root",{className:_}),...x,children:S.jsx("div",{...b("inner"),children:p})})})]}):S.jsxs(Oee,{value:{getStyles:b,grow:l,columns:f||12,breakpoints:g,type:y},children:[S.jsx(Fee,{selector:`.${_}`,...n}),S.jsx(Le,{ref:t,...b("root",{className:_}),...x,children:S.jsx("div",{...b("inner"),children:p})})]})});tp.classes=jH;tp.displayName="@mantine/core/Grid";tp.Col=UH;var fme={root:"m_9e117634"};const c5e={},f5e=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:oi(t),"--image-object-fit":n}}),p1=no((e,t)=>{const n=Qe("Image",c5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...g}=n,[y,x]=O.useState(!c);O.useEffect(()=>x(!c),[c]);const b=Qt({name:"Image",classes:fme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:f5e});return y&&h?S.jsx(Le,{component:"img",ref:t,src:h,...b("root"),onError:l,mod:["fallback",p],...g}):S.jsx(Le,{component:"img",ref:t,...b("root"),src:c,onError:_=>{l==null||l(_),x(!0)},mod:p,...g})});p1.classes=fme;p1.displayName="@mantine/core/Image";function Ij(){return Ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ij.apply(null,arguments)}function d5e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var h5e=O.useLayoutEffect,p5e=function(t){var n=O.useRef(t);return h5e(function(){n.current=t}),n},Bee=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},m5e=function(t,n){var r=O.useRef();return O.useCallback(function(i){t.current=i,r.current&&Bee(r.current,null),r.current=n,n&&Bee(n,i)},[n])},jee={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},g5e=function(t){Object.keys(jee).forEach(function(n){t.style.setProperty(n,jee[n],"important")})},Uee=g5e,Tu=null,zee=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function y5e(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Tu||(Tu=document.createElement("textarea"),Tu.setAttribute("tabindex","-1"),Tu.setAttribute("aria-hidden","true"),Uee(Tu)),Tu.parentNode===null&&document.body.appendChild(Tu);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Tu.style[h]=o[h]}),Uee(Tu),Tu.value=t;var u=zee(Tu,e);Tu.value=t,u=zee(Tu,e),Tu.value="x";var l=Tu.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Vee=function(){},v5e=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},b5e=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],x5e=!!document.documentElement.currentStyle,w5e=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=v5e(b5e,n),i=r.boxSizing;if(i==="")return null;x5e&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},_5e=w5e;function dme(e,t,n){var r=p5e(n);O.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var E5e=function(t){dme(window,"resize",t)},T5e=function(t){dme(document.fonts,"loadingdone",t)},S5e=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],C5e=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Vee:o,u=t.onHeightChange,l=u===void 0?Vee:u,c=d5e(t,S5e),f=c.value!==void 0,d=O.useRef(null),h=m5e(d,n),p=O.useRef(0),g=O.useRef(),y=function(){var _=d.current,E=r&&g.current?g.current:_5e(_);if(E){g.current=E;var T=y5e(E,_.value||_.placeholder||"x",s,i),k=T[0],I=T[1];p.current!==k&&(p.current=k,_.style.setProperty("height",k+"px","important"),l(k,{rowHeight:I}))}},x=function(_){f||y(),a(_)};return O.useLayoutEffect(y),E5e(y),T5e(y),O.createElement("textarea",Ij({},c,{onChange:x,ref:h}))},A5e=O.forwardRef(C5e);const k5e={},zH=Et((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Qe("Textarea",k5e,e),u=n&&DOe()!=="test",l=u?{maxRows:r,minRows:i}:{};return S.jsx(Lf,{component:u?A5e:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});zH.classes=Lf.classes;zH.displayName="@mantine/core/Textarea";const[I5e,R5e]=ka("List component was not found in tree");var VH={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const P5e={},HH=Et((e,t)=>{const n=Qe("ListItem",P5e,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=R5e(),h=u||d.icon,p={classNames:r,styles:o};return S.jsx(Le,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:S.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&S.jsx("span",{...d.getStyles("itemIcon",p),children:h}),S.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});HH.classes=VH;HH.displayName="@mantine/core/ListItem";const D5e={type:"unordered"},N5e=(e,{size:t,spacing:n})=>({root:{"--list-fz":wa(t),"--list-lh":fhe(t),"--list-spacing":Zs(n)}}),Md=Et((e,t)=>{const n=Qe("List",D5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:g,mod:y,...x}=n,b=Qt({name:"List",classes:VH,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:N5e});return S.jsx(I5e,{value:{center:p,icon:d,getStyles:b},children:S.jsx(Le,{...b("root",{style:{listStyleType:g}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},y],ref:t,...x,children:l})})});Md.classes=VH;Md.displayName="@mantine/core/List";Md.Item=HH;var hme={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Hee={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:zl("overlay")},O5e=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Oc=Et((e,t)=>{const n=Qe("LoadingOverlay",Hee,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,g=to(),y=Qt({name:"LoadingOverlay",classes:hme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:O5e}),x={...Hee.overlayProps,...f};return S.jsx(jp,{transition:"fade",...l,mounted:!!d,children:b=>S.jsxs(Le,{...y("root",{style:b}),ref:t,...p,children:[S.jsx(Up,{...y("loader"),unstyled:a,...c}),S.jsx(AE,{...x,...y("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||g.white}),S.jsx(AE,{...x,...y("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||g.colors.dark[5]})]})})});Oc.classes=hme;Oc.displayName="@mantine/core/LoadingOverlay";const[$5e,dI]=ka("Menu component was not found in the tree");var $T={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const L5e={},qH=Et((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("MenuDivider",L5e,e),u=dI();return S.jsx(Le,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});qH.classes=$T;qH.displayName="@mantine/core/MenuDivider";const M5e={},WH=Et((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,onKeyDown:l,children:c,...f}=Qe("MenuDropdown",M5e,e),d=O.useRef(null),h=dI(),p=ep(l,x=>{var b,_;(x.key==="ArrowUp"||x.key==="ArrowDown")&&(x.preventDefault(),(_=(b=d.current)==null?void 0:b.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||_.focus())}),g=ep(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),y=ep(u,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return S.jsxs(_a.Dropdown,{...f,onMouseEnter:g,onMouseLeave:y,role:"menu","aria-orientation":"vertical",ref:xo(t,d),...h.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[S.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});WH.classes=$T;WH.displayName="@mantine/core/MenuDropdown";const F5e={},GH=no((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Qe("MenuItem",F5e,e),p=dI(),g=to(),{dir:y}=l1(),x=O.useRef(null),b=p.getItemIndex(x.current),_=h,E=ep(_.onMouseLeave,()=>p.setHovered(-1)),T=ep(_.onMouseEnter,()=>p.setHovered(p.getItemIndex(x.current))),k=ep(_.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),I=ep(_.onFocus,()=>p.setHovered(p.getItemIndex(x.current))),R=a?g.variantColorResolver({color:a,theme:g,variant:"light"}):void 0,D=a?Bp({color:a,theme:g}):null;return S.jsxs(Nc,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:I,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:xo(x,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===b?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:T,onMouseLeave:E,onClick:k,onKeyDown:kV({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:y,orientation:"vertical",onKeyDown:_.onKeyDown}),__vars:{"--menu-item-color":D!=null&&D.isThemeColor&&(D==null?void 0:D.shade)===void 0?`var(--mantine-color-${D.color}-6)`:R==null?void 0:R.color,"--menu-item-hover":R==null?void 0:R.hover},children:[l&&S.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&S.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&S.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});GH.classes=$T;GH.displayName="@mantine/core/MenuItem";const B5e={},YH=Et((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("MenuLabel",B5e,e),u=dI();return S.jsx(Le,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});YH.classes=$T;YH.displayName="@mantine/core/MenuLabel";const j5e={refProp:"ref"},pme=O.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Qe("MenuTarget",j5e,e);if(!o1(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=dI(),o=n.props,a=ep(o.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),u=ep(o.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),l=ep(o.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return S.jsx(_a.Target,{refProp:r,popupType:"menu",ref:t,...i,children:O.cloneElement(n,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":s.opened?!0:void 0})})});pme.displayName="@mantine/core/MenuTarget";const U5e={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Ru(e){const t=Qe("Menu",U5e,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:g,styles:y,unstyled:x,variant:b,vars:_,menuItemTabIndex:E,keepMounted:T,...k}=t,I=Qt({name:"Menu",classes:$T,props:t,classNames:g,styles:y,unstyled:x}),[R,{setHovered:D,resetHovered:L}]=aOe(),[M,z]=qo({value:s,defaultValue:o,finalValue:!1,onChange:u}),[F,H]=O.useState(!1),Q=()=>{z(!1),H(!1),M&&(i==null||i())},J=()=>{z(!0),!M&&(r==null||r())},ne=()=>{M?Q():J()},{openDropdown:Z,closeDropdown:ie}=s5e({open:J,close:Q,closeDelay:p,openDelay:h}),q=V=>oOe("[data-menu-item]","[data-menu-dropdown]",V),{resolvedClassNames:U,resolvedStyles:X}=ox({classNames:g,styles:y,props:t});return _p(()=>{L()},[M]),S.jsx($5e,{value:{getStyles:I,opened:M,toggleDropdown:ne,getItemIndex:q,hovered:R,setHovered:D,openedViaClick:F,setOpenedViaClick:H,closeOnItemClick:l,closeDropdown:d==="click"?Q:ie,openDropdown:d==="click"?J:Z,closeDropdownImmediately:Q,loop:c,trigger:d,unstyled:x,menuItemTabIndex:E},children:S.jsx(_a,{...k,opened:M,onChange:ne,defaultOpened:o,trapFocus:T?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:X,unstyled:x,variant:b,keepMounted:T,children:n})})}Ru.extend=e=>e;Ru.classes=$T;Ru.displayName="@mantine/core/Menu";Ru.Item=GH;Ru.Label=YH;Ru.Dropdown=WH;Ru.Target=pme;Ru.Divider=qH;const[z5e,LT]=ka("Modal component was not found in tree");var H0={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const V5e={},k$=Et((e,t)=>{const n=Qe("ModalBody",V5e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=LT();return S.jsx(Spe,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});k$.classes=H0;k$.displayName="@mantine/core/ModalBody";const H5e={},I$=Et((e,t)=>{const n=Qe("ModalCloseButton",H5e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=LT();return S.jsx(Cpe,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});I$.classes=H0;I$.displayName="@mantine/core/ModalCloseButton";const q5e={},R$=Et((e,t)=>{const n=Qe("ModalContent",q5e,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,__hidden:l,...c}=n,f=LT(),d=f.scrollAreaComponent||cLe;return S.jsx(Ape,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":l||void 0,ref:t,...c,children:S.jsx(d,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${We(f.yOffset)} * 2))`},children:u})})});R$.classes=H0;R$.displayName="@mantine/core/ModalContent";const W5e={},P$=Et((e,t)=>{const n=Qe("ModalHeader",W5e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=LT();return S.jsx(kpe,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});P$.classes=H0;P$.displayName="@mantine/core/ModalHeader";const G5e={},D$=Et((e,t)=>{const n=Qe("ModalOverlay",G5e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=LT();return S.jsx(Ipe,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});D$.classes=H0;D$.displayName="@mantine/core/ModalOverlay";const Y5e={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:zl("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},K5e=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:oi(t),"--modal-size":zn(n,"modal-size"),"--modal-y-offset":We(r),"--modal-x-offset":We(i)}}),N$=Et((e,t)=>{const n=Qe("ModalRoot",Y5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:g,...y}=n,x=Qt({name:g,classes:H0,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:K5e});return S.jsx(z5e,{value:{yOffset:l,scrollAreaComponent:c,getStyles:x,fullScreen:d},children:S.jsx(Tpe,{ref:t,...x("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...y})})});N$.classes=H0;N$.displayName="@mantine/core/ModalRoot";const[X5e,Q5e]=a1();function mme({children:e}){const[t,n]=O.useState([]),[r,i]=O.useState(zl("modal"));return S.jsx(X5e,{value:{stack:t,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${t.indexOf(s)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}mme.displayName="@mantine/core/ModalStack";const J5e={},O$=Et((e,t)=>{const n=Qe("ModalTitle",J5e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=LT();return S.jsx(Rpe,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});O$.classes=H0;O$.displayName="@mantine/core/ModalTitle";const Z5e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:zl("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},ns=Et((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,opened:l,stackId:c,zIndex:f,...d}=Qe("Modal",Z5e,e),h=Q5e(),p=!!n||s,g=h&&c?{closeOnEscape:h.currentId===c,trapFocus:h.currentId===c,zIndex:h.getZIndex(c)}:{},y=r===!1?!1:c&&h?h.currentId===c:l;return O.useEffect(()=>{h&&c&&(l?h.addModal(c,f||zl("modal")):h.removeModal(c))},[l,c,f]),S.jsxs(N$,{ref:t,radius:u,opened:l,zIndex:h&&c?h.getZIndex(c):f,...d,...g,children:[r&&S.jsx(D$,{visible:y,transitionProps:h&&c?{duration:0}:void 0,...i}),S.jsxs(R$,{radius:u,__hidden:h&&c&&l?c!==h.currentId:!1,children:[p&&S.jsxs(P$,{children:[n&&S.jsx(O$,{children:n}),s&&S.jsx(I$,{...o})]}),S.jsx(k$,{children:a})]})]})});ns.classes=H0;ns.displayName="@mantine/core/Modal";ns.Root=N$;ns.Overlay=D$;ns.Content=R$;ns.Body=k$;ns.Header=P$;ns.Title=O$;ns.CloseButton=I$;ns.Stack=mme;const[eFe,KH]=a1(),[tFe,nFe]=a1();var $$={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const rFe={},iFe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?zn(t):zn(n,"pg-gap")}}),XH=Et((e,t)=>{const n=Qe("PillGroup",rFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=KH(),h=(d==null?void 0:d.size)||l||void 0,p=Qt({name:"PillGroup",classes:$$,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iFe,stylesCtx:{size:h},rootSelector:"group"});return S.jsx(tFe,{value:{size:h,disabled:c},children:S.jsx(Le,{ref:t,size:h,...p("group"),...f})})});XH.classes=$$;XH.displayName="@mantine/core/PillGroup";const sFe={variant:"default"},oFe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":zn(n,"pill-fz"),"--pill-height":zn(n,"pill-height"),"--pill-radius":t===void 0?void 0:oi(t)}}),XA=Et((e,t)=>{const n=Qe("Pill",sFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:g,disabled:y,mod:x,...b}=n,_=nFe(),E=KH(),T=g||(_==null?void 0:_.size)||void 0,k=(E==null?void 0:E.variant)==="filled"?"contrast":l||"default",I=Qt({name:"Pill",classes:$$,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oFe,stylesCtx:{size:T}});return S.jsxs(Le,{component:"span",ref:t,variant:k,size:T,...I("root",{variant:k}),mod:[{"with-remove":f&&!y,disabled:y||(_==null?void 0:_.disabled)},x],...b,children:[S.jsx("span",{...I("label"),children:c}),f&&S.jsx(d1,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...I("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:R=>{var D;R.preventDefault(),R.stopPropagation(),(D=h==null?void 0:h.onMouseDown)==null||D.call(h,R)},onClick:R=>{var D;R.stopPropagation(),d==null||d(),(D=h==null?void 0:h.onClick)==null||D.call(h,R)}})]})});XA.classes=$$;XA.displayName="@mantine/core/Pill";XA.Group=XH;var gme={field:"m_45c4369d"};const aFe={type:"visible"},QH=Et((e,t)=>{const n=Qe("PillsInputField",aFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,g=KH(),y=PT(),x=Qt({name:"PillsInputField",classes:gme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),b=c||(g==null?void 0:g.disabled);return S.jsx(Le,{component:"input",ref:xo(t,g==null?void 0:g.fieldRef),"data-type":l,disabled:b,mod:[{disabled:b,pointer:d},h],...x("field"),...p,id:(y==null?void 0:y.inputId)||f,"aria-invalid":g==null?void 0:g.hasError,"aria-describedby":y==null?void 0:y.describedBy,type:"text",onMouseDown:_=>!d&&_.stopPropagation()})});QH.classes=gme;QH.displayName="@mantine/core/PillsInputField";const uFe={},FO=Et((e,t)=>{const n=Qe("PillsInput",uFe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=O.useRef(null);return S.jsx(eFe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:S.jsx(Lf,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});FO.displayName="@mantine/core/PillsInput";FO.Field=QH;function lFe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(IE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const cFe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},JH=Et((e,t)=>{const n=Qe("MultiSelect",cFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:g,dropdownOpened:y,defaultDropdownOpened:x,onDropdownOpen:b,onDropdownClose:_,selectFirstOptionOnChange:E,onOptionSubmit:T,comboboxProps:k,filter:I,limit:R,withScrollArea:D,maxDropdownHeight:L,searchValue:M,defaultSearchValue:z,onSearchChange:F,readOnly:H,disabled:Q,onFocus:J,onBlur:ne,onPaste:Z,radius:ie,rightSection:q,rightSectionWidth:U,rightSectionPointerEvents:X,rightSectionProps:V,leftSection:K,leftSectionWidth:ee,leftSectionPointerEvents:fe,leftSectionProps:Ee,inputContainer:ye,inputWrapperOrder:_e,withAsterisk:De,labelProps:me,descriptionProps:de,errorProps:$e,wrapperProps:Pe,description:Ze,label:it,error:Ge,maxValues:et,searchable:ut,nothingFoundMessage:Tt,withCheckIcon:xt,checkIconPosition:Dt,hidePickedOptions:Ue,withErrorStyles:Ft,name:tn,form:Re,id:Ve,clearable:yt,clearButtonProps:$t,hiddenInputProps:Bt,placeholder:dn,hiddenInputValuesDivider:Nn,required:dr,mod:ti,renderOption:kn,onRemove:Bn,onClear:Xr,scrollAreaProps:ir,...zs}=n,gi=qu(Ve),ni=Bpe(g),yi=xH(ni),Ar=PH({opened:y,defaultOpened:x,onDropdownOpen:b,onDropdownClose:()=>{_==null||_(),Ar.resetSelectedOption()}}),{styleProps:Vs,rest:{type:Yu,autoComplete:Eo,...Ra}}=ux(zs),[kr,ui]=qo({value:c,defaultValue:f,finalValue:[],onChange:d}),[$r,os]=qo({value:M,defaultValue:z,finalValue:"",onChange:F}),yr=Qt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:vi,resolvedStyles:Hs}=ox({props:n,styles:o,classNames:r}),Ts=hr=>{h==null||h(hr),hr.key===" "&&!ut&&(hr.preventDefault(),Ar.toggleDropdown()),hr.key==="Backspace"&&$r.length===0&&kr.length>0&&(Bn==null||Bn(kr[kr.length-1]),ui(kr.slice(0,kr.length-1)))},ro=kr.map((hr,Ku)=>{var Di,Qo;return S.jsx(XA,{withRemoveButton:!H&&!((Di=yi[hr])!=null&&Di.disabled),onRemove:()=>{ui(kr.filter(io=>hr!==io)),Bn==null||Bn(hr)},unstyled:a,disabled:Q,...yr("pill"),children:((Qo=yi[hr])==null?void 0:Qo.label)||hr},`${hr}-${Ku}`)});O.useEffect(()=>{E&&Ar.selectFirstOption()},[E,kr]);const pu=S.jsx(Er.ClearButton,{...$t,onClear:()=>{Xr==null||Xr(),ui([]),os("")}}),qf=lFe({data:ni,value:kr});return S.jsxs(S.Fragment,{children:[S.jsxs(Er,{store:Ar,classNames:vi,styles:Hs,unstyled:a,size:l,readOnly:H,__staticSelector:"MultiSelect",onOptionSubmit:hr=>{T==null||T(hr),os(""),Ar.updateSelectedOptionIndex("selected"),kr.includes(yi[hr].value)?(ui(kr.filter(Ku=>Ku!==yi[hr].value)),Bn==null||Bn(yi[hr].value)):kr.length<et&&ui([...kr,yi[hr].value])},...k,children:[S.jsx(Er.DropdownTarget,{children:S.jsx(FO,{...Vs,__staticSelector:"MultiSelect",classNames:vi,styles:Hs,unstyled:a,size:l,className:i,style:s,variant:p,disabled:Q,radius:ie,__defaultRightSection:S.jsx(Er.Chevron,{size:l,error:Ge,unstyled:a}),__clearSection:pu,__clearable:yt&&kr.length>0&&!Q&&!H,rightSection:q,rightSectionPointerEvents:X||(pu?"all":"none"),rightSectionWidth:U,rightSectionProps:V,leftSection:K,leftSectionWidth:ee,leftSectionPointerEvents:fe,leftSectionProps:Ee,inputContainer:ye,inputWrapperOrder:_e,withAsterisk:De,labelProps:me,descriptionProps:de,errorProps:$e,wrapperProps:Pe,description:Ze,label:it,error:Ge,multiline:!0,withErrorStyles:Ft,__stylesApiProps:{...n,rightSectionPointerEvents:X||(pu?"all":"none"),multiline:!0},pointer:!ut,onClick:()=>ut?Ar.openDropdown():Ar.toggleDropdown(),"data-expanded":Ar.dropdownOpened||void 0,id:gi,required:dr,mod:ti,children:S.jsxs(XA.Group,{disabled:Q,unstyled:a,...yr("pillsList"),children:[ro,S.jsx(Er.EventsTarget,{autoComplete:Eo,children:S.jsx(FO.Field,{...Ra,ref:t,id:gi,placeholder:dn,type:!ut&&!dn?"hidden":"visible",...yr("inputField"),unstyled:a,onFocus:hr=>{J==null||J(hr),ut&&Ar.openDropdown()},onBlur:hr=>{ne==null||ne(hr),Ar.closeDropdown(),os("")},onKeyDown:Ts,value:$r,onChange:hr=>{os(hr.currentTarget.value),ut&&Ar.openDropdown(),E&&Ar.selectFirstOption()},disabled:Q,readOnly:H||!ut,pointer:!ut})})]})})}),S.jsx(rme,{data:Ue?qf:ni,hidden:H||Q,filter:I,search:$r,limit:R,hiddenWhenEmpty:!Tt,withScrollArea:D,maxDropdownHeight:L,filterOptions:ut,value:kr,checkIconPosition:Dt,withCheckIcon:xt,nothingFoundMessage:Tt,unstyled:a,labelId:it?`${gi}-label`:void 0,"aria-label":it?void 0:zs["aria-label"],renderOption:kn,scrollAreaProps:ir})]}),S.jsx(Er.HiddenInput,{name:tn,valuesDivider:Nn,value:kr,form:Re,disabled:Q,...Bt})]})});JH.classes={...Lf.classes,...Er.classes};JH.displayName="@mantine/core/MultiSelect";var yme={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const fFe={},dFe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Zs(r)}}},L$=no((e,t)=>{const n=Qe("NavLink",fFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:g,leftSection:y,rightSection:x,label:b,description:_,disableRightSectionRotation:E,noWrap:T,childrenOffset:k,onKeyDown:I,autoContrast:R,mod:D,...L}=n,M=Qt({name:"NavLink",props:n,classes:yme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dFe}),[z,F]=qo({value:l,defaultValue:c,finalValue:!1,onChange:f}),H=!!d,Q=J=>{h==null||h(J),H&&(J.preventDefault(),F(!z))};return S.jsxs(S.Fragment,{children:[S.jsxs(Nc,{...M("root"),component:"a",ref:t,onClick:Q,onKeyDown:J=>{I==null||I(J),J.nativeEvent.code==="Space"&&H&&(J.preventDefault(),F(!z))},unstyled:a,mod:[{disabled:g,active:p,expanded:z},D],...L,children:[y&&S.jsx(Le,{component:"span",...M("section"),mod:{position:"left"},children:y}),S.jsxs(Le,{...M("body"),mod:{"no-wrap":T},children:[S.jsx(Le,{component:"span",...M("label"),children:b}),S.jsx(Le,{component:"span",mod:{active:p},...M("description"),children:_})]}),(H||x)&&S.jsx(Le,{...M("section"),component:"span",mod:{rotate:z&&!E,position:"right"},children:H?x||S.jsx(S$,{...M("chevron")}):x})]}),H&&S.jsx(g$,{in:z,...M("collapse"),children:S.jsx("div",{...M("children"),children:d})})]})});L$.classes=yme;L$.displayName="@mantine/core/NavLink";var vme={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const hFe={withCloseButton:!0},pFe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:oi(t),"--notification-color":n?Ii(n,e):void 0}}),ZH=Et((e,t)=>{const n=Qe("Notification",hFe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:g,styles:y,unstyled:x,variant:b,vars:_,mod:E,...T}=n,k=Qt({name:"Notification",classes:vme,props:n,className:r,style:g,classNames:p,styles:y,unstyled:x,vars:_,varsResolver:pFe});return S.jsxs(Le,{...k("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},E],ref:t,variant:b,...T,role:"alert",children:[c&&!o&&S.jsx("div",{...k("icon"),children:c}),o&&S.jsx(Up,{size:28,color:i,...k("loader")}),S.jsxs("div",{...k("body"),children:[l&&S.jsx("div",{...k("title"),children:l}),S.jsx(Le,{...k("description"),mod:{"data-with-title":!!l},children:f})]}),a&&S.jsx(d1,{iconSize:16,color:"gray",...h,unstyled:x,onClick:d,...k("closeButton")})]})});ZH.classes=vme;ZH.displayName="@mantine/core/Notification";function bme(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var QA;(function(e){e.event="event",e.props="prop"})(QA||(QA={}));function ey(){}function mFe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function JA(e){return!!(e||"").match(/\d/)}function tE(e){return e==null}function gFe(e){return typeof e=="number"&&isNaN(e)}function xme(e){return tE(e)||gFe(e)||typeof e=="number"&&!isFinite(e)}function wme(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function yFe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function vFe(e,t,n){var r=yFe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function bFe(e){var t=O.useRef(e);t.current=e;var n=O.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function eq(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function xFe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function _me(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function qee(e,t){return Array(t+1).join(e)}function Eme(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+qee("0",Math.abs(o))+i:o>=a?i=i+qee("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Wee(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=eq(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(g,y,x){return g.length>x?(Number(g[0])+Number(y)).toString()+g.substring(1,g.length):y+g},c[0]));var d=_me(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Gv(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Tme=mFe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),wFe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function _Fe(e,t,n){return Math.min(Math.max(e,t),n)}function n8(e){return Math.max(e.selectionStart,e.selectionEnd)}function EFe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function TFe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function SFe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function CFe(e,t,n,r,i,s,o){o===void 0&&(o=SFe);var a=i.findIndex(function(E){return E}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,g=c;p<g;p++){var y=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(y&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var x=r;x<l&&(d[x]===-1||!s(n[x]));)x++;var b=x===l||d[x]===-1?c:d[x];for(x=r-1;x>0&&d[x]===-1;)x--;var _=x===-1||d[x]===-1?0:d[x]+1;return _>b?b:r-_<b-r?_:b}function Gee(e,t,n,r){var i=e.length;if(t=_Fe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function AFe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(JA(e[n])||JA(e[n-1]));return t}function Sme(e,t,n,r,i,s){s===void 0&&(s=ey);var o=bFe(function(p,g){var y,x;return xme(p)?(x="",y=""):typeof p=="number"||g?(x=typeof p=="number"?Eme(p):p,y=r(x)):(x=i(p,void 0),y=r(x)),{formattedValue:y,numAsString:x}}),a=O.useState(function(){return o(tE(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,g){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,g)},f=e,d=n;tE(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return O.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function kFe(e){return e.replace(/[^0-9]/g,"")}function IFe(e){return e}function RFe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=IFe);var a=e.removeFormatting;a===void 0&&(a=kFe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=ey);var h=e.onKeyDown;h===void 0&&(h=ey);var p=e.onMouseUp;p===void 0&&(p=ey);var g=e.onFocus;g===void 0&&(g=ey);var y=e.onBlur;y===void 0&&(y=ey);var x=e.value,b=e.getCaretBoundary;b===void 0&&(b=AFe);var _=e.isValidInputCharacter;_===void 0&&(_=JA);var E=e.isCharacterSame,T=bme(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),k=Sme(x,u,!!l,o,a,c),I=k[0],R=I.formattedValue,D=I.numAsString,L=k[1],M=O.useRef(),z=O.useRef({formattedValue:R,numAsString:D}),F=function(Ge,et){z.current={formattedValue:Ge.formattedValue,numAsString:Ge.value},L(Ge,et)},H=O.useState(!1),Q=H[0],J=H[1],ne=O.useRef(null),Z=O.useRef({setCaretTimeout:null,focusTimeout:null});O.useEffect(function(){return J(!0),function(){clearTimeout(Z.current.setCaretTimeout),clearTimeout(Z.current.focusTimeout)}},[]);var ie=o,q=function(Ge,et){var ut=parseFloat(et);return{formattedValue:Ge,value:et,floatValue:isNaN(ut)?void 0:ut}},U=function(Ge,et,ut){Ge.selectionStart===0&&Ge.selectionEnd===Ge.value.length||(Gv(Ge,et),Z.current.setCaretTimeout=setTimeout(function(){Ge.value===ut&&Ge.selectionStart!==et&&Gv(Ge,et)},0))},X=function(Ge,et,ut){return Gee(Ge,et,b(Ge),ut)},V=function(Ge,et,ut){var Tt=b(et),xt=CFe(et,R,Ge,ut,Tt,_,E);return xt=Gee(et,xt,Tt),xt},K=function(Ge){var et=Ge.formattedValue;et===void 0&&(et="");var ut=Ge.input,Tt=Ge.source,xt=Ge.event,Dt=Ge.numAsString,Ue;if(ut){var Ft=Ge.inputValue||ut.value,tn=n8(ut);ut.value=et,Ue=V(Ft,et,tn),Ue!==void 0&&U(ut,Ue,et)}et!==R&&F(q(et,Dt),{event:xt,source:Tt})};O.useEffect(function(){var Ge=z.current,et=Ge.formattedValue,ut=Ge.numAsString;(R!==et||D!==ut)&&F(q(R,D),{event:void 0,source:QA.props})},[R,D]);var ee=ne.current?n8(ne.current):void 0,fe=typeof window<"u"?O.useLayoutEffect:O.useEffect;fe(function(){var Ge=ne.current;if(R!==z.current.formattedValue&&Ge){var et=V(z.current.formattedValue,R,ee);Ge.value=R,U(Ge,et,R)}},[R]);var Ee=function(Ge,et,ut){var Tt=et.target,xt=M.current?wFe(M.current,Tt.selectionEnd):Tme(R,Ge),Dt=Object.assign(Object.assign({},xt),{lastValue:R}),Ue=a(Ge,Dt),Ft=ie(Ue);if(Ue=a(Ft,void 0),f&&!f(q(Ft,Ue))){var tn=et.target,Re=n8(tn),Ve=V(Ge,R,Re);return tn.value=R,U(tn,Ve,R),!1}return K({formattedValue:Ft,numAsString:Ue,inputValue:Ge,event:et,source:ut,input:et.target}),!0},ye=function(Ge,et){et===void 0&&(et=0);var ut=Ge.selectionStart,Tt=Ge.selectionEnd;M.current={selectionStart:ut,selectionEnd:Tt+et}},_e=function(Ge){var et=Ge.target,ut=et.value,Tt=Ee(ut,Ge,QA.event);Tt&&d(Ge),M.current=void 0},De=function(Ge){var et=Ge.target,ut=Ge.key,Tt=et.selectionStart,xt=et.selectionEnd,Dt=et.value;Dt===void 0&&(Dt="");var Ue;ut==="ArrowLeft"||ut==="Backspace"?Ue=Math.max(Tt-1,0):ut==="ArrowRight"?Ue=Math.min(Tt+1,Dt.length):ut==="Delete"&&(Ue=Tt);var Ft=0;ut==="Delete"&&Tt===xt&&(Ft=1);var tn=ut==="ArrowLeft"||ut==="ArrowRight";if(Ue===void 0||Tt!==xt&&!tn){h(Ge),ye(et,Ft);return}var Re=Ue;if(tn){var Ve=ut==="ArrowLeft"?"left":"right";Re=X(Dt,Ue,Ve),Re!==Ue&&Ge.preventDefault()}else ut==="Delete"&&!_(Dt[Ue])?Re=X(Dt,Ue,"right"):ut==="Backspace"&&!_(Dt[Ue])&&(Re=X(Dt,Ue,"left"));Re!==Ue&&U(et,Re,Dt),h(Ge),ye(et,Ft)},me=function(Ge){var et=Ge.target,ut=function(){var Tt=et.selectionStart,xt=et.selectionEnd,Dt=et.value;if(Dt===void 0&&(Dt=""),Tt===xt){var Ue=X(Dt,Tt);Ue!==Tt&&U(et,Ue,Dt)}};ut(),requestAnimationFrame(function(){ut()}),p(Ge),ye(et)},de=function(Ge){Ge.persist&&Ge.persist();var et=Ge.target,ut=Ge.currentTarget;ne.current=et,Z.current.focusTimeout=setTimeout(function(){var Tt=et.selectionStart,xt=et.selectionEnd,Dt=et.value;Dt===void 0&&(Dt="");var Ue=X(Dt,Tt);Ue!==Tt&&!(Tt===0&&xt===Dt.length)&&U(et,Ue,Dt),g(Object.assign(Object.assign({},Ge),{currentTarget:ut}))},0)},$e=function(Ge){ne.current=null,clearTimeout(Z.current.focusTimeout),clearTimeout(Z.current.setCaretTimeout),y(Ge)},Pe=Q&&EFe()?"numeric":void 0,Ze=Object.assign({inputMode:Pe},T,{type:t,value:R,onChange:_e,onKeyDown:De,onMouseUp:me,onFocus:de,onBlur:$e});if(n==="text")return i?Mr.createElement(Mr.Fragment,null,i(R,T)||null):Mr.createElement("span",Object.assign({},T,{ref:s}),R);if(r){var it=r;return Mr.createElement(it,Object.assign({},Ze,{ref:s}))}return Mr.createElement("input",Object.assign({},Ze,{ref:s}))}function Yee(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=M$(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=eq(e,o),h=d.beforeDecimal,p=d.afterDecimal,g=d.addNegation;return n!==void 0&&(p=_me(p,n,!!r)),l&&(h=vFe(h,l,a)),i&&(h=i+h),s&&(p=p+s),g&&(h="-"+h),e=h+(f&&c||"")+p,e}function M$(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function PFe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function DFe(e,t){return new RegExp("(^-)|[0-9]|"+wme(e),"g")}function NFe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function OFe(e,t,n){var r;t===void 0&&(t=TFe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=M$(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,g=e[f]===p;if(JA(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var y=a===0?"":p;e=e.substring(0,c)+y+e.substring(c+1,e.length)}var x=function(ne,Z,ie){var q=!1,U=!1;s.startsWith("-")?q=!1:ne.startsWith("--")?(q=!1,U=!0):o.startsWith("-")&&ne.length===o.length?q=!1:ne[0]==="-"&&(q=!0);var X=q?1:0;return U&&(X=2),X&&(ne=ne.substring(X),Z-=X,ie-=X),{value:ne,start:Z,end:ie,hasNegation:q}},b=x(e,c,f),_=b.hasNegation;r=b,e=r.value,c=r.start,f=r.end;var E=x(t.lastValue,u.start,u.end),T=E.start,k=E.end,I=E.value,R=e.substring(c,f);e.length&&I.length&&(T>I.length-o.length||k<s.length)&&!(R&&o.startsWith(R))&&(e=I);var D=0;e.startsWith(s)?D+=s.length:c<s.length&&(D=c),e=e.substring(D),f-=D;var L=e.length,M=e.length-o.length;e.endsWith(o)?L=M:(f>M||f>e.length-o.length)&&(L=f),e=e.substring(0,L),e=PFe(_?"-"+e:e,i),e=(e.match(DFe(p))||[]).join("");var z=e.indexOf(p);e=e.replace(new RegExp(wme(p),"g"),function(ne,Z){return Z===z?".":""});var F=eq(e,i),H=F.beforeDecimal,Q=F.afterDecimal,J=F.addNegation;return l.end-l.start<u.end-u.start&&H===""&&g&&!parseFloat(Q)&&(e=J?"-":""),e}function $Fe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function LFe(e){var t=M$(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function MFe(e){e=LFe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=ey);var s=e.onBlur;s===void 0&&(s=ey);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=bme(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),g=M$(e),y=g.decimalSeparator,x=g.allowedDecimalSeparators,b=function(J){return Yee(J,e)},_=function(J,ne){return OFe(J,ne,e)},E=tE(f)?c:f,T=d??NFe(E,l,t);tE(f)?tE(c)||(T=T||typeof c=="number"):T=T||typeof f=="number";var k=function(J){return xme(J)?J:(typeof J=="number"&&(J=Eme(J)),T&&typeof a=="number"?Wee(J,a,!!u):J)},I=Sme(k(f),k(c),!!T,b,_,h),R=I[0],D=R.numAsString,L=R.formattedValue,M=I[1],z=function(J){var ne=J.target,Z=J.key,ie=ne.selectionStart,q=ne.selectionEnd,U=ne.value;if(U===void 0&&(U=""),(Z==="Backspace"||Z==="Delete")&&q<l.length){J.preventDefault();return}if(ie!==q){i(J);return}Z==="Backspace"&&U[0]==="-"&&ie===l.length+1&&n&&Gv(ne,1),a&&u&&(Z==="Backspace"&&U[ie-1]===y?(Gv(ne,ie-1),J.preventDefault()):Z==="Delete"&&U[ie]===y&&J.preventDefault()),x!=null&&x.includes(Z)&&U[ie]===y&&Gv(ne,ie+1);var X=o===!0?",":o;Z==="Backspace"&&U[ie-1]===X&&Gv(ne,ie-1),Z==="Delete"&&U[ie]===X&&Gv(ne,ie+1),i(J)},F=function(J){var ne=D;if(ne.match(/\d/g)||(ne=""),r||(ne=xFe(ne)),u&&a&&(ne=Wee(ne,a,u)),ne!==D){var Z=Yee(ne,e);M({formattedValue:Z,value:ne,floatValue:parseFloat(ne)},{event:J,source:QA.event})}s(J)},H=function(J){return J===y?!0:JA(J)},Q=function(J){var ne=J.currentValue,Z=J.lastValue,ie=J.formattedValue,q=J.currentValueIndex,U=J.formattedValueIndex,X=ne[q],V=ie[U],K=Tme(Z,ne),ee=K.to,fe=function(Ee){return _(Ee).indexOf(".")+l.length};return f===0&&u&&a&&ne[ee.start]===y&&fe(ne)<q&&fe(ie)>U?!1:q>=ee.start&&q<ee.end&&x&&x.includes(X)&&V===y?!0:X===V};return Object.assign(Object.assign({},p),{value:L,valueIsNumericString:!1,isValidInputCharacter:H,isCharacterSame:Q,onValueChange:M,format:b,removeFormatting:_,getCaretBoundary:function(J){return $Fe(J,e)},onKeyDown:z,onBlur:F})}function FFe(e){var t=MFe(e);return Mr.createElement(RFe,Object.assign({},t))}function Kee({direction:e,style:t,...n}){return S.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:S.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var Rj={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const BFe=/^(0\.0*|-0(\.0*)?)$/,jFe=/^-?0\d+(\.\d+)?\.?$/;function Pj(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function r8(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||Pj(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function UFe(e){return e.toString().replace(".","").length}function zFe(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&UFe(t)<14&&t!==""}function Xee(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const VFe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},HFe=(e,{size:t})=>({controls:{"--ni-chevron-size":zn(t,"ni-chevron-size")}}),tq=Et((e,t)=>{const n=Qe("NumberInput",VFe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:g,rightSection:y,isAllowed:x,clampBehavior:b,onBlur:_,allowDecimal:E,decimalScale:T,onKeyDown:k,onKeyDownCapture:I,handlersRef:R,startValue:D,disabled:L,rightSectionPointerEvents:M,allowNegative:z,readOnly:F,size:H,rightSectionWidth:Q,stepHoldInterval:J,stepHoldDelay:ne,allowLeadingZeros:Z,withKeyboardEvents:ie,trimLeadingZeroesOnBlur:q,...U}=n,X=Qt({name:"NumberInput",classes:Rj,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:HFe}),{resolvedClassNames:V,resolvedStyles:K}=ox({classNames:i,styles:s,props:n}),[ee,fe]=qo({value:c,defaultValue:f,finalValue:"",onChange:u}),Ee=ne!==void 0&&J!==void 0,ye=O.useRef(null),_e=O.useRef(null),De=O.useRef(0),me=(Ue,Ft)=>{Ft.source==="event"&&fe(zFe(Ue.floatValue,Ue.value)&&!BFe.test(Ue.value)&&!(Z&&jFe.test(Ue.value))?Ue.floatValue:Ue.value),l==null||l(Ue,Ft)},de=Ue=>{const Ft=String(Ue).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return Ft?Math.max(0,(Ft[1]?Ft[1].length:0)-(Ft[2]?+Ft[2]:0)):0},$e=Ue=>{ye.current&&typeof Ue<"u"&&ye.current.setSelectionRange(Ue,Ue)},Pe=O.useRef(gj);Pe.current=()=>{if(!r8(ee))return;let Ue;const Ft=de(ee),tn=de(p),Re=Math.max(Ft,tn),Ve=10**Re;if(!Pj(ee)&&(typeof ee!="number"||Number.isNaN(ee)))Ue=Kh(D,h,d);else if(d!==void 0){const $t=(Math.round(Number(ee)*Ve)+Math.round(p*Ve))/Ve;Ue=$t<=d?$t:d}else Ue=(Math.round(Number(ee)*Ve)+Math.round(p*Ve))/Ve;const yt=Ue.toFixed(Re);fe(parseFloat(yt)),l==null||l({floatValue:parseFloat(yt),formattedValue:yt,value:yt},{source:"increment"}),setTimeout(()=>{var $t;return $e(($t=ye.current)==null?void 0:$t.value.length)},0)};const Ze=O.useRef(gj);Ze.current=()=>{if(!r8(ee))return;let Ue;const Ft=h!==void 0?h:z?Number.MIN_SAFE_INTEGER:0,tn=de(ee),Re=de(p),Ve=Math.max(tn,Re),yt=10**Ve;if(!Pj(ee)&&typeof ee!="number"||Number.isNaN(ee))Ue=Kh(D,Ft,d);else{const Bt=(Math.round(Number(ee)*yt)-Math.round(p*yt))/yt;Ue=Ft!==void 0&&Bt<Ft?Ft:Bt}const $t=Ue.toFixed(Ve);fe(parseFloat($t)),l==null||l({floatValue:parseFloat($t),formattedValue:$t,value:$t},{source:"decrement"}),setTimeout(()=>{var Bt;return $e((Bt=ye.current)==null?void 0:Bt.value.length)},0)};const it=Ue=>{k==null||k(Ue),!(F||!ie)&&(Ue.key==="ArrowUp"&&(Ue.preventDefault(),Pe.current()),Ue.key==="ArrowDown"&&(Ue.preventDefault(),Ze.current()))},Ge=Ue=>{if(I==null||I(Ue),Ue.key==="Backspace"){const Ft=ye.current;Ft.selectionStart===0&&Ft.selectionStart===Ft.selectionEnd&&(Ue.preventDefault(),window.setTimeout(()=>$e(0),0))}};PO(R,{increment:Pe.current,decrement:Ze.current});const et=Ue=>{Ue?Pe.current():Ze.current(),De.current+=1},ut=Ue=>{if(et(Ue),Ee){const Ft=typeof J=="number"?J:J(De.current);_e.current=window.setTimeout(()=>ut(Ue),Ft)}},Tt=(Ue,Ft)=>{var tn;Ue.preventDefault(),(tn=ye.current)==null||tn.focus(),et(Ft),Ee&&(_e.current=window.setTimeout(()=>ut(Ft),ne))},xt=()=>{_e.current&&window.clearTimeout(_e.current),_e.current=null,De.current=0},Dt=S.jsxs("div",{...X("controls"),children:[S.jsx(Nc,{...X("control"),tabIndex:-1,"aria-hidden":!0,disabled:L||typeof ee=="number"&&d!==void 0&&ee>=d,mod:{direction:"up"},onMouseDown:Ue=>Ue.preventDefault(),onPointerDown:Ue=>{Tt(Ue,!0)},onPointerUp:xt,onPointerLeave:xt,children:S.jsx(Kee,{direction:"up"})}),S.jsx(Nc,{...X("control"),tabIndex:-1,"aria-hidden":!0,disabled:L||typeof ee=="number"&&h!==void 0&&ee<=h,mod:{direction:"down"},onMouseDown:Ue=>Ue.preventDefault(),onPointerDown:Ue=>{Tt(Ue,!1)},onPointerUp:xt,onPointerLeave:xt,children:S.jsx(Kee,{direction:"down"})})]});return S.jsx(Lf,{component:FFe,allowNegative:z,className:Fs(Rj.root,r),size:H,...U,readOnly:F,disabled:L,value:ee,getInputRef:xo(t,ye),onValueChange:me,rightSection:g||F||!r8(ee)?y:y||Dt,classNames:V,styles:K,unstyled:o,__staticSelector:"NumberInput",decimalScale:E?T:0,onKeyDown:it,onKeyDownCapture:Ge,rightSectionPointerEvents:M??(L?"none":void 0),rightSectionWidth:Q??`var(--ni-right-section-width-${H||"sm"})`,allowLeadingZeros:Z,onBlur:Ue=>{if(_==null||_(Ue),b==="blur"&&typeof ee=="number"&&Kh(ee,h,d)!==ee&&fe(Kh(ee,h,d)),q&&typeof ee=="string"&&de(ee)<15){const Ft=ee.replace(/^0+/,""),tn=parseFloat(Ft);fe(Number.isNaN(tn)||tn>Number.MAX_SAFE_INTEGER?Ft:Kh(tn,h,d))}},isAllowed:Ue=>b==="strict"?x?x(Ue)&&Xee(Ue.floatValue,h,d):Xee(Ue.floatValue,h,d):x?x(Ue):!0})});tq.classes={...Lf.classes,...Rj};tq.displayName="@mantine/core/NumberInput";const[qFe,Cme]=ka("Progress.Root component was not found in tree");var hI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const WFe={},nq=Et((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("ProgressLabel",WFe,e),u=Cme();return S.jsx(Le,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});nq.classes=hI;nq.displayName="@mantine/core/ProgressLabel";const GFe={},YFe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":zn(t,"progress-size"),"--progress-radius":n===void 0?void 0:oi(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),F$=Et((e,t)=>{const n=Qe("ProgressRoot",GFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Qt({name:"Progress",classes:hI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YFe});return S.jsx(qFe,{value:{getStyles:d,autoContrast:l},children:S.jsx(Le,{ref:t,...d("root"),...f})})});F$.classes=hI;F$.displayName="@mantine/core/ProgressRoot";const KFe={withAria:!0},B$=Et((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Qe("ProgressSection",KFe,e),p=Cme(),g=to(),y=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return S.jsx(Le,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...y,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Ii(l,g),"--progress-label-color":ST(p.autoContrast,g)?sx({color:l,theme:g,autoContrast:p.autoContrast}):void 0}})});B$.classes=hI;B$.displayName="@mantine/core/ProgressSection";const XFe={},MT=Et((e,t)=>{const n=Qe("Progress",XFe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=ox({classNames:i,styles:s,props:n});return S.jsx(F$,{ref:t,classNames:d,styles:h,vars:o,...f,children:S.jsx(B$,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});MT.classes=hI;MT.displayName="@mantine/core/Progress";MT.Section=B$;MT.Root=F$;MT.Label=nq;const[QFe,Ame]=a1(),[JFe,ZFe]=a1();var kme={card:"m_9dc8ae12"};const e8e={withBorder:!0},t8e=(e,{radius:t})=>({card:{"--card-radius":oi(t)}}),rq=Et((e,t)=>{const n=Qe("RadioCard",e8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:g,...y}=n,x=Qt({name:"RadioCard",classes:kme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:t8e,rootSelector:"card"}),{dir:b}=l1(),_=Ame(),E=typeof l=="boolean"?l:(_==null?void 0:_.value)===d||!1,T=p||(_==null?void 0:_.name),k=I=>{if(g==null||g(I),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(I.nativeEvent.code)){I.preventDefault();const R=Array.from(document.querySelectorAll(`[role="radio"][name="${T||"__mantine"}"]`)),D=R.findIndex(z=>z===I.target),L=D+1>=R.length?0:D+1,M=D-1<0?R.length-1:D-1;I.nativeEvent.code==="ArrowDown"&&(R[L].focus(),R[L].click()),I.nativeEvent.code==="ArrowUp"&&(R[M].focus(),R[M].click()),I.nativeEvent.code==="ArrowLeft"&&(R[b==="ltr"?M:L].focus(),R[b==="ltr"?M:L].click()),I.nativeEvent.code==="ArrowRight"&&(R[b==="ltr"?L:M].focus(),R[b==="ltr"?L:M].click())}};return S.jsx(JFe,{value:{checked:E},children:S.jsx(Nc,{ref:t,mod:[{"with-border":f,checked:E},c],...x("card"),...y,role:"radio","aria-checked":E,name:T,onClick:I=>{h==null||h(I),_==null||_.onChange(d||"")},onKeyDown:k})})});rq.displayName="@mantine/core/RadioCard";rq.classes=kme;const n8e={},iq=Et((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Qe("RadioGroup",n8e,e),f=qu(u),[d,h]=qo({value:n,defaultValue:r,finalValue:"",onChange:i}),p=g=>!l&&h(typeof g=="string"?g:g.currentTarget.value);return S.jsx(QFe,{value:{value:d,onChange:p,size:s,name:f},children:S.jsx(pi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:S.jsx(NH,{role:"radiogroup",children:a})})})});iq.classes=pi.Wrapper.classes;iq.displayName="@mantine/core/RadioGroup";function Ime({size:e,style:t,...n}){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:We(e),height:We(e),...t},"aria-hidden":!0,...n,children:S.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Rme={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const r8e={icon:Ime},i8e=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Bp({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":zn(r,"radio-size"),"--radio-radius":t===void 0?void 0:oi(t),"--radio-color":s==="outline"?u:Ii(n,e),"--radio-icon-size":zn(r,"radio-icon-size"),"--radio-icon-color":i?Ii(i,e):ST(o,e)?sx({color:n,theme:e,autoContrast:o}):void 0}}},sq=Et((e,t)=>{const n=Qe("RadioIndicator",r8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:g,variant:y,disabled:x,...b}=n,_=l,E=Qt({name:"RadioIndicator",classes:Rme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:i8e,rootSelector:"indicator"}),T=ZFe(),k=typeof p=="boolean"?p:(T==null?void 0:T.checked)||!1;return S.jsx(Le,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:k,disabled:x},g],...b,children:S.jsx(_,{...E("icon")})})});sq.displayName="@mantine/core/RadioIndicator";sq.classes=Rme;var Pme={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const s8e={labelPosition:"right"},o8e=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Bp({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":zn(t,"radio-size"),"--radio-radius":n===void 0?void 0:oi(n),"--radio-color":s==="outline"?u:Ii(r,e),"--radio-icon-color":i?Ii(i,e):ST(o,e)?sx({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":zn(t,"radio-icon-size")}}},up=Et((e,t)=>{const n=Qe("Radio",s8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:g,color:y,variant:x,disabled:b,wrapperProps:_,icon:E=Ime,rootRef:T,iconColor:k,onChange:I,mod:R,...D}=n,L=Qt({name:"Radio",classes:Pme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:o8e}),M=Ame(),z=(M==null?void 0:M.size)??c,F=n.size?c:z,{styleProps:H,rest:Q}=ux(D),J=qu(l),ne=M?{checked:M.value===Q.value,name:Q.name??M.name,onChange:Z=>{M.onChange(Z),I==null||I(Z)}}:{};return S.jsx(C$,{...L("root"),__staticSelector:"Radio",__stylesApiProps:n,id:J,size:F,labelPosition:d,label:f,description:h,error:p,disabled:b,classNames:r,styles:o,unstyled:a,"data-checked":ne.checked||void 0,variant:x,ref:T,mod:R,...H,..._,children:S.jsxs(Le,{...L("inner"),mod:{"label-position":d},children:[S.jsx(Le,{...L("radio",{focusable:!0,variant:x}),onChange:I,...Q,...ne,component:"input",mod:{error:!!p},ref:t,id:J,disabled:b,type:"radio"}),S.jsx(E,{...L("icon"),"aria-hidden":!0})]})})});up.classes=Pme;up.displayName="@mantine/core/Radio";up.Group=iq;up.Card=rq;up.Indicator=sq;const a8e={duration:100,transition:"fade"};function u8e(e,t){return{...a8e,...t,...e}}function l8e({offset:e,position:t,defaultOpened:n}){const[r,i]=O.useState(n),s=O.useRef(null),{x:o,y:a,elements:u,refs:l,update:c,placement:f}=nH({placement:t,middleware:[JV({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=O.useCallback(({clientX:g,clientY:y})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:g,y,left:g+d,top:y+h,right:g,bottom:y}}})},[u.reference]);return O.useEffect(()=>{if(l.floating.current){const g=s.current;g.addEventListener("mousemove",p);const y=u0(l.floating.current);return y.forEach(x=>{x.addEventListener("scroll",c)}),()=>{g.removeEventListener("mousemove",p),y.forEach(x=>{x.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:l.setFloating}}var j$={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const c8e={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:zl("popover")},f8e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:oi(t),"--tooltip-bg":n?Ii(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),oq=Et((e,t)=>{const n=Qe("TooltipFloating",c8e,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:g,multiline:y,zIndex:x,disabled:b,defaultOpened:_,variant:E,vars:T,portalProps:k,...I}=n,R=to(),D=Qt({name:"TooltipFloating",props:n,classes:j$,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:T,varsResolver:f8e}),{handleMouseMove:L,x:M,y:z,opened:F,boundaryRef:H,floating:Q,setOpened:J}=l8e({offset:p,position:g,defaultOpened:_});if(!o1(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ne=xo(H,h$(r),t),Z=r.props,ie=U=>{var X;(X=Z.onMouseEnter)==null||X.call(Z,U),L(U),J(!0)},q=U=>{var X;(X=Z.onMouseLeave)==null||X.call(Z,U),J(!1)};return S.jsxs(S.Fragment,{children:[S.jsx(c1,{...k,withinPortal:s,children:S.jsx(Le,{...I,...D("tooltip",{style:{...MV(o,R),zIndex:x,display:!b&&F?"block":"none",top:(z&&Math.round(z))??"",left:(M&&Math.round(M))??""}}),variant:E,ref:Q,mod:{multiline:y},children:h})}),O.cloneElement(r,{...Z,[i]:ne,onMouseEnter:ie,onMouseLeave:q})]})});oq.classes=j$;oq.displayName="@mantine/core/TooltipFloating";const Dme=O.createContext(!1),d8e=Dme.Provider,h8e=()=>O.useContext(Dme),p8e={openDelay:0,closeDelay:0};function aq(e){const{openDelay:t,closeDelay:n,children:r}=Qe("TooltipGroup",p8e,e);return S.jsx(d8e,{value:!0,children:S.jsx(b$e,{delay:{open:t,close:n},children:r})})}aq.displayName="@mantine/core/TooltipGroup";aq.extend=e=>e;function m8e(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function g8e(e){const t=m8e(e.middlewares),n=[rpe(e.offset)];return t.shift&&n.push(JV(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?MO():MO(t.flip)),n.push(ipe({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?dA():dA(t.inline)):e.inline&&n.push(dA()),n}function y8e(e){var k,I,R;const[t,n]=O.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=h8e(),o=qu(),{delay:a,currentId:u,setCurrentId:l}=upe(),c=O.useCallback(D=>{n(D),D&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:g,placement:y,middlewareData:{arrow:{x,y:b}={}}}=nH({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:g8e(e)});x$e(h,{id:o});const{getReferenceProps:_,getFloatingProps:E}=A$e([v$e(h,{enabled:(k=e.events)==null?void 0:k.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((I=e.events)!=null&&I.touch)}),C$e(h,{enabled:(R=e.events)==null?void 0:R.focus,visibleOnly:!0}),I$e(h,{role:"tooltip"}),T$e(h,{enabled:typeof e.opened>"u"})]);gpe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:g}}),_p(()=>{var D;(D=e.onPositionChange)==null||D.call(e,y)},[y]);const T=i&&u&&u!==o;return{x:f,y:d,arrowX:x,arrowY:b,reference:p.setReference,floating:p.setFloating,getFloatingProps:E,getReferenceProps:_,isGroupPhase:T,opened:i,placement:y}}const Qee={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:zl("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},v8e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:oi(t),"--tooltip-bg":n?Ii(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Mi=Et((e,t)=>{const n=Qe("Tooltip",Qee,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:f,withinPortal:d,radius:h,color:p,classNames:g,styles:y,unstyled:x,style:b,className:_,withArrow:E,arrowSize:T,arrowOffset:k,arrowRadius:I,arrowPosition:R,offset:D,transitionProps:L,multiline:M,events:z,zIndex:F,disabled:H,positionDependencies:Q,onClick:J,onMouseEnter:ne,onMouseLeave:Z,inline:ie,variant:q,keepMounted:U,vars:X,portalProps:V,mod:K,floatingStrategy:ee,middlewares:fe,...Ee}=Qe("Tooltip",Qee,n),{dir:ye}=l1(),_e=O.useRef(null),De=y8e({position:lpe(ye,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:f,events:z,arrowRef:_e,arrowOffset:k,offset:typeof D=="number"?D+(E?T/2:0):D,positionDependencies:[...Q,r],inline:ie,strategy:ee,middlewares:fe}),me=Qt({name:"Tooltip",props:n,classes:j$,className:_,style:b,classNames:g,styles:y,unstyled:x,rootSelector:"tooltip",vars:X,varsResolver:v8e});if(!o1(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const de=xo(De.reference,h$(r),t),$e=u8e(L,{duration:100,transition:"fade"}),Pe=r.props;return S.jsxs(S.Fragment,{children:[S.jsx(c1,{...V,withinPortal:d,children:S.jsx(jp,{...$e,keepMounted:U,mounted:!H&&!!De.opened,duration:De.isGroupPhase?10:$e.duration,children:Ze=>S.jsxs(Le,{...Ee,"data-fixed":ee==="fixed"||void 0,variant:q,mod:[{multiline:M},K],...De.getFloatingProps({ref:De.floating,className:me("tooltip").className,style:{...me("tooltip").style,...Ze,zIndex:F,top:De.y??0,left:De.x??0}}),children:[o,S.jsx(rH,{ref:_e,arrowX:De.arrowX,arrowY:De.arrowY,visible:E,position:De.placement,arrowSize:T,arrowOffset:k,arrowRadius:I,arrowPosition:R,...me("arrow")})]})})}),O.cloneElement(r,De.getReferenceProps({onClick:J,onMouseEnter:ne,onMouseLeave:Z,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:de,className:Fs(_,Pe.className),...Pe}))]})});Mi.classes=j$;Mi.displayName="@mantine/core/Tooltip";Mi.Floating=oq;Mi.Group=aq;const b8e={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},FT=Et((e,t)=>{const n=Qe("Select",b8e,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:g,value:y,defaultValue:x,selectFirstOptionOnChange:b,onOptionSubmit:_,comboboxProps:E,readOnly:T,disabled:k,filter:I,limit:R,withScrollArea:D,maxDropdownHeight:L,size:M,searchable:z,rightSection:F,checkIconPosition:H,withCheckIcon:Q,nothingFoundMessage:J,name:ne,form:Z,searchValue:ie,defaultSearchValue:q,onSearchChange:U,allowDeselect:X,error:V,rightSectionPointerEvents:K,id:ee,clearable:fe,clearButtonProps:Ee,hiddenInputProps:ye,renderOption:_e,onClear:De,autoComplete:me,scrollAreaProps:de,__defaultRightSection:$e,__clearSection:Pe,__clearable:Ze,...it}=n,Ge=O.useMemo(()=>Bpe(g),[g]),et=O.useMemo(()=>xH(Ge),[Ge]),ut=qu(ee),[Tt,xt,Dt]=qo({value:y,defaultValue:x,finalValue:null,onChange:p}),Ue=typeof Tt=="string"?et[Tt]:void 0,Ft=COe(Ue),[tn,Re]=qo({value:ie,defaultValue:q,finalValue:Ue?Ue.label:"",onChange:U}),Ve=PH({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Ve.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Ve.resetSelectedOption()}}),{resolvedClassNames:yt,resolvedStyles:$t}=ox({props:n,styles:i,classNames:r});O.useEffect(()=>{b&&Ve.selectFirstOption()},[b,Tt]),O.useEffect(()=>{y===null&&Re(""),typeof y=="string"&&Ue&&((Ft==null?void 0:Ft.value)!==Ue.value||(Ft==null?void 0:Ft.label)!==Ue.label)&&Re(Ue.label)},[y,Ue]);const Bt=S.jsx(Er.ClearButton,{...Ee,onClear:()=>{xt(null,null),Re(""),De==null||De()}});return S.jsxs(S.Fragment,{children:[S.jsxs(Er,{store:Ve,__staticSelector:"Select",classNames:yt,styles:$t,unstyled:s,readOnly:T,onOptionSubmit:dn=>{_==null||_(dn);const Nn=X&&et[dn].value===Tt?null:et[dn],dr=Nn?Nn.value:null;dr!==Tt&&xt(dr,Nn),!Dt&&Re(typeof dr=="string"&&(Nn==null?void 0:Nn.label)||""),Ve.closeDropdown()},size:M,...E,children:[S.jsx(Er.Target,{targetType:z?"input":"button",autoComplete:me,children:S.jsx(Lf,{id:ut,ref:t,__defaultRightSection:S.jsx(Er.Chevron,{size:M,error:V,unstyled:s}),__clearSection:Bt,__clearable:fe&&!!Tt&&!k&&!T,rightSection:F,rightSectionPointerEvents:K||(Bt?"all":"none"),...it,size:M,__staticSelector:"Select",disabled:k,readOnly:T||!z,value:tn,onChange:dn=>{Re(dn.currentTarget.value),Ve.openDropdown(),b&&Ve.selectFirstOption()},onFocus:dn=>{z&&Ve.openDropdown(),f==null||f(dn)},onBlur:dn=>{var Nn;z&&Ve.closeDropdown(),Re(Tt!=null&&((Nn=et[Tt])==null?void 0:Nn.label)||""),d==null||d(dn)},onClick:dn=>{z?Ve.openDropdown():Ve.toggleDropdown(),h==null||h(dn)},classNames:yt,styles:$t,unstyled:s,pointer:!z,error:V})}),S.jsx(rme,{data:Ge,hidden:T||k,filter:I,search:tn,limit:R,hiddenWhenEmpty:!J,withScrollArea:D,maxDropdownHeight:L,filterOptions:z&&(Ue==null?void 0:Ue.label)!==tn,value:Tt,checkIconPosition:H,withCheckIcon:Q,nothingFoundMessage:J,unstyled:s,labelId:it.label?`${ut}-label`:void 0,"aria-label":it.label?void 0:it["aria-label"],renderOption:_e,scrollAreaProps:de})]}),S.jsx(Er.HiddenInput,{value:Tt,name:ne,form:Z,disabled:k,...ye})]})});FT.classes={...Lf.classes,...Er.classes};FT.displayName="@mantine/core/Select";function x8e({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=to(),s=t===void 0?e:t,o=s1({"--sg-spacing-x":Zs(Rd(e)),"--sg-spacing-y":Zs(Rd(s)),"--sg-cols":(c=Rd(n))==null?void 0:c.toString()}),a=Ti(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=Zs(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=Zs(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=GA(Ti(a),i.breakpoints).filter(f=>Ti(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return S.jsx(ax,{styles:o,media:l,selector:r})}function i8(e){return typeof e=="object"&&e!==null?Ti(e):[]}function w8e(e){return e.sort((t,n)=>WA(t)-WA(n))}function _8e({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...i8(e),...i8(t),...i8(n)]));return w8e(r)}function E8e({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=s1({"--sg-spacing-x":Zs(Rd(e)),"--sg-spacing-y":Zs(Rd(i)),"--sg-cols":(l=Rd(n))==null?void 0:l.toString()}),o=_8e({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=Zs(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=Zs(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return S.jsx(ax,{styles:s,container:u,selector:r})}var Nme={container:"m_925c2d2c",root:"m_2415a157"};const T8e={cols:1,spacing:"md",type:"media"},uq=Et((e,t)=>{const n=Qe("SimpleGrid",T8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Qt({name:"SimpleGrid",classes:Nme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),g=oI();return d==="container"?S.jsxs(S.Fragment,{children:[S.jsx(E8e,{...n,selector:`.${g}`}),S.jsx("div",{...p("container"),children:S.jsx(Le,{ref:t,...p("root",{className:g}),...h})})]}):S.jsxs(S.Fragment,{children:[S.jsx(x8e,{...n,selector:`.${g}`}),S.jsx(Le,{ref:t,...p("root",{className:g}),...h})]})});uq.classes=Nme;uq.displayName="@mantine/core/SimpleGrid";const[S8e,U$]=ka("SliderProvider was not found in tree"),Ome=O.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=U$();return S.jsx(Le,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});Ome.displayName="@mantine/core/SliderRoot";const $me=O.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:g=null,disabled:y},x)=>{const{getStyles:b}=U$(),[_,E]=O.useState(!1),T=l||s||_||h&&p;return S.jsxs(Le,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:x,__vars:{"--slider-thumb-offset":`${r}%`},...b("thumb",{focusable:!0}),mod:{dragging:s,disabled:y},onFocus:k=>{E(!0),typeof f=="function"&&f(k)},onBlur:k=>{E(!1),typeof d=="function"&&d(k)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:k=>k.stopPropagation(),children:[g,S.jsx(jp,{mounted:i!=null&&!!T,transition:"fade",duration:0,...u,children:k=>S.jsx("div",{...b("label",{style:k}),children:i})})]})});$me.displayName="@mantine/core/SliderThumb";function Lme({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function C8e({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function Mme({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=U$();if(!e)return null;const u=e.map((l,c)=>O.createElement(Le,{...a("markWrapper"),__vars:{"--mark-offset":`${Lme({value:l.value,min:t,max:n})}%`},key:c},S.jsx(Le,{...a("mark"),mod:{filled:C8e({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&S.jsx("div",{...a("markLabel"),children:l.label})));return S.jsx("div",{children:u})}Mme.displayName="@mantine/core/SliderMarks";function Fme({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=U$();return S.jsx(Le,{...u("trackContainer"),mod:{disabled:r},...o,children:S.jsxs(Le,{...u("track"),mod:{inverted:s,disabled:r},children:[S.jsx(Le,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,S.jsx(Mme,{...a,offset:i,disabled:r,inverted:s})]})})}Fme.displayName="@mantine/core/SliderTrack";function A8e({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function WP(e,t){return parseFloat(e.toFixed(t))}function k8e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function s8(e,t){const r=[...t].sort((i,s)=>i.value-s.value).find(i=>i.value>e);return r?r.value:e}function o8(e,t){const r=[...t].sort((i,s)=>s.value-i.value).find(i=>i.value<e);return r?r.value:e}function Jee(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function Zee(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var Bme={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const I8e={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},R8e=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":zn(t,"slider-size"),"--slider-color":n?Ii(n,e):void 0,"--slider-radius":i===void 0?void 0:oi(i),"--slider-thumb-size":r!==void 0?We(r):"calc(var(--slider-size) * 2)"}}),lq=Et((e,t)=>{const n=Qe("Slider",I8e,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:g,label:y,labelTransitionProps:x,labelAlwaysOn:b,thumbLabel:_,showLabelOnHover:E,thumbChildren:T,disabled:k,unstyled:I,scale:R,inverted:D,className:L,style:M,vars:z,hiddenInputProps:F,restrictToMarks:H,thumbProps:Q,...J}=n,ne=Qt({name:"Slider",props:n,classes:Bme,classNames:r,className:L,styles:i,style:M,vars:z,varsResolver:R8e,unstyled:I}),{dir:Z}=l1(),[ie,q]=O.useState(!1),[U,X]=qo({value:typeof s=="number"?Kh(s,l,c):s,defaultValue:typeof h=="number"?Kh(h,l,c):h,finalValue:Kh(0,l,c),onChange:o}),V=O.useRef(U),K=O.useRef(null),ee=O.useRef(null),fe=Lme({value:U,min:l,max:c}),Ee=R(U),ye=typeof y=="function"?y(Ee):y,_e=d??k8e(f),De=O.useCallback(({x:Pe})=>{if(!k){const Ze=A8e({value:Pe,min:l,max:c,step:f,precision:_e});X(H&&(g!=null&&g.length)?QZ(Ze,g.map(it=>it.value)):Ze),V.current=Ze}},[k,l,c,f,_e,X,g,H]),{ref:me,active:de}=EOe(De,{onScrubEnd:()=>a==null?void 0:a(H&&(g!=null&&g.length)?QZ(V.current,g.map(Pe=>Pe.value)):V.current)},Z),$e=Pe=>{var Ze,it,Ge,et,ut,Tt;if(!k)switch(Pe.key){case"ArrowUp":{if(Pe.preventDefault(),(Ze=ee.current)==null||Ze.focus(),H&&g){const Dt=s8(U,g);X(Dt),a==null||a(Dt);break}const xt=WP(Math.min(Math.max(U+f,l),c),_e);X(xt),a==null||a(xt);break}case"ArrowRight":{if(Pe.preventDefault(),(it=ee.current)==null||it.focus(),H&&g){const Dt=Z==="rtl"?o8(U,g):s8(U,g);X(Dt),a==null||a(Dt);break}const xt=WP(Math.min(Math.max(Z==="rtl"?U-f:U+f,l),c),_e);X(xt),a==null||a(xt);break}case"ArrowDown":{if(Pe.preventDefault(),(Ge=ee.current)==null||Ge.focus(),H&&g){const Dt=o8(U,g);X(Dt),a==null||a(Dt);break}const xt=WP(Math.min(Math.max(U-f,l),c),_e);X(xt),a==null||a(xt);break}case"ArrowLeft":{if(Pe.preventDefault(),(et=ee.current)==null||et.focus(),H&&g){const Dt=Z==="rtl"?s8(U,g):o8(U,g);X(Dt),a==null||a(Dt);break}const xt=WP(Math.min(Math.max(Z==="rtl"?U+f:U-f,l),c),_e);X(xt),a==null||a(xt);break}case"Home":{if(Pe.preventDefault(),(ut=ee.current)==null||ut.focus(),H&&g){X(Jee(g)),a==null||a(Jee(g));break}X(l),a==null||a(l);break}case"End":{if(Pe.preventDefault(),(Tt=ee.current)==null||Tt.focus(),H&&g){X(Zee(g)),a==null||a(Zee(g));break}X(c),a==null||a(c);break}}};return S.jsx(S8e,{value:{getStyles:ne},children:S.jsxs(Ome,{...J,ref:xo(t,K),onKeyDownCapture:$e,onMouseDownCapture:()=>{var Pe;return(Pe=K.current)==null?void 0:Pe.focus()},size:u,disabled:k,children:[S.jsx(Fme,{inverted:D,offset:0,filled:fe,marks:g,min:l,max:c,value:Ee,disabled:k,containerProps:{ref:me,onMouseEnter:E?()=>q(!0):void 0,onMouseLeave:E?()=>q(!1):void 0},children:S.jsx($me,{max:c,min:l,value:Ee,position:fe,dragging:de,label:ye,ref:ee,labelTransitionProps:x,labelAlwaysOn:b,thumbLabel:_,showLabelOnHover:E,isHovered:ie,disabled:k,...Q,children:T})}),S.jsx("input",{type:"hidden",name:p,value:Ee,...F})]})})});lq.classes=Bme;lq.displayName="@mantine/core/Slider";const P8e={},kc=Et((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Qe("Space",P8e,e);return S.jsx(Le,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});kc.displayName="@mantine/core/Space";var jme={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const D8e={maxHeight:100,initialState:!1},N8e=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),cq=Et((e,t)=>{const n=Qe("Spoiler",D8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:g,id:y,expanded:x,onExpandedChange:b,..._}=n,E=Qt({name:"Spoiler",classes:jme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:N8e}),T=qu(y),k=`${T}-region`,[I,R]=qo({value:x,defaultValue:l,finalValue:!1,onChange:b}),{ref:D,height:L}=SOe(),M=I?f:d,z=M!==null&&c<L;return S.jsxs(Le,{...E("root"),id:T,ref:t,"data-has-spoiler":z||void 0,..._,children:[z&&S.jsx(cx,{component:"button",type:"button",ref:p,onClick:()=>R(!I),"aria-expanded":I,"aria-controls":k,...E("control"),children:M}),S.jsx("div",{...E("content",{style:{maxHeight:I?L?We(L):void 0:We(c)}}),"data-reduce-motion":!0,role:"region",id:k,children:S.jsx("div",{ref:D,children:h})})]})});cq.classes=jme;cq.displayName="@mantine/core/Spoiler";var Ume={root:"m_6d731127"};const O8e={gap:"md",align:"stretch",justify:"flex-start"},$8e=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Zs(t),"--stack-align":n,"--stack-justify":r}}),qd=Et((e,t)=>{const n=Qe("Stack",O8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Qt({name:"Stack",props:n,classes:Ume,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$8e});return S.jsx(Le,{ref:t,...p("root"),variant:d,...h})});qd.classes=Ume;qd.displayName="@mantine/core/Stack";const zme=O.createContext(null),L8e=zme.Provider,M8e=()=>O.useContext(zme),F8e={},fq=Et((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Qe("SwitchGroup",F8e,e),[c,f]=qo({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(g=>g!==p):[...c,p])};return S.jsx(L8e,{value:{value:c,onChange:d,size:s},children:S.jsx(pi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:S.jsx(NH,{role:"group",children:a})})})});fq.classes=pi.Wrapper.classes;fq.displayName="@mantine/core/SwitchGroup";var Vme={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const B8e={labelPosition:"right"},j8e=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:oi(t),"--switch-height":zn(r,"switch-height"),"--switch-width":zn(r,"switch-width"),"--switch-thumb-size":zn(r,"switch-thumb-size"),"--switch-label-font-size":zn(r,"switch-label-font-size"),"--switch-track-label-padding":zn(r,"switch-track-label-padding"),"--switch-color":n?Ii(n,e):void 0}}),db=Et((e,t)=>{const n=Qe("Switch",B8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:g,wrapperProps:y,thumbIcon:x,checked:b,defaultChecked:_,onChange:E,labelPosition:T,description:k,error:I,disabled:R,variant:D,rootRef:L,mod:M,...z}=n,F=M8e(),H=p||(F==null?void 0:F.size),Q=Qt({name:"Switch",props:n,classes:Vme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:j8e}),{styleProps:J,rest:ne}=ux(z),Z=qu(h),ie=F?{checked:F.value.includes(ne.value),onChange:F.onChange}:{},[q,U]=qo({value:ie.checked??b,defaultValue:_,finalValue:!1});return S.jsxs(C$,{...Q("root"),__staticSelector:"Switch",__stylesApiProps:n,id:Z,size:H,labelPosition:T,label:c,description:k,error:I,disabled:R,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":ie.checked||b||void 0,variant:D,ref:L,mod:M,...J,...y,children:[S.jsx("input",{...ne,disabled:R,checked:q,"data-checked":ie.checked||b||void 0,onChange:X=>{var V;F?(V=ie.onChange)==null||V.call(ie,X):E==null||E(X),U(X.currentTarget.checked)},id:Z,ref:t,type:"checkbox",role:"switch",...Q("input")}),S.jsxs(Le,{"aria-hidden":"true",mod:{error:I,"label-position":T,"without-labels":!d&&!f},...Q("track"),children:[S.jsx(Le,{component:"span",mod:"reduce-motion",...Q("thumb"),children:x}),S.jsx("span",{...Q("trackLabel"),children:q?d:f})]})]})});db.classes={...Vme,...Wpe};db.displayName="@mantine/core/Switch";db.Group=fq;const[U8e,z8e]=ka("Table component was not found in the tree");var pI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function V8e(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function dx(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Et((i,s)=>{const o=Qe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=z8e();return S.jsx(Le,{component:e,ref:s,...V8e(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=pI,r}const Dj=dx("th",{columnBorder:!0}),Hme=dx("td",{columnBorder:!0}),JN=dx("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),qme=dx("thead",{stickyHeader:!0}),Wme=dx("tbody"),Gme=dx("tfoot"),Yme=dx("caption",{captionSide:!0});function dq({data:e}){return S.jsxs(S.Fragment,{children:[e.caption&&S.jsx(Yme,{children:e.caption}),e.head&&S.jsx(qme,{children:S.jsx(JN,{children:e.head.map((t,n)=>S.jsx(Dj,{children:t},n))})}),e.body&&S.jsx(Wme,{children:e.body.map((t,n)=>S.jsx(JN,{children:t.map((r,i)=>S.jsx(Hme,{children:r},i))},n))}),e.foot&&S.jsx(Gme,{children:S.jsx(JN,{children:e.foot.map((t,n)=>S.jsx(Dj,{children:t},n))})})]})}dq.displayName="@mantine/core/TableDataRenderer";const H8e={type:"scrollarea"},q8e=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":We(t),"--table-overflow":n==="native"?"auto":void 0}}),hq=Et((e,t)=>{const n=Qe("TableScrollContainer",H8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Qt({name:"TableScrollContainer",classes:pI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:q8e,rootSelector:"scrollContainer"});return S.jsx(Le,{component:f==="scrollarea"?_0:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:S.jsx("div",{...h("scrollContainerInner"),children:l})})});hq.classes=pI;hq.displayName="@mantine/core/TableScrollContainer";const W8e={withRowBorders:!0,verticalSpacing:7},G8e=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Zs(r),"--table-vertical-spacing":Zs(i),"--table-border-color":s?Ii(s,e):void 0,"--table-striped-color":u&&o?Ii(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Ii(a,e):void 0,"--table-sticky-header-offset":f?We(c):void 0}}),bn=Et((e,t)=>{const n=Qe("Table",W8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:g,withColumnBorders:y,withRowBorders:x,withTableBorder:b,borderColor:_,layout:E,variant:T,data:k,children:I,stickyHeader:R,stickyHeaderOffset:D,mod:L,tabularNums:M,...z}=n,F=Qt({name:"Table",props:n,className:i,style:s,classes:pI,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:G8e});return S.jsx(U8e,{value:{getStyles:F,stickyHeader:R,striped:p===!0?"odd":p||void 0,highlightOnHover:g,withColumnBorders:y,withRowBorders:x,captionSide:f||"bottom"},children:S.jsx(Le,{component:"table",variant:T,ref:t,mod:[{"data-with-table-border":b,"data-tabular-nums":M},L],...F("table"),...z,children:I||!!k&&S.jsx(dq,{data:k})})})});bn.classes=pI;bn.displayName="@mantine/core/Table";bn.Td=Hme;bn.Th=Dj;bn.Tr=JN;bn.Thead=qme;bn.Tbody=Wme;bn.Tfoot=Gme;bn.Caption=Yme;bn.ScrollContainer=hq;bn.DataRenderer=dq;const[Y8e,pq]=ka("Tabs component was not found in the tree");var mI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const K8e={},mq=Et((e,t)=>{const n=Qe("TabsList",K8e,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=pq();return S.jsx(Le,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});mq.classes=mI;mq.displayName="@mantine/core/TabsList";const X8e={},gq=Et((e,t)=>{const n=Qe("TabsPanel",X8e,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,keepMounted:c,...f}=n,d=pq(),h=d.value===s,p=d.keepMounted||c||h?r:null;return S.jsx(Le,{...f,...d.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,h?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},l],role:"tabpanel",id:d.getPanelId(s),"aria-labelledby":d.getTabId(s),children:p})});gq.classes=mI;gq.displayName="@mantine/core/TabsPanel";const Q8e={},yq=Et((e,t)=>{const n=Qe("TabsTab",Q8e,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:g,mod:y,tabIndex:x,...b}=n,_=to(),{dir:E}=l1(),T=pq(),k=a===T.value,I=D=>{T.onChange(T.allowTabDeactivation&&a===T.value?null:a),u==null||u(D)},R={classNames:h,styles:p,props:n};return S.jsxs(Nc,{...b,...T.getStyles("tab",{className:r,style:d,variant:T.variant,...R}),disabled:c,unstyled:T.unstyled,variant:T.variant,mod:[{active:k,disabled:c,orientation:T.orientation,inverted:T.inverted,placement:T.orientation==="vertical"&&T.placement},y],ref:t,role:"tab",id:T.getTabId(a),"aria-selected":k,tabIndex:x||k||T.value===null?0:-1,"aria-controls":T.getPanelId(a),onClick:I,__vars:{"--tabs-color":f?Ii(f,_):void 0},onKeyDown:kV({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:T.activateTabWithKeyboard,loop:T.loop,orientation:T.orientation||"horizontal",dir:E,onKeyDown:l}),children:[o&&S.jsx("span",{...T.getStyles("tabSection",R),"data-position":"left",children:o}),i&&S.jsx("span",{...T.getStyles("tabLabel",R),children:i}),s&&S.jsx("span",{...T.getStyles("tabSection",R),"data-position":"right",children:s})]})});yq.classes=mI;yq.displayName="@mantine/core/TabsTab";const ete="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",J8e={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Z8e=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":oi(t),"--tabs-color":Ii(n,e),"--tabs-text-color":ST(r,e)?sx({color:n,theme:e,autoContrast:r}):void 0}}),wr=Et((e,t)=>{const n=Qe("Tabs",J8e,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:g,placement:y,keepMounted:x,classNames:b,styles:_,unstyled:E,className:T,style:k,vars:I,autoContrast:R,mod:D,...L}=n,M=qu(l),[z,F]=qo({value:i,defaultValue:r,finalValue:null,onChange:s}),H=Qt({name:"Tabs",props:n,classes:mI,className:T,style:k,classNames:b,styles:_,unstyled:E,vars:I,varsResolver:Z8e});return S.jsx(Y8e,{value:{placement:y,value:z,orientation:o,id:M,loop:u,activateTabWithKeyboard:c,getTabId:IO(`${M}-tab`,ete),getPanelId:IO(`${M}-panel`,ete),onChange:F,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:g,keepMounted:x,unstyled:E,getStyles:H},children:S.jsx(Le,{ref:t,id:M,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&g,placement:o==="vertical"&&y},D],...H("root"),...L,children:a})})});wr.classes=mI;wr.displayName="@mantine/core/Tabs";wr.Tab=yq;wr.Panel=gq;wr.List=mq;const e9e={},Jm=Et((e,t)=>{const n=Qe("TextInput",e9e,e);return S.jsx(Lf,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Jm.classes=Lf.classes;Jm.displayName="@mantine/core/TextInput";const t9e=["h1","h2","h3","h4","h5","h6"],n9e=["xs","sm","md","lg","xl"];function r9e(e,t){const n=t!==void 0?t:`h${e}`;return t9e.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:n9e.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:We(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Kme={root:"m_8a5d1357"};const i9e={order:1},s9e=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=r9e(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},vs=Et((e,t)=>{const n=Qe("Title",i9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...g}=n,y=Qt({name:"Title",props:n,classes:Kme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:s9e});return[1,2,3,4,5,6].includes(u)?S.jsx(Le,{...y("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...g}):null});vs.classes=Kme;vs.displayName="@mantine/core/Title";function o9e(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function a9e(e){return O.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function u9e(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const l9e=()=>o9e({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),hx=l9e(),c9e=(e=hx)=>a9e(e);function BT(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=u9e(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function f9e(e,t=hx){const n=e.id||Z_();return BT(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function Xme(e,t=hx){return BT(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function d9e(e,t=hx){return BT(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function h9e(e=hx){BT(e,()=>[])}function p9e(e=hx){BT(e,t=>t.slice(0,e.getState().limit))}const px={show:f9e,hide:Xme,update:d9e,clean:h9e,cleanQueue:p9e,updateState:BT};function Nj(){return Nj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nj.apply(null,arguments)}function Qme(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Oj(e,t){return Oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Oj(e,t)}function Jme(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Oj(e,t)}var a8={exports:{}},u8,tte;function m9e(){if(tte)return u8;tte=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return u8=e,u8}var l8,nte;function g9e(){if(nte)return l8;nte=1;var e=m9e();function t(){}function n(){}return n.resetWarningCache=t,l8=function(){function r(o,a,u,l,c,f){if(f!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},l8}var rte;function y9e(){return rte||(rte=1,a8.exports=g9e()()),a8.exports}var v9e=y9e();const ite=qc(v9e),ste={disabled:!1},BO=Mr.createContext(null);var b9e=function(t){return t.scrollTop},AC="unmounted",Lv="exited",Mv="entering",P_="entered",$j="exiting",q0=function(e){Jme(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=Lv,s.appearStatus=Mv):u=P_:r.unmountOnExit||r.mountOnEnter?u=AC:u=Lv,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===AC?{status:Lv}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Mv&&o!==P_&&(s=Mv):(o===Mv||o===P_)&&(s=$j)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Mv){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:CC.findDOMNode(this);o&&b9e(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Lv&&this.setState({status:AC})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[CC.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||ste.disabled){this.safeSetState({status:P_},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Mv},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:P_},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:CC.findDOMNode(this);if(!s||ste.disabled){this.safeSetState({status:Lv},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:$j},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Lv},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:CC.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===AC)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Qme(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Mr.createElement(BO.Provider,{value:null},typeof o=="function"?o(i,a):Mr.cloneElement(Mr.Children.only(o),a))},t}(Mr.Component);q0.contextType=BO;q0.propTypes={};function u_(){}q0.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:u_,onEntering:u_,onEntered:u_,onExit:u_,onExiting:u_,onExited:u_};q0.UNMOUNTED=AC;q0.EXITED=Lv;q0.ENTERING=Mv;q0.ENTERED=P_;q0.EXITING=$j;function x9e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vq(e,t){var n=function(s){return t&&O.isValidElement(s)?t(s):s},r=Object.create(null);return e&&O.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function w9e(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function nb(e,t,n){return n[t]!=null?n[t]:e.props[t]}function _9e(e,t){return vq(e.children,function(n){return O.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:nb(n,"appear",e),enter:nb(n,"enter",e),exit:nb(n,"exit",e)})})}function E9e(e,t,n){var r=vq(e.children),i=w9e(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(O.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=O.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=O.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:nb(o,"exit",e),enter:nb(o,"enter",e)}):!u&&a&&!c?i[s]=O.cloneElement(o,{in:!1}):u&&a&&O.isValidElement(l)&&(i[s]=O.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:nb(o,"exit",e),enter:nb(o,"enter",e)}))}}),i}var T9e=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},S9e={component:"div",childFactory:function(t){return t}},Gg=function(e){Jme(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(x9e(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?_9e(i,a):E9e(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=vq(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=Nj({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=Qme(i,["component","childFactory"]),u=this.state.contextValue,l=T9e(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Mr.createElement(BO.Provider,{value:u},l):Mr.createElement(BO.Provider,{value:u},Mr.createElement(s,a,l))},t}(Mr.Component);Gg.propTypes={};Gg.defaultProps=S9e;const Zme=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function C9e(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),Zme.reduce((n,r)=>(n[r]=[],n),{}))}const ote={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},A9e={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function k9e({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:ote[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:A9e[o]},l={opacity:0,maxHeight:0,transform:ote[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function I9e(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const e0e=O.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=I9e(n,e.autoClose),l=O.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return O.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),O.useEffect(()=>(d(),c),[u]),S.jsx(ZH,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});e0e.displayName="@mantine/notifications/NotificationContainer";var t0e={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const R9e=q0,P9e={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:zl("overlay"),store:hx,withinPortal:!0},D9e=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":We(n)}}),W0=Et((e,t)=>{const n=Qe("Notifications",P9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:g,store:y,portalProps:x,withinPortal:b,..._}=n,E=to(),T=c9e(y),k=xOe(),I=d$(),R=O.useRef({}),D=O.useRef(0),M=(E.respectReducedMotion?I:!1)?1:f,z=Qt({name:"Notifications",classes:t0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:D9e});O.useEffect(()=>{y==null||y.updateState(Q=>({...Q,limit:p||5,defaultPosition:l}))},[p,l]),_p(()=>{T.notifications.length>D.current&&setTimeout(()=>k(),0),D.current=T.notifications.length},[T.notifications]);const F=C9e(T.notifications,l),H=Zme.reduce((Q,J)=>(Q[J]=F[J].map(({style:ne,...Z})=>S.jsx(R9e,{timeout:M,onEnter:()=>R.current[Z.id].offsetHeight,nodeRef:{current:R.current[Z.id]},children:ie=>S.jsx(e0e,{ref:q=>{R.current[Z.id]=q},data:Z,onHide:q=>Xme(q,y),autoClose:c,...z("notification",{style:{...k9e({state:ie,position:J,transitionDuration:M,maxHeight:h}),...ne}})})},Z.id)),Q),{});return S.jsxs(c1,{withinPortal:b,...x,children:[S.jsx(Le,{...z("root"),"data-position":"top-center",ref:t,..._,children:S.jsx(Gg,{children:H["top-center"]})}),S.jsx(Le,{...z("root"),"data-position":"top-left",..._,children:S.jsx(Gg,{children:H["top-left"]})}),S.jsx(Le,{...z("root",{className:EE.classNames.fullWidth}),"data-position":"top-right",..._,children:S.jsx(Gg,{children:H["top-right"]})}),S.jsx(Le,{...z("root",{className:EE.classNames.fullWidth}),"data-position":"bottom-right",..._,children:S.jsx(Gg,{children:H["bottom-right"]})}),S.jsx(Le,{...z("root"),"data-position":"bottom-left",..._,children:S.jsx(Gg,{children:H["bottom-left"]})}),S.jsx(Le,{...z("root"),"data-position":"bottom-center",..._,children:S.jsx(Gg,{children:H["bottom-center"]})})]})});W0.classes=t0e;W0.displayName="@mantine/notifications/Notifications";W0.show=px.show;W0.hide=px.hide;W0.update=px.update;W0.clean=px.clean;W0.cleanQueue=px.cleanQueue;W0.updateState=px.updateState;const n0e=O.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),_s=()=>O.useContext(n0e);function N9e({children:e}){const[t,n]=O.useState(void 0),r=O.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return S.jsx(n0e.Provider,{value:r,children:e})}var F2={},ate;function O9e(){if(ate)return F2;ate=1,Object.defineProperty(F2,"__esModule",{value:!0}),F2.parse=o,F2.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function o(d,h){const p=new s,g=d.length;if(g<2)return p;const y=(h==null?void 0:h.decode)||c;let x=0;do{const b=d.indexOf("=",x);if(b===-1)break;const _=d.indexOf(";",x),E=_===-1?g:_;if(b>E){x=d.lastIndexOf(";",b-1)+1;continue}const T=a(d,x,b),k=u(d,b,T),I=d.slice(T,k);if(p[I]===void 0){let R=a(d,b+1,E),D=u(d,E,R);const L=y(d.slice(R,D));p[I]=L}x=E+1}while(x<g);return p}function a(d,h,p){do{const g=d.charCodeAt(h);if(g!==32&&g!==9)return h}while(++h<p);return p}function u(d,h,p){for(;h>p;){const g=d.charCodeAt(--h);if(g!==32&&g!==9)return h+1}return p}function l(d,h,p){const g=(p==null?void 0:p.encode)||encodeURIComponent;if(!e.test(d))throw new TypeError(`argument name is invalid: ${d}`);const y=g(h);if(!t.test(y))throw new TypeError(`argument val is invalid: ${h}`);let x=d+"="+y;if(!p)return x;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);x+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);x+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);x+="; Path="+p.path}if(p.expires){if(!f(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);x+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(x+="; HttpOnly"),p.secure&&(x+="; Secure"),p.partitioned&&(x+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return x}function c(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function f(d){return i.call(d)==="[object Date]"}return F2}O9e();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ute="popstate";function $9e(e={}){function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return Lj("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ZA(i)}return M9e(t,n,null,e)}function Ki(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Cf(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function L9e(){return Math.random().toString(36).substring(2,10)}function lte(e,t){return{usr:e.state,key:e.key,idx:t}}function Lj(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?jT(t):t,state:n,key:t&&t.key||r||L9e()}}function ZA({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function jT(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function M9e(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,l=c();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let y=c(),x=y==null?null:y-l;l=y,u&&u({action:a,location:g.location,delta:x})}function d(y,x){a="PUSH";let b=Lj(g.location,y,x);l=c()+1;let _=lte(b,l),E=g.createHref(b);try{o.pushState(_,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(E)}s&&u&&u({action:a,location:g.location,delta:1})}function h(y,x){a="REPLACE";let b=Lj(g.location,y,x);l=c();let _=lte(b,l),E=g.createHref(b);o.replaceState(_,"",E),s&&u&&u({action:a,location:g.location,delta:0})}function p(y){let x=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof y=="string"?y:ZA(y);return b=b.replace(/ $/,"%20"),Ki(x,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,x)}let g={get action(){return a},get location(){return e(i,o)},listen(y){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(ute,f),u=y,()=>{i.removeEventListener(ute,f),u=null}},createHref(y){return t(i,y)},createURL:p,encodeLocation(y){let x=p(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:d,replace:h,go(y){return o.go(y)}};return g}function r0e(e,t,n="/"){return F9e(e,t,n,!1)}function F9e(e,t,n,r){let i=typeof t=="string"?jT(t):t,s=Dy(i.pathname||"/",n);if(s==null)return null;let o=i0e(e);B9e(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let l=X9e(s);a=Y9e(o[u],l,r)}return a}function i0e(e,t=[],n=[],r=""){let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ki(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let l=c0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(Ki(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),i0e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:W9e(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of s0e(s.path))i(s,o,u)}),t}function s0e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=s0e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function B9e(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:G9e(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var j9e=/^:[\w-]+$/,U9e=3,z9e=2,V9e=1,H9e=10,q9e=-2,cte=e=>e==="*";function W9e(e,t){let n=e.split("/"),r=n.length;return n.some(cte)&&(r+=q9e),t&&(r+=z9e),n.filter(i=>!cte(i)).reduce((i,s)=>i+(j9e.test(s)?U9e:s===""?V9e:H9e),r)}function G9e(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Y9e(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",f=jO({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=jO({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:c0([s,f.pathname]),pathnameBase:eBe(c0([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=c0([s,f.pathnameBase]))}return o}function jO(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=K9e(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:c,isOptional:f},d)=>{if(c==="*"){let p=a[d]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[d];return f&&!h?l[c]=void 0:l[c]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function K9e(e,t=!1,n=!0){Cf(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function X9e(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Cf(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Dy(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Q9e(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?jT(e):e;return{pathname:n?n.startsWith("/")?n:J9e(n,t):t,search:tBe(r),hash:nBe(i)}}function J9e(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function c8(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Z9e(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function bq(e){let t=Z9e(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function xq(e,t,n,r=!1){let i;typeof e=="string"?i=jT(e):(i={...e},Ki(!i.pathname||!i.pathname.includes("?"),c8("?","pathname","search",i)),Ki(!i.pathname||!i.pathname.includes("#"),c8("#","pathname","hash",i)),Ki(!i.search||!i.search.includes("#"),c8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=Q9e(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}var c0=e=>e.join("/").replace(/\/\/+/g,"/"),eBe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tBe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,nBe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function rBe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var o0e=["POST","PUT","PATCH","DELETE"];new Set(o0e);var iBe=["GET",...o0e];new Set(iBe);var UT=O.createContext(null);UT.displayName="DataRouter";var z$=O.createContext(null);z$.displayName="DataRouterState";var a0e=O.createContext({isTransitioning:!1});a0e.displayName="ViewTransition";var sBe=O.createContext(new Map);sBe.displayName="Fetchers";var oBe=O.createContext(null);oBe.displayName="Await";var th=O.createContext(null);th.displayName="Navigation";var gI=O.createContext(null);gI.displayName="Location";var Ff=O.createContext({outlet:null,matches:[],isDataRoute:!1});Ff.displayName="Route";var wq=O.createContext(null);wq.displayName="RouteError";function _q(e,{relative:t}={}){Ki(zT(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=O.useContext(th),{hash:i,pathname:s,search:o}=yI(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:c0([n,s])),r.createHref({pathname:a,search:o,hash:i})}function zT(){return O.useContext(gI)!=null}function Bf(){return Ki(zT(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(gI).location}var u0e="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function l0e(e){O.useContext(th).static||O.useLayoutEffect(e)}function nh(){let{isDataRoute:e}=O.useContext(Ff);return e?xBe():aBe()}function aBe(){Ki(zT(),"useNavigate() may be used only in the context of a <Router> component.");let e=O.useContext(UT),{basename:t,navigator:n}=O.useContext(th),{matches:r}=O.useContext(Ff),{pathname:i}=Bf(),s=JSON.stringify(bq(r)),o=O.useRef(!1);return l0e(()=>{o.current=!0}),O.useCallback((u,l={})=>{if(Cf(o.current,u0e),!o.current)return;if(typeof u=="number"){n.go(u);return}let c=xq(u,JSON.parse(s),i,l.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:c0([t,c.pathname])),(l.replace?n.replace:n.push)(c,l.state,l)},[t,n,s,i,e])}var uBe=O.createContext(null);function lBe(e){let t=O.useContext(Ff).outlet;return t&&O.createElement(uBe.Provider,{value:e},t)}function Sp(){let{matches:e}=O.useContext(Ff),t=e[e.length-1];return t?t.params:{}}function yI(e,{relative:t}={}){let{matches:n}=O.useContext(Ff),{pathname:r}=Bf(),i=JSON.stringify(bq(n));return O.useMemo(()=>xq(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function c0e(e,t){return f0e(e,t)}function f0e(e,t,n,r){var x;Ki(zT(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=O.useContext(th),{matches:s}=O.useContext(Ff),o=s[s.length-1],a=o?o.params:{},u=o?o.pathname:"/",l=o?o.pathnameBase:"/",c=o&&o.route;{let b=c&&c.path||"";d0e(u,!c||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=Bf(),d;if(t){let b=typeof t=="string"?jT(t):t;Ki(l==="/"||((x=b.pathname)==null?void 0:x.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${b.pathname}" was given in the \`location\` prop.`),d=b}else d=f;let h=d.pathname||"/",p=h;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=r0e(e,{pathname:p});Cf(c||g!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Cf(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=pBe(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:c0([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:c0([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,n,r);return t&&y?O.createElement(gI.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},y):y}function cBe(){let e=bBe(),t=rBe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=O.createElement(O.Fragment,null,O.createElement("p",null,"💿 Hey developer 👋"),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:s},"ErrorBoundary")," or"," ",O.createElement("code",{style:s},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),n?O.createElement("pre",{style:i},n):null,o)}var fBe=O.createElement(cBe,null),dBe=class extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?O.createElement(Ff.Provider,{value:this.props.routeContext},O.createElement(wq.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hBe({routeContext:e,match:t,children:n}){let r=O.useContext(UT);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),O.createElement(Ff.Provider,{value:e},n)}function pBe(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id])!==void 0);Ki(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let l=i[u];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=u),l.route.id){let{loaderData:c,errors:f}=n,d=l.route.loader&&!c.hasOwnProperty(l.route.id)&&(!f||f[l.route.id]===void 0);if(l.route.lazy||d){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,l,c)=>{let f,d=!1,h=null,p=null;n&&(f=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||fBe,o&&(a<0&&c===0?(d0e("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):a===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let g=t.concat(i.slice(0,c+1)),y=()=>{let x;return f?x=h:d?x=p:l.route.Component?x=O.createElement(l.route.Component,null):l.route.element?x=l.route.element:x=u,O.createElement(hBe,{match:l,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:x})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?O.createElement(dBe,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}function Eq(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mBe(e){let t=O.useContext(UT);return Ki(t,Eq(e)),t}function gBe(e){let t=O.useContext(z$);return Ki(t,Eq(e)),t}function yBe(e){let t=O.useContext(Ff);return Ki(t,Eq(e)),t}function Tq(e){let t=yBe(e),n=t.matches[t.matches.length-1];return Ki(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function vBe(){return Tq("useRouteId")}function bBe(){var r;let e=O.useContext(wq),t=gBe("useRouteError"),n=Tq("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function xBe(){let{router:e}=mBe("useNavigate"),t=Tq("useNavigate"),n=O.useRef(!1);return l0e(()=>{n.current=!0}),O.useCallback(async(i,s={})=>{Cf(n.current,u0e),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var fte={};function d0e(e,t,n){!t&&!fte[e]&&(fte[e]=!0,Cf(!1,n))}O.memo(wBe);function wBe({routes:e,future:t,state:n}){return f0e(e,void 0,n,t)}function Sq({to:e,replace:t,state:n,relative:r}){Ki(zT(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=O.useContext(th);Cf(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=O.useContext(Ff),{pathname:o}=Bf(),a=nh(),u=xq(e,bq(s),o,r==="path"),l=JSON.stringify(u);return O.useEffect(()=>{a(JSON.parse(l),{replace:t,state:n,relative:r})},[a,l,r,t,n]),null}function _Be(e){return lBe(e.context)}function Fv(e){Ki(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function EBe({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Ki(!zT(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=O.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=jT(n));let{pathname:u="/",search:l="",hash:c="",state:f=null,key:d="default"}=n,h=O.useMemo(()=>{let p=Dy(u,o);return p==null?null:{location:{pathname:p,search:l,hash:c,state:f,key:d},navigationType:r}},[o,u,l,c,f,d,r]);return Cf(h!=null,`<Router basename="${o}"> is not able to match the URL "${u}${l}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:O.createElement(th.Provider,{value:a},O.createElement(gI.Provider,{children:t,value:h}))}function TBe({children:e,location:t}){return c0e(Mj(e),t)}function Mj(e,t=[]){let n=[];return O.Children.forEach(e,(r,i)=>{if(!O.isValidElement(r))return;let s=[...t,i];if(r.type===O.Fragment){n.push.apply(n,Mj(r.props.children,s));return}Ki(r.type===Fv,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ki(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Mj(r.props.children,s)),n.push(o)}),n}var ZN="get",e3="application/x-www-form-urlencoded";function V$(e){return e!=null&&typeof e.tagName=="string"}function SBe(e){return V$(e)&&e.tagName.toLowerCase()==="button"}function CBe(e){return V$(e)&&e.tagName.toLowerCase()==="form"}function ABe(e){return V$(e)&&e.tagName.toLowerCase()==="input"}function kBe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function IBe(e,t){return e.button===0&&(!t||t==="_self")&&!kBe(e)}function Fj(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function RBe(e,t){let n=Fj(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var GP=null;function PBe(){if(GP===null)try{new FormData(document.createElement("form"),0),GP=!1}catch{GP=!0}return GP}var DBe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function f8(e){return e!=null&&!DBe.has(e)?(Cf(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${e3}"`),null):e}function NBe(e,t){let n,r,i,s,o;if(CBe(e)){let a=e.getAttribute("action");r=a?Dy(a,t):null,n=e.getAttribute("method")||ZN,i=f8(e.getAttribute("enctype"))||e3,s=new FormData(e)}else if(SBe(e)||ABe(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||a.getAttribute("action");if(r=u?Dy(u,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||ZN,i=f8(e.getAttribute("formenctype"))||f8(a.getAttribute("enctype"))||e3,s=new FormData(a,e),!PBe()){let{name:l,type:c,value:f}=e;if(c==="image"){let d=l?`${l}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else l&&s.append(l,f)}}else{if(V$(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ZN,r=null,i=e3,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function Cq(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function OBe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $Be(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function LBe(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await OBe(s,n);return o.links?o.links():[]}return[]}));return jBe(r.flat(1).filter($Be).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function dte(e,t,n,r,i,s){let o=(u,l)=>n[l]?u.route.id!==n[l].route.id:!0,a=(u,l)=>{var c;return n[l].pathname!==u.pathname||((c=n[l].route.path)==null?void 0:c.endsWith("*"))&&n[l].params["*"]!==u.params["*"]};return s==="assets"?t.filter((u,l)=>o(u,l)||a(u,l)):s==="data"?t.filter((u,l)=>{var f;let c=r.routes[u.route.id];if(!c||!c.hasLoader)return!1;if(o(u,l)||a(u,l))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function MBe(e,t){return FBe(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function FBe(e){return[...new Set(e)]}function BBe(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function jBe(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(BBe(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function UBe(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function zBe(){let e=O.useContext(UT);return Cq(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function VBe(){let e=O.useContext(z$);return Cq(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Aq=O.createContext(void 0);Aq.displayName="FrameworkContext";function h0e(){let e=O.useContext(Aq);return Cq(e,"You must render this element inside a <HydratedRouter> element"),e}function HBe(e,t){let n=O.useContext(Aq),[r,i]=O.useState(!1),[s,o]=O.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:l,onMouseLeave:c,onTouchStart:f}=t,d=O.useRef(null);O.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let g=x=>{x.forEach(b=>{o(b.isIntersecting)})},y=new IntersectionObserver(g,{threshold:.5});return d.current&&y.observe(d.current),()=>{y.disconnect()}}},[e]),O.useEffect(()=>{if(r){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,d,{}]:[s,d,{onFocus:B2(a,h),onBlur:B2(u,p),onMouseEnter:B2(l,h),onMouseLeave:B2(c,p),onTouchStart:B2(f,h)}]:[!1,d,{}]}function B2(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function qBe({page:e,...t}){let{router:n}=zBe(),r=O.useMemo(()=>r0e(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?O.createElement(GBe,{page:e,matches:r,...t}):null}function WBe(e){let{manifest:t,routeModules:n}=h0e(),[r,i]=O.useState([]);return O.useEffect(()=>{let s=!1;return LBe(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function GBe({page:e,matches:t,...n}){let r=Bf(),{manifest:i,routeModules:s}=h0e(),{loaderData:o,matches:a}=VBe(),u=O.useMemo(()=>dte(e,t,a,i,r,"data"),[e,t,a,i,r]),l=O.useMemo(()=>dte(e,t,a,i,r,"assets"),[e,t,a,i,r]),c=O.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,p=!1;if(t.forEach(y=>{var b;let x=i.routes[y.route.id];!x||!x.hasLoader||(!u.some(_=>_.route.id===y.route.id)&&y.route.id in o&&((b=s[y.route.id])!=null&&b.shouldRevalidate)||x.hasClientLoader?p=!0:h.add(y.route.id))}),h.size===0)return[];let g=UBe(e);return p&&h.size>0&&g.searchParams.set("_routes",t.filter(y=>h.has(y.route.id)).map(y=>y.route.id).join(",")),[g.pathname+g.search]},[o,r,i,u,t,e,s]),f=O.useMemo(()=>MBe(l,i),[l,i]),d=WBe(l);return O.createElement(O.Fragment,null,c.map(h=>O.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),f.map(h=>O.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),d.map(({key:h,link:p})=>O.createElement("link",{key:h,...p})))}function YBe(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var p0e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{p0e&&(window.__reactRouterVersion="7.1.3")}catch{}function KBe({basename:e,children:t,window:n}){let r=O.useRef();r.current==null&&(r.current=$9e({window:n,v5Compat:!0}));let i=r.current,[s,o]=O.useState({action:i.action,location:i.location}),a=O.useCallback(u=>{O.startTransition(()=>o(u))},[o]);return O.useLayoutEffect(()=>i.listen(a),[i,a]),O.createElement(EBe,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var m0e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g0e=O.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,viewTransition:f,...d},h){let{basename:p}=O.useContext(th),g=typeof l=="string"&&m0e.test(l),y,x=!1;if(typeof l=="string"&&g&&(y=l,p0e))try{let D=new URL(window.location.href),L=l.startsWith("//")?new URL(D.protocol+l):new URL(l),M=Dy(L.pathname,p);L.origin===D.origin&&M!=null?l=M+L.search+L.hash:x=!0}catch{Cf(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=_q(l,{relative:i}),[_,E,T]=HBe(r,d),k=ZBe(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,viewTransition:f});function I(D){t&&t(D),D.defaultPrevented||k(D)}let R=O.createElement("a",{...d,...T,href:y||b,onClick:x||s?t:I,ref:YBe(h,E),target:u,"data-discover":!g&&n==="render"?"true":void 0});return _&&!g?O.createElement(O.Fragment,null,R,O.createElement(qBe,{page:b})):R});g0e.displayName="Link";var XBe=O.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...l},c){let f=yI(o,{relative:l.relative}),d=Bf(),h=O.useContext(z$),{navigator:p,basename:g}=O.useContext(th),y=h!=null&&ije(f)&&a===!0,x=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,b=d.pathname,_=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(b=b.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&g&&(_=Dy(_,g)||_);const E=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let T=b===x||!i&&b.startsWith(x)&&b.charAt(E)==="/",k=_!=null&&(_===x||!i&&_.startsWith(x)&&_.charAt(x.length)==="/"),I={isActive:T,isPending:k,isTransitioning:y},R=T?t:void 0,D;typeof r=="function"?D=r(I):D=[r,T?"active":null,k?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let L=typeof s=="function"?s(I):s;return O.createElement(g0e,{...l,"aria-current":R,className:D,ref:c,style:L,to:o,viewTransition:a},typeof u=="function"?u(I):u)});XBe.displayName="NavLink";var QBe=O.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=ZN,action:a,onSubmit:u,relative:l,preventScrollReset:c,viewTransition:f,...d},h)=>{let p=nje(),g=rje(a,{relative:l}),y=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&m0e.test(a),b=_=>{if(u&&u(_),_.defaultPrevented)return;_.preventDefault();let E=_.nativeEvent.submitter,T=(E==null?void 0:E.getAttribute("formmethod"))||o;p(E||_.currentTarget,{fetcherKey:t,method:T,navigate:n,replace:i,state:s,relative:l,preventScrollReset:c,viewTransition:f})};return O.createElement("form",{ref:h,method:y,action:g,onSubmit:r?u:b,...d,"data-discover":!x&&e==="render"?"true":void 0})});QBe.displayName="Form";function JBe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function y0e(e){let t=O.useContext(UT);return Ki(t,JBe(e)),t}function ZBe(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=nh(),u=Bf(),l=yI(e,{relative:s});return O.useCallback(c=>{if(IBe(c,t)){c.preventDefault();let f=n!==void 0?n:ZA(u)===ZA(l);a(e,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,l,n,r,t,e,i,s,o])}function G0(e){Cf(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=O.useRef(Fj(e)),n=O.useRef(!1),r=Bf(),i=O.useMemo(()=>RBe(r.search,n.current?null:t.current),[r.search]),s=nh(),o=O.useCallback((a,u)=>{const l=Fj(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}var eje=0,tje=()=>`__${String(++eje)}__`;function nje(){let{router:e}=y0e("useSubmit"),{basename:t}=O.useContext(th),n=vBe();return O.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:l}=NBe(r,t);if(i.navigate===!1){let c=i.fetcherKey||tje();await e.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function rje(e,{relative:t}={}){let{basename:n}=O.useContext(th),r=O.useContext(Ff);Ki(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...yI(e||".",{relative:t})},o=Bf();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(c=>c==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:c0([n,s.pathname])),ZA(s)}function ije(e,t={}){let n=O.useContext(a0e);Ki(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=y0e("useViewTransitionState"),i=yI(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=Dy(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Dy(n.nextLocation.pathname,r)||n.nextLocation.pathname;return jO(i.pathname,o)!=null||jO(i.pathname,s)!=null}new TextEncoder;const kq=O.createContext(null);kq.displayName="@mantine/modals/ModalsContext";function sje(){const e=O.useContext(kq);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function oje({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=sje(),h=g=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(g)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=g=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(g)),typeof u=="function"&&u(),i&&d.closeModal(e)};return S.jsxs(S.Fragment,{children:[l&&S.jsx(Le,{mb:"md",children:l}),S.jsxs(is,{mt:l?0:"md",justify:"flex-end",...o,children:[S.jsx(hn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),S.jsx(hn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[aje,Iq]=ROe("mantine-modals"),hte=e=>{const t=e.modalId||Z_();return Iq("openConfirmModal")({...e,modalId:t}),t};Iq("closeModal");Iq("closeAllModals");function pte(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function uje(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(s=>s.id===t.modalId);if(!r)return e;pte(r,t.canceled);const i=e.modals.filter(s=>s.id!==t.modalId);return{current:i[i.length-1]||e.current,modals:i}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{pte(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:i}=t,s=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...i}}:a.type==="context"?{...a,props:{...a.props,...i,innerProps:{...a.props.innerProps,...i.innerProps}}}:a),o=((n=e.current)==null?void 0:n.id)===r&&s.find(a=>a.id===r)||e.current;return{...e,modals:s,current:o}}default:return e}}function lje(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function cje({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=O.useReducer(uje,{modals:[],current:null}),o=O.useRef(i);o.current=i;const a=O.useCallback(b=>{s({type:"CLOSE_ALL",canceled:b})},[o,s]),u=O.useCallback(({modalId:b,..._})=>{const E=b||Z_();return s({type:"OPEN",modal:{id:E,type:"content",props:_}}),E},[s]),l=O.useCallback(({modalId:b,..._})=>{const E=b||Z_();return s({type:"OPEN",modal:{id:E,type:"confirm",props:_}}),E},[s]),c=O.useCallback((b,{modalId:_,...E})=>{const T=_||Z_();return s({type:"OPEN",modal:{id:T,type:"context",props:E,ctx:b}}),T},[s]),f=O.useCallback((b,_)=>{s({type:"CLOSE",modalId:b,canceled:_})},[o,s]),d=O.useCallback(({modalId:b,..._})=>{s({type:"UPDATE",modalId:b,newProps:_})},[s]),h=O.useCallback(({modalId:b,..._})=>{s({type:"UPDATE",modalId:b,newProps:_})},[s]);aje({openModal:u,openConfirmModal:l,openContextModal:({modal:b,..._})=>c(b,_),closeModal:f,closeContextModal:f,closeAllModals:a,updateModal:d,updateContextModal:h});const p={modalProps:t||{},modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a,updateModal:d,updateContextModal:h},g=()=>{const b=o.current.current;switch(b==null?void 0:b.type){case"context":{const{innerProps:_,...E}=b.props,T=r[b.ctx];return{modalProps:E,content:S.jsx(T,{innerProps:_,context:p,id:b.id})}}case"confirm":{const{modalProps:_,confirmProps:E}=lje(b.props);return{modalProps:_,content:S.jsx(oje,{...E,id:b.id,labels:b.props.labels||n})}}case"content":{const{children:_,...E}=b.props;return{modalProps:E,content:_}}default:return{modalProps:{},content:null}}},{modalProps:y,content:x}=g();return S.jsxs(kq.Provider,{value:p,children:[S.jsx(ns,{zIndex:zl("modal")+1,...t,...y,opened:i.modals.length>0,onClose:()=>{var b;return f((b=i.current)==null?void 0:b.id)},children:x}),e]})}/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fje={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=(e,t,n,r)=>{const i=O.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:u,className:l,children:c,...f},d)=>O.createElement("svg",{ref:d,...fje[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...f},[u&&O.createElement("title",{key:"svg-title"},u),...r.map(([h,p])=>O.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dje=$n("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hje=$n("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pA=$n("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mte=$n("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gte=$n("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pje=$n("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mje=$n("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gje=$n("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yje=$n("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vje=$n("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bje=$n("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v0e=$n("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H$=$n("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xje=$n("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wje=$n("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _je=$n("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eje=$n("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tje=$n("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b0e=$n("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sje=$n("outline","hourglass-empty","IconHourglassEmpty",[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cje=$n("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rq=$n("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Aje=$n("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var x0e=$n("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kje=$n("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ije=$n("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rje=$n("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pje=$n("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dje=$n("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var w0e=$n("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nje=$n("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oje=$n("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $je=$n("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lje=$n("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mje=$n("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _0e=$n("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fje=$n("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var E0e=$n("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bje=$n("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var T0e=$n("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pq=$n("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yte=$n("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vI=$n("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jje=$n("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uje=$n("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zje=$n("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function S0e(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Wo="/Revisit-Study/";function vte(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function C0e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Vje=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Hje=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,qje={};function bte(e,t){return(qje.jsx?Hje:Vje).test(e)}const Wje=/[ \t\n\f\r]/g;function Gje(e){return typeof e=="object"?e.type==="text"?xte(e.value):!1:xte(e)}function xte(e){return e.replace(Wje,"")===""}class bI{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}bI.prototype.property={};bI.prototype.normal={};bI.prototype.space=null;function A0e(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new bI(n,r,t)}function ek(e){return e.toLowerCase()}let jf=class{constructor(t,n){this.property=t,this.attribute=n}};jf.prototype.space=null;jf.prototype.boolean=!1;jf.prototype.booleanish=!1;jf.prototype.overloadedBoolean=!1;jf.prototype.number=!1;jf.prototype.commaSeparated=!1;jf.prototype.spaceSeparated=!1;jf.prototype.commaOrSpaceSeparated=!1;jf.prototype.mustUseProperty=!1;jf.prototype.defined=!1;let Yje=0;const qn=mx(),Qs=mx(),k0e=mx(),Nt=mx(),Ai=mx(),nE=mx(),mc=mx();function mx(){return 2**++Yje}const Bj=Object.freeze(Object.defineProperty({__proto__:null,boolean:qn,booleanish:Qs,commaOrSpaceSeparated:mc,commaSeparated:nE,number:Nt,overloadedBoolean:k0e,spaceSeparated:Ai},Symbol.toStringTag,{value:"Module"})),d8=Object.keys(Bj);class Dq extends jf{constructor(t,n,r,i){let s=-1;if(super(t,n),wte(this,"space",i),typeof r=="number")for(;++s<d8.length;){const o=d8[s];wte(this,d8[s],(r&Bj[o])===Bj[o])}}}Dq.prototype.defined=!0;function wte(e,t,n){n&&(e[t]=n)}const Kje={}.hasOwnProperty;function VT(e){const t={},n={};let r;for(r in e.properties)if(Kje.call(e.properties,r)){const i=e.properties[r],s=new Dq(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[ek(r)]=r,n[ek(s.attribute)]=r}return new bI(t,n,e.space)}const I0e=VT({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),R0e=VT({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function P0e(e,t){return t in e?e[t]:t}function D0e(e,t){return P0e(e,t.toLowerCase())}const N0e=VT({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:D0e,properties:{xmlns:null,xmlnsXLink:null}}),O0e=VT({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Qs,ariaAutoComplete:null,ariaBusy:Qs,ariaChecked:Qs,ariaColCount:Nt,ariaColIndex:Nt,ariaColSpan:Nt,ariaControls:Ai,ariaCurrent:null,ariaDescribedBy:Ai,ariaDetails:null,ariaDisabled:Qs,ariaDropEffect:Ai,ariaErrorMessage:null,ariaExpanded:Qs,ariaFlowTo:Ai,ariaGrabbed:Qs,ariaHasPopup:null,ariaHidden:Qs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ai,ariaLevel:Nt,ariaLive:null,ariaModal:Qs,ariaMultiLine:Qs,ariaMultiSelectable:Qs,ariaOrientation:null,ariaOwns:Ai,ariaPlaceholder:null,ariaPosInSet:Nt,ariaPressed:Qs,ariaReadOnly:Qs,ariaRelevant:null,ariaRequired:Qs,ariaRoleDescription:Ai,ariaRowCount:Nt,ariaRowIndex:Nt,ariaRowSpan:Nt,ariaSelected:Qs,ariaSetSize:Nt,ariaSort:null,ariaValueMax:Nt,ariaValueMin:Nt,ariaValueNow:Nt,ariaValueText:null,role:null}}),Xje=VT({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:D0e,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:nE,acceptCharset:Ai,accessKey:Ai,action:null,allow:null,allowFullScreen:qn,allowPaymentRequest:qn,allowUserMedia:qn,alt:null,as:null,async:qn,autoCapitalize:null,autoComplete:Ai,autoFocus:qn,autoPlay:qn,blocking:Ai,capture:null,charSet:null,checked:qn,cite:null,className:Ai,cols:Nt,colSpan:null,content:null,contentEditable:Qs,controls:qn,controlsList:Ai,coords:Nt|nE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:qn,defer:qn,dir:null,dirName:null,disabled:qn,download:k0e,draggable:Qs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:qn,formTarget:null,headers:Ai,height:Nt,hidden:qn,high:Nt,href:null,hrefLang:null,htmlFor:Ai,httpEquiv:Ai,id:null,imageSizes:null,imageSrcSet:null,inert:qn,inputMode:null,integrity:null,is:null,isMap:qn,itemId:null,itemProp:Ai,itemRef:Ai,itemScope:qn,itemType:Ai,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:qn,low:Nt,manifest:null,max:null,maxLength:Nt,media:null,method:null,min:null,minLength:Nt,multiple:qn,muted:qn,name:null,nonce:null,noModule:qn,noValidate:qn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:qn,optimum:Nt,pattern:null,ping:Ai,placeholder:null,playsInline:qn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:qn,referrerPolicy:null,rel:Ai,required:qn,reversed:qn,rows:Nt,rowSpan:Nt,sandbox:Ai,scope:null,scoped:qn,seamless:qn,selected:qn,shadowRootClonable:qn,shadowRootDelegatesFocus:qn,shadowRootMode:null,shape:null,size:Nt,sizes:null,slot:null,span:Nt,spellCheck:Qs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Nt,step:null,style:null,tabIndex:Nt,target:null,title:null,translate:null,type:null,typeMustMatch:qn,useMap:null,value:Qs,width:Nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ai,axis:null,background:null,bgColor:null,border:Nt,borderColor:null,bottomMargin:Nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:qn,declare:qn,event:null,face:null,frame:null,frameBorder:null,hSpace:Nt,leftMargin:Nt,link:null,longDesc:null,lowSrc:null,marginHeight:Nt,marginWidth:Nt,noResize:qn,noHref:qn,noShade:qn,noWrap:qn,object:null,profile:null,prompt:null,rev:null,rightMargin:Nt,rules:null,scheme:null,scrolling:Qs,standby:null,summary:null,text:null,topMargin:Nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:qn,disableRemotePlayback:qn,prefix:null,property:null,results:Nt,security:null,unselectable:null}}),Qje=VT({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:P0e,properties:{about:mc,accentHeight:Nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Nt,amplitude:Nt,arabicForm:null,ascent:Nt,attributeName:null,attributeType:null,azimuth:Nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Nt,by:null,calcMode:null,capHeight:Nt,className:Ai,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Nt,diffuseConstant:Nt,direction:null,display:null,dur:null,divisor:Nt,dominantBaseline:null,download:qn,dx:null,dy:null,edgeMode:null,editable:null,elevation:Nt,enableBackground:null,end:null,event:null,exponent:Nt,externalResourcesRequired:null,fill:null,fillOpacity:Nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:nE,g2:nE,glyphName:nE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Nt,horizOriginX:Nt,horizOriginY:Nt,id:null,ideographic:Nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Nt,k:Nt,k1:Nt,k2:Nt,k3:Nt,k4:Nt,kernelMatrix:mc,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Nt,overlineThickness:Nt,paintOrder:null,panose1:null,path:null,pathLength:Nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ai,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Nt,pointsAtY:Nt,pointsAtZ:Nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:mc,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:mc,rev:mc,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:mc,requiredFeatures:mc,requiredFonts:mc,requiredFormats:mc,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Nt,specularExponent:Nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Nt,strikethroughThickness:Nt,string:null,stroke:null,strokeDashArray:mc,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Nt,strokeOpacity:Nt,strokeWidth:null,style:null,surfaceScale:Nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:mc,tabIndex:Nt,tableValues:null,target:null,targetX:Nt,targetY:Nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:mc,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Nt,underlineThickness:Nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Nt,values:null,vAlphabetic:Nt,vMathematical:Nt,vectorEffect:null,vHanging:Nt,vIdeographic:Nt,version:null,vertAdvY:Nt,vertOriginX:Nt,vertOriginY:Nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Jje=/^data[-\w.:]+$/i,_te=/-[a-z]/g,Zje=/[A-Z]/g;function q$(e,t){const n=ek(t);let r=t,i=jf;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Jje.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(_te,t7e);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!_te.test(s)){let o=s.replace(Zje,e7e);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=Dq}return new i(r,t)}function e7e(e){return"-"+e.toLowerCase()}function t7e(e){return e.charAt(1).toUpperCase()}const n7e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},xI=A0e([R0e,I0e,N0e,O0e,Xje],"html"),m1=A0e([R0e,I0e,N0e,O0e,Qje],"svg");function Ete(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function $0e(e){return e.join(" ").trim()}var j2={},h8,Tte;function r7e(){if(Tte)return h8;Tte=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,u=`
`,l="/",c="*",f="",d="comment",h="declaration";h8=function(g,y){if(typeof g!="string")throw new TypeError("First argument must be a string");if(!g)return[];y=y||{};var x=1,b=1;function _(F){var H=F.match(t);H&&(x+=H.length);var Q=F.lastIndexOf(u);b=~Q?F.length-Q:b+F.length}function E(){var F={line:x,column:b};return function(H){return H.position=new T(F),R(),H}}function T(F){this.start=F,this.end={line:x,column:b},this.source=y.source}T.prototype.content=g;function k(F){var H=new Error(y.source+":"+x+":"+b+": "+F);if(H.reason=F,H.filename=y.source,H.line=x,H.column=b,H.source=g,!y.silent)throw H}function I(F){var H=F.exec(g);if(H){var Q=H[0];return _(Q),g=g.slice(Q.length),H}}function R(){I(n)}function D(F){var H;for(F=F||[];H=L();)H!==!1&&F.push(H);return F}function L(){var F=E();if(!(l!=g.charAt(0)||c!=g.charAt(1))){for(var H=2;f!=g.charAt(H)&&(c!=g.charAt(H)||l!=g.charAt(H+1));)++H;if(H+=2,f===g.charAt(H-1))return k("End of comment missing");var Q=g.slice(2,H-2);return b+=2,_(Q),g=g.slice(H),b+=2,F({type:d,comment:Q})}}function M(){var F=E(),H=I(r);if(H){if(L(),!I(i))return k("property missing ':'");var Q=I(s),J=F({type:h,property:p(H[0].replace(e,f)),value:Q?p(Q[0].replace(e,f)):f});return I(o),J}}function z(){var F=[];D(F);for(var H;H=M();)H!==!1&&(F.push(H),D(F));return F}return R(),z()};function p(g){return g?g.replace(a,f):f}return h8}var Ste;function i7e(){if(Ste)return j2;Ste=1;var e=j2.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(j2,"__esModule",{value:!0});var t=e(r7e());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),a=typeof i=="function";return o.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;a?i(l,c,u):c&&(s=s||{},s[l]=c)}}),s}return j2.default=n,j2}var s7e=i7e();const Cte=qc(s7e),o7e=Cte.default||Cte,W$=L0e("end"),zp=L0e("start");function L0e(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function a7e(e){const t=zp(e),n=W$(e);if(t&&n)return{start:t,end:n}}function mA(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Ate(e.position):"start"in e||"end"in e?Ate(e):"line"in e||"column"in e?jj(e):""}function jj(e){return kte(e&&e.line)+":"+kte(e&&e.column)}function Ate(e){return jj(e&&e.start)+"-"+jj(e&&e.end)}function kte(e){return e&&typeof e=="number"?e:1}class fu extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=mA(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}fu.prototype.file="";fu.prototype.name="";fu.prototype.reason="";fu.prototype.message="";fu.prototype.stack="";fu.prototype.column=void 0;fu.prototype.line=void 0;fu.prototype.ancestors=void 0;fu.prototype.cause=void 0;fu.prototype.fatal=void 0;fu.prototype.place=void 0;fu.prototype.ruleId=void 0;fu.prototype.source=void 0;const Nq={}.hasOwnProperty,u7e=new Map,l7e=/[A-Z]/g,c7e=/-([a-z])/g,f7e=new Set(["table","tbody","thead","tfoot","tr"]),d7e=new Set(["td","th"]),M0e="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function h7e(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=w7e(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=x7e(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?m1:xI,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=F0e(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function F0e(e,t,n){if(t.type==="element")return p7e(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return m7e(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return y7e(e,t,n);if(t.type==="mdxjsEsm")return g7e(e,t);if(t.type==="root")return v7e(e,t,n);if(t.type==="text")return b7e(e,t)}function p7e(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=m1,e.schema=i),e.ancestors.push(t);const s=j0e(e,t.tagName,!1),o=_7e(e,t);let a=$q(e,t);return f7e.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!Gje(u):!0})),B0e(e,o,s,t),Oq(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function m7e(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}tk(e,t.position)}function g7e(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);tk(e,t.position)}function y7e(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=m1,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:j0e(e,t.name,!0),o=E7e(e,t),a=$q(e,t);return B0e(e,o,s,t),Oq(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function v7e(e,t,n){const r={};return Oq(r,$q(e,t)),e.create(t,e.Fragment,r,n)}function b7e(e,t){return t.value}function B0e(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Oq(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function x7e(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function w7e(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=zp(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function _7e(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&Nq.call(t.properties,i)){const s=T7e(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&d7e.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function E7e(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else tk(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else tk(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function $q(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:u7e;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=F0e(e,s,o);a!==void 0&&n.push(a)}return n}function T7e(e,t,n){const r=q$(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?C0e(n):$0e(n)),r.property==="style"){let i=typeof n=="object"?n:S7e(e,String(n));return e.stylePropertyNameCase==="css"&&(i=C7e(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?n7e[r.property]||r.property:r.attribute,n]}}function S7e(e,t){const n={};try{o7e(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new fu("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=M0e+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(c7e,k7e)),n[o]=s}}function j0e(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=bte(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=bte(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return Nq.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);tk(e)}function tk(e,t){const n=new fu("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=M0e+"#cannot-handle-mdx-estrees-without-createevaluater",n}function C7e(e){const t={};let n;for(n in e)Nq.call(e,n)&&(t[A7e(n)]=e[n]);return t}function A7e(e){let t=e.replace(l7e,I7e);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function k7e(e,t){return t.toUpperCase()}function I7e(e){return"-"+e.toLowerCase()}const p8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},R7e={};function P7e(e,t){const n=R7e,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return U0e(e,r,i)}function U0e(e,t,n){if(D7e(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Ite(e.children,t,n)}return Array.isArray(e)?Ite(e,t,n):""}function Ite(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=U0e(e[i],t,n);return r.join("")}function D7e(e){return!!(e&&typeof e=="object")}const Rte=document.createElement("i");function Lq(e){const t="&"+e+";";Rte.innerHTML=t;const n=Rte.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function C0(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function mf(e,t){return e.length>0?(C0(e,e.length,0,t),e):t}const Pte={}.hasOwnProperty;function N7e(e){const t={};let n=-1;for(;++n<e.length;)O7e(t,e[n]);return t}function O7e(e,t){let n;for(n in t){const i=(Pte.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Pte.call(i,o)||(i[o]=[]);const a=s[o];$7e(i[o],Array.isArray(a)?a:a?[a]:[])}}}function $7e(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);C0(e,0,0,r)}function z0e(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function rE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Xh=g1(/[A-Za-z]/),_c=g1(/[\dA-Za-z]/),L7e=g1(/[#-'*+\--9=?A-Z^-~]/);function Uj(e){return e!==null&&(e<32||e===127)}const zj=g1(/\d/),M7e=g1(/[\dA-Fa-f]/),F7e=g1(/[!-/:-@[-`{-~]/);function Rn(e){return e!==null&&e<-2}function Dl(e){return e!==null&&(e<0||e===32)}function Yr(e){return e===-2||e===-1||e===32}const B7e=g1(new RegExp("\\p{P}|\\p{S}","u")),j7e=g1(/\s/);function g1(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function HT(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&_c(e.charCodeAt(n+1))&&_c(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ki(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Yr(u)?(e.enter(n),a(u)):t(u)}function a(u){return Yr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const U7e={tokenize:z7e};function z7e(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ki(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Rn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const V7e={tokenize:H7e},Dte={tokenize:q7e};function H7e(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const E=t.events.length;let T=E,k;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){k=t.events[T][1].end;break}x(r);let I=E;for(;I<t.events.length;)t.events[I][1].end=Object.assign({},k),I++;return C0(t.events,T+1,0,t.events.slice(E)),t.events.length=I,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Dte,c,f)(_)}function c(_){return i&&b(),x(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(Dte,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&b(),x(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),g(_)}function g(_){if(_===null){y(e.exit("chunkFlow"),!0),x(0),e.consume(_);return}return Rn(_)?(e.consume(_),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),g)}function y(_,E){const T=t.sliceStream(_);if(E&&T.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(T),t.parser.lazy[_.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<o&&(!i.events[k][1].end||i.events[k][1].end.offset>o))return;const I=t.events.length;let R=I,D,L;for(;R--;)if(t.events[R][0]==="exit"&&t.events[R][1].type==="chunkFlow"){if(D){L=t.events[R][1].end;break}D=!0}for(x(r),k=I;k<t.events.length;)t.events[k][1].end=Object.assign({},L),k++;C0(t.events,R+1,0,t.events.slice(I)),t.events.length=k}}function x(_){let E=n.length;for(;E-- >_;){const T=n[E];t.containerState=T[1],T[0].exit.call(t,e)}n.length=_}function b(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function q7e(e,t,n){return ki(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Nte(e){if(e===null||Dl(e)||j7e(e))return 1;if(B7e(e))return 2}function Mq(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Vj={name:"attention",tokenize:G7e,resolveAll:W7e};function W7e(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Ote(f,-u),Ote(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=mf(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=mf(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=mf(l,Mq(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=mf(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=mf(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,C0(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function G7e(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Nte(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Nte(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Ote(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Y7e={name:"autolink",tokenize:K7e};function K7e(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Xh(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||_c(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||_c(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||Uj(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):L7e(h)?(e.consume(h),l):n(h)}function c(h){return _c(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||_c(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const G$={tokenize:X7e,partial:!0};function X7e(e,t,n){return r;function r(s){return Yr(s)?ki(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Rn(s)?t(s):n(s)}}const V0e={name:"blockQuote",tokenize:Q7e,continuation:{tokenize:J7e},exit:Z7e};function Q7e(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Yr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function J7e(e,t,n){const r=this;return i;function i(o){return Yr(o)?ki(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(V0e,t,n)(o)}}function Z7e(e){e.exit("blockQuote")}const H0e={name:"characterEscape",tokenize:eUe};function eUe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return F7e(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const q0e={name:"characterReference",tokenize:tUe};function tUe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=_c,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=M7e,c):(e.enter("characterReferenceValue"),s=7,o=zj,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===_c&&!Lq(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const $te={tokenize:rUe,partial:!0},Lte={name:"codeFenced",tokenize:nUe,concrete:!0};function nUe(e,t,n){const r=this,i={tokenize:T,partial:!0};let s=0,o=0,a;return u;function u(k){return l(k)}function l(k){const I=r.events[r.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,a=k,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(k)}function c(k){return k===a?(o++,e.consume(k),c):o<3?n(k):(e.exit("codeFencedFenceSequence"),Yr(k)?ki(e,f,"whitespace")(k):f(k))}function f(k){return k===null||Rn(k)?(e.exit("codeFencedFence"),r.interrupt?t(k):e.check($te,g,E)(k)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(k))}function d(k){return k===null||Rn(k)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(k)):Yr(k)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ki(e,h,"whitespace")(k)):k===96&&k===a?n(k):(e.consume(k),d)}function h(k){return k===null||Rn(k)?f(k):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(k))}function p(k){return k===null||Rn(k)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(k)):k===96&&k===a?n(k):(e.consume(k),p)}function g(k){return e.attempt(i,E,y)(k)}function y(k){return e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),x}function x(k){return s>0&&Yr(k)?ki(e,b,"linePrefix",s+1)(k):b(k)}function b(k){return k===null||Rn(k)?e.check($te,g,E)(k):(e.enter("codeFlowValue"),_(k))}function _(k){return k===null||Rn(k)?(e.exit("codeFlowValue"),b(k)):(e.consume(k),_)}function E(k){return e.exit("codeFenced"),t(k)}function T(k,I,R){let D=0;return L;function L(Q){return k.enter("lineEnding"),k.consume(Q),k.exit("lineEnding"),M}function M(Q){return k.enter("codeFencedFence"),Yr(Q)?ki(k,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Q):z(Q)}function z(Q){return Q===a?(k.enter("codeFencedFenceSequence"),F(Q)):R(Q)}function F(Q){return Q===a?(D++,k.consume(Q),F):D>=o?(k.exit("codeFencedFenceSequence"),Yr(Q)?ki(k,H,"whitespace")(Q):H(Q)):R(Q)}function H(Q){return Q===null||Rn(Q)?(k.exit("codeFencedFence"),I(Q)):R(Q)}}}function rUe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const m8={name:"codeIndented",tokenize:sUe},iUe={tokenize:oUe,partial:!0};function sUe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ki(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Rn(l)?e.attempt(iUe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Rn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function oUe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Rn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ki(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Rn(o)?i(o):n(o)}}const aUe={name:"codeText",tokenize:cUe,resolve:uUe,previous:lUe};function uUe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function lUe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function cUe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Rn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Rn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class fUe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&U2(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),U2(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),U2(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);U2(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);U2(this.left,n.reverse())}}}function U2(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function W0e(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new fUe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,dUe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return C0(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function dUe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,g=0;const y=[g];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(g=d+1,y.push(g),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):y.pop(),d=y.length;d--;){const x=a.slice(y[d],y[d+1]),b=s.pop();u.push([b,b+x.length-1]),e.splice(b,2,x)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const hUe={tokenize:gUe,resolve:mUe},pUe={tokenize:yUe,partial:!0};function mUe(e){return W0e(e),e}function gUe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Rn(a)?e.check(pUe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function yUe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ki(e,s,"linePrefix")}function s(o){if(o===null||Rn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function G0e(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(x){return x===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(x),e.exit(s),d):x===null||x===32||x===41||Uj(x)?n(x):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),g(x))}function d(x){return x===62?(e.enter(s),e.consume(x),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(x))}function h(x){return x===62?(e.exit("chunkString"),e.exit(a),d(x)):x===null||x===60||Rn(x)?n(x):(e.consume(x),x===92?p:h)}function p(x){return x===60||x===62||x===92?(e.consume(x),h):h(x)}function g(x){return!c&&(x===null||x===41||Dl(x))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(x)):c<l&&x===40?(e.consume(x),c++,g):x===41?(e.consume(x),c--,g):x===null||x===32||x===40||Uj(x)?n(x):(e.consume(x),x===92?y:g)}function y(x){return x===40||x===41||x===92?(e.consume(x),g):g(x)}}function Y0e(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Rn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Rn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Yr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function K0e(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Rn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ki(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Rn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function gA(e,t){let n;return r;function r(i){return Rn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Yr(i)?ki(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const vUe={name:"definition",tokenize:xUe},bUe={tokenize:wUe,partial:!0};function xUe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return Y0e.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=rE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Dl(h)?gA(e,l)(h):l(h)}function l(h){return G0e(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(bUe,f,f)(h)}function f(h){return Yr(h)?ki(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Rn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function wUe(e,t,n){return r;function r(a){return Dl(a)?gA(e,i)(a):n(a)}function i(a){return K0e(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Yr(a)?ki(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Rn(a)?t(a):n(a)}}const _Ue={name:"hardBreakEscape",tokenize:EUe};function EUe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Rn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const TUe={name:"headingAtx",tokenize:CUe,resolve:SUe};function SUe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},C0(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function CUe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Dl(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Rn(c)?(e.exit("atxHeading"),t(c)):Yr(c)?ki(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Dl(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const AUe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Mte=["pre","script","style","textarea"],kUe={name:"htmlFlow",tokenize:DUe,resolveTo:PUe,concrete:!0},IUe={tokenize:OUe,partial:!0},RUe={tokenize:NUe,partial:!0};function PUe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function DUe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(V){return c(V)}function c(V){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(V),f}function f(V){return V===33?(e.consume(V),d):V===47?(e.consume(V),s=!0,g):V===63?(e.consume(V),i=3,r.interrupt?t:q):Xh(V)?(e.consume(V),o=String.fromCharCode(V),y):n(V)}function d(V){return V===45?(e.consume(V),i=2,h):V===91?(e.consume(V),i=5,a=0,p):Xh(V)?(e.consume(V),i=4,r.interrupt?t:q):n(V)}function h(V){return V===45?(e.consume(V),r.interrupt?t:q):n(V)}function p(V){const K="CDATA[";return V===K.charCodeAt(a++)?(e.consume(V),a===K.length?r.interrupt?t:z:p):n(V)}function g(V){return Xh(V)?(e.consume(V),o=String.fromCharCode(V),y):n(V)}function y(V){if(V===null||V===47||V===62||Dl(V)){const K=V===47,ee=o.toLowerCase();return!K&&!s&&Mte.includes(ee)?(i=1,r.interrupt?t(V):z(V)):AUe.includes(o.toLowerCase())?(i=6,K?(e.consume(V),x):r.interrupt?t(V):z(V)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(V):s?b(V):_(V))}return V===45||_c(V)?(e.consume(V),o+=String.fromCharCode(V),y):n(V)}function x(V){return V===62?(e.consume(V),r.interrupt?t:z):n(V)}function b(V){return Yr(V)?(e.consume(V),b):L(V)}function _(V){return V===47?(e.consume(V),L):V===58||V===95||Xh(V)?(e.consume(V),E):Yr(V)?(e.consume(V),_):L(V)}function E(V){return V===45||V===46||V===58||V===95||_c(V)?(e.consume(V),E):T(V)}function T(V){return V===61?(e.consume(V),k):Yr(V)?(e.consume(V),T):_(V)}function k(V){return V===null||V===60||V===61||V===62||V===96?n(V):V===34||V===39?(e.consume(V),u=V,I):Yr(V)?(e.consume(V),k):R(V)}function I(V){return V===u?(e.consume(V),u=null,D):V===null||Rn(V)?n(V):(e.consume(V),I)}function R(V){return V===null||V===34||V===39||V===47||V===60||V===61||V===62||V===96||Dl(V)?T(V):(e.consume(V),R)}function D(V){return V===47||V===62||Yr(V)?_(V):n(V)}function L(V){return V===62?(e.consume(V),M):n(V)}function M(V){return V===null||Rn(V)?z(V):Yr(V)?(e.consume(V),M):n(V)}function z(V){return V===45&&i===2?(e.consume(V),J):V===60&&i===1?(e.consume(V),ne):V===62&&i===4?(e.consume(V),U):V===63&&i===3?(e.consume(V),q):V===93&&i===5?(e.consume(V),ie):Rn(V)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(IUe,X,F)(V)):V===null||Rn(V)?(e.exit("htmlFlowData"),F(V)):(e.consume(V),z)}function F(V){return e.check(RUe,H,X)(V)}function H(V){return e.enter("lineEnding"),e.consume(V),e.exit("lineEnding"),Q}function Q(V){return V===null||Rn(V)?F(V):(e.enter("htmlFlowData"),z(V))}function J(V){return V===45?(e.consume(V),q):z(V)}function ne(V){return V===47?(e.consume(V),o="",Z):z(V)}function Z(V){if(V===62){const K=o.toLowerCase();return Mte.includes(K)?(e.consume(V),U):z(V)}return Xh(V)&&o.length<8?(e.consume(V),o+=String.fromCharCode(V),Z):z(V)}function ie(V){return V===93?(e.consume(V),q):z(V)}function q(V){return V===62?(e.consume(V),U):V===45&&i===2?(e.consume(V),q):z(V)}function U(V){return V===null||Rn(V)?(e.exit("htmlFlowData"),X(V)):(e.consume(V),U)}function X(V){return e.exit("htmlFlow"),t(V)}}function NUe(e,t,n){const r=this;return i;function i(o){return Rn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function OUe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(G$,t,n)}}const $Ue={name:"htmlText",tokenize:LUe};function LUe(e,t,n){const r=this;let i,s,o;return a;function a(q){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(q),u}function u(q){return q===33?(e.consume(q),l):q===47?(e.consume(q),T):q===63?(e.consume(q),_):Xh(q)?(e.consume(q),R):n(q)}function l(q){return q===45?(e.consume(q),c):q===91?(e.consume(q),s=0,p):Xh(q)?(e.consume(q),b):n(q)}function c(q){return q===45?(e.consume(q),h):n(q)}function f(q){return q===null?n(q):q===45?(e.consume(q),d):Rn(q)?(o=f,ne(q)):(e.consume(q),f)}function d(q){return q===45?(e.consume(q),h):f(q)}function h(q){return q===62?J(q):q===45?d(q):f(q)}function p(q){const U="CDATA[";return q===U.charCodeAt(s++)?(e.consume(q),s===U.length?g:p):n(q)}function g(q){return q===null?n(q):q===93?(e.consume(q),y):Rn(q)?(o=g,ne(q)):(e.consume(q),g)}function y(q){return q===93?(e.consume(q),x):g(q)}function x(q){return q===62?J(q):q===93?(e.consume(q),x):g(q)}function b(q){return q===null||q===62?J(q):Rn(q)?(o=b,ne(q)):(e.consume(q),b)}function _(q){return q===null?n(q):q===63?(e.consume(q),E):Rn(q)?(o=_,ne(q)):(e.consume(q),_)}function E(q){return q===62?J(q):_(q)}function T(q){return Xh(q)?(e.consume(q),k):n(q)}function k(q){return q===45||_c(q)?(e.consume(q),k):I(q)}function I(q){return Rn(q)?(o=I,ne(q)):Yr(q)?(e.consume(q),I):J(q)}function R(q){return q===45||_c(q)?(e.consume(q),R):q===47||q===62||Dl(q)?D(q):n(q)}function D(q){return q===47?(e.consume(q),J):q===58||q===95||Xh(q)?(e.consume(q),L):Rn(q)?(o=D,ne(q)):Yr(q)?(e.consume(q),D):J(q)}function L(q){return q===45||q===46||q===58||q===95||_c(q)?(e.consume(q),L):M(q)}function M(q){return q===61?(e.consume(q),z):Rn(q)?(o=M,ne(q)):Yr(q)?(e.consume(q),M):D(q)}function z(q){return q===null||q===60||q===61||q===62||q===96?n(q):q===34||q===39?(e.consume(q),i=q,F):Rn(q)?(o=z,ne(q)):Yr(q)?(e.consume(q),z):(e.consume(q),H)}function F(q){return q===i?(e.consume(q),i=void 0,Q):q===null?n(q):Rn(q)?(o=F,ne(q)):(e.consume(q),F)}function H(q){return q===null||q===34||q===39||q===60||q===61||q===96?n(q):q===47||q===62||Dl(q)?D(q):(e.consume(q),H)}function Q(q){return q===47||q===62||Dl(q)?D(q):n(q)}function J(q){return q===62?(e.consume(q),e.exit("htmlTextData"),e.exit("htmlText"),t):n(q)}function ne(q){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(q),e.exit("lineEnding"),Z}function Z(q){return Yr(q)?ki(e,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):ie(q)}function ie(q){return e.enter("htmlTextData"),o(q)}}const Fq={name:"labelEnd",tokenize:zUe,resolveTo:UUe,resolveAll:jUe},MUe={tokenize:VUe},FUe={tokenize:HUe},BUe={tokenize:qUe};function jUe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function UUe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=mf(a,e.slice(s+1,s+r+3)),a=mf(a,[["enter",c,t]]),a=mf(a,Mq(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=mf(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=mf(a,e.slice(o+1)),a=mf(a,[["exit",u,t]]),C0(e,s,e.length,a),e}function zUe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(rE(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(MUe,c,o?c:f)(d):d===91?e.attempt(FUe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(BUe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function VUe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Dl(f)?gA(e,s)(f):s(f)}function s(f){return f===41?c(f):G0e(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Dl(f)?gA(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?K0e(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Dl(f)?gA(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function HUe(e,t,n){const r=this;return i;function i(a){return Y0e.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(rE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function qUe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const WUe={name:"labelStartImage",tokenize:GUe,resolveAll:Fq.resolveAll};function GUe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const YUe={name:"labelStartLink",tokenize:KUe,resolveAll:Fq.resolveAll};function KUe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const g8={name:"lineEnding",tokenize:XUe};function XUe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ki(e,t,"linePrefix")}}const t3={name:"thematicBreak",tokenize:QUe};function QUe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Rn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Yr(l)?ki(e,a,"whitespace")(l):a(l))}}const xl={name:"list",tokenize:eze,continuation:{tokenize:tze},exit:rze},JUe={tokenize:ize,partial:!0},ZUe={tokenize:nze,partial:!0};function eze(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:zj(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(t3,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return zj(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(G$,r.interrupt?n:c,e.attempt(JUe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return Yr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function tze(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(G$,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ki(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Yr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(ZUe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ki(e,e.attempt(xl,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function nze(e,t,n){const r=this;return ki(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function rze(e){e.exit(this.containerState.type)}function ize(e,t,n){const r=this;return ki(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Yr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Fte={name:"setextUnderline",tokenize:oze,resolveTo:sze};function sze(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function oze(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Yr(l)?ki(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Rn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const aze={tokenize:uze};function uze(e){const t=this,n=e.attempt(G$,r,e.attempt(this.parser.constructs.flowInitial,i,ki(e,e.attempt(this.parser.constructs.flow,i,e.attempt(hUe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const lze={resolveAll:Q0e()},cze=X0e("string"),fze=X0e("text");function X0e(e){return{tokenize:t,resolveAll:Q0e(e==="text"?dze:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Q0e(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function dze(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function hze(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:b,enter:_,exit:E,attempt:I(T),check:I(k),interrupt:I(k,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:g,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(M){return o=mf(o,M),y(),o[o.length-1]!==null?[]:(R(t,0),l.events=Mq(s,l.events,l),l.events)}function d(M,z){return mze(h(M),z)}function h(M){return pze(o,M)}function p(){const{line:M,column:z,offset:F,_index:H,_bufferIndex:Q}=r;return{line:M,column:z,offset:F,_index:H,_bufferIndex:Q}}function g(M){i[M.line]=M.column,L()}function y(){let M;for(;r._index<o.length;){const z=o[r._index];if(typeof z=="string")for(M=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===M&&r._bufferIndex<z.length;)x(z.charCodeAt(r._bufferIndex));else x(z)}}function x(M){c=c(M)}function b(M){Rn(M)?(r.line++,r.column=1,r.offset+=M===-3?2:1,L()):M!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=M}function _(M,z){const F=z||{};return F.type=M,F.start=p(),l.events.push(["enter",F,l]),a.push(F),F}function E(M){const z=a.pop();return z.end=p(),l.events.push(["exit",z,l]),z}function T(M,z){R(M,z.from)}function k(M,z){z.restore()}function I(M,z){return F;function F(H,Q,J){let ne,Z,ie,q;return Array.isArray(H)?X(H):"tokenize"in H?X([H]):U(H);function U(fe){return Ee;function Ee(ye){const _e=ye!==null&&fe[ye],De=ye!==null&&fe.null,me=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(De)?De:De?[De]:[]];return X(me)(ye)}}function X(fe){return ne=fe,Z=0,fe.length===0?J:V(fe[Z])}function V(fe){return Ee;function Ee(ye){return q=D(),ie=fe,fe.partial||(l.currentConstruct=fe),fe.name&&l.parser.constructs.disable.null.includes(fe.name)?ee():fe.tokenize.call(z?Object.assign(Object.create(l),z):l,u,K,ee)(ye)}}function K(fe){return M(ie,q),Q}function ee(fe){return q.restore(),++Z<ne.length?V(ne[Z]):J}}}function R(M,z){M.resolveAll&&!s.includes(M)&&s.push(M),M.resolve&&C0(l.events,z,l.events.length-z,M.resolve(l.events.slice(z),l)),M.resolveTo&&(l.events=M.resolveTo(l.events,l))}function D(){const M=p(),z=l.previous,F=l.currentConstruct,H=l.events.length,Q=Array.from(a);return{restore:J,from:H};function J(){r=M,l.previous=z,l.currentConstruct=F,l.events.length=H,a=Q,L()}}function L(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function pze(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function mze(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const gze={42:xl,43:xl,45:xl,48:xl,49:xl,50:xl,51:xl,52:xl,53:xl,54:xl,55:xl,56:xl,57:xl,62:V0e},yze={91:vUe},vze={[-2]:m8,[-1]:m8,32:m8},bze={35:TUe,42:t3,45:[Fte,t3],60:kUe,61:Fte,95:t3,96:Lte,126:Lte},xze={38:q0e,92:H0e},wze={[-5]:g8,[-4]:g8,[-3]:g8,33:WUe,38:q0e,42:Vj,60:[Y7e,$Ue],91:YUe,92:[_Ue,H0e],93:Fq,95:Vj,96:aUe},_ze={null:[Vj,lze]},Eze={null:[42,95]},Tze={null:[]},Sze=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Eze,contentInitial:yze,disable:Tze,document:gze,flow:bze,flowInitial:vze,insideSpan:_ze,string:xze,text:wze},Symbol.toStringTag,{value:"Module"}));function Cze(e){const n=N7e([Sze,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(U7e),document:i(V7e),flow:i(aze),string:i(cze),text:i(fze)};return r;function i(s){return o;function o(a){return hze(r,s,a)}}}function Aze(e){for(;!W0e(e););return e}const Bte=/[\0\t\n\r]/g;function kze(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Bte.lastIndex=f,l=Bte.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Ize=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Rze(e){return e.replace(Ize,Pze)}function Pze(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return z0e(n.slice(s?2:1),s?16:10)}return Lq(n)||e}const J0e={}.hasOwnProperty;function Dze(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Nze(n)(Aze(Cze(n).document().write(kze()(e,t,!0))))}function Nze(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ut),autolinkProtocol:D,autolinkEmail:D,atxHeading:s(Ze),blockQuote:s(De),characterEscape:D,characterReference:D,codeFenced:s(me),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(me,o),codeText:s(de,o),codeTextData:D,data:D,codeFlowValue:D,definition:s($e),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Pe),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(Ge,o),htmlFlowData:D,htmlText:s(Ge,o),htmlTextData:D,image:s(et),label:o,link:s(ut),listItem:s(xt),listItemValue:d,listOrdered:s(Tt,f),listUnordered:s(Tt),paragraph:s(Dt),reference:V,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ze),strong:s(Ue),thematicBreak:s(tn)},exit:{atxHeading:u(),atxHeadingSequence:T,autolink:u(),autolinkEmail:_e,autolinkProtocol:ye,blockQuote:u(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:ee,characterReferenceMarkerNumeric:ee,characterReferenceValue:fe,characterReference:Ee,codeFenced:u(y),codeFencedFence:g,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:L,codeIndented:u(x),codeText:u(Q),codeTextData:L,data:L,definition:u(),definitionDestinationString:E,definitionLabelString:b,definitionTitleString:_,emphasis:u(),hardBreakEscape:u(z),hardBreakTrailing:u(z),htmlFlow:u(F),htmlFlowData:L,htmlText:u(H),htmlTextData:L,image:u(ne),label:ie,labelText:Z,lineEnding:M,link:u(J),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:K,resourceDestinationString:q,resourceTitleString:U,resource:X,setextHeading:u(R),setextHeadingLineSequence:I,setextHeadingText:k,strong:u(),thematicBreak:u()}};Z0e(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Re){let Ve={type:"root",children:[]};const yt={stack:[Ve],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},$t=[];let Bt=-1;for(;++Bt<Re.length;)if(Re[Bt][1].type==="listOrdered"||Re[Bt][1].type==="listUnordered")if(Re[Bt][0]==="enter")$t.push(Bt);else{const dn=$t.pop();Bt=i(Re,dn,Bt)}for(Bt=-1;++Bt<Re.length;){const dn=t[Re[Bt][0]];J0e.call(dn,Re[Bt][1].type)&&dn[Re[Bt][1].type].call(Object.assign({sliceSerialize:Re[Bt][2].sliceSerialize},yt),Re[Bt][1])}if(yt.tokenStack.length>0){const dn=yt.tokenStack[yt.tokenStack.length-1];(dn[1]||jte).call(yt,void 0,dn[0])}for(Ve.position={start:Fg(Re.length>0?Re[0][1].start:{line:1,column:1,offset:0}),end:Fg(Re.length>0?Re[Re.length-2][1].end:{line:1,column:1,offset:0})},Bt=-1;++Bt<t.transforms.length;)Ve=t.transforms[Bt](Ve)||Ve;return Ve}function i(Re,Ve,yt){let $t=Ve-1,Bt=-1,dn=!1,Nn,dr,ti,kn;for(;++$t<=yt;){const Bn=Re[$t];switch(Bn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Bn[0]==="enter"?Bt++:Bt--,kn=void 0;break}case"lineEndingBlank":{Bn[0]==="enter"&&(Nn&&!kn&&!Bt&&!ti&&(ti=$t),kn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:kn=void 0}if(!Bt&&Bn[0]==="enter"&&Bn[1].type==="listItemPrefix"||Bt===-1&&Bn[0]==="exit"&&(Bn[1].type==="listUnordered"||Bn[1].type==="listOrdered")){if(Nn){let Xr=$t;for(dr=void 0;Xr--;){const ir=Re[Xr];if(ir[1].type==="lineEnding"||ir[1].type==="lineEndingBlank"){if(ir[0]==="exit")continue;dr&&(Re[dr][1].type="lineEndingBlank",dn=!0),ir[1].type="lineEnding",dr=Xr}else if(!(ir[1].type==="linePrefix"||ir[1].type==="blockQuotePrefix"||ir[1].type==="blockQuotePrefixWhitespace"||ir[1].type==="blockQuoteMarker"||ir[1].type==="listItemIndent"))break}ti&&(!dr||ti<dr)&&(Nn._spread=!0),Nn.end=Object.assign({},dr?Re[dr][1].start:Bn[1].end),Re.splice(dr||$t,0,["exit",Nn,Bn[2]]),$t++,yt++}if(Bn[1].type==="listItemPrefix"){const Xr={type:"listItem",_spread:!1,start:Object.assign({},Bn[1].start),end:void 0};Nn=Xr,Re.splice($t,0,["enter",Xr,Bn[2]]),$t++,yt++,ti=void 0,kn=!0}}}return Re[Ve][1]._spread=dn,yt}function s(Re,Ve){return yt;function yt($t){a.call(this,Re($t),$t),Ve&&Ve.call(this,$t)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Re,Ve,yt){this.stack[this.stack.length-1].children.push(Re),this.stack.push(Re),this.tokenStack.push([Ve,yt]),Re.position={start:Fg(Ve.start),end:void 0}}function u(Re){return Ve;function Ve(yt){Re&&Re.call(this,yt),l.call(this,yt)}}function l(Re,Ve){const yt=this.stack.pop(),$t=this.tokenStack.pop();if($t)$t[0].type!==Re.type&&(Ve?Ve.call(this,Re,$t[0]):($t[1]||jte).call(this,Re,$t[0]));else throw new Error("Cannot close `"+Re.type+"` ("+mA({start:Re.start,end:Re.end})+"): it’s not open");yt.position.end=Fg(Re.end)}function c(){return P7e(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(Re){if(this.data.expectingFirstListItemValue){const Ve=this.stack[this.stack.length-2];Ve.start=Number.parseInt(this.sliceSerialize(Re),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Re=this.resume(),Ve=this.stack[this.stack.length-1];Ve.lang=Re}function p(){const Re=this.resume(),Ve=this.stack[this.stack.length-1];Ve.meta=Re}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const Re=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Re.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const Re=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Re.replace(/(\r?\n|\r)$/g,"")}function b(Re){const Ve=this.resume(),yt=this.stack[this.stack.length-1];yt.label=Ve,yt.identifier=rE(this.sliceSerialize(Re)).toLowerCase()}function _(){const Re=this.resume(),Ve=this.stack[this.stack.length-1];Ve.title=Re}function E(){const Re=this.resume(),Ve=this.stack[this.stack.length-1];Ve.url=Re}function T(Re){const Ve=this.stack[this.stack.length-1];if(!Ve.depth){const yt=this.sliceSerialize(Re).length;Ve.depth=yt}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function I(Re){const Ve=this.stack[this.stack.length-1];Ve.depth=this.sliceSerialize(Re).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function D(Re){const yt=this.stack[this.stack.length-1].children;let $t=yt[yt.length-1];(!$t||$t.type!=="text")&&($t=Ft(),$t.position={start:Fg(Re.start),end:void 0},yt.push($t)),this.stack.push($t)}function L(Re){const Ve=this.stack.pop();Ve.value+=this.sliceSerialize(Re),Ve.position.end=Fg(Re.end)}function M(Re){const Ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const yt=Ve.children[Ve.children.length-1];yt.position.end=Fg(Re.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ve.type)&&(D.call(this,Re),L.call(this,Re))}function z(){this.data.atHardBreak=!0}function F(){const Re=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Re}function H(){const Re=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Re}function Q(){const Re=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Re}function J(){const Re=this.stack[this.stack.length-1];if(this.data.inReference){const Ve=this.data.referenceType||"shortcut";Re.type+="Reference",Re.referenceType=Ve,delete Re.url,delete Re.title}else delete Re.identifier,delete Re.label;this.data.referenceType=void 0}function ne(){const Re=this.stack[this.stack.length-1];if(this.data.inReference){const Ve=this.data.referenceType||"shortcut";Re.type+="Reference",Re.referenceType=Ve,delete Re.url,delete Re.title}else delete Re.identifier,delete Re.label;this.data.referenceType=void 0}function Z(Re){const Ve=this.sliceSerialize(Re),yt=this.stack[this.stack.length-2];yt.label=Rze(Ve),yt.identifier=rE(Ve).toLowerCase()}function ie(){const Re=this.stack[this.stack.length-1],Ve=this.resume(),yt=this.stack[this.stack.length-1];if(this.data.inReference=!0,yt.type==="link"){const $t=Re.children;yt.children=$t}else yt.alt=Ve}function q(){const Re=this.resume(),Ve=this.stack[this.stack.length-1];Ve.url=Re}function U(){const Re=this.resume(),Ve=this.stack[this.stack.length-1];Ve.title=Re}function X(){this.data.inReference=void 0}function V(){this.data.referenceType="collapsed"}function K(Re){const Ve=this.resume(),yt=this.stack[this.stack.length-1];yt.label=Ve,yt.identifier=rE(this.sliceSerialize(Re)).toLowerCase(),this.data.referenceType="full"}function ee(Re){this.data.characterReferenceType=Re.type}function fe(Re){const Ve=this.sliceSerialize(Re),yt=this.data.characterReferenceType;let $t;yt?($t=z0e(Ve,yt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):$t=Lq(Ve);const Bt=this.stack[this.stack.length-1];Bt.value+=$t}function Ee(Re){const Ve=this.stack.pop();Ve.position.end=Fg(Re.end)}function ye(Re){L.call(this,Re);const Ve=this.stack[this.stack.length-1];Ve.url=this.sliceSerialize(Re)}function _e(Re){L.call(this,Re);const Ve=this.stack[this.stack.length-1];Ve.url="mailto:"+this.sliceSerialize(Re)}function De(){return{type:"blockquote",children:[]}}function me(){return{type:"code",lang:null,meta:null,value:""}}function de(){return{type:"inlineCode",value:""}}function $e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Pe(){return{type:"emphasis",children:[]}}function Ze(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function Ge(){return{type:"html",value:""}}function et(){return{type:"image",title:null,url:"",alt:null}}function ut(){return{type:"link",title:null,url:"",children:[]}}function Tt(Re){return{type:"list",ordered:Re.type==="listOrdered",start:null,spread:Re._spread,children:[]}}function xt(Re){return{type:"listItem",spread:Re._spread,checked:null,children:[]}}function Dt(){return{type:"paragraph",children:[]}}function Ue(){return{type:"strong",children:[]}}function Ft(){return{type:"text",value:""}}function tn(){return{type:"thematicBreak"}}}function Fg(e){return{line:e.line,column:e.column,offset:e.offset}}function Z0e(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Z0e(e,r):Oze(e,r)}}function Oze(e,t){let n;for(n in t)if(J0e.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function jte(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+mA({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+mA({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+mA({start:t.start,end:t.end})+") is still open")}function $ze(e){const t=this;t.parser=n;function n(r){return Dze(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Lze(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Mze(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Fze(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Bze(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jze(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Uze(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=HT(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function zze(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Vze(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function ege(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Hze(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ege(e,t);const i={src:HT(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function qze(e,t){const n={src:HT(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Wze(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Gze(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ege(e,t);const i={href:HT(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Yze(e,t){const n={href:HT(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Kze(e,t,n){const r=e.all(t),i=n?Xze(n):tge(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function Xze(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=tge(n[r])}return t}function tge(e){const t=e.spread;return t??e.children.length>1}function Qze(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Jze(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Zze(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function eVe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function tVe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=zp(t.children[1]),u=W$(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function nVe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function rVe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Ute=9,zte=32;function iVe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Vte(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Vte(t.slice(i),i>0,!1)),s.join("")}function Vte(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Ute||s===zte;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Ute||s===zte;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function sVe(e,t){const n={type:"text",value:iVe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function oVe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const aVe={blockquote:Lze,break:Mze,code:Fze,delete:Bze,emphasis:jze,footnoteReference:Uze,heading:zze,html:Vze,imageReference:Hze,image:qze,inlineCode:Wze,linkReference:Gze,link:Yze,listItem:Kze,list:Qze,paragraph:Jze,root:Zze,strong:eVe,table:tVe,tableCell:rVe,tableRow:nVe,text:sVe,thematicBreak:oVe,toml:YP,yaml:YP,definition:YP,footnoteDefinition:YP};function YP(){}const nge=-1,Y$=0,UO=1,zO=2,Bq=3,jq=4,Uq=5,zq=6,rge=7,ige=8,Hte=typeof self=="object"?self:globalThis,uVe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case Y$:case nge:return n(o,i);case UO:{const a=n([],i);for(const u of o)a.push(r(u));return a}case zO:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case Bq:return n(new Date(o),i);case jq:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case Uq:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case zq:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case rge:{const{name:a,message:u}=o;return n(new Hte[a](u),i)}case ige:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Hte[s](o),i)};return r},qte=e=>uVe(new Map,e)(0),l_="",{toString:lVe}={},{keys:cVe}=Object,z2=e=>{const t=typeof e;if(t!=="object"||!e)return[Y$,t];const n=lVe.call(e).slice(8,-1);switch(n){case"Array":return[UO,l_];case"Object":return[zO,l_];case"Date":return[Bq,l_];case"RegExp":return[jq,l_];case"Map":return[Uq,l_];case"Set":return[zq,l_]}return n.includes("Array")?[UO,n]:n.includes("Error")?[rge,n]:[zO,n]},KP=([e,t])=>e===Y$&&(t==="function"||t==="symbol"),fVe=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=z2(o);switch(a){case Y$:{let c=o;switch(u){case"bigint":a=ige,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([nge],o)}return i([a,c],o)}case UO:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case zO:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of cVe(o))(e||!KP(z2(o[d])))&&c.push([s(d),s(o[d])]);return f}case Bq:return i([a,o.toISOString()],o);case jq:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case Uq:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(KP(z2(d))||KP(z2(h))))&&c.push([s(d),s(h)]);return f}case zq:{const c=[],f=i([a,c],o);for(const d of o)(e||!KP(z2(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Wte=(e,{json:t,lossy:n}={})=>{const r=[];return fVe(!(t||n),!!t,new Map,r)(e),r},RE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?qte(Wte(e,t)):structuredClone(e):(e,t)=>qte(Wte(e,t));function dVe(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function hVe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function pVe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||dVe,r=e.options.footnoteBackLabel||hVe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=HT(f.toLowerCase());let h=0;const p=[],g=e.footnoteCounts.get(f);for(;g!==void 0&&++h<=g;){p.length>0&&p.push({type:"text",value:" "});let b=typeof n=="string"?n:n(u,h);typeof b=="string"&&(b={type:"text",value:b}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const y=c[c.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const b=y.children[y.children.length-1];b&&b.type==="text"?b.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...p)}else c.push(...p);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,x),a.push(x)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...RE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const sge=function(e){if(e==null)return vVe;if(typeof e=="function")return K$(e);if(typeof e=="object")return Array.isArray(e)?mVe(e):gVe(e);if(typeof e=="string")return yVe(e);throw new Error("Expected function, string, or object as test")};function mVe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=sge(e[n]);return K$(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function gVe(e){const t=e;return K$(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function yVe(e){return K$(t);function t(n){return n&&n.type===e}}function K$(e){return t;function t(n,r,i){return!!(bVe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function vVe(){return!0}function bVe(e){return e!==null&&typeof e=="object"&&"type"in e}const oge=[],xVe=!0,Gte=!1,wVe="skip";function _Ve(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=sge(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=oge,p,g,y;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=EVe(n(u,c)),h[0]===Gte))return h;if("children"in u&&u.children){const x=u;if(x.children&&h[0]!==wVe)for(g=(r?x.children.length:-1)+o,y=c.concat(x);g>-1&&g<x.children.length;){const b=x.children[g];if(p=a(b,g,y)(),p[0]===Gte)return p;g=typeof p[1]=="number"?p[1]:g+o}}return h}}}function EVe(e){return Array.isArray(e)?e:typeof e=="number"?[xVe,e]:e==null?oge:[e]}function Vq(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),_Ve(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const Hj={}.hasOwnProperty,TVe={};function SVe(e,t){const n=t||TVe,r=new Map,i=new Map,s=new Map,o={...aVe,...n.handlers},a={all:l,applyData:AVe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:CVe,wrap:IVe};return Vq(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(Hj.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:g,...y}=c,x=RE(y);return x.children=a.all(c),x}return RE(c)}return(a.options.unknownHandler||kVe)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Yte(p.value)),!Array.isArray(p)&&p.type==="element")){const g=p.children[0];g&&g.type==="text"&&(g.value=Yte(g.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function CVe(e,t){e.position&&(t.position=a7e(e))}function AVe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,RE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function kVe(e,t){const n=t.data||{},r="value"in t&&!(Hj.call(n,"hProperties")||Hj.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function IVe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Yte(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Kte(e,t){const n=SVe(e,t),r=n.one(e,void 0),i=pVe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function RVe(e,t){return e&&"run"in e?async function(n,r){const i=Kte(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Kte(n,{file:r,...t||e})}}function Xte(e){if(e)throw e}var y8,Qte;function PVe(){if(Qte)return y8;Qte=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),f=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!f)return!1;var d;for(d in l);return typeof d>"u"||e.call(l,d)},o=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return y8=function u(){var l,c,f,d,h,p,g=arguments[0],y=1,x=arguments.length,b=!1;for(typeof g=="boolean"&&(b=g,g=arguments[1]||{},y=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});y<x;++y)if(l=arguments[y],l!=null)for(c in l)f=a(g,c),d=a(l,c),g!==d&&(b&&d&&(s(d)||(h=i(d)))?(h?(h=!1,p=f&&i(f)?f:[]):p=f&&s(f)?f:{},o(g,{name:c,newValue:u(b,p,d)})):typeof d<"u"&&o(g,{name:c,newValue:d}));return g},y8}var DVe=PVe();const v8=qc(DVe);function qj(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function NVe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?OVe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function OVe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Vh={basename:$Ve,dirname:LVe,extname:MVe,join:FVe,sep:"/"};function $Ve(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');wI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function LVe(e){if(wI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function MVe(e){wI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function FVe(...e){let t=-1,n;for(;++t<e.length;)wI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":BVe(n)}function BVe(e){wI(e);const t=e.codePointAt(0)===47;let n=jVe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function jVe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function wI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const UVe={cwd:zVe};function zVe(){return"/"}function Wj(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function VVe(e){if(typeof e=="string")e=new URL(e);else if(!Wj(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return HVe(e)}function HVe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const b8=["history","path","basename","stem","extname","dirname"];class age{constructor(t){let n;t?Wj(t)?n={path:t}:typeof t=="string"||qVe(t)?n={value:t}:n=t:n={},this.cwd=UVe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<b8.length;){const s=b8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)b8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Vh.basename(this.path):void 0}set basename(t){w8(t,"basename"),x8(t,"basename"),this.path=Vh.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Vh.dirname(this.path):void 0}set dirname(t){Jte(this.basename,"dirname"),this.path=Vh.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Vh.extname(this.path):void 0}set extname(t){if(x8(t,"extname"),Jte(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vh.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Wj(t)&&(t=VVe(t)),w8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Vh.basename(this.path,this.extname):void 0}set stem(t){w8(t,"stem"),x8(t,"stem"),this.path=Vh.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new fu(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function x8(e,t){if(e&&e.includes(Vh.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Vh.sep+"`")}function w8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Jte(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function qVe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const WVe=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},GVe={}.hasOwnProperty;class Hq extends WVe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=NVe()}copy(){const t=new Hq;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(v8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(T8("data",this.frozen),this.namespace[t]=n,this):GVe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(T8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=XP(t),r=this.parser||this.Parser;return _8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),_8("process",this.parser||this.Parser),E8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=XP(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);XVe(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),_8("processSync",this.parser||this.Parser),E8("processSync",this.compiler||this.Compiler),this.process(t,i),ene("processSync","process",n),r;function i(s,o){n=!0,Xte(s),r=o}}run(t,n,r){Zte(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=XP(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),ene("runSync","run",r),i;function s(o,a){Xte(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=XP(n),i=this.compiler||this.Compiler;return E8("stringify",i),Zte(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(T8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=v8(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const g=r[d][1];qj(g)&&qj(h)&&(h=v8(!0,g,h)),r[d]=[l,h,...p]}}}}const YVe=new Hq().freeze();function _8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function E8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function T8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Zte(e){if(!qj(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function ene(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function XP(e){return KVe(e)?e:new age(e)}function KVe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function XVe(e){return typeof e=="string"||QVe(e)}function QVe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const JVe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",tne=[],nne={allowDangerousHtml:!0},ZVe=/^(https?|ircs?|mailto|xmpp)$/i,eHe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function tHe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||tne,u=e.remarkPlugins||tne,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...nne}:nne,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||nHe,h=YVe().use($ze).use(u).use(RVe,l).use(a),p=new age;typeof r=="string"&&(p.value=r);for(const b of eHe)Object.hasOwn(e,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+JVe+b.id,void 0);const g=h.parse(p);let y=h.runSync(g,p);return i&&(y={type:"element",tagName:"div",properties:{className:i},children:y.type==="root"?y.children:[y]}),Vq(y,x),h7e(y,{Fragment:S.Fragment,components:s,ignoreInvalidStyle:!0,jsx:S.jsx,jsxs:S.jsxs,passKeys:!0,passNode:!0});function x(b,_,E){if(b.type==="raw"&&E&&typeof _=="number")return c?E.children.splice(_,1):E.children[_]={type:"text",value:b.value},_;if(b.type==="element"){let T;for(T in p8)if(Object.hasOwn(p8,T)&&Object.hasOwn(b.properties,T)){const k=b.properties[T],I=p8[T];(I===null||I.includes(b.tagName))&&(b.properties[T]=d(String(k||""),T,b))}}if(b.type==="element"){let T=t?!t.includes(b.tagName):o?o.includes(b.tagName):!1;if(!T&&n&&typeof _=="number"&&(T=!n(b,_,E)),T&&E&&typeof _=="number")return f&&b.children?E.children.splice(_,1,...b.children):E.children.splice(_,1),_}}}function nHe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||ZVe.test(e.slice(0,t))?e:""}const rne=/[#.]/g;function rHe(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){rne.lastIndex=i;const a=rne.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const iHe=new Set(["button","menu","reset","submit"]),Gj={}.hasOwnProperty;function uge(e,t,n){const r=n&&uHe(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=rHe(s,t),l.tagName=l.tagName.toLowerCase(),r&&Gj.call(r,l.tagName)&&(l.tagName=r[l.tagName]),sHe(o,l.tagName)){let c;for(c in o)Gj.call(o,c)&&oHe(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)Yj(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function sHe(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?iHe.has(e.type.toLowerCase()):!("value"in e)}function oHe(e,t,n,r){const i=q$(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Ete(r):i.commaSeparated?o=vte(r):i.commaOrSpaceSeparated?o=Ete(vte(r).join(" ")):o=ine(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?aHe(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=ine(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function Yj(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)Yj(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?Yj(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function ine(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||ek(n)===ek(t)))return!0}return n}function aHe(e){const t=[];let n;for(n in e)Gj.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function uHe(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const lHe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],cHe=uge(xI,"div"),fHe=uge(m1,"g",lHe),S8=/\r?\n|\r/g;function dHe(e){const t=String(e),n=[];for(S8.lastIndex=0;S8.test(t);)n.push(S8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const rb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},lge={}.hasOwnProperty,hHe=Object.prototype;function pHe(e,t){const n=t;return qq({file:n.file||void 0,location:!1,schema:n.space==="svg"?m1:xI,verbose:n.verbose||!1},e)}function qq(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},n3(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:cge(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=dHe(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},n3(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},n3(e,r,n),n}default:return n=mHe(e,t),n}}function cge(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=qq(e,t[n]);r.push(i)}return r}function mHe(e,t){const n=e.schema;e.schema=t.namespaceURI===rb.svg?m1:xI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;lge.call(hHe,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?fHe:cHe)(t.tagName,i,cge(e,t.childNodes));if(n3(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&U_(u.startTag),c=u&&u.endTag&&U_(u.endTag),f=qq(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function n3(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=gHe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function gHe(e,t,n){const r=U_(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)lge.call(n.attrs,o)&&(s[q$(e.schema,o).property]=U_(n.attrs[o]));n.startTag;const a=U_(n.startTag),u=n.endTag?U_(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function U_(e){const t=sne({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=sne({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function sne(e){return e.line&&e.column?e:void 0}const one={}.hasOwnProperty;function fge(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&one.call(i,e)){const u=String(i[e]);o=one.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const yHe={}.hasOwnProperty,dge=fge("type",{handlers:{root:bHe,element:THe,text:_He,comment:EHe,doctype:wHe}});function vHe(e,t){const r=t.space;return dge(e,r==="svg"?m1:xI)}function bHe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Wq(e.children,n,t),qT(e,n),n}function xHe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Wq(e.children,n,t),qT(e,n),n}function wHe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return qT(e,t),t}function _He(e){const t={nodeName:"#text",value:e.value,parentNode:null};return qT(e,t),t}function EHe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return qT(e,t),t}function THe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=m1);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&yHe.call(e.properties,s)){const u=SHe(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:rb[o],childNodes:[],parentNode:null};return a.childNodes=Wq(e.children,a,r),qT(e,a),e.tagName==="template"&&e.content&&(a.content=xHe(e.content,r)),a}function SHe(e,t,n){const r=q$(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?C0e(n):$0e(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=rb[r.space]}return i}function Wq(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=dge(e[r],n);s.parentNode=t,i.push(s)}return i}function qT(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const CHe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],AHe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),qi="�";var ce;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(ce=ce||(ce={}));const vl={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function hge(e){return e>=55296&&e<=57343}function kHe(e){return e>=56320&&e<=57343}function IHe(e,t){return(e-55296)*1024+9216+t}function pge(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function mge(e){return e>=64976&&e<=65007||AHe.has(e)}var Xe;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Xe=Xe||(Xe={}));const RHe=65536;class PHe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=RHe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(kHe(n))return this.pos++,this._addGap(),IHe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ce.EOF;return this._err(Xe.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ce.EOF;const r=this.html.charCodeAt(n);return r===ce.CARRIAGE_RETURN?ce.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ce.EOF;let t=this.html.charCodeAt(this.pos);return t===ce.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ce.LINE_FEED):t===ce.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,hge(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===ce.LINE_FEED||t===ce.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){pge(t)?this._err(Xe.controlCharacterInInputStream):mge(t)&&this._err(Xe.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var nr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(nr=nr||(nr={}));function gge(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const zg=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),DHe=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)));var C8;const NHe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),OHe=(C8=String.fromCodePoint)!==null&&C8!==void 0?C8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function $He(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=NHe.get(e))!==null&&t!==void 0?t:e}var Fo;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Fo||(Fo={}));const LHe=32;var np;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(np||(np={}));function Kj(e){return e>=Fo.ZERO&&e<=Fo.NINE}function MHe(e){return e>=Fo.UPPER_A&&e<=Fo.UPPER_F||e>=Fo.LOWER_A&&e<=Fo.LOWER_F}function FHe(e){return e>=Fo.UPPER_A&&e<=Fo.UPPER_Z||e>=Fo.LOWER_A&&e<=Fo.LOWER_Z||Kj(e)}function BHe(e){return e===Fo.EQUALS||FHe(e)}var Oo;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Oo||(Oo={}));var Yv;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Yv||(Yv={}));class jHe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Oo.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Yv.Strict}startEntity(t){this.decodeMode=t,this.state=Oo.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Oo.EntityStart:return t.charCodeAt(n)===Fo.NUM?(this.state=Oo.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Oo.NamedEntity,this.stateNamedEntity(t,n));case Oo.NumericStart:return this.stateNumericStart(t,n);case Oo.NumericDecimal:return this.stateNumericDecimal(t,n);case Oo.NumericHex:return this.stateNumericHex(t,n);case Oo.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|LHe)===Fo.LOWER_X?(this.state=Oo.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Oo.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Kj(i)||MHe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Kj(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Fo.SEMI)this.consumed+=1;else if(this.decodeMode===Yv.Strict)return 0;return this.emitCodePoint($He(this.result),this.consumed),this.errors&&(t!==Fo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&np.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=vge(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Yv.Attribute&&(s===0||BHe(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&np.VALUE_LENGTH)>>14,s!==0){if(o===Fo.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Yv.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&np.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~np.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Oo.NamedEntity:return this.result!==0&&(this.decodeMode!==Yv.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Oo.NumericDecimal:return this.emitNumericEntity(0,2);case Oo.NumericHex:return this.emitNumericEntity(0,3);case Oo.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Oo.EntityStart:return 0}}}function yge(e){let t="";const n=new jHe(e,r=>t+=OHe(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function vge(e,t,n,r){const i=(t&np.BRANCH_LENGTH)>>7,s=t&np.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}yge(zg);yge(DHe);var ot;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(ot=ot||(ot={}));var yy;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(yy=yy||(yy={}));var vc;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(vc=vc||(vc={}));var je;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(je=je||(je={}));var B;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(B=B||(B={}));const UHe=new Map([[je.A,B.A],[je.ADDRESS,B.ADDRESS],[je.ANNOTATION_XML,B.ANNOTATION_XML],[je.APPLET,B.APPLET],[je.AREA,B.AREA],[je.ARTICLE,B.ARTICLE],[je.ASIDE,B.ASIDE],[je.B,B.B],[je.BASE,B.BASE],[je.BASEFONT,B.BASEFONT],[je.BGSOUND,B.BGSOUND],[je.BIG,B.BIG],[je.BLOCKQUOTE,B.BLOCKQUOTE],[je.BODY,B.BODY],[je.BR,B.BR],[je.BUTTON,B.BUTTON],[je.CAPTION,B.CAPTION],[je.CENTER,B.CENTER],[je.CODE,B.CODE],[je.COL,B.COL],[je.COLGROUP,B.COLGROUP],[je.DD,B.DD],[je.DESC,B.DESC],[je.DETAILS,B.DETAILS],[je.DIALOG,B.DIALOG],[je.DIR,B.DIR],[je.DIV,B.DIV],[je.DL,B.DL],[je.DT,B.DT],[je.EM,B.EM],[je.EMBED,B.EMBED],[je.FIELDSET,B.FIELDSET],[je.FIGCAPTION,B.FIGCAPTION],[je.FIGURE,B.FIGURE],[je.FONT,B.FONT],[je.FOOTER,B.FOOTER],[je.FOREIGN_OBJECT,B.FOREIGN_OBJECT],[je.FORM,B.FORM],[je.FRAME,B.FRAME],[je.FRAMESET,B.FRAMESET],[je.H1,B.H1],[je.H2,B.H2],[je.H3,B.H3],[je.H4,B.H4],[je.H5,B.H5],[je.H6,B.H6],[je.HEAD,B.HEAD],[je.HEADER,B.HEADER],[je.HGROUP,B.HGROUP],[je.HR,B.HR],[je.HTML,B.HTML],[je.I,B.I],[je.IMG,B.IMG],[je.IMAGE,B.IMAGE],[je.INPUT,B.INPUT],[je.IFRAME,B.IFRAME],[je.KEYGEN,B.KEYGEN],[je.LABEL,B.LABEL],[je.LI,B.LI],[je.LINK,B.LINK],[je.LISTING,B.LISTING],[je.MAIN,B.MAIN],[je.MALIGNMARK,B.MALIGNMARK],[je.MARQUEE,B.MARQUEE],[je.MATH,B.MATH],[je.MENU,B.MENU],[je.META,B.META],[je.MGLYPH,B.MGLYPH],[je.MI,B.MI],[je.MO,B.MO],[je.MN,B.MN],[je.MS,B.MS],[je.MTEXT,B.MTEXT],[je.NAV,B.NAV],[je.NOBR,B.NOBR],[je.NOFRAMES,B.NOFRAMES],[je.NOEMBED,B.NOEMBED],[je.NOSCRIPT,B.NOSCRIPT],[je.OBJECT,B.OBJECT],[je.OL,B.OL],[je.OPTGROUP,B.OPTGROUP],[je.OPTION,B.OPTION],[je.P,B.P],[je.PARAM,B.PARAM],[je.PLAINTEXT,B.PLAINTEXT],[je.PRE,B.PRE],[je.RB,B.RB],[je.RP,B.RP],[je.RT,B.RT],[je.RTC,B.RTC],[je.RUBY,B.RUBY],[je.S,B.S],[je.SCRIPT,B.SCRIPT],[je.SECTION,B.SECTION],[je.SELECT,B.SELECT],[je.SOURCE,B.SOURCE],[je.SMALL,B.SMALL],[je.SPAN,B.SPAN],[je.STRIKE,B.STRIKE],[je.STRONG,B.STRONG],[je.STYLE,B.STYLE],[je.SUB,B.SUB],[je.SUMMARY,B.SUMMARY],[je.SUP,B.SUP],[je.TABLE,B.TABLE],[je.TBODY,B.TBODY],[je.TEMPLATE,B.TEMPLATE],[je.TEXTAREA,B.TEXTAREA],[je.TFOOT,B.TFOOT],[je.TD,B.TD],[je.TH,B.TH],[je.THEAD,B.THEAD],[je.TITLE,B.TITLE],[je.TR,B.TR],[je.TRACK,B.TRACK],[je.TT,B.TT],[je.U,B.U],[je.UL,B.UL],[je.SVG,B.SVG],[je.VAR,B.VAR],[je.WBR,B.WBR],[je.XMP,B.XMP]]);function WT(e){var t;return(t=UHe.get(e))!==null&&t!==void 0?t:B.UNKNOWN}const kt=B,zHe={[ot.HTML]:new Set([kt.ADDRESS,kt.APPLET,kt.AREA,kt.ARTICLE,kt.ASIDE,kt.BASE,kt.BASEFONT,kt.BGSOUND,kt.BLOCKQUOTE,kt.BODY,kt.BR,kt.BUTTON,kt.CAPTION,kt.CENTER,kt.COL,kt.COLGROUP,kt.DD,kt.DETAILS,kt.DIR,kt.DIV,kt.DL,kt.DT,kt.EMBED,kt.FIELDSET,kt.FIGCAPTION,kt.FIGURE,kt.FOOTER,kt.FORM,kt.FRAME,kt.FRAMESET,kt.H1,kt.H2,kt.H3,kt.H4,kt.H5,kt.H6,kt.HEAD,kt.HEADER,kt.HGROUP,kt.HR,kt.HTML,kt.IFRAME,kt.IMG,kt.INPUT,kt.LI,kt.LINK,kt.LISTING,kt.MAIN,kt.MARQUEE,kt.MENU,kt.META,kt.NAV,kt.NOEMBED,kt.NOFRAMES,kt.NOSCRIPT,kt.OBJECT,kt.OL,kt.P,kt.PARAM,kt.PLAINTEXT,kt.PRE,kt.SCRIPT,kt.SECTION,kt.SELECT,kt.SOURCE,kt.STYLE,kt.SUMMARY,kt.TABLE,kt.TBODY,kt.TD,kt.TEMPLATE,kt.TEXTAREA,kt.TFOOT,kt.TH,kt.THEAD,kt.TITLE,kt.TR,kt.TRACK,kt.UL,kt.WBR,kt.XMP]),[ot.MATHML]:new Set([kt.MI,kt.MO,kt.MN,kt.MS,kt.MTEXT,kt.ANNOTATION_XML]),[ot.SVG]:new Set([kt.TITLE,kt.FOREIGN_OBJECT,kt.DESC]),[ot.XLINK]:new Set,[ot.XML]:new Set,[ot.XMLNS]:new Set};function bge(e){return e===kt.H1||e===kt.H2||e===kt.H3||e===kt.H4||e===kt.H5||e===kt.H6}je.STYLE,je.SCRIPT,je.XMP,je.IFRAME,je.NOEMBED,je.NOFRAMES,je.PLAINTEXT;const VHe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var he;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(he||(he={}));const Ms={DATA:he.DATA,RCDATA:he.RCDATA,RAWTEXT:he.RAWTEXT,SCRIPT_DATA:he.SCRIPT_DATA,PLAINTEXT:he.PLAINTEXT,CDATA_SECTION:he.CDATA_SECTION};function yA(e){return e>=ce.DIGIT_0&&e<=ce.DIGIT_9}function kC(e){return e>=ce.LATIN_CAPITAL_A&&e<=ce.LATIN_CAPITAL_Z}function HHe(e){return e>=ce.LATIN_SMALL_A&&e<=ce.LATIN_SMALL_Z}function Vg(e){return HHe(e)||kC(e)}function Xj(e){return Vg(e)||yA(e)}function xge(e){return e>=ce.LATIN_CAPITAL_A&&e<=ce.LATIN_CAPITAL_F}function wge(e){return e>=ce.LATIN_SMALL_A&&e<=ce.LATIN_SMALL_F}function qHe(e){return yA(e)||xge(e)||wge(e)}function QP(e){return e+32}function _ge(e){return e===ce.SPACE||e===ce.LINE_FEED||e===ce.TABULATION||e===ce.FORM_FEED}function WHe(e){return e===ce.EQUALS_SIGN||Xj(e)}function ane(e){return _ge(e)||e===ce.SOLIDUS||e===ce.GREATER_THAN_SIGN}class GHe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=he.DATA,this.returnState=he.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new PHe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:nr.START_TAG,tagName:"",tagID:B.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:nr.END_TAG,tagName:"",tagID:B.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:nr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:nr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(gge(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Xe.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=WT(t.tagName),t.type===nr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Xe.endTagWithAttributes),t.selfClosing&&this._err(Xe.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case nr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case nr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case nr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:nr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=_ge(t)?nr.WHITESPACE_CHARACTER:t===ce.NULL?nr.NULL_CHARACTER:nr.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(nr.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=zg[0];s>=0&&(s=vge(zg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=zg[s];const a=o&np.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==ce.SEMICOLON&&this._isCharacterReferenceInAttribute()&&WHe(this.preprocessor.peek(1))?(n=[ce.AMPERSAND],s+=u):(n=u===0?[zg[s]&~np.VALUE_LENGTH]:u===1?[zg[++s]]:[zg[++s],zg[++s]],r=0,i=t!==ce.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Xe.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===he.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===he.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===he.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case he.DATA:{this._stateData(t);break}case he.RCDATA:{this._stateRcdata(t);break}case he.RAWTEXT:{this._stateRawtext(t);break}case he.SCRIPT_DATA:{this._stateScriptData(t);break}case he.PLAINTEXT:{this._statePlaintext(t);break}case he.TAG_OPEN:{this._stateTagOpen(t);break}case he.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case he.TAG_NAME:{this._stateTagName(t);break}case he.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case he.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case he.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case he.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case he.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case he.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case he.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case he.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case he.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case he.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case he.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case he.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case he.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case he.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case he.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case he.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case he.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case he.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case he.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case he.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case he.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case he.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case he.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case he.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case he.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case he.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case he.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case he.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case he.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case he.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case he.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case he.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case he.BOGUS_COMMENT:{this._stateBogusComment(t);break}case he.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case he.COMMENT_START:{this._stateCommentStart(t);break}case he.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case he.COMMENT:{this._stateComment(t);break}case he.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case he.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case he.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case he.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case he.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case he.COMMENT_END:{this._stateCommentEnd(t);break}case he.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case he.DOCTYPE:{this._stateDoctype(t);break}case he.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case he.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case he.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case he.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case he.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case he.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case he.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case he.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case he.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case he.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case he.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case he.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case he.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case he.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case he.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case he.CDATA_SECTION:{this._stateCdataSection(t);break}case he.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case he.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case he.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case he.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case he.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case he.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case he.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case he.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case he.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case he.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case ce.LESS_THAN_SIGN:{this.state=he.TAG_OPEN;break}case ce.AMPERSAND:{this.returnState=he.DATA,this.state=he.CHARACTER_REFERENCE;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this._emitCodePoint(t);break}case ce.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case ce.AMPERSAND:{this.returnState=he.RCDATA,this.state=he.CHARACTER_REFERENCE;break}case ce.LESS_THAN_SIGN:{this.state=he.RCDATA_LESS_THAN_SIGN;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this._emitChars(qi);break}case ce.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case ce.LESS_THAN_SIGN:{this.state=he.RAWTEXT_LESS_THAN_SIGN;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this._emitChars(qi);break}case ce.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case ce.LESS_THAN_SIGN:{this.state=he.SCRIPT_DATA_LESS_THAN_SIGN;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this._emitChars(qi);break}case ce.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this._emitChars(qi);break}case ce.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Vg(t))this._createStartTagToken(),this.state=he.TAG_NAME,this._stateTagName(t);else switch(t){case ce.EXCLAMATION_MARK:{this.state=he.MARKUP_DECLARATION_OPEN;break}case ce.SOLIDUS:{this.state=he.END_TAG_OPEN;break}case ce.QUESTION_MARK:{this._err(Xe.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=he.BOGUS_COMMENT,this._stateBogusComment(t);break}case ce.EOF:{this._err(Xe.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Xe.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=he.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Vg(t))this._createEndTagToken(),this.state=he.TAG_NAME,this._stateTagName(t);else switch(t){case ce.GREATER_THAN_SIGN:{this._err(Xe.missingEndTagName),this.state=he.DATA;break}case ce.EOF:{this._err(Xe.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Xe.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=he.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:{this.state=he.BEFORE_ATTRIBUTE_NAME;break}case ce.SOLIDUS:{this.state=he.SELF_CLOSING_START_TAG;break}case ce.GREATER_THAN_SIGN:{this.state=he.DATA,this.emitCurrentTagToken();break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),n.tagName+=qi;break}case ce.EOF:{this._err(Xe.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(kC(t)?QP(t):t)}}_stateRcdataLessThanSign(t){t===ce.SOLIDUS?this.state=he.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=he.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Vg(t)?(this.state=he.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=he.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=he.BEFORE_ATTRIBUTE_NAME,!1;case ce.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=he.SELF_CLOSING_START_TAG,!1;case ce.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=he.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=he.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===ce.SOLIDUS?this.state=he.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=he.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Vg(t)?(this.state=he.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=he.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=he.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case ce.SOLIDUS:{this.state=he.SCRIPT_DATA_END_TAG_OPEN;break}case ce.EXCLAMATION_MARK:{this.state=he.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=he.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Vg(t)?(this.state=he.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=he.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=he.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===ce.HYPHEN_MINUS?(this.state=he.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=he.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===ce.HYPHEN_MINUS?(this.state=he.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=he.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case ce.HYPHEN_MINUS:{this.state=he.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ce.LESS_THAN_SIGN:{this.state=he.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this._emitChars(qi);break}case ce.EOF:{this._err(Xe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case ce.HYPHEN_MINUS:{this.state=he.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ce.LESS_THAN_SIGN:{this.state=he.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this.state=he.SCRIPT_DATA_ESCAPED,this._emitChars(qi);break}case ce.EOF:{this._err(Xe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=he.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case ce.HYPHEN_MINUS:{this._emitChars("-");break}case ce.LESS_THAN_SIGN:{this.state=he.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ce.GREATER_THAN_SIGN:{this.state=he.SCRIPT_DATA,this._emitChars(">");break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this.state=he.SCRIPT_DATA_ESCAPED,this._emitChars(qi);break}case ce.EOF:{this._err(Xe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=he.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===ce.SOLIDUS?this.state=he.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Vg(t)?(this._emitChars("<"),this.state=he.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=he.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Vg(t)?(this.state=he.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=he.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=he.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(vl.SCRIPT,!1)&&ane(this.preprocessor.peek(vl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<vl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=he.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=he.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case ce.HYPHEN_MINUS:{this.state=he.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ce.LESS_THAN_SIGN:{this.state=he.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this._emitChars(qi);break}case ce.EOF:{this._err(Xe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case ce.HYPHEN_MINUS:{this.state=he.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ce.LESS_THAN_SIGN:{this.state=he.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this.state=he.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(qi);break}case ce.EOF:{this._err(Xe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=he.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case ce.HYPHEN_MINUS:{this._emitChars("-");break}case ce.LESS_THAN_SIGN:{this.state=he.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ce.GREATER_THAN_SIGN:{this.state=he.SCRIPT_DATA,this._emitChars(">");break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this.state=he.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(qi);break}case ce.EOF:{this._err(Xe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=he.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===ce.SOLIDUS?(this.state=he.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=he.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(vl.SCRIPT,!1)&&ane(this.preprocessor.peek(vl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<vl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=he.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=he.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:break;case ce.SOLIDUS:case ce.GREATER_THAN_SIGN:case ce.EOF:{this.state=he.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ce.EQUALS_SIGN:{this._err(Xe.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=he.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=he.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:case ce.SOLIDUS:case ce.GREATER_THAN_SIGN:case ce.EOF:{this._leaveAttrName(),this.state=he.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ce.EQUALS_SIGN:{this._leaveAttrName(),this.state=he.BEFORE_ATTRIBUTE_VALUE;break}case ce.QUOTATION_MARK:case ce.APOSTROPHE:case ce.LESS_THAN_SIGN:{this._err(Xe.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this.currentAttr.name+=qi;break}default:this.currentAttr.name+=String.fromCodePoint(kC(t)?QP(t):t)}}_stateAfterAttributeName(t){switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:break;case ce.SOLIDUS:{this.state=he.SELF_CLOSING_START_TAG;break}case ce.EQUALS_SIGN:{this.state=he.BEFORE_ATTRIBUTE_VALUE;break}case ce.GREATER_THAN_SIGN:{this.state=he.DATA,this.emitCurrentTagToken();break}case ce.EOF:{this._err(Xe.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=he.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:break;case ce.QUOTATION_MARK:{this.state=he.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ce.APOSTROPHE:{this.state=he.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.missingAttributeValue),this.state=he.DATA,this.emitCurrentTagToken();break}default:this.state=he.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case ce.QUOTATION_MARK:{this.state=he.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ce.AMPERSAND:{this.returnState=he.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=he.CHARACTER_REFERENCE;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this.currentAttr.value+=qi;break}case ce.EOF:{this._err(Xe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case ce.APOSTROPHE:{this.state=he.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ce.AMPERSAND:{this.returnState=he.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=he.CHARACTER_REFERENCE;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this.currentAttr.value+=qi;break}case ce.EOF:{this._err(Xe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:{this._leaveAttrValue(),this.state=he.BEFORE_ATTRIBUTE_NAME;break}case ce.AMPERSAND:{this.returnState=he.ATTRIBUTE_VALUE_UNQUOTED,this.state=he.CHARACTER_REFERENCE;break}case ce.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=he.DATA,this.emitCurrentTagToken();break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this.currentAttr.value+=qi;break}case ce.QUOTATION_MARK:case ce.APOSTROPHE:case ce.LESS_THAN_SIGN:case ce.EQUALS_SIGN:case ce.GRAVE_ACCENT:{this._err(Xe.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case ce.EOF:{this._err(Xe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:{this._leaveAttrValue(),this.state=he.BEFORE_ATTRIBUTE_NAME;break}case ce.SOLIDUS:{this._leaveAttrValue(),this.state=he.SELF_CLOSING_START_TAG;break}case ce.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=he.DATA,this.emitCurrentTagToken();break}case ce.EOF:{this._err(Xe.eofInTag),this._emitEOFToken();break}default:this._err(Xe.missingWhitespaceBetweenAttributes),this.state=he.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case ce.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=he.DATA,this.emitCurrentTagToken();break}case ce.EOF:{this._err(Xe.eofInTag),this._emitEOFToken();break}default:this._err(Xe.unexpectedSolidusInTag),this.state=he.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case ce.GREATER_THAN_SIGN:{this.state=he.DATA,this.emitCurrentComment(n);break}case ce.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),n.data+=qi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(vl.DASH_DASH,!0)?(this._createCommentToken(vl.DASH_DASH.length+1),this.state=he.COMMENT_START):this._consumeSequenceIfMatch(vl.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(vl.DOCTYPE.length+1),this.state=he.DOCTYPE):this._consumeSequenceIfMatch(vl.CDATA_START,!0)?this.inForeignNode?this.state=he.CDATA_SECTION:(this._err(Xe.cdataInHtmlContent),this._createCommentToken(vl.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=he.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Xe.incorrectlyOpenedComment),this._createCommentToken(2),this.state=he.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case ce.HYPHEN_MINUS:{this.state=he.COMMENT_START_DASH;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.abruptClosingOfEmptyComment),this.state=he.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=he.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case ce.HYPHEN_MINUS:{this.state=he.COMMENT_END;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.abruptClosingOfEmptyComment),this.state=he.DATA,this.emitCurrentComment(n);break}case ce.EOF:{this._err(Xe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=he.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case ce.HYPHEN_MINUS:{this.state=he.COMMENT_END_DASH;break}case ce.LESS_THAN_SIGN:{n.data+="<",this.state=he.COMMENT_LESS_THAN_SIGN;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),n.data+=qi;break}case ce.EOF:{this._err(Xe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case ce.EXCLAMATION_MARK:{n.data+="!",this.state=he.COMMENT_LESS_THAN_SIGN_BANG;break}case ce.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=he.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===ce.HYPHEN_MINUS?this.state=he.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=he.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===ce.HYPHEN_MINUS?this.state=he.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=he.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==ce.GREATER_THAN_SIGN&&t!==ce.EOF&&this._err(Xe.nestedComment),this.state=he.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case ce.HYPHEN_MINUS:{this.state=he.COMMENT_END;break}case ce.EOF:{this._err(Xe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=he.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case ce.GREATER_THAN_SIGN:{this.state=he.DATA,this.emitCurrentComment(n);break}case ce.EXCLAMATION_MARK:{this.state=he.COMMENT_END_BANG;break}case ce.HYPHEN_MINUS:{n.data+="-";break}case ce.EOF:{this._err(Xe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=he.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case ce.HYPHEN_MINUS:{n.data+="--!",this.state=he.COMMENT_END_DASH;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.incorrectlyClosedComment),this.state=he.DATA,this.emitCurrentComment(n);break}case ce.EOF:{this._err(Xe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=he.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:{this.state=he.BEFORE_DOCTYPE_NAME;break}case ce.GREATER_THAN_SIGN:{this.state=he.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case ce.EOF:{this._err(Xe.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Xe.missingWhitespaceBeforeDoctypeName),this.state=he.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(kC(t))this._createDoctypeToken(String.fromCharCode(QP(t))),this.state=he.DOCTYPE_NAME;else switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:break;case ce.NULL:{this._err(Xe.unexpectedNullCharacter),this._createDoctypeToken(qi),this.state=he.DOCTYPE_NAME;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=he.DATA;break}case ce.EOF:{this._err(Xe.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=he.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:{this.state=he.AFTER_DOCTYPE_NAME;break}case ce.GREATER_THAN_SIGN:{this.state=he.DATA,this.emitCurrentDoctype(n);break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),n.name+=qi;break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(kC(t)?QP(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:break;case ce.GREATER_THAN_SIGN:{this.state=he.DATA,this.emitCurrentDoctype(n);break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(vl.PUBLIC,!1)?this.state=he.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(vl.SYSTEM,!1)?this.state=he.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Xe.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=he.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:{this.state=he.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ce.QUOTATION_MARK:{this._err(Xe.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=he.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ce.APOSTROPHE:{this._err(Xe.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=he.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=he.DATA,this.emitCurrentDoctype(n);break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Xe.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=he.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:break;case ce.QUOTATION_MARK:{n.publicId="",this.state=he.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ce.APOSTROPHE:{n.publicId="",this.state=he.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=he.DATA,this.emitCurrentDoctype(n);break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Xe.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=he.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ce.QUOTATION_MARK:{this.state=he.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),n.publicId+=qi;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=he.DATA;break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ce.APOSTROPHE:{this.state=he.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),n.publicId+=qi;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=he.DATA;break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:{this.state=he.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ce.GREATER_THAN_SIGN:{this.state=he.DATA,this.emitCurrentDoctype(n);break}case ce.QUOTATION_MARK:{this._err(Xe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=he.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ce.APOSTROPHE:{this._err(Xe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=he.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Xe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=he.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:break;case ce.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=he.DATA;break}case ce.QUOTATION_MARK:{n.systemId="",this.state=he.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ce.APOSTROPHE:{n.systemId="",this.state=he.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Xe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=he.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:{this.state=he.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ce.QUOTATION_MARK:{this._err(Xe.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=he.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ce.APOSTROPHE:{this._err(Xe.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=he.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=he.DATA,this.emitCurrentDoctype(n);break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Xe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=he.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:break;case ce.QUOTATION_MARK:{n.systemId="",this.state=he.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ce.APOSTROPHE:{n.systemId="",this.state=he.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=he.DATA,this.emitCurrentDoctype(n);break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Xe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=he.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ce.QUOTATION_MARK:{this.state=he.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),n.systemId+=qi;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=he.DATA;break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ce.APOSTROPHE:{this.state=he.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter),n.systemId+=qi;break}case ce.GREATER_THAN_SIGN:{this._err(Xe.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=he.DATA;break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ce.SPACE:case ce.LINE_FEED:case ce.TABULATION:case ce.FORM_FEED:break;case ce.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=he.DATA;break}case ce.EOF:{this._err(Xe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Xe.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=he.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case ce.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=he.DATA;break}case ce.NULL:{this._err(Xe.unexpectedNullCharacter);break}case ce.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case ce.RIGHT_SQUARE_BRACKET:{this.state=he.CDATA_SECTION_BRACKET;break}case ce.EOF:{this._err(Xe.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===ce.RIGHT_SQUARE_BRACKET?this.state=he.CDATA_SECTION_END:(this._emitChars("]"),this.state=he.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case ce.GREATER_THAN_SIGN:{this.state=he.DATA;break}case ce.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=he.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===ce.NUMBER_SIGN?this.state=he.NUMERIC_CHARACTER_REFERENCE:Xj(t)?(this.state=he.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(ce.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(ce.AMPERSAND),this.state=he.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){Xj(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===ce.SEMICOLON&&this._err(Xe.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===ce.LATIN_SMALL_X||t===ce.LATIN_CAPITAL_X?this.state=he.HEXADEMICAL_CHARACTER_REFERENCE_START:yA(t)?(this.state=he.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Xe.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ce.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ce.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){qHe(t)?(this.state=he.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Xe.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ce.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ce.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){xge(t)?this.charRefCode=this.charRefCode*16+t-55:wge(t)?this.charRefCode=this.charRefCode*16+t-87:yA(t)?this.charRefCode=this.charRefCode*16+t-48:t===ce.SEMICOLON?this.state=he.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Xe.missingSemicolonAfterCharacterReference),this.state=he.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){yA(t)?this.charRefCode=this.charRefCode*10+t-48:t===ce.SEMICOLON?this.state=he.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Xe.missingSemicolonAfterCharacterReference),this.state=he.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===ce.NULL)this._err(Xe.nullCharacterReference),this.charRefCode=ce.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Xe.characterReferenceOutsideUnicodeRange),this.charRefCode=ce.REPLACEMENT_CHARACTER;else if(hge(this.charRefCode))this._err(Xe.surrogateCharacterReference),this.charRefCode=ce.REPLACEMENT_CHARACTER;else if(mge(this.charRefCode))this._err(Xe.noncharacterCharacterReference);else if(pge(this.charRefCode)||this.charRefCode===ce.CARRIAGE_RETURN){this._err(Xe.controlCharacterReference);const n=VHe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Ege=new Set([B.DD,B.DT,B.LI,B.OPTGROUP,B.OPTION,B.P,B.RB,B.RP,B.RT,B.RTC]),une=new Set([...Ege,B.CAPTION,B.COLGROUP,B.TBODY,B.TD,B.TFOOT,B.TH,B.THEAD,B.TR]),JP=new Map([[B.APPLET,ot.HTML],[B.CAPTION,ot.HTML],[B.HTML,ot.HTML],[B.MARQUEE,ot.HTML],[B.OBJECT,ot.HTML],[B.TABLE,ot.HTML],[B.TD,ot.HTML],[B.TEMPLATE,ot.HTML],[B.TH,ot.HTML],[B.ANNOTATION_XML,ot.MATHML],[B.MI,ot.MATHML],[B.MN,ot.MATHML],[B.MO,ot.MATHML],[B.MS,ot.MATHML],[B.MTEXT,ot.MATHML],[B.DESC,ot.SVG],[B.FOREIGN_OBJECT,ot.SVG],[B.TITLE,ot.SVG]]),YHe=[B.H1,B.H2,B.H3,B.H4,B.H5,B.H6],KHe=[B.TR,B.TEMPLATE,B.HTML],XHe=[B.TBODY,B.TFOOT,B.THEAD,B.TEMPLATE,B.HTML],QHe=[B.TABLE,B.TEMPLATE,B.HTML],JHe=[B.TD,B.TH];class ZHe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=B.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===B.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ot.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ot.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(YHe,ot.HTML)}popUntilTableCellPopped(){this.popUntilPopped(JHe,ot.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(QHe,ot.HTML)}clearBackToTableBodyContext(){this.clearBackTo(XHe,ot.HTML)}clearBackToTableRowContext(){this.clearBackTo(KHe,ot.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===B.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===B.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if(JP.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(bge(n)&&r===ot.HTML)return!0;if(JP.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if((r===B.UL||r===B.OL)&&i===ot.HTML||JP.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if(r===B.BUTTON&&i===ot.HTML||JP.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ot.HTML){if(r===t)return!0;if(r===B.TABLE||r===B.TEMPLATE||r===B.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===ot.HTML){if(n===B.TBODY||n===B.THEAD||n===B.TFOOT)return!0;if(n===B.TABLE||n===B.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ot.HTML){if(r===t)return!0;if(r!==B.OPTION&&r!==B.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Ege.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;une.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&une.has(this.currentTagId);)this.pop()}}const A8=3;var Ed;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Ed=Ed||(Ed={}));const lne={type:Ed.Marker};class eqe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Ed.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<A8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<A8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=A8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(lne)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Ed.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Ed.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(lne);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Ed.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Ed.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Ed.Element&&n.element===t)}}function cne(e){return{nodeName:"#text",value:e,parentNode:null}}const D_={createDocument(){return{nodeName:"#document",mode:vc.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};D_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(D_.isTextNode(n)){n.value+=t;return}}D_.appendChild(e,cne(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&D_.isTextNode(r)?r.value+=t:D_.insertBefore(e,cne(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Tge="html",tqe="about:legacy-compat",nqe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Sge=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],rqe=[...Sge,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],iqe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Cge=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],sqe=[...Cge,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function fne(e,t){return t.some(n=>e.startsWith(n))}function oqe(e){return e.name===Tge&&e.publicId===null&&(e.systemId===null||e.systemId===tqe)}function aqe(e){if(e.name!==Tge)return vc.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===nqe)return vc.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),iqe.has(n))return vc.QUIRKS;let r=t===null?rqe:Sge;if(fne(n,r))return vc.QUIRKS;if(r=t===null?Cge:sqe,fne(n,r))return vc.LIMITED_QUIRKS}return vc.NO_QUIRKS}const dne={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},uqe="definitionurl",lqe="definitionURL",cqe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),fqe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ot.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ot.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ot.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ot.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ot.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ot.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ot.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ot.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ot.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ot.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ot.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ot.XMLNS}]]),dqe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),hqe=new Set([B.B,B.BIG,B.BLOCKQUOTE,B.BODY,B.BR,B.CENTER,B.CODE,B.DD,B.DIV,B.DL,B.DT,B.EM,B.EMBED,B.H1,B.H2,B.H3,B.H4,B.H5,B.H6,B.HEAD,B.HR,B.I,B.IMG,B.LI,B.LISTING,B.MENU,B.META,B.NOBR,B.OL,B.P,B.PRE,B.RUBY,B.S,B.SMALL,B.SPAN,B.STRONG,B.STRIKE,B.SUB,B.SUP,B.TABLE,B.TT,B.U,B.UL,B.VAR]);function pqe(e){const t=e.tagID;return t===B.FONT&&e.attrs.some(({name:r})=>r===yy.COLOR||r===yy.SIZE||r===yy.FACE)||hqe.has(t)}function Age(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===uqe){e.attrs[t].name=lqe;break}}function kge(e){for(let t=0;t<e.attrs.length;t++){const n=cqe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function Gq(e){for(let t=0;t<e.attrs.length;t++){const n=fqe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function mqe(e){const t=dqe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=WT(e.tagName))}function gqe(e,t){return t===ot.MATHML&&(e===B.MI||e===B.MO||e===B.MN||e===B.MS||e===B.MTEXT)}function yqe(e,t,n){if(t===ot.MATHML&&e===B.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===yy.ENCODING){const i=n[r].value.toLowerCase();return i===dne.TEXT_HTML||i===dne.APPLICATION_XML}}return t===ot.SVG&&(e===B.FOREIGN_OBJECT||e===B.DESC||e===B.TITLE)}function vqe(e,t,n,r){return(!r||r===ot.HTML)&&yqe(e,t,n)||(!r||r===ot.MATHML)&&gqe(e,t)}const bqe="hidden",xqe=8,wqe=3;var xe;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(xe||(xe={}));const _qe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Ige=new Set([B.TABLE,B.TBODY,B.TFOOT,B.THEAD,B.TR]),hne={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:D_,onParseError:null};class pne{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=xe.INITIAL,this.originalInsertionMode=xe.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...hne,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new GHe(this.options,this),this.activeFormattingElements=new eqe(this.treeAdapter),this.fragmentContextID=r?WT(this.treeAdapter.getTagName(r)):B.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new ZHe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...hne,...n};t??(t=r.treeAdapter.createElement(je.TEMPLATE,ot.HTML,[]));const i=r.treeAdapter.createElement("documentmock",ot.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===B.TEMPLATE&&s.tmplInsertionModeStack.unshift(xe.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:_qe,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===ot.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,ot.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=xe.TEXT}switchToPlaintextParsing(){this.insertionMode=xe.TEXT,this.originalInsertionMode=xe.IN_BODY,this.tokenizer.state=Ms.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===je.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ot.HTML))switch(this.fragmentContextID){case B.TITLE:case B.TEXTAREA:{this.tokenizer.state=Ms.RCDATA;break}case B.STYLE:case B.XMP:case B.IFRAME:case B.NOEMBED:case B.NOFRAMES:case B.NOSCRIPT:{this.tokenizer.state=Ms.RAWTEXT;break}case B.SCRIPT:{this.tokenizer.state=Ms.SCRIPT_DATA;break}case B.PLAINTEXT:{this.tokenizer.state=Ms.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,ot.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,ot.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(je.HTML,ot.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,B.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===nr.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===B.SVG&&this.treeAdapter.getTagName(n)===je.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ot.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===B.MGLYPH||t.tagID===B.MALIGNMARK)&&!this._isIntegrationPoint(r,n,ot.HTML)}_processToken(t){switch(t.type){case nr.CHARACTER:{this.onCharacter(t);break}case nr.NULL_CHARACTER:{this.onNullCharacter(t);break}case nr.COMMENT:{this.onComment(t);break}case nr.DOCTYPE:{this.onDoctype(t);break}case nr.START_TAG:{this._processStartTag(t);break}case nr.END_TAG:{this.onEndTag(t);break}case nr.EOF:{this.onEof(t);break}case nr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return vqe(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Ed.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=xe.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(B.P),this.openElements.popUntilTagNamePopped(B.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case B.TR:{this.insertionMode=xe.IN_ROW;return}case B.TBODY:case B.THEAD:case B.TFOOT:{this.insertionMode=xe.IN_TABLE_BODY;return}case B.CAPTION:{this.insertionMode=xe.IN_CAPTION;return}case B.COLGROUP:{this.insertionMode=xe.IN_COLUMN_GROUP;return}case B.TABLE:{this.insertionMode=xe.IN_TABLE;return}case B.BODY:{this.insertionMode=xe.IN_BODY;return}case B.FRAMESET:{this.insertionMode=xe.IN_FRAMESET;return}case B.SELECT:{this._resetInsertionModeForSelect(t);return}case B.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case B.HTML:{this.insertionMode=this.headElement?xe.AFTER_HEAD:xe.BEFORE_HEAD;return}case B.TD:case B.TH:{if(t>0){this.insertionMode=xe.IN_CELL;return}break}case B.HEAD:{if(t>0){this.insertionMode=xe.IN_HEAD;return}break}}this.insertionMode=xe.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===B.TEMPLATE)break;if(r===B.TABLE){this.insertionMode=xe.IN_SELECT_IN_TABLE;return}}this.insertionMode=xe.IN_SELECT}_isElementCausesFosterParenting(t){return Ige.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case B.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ot.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case B.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return zHe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){JWe(this,t);return}switch(this.insertionMode){case xe.INITIAL:{V2(this,t);break}case xe.BEFORE_HTML:{vA(this,t);break}case xe.BEFORE_HEAD:{bA(this,t);break}case xe.IN_HEAD:{xA(this,t);break}case xe.IN_HEAD_NO_SCRIPT:{wA(this,t);break}case xe.AFTER_HEAD:{_A(this,t);break}case xe.IN_BODY:case xe.IN_CAPTION:case xe.IN_CELL:case xe.IN_TEMPLATE:{Pge(this,t);break}case xe.TEXT:case xe.IN_SELECT:case xe.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case xe.IN_TABLE:case xe.IN_TABLE_BODY:case xe.IN_ROW:{k8(this,t);break}case xe.IN_TABLE_TEXT:{Mge(this,t);break}case xe.IN_COLUMN_GROUP:{VO(this,t);break}case xe.AFTER_BODY:{HO(this,t);break}case xe.AFTER_AFTER_BODY:{r3(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){QWe(this,t);return}switch(this.insertionMode){case xe.INITIAL:{V2(this,t);break}case xe.BEFORE_HTML:{vA(this,t);break}case xe.BEFORE_HEAD:{bA(this,t);break}case xe.IN_HEAD:{xA(this,t);break}case xe.IN_HEAD_NO_SCRIPT:{wA(this,t);break}case xe.AFTER_HEAD:{_A(this,t);break}case xe.TEXT:{this._insertCharacters(t);break}case xe.IN_TABLE:case xe.IN_TABLE_BODY:case xe.IN_ROW:{k8(this,t);break}case xe.IN_COLUMN_GROUP:{VO(this,t);break}case xe.AFTER_BODY:{HO(this,t);break}case xe.AFTER_AFTER_BODY:{r3(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){Qj(this,t);return}switch(this.insertionMode){case xe.INITIAL:case xe.BEFORE_HTML:case xe.BEFORE_HEAD:case xe.IN_HEAD:case xe.IN_HEAD_NO_SCRIPT:case xe.AFTER_HEAD:case xe.IN_BODY:case xe.IN_TABLE:case xe.IN_CAPTION:case xe.IN_COLUMN_GROUP:case xe.IN_TABLE_BODY:case xe.IN_ROW:case xe.IN_CELL:case xe.IN_SELECT:case xe.IN_SELECT_IN_TABLE:case xe.IN_TEMPLATE:case xe.IN_FRAMESET:case xe.AFTER_FRAMESET:{Qj(this,t);break}case xe.IN_TABLE_TEXT:{H2(this,t);break}case xe.AFTER_BODY:{Iqe(this,t);break}case xe.AFTER_AFTER_BODY:case xe.AFTER_AFTER_FRAMESET:{Rqe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case xe.INITIAL:{Pqe(this,t);break}case xe.BEFORE_HEAD:case xe.IN_HEAD:case xe.IN_HEAD_NO_SCRIPT:case xe.AFTER_HEAD:{this._err(t,Xe.misplacedDoctype);break}case xe.IN_TABLE_TEXT:{H2(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Xe.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?ZWe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case xe.INITIAL:{V2(this,t);break}case xe.BEFORE_HTML:{Dqe(this,t);break}case xe.BEFORE_HEAD:{Oqe(this,t);break}case xe.IN_HEAD:{rh(this,t);break}case xe.IN_HEAD_NO_SCRIPT:{Mqe(this,t);break}case xe.AFTER_HEAD:{Bqe(this,t);break}case xe.IN_BODY:{du(this,t);break}case xe.IN_TABLE:{PE(this,t);break}case xe.IN_TABLE_TEXT:{H2(this,t);break}case xe.IN_CAPTION:{$We(this,t);break}case xe.IN_COLUMN_GROUP:{Xq(this,t);break}case xe.IN_TABLE_BODY:{J$(this,t);break}case xe.IN_ROW:{Z$(this,t);break}case xe.IN_CELL:{FWe(this,t);break}case xe.IN_SELECT:{jge(this,t);break}case xe.IN_SELECT_IN_TABLE:{jWe(this,t);break}case xe.IN_TEMPLATE:{zWe(this,t);break}case xe.AFTER_BODY:{HWe(this,t);break}case xe.IN_FRAMESET:{qWe(this,t);break}case xe.AFTER_FRAMESET:{GWe(this,t);break}case xe.AFTER_AFTER_BODY:{KWe(this,t);break}case xe.AFTER_AFTER_FRAMESET:{XWe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?eGe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case xe.INITIAL:{V2(this,t);break}case xe.BEFORE_HTML:{Nqe(this,t);break}case xe.BEFORE_HEAD:{$qe(this,t);break}case xe.IN_HEAD:{Lqe(this,t);break}case xe.IN_HEAD_NO_SCRIPT:{Fqe(this,t);break}case xe.AFTER_HEAD:{jqe(this,t);break}case xe.IN_BODY:{Q$(this,t);break}case xe.TEXT:{SWe(this,t);break}case xe.IN_TABLE:{nk(this,t);break}case xe.IN_TABLE_TEXT:{H2(this,t);break}case xe.IN_CAPTION:{LWe(this,t);break}case xe.IN_COLUMN_GROUP:{MWe(this,t);break}case xe.IN_TABLE_BODY:{Jj(this,t);break}case xe.IN_ROW:{Bge(this,t);break}case xe.IN_CELL:{BWe(this,t);break}case xe.IN_SELECT:{Uge(this,t);break}case xe.IN_SELECT_IN_TABLE:{UWe(this,t);break}case xe.IN_TEMPLATE:{VWe(this,t);break}case xe.AFTER_BODY:{Vge(this,t);break}case xe.IN_FRAMESET:{WWe(this,t);break}case xe.AFTER_FRAMESET:{YWe(this,t);break}case xe.AFTER_AFTER_BODY:{r3(this,t);break}}}onEof(t){switch(this.insertionMode){case xe.INITIAL:{V2(this,t);break}case xe.BEFORE_HTML:{vA(this,t);break}case xe.BEFORE_HEAD:{bA(this,t);break}case xe.IN_HEAD:{xA(this,t);break}case xe.IN_HEAD_NO_SCRIPT:{wA(this,t);break}case xe.AFTER_HEAD:{_A(this,t);break}case xe.IN_BODY:case xe.IN_TABLE:case xe.IN_CAPTION:case xe.IN_COLUMN_GROUP:case xe.IN_TABLE_BODY:case xe.IN_ROW:case xe.IN_CELL:case xe.IN_SELECT:case xe.IN_SELECT_IN_TABLE:{$ge(this,t);break}case xe.TEXT:{CWe(this,t);break}case xe.IN_TABLE_TEXT:{H2(this,t);break}case xe.IN_TEMPLATE:{zge(this,t);break}case xe.AFTER_BODY:case xe.IN_FRAMESET:case xe.AFTER_FRAMESET:case xe.AFTER_AFTER_BODY:case xe.AFTER_AFTER_FRAMESET:{Kq(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===ce.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case xe.IN_HEAD:case xe.IN_HEAD_NO_SCRIPT:case xe.AFTER_HEAD:case xe.TEXT:case xe.IN_COLUMN_GROUP:case xe.IN_SELECT:case xe.IN_SELECT_IN_TABLE:case xe.IN_FRAMESET:case xe.AFTER_FRAMESET:{this._insertCharacters(t);break}case xe.IN_BODY:case xe.IN_CAPTION:case xe.IN_CELL:case xe.IN_TEMPLATE:case xe.AFTER_BODY:case xe.AFTER_AFTER_BODY:case xe.AFTER_AFTER_FRAMESET:{Rge(this,t);break}case xe.IN_TABLE:case xe.IN_TABLE_BODY:case xe.IN_ROW:{k8(this,t);break}case xe.IN_TABLE_TEXT:{Lge(this,t);break}}}}function Eqe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Oge(e,t),n}function Tqe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Sqe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=wqe;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Cqe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Cqe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Aqe(e,t,n){const r=e.treeAdapter.getTagName(t),i=WT(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===B.TEMPLATE&&s===ot.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function kqe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function Yq(e,t){for(let n=0;n<xqe;n++){const r=Eqe(e,t);if(!r)break;const i=Tqe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Sqe(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Aqe(e,o,s),kqe(e,i,r)}}function Qj(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Iqe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Rqe(e,t){e._appendCommentNode(t,e.document)}function Kq(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Pqe(e,t){e._setDocumentType(t);const n=t.forceQuirks?vc.QUIRKS:aqe(t);oqe(t)||e._err(t,Xe.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=xe.BEFORE_HTML}function V2(e,t){e._err(t,Xe.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,vc.QUIRKS),e.insertionMode=xe.BEFORE_HTML,e._processToken(t)}function Dqe(e,t){t.tagID===B.HTML?(e._insertElement(t,ot.HTML),e.insertionMode=xe.BEFORE_HEAD):vA(e,t)}function Nqe(e,t){const n=t.tagID;(n===B.HTML||n===B.HEAD||n===B.BODY||n===B.BR)&&vA(e,t)}function vA(e,t){e._insertFakeRootElement(),e.insertionMode=xe.BEFORE_HEAD,e._processToken(t)}function Oqe(e,t){switch(t.tagID){case B.HTML:{du(e,t);break}case B.HEAD:{e._insertElement(t,ot.HTML),e.headElement=e.openElements.current,e.insertionMode=xe.IN_HEAD;break}default:bA(e,t)}}function $qe(e,t){const n=t.tagID;n===B.HEAD||n===B.BODY||n===B.HTML||n===B.BR?bA(e,t):e._err(t,Xe.endTagWithoutMatchingOpenElement)}function bA(e,t){e._insertFakeElement(je.HEAD,B.HEAD),e.headElement=e.openElements.current,e.insertionMode=xe.IN_HEAD,e._processToken(t)}function rh(e,t){switch(t.tagID){case B.HTML:{du(e,t);break}case B.BASE:case B.BASEFONT:case B.BGSOUND:case B.LINK:case B.META:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case B.TITLE:{e._switchToTextParsing(t,Ms.RCDATA);break}case B.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Ms.RAWTEXT):(e._insertElement(t,ot.HTML),e.insertionMode=xe.IN_HEAD_NO_SCRIPT);break}case B.NOFRAMES:case B.STYLE:{e._switchToTextParsing(t,Ms.RAWTEXT);break}case B.SCRIPT:{e._switchToTextParsing(t,Ms.SCRIPT_DATA);break}case B.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=xe.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(xe.IN_TEMPLATE);break}case B.HEAD:{e._err(t,Xe.misplacedStartTagForHeadElement);break}default:xA(e,t)}}function Lqe(e,t){switch(t.tagID){case B.HEAD:{e.openElements.pop(),e.insertionMode=xe.AFTER_HEAD;break}case B.BODY:case B.BR:case B.HTML:{xA(e,t);break}case B.TEMPLATE:{gx(e,t);break}default:e._err(t,Xe.endTagWithoutMatchingOpenElement)}}function gx(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==B.TEMPLATE&&e._err(t,Xe.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(B.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Xe.endTagWithoutMatchingOpenElement)}function xA(e,t){e.openElements.pop(),e.insertionMode=xe.AFTER_HEAD,e._processToken(t)}function Mqe(e,t){switch(t.tagID){case B.HTML:{du(e,t);break}case B.BASEFONT:case B.BGSOUND:case B.HEAD:case B.LINK:case B.META:case B.NOFRAMES:case B.STYLE:{rh(e,t);break}case B.NOSCRIPT:{e._err(t,Xe.nestedNoscriptInHead);break}default:wA(e,t)}}function Fqe(e,t){switch(t.tagID){case B.NOSCRIPT:{e.openElements.pop(),e.insertionMode=xe.IN_HEAD;break}case B.BR:{wA(e,t);break}default:e._err(t,Xe.endTagWithoutMatchingOpenElement)}}function wA(e,t){const n=t.type===nr.EOF?Xe.openElementsLeftAfterEof:Xe.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=xe.IN_HEAD,e._processToken(t)}function Bqe(e,t){switch(t.tagID){case B.HTML:{du(e,t);break}case B.BODY:{e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=xe.IN_BODY;break}case B.FRAMESET:{e._insertElement(t,ot.HTML),e.insertionMode=xe.IN_FRAMESET;break}case B.BASE:case B.BASEFONT:case B.BGSOUND:case B.LINK:case B.META:case B.NOFRAMES:case B.SCRIPT:case B.STYLE:case B.TEMPLATE:case B.TITLE:{e._err(t,Xe.abandonedHeadElementChild),e.openElements.push(e.headElement,B.HEAD),rh(e,t),e.openElements.remove(e.headElement);break}case B.HEAD:{e._err(t,Xe.misplacedStartTagForHeadElement);break}default:_A(e,t)}}function jqe(e,t){switch(t.tagID){case B.BODY:case B.HTML:case B.BR:{_A(e,t);break}case B.TEMPLATE:{gx(e,t);break}default:e._err(t,Xe.endTagWithoutMatchingOpenElement)}}function _A(e,t){e._insertFakeElement(je.BODY,B.BODY),e.insertionMode=xe.IN_BODY,X$(e,t)}function X$(e,t){switch(t.type){case nr.CHARACTER:{Pge(e,t);break}case nr.WHITESPACE_CHARACTER:{Rge(e,t);break}case nr.COMMENT:{Qj(e,t);break}case nr.START_TAG:{du(e,t);break}case nr.END_TAG:{Q$(e,t);break}case nr.EOF:{$ge(e,t);break}}}function Rge(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Pge(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Uqe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function zqe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Vqe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,ot.HTML),e.insertionMode=xe.IN_FRAMESET)}function Hqe(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,ot.HTML)}function qqe(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),bge(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,ot.HTML)}function Wqe(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Gqe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,ot.HTML),n||(e.formElement=e.openElements.current))}function Yqe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===B.LI&&i===B.LI||(n===B.DD||n===B.DT)&&(i===B.DD||i===B.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==B.ADDRESS&&i!==B.DIV&&i!==B.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,ot.HTML)}function Kqe(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.tokenizer.state=Ms.PLAINTEXT}function Xqe(e,t){e.openElements.hasInScope(B.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(B.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.framesetOk=!1}function Qqe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(je.A);n&&(Yq(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Jqe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Zqe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(B.NOBR)&&(Yq(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function eWe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function tWe(e,t){e.treeAdapter.getDocumentMode(e.document)!==vc.QUIRKS&&e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=xe.IN_TABLE}function Dge(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ot.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Nge(e){const t=gge(e,yy.TYPE);return t!=null&&t.toLowerCase()===bqe}function nWe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ot.HTML),Nge(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function rWe(e,t){e._appendElement(t,ot.HTML),t.ackSelfClosing=!0}function iWe(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._appendElement(t,ot.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function sWe(e,t){t.tagName=je.IMG,t.tagID=B.IMG,Dge(e,t)}function oWe(e,t){e._insertElement(t,ot.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Ms.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=xe.TEXT}function aWe(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Ms.RAWTEXT)}function uWe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Ms.RAWTEXT)}function mne(e,t){e._switchToTextParsing(t,Ms.RAWTEXT)}function lWe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===xe.IN_TABLE||e.insertionMode===xe.IN_CAPTION||e.insertionMode===xe.IN_TABLE_BODY||e.insertionMode===xe.IN_ROW||e.insertionMode===xe.IN_CELL?xe.IN_SELECT_IN_TABLE:xe.IN_SELECT}function cWe(e,t){e.openElements.currentTagId===B.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML)}function fWe(e,t){e.openElements.hasInScope(B.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,ot.HTML)}function dWe(e,t){e.openElements.hasInScope(B.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(B.RTC),e._insertElement(t,ot.HTML)}function hWe(e,t){e._reconstructActiveFormattingElements(),Age(t),Gq(t),t.selfClosing?e._appendElement(t,ot.MATHML):e._insertElement(t,ot.MATHML),t.ackSelfClosing=!0}function pWe(e,t){e._reconstructActiveFormattingElements(),kge(t),Gq(t),t.selfClosing?e._appendElement(t,ot.SVG):e._insertElement(t,ot.SVG),t.ackSelfClosing=!0}function gne(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML)}function du(e,t){switch(t.tagID){case B.I:case B.S:case B.B:case B.U:case B.EM:case B.TT:case B.BIG:case B.CODE:case B.FONT:case B.SMALL:case B.STRIKE:case B.STRONG:{Jqe(e,t);break}case B.A:{Qqe(e,t);break}case B.H1:case B.H2:case B.H3:case B.H4:case B.H5:case B.H6:{qqe(e,t);break}case B.P:case B.DL:case B.OL:case B.UL:case B.DIV:case B.DIR:case B.NAV:case B.MAIN:case B.MENU:case B.ASIDE:case B.CENTER:case B.FIGURE:case B.FOOTER:case B.HEADER:case B.HGROUP:case B.DIALOG:case B.DETAILS:case B.ADDRESS:case B.ARTICLE:case B.SECTION:case B.SUMMARY:case B.FIELDSET:case B.BLOCKQUOTE:case B.FIGCAPTION:{Hqe(e,t);break}case B.LI:case B.DD:case B.DT:{Yqe(e,t);break}case B.BR:case B.IMG:case B.WBR:case B.AREA:case B.EMBED:case B.KEYGEN:{Dge(e,t);break}case B.HR:{iWe(e,t);break}case B.RB:case B.RTC:{fWe(e,t);break}case B.RT:case B.RP:{dWe(e,t);break}case B.PRE:case B.LISTING:{Wqe(e,t);break}case B.XMP:{aWe(e,t);break}case B.SVG:{pWe(e,t);break}case B.HTML:{Uqe(e,t);break}case B.BASE:case B.LINK:case B.META:case B.STYLE:case B.TITLE:case B.SCRIPT:case B.BGSOUND:case B.BASEFONT:case B.TEMPLATE:{rh(e,t);break}case B.BODY:{zqe(e,t);break}case B.FORM:{Gqe(e,t);break}case B.NOBR:{Zqe(e,t);break}case B.MATH:{hWe(e,t);break}case B.TABLE:{tWe(e,t);break}case B.INPUT:{nWe(e,t);break}case B.PARAM:case B.TRACK:case B.SOURCE:{rWe(e,t);break}case B.IMAGE:{sWe(e,t);break}case B.BUTTON:{Xqe(e,t);break}case B.APPLET:case B.OBJECT:case B.MARQUEE:{eWe(e,t);break}case B.IFRAME:{uWe(e,t);break}case B.SELECT:{lWe(e,t);break}case B.OPTION:case B.OPTGROUP:{cWe(e,t);break}case B.NOEMBED:{mne(e,t);break}case B.FRAMESET:{Vqe(e,t);break}case B.TEXTAREA:{oWe(e,t);break}case B.NOSCRIPT:{e.options.scriptingEnabled?mne(e,t):gne(e,t);break}case B.PLAINTEXT:{Kqe(e,t);break}case B.COL:case B.TH:case B.TD:case B.TR:case B.HEAD:case B.FRAME:case B.TBODY:case B.TFOOT:case B.THEAD:case B.CAPTION:case B.COLGROUP:break;default:gne(e,t)}}function mWe(e,t){if(e.openElements.hasInScope(B.BODY)&&(e.insertionMode=xe.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function gWe(e,t){e.openElements.hasInScope(B.BODY)&&(e.insertionMode=xe.AFTER_BODY,Vge(e,t))}function yWe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function vWe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(B.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(B.FORM):n&&e.openElements.remove(n))}function bWe(e){e.openElements.hasInButtonScope(B.P)||e._insertFakeElement(je.P,B.P),e._closePElement()}function xWe(e){e.openElements.hasInListItemScope(B.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(B.LI),e.openElements.popUntilTagNamePopped(B.LI))}function wWe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function _We(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function EWe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function TWe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(je.BR,B.BR),e.openElements.pop(),e.framesetOk=!1}function Oge(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==B.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function Q$(e,t){switch(t.tagID){case B.A:case B.B:case B.I:case B.S:case B.U:case B.EM:case B.TT:case B.BIG:case B.CODE:case B.FONT:case B.NOBR:case B.SMALL:case B.STRIKE:case B.STRONG:{Yq(e,t);break}case B.P:{bWe(e);break}case B.DL:case B.UL:case B.OL:case B.DIR:case B.DIV:case B.NAV:case B.PRE:case B.MAIN:case B.MENU:case B.ASIDE:case B.BUTTON:case B.CENTER:case B.FIGURE:case B.FOOTER:case B.HEADER:case B.HGROUP:case B.DIALOG:case B.ADDRESS:case B.ARTICLE:case B.DETAILS:case B.SECTION:case B.SUMMARY:case B.LISTING:case B.FIELDSET:case B.BLOCKQUOTE:case B.FIGCAPTION:{yWe(e,t);break}case B.LI:{xWe(e);break}case B.DD:case B.DT:{wWe(e,t);break}case B.H1:case B.H2:case B.H3:case B.H4:case B.H5:case B.H6:{_We(e);break}case B.BR:{TWe(e);break}case B.BODY:{mWe(e,t);break}case B.HTML:{gWe(e,t);break}case B.FORM:{vWe(e);break}case B.APPLET:case B.OBJECT:case B.MARQUEE:{EWe(e,t);break}case B.TEMPLATE:{gx(e,t);break}default:Oge(e,t)}}function $ge(e,t){e.tmplInsertionModeStack.length>0?zge(e,t):Kq(e,t)}function SWe(e,t){var n;t.tagID===B.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function CWe(e,t){e._err(t,Xe.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function k8(e,t){if(Ige.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=xe.IN_TABLE_TEXT,t.type){case nr.CHARACTER:{Mge(e,t);break}case nr.WHITESPACE_CHARACTER:{Lge(e,t);break}}else _I(e,t)}function AWe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,ot.HTML),e.insertionMode=xe.IN_CAPTION}function kWe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ot.HTML),e.insertionMode=xe.IN_COLUMN_GROUP}function IWe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(je.COLGROUP,B.COLGROUP),e.insertionMode=xe.IN_COLUMN_GROUP,Xq(e,t)}function RWe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ot.HTML),e.insertionMode=xe.IN_TABLE_BODY}function PWe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(je.TBODY,B.TBODY),e.insertionMode=xe.IN_TABLE_BODY,J$(e,t)}function DWe(e,t){e.openElements.hasInTableScope(B.TABLE)&&(e.openElements.popUntilTagNamePopped(B.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function NWe(e,t){Nge(t)?e._appendElement(t,ot.HTML):_I(e,t),t.ackSelfClosing=!0}function OWe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,ot.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function PE(e,t){switch(t.tagID){case B.TD:case B.TH:case B.TR:{PWe(e,t);break}case B.STYLE:case B.SCRIPT:case B.TEMPLATE:{rh(e,t);break}case B.COL:{IWe(e,t);break}case B.FORM:{OWe(e,t);break}case B.TABLE:{DWe(e,t);break}case B.TBODY:case B.TFOOT:case B.THEAD:{RWe(e,t);break}case B.INPUT:{NWe(e,t);break}case B.CAPTION:{AWe(e,t);break}case B.COLGROUP:{kWe(e,t);break}default:_I(e,t)}}function nk(e,t){switch(t.tagID){case B.TABLE:{e.openElements.hasInTableScope(B.TABLE)&&(e.openElements.popUntilTagNamePopped(B.TABLE),e._resetInsertionMode());break}case B.TEMPLATE:{gx(e,t);break}case B.BODY:case B.CAPTION:case B.COL:case B.COLGROUP:case B.HTML:case B.TBODY:case B.TD:case B.TFOOT:case B.TH:case B.THEAD:case B.TR:break;default:_I(e,t)}}function _I(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,X$(e,t),e.fosterParentingEnabled=n}function Lge(e,t){e.pendingCharacterTokens.push(t)}function Mge(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function H2(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)_I(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Fge=new Set([B.CAPTION,B.COL,B.COLGROUP,B.TBODY,B.TD,B.TFOOT,B.TH,B.THEAD,B.TR]);function $We(e,t){const n=t.tagID;Fge.has(n)?e.openElements.hasInTableScope(B.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(B.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=xe.IN_TABLE,PE(e,t)):du(e,t)}function LWe(e,t){const n=t.tagID;switch(n){case B.CAPTION:case B.TABLE:{e.openElements.hasInTableScope(B.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(B.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=xe.IN_TABLE,n===B.TABLE&&nk(e,t));break}case B.BODY:case B.COL:case B.COLGROUP:case B.HTML:case B.TBODY:case B.TD:case B.TFOOT:case B.TH:case B.THEAD:case B.TR:break;default:Q$(e,t)}}function Xq(e,t){switch(t.tagID){case B.HTML:{du(e,t);break}case B.COL:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case B.TEMPLATE:{rh(e,t);break}default:VO(e,t)}}function MWe(e,t){switch(t.tagID){case B.COLGROUP:{e.openElements.currentTagId===B.COLGROUP&&(e.openElements.pop(),e.insertionMode=xe.IN_TABLE);break}case B.TEMPLATE:{gx(e,t);break}case B.COL:break;default:VO(e,t)}}function VO(e,t){e.openElements.currentTagId===B.COLGROUP&&(e.openElements.pop(),e.insertionMode=xe.IN_TABLE,e._processToken(t))}function J$(e,t){switch(t.tagID){case B.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,ot.HTML),e.insertionMode=xe.IN_ROW;break}case B.TH:case B.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(je.TR,B.TR),e.insertionMode=xe.IN_ROW,Z$(e,t);break}case B.CAPTION:case B.COL:case B.COLGROUP:case B.TBODY:case B.TFOOT:case B.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=xe.IN_TABLE,PE(e,t));break}default:PE(e,t)}}function Jj(e,t){const n=t.tagID;switch(t.tagID){case B.TBODY:case B.TFOOT:case B.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=xe.IN_TABLE);break}case B.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=xe.IN_TABLE,nk(e,t));break}case B.BODY:case B.CAPTION:case B.COL:case B.COLGROUP:case B.HTML:case B.TD:case B.TH:case B.TR:break;default:nk(e,t)}}function Z$(e,t){switch(t.tagID){case B.TH:case B.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,ot.HTML),e.insertionMode=xe.IN_CELL,e.activeFormattingElements.insertMarker();break}case B.CAPTION:case B.COL:case B.COLGROUP:case B.TBODY:case B.TFOOT:case B.THEAD:case B.TR:{e.openElements.hasInTableScope(B.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=xe.IN_TABLE_BODY,J$(e,t));break}default:PE(e,t)}}function Bge(e,t){switch(t.tagID){case B.TR:{e.openElements.hasInTableScope(B.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=xe.IN_TABLE_BODY);break}case B.TABLE:{e.openElements.hasInTableScope(B.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=xe.IN_TABLE_BODY,Jj(e,t));break}case B.TBODY:case B.TFOOT:case B.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(B.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=xe.IN_TABLE_BODY,Jj(e,t));break}case B.BODY:case B.CAPTION:case B.COL:case B.COLGROUP:case B.HTML:case B.TD:case B.TH:break;default:nk(e,t)}}function FWe(e,t){const n=t.tagID;Fge.has(n)?(e.openElements.hasInTableScope(B.TD)||e.openElements.hasInTableScope(B.TH))&&(e._closeTableCell(),Z$(e,t)):du(e,t)}function BWe(e,t){const n=t.tagID;switch(n){case B.TD:case B.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=xe.IN_ROW);break}case B.TABLE:case B.TBODY:case B.TFOOT:case B.THEAD:case B.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Bge(e,t));break}case B.BODY:case B.CAPTION:case B.COL:case B.COLGROUP:case B.HTML:break;default:Q$(e,t)}}function jge(e,t){switch(t.tagID){case B.HTML:{du(e,t);break}case B.OPTION:{e.openElements.currentTagId===B.OPTION&&e.openElements.pop(),e._insertElement(t,ot.HTML);break}case B.OPTGROUP:{e.openElements.currentTagId===B.OPTION&&e.openElements.pop(),e.openElements.currentTagId===B.OPTGROUP&&e.openElements.pop(),e._insertElement(t,ot.HTML);break}case B.INPUT:case B.KEYGEN:case B.TEXTAREA:case B.SELECT:{e.openElements.hasInSelectScope(B.SELECT)&&(e.openElements.popUntilTagNamePopped(B.SELECT),e._resetInsertionMode(),t.tagID!==B.SELECT&&e._processStartTag(t));break}case B.SCRIPT:case B.TEMPLATE:{rh(e,t);break}}}function Uge(e,t){switch(t.tagID){case B.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===B.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===B.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===B.OPTGROUP&&e.openElements.pop();break}case B.OPTION:{e.openElements.currentTagId===B.OPTION&&e.openElements.pop();break}case B.SELECT:{e.openElements.hasInSelectScope(B.SELECT)&&(e.openElements.popUntilTagNamePopped(B.SELECT),e._resetInsertionMode());break}case B.TEMPLATE:{gx(e,t);break}}}function jWe(e,t){const n=t.tagID;n===B.CAPTION||n===B.TABLE||n===B.TBODY||n===B.TFOOT||n===B.THEAD||n===B.TR||n===B.TD||n===B.TH?(e.openElements.popUntilTagNamePopped(B.SELECT),e._resetInsertionMode(),e._processStartTag(t)):jge(e,t)}function UWe(e,t){const n=t.tagID;n===B.CAPTION||n===B.TABLE||n===B.TBODY||n===B.TFOOT||n===B.THEAD||n===B.TR||n===B.TD||n===B.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(B.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Uge(e,t)}function zWe(e,t){switch(t.tagID){case B.BASE:case B.BASEFONT:case B.BGSOUND:case B.LINK:case B.META:case B.NOFRAMES:case B.SCRIPT:case B.STYLE:case B.TEMPLATE:case B.TITLE:{rh(e,t);break}case B.CAPTION:case B.COLGROUP:case B.TBODY:case B.TFOOT:case B.THEAD:{e.tmplInsertionModeStack[0]=xe.IN_TABLE,e.insertionMode=xe.IN_TABLE,PE(e,t);break}case B.COL:{e.tmplInsertionModeStack[0]=xe.IN_COLUMN_GROUP,e.insertionMode=xe.IN_COLUMN_GROUP,Xq(e,t);break}case B.TR:{e.tmplInsertionModeStack[0]=xe.IN_TABLE_BODY,e.insertionMode=xe.IN_TABLE_BODY,J$(e,t);break}case B.TD:case B.TH:{e.tmplInsertionModeStack[0]=xe.IN_ROW,e.insertionMode=xe.IN_ROW,Z$(e,t);break}default:e.tmplInsertionModeStack[0]=xe.IN_BODY,e.insertionMode=xe.IN_BODY,du(e,t)}}function VWe(e,t){t.tagID===B.TEMPLATE&&gx(e,t)}function zge(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(B.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):Kq(e,t)}function HWe(e,t){t.tagID===B.HTML?du(e,t):HO(e,t)}function Vge(e,t){var n;if(t.tagID===B.HTML){if(e.fragmentContext||(e.insertionMode=xe.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===B.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else HO(e,t)}function HO(e,t){e.insertionMode=xe.IN_BODY,X$(e,t)}function qWe(e,t){switch(t.tagID){case B.HTML:{du(e,t);break}case B.FRAMESET:{e._insertElement(t,ot.HTML);break}case B.FRAME:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case B.NOFRAMES:{rh(e,t);break}}}function WWe(e,t){t.tagID===B.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==B.FRAMESET&&(e.insertionMode=xe.AFTER_FRAMESET))}function GWe(e,t){switch(t.tagID){case B.HTML:{du(e,t);break}case B.NOFRAMES:{rh(e,t);break}}}function YWe(e,t){t.tagID===B.HTML&&(e.insertionMode=xe.AFTER_AFTER_FRAMESET)}function KWe(e,t){t.tagID===B.HTML?du(e,t):r3(e,t)}function r3(e,t){e.insertionMode=xe.IN_BODY,X$(e,t)}function XWe(e,t){switch(t.tagID){case B.HTML:{du(e,t);break}case B.NOFRAMES:{rh(e,t);break}}}function QWe(e,t){t.chars=qi,e._insertCharacters(t)}function JWe(e,t){e._insertCharacters(t),e.framesetOk=!1}function Hge(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==ot.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function ZWe(e,t){if(pqe(t))Hge(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===ot.MATHML?Age(t):r===ot.SVG&&(mqe(t),kge(t)),Gq(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function eGe(e,t){if(t.tagID===B.P||t.tagID===B.BR){Hge(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===ot.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}je.AREA,je.BASE,je.BASEFONT,je.BGSOUND,je.BR,je.COL,je.EMBED,je.FRAME,je.HR,je.IMG,je.INPUT,je.KEYGEN,je.LINK,je.META,je.PARAM,je.SOURCE,je.TRACK,je.WBR;const tGe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),yne={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function qge(e,t){const n=fGe(e),r=fge("type",{handlers:{root:nGe,element:rGe,text:iGe,comment:Gge,doctype:sGe,raw:aGe},unknown:uGe}),i={parser:n?new pne(yne):pne.getFragmentParser(void 0,yne),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),GT(i,zp());const s=n?i.parser.document:i.parser.getFragment(),o=pHe(s,{file:i.options.file});return i.stitches&&Vq(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function Wge(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function nGe(e,t){Wge(e.children,t)}function rGe(e,t){lGe(e,t),Wge(e.children,t),cGe(e,t)}function iGe(e,t){const n={type:nr.CHARACTER,chars:e.value,location:EI(e)};GT(t,zp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function sGe(e,t){const n={type:nr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:EI(e)};GT(t,zp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function oGe(e,t){t.stitches=!0;const n=dGe(e);if("children"in e&&"children"in n){const r=qge({type:"root",children:e.children},t.options);n.children=r.children}Gge({type:"comment",value:{stitch:n}},t)}function Gge(e,t){const n=e.value,r={type:nr.COMMENT,data:n,location:EI(e)};GT(t,zp(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function aGe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Yge(t,zp(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function uGe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))oGe(n,t);else{let r="";throw tGe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function GT(e,t){Yge(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Ms.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Yge(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function lGe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Ms.PLAINTEXT)return;GT(t,zp(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:rb.html;i===rb.html&&n==="svg"&&(i=rb.svg);const s=vHe({...e,children:[]},{space:i===rb.svg?"svg":"html"}),o={type:nr.START_TAG,tagName:n,tagID:WT(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:EI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function cGe(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&CHe.includes(n)||t.parser.tokenizer.state===Ms.PLAINTEXT)return;GT(t,W$(e));const r={type:nr.END_TAG,tagName:n,tagID:WT(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:EI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Ms.RCDATA||t.parser.tokenizer.state===Ms.RAWTEXT||t.parser.tokenizer.state===Ms.SCRIPT_DATA)&&(t.parser.tokenizer.state=Ms.DATA)}function fGe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function EI(e){const t=zp(e)||{line:void 0,column:void 0,offset:void 0},n=W$(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function dGe(e){return"children"in e?RE({...e,children:[]}):RE(e)}function hGe(e){return function(t,n){return qge(t,{...e,file:n})}}function au({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return S.jsx(p1,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return S.jsx(bt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return S.jsx(vs,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return S.jsx(vs,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return S.jsx(vs,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return S.jsx(vs,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return S.jsx(vs,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return S.jsx(vs,{...s,order:6,...s,pb:12})},a({node:i,...s}){return S.jsx(cx,{...s,ref:void 0})},ul({node:i,...s}){return S.jsx(Md,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return S.jsx(Md,{type:"ordered",withPadding:!0,...o,pb:8})}};return S.jsx(tHe,{components:n,rehypePlugins:[hGe],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function i3({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return S.jsx(au,{text:n})}const c_=14;function pGe({completed:e,inProgress:t,rejected:n}){return S.jsxs(sn,{ml:4,gap:4,children:[S.jsx(Mi,{label:"Completed",children:S.jsx(Ld,{variant:"light",color:"green",leftSection:S.jsx(H$,{width:c_,height:c_,style:{paddingTop:1}}),pb:1,children:e})}),S.jsx(Mi,{label:"In Progress",children:S.jsx(Ld,{variant:"light",color:"orange",leftSection:S.jsx(w0e,{width:c_,height:c_,style:{paddingTop:1}}),pb:1,children:t})}),S.jsx(Mi,{label:"Rejected",children:S.jsx(Ld,{variant:"light",color:"red",leftSection:S.jsx(vI,{width:c_,height:c_,style:{paddingTop:1}}),pb:1,children:n})})]})}const mGe={},gGe=Object.freeze(Object.defineProperty({__proto__:null,default:mGe},Symbol.toStringTag,{value:"Module"})),Kge=e3e(gGe);var I8,vne;function eL(){if(vne)return I8;vne=1;var e=Kge;function t(o,a){var u,l="",c=0,f=!0,d=0,h;function p(){return h=o.charAt(d),d++,h}for(p(),h==="-"&&(l="-",p());h>="0"&&h<="9";)f&&(h=="0"?c++:f=!1),l+=h,p();if(f&&c--,h===".")for(l+=".";p()&&h>="0"&&h<="9";)l+=h;if(h==="e"||h==="E")for(l+=h,p(),(h==="-"||h==="+")&&(l+=h,p());h>="0"&&h<="9";)l+=h,p();for(;h&&h<=" ";)p();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(o[d]==="/"||o[d]==="*"))&&(h=0),u=+l,!(h||c||!isFinite(u)))return u}function n(o,a){return Object.defineProperty&&Object.defineProperty(o,"__COMMENTS__",{enumerable:!1,writable:!0}),o.__COMMENTS__=a||{}}function r(o){Object.defineProperty(o,"__COMMENTS__",{value:void 0})}function i(o){return o.__COMMENTS__}function s(o){if(!o)return"";var a=o.split(`
`),u,l,c,f;for(c=0;c<a.length;c++)for(u=a[c],f=u.length,l=0;l<f;l++){var d=u[l];if(d==="#")break;if(d==="/"&&(u[l+1]==="/"||u[l+1]==="*")){u[l+1]==="*"&&(c=a.length);break}else if(d>" "){a[c]="# "+u;break}}return a.join(`
`)}return I8={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:s},I8}var R8,bne;function yGe(){return bne||(bne=1,R8="3.2.1"),R8}var P8,xne;function Qq(){if(xne)return P8;xne=1;function e(a,u){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var l=[];function c(f){return{}.toString.call(f)==="[object Function]"}return a.forEach(function(f){if(!f.name||!c(f.parse)||!c(f.stringify))throw new Error("extension does not match the DSF interface");l.push(function(){try{if(u=="parse")return f.parse.apply(null,arguments);if(u=="stringify"){var d=f.stringify.apply(null,arguments);if(d!==void 0&&(typeof d!="string"||d.length===0||d[0]==='"'||[].some.call(d,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+d);return d}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+f.name+" failed; "+h.message)}})}),t.bind(null,l)}function t(a,u){if(a)for(var l=0;l<a.length;l++){var c=a[l](u);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function s(a){var u=a&&a.out;return{name:"hex",parse:function(l){if(/^0x[0-9A-Fa-f]+$/.test(l))return parseInt(l,16)},stringify:function(l){if(u&&Number.isInteger(l))return"0x"+l.toString(16)}}}s.description="parse hexadecimal numbers prefixed with 0x";function o(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var u=Date.parse(a);if(!isNaN(u))return new Date(u)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var u=a.toISOString();return u.indexOf("T00:00:00.000Z",u.length-14)!==-1?u.substr(0,10):u}}}}return o.description="support ISO dates",P8={loadDsf:e,std:{math:i,hex:s,date:o}},P8}var D8,wne;function vGe(){return wne||(wne=1,D8=function(e,t){var n=eL(),r=Qq(),i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(H){return H==="{"||H==="}"||H==="["||H==="]"||H===","||H===":"}function d(H){var Q,J=0,ne=1;for(Q=s-1;Q>0&&i[Q]!==`
`;Q--,J++);for(;Q>0;Q--)i[Q]===`
`&&ne++;throw new Error(H+" at line "+ne+","+J+" >>>"+i.substr(s-J,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(H){return i.charAt(s+H)}function g(H){for(var Q="",J=o;h();){if(o===J)return h(),H&&J==="'"&&o==="'"&&Q.length===0?(h(),y()):Q;if(o==="\\")if(h(),o==="u"){for(var ne=0,Z=0;Z<4;Z++){h();var ie=o.charCodeAt(0),q;o>="0"&&o<="9"?q=ie-48:o>="a"&&o<="f"?q=ie-97+10:o>="A"&&o<="F"?q=ie-65+10:d("Bad \\u char "+o),ne=ne*16+q}Q+=String.fromCharCode(ne)}else if(typeof a[o]=="string")Q+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):Q+=o}d("Bad string")}function y(){for(var H="",Q=0,J=0;;){var ne=p(-J-5);if(!ne||ne===`
`)break;J++}function Z(){for(var ie=J;o&&o<=" "&&o!==`
`&&ie-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),Z());;){if(!o)d("Bad multiline string");else if(o==="'"){if(Q++,h(),Q===3)return H.slice(-1)===`
`&&(H=H.slice(0,-1)),H;continue}else for(;Q>0;)H+="'",Q--;o===`
`?(H+=`
`,h(),Z()):(o!=="\r"&&(H+=o),h())}}function x(){if(o==='"'||o==="'")return g(!1);for(var H="",Q=s,J=-1;;){if(o===":")return H?J>=0&&J!==H.length&&(s=Q+J,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),H;o<=" "?o?J<0&&(J=H.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):H+=o,h()}}function b(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var H=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var Q=o==="\r"||o===`
`||o==="";if(Q||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var J=H[0];switch(J){case"f":if(H.trim()==="false")return!1;break;case"n":if(H.trim()==="null")return null;break;case"t":if(H.trim()==="true")return!0;break;default:if(J==="-"||J>="0"&&J<="9"){var ne=n.tryParseNumber(H);if(ne!==void 0)return ne}}if(Q){H=H.trim();var Z=l(H);return Z!==void 0?Z:H}}H+=o}}function E(H,Q){var J;for(H--,J=s-2;J>H&&i[J]<=" "&&i[J]!==`
`;J--);i[J]===`
`&&J--,i[J]==="\r"&&J--;var ne=i.substr(H,J-H+1);for(J=0;J<ne.length;J++)if(ne[J]>" "){var Z=ne.indexOf(`
`);if(Z>=0){var ie=[ne.substr(0,Z),ne.substr(Z+1)];return Q&&ie[0].trim().length===0&&ie.shift(),ie}else return[ne]}return[]}function T(H){function Q(ne,Z){var ie,q,U,X;switch(typeof ne){case"string":ne.indexOf(Z)>=0&&(X=ne);break;case"object":if(Object.prototype.toString.apply(ne)==="[object Array]")for(ie=0,U=ne.length;ie<U;ie++)X=Q(ne[ie],Z)||X;else for(q in ne)Object.prototype.hasOwnProperty.call(ne,q)&&(X=Q(ne[q],Z)||X)}return X}function J(ne){var Z=Q(H,ne);return Z?"found '"+ne+`' in a string value, your mistake could be with:
  > `+Z+`
  (unquoted strings contain everything up to the next line!)`:""}return J("}")||J("]")}function k(){var H=[],Q,J,ne;try{if(u&&(Q=n.createComment(H,{a:[]})),h(),J=s,b(),Q&&(ne=E(J,!0).join(`
`)),o==="]")return h(),Q&&(Q.e=[ne]),H;for(;o;){if(H.push(R()),J=s,b(),o===","&&(h(),J=s,b()),Q){var Z=E(J);Q.a.push([ne||"",Z[0]||""]),ne=Z[1]}if(o==="]")return h(),Q&&(Q.a[Q.a.length-1][1]+=ne||""),H;b()}d("End of input while parsing an array (missing ']')")}catch(ie){throw ie.hint=ie.hint||T(H),ie}}function I(H){var Q="",J={},ne,Z,ie;try{if(u&&(ne=n.createComment(J,{c:{},o:[]})),H?Z=1:(h(),Z=s),b(),ne&&(ie=E(Z,!0).join(`
`)),o==="}"&&!H)return ne&&(ne.e=[ie]),h(),J;for(;o;){if(Q=x(),b(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),J[Q]=R(),Z=s,b(),o===","&&(h(),Z=s,b()),ne){var q=E(Z);ne.c[Q]=[ie||"",q[0]||""],ie=q[1],ne.o.push(Q)}if(o==="}"&&!H)return h(),ne&&(ne.c[Q][1]+=ie||""),J;b()}if(H)return J;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||T(J),U}}function R(){switch(b(),o){case"{":return I();case"[":return k();case"'":case'"':return g(!0);default:return _()}}function D(H,Q){var J=s;if(b(),o&&d("Syntax error, found trailing characters"),u){var ne=Q.join(`
`),Z=E(J).join(`
`);if(Z||ne){var ie=n.createComment(H,n.getComment(H));ie.r=[ne,Z]}}return H}function L(){b();var H=u?E(1):null;switch(o){case"{":return D(I(),H);case"[":return D(k(),H);default:return D(R(),H)}}function M(){b();var H=u?E(1):null;switch(o){case"{":return D(I(),H);case"[":return D(k(),H)}try{return D(I(!0),H)}catch(Q){c();try{return D(R(),H)}catch{throw Q}}}if(typeof e!="string")throw new Error("source is not a string");var z=null,F=!0;return t&&typeof t=="object"&&(u=t.keepWsc,z=t.dsf,F=t.legacyRoot!==!1),l=r.loadDsf(z,"parse"),i=e,c(),F?M():L()}),D8}var N8,_ne;function bGe(){return _ne||(_ne=1,N8=function(e,t){var n=eL(),r=Qq(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,g=!1,y=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?y.com[0]:"",p=t.dsf,g=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(y={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var x,b=Object.keys(i);for(x=b.length-1;x>=0;x--){var _=b[x];y[_].push(i[_][0].length,i[_][1].length)}}var E,T="-­؀-؄܏឴឵‌-‏\u2028- ⁠-⁯\uFEFF￰-￿",k=new RegExp('[\\\\\\"\0-'+T+"]","g"),I=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+T+"]","g"),R=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+T+"]","g"),D=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),L={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},M=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,z="",F=0;function H(X,V){return F+=X[0].length+X[1].length-X[2]-X[3],X[0]+V+X[1]}function Q(X){return X.replace(k,function(V){var K=L[V];return typeof K=="string"?H(y.esc,K):H(y.uni,("0000"+V.charCodeAt(0).toString(16)).slice(-4))})}function J(X,V,K,ee){return X?(I.lastIndex=0,D.lastIndex=0,c||K||I.test(X)||n.tryParseNumber(X,!0)!==void 0||D.test(X)?(k.lastIndex=0,R.lastIndex=0,k.test(X)?!R.test(X)&&!ee&&d?ne(X,V):H(y.qstr,Q(X)):H(y.qstr,X)):H(y.str,X)):H(y.qstr,"")}function ne(X,V){var K,ee=X.replace(/\r/g,"").split(`
`);if(V+=o,ee.length===1)return H(y.mstr,ee[0]);var fe=s+V+y.mstr[0];for(K=0;K<ee.length;K++)fe+=s,ee[K]&&(fe+=V+ee[K]);return fe+s+V+y.mstr[1]}function Z(X){return X?l||M.test(X)?(k.lastIndex=0,H(y.qkey,k.test(X)?Q(X):X)):H(y.key,X):'""'}function ie(X,V,K,ee){function fe(kn){return kn&&kn[kn[0]==="\r"?1:0]===`
`}function Ee(kn){return kn&&!fe(kn)}function ye(kn,Bn,Xr){if(!kn)return"";kn=n.forceComment(kn);var ir,zs=kn.length;for(ir=0;ir<zs&&kn[ir]<=" ";ir++);return Xr&&ir>0&&(kn=kn.substr(ir)),ir<zs?Bn+H(y.rem,kn):kn}var _e=E(X);if(_e!==void 0)return H(y.dsf,_e);switch(typeof X){case"string":return J(X,z,V,ee);case"number":return isFinite(X)?H(y.num,String(X)):H(y.lit,"null");case"boolean":return H(y.lit,String(X));case"object":if(!X)return H(y.lit,"null");var De;a&&(De=n.getComment(X));var me=Object.prototype.toString.apply(X)==="[object Array]",de=z;z+=o;var $e=s+de,Pe=s+z,Ze=K||u?"":$e,it=[],Ge,et=f?[]:null,ut=c,Tt=d,xt=h?"":y.com[0],Dt=0,Ue,Ft,tn,Re,Ve,yt,$t,Bt,dn;if(me){for(Ue=0,Ft=X.length;Ue<Ft;Ue++){if(Ge=Ue<Ft-1,De?(yt=De.a[Ue]||[],$t=Ee(yt[1]),it.push(ye(yt[0],`
`)+Pe),et&&(yt[0]||yt[1]||$t)&&(et=null)):it.push(Pe),F=0,Re=X[Ue],it.push(ie(Re,De?$t:!1,!0)+(Ge?h:"")),et){switch(typeof Re){case"string":F=0,c=!0,d=0,et.push(ie(Re,!1,!0)+(Ge?y.com[0]:"")),c=ut,d=Tt;break;case"object":if(Re){et=null;break}default:et.push(it[it.length-1]+(Ge?xt:""));break}Ge&&(F+=y.com[0].length-y.com[2]),Dt+=F}De&&yt[1]&&it.push(ye(yt[1],$t?" ":`
`,$t))}Ft===0?De&&De.e&&it.push(ye(De.e[0],`
`)+$e):it.push($e),it.length===0?Bt=H(y.arr,""):(Bt=Ze+H(y.arr,it.join("")),et&&(dn=et.join(" "),dn.length-Dt<=f&&(Bt=H(y.arr,dn))))}else{var Nn=De?De.o.slice():[],dr=[];for(tn in X)Object.prototype.hasOwnProperty.call(X,tn)&&Nn.indexOf(tn)<0&&dr.push(tn);g&&dr.sort();var ti=Nn.concat(dr);for(Ue=0,Ft=ti.length;Ue<Ft;Ue++)if(Ge=Ue<Ft-1,tn=ti[Ue],De?(yt=De.c[tn]||[],$t=Ee(yt[1]),it.push(ye(yt[0],`
`)+Pe),et&&(yt[0]||yt[1]||$t)&&(et=null)):it.push(Pe),F=0,Re=X[tn],Ve=ie(Re,De&&$t),it.push(Z(tn)+y.col[0]+(fe(Ve)?"":" ")+Ve+(Ge?h:"")),De&&yt[1]&&it.push(ye(yt[1],$t?" ":`
`,$t)),et){switch(typeof Re){case"string":F=0,c=!0,d=0,Ve=ie(Re,!1),c=ut,d=Tt,et.push(Z(tn)+y.col[0]+" "+Ve+(Ge?y.com[0]:""));break;case"object":if(Re){et=null;break}default:et.push(it[it.length-1]+(Ge?xt:""));break}F+=y.col[0].length-y.col[2],Ge&&(F+=y.com[0].length-y.com[2]),Dt+=F}Ft===0?De&&De.e&&it.push(ye(De.e[0],`
`)+$e):it.push($e),it.length===0?Bt=H(y.obj,""):(Bt=Ze+H(y.obj,it.join("")),et&&(dn=et.join(" "),dn.length-Dt<=f&&(Bt=H(y.obj,dn))))}return z=de,Bt}}E=r.loadDsf(p,"stringify");var q="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&(q=U[0]+`
`),q+=ie(e,null,!0,!0),U&&(q+=U[1]||""),q}),N8}var O8,Ene;function xGe(){if(Ene)return O8;Ene=1;var e=eL();function t(c,f,d){var h;return c&&(h={b:c}),f&&((h=h||{}).a=f),d&&((h=h||{}).x=d),h}function n(c,f){if(!(c===null||typeof c!="object")){var d=e.getComment(c);d&&e.removeComment(c);var h,p,g,y;if(Object.prototype.toString.apply(c)==="[object Array]"){for(y={a:{}},h=0,p=c.length;h<p;h++)s(y.a,h,d.a[h],n(c[h]))&&(g=!0);!g&&d.e&&(y.e=t(d.e[0],d.e[1]),g=!0)}else{y={s:{}};var x,b=Object.keys(c);for(d&&d.o?(x=[],d.o.concat(b).forEach(function(E){Object.prototype.hasOwnProperty.call(c,E)&&x.indexOf(E)<0&&x.push(E)})):x=b,y.o=x,h=0,p=x.length;h<p;h++){var _=x[h];s(y.s,_,d.c[_],n(c[_]))&&(g=!0)}!g&&d.e&&(y.e=t(d.e[0],d.e[1]),g=!0)}return f&&d&&d.r&&(y.r=t(d.r[0],d.r[1])),g?y:void 0}}function r(){var c="";return[].forEach.call(arguments,function(f){f&&f.trim()!==""&&(c&&(c+="; "),c+=f.trim())}),c}function i(c,f){var d=[];if(u(c,f,d,[]),d.length>0){var h=l(f,null,1);h+=`
# Orphaned comments:
`,d.forEach(function(p){h+=("# "+p.path.join("/")+": "+r(p.b,p.a,p.e)).replace(`
`,"\\n ")+`
`}),l(f,h,1)}}function s(c,f,d,h){var p=t(d?d[0]:void 0,d?d[1]:void 0,h);return p&&(c[f]=p),p}function o(c,f){var d=t(f.b,f.a);return d.path=c,d}function a(c,f,d){if(c){var h,p;if(c.a)for(h=0,p=c.a.length;h<p;h++){var g=d.slice().concat([h]),y=c.a[h];y&&(f.push(o(g,y)),a(y.x,f,g))}else c.o&&c.o.forEach(function(x){var b=d.slice().concat([x]),_=c.s[x];_&&(f.push(o(b,_)),a(_.x,f,b))});c.e&&f.push(o(d,c.e))}}function u(c,f,d,h){if(c){if(f===null||typeof f!="object"){a(c,d,h);return}var p,g=e.createComment(f);if(h.length===0&&c.r&&(g.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(f)==="[object Array]"){g.a=[];var y=c.a||{};for(var x in y)if(y.hasOwnProperty(x)){p=parseInt(x);var b=c.a[x];if(b){var _=h.slice().concat([p]);p<f.length?(g.a[p]=[b.b,b.a],u(b.x,f[p],d,_)):(d.push(o(_,b)),a(b.x,d,_))}}p===0&&c.e&&(g.e=[c.e.b,c.e.a])}else g.c={},g.o=[],(c.o||[]).forEach(function(E){var T=h.slice().concat([E]),k=c.s[E];Object.prototype.hasOwnProperty.call(f,E)?(g.o.push(E),k&&(g.c[E]=[k.b,k.a],u(k.x,f[E],d,T))):k&&(d.push(o(T,k)),a(k.x,d,T))}),c.e&&(g.e=[c.e.b,c.e.a])}}function l(c,f,d){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(f||f==="")&&(h.r[d]=e.forceComment(f)),h.r[d]||""}return O8={extract:function(c){return n(c,!0)},merge:i,header:function(c,f){return l(c,f,0)},footer:function(c,f){return l(c,f,1)}},O8}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var $8,Tne;function wGe(){if(Tne)return $8;Tne=1;var e=eL(),t=yGe(),n=vGe(),r=bGe(),i=xGe(),s=Qq();return $8={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(o){(o===`
`||o===`\r
`)&&(e.EOL=o)},version:t,rt:{parse:function(o,a){return(a=a||{}).keepWsc=!0,n(o,a)},stringify:function(o,a){return(a=a||{}).keepWsc=!0,r(o,a)}},comments:i,dsf:s.std},$8}var _Ge=wGe(),Sne={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xge=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},EGe=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Jq={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xge(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):EGe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new TGe;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class TGe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SGe=function(e){const t=Xge(e);return Jq.encodeByteArray(t,!0)},qO=function(e){return SGe(e).replace(/\./g,"")},Qge=function(e){try{return Jq.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CGe=()=>Jge().__FIREBASE_DEFAULTS__,AGe=()=>{if(typeof process>"u"||typeof Sne>"u")return;const e=Sne.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},kGe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Qge(e[1]);return t&&JSON.parse(t)},tL=()=>{try{return CGe()||AGe()||kGe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Zge=e=>{var t,n;return(n=(t=tL())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},IGe=e=>{const t=Zge(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},eye=()=>{var e;return(e=tL())===null||e===void 0?void 0:e.config},tye=e=>{var t;return(t=tL())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RGe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qO(JSON.stringify(n)),qO(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PGe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(uu())}function DGe(){var e;const t=(e=tL())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NGe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OGe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function $Ge(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LGe(){const e=uu();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function MGe(){return!DGe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zq(){try{return typeof indexedDB=="object"}catch{return!1}}function FGe(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BGe="FirebaseError";class Vp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=BGe,Object.setPrototypeOf(this,Vp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,YT.prototype.create)}}class YT{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?jGe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Vp(i,a,r)}}function jGe(e,t){return e.replace(UGe,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const UGe=/\{\$([^}]+)}/g;function zGe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ik(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Cne(s)&&Cne(o)){if(!ik(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Cne(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function VGe(e,t){const n=new HGe(e,t);return n.subscribe.bind(n)}class HGe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qGe(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=L8),i.error===void 0&&(i.error=L8),i.complete===void 0&&(i.complete=L8);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qGe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function L8(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WGe=1e3,GGe=2,YGe=4*60*60*1e3,KGe=.5;function XGe(e,t=WGe,n=GGe){const r=t*Math.pow(n,e),i=Math.round(KGe*r*(Math.random()-.5)*2);return Math.min(YGe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(e){return e&&e._delegate?e._delegate:e}class Cp{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QGe=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new rk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ZGe(t))try{this.getOrInitializeService({instanceIdentifier:Bv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Bv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Bv){return this.instances.has(t)}getOptions(t=Bv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JGe(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Bv){return this.component?this.component.multipleInstances?t:Bv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JGe(e){return e===Bv?void 0:e}function ZGe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eYe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new QGe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(pr||(pr={}));const tYe={debug:pr.DEBUG,verbose:pr.VERBOSE,info:pr.INFO,warn:pr.WARN,error:pr.ERROR,silent:pr.SILENT},nYe=pr.INFO,rYe={[pr.DEBUG]:"log",[pr.VERBOSE]:"log",[pr.INFO]:"info",[pr.WARN]:"warn",[pr.ERROR]:"error"},iYe=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=rYe[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class nL{constructor(t){this.name=t,this._logLevel=nYe,this._logHandler=iYe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in pr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?tYe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,pr.DEBUG,...t),this._logHandler(this,pr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,pr.VERBOSE,...t),this._logHandler(this,pr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,pr.INFO,...t),this._logHandler(this,pr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,pr.WARN,...t),this._logHandler(this,pr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,pr.ERROR,...t),this._logHandler(this,pr.ERROR,...t)}}const sYe=(e,t)=>t.some(n=>e instanceof n);let Ane,kne;function oYe(){return Ane||(Ane=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aYe(){return kne||(kne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nye=new WeakMap,Zj=new WeakMap,rye=new WeakMap,M8=new WeakMap,eW=new WeakMap;function uYe(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(vy(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&nye.set(n,e)}).catch(()=>{}),eW.set(t,e),t}function lYe(e){if(Zj.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Zj.set(e,t)}let e7={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Zj.get(e);if(t==="objectStoreNames")return e.objectStoreNames||rye.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vy(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function cYe(e){e7=e(e7)}function fYe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(F8(this),t,...n);return rye.set(r,t.sort?t.sort():[t]),vy(r)}:aYe().includes(e)?function(...t){return e.apply(F8(this),t),vy(nye.get(this))}:function(...t){return vy(e.apply(F8(this),t))}}function dYe(e){return typeof e=="function"?fYe(e):(e instanceof IDBTransaction&&lYe(e),sYe(e,oYe())?new Proxy(e,e7):e)}function vy(e){if(e instanceof IDBRequest)return uYe(e);if(M8.has(e))return M8.get(e);const t=dYe(e);return t!==e&&(M8.set(e,t),eW.set(t,e)),t}const F8=e=>eW.get(e);function hYe(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=vy(o);return r&&o.addEventListener("upgradeneeded",u=>{r(vy(o.result),u.oldVersion,u.newVersion,vy(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const pYe=["get","getKey","getAll","getAllKeys","count"],mYe=["put","add","delete","clear"],B8=new Map;function Ine(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(B8.get(t))return B8.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=mYe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pYe.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return B8.set(t,s),s}cYe(e=>({...e,get:(t,n,r)=>Ine(t,n)||e.get(t,n,r),has:(t,n)=>!!Ine(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gYe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yYe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yYe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const t7="@firebase/app",Rne="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=new nL("@firebase/app"),vYe="@firebase/app-compat",bYe="@firebase/analytics-compat",xYe="@firebase/analytics",wYe="@firebase/app-check-compat",_Ye="@firebase/app-check",EYe="@firebase/auth",TYe="@firebase/auth-compat",SYe="@firebase/database",CYe="@firebase/data-connect",AYe="@firebase/database-compat",kYe="@firebase/functions",IYe="@firebase/functions-compat",RYe="@firebase/installations",PYe="@firebase/installations-compat",DYe="@firebase/messaging",NYe="@firebase/messaging-compat",OYe="@firebase/performance",$Ye="@firebase/performance-compat",LYe="@firebase/remote-config",MYe="@firebase/remote-config-compat",FYe="@firebase/storage",BYe="@firebase/storage-compat",jYe="@firebase/firestore",UYe="@firebase/vertexai",zYe="@firebase/firestore-compat",VYe="firebase",HYe="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7="[DEFAULT]",qYe={[t7]:"fire-core",[vYe]:"fire-core-compat",[xYe]:"fire-analytics",[bYe]:"fire-analytics-compat",[_Ye]:"fire-app-check",[wYe]:"fire-app-check-compat",[EYe]:"fire-auth",[TYe]:"fire-auth-compat",[SYe]:"fire-rtdb",[CYe]:"fire-data-connect",[AYe]:"fire-rtdb-compat",[kYe]:"fire-fn",[IYe]:"fire-fn-compat",[RYe]:"fire-iid",[PYe]:"fire-iid-compat",[DYe]:"fire-fcm",[NYe]:"fire-fcm-compat",[OYe]:"fire-perf",[$Ye]:"fire-perf-compat",[LYe]:"fire-rc",[MYe]:"fire-rc-compat",[FYe]:"fire-gcs",[BYe]:"fire-gcs-compat",[jYe]:"fire-fst",[zYe]:"fire-fst-compat",[UYe]:"fire-vertex","fire-js":"fire-js",[VYe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new Map,WYe=new Map,r7=new Map;function Pne(e,t){try{e.container.addComponent(t)}catch(n){A0.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function k0(e){const t=e.name;if(r7.has(t))return A0.debug(`There were multiple attempts to register component ${t}.`),!1;r7.set(t,e);for(const n of WO.values())Pne(n,e);for(const n of WYe.values())Pne(n,e);return!0}function KT(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function rp(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GYe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},by=new YT("app","Firebase",GYe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YYe{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw by.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=HYe;function iye(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:n7,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw by.create("bad-app-name",{appName:String(i)});if(n||(n=eye()),!n)throw by.create("no-options");const s=WO.get(i);if(s){if(ik(n,s.options)&&ik(r,s.config))return s;throw by.create("duplicate-app",{appName:i})}const o=new eYe(i);for(const u of r7.values())o.addComponent(u);const a=new YYe(n,r,o);return WO.set(i,a),a}function tW(e=n7){const t=WO.get(e);if(!t&&e===n7&&eye())return iye();if(!t)throw by.create("no-app",{appName:e});return t}function Fd(e,t,n){var r;let i=(r=qYe[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),A0.warn(a.join(" "));return}k0(new Cp(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KYe="firebase-heartbeat-database",XYe=1,sk="firebase-heartbeat-store";let j8=null;function sye(){return j8||(j8=hYe(KYe,XYe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(sk)}catch(n){console.warn(n)}}}}).catch(e=>{throw by.create("idb-open",{originalErrorMessage:e.message})})),j8}async function QYe(e){try{const n=(await sye()).transaction(sk),r=await n.objectStore(sk).get(oye(e));return await n.done,r}catch(t){if(t instanceof Vp)A0.warn(t.message);else{const n=by.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});A0.warn(n.message)}}}async function Dne(e,t){try{const r=(await sye()).transaction(sk,"readwrite");await r.objectStore(sk).put(t,oye(e)),await r.done}catch(n){if(n instanceof Vp)A0.warn(n.message);else{const r=by.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});A0.warn(r.message)}}}function oye(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JYe=1024,ZYe=30*24*60*60*1e3;class eKe{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nKe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Nne();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=ZYe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){A0.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Nne(),{heartbeatsToSend:r,unsentEntries:i}=tKe(this._heartbeatsCache.heartbeats),s=qO(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return A0.warn(n),""}}}function Nne(){return new Date().toISOString().substring(0,10)}function tKe(e,t=JYe){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),One(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),One(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nKe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zq()?FGe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QYe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Dne(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Dne(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function One(e){return qO(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rKe(e){k0(new Cp("platform-logger",t=>new gYe(t),"PRIVATE")),k0(new Cp("heartbeat",t=>new eKe(t),"PRIVATE")),Fd(t7,Rne,e),Fd(t7,Rne,"esm2017"),Fd("fire-js","")}rKe("");var iKe="firebase",sKe="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fd(iKe,sKe,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aye="firebasestorage.googleapis.com",uye="storageBucket",oKe=2*60*1e3,aKe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Vp{constructor(t,n,r=0){super(U8(t),`Firebase Storage: ${n} (${U8(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Es.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return U8(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ws;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ws||(ws={}));function U8(e){return"storage/"+e}function nW(){const e="An unknown error occurred, please check the error payload for server response.";return new Es(ws.UNKNOWN,e)}function uKe(e){return new Es(ws.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function lKe(e){return new Es(ws.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function cKe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Es(ws.UNAUTHENTICATED,e)}function fKe(){return new Es(ws.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function dKe(e){return new Es(ws.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function hKe(){return new Es(ws.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pKe(){return new Es(ws.CANCELED,"User canceled the upload/download.")}function mKe(e){return new Es(ws.INVALID_URL,"Invalid URL '"+e+"'.")}function gKe(e){return new Es(ws.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function yKe(){return new Es(ws.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uye+"' property when initializing the app?")}function vKe(){return new Es(ws.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bKe(){return new Es(ws.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xKe(e){return new Es(ws.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function i7(e){return new Es(ws.INVALID_ARGUMENT,e)}function lye(){return new Es(ws.APP_DELETED,"The Firebase app was deleted.")}function wKe(e){return new Es(ws.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function EA(e,t){return new Es(ws.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function q2(e){throw new Es(ws.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Lu.makeFromUrl(t,n)}catch{return new Lu(t,"")}if(r.path==="")return r;throw gKe(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},g=n===aye?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",x=new RegExp(`^https?://${g}/${i}/${y}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:x,indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<_.length;E++){const T=_[E],k=T.regex.exec(t);if(k){const I=k[T.indices.bucket];let R=k[T.indices.path];R||(R=""),r=new Lu(I,R),T.postModify(r);break}}if(r==null)throw mKe(t);return r}}class _Ke{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EKe(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...y){l||(l=!0,t.apply(null,y))}function f(y){i=setTimeout(()=>{i=null,e(h,u())},y)}function d(){s&&clearTimeout(s)}function h(y,...x){if(l){d();return}if(y){d(),c.call(null,y,...x);return}if(u()||o){d(),c.call(null,y,...x);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function g(y){p||(p=!0,d(),!l&&(i!==null?(y||(a=2),clearTimeout(i),f(0)):y||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function TKe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SKe(e){return e!==void 0}function CKe(e){return typeof e=="object"&&!Array.isArray(e)}function rW(e){return typeof e=="string"||e instanceof String}function $ne(e){return iW()&&e instanceof Blob}function iW(){return typeof Blob<"u"}function s7(e,t,n,r){if(r<t)throw i7(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw i7(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function cye(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var hb;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(hb||(hb={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AKe(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kKe{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new ZP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===hb.NO_ERROR,u=s.getStatus();if(!a||AKe(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===hb.ABORT;r(!1,new ZP(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new ZP(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());SKe(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=nW();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?lye():pKe();o(u)}else{const u=hKe();o(u)}};this.canceled_?n(!1,new ZP(!1,null,!0)):this.backoffId_=EKe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&TKe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ZP{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function IKe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function RKe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function PKe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function DKe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function NKe(e,t,n,r,i,s,o=!0){const a=cye(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return PKe(l,t),IKe(l,n),RKe(l,s),DKe(l,r),new kKe(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OKe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $Ke(...e){const t=OKe();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(iW())return new Blob(e);throw new Es(ws.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LKe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MKe(e){if(typeof atob>"u")throw xKe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class z8{constructor(t,n){this.data=t,this.contentType=n||null}}function FKe(e,t){switch(e){case ip.RAW:return new z8(fye(t));case ip.BASE64:case ip.BASE64URL:return new z8(dye(e,t));case ip.DATA_URL:return new z8(jKe(t),UKe(t))}throw nW()}function fye(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function BKe(e){let t;try{t=decodeURIComponent(e)}catch{throw EA(ip.DATA_URL,"Malformed data URL.")}return fye(t)}function dye(e,t){switch(e){case ip.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw EA(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ip.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw EA(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=MKe(t)}catch(i){throw i.message.includes("polyfill")?i:EA(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class hye{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw EA(ip.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=zKe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function jKe(e){const t=new hye(e);return t.base64?dye(ip.BASE64,t.rest):BKe(t.rest)}function UKe(e){return new hye(e).contentType}function zKe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(t,n){let r=0,i="";$ne(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if($ne(this.data_)){const r=this.data_,i=LKe(r,t,n);return i===null?null:new ty(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new ty(r,!0)}}static getBlob(...t){if(iW()){const n=t.map(r=>r instanceof ty?r.data_:r);return new ty($Ke.apply(null,n))}else{const n=t.map(o=>rW(o)?FKe(ip.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new ty(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sW(e){let t;try{t=JSON.parse(e)}catch{return null}return CKe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VKe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function HKe(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function pye(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qKe(e,t){return t}class Su{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||qKe}}let eD=null;function WKe(e){return!rW(e)||e.length<2?e:pye(e)}function mye(){if(eD)return eD;const e=[];e.push(new Su("bucket")),e.push(new Su("generation")),e.push(new Su("metageneration")),e.push(new Su("name","fullPath",!0));function t(s,o){return WKe(o)}const n=new Su("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Su("size");return i.xform=r,e.push(i),e.push(new Su("timeCreated")),e.push(new Su("updated")),e.push(new Su("md5Hash",null,!0)),e.push(new Su("cacheControl",null,!0)),e.push(new Su("contentDisposition",null,!0)),e.push(new Su("contentEncoding",null,!0)),e.push(new Su("contentLanguage",null,!0)),e.push(new Su("contentType",null,!0)),e.push(new Su("metadata","customMetadata",!0)),eD=e,eD}function GKe(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Lu(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function YKe(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return GKe(r,e),r}function gye(e,t,n){const r=sW(t);return r===null?null:YKe(e,r,n)}function KKe(e,t,n,r){const i=sW(t);if(i===null||!rW(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=SI(d,n,r),p=cye({alt:"media",token:l});return h+p})[0]}function XKe(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lne="prefixes",Mne="items";function QKe(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Lne])for(const i of n[Lne]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Lu(t,s));r.prefixes.push(o)}if(n[Mne])for(const i of n[Mne]){const s=e._makeStorageReference(new Lu(t,i.name));r.items.push(s)}return r}function JKe(e,t,n){const r=sW(n);return r===null?null:QKe(e,t,r)}class rL{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oW(e){if(!e)throw nW()}function ZKe(e,t){function n(r,i){const s=gye(e,i,t);return oW(s!==null),s}return n}function eXe(e,t){function n(r,i){const s=JKe(e,t,i);return oW(s!==null),s}return n}function tXe(e,t){function n(r,i){const s=gye(e,i,t);return oW(s!==null),KKe(s,i,e.host,e._protocol)}return n}function aW(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=fKe():i=cKe():n.getStatus()===402?i=lKe(e.bucket):n.getStatus()===403?i=dKe(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function yye(e){const t=aW(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=uKe(e.path)),s.serverResponse=i.serverResponse,s}return n}function nXe(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=SI(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new rL(a,u,eXe(e,t.bucket),l);return c.urlParams=s,c.errorHandler=aW(t),c}function rXe(e,t,n){const r=t.fullServerUrl(),i=SI(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new rL(i,s,tXe(e,n),o);return a.errorHandler=yye(t),a}function iXe(e,t){const n=t.fullServerUrl(),r=SI(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new rL(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=yye(t),a}function sXe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function oXe(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=sXe(null,t)),r}function aXe(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let E=0;E<2;E++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=oXe(t,r,i),c=XKe(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=ty.getBlob(f,r,d);if(h===null)throw vKe();const p={name:l.fullPath},g=SI(s,e.host,e._protocol),y="POST",x=e.maxUploadRetryTime,b=new rL(g,y,ZKe(e,n),x);return b.urlParams=p,b.headers=o,b.body=h.uploadData(),b.errorHandler=aW(t),b}class uXe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hb.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hb.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hb.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw q2("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw q2("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw q2("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw q2("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw q2("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class lXe extends uXe{initXhr(){this.xhr_.responseType="text"}}function iL(){return new lXe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(t,n){this._service=t,n instanceof Lu?this._location=n:this._location=Lu.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Ab(t,n)}get root(){const t=new Lu(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pye(this._location.path)}get storage(){return this._service}get parent(){const t=VKe(this._location.path);if(t===null)return null;const n=new Lu(this._location.bucket,t);return new Ab(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw wKe(t)}}function cXe(e,t,n){e._throwIfRoot("uploadBytes");const r=aXe(e.storage,e._location,mye(),new ty(t,!0),n);return e.storage.makeRequestWithTokens(r,iL).then(i=>({metadata:i,ref:e}))}function fXe(e){const t={prefixes:[],items:[]};return vye(e,t).then(()=>t)}async function vye(e,t,n){const i=await dXe(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await vye(e,t,i.nextPageToken)}function dXe(e,t){t!=null&&typeof t.maxResults=="number"&&s7("options.maxResults",1,1e3,t.maxResults);const n=t,r=nXe(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,iL)}function hXe(e){e._throwIfRoot("getDownloadURL");const t=rXe(e.storage,e._location,mye());return e.storage.makeRequestWithTokens(t,iL).then(n=>{if(n===null)throw bKe();return n})}function pXe(e){e._throwIfRoot("deleteObject");const t=iXe(e.storage,e._location);return e.storage.makeRequestWithTokens(t,iL)}function mXe(e,t){const n=HKe(e._location.path,t),r=new Lu(e._location.bucket,n);return new Ab(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gXe(e){return/^[A-Za-z]+:\/\//.test(e)}function yXe(e,t){return new Ab(e,t)}function bye(e,t){if(e instanceof uW){const n=e;if(n._bucket==null)throw yKe();const r=new Ab(n,n._bucket);return t!=null?bye(r,t):r}else return t!==void 0?mXe(e,t):e}function vXe(e,t){if(t&&gXe(t)){if(e instanceof uW)return yXe(e,t);throw i7("To use ref(service, url), the first argument must be a Storage instance.")}else return bye(e,t)}function Fne(e,t){const n=t==null?void 0:t[uye];return n==null?null:Lu.makeFromBucketSpec(n,e)}function bXe(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:RGe(i,e.app.options.projectId))}class uW{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=aye,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oKe,this._maxUploadRetryTime=aKe,this._requests=new Set,i!=null?this._bucket=Lu.makeFromBucketSpec(i,this._host):this._bucket=Fne(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Lu.makeFromBucketSpec(this._url,t):this._bucket=Fne(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){s7("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){s7("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Ab(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new _Ke(lye());{const o=NKe(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Bne="@firebase/storage",jne="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xye="storage";function tD(e,t,n){return e=Ri(e),cXe(e,t,n)}function W2(e){return e=Ri(e),fXe(e)}function nD(e){return e=Ri(e),hXe(e)}function Une(e){return e=Ri(e),pXe(e)}function hc(e,t){return e=Ri(e),vXe(e,t)}function zne(e=tW(),t){e=Ri(e);const r=KT(e,xye).getImmediate({identifier:t}),i=IGe("storage");return i&&xXe(r,...i),r}function xXe(e,t,n,r={}){bXe(e,t,n,r)}function wXe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new uW(n,r,i,t,yx)}function _Xe(){k0(new Cp(xye,wXe,"PUBLIC").setMultipleInstances(!0)),Fd(Bne,jne,""),Fd(Bne,jne,"esm2017")}_Xe();var Vne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xy,wye;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,R){function D(){}D.prototype=R.prototype,I.D=R.prototype,I.prototype=new D,I.prototype.constructor=I,I.C=function(L,M,z){for(var F=Array(arguments.length-2),H=2;H<arguments.length;H++)F[H-2]=arguments[H];return R.prototype[M].apply(L,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,R,D){D||(D=0);var L=Array(16);if(typeof R=="string")for(var M=0;16>M;++M)L[M]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(M=0;16>M;++M)L[M]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=I.g[0],D=I.g[1],M=I.g[2];var z=I.g[3],F=R+(z^D&(M^z))+L[0]+3614090360&4294967295;R=D+(F<<7&4294967295|F>>>25),F=z+(M^R&(D^M))+L[1]+3905402710&4294967295,z=R+(F<<12&4294967295|F>>>20),F=M+(D^z&(R^D))+L[2]+606105819&4294967295,M=z+(F<<17&4294967295|F>>>15),F=D+(R^M&(z^R))+L[3]+3250441966&4294967295,D=M+(F<<22&4294967295|F>>>10),F=R+(z^D&(M^z))+L[4]+4118548399&4294967295,R=D+(F<<7&4294967295|F>>>25),F=z+(M^R&(D^M))+L[5]+1200080426&4294967295,z=R+(F<<12&4294967295|F>>>20),F=M+(D^z&(R^D))+L[6]+2821735955&4294967295,M=z+(F<<17&4294967295|F>>>15),F=D+(R^M&(z^R))+L[7]+4249261313&4294967295,D=M+(F<<22&4294967295|F>>>10),F=R+(z^D&(M^z))+L[8]+1770035416&4294967295,R=D+(F<<7&4294967295|F>>>25),F=z+(M^R&(D^M))+L[9]+2336552879&4294967295,z=R+(F<<12&4294967295|F>>>20),F=M+(D^z&(R^D))+L[10]+4294925233&4294967295,M=z+(F<<17&4294967295|F>>>15),F=D+(R^M&(z^R))+L[11]+2304563134&4294967295,D=M+(F<<22&4294967295|F>>>10),F=R+(z^D&(M^z))+L[12]+1804603682&4294967295,R=D+(F<<7&4294967295|F>>>25),F=z+(M^R&(D^M))+L[13]+4254626195&4294967295,z=R+(F<<12&4294967295|F>>>20),F=M+(D^z&(R^D))+L[14]+2792965006&4294967295,M=z+(F<<17&4294967295|F>>>15),F=D+(R^M&(z^R))+L[15]+1236535329&4294967295,D=M+(F<<22&4294967295|F>>>10),F=R+(M^z&(D^M))+L[1]+4129170786&4294967295,R=D+(F<<5&4294967295|F>>>27),F=z+(D^M&(R^D))+L[6]+3225465664&4294967295,z=R+(F<<9&4294967295|F>>>23),F=M+(R^D&(z^R))+L[11]+643717713&4294967295,M=z+(F<<14&4294967295|F>>>18),F=D+(z^R&(M^z))+L[0]+3921069994&4294967295,D=M+(F<<20&4294967295|F>>>12),F=R+(M^z&(D^M))+L[5]+3593408605&4294967295,R=D+(F<<5&4294967295|F>>>27),F=z+(D^M&(R^D))+L[10]+38016083&4294967295,z=R+(F<<9&4294967295|F>>>23),F=M+(R^D&(z^R))+L[15]+3634488961&4294967295,M=z+(F<<14&4294967295|F>>>18),F=D+(z^R&(M^z))+L[4]+3889429448&4294967295,D=M+(F<<20&4294967295|F>>>12),F=R+(M^z&(D^M))+L[9]+568446438&4294967295,R=D+(F<<5&4294967295|F>>>27),F=z+(D^M&(R^D))+L[14]+3275163606&4294967295,z=R+(F<<9&4294967295|F>>>23),F=M+(R^D&(z^R))+L[3]+4107603335&4294967295,M=z+(F<<14&4294967295|F>>>18),F=D+(z^R&(M^z))+L[8]+1163531501&4294967295,D=M+(F<<20&4294967295|F>>>12),F=R+(M^z&(D^M))+L[13]+2850285829&4294967295,R=D+(F<<5&4294967295|F>>>27),F=z+(D^M&(R^D))+L[2]+4243563512&4294967295,z=R+(F<<9&4294967295|F>>>23),F=M+(R^D&(z^R))+L[7]+1735328473&4294967295,M=z+(F<<14&4294967295|F>>>18),F=D+(z^R&(M^z))+L[12]+2368359562&4294967295,D=M+(F<<20&4294967295|F>>>12),F=R+(D^M^z)+L[5]+4294588738&4294967295,R=D+(F<<4&4294967295|F>>>28),F=z+(R^D^M)+L[8]+2272392833&4294967295,z=R+(F<<11&4294967295|F>>>21),F=M+(z^R^D)+L[11]+1839030562&4294967295,M=z+(F<<16&4294967295|F>>>16),F=D+(M^z^R)+L[14]+4259657740&4294967295,D=M+(F<<23&4294967295|F>>>9),F=R+(D^M^z)+L[1]+2763975236&4294967295,R=D+(F<<4&4294967295|F>>>28),F=z+(R^D^M)+L[4]+1272893353&4294967295,z=R+(F<<11&4294967295|F>>>21),F=M+(z^R^D)+L[7]+4139469664&4294967295,M=z+(F<<16&4294967295|F>>>16),F=D+(M^z^R)+L[10]+3200236656&4294967295,D=M+(F<<23&4294967295|F>>>9),F=R+(D^M^z)+L[13]+681279174&4294967295,R=D+(F<<4&4294967295|F>>>28),F=z+(R^D^M)+L[0]+3936430074&4294967295,z=R+(F<<11&4294967295|F>>>21),F=M+(z^R^D)+L[3]+3572445317&4294967295,M=z+(F<<16&4294967295|F>>>16),F=D+(M^z^R)+L[6]+76029189&4294967295,D=M+(F<<23&4294967295|F>>>9),F=R+(D^M^z)+L[9]+3654602809&4294967295,R=D+(F<<4&4294967295|F>>>28),F=z+(R^D^M)+L[12]+3873151461&4294967295,z=R+(F<<11&4294967295|F>>>21),F=M+(z^R^D)+L[15]+530742520&4294967295,M=z+(F<<16&4294967295|F>>>16),F=D+(M^z^R)+L[2]+3299628645&4294967295,D=M+(F<<23&4294967295|F>>>9),F=R+(M^(D|~z))+L[0]+4096336452&4294967295,R=D+(F<<6&4294967295|F>>>26),F=z+(D^(R|~M))+L[7]+1126891415&4294967295,z=R+(F<<10&4294967295|F>>>22),F=M+(R^(z|~D))+L[14]+2878612391&4294967295,M=z+(F<<15&4294967295|F>>>17),F=D+(z^(M|~R))+L[5]+4237533241&4294967295,D=M+(F<<21&4294967295|F>>>11),F=R+(M^(D|~z))+L[12]+1700485571&4294967295,R=D+(F<<6&4294967295|F>>>26),F=z+(D^(R|~M))+L[3]+2399980690&4294967295,z=R+(F<<10&4294967295|F>>>22),F=M+(R^(z|~D))+L[10]+4293915773&4294967295,M=z+(F<<15&4294967295|F>>>17),F=D+(z^(M|~R))+L[1]+2240044497&4294967295,D=M+(F<<21&4294967295|F>>>11),F=R+(M^(D|~z))+L[8]+1873313359&4294967295,R=D+(F<<6&4294967295|F>>>26),F=z+(D^(R|~M))+L[15]+4264355552&4294967295,z=R+(F<<10&4294967295|F>>>22),F=M+(R^(z|~D))+L[6]+2734768916&4294967295,M=z+(F<<15&4294967295|F>>>17),F=D+(z^(M|~R))+L[13]+1309151649&4294967295,D=M+(F<<21&4294967295|F>>>11),F=R+(M^(D|~z))+L[4]+4149444226&4294967295,R=D+(F<<6&4294967295|F>>>26),F=z+(D^(R|~M))+L[11]+3174756917&4294967295,z=R+(F<<10&4294967295|F>>>22),F=M+(R^(z|~D))+L[2]+718787259&4294967295,M=z+(F<<15&4294967295|F>>>17),F=D+(z^(M|~R))+L[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(M+(F<<21&4294967295|F>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+z&4294967295}r.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var D=R-this.blockSize,L=this.B,M=this.h,z=0;z<R;){if(M==0)for(;z<=D;)i(this,I,z),z+=this.blockSize;if(typeof I=="string"){for(;z<R;)if(L[M++]=I.charCodeAt(z++),M==this.blockSize){i(this,L),M=0;break}}else for(;z<R;)if(L[M++]=I[z++],M==this.blockSize){i(this,L),M=0;break}}this.h=M,this.o+=R},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var D=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=D&255,D/=256;for(this.u(I),I=Array(16),R=D=0;4>R;++R)for(var L=0;32>L;L+=8)I[D++]=this.g[R]>>>L&255;return I};function s(I,R){var D=a;return Object.prototype.hasOwnProperty.call(D,I)?D[I]:D[I]=R(I)}function o(I,R){this.h=R;for(var D=[],L=!0,M=I.length-1;0<=M;M--){var z=I[M]|0;L&&z==R||(D[M]=z,L=!1)}this.g=D}var a={};function u(I){return-128<=I&&128>I?s(I,function(R){return new o([R|0],0>R?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return y(l(-I));for(var R=[],D=1,L=0;I>=D;L++)R[L]=I/D|0,D*=4294967296;return new o(R,0)}function c(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return y(c(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=l(Math.pow(R,8)),L=f,M=0;M<I.length;M+=8){var z=Math.min(8,I.length-M),F=parseInt(I.substring(M,M+z),R);8>z?(z=l(Math.pow(R,z)),L=L.j(z).add(l(F))):(L=L.j(D),L=L.add(l(F)))}return L}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(g(this))return-y(this).m();for(var I=0,R=1,D=0;D<this.g.length;D++){var L=this.i(D);I+=(0<=L?L:4294967296+L)*R,R*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(p(this))return"0";if(g(this))return"-"+y(this).toString(I);for(var R=l(Math.pow(I,6)),D=this,L="";;){var M=E(D,R).g;D=x(D,M.j(R));var z=((0<D.g.length?D.g[0]:D.h)>>>0).toString(I);if(D=M,p(D))return z+L;for(;6>z.length;)z="0"+z;L=z+L}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function p(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function g(I){return I.h==-1}e.l=function(I){return I=x(this,I),g(I)?-1:p(I)?0:1};function y(I){for(var R=I.g.length,D=[],L=0;L<R;L++)D[L]=~I.g[L];return new o(D,~I.h).add(d)}e.abs=function(){return g(this)?y(this):this},e.add=function(I){for(var R=Math.max(this.g.length,I.g.length),D=[],L=0,M=0;M<=R;M++){var z=L+(this.i(M)&65535)+(I.i(M)&65535),F=(z>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);L=F>>>16,z&=65535,F&=65535,D[M]=F<<16|z}return new o(D,D[D.length-1]&-2147483648?-1:0)};function x(I,R){return I.add(y(R))}e.j=function(I){if(p(this)||p(I))return f;if(g(this))return g(I)?y(this).j(y(I)):y(y(this).j(I));if(g(I))return y(this.j(y(I)));if(0>this.l(h)&&0>I.l(h))return l(this.m()*I.m());for(var R=this.g.length+I.g.length,D=[],L=0;L<2*R;L++)D[L]=0;for(L=0;L<this.g.length;L++)for(var M=0;M<I.g.length;M++){var z=this.i(L)>>>16,F=this.i(L)&65535,H=I.i(M)>>>16,Q=I.i(M)&65535;D[2*L+2*M]+=F*Q,b(D,2*L+2*M),D[2*L+2*M+1]+=z*Q,b(D,2*L+2*M+1),D[2*L+2*M+1]+=F*H,b(D,2*L+2*M+1),D[2*L+2*M+2]+=z*H,b(D,2*L+2*M+2)}for(L=0;L<R;L++)D[L]=D[2*L+1]<<16|D[2*L];for(L=R;L<2*R;L++)D[L]=0;return new o(D,0)};function b(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function _(I,R){this.g=I,this.h=R}function E(I,R){if(p(R))throw Error("division by zero");if(p(I))return new _(f,f);if(g(I))return R=E(y(I),R),new _(y(R.g),y(R.h));if(g(R))return R=E(I,y(R)),new _(y(R.g),R.h);if(30<I.g.length){if(g(I)||g(R))throw Error("slowDivide_ only works with positive integers.");for(var D=d,L=R;0>=L.l(I);)D=T(D),L=T(L);var M=k(D,1),z=k(L,1);for(L=k(L,2),D=k(D,2);!p(L);){var F=z.add(L);0>=F.l(I)&&(M=M.add(D),z=F),L=k(L,1),D=k(D,1)}return R=x(I,M.j(R)),new _(M,R)}for(M=f;0<=I.l(R);){for(D=Math.max(1,Math.floor(I.m()/R.m())),L=Math.ceil(Math.log(D)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),z=l(D),F=z.j(R);g(F)||0<F.l(I);)D-=L,z=l(D),F=z.j(R);p(z)&&(z=d),M=M.add(z),I=x(I,F)}return new _(M,I)}e.A=function(I){return E(this,I).h},e.and=function(I){for(var R=Math.max(this.g.length,I.g.length),D=[],L=0;L<R;L++)D[L]=this.i(L)&I.i(L);return new o(D,this.h&I.h)},e.or=function(I){for(var R=Math.max(this.g.length,I.g.length),D=[],L=0;L<R;L++)D[L]=this.i(L)|I.i(L);return new o(D,this.h|I.h)},e.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),D=[],L=0;L<R;L++)D[L]=this.i(L)^I.i(L);return new o(D,this.h^I.h)};function T(I){for(var R=I.g.length+1,D=[],L=0;L<R;L++)D[L]=I.i(L)<<1|I.i(L-1)>>>31;return new o(D,I.h)}function k(I,R){var D=R>>5;R%=32;for(var L=I.g.length-D,M=[],z=0;z<L;z++)M[z]=0<R?I.i(z+D)>>>R|I.i(z+D+1)<<32-R:I.i(z+D);return new o(M,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wye=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,xy=o}).apply(typeof Vne<"u"?Vne:typeof self<"u"?self:typeof window<"u"?window:{});var rD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _ye,IC,Eye,s3,o7,Tye,Sye,Cye;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(P,W,te){return P==Array.prototype||P==Object.prototype||(P[W]=te.value),P};function n(P){P=[typeof globalThis=="object"&&globalThis,P,typeof window=="object"&&window,typeof self=="object"&&self,typeof rD=="object"&&rD];for(var W=0;W<P.length;++W){var te=P[W];if(te&&te.Math==Math)return te}throw Error("Cannot find global object")}var r=n(this);function i(P,W){if(W)e:{var te=r;P=P.split(".");for(var ue=0;ue<P.length-1;ue++){var Fe=P[ue];if(!(Fe in te))break e;te=te[Fe]}P=P[P.length-1],ue=te[P],W=W(ue),W!=ue&&W!=null&&t(te,P,{configurable:!0,writable:!0,value:W})}}function s(P,W){P instanceof String&&(P+="");var te=0,ue=!1,Fe={next:function(){if(!ue&&te<P.length){var Ke=te++;return{value:W(Ke,P[Ke]),done:!1}}return ue=!0,{done:!0,value:void 0}}};return Fe[Symbol.iterator]=function(){return Fe},Fe}i("Array.prototype.values",function(P){return P||function(){return s(this,function(W,te){return te})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(P){var W=typeof P;return W=W!="object"?W:P?Array.isArray(P)?"array":W:"null",W=="array"||W=="object"&&typeof P.length=="number"}function l(P){var W=typeof P;return W=="object"&&P!=null||W=="function"}function c(P,W,te){return P.call.apply(P.bind,arguments)}function f(P,W,te){if(!P)throw Error();if(2<arguments.length){var ue=Array.prototype.slice.call(arguments,2);return function(){var Fe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Fe,ue),P.apply(W,Fe)}}return function(){return P.apply(W,arguments)}}function d(P,W,te){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(P,W){var te=Array.prototype.slice.call(arguments,1);return function(){var ue=te.slice();return ue.push.apply(ue,arguments),P.apply(this,ue)}}function p(P,W){function te(){}te.prototype=W.prototype,P.aa=W.prototype,P.prototype=new te,P.prototype.constructor=P,P.Qb=function(ue,Fe,Ke){for(var Lt=Array(arguments.length-2),Lr=2;Lr<arguments.length;Lr++)Lt[Lr-2]=arguments[Lr];return W.prototype[Fe].apply(ue,Lt)}}function g(P){const W=P.length;if(0<W){const te=Array(W);for(let ue=0;ue<W;ue++)te[ue]=P[ue];return te}return[]}function y(P,W){for(let te=1;te<arguments.length;te++){const ue=arguments[te];if(u(ue)){const Fe=P.length||0,Ke=ue.length||0;P.length=Fe+Ke;for(let Lt=0;Lt<Ke;Lt++)P[Fe+Lt]=ue[Lt]}else P.push(ue)}}class x{constructor(W,te){this.i=W,this.j=te,this.h=0,this.g=null}get(){let W;return 0<this.h?(this.h--,W=this.g,this.g=W.next,W.next=null):W=this.i(),W}}function b(P){return/^[\s\xa0]*$/.test(P)}function _(){var P=a.navigator;return P&&(P=P.userAgent)?P:""}function E(P){return E[" "](P),P}E[" "]=function(){};var T=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function k(P,W,te){for(const ue in P)W.call(te,P[ue],ue,P)}function I(P,W){for(const te in P)W.call(void 0,P[te],te,P)}function R(P){const W={};for(const te in P)W[te]=P[te];return W}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(P,W){let te,ue;for(let Fe=1;Fe<arguments.length;Fe++){ue=arguments[Fe];for(te in ue)P[te]=ue[te];for(let Ke=0;Ke<D.length;Ke++)te=D[Ke],Object.prototype.hasOwnProperty.call(ue,te)&&(P[te]=ue[te])}}function M(P){var W=1;P=P.split(":");const te=[];for(;0<W&&P.length;)te.push(P.shift()),W--;return P.length&&te.push(P.join(":")),te}function z(P){a.setTimeout(()=>{throw P},0)}function F(){var P=ie;let W=null;return P.g&&(W=P.g,P.g=P.g.next,P.g||(P.h=null),W.next=null),W}class H{constructor(){this.h=this.g=null}add(W,te){const ue=Q.get();ue.set(W,te),this.h?this.h.next=ue:this.g=ue,this.h=ue}}var Q=new x(()=>new J,P=>P.reset());class J{constructor(){this.next=this.g=this.h=null}set(W,te){this.h=W,this.g=te,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,Z=!1,ie=new H,q=()=>{const P=a.Promise.resolve(void 0);ne=()=>{P.then(U)}};var U=()=>{for(var P;P=F();){try{P.h.call(P.g)}catch(te){z(te)}var W=Q;W.j(P),100>W.h&&(W.h++,P.next=W.g,W.g=P)}Z=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(P,W){this.type=P,this.g=this.target=W,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var P=!1,W=Object.defineProperty({},"passive",{get:function(){P=!0}});try{const te=()=>{};a.addEventListener("test",te,W),a.removeEventListener("test",te,W)}catch{}return P}();function ee(P,W){if(V.call(this,P?P.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,P){var te=this.type=P.type,ue=P.changedTouches&&P.changedTouches.length?P.changedTouches[0]:null;if(this.target=P.target||P.srcElement,this.g=W,W=P.relatedTarget){if(T){e:{try{E(W.nodeName);var Fe=!0;break e}catch{}Fe=!1}Fe||(W=null)}}else te=="mouseover"?W=P.fromElement:te=="mouseout"&&(W=P.toElement);this.relatedTarget=W,ue?(this.clientX=ue.clientX!==void 0?ue.clientX:ue.pageX,this.clientY=ue.clientY!==void 0?ue.clientY:ue.pageY,this.screenX=ue.screenX||0,this.screenY=ue.screenY||0):(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0),this.button=P.button,this.key=P.key||"",this.ctrlKey=P.ctrlKey,this.altKey=P.altKey,this.shiftKey=P.shiftKey,this.metaKey=P.metaKey,this.pointerId=P.pointerId||0,this.pointerType=typeof P.pointerType=="string"?P.pointerType:fe[P.pointerType]||"",this.state=P.state,this.i=P,P.defaultPrevented&&ee.aa.h.call(this)}}p(ee,V);var fe={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var P=this.i;P.preventDefault?P.preventDefault():P.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),ye=0;function _e(P,W,te,ue,Fe){this.listener=P,this.proxy=null,this.src=W,this.type=te,this.capture=!!ue,this.ha=Fe,this.key=++ye,this.da=this.fa=!1}function De(P){P.da=!0,P.listener=null,P.proxy=null,P.src=null,P.ha=null}function me(P){this.src=P,this.g={},this.h=0}me.prototype.add=function(P,W,te,ue,Fe){var Ke=P.toString();P=this.g[Ke],P||(P=this.g[Ke]=[],this.h++);var Lt=$e(P,W,ue,Fe);return-1<Lt?(W=P[Lt],te||(W.fa=!1)):(W=new _e(W,this.src,Ke,!!ue,Fe),W.fa=te,P.push(W)),W};function de(P,W){var te=W.type;if(te in P.g){var ue=P.g[te],Fe=Array.prototype.indexOf.call(ue,W,void 0),Ke;(Ke=0<=Fe)&&Array.prototype.splice.call(ue,Fe,1),Ke&&(De(W),P.g[te].length==0&&(delete P.g[te],P.h--))}}function $e(P,W,te,ue){for(var Fe=0;Fe<P.length;++Fe){var Ke=P[Fe];if(!Ke.da&&Ke.listener==W&&Ke.capture==!!te&&Ke.ha==ue)return Fe}return-1}var Pe="closure_lm_"+(1e6*Math.random()|0),Ze={};function it(P,W,te,ue,Fe){if(Array.isArray(W)){for(var Ke=0;Ke<W.length;Ke++)it(P,W[Ke],te,ue,Fe);return null}return te=tn(te),P&&P[Ee]?P.K(W,te,l(ue)?!!ue.capture:!1,Fe):Ge(P,W,te,!1,ue,Fe)}function Ge(P,W,te,ue,Fe,Ke){if(!W)throw Error("Invalid event type");var Lt=l(Fe)?!!Fe.capture:!!Fe,Lr=Ue(P);if(Lr||(P[Pe]=Lr=new me(P)),te=Lr.add(W,te,ue,Lt,Ke),te.proxy)return te;if(ue=et(),te.proxy=ue,ue.src=P,ue.listener=te,P.addEventListener)K||(Fe=Lt),Fe===void 0&&(Fe=!1),P.addEventListener(W.toString(),ue,Fe);else if(P.attachEvent)P.attachEvent(xt(W.toString()),ue);else if(P.addListener&&P.removeListener)P.addListener(ue);else throw Error("addEventListener and attachEvent are unavailable.");return te}function et(){function P(te){return W.call(P.src,P.listener,te)}const W=Dt;return P}function ut(P,W,te,ue,Fe){if(Array.isArray(W))for(var Ke=0;Ke<W.length;Ke++)ut(P,W[Ke],te,ue,Fe);else ue=l(ue)?!!ue.capture:!!ue,te=tn(te),P&&P[Ee]?(P=P.i,W=String(W).toString(),W in P.g&&(Ke=P.g[W],te=$e(Ke,te,ue,Fe),-1<te&&(De(Ke[te]),Array.prototype.splice.call(Ke,te,1),Ke.length==0&&(delete P.g[W],P.h--)))):P&&(P=Ue(P))&&(W=P.g[W.toString()],P=-1,W&&(P=$e(W,te,ue,Fe)),(te=-1<P?W[P]:null)&&Tt(te))}function Tt(P){if(typeof P!="number"&&P&&!P.da){var W=P.src;if(W&&W[Ee])de(W.i,P);else{var te=P.type,ue=P.proxy;W.removeEventListener?W.removeEventListener(te,ue,P.capture):W.detachEvent?W.detachEvent(xt(te),ue):W.addListener&&W.removeListener&&W.removeListener(ue),(te=Ue(W))?(de(te,P),te.h==0&&(te.src=null,W[Pe]=null)):De(P)}}}function xt(P){return P in Ze?Ze[P]:Ze[P]="on"+P}function Dt(P,W){if(P.da)P=!0;else{W=new ee(W,this);var te=P.listener,ue=P.ha||P.src;P.fa&&Tt(P),P=te.call(ue,W)}return P}function Ue(P){return P=P[Pe],P instanceof me?P:null}var Ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function tn(P){return typeof P=="function"?P:(P[Ft]||(P[Ft]=function(W){return P.handleEvent(W)}),P[Ft])}function Re(){X.call(this),this.i=new me(this),this.M=this,this.F=null}p(Re,X),Re.prototype[Ee]=!0,Re.prototype.removeEventListener=function(P,W,te,ue){ut(this,P,W,te,ue)};function Ve(P,W){var te,ue=P.F;if(ue)for(te=[];ue;ue=ue.F)te.push(ue);if(P=P.M,ue=W.type||W,typeof W=="string")W=new V(W,P);else if(W instanceof V)W.target=W.target||P;else{var Fe=W;W=new V(ue,P),L(W,Fe)}if(Fe=!0,te)for(var Ke=te.length-1;0<=Ke;Ke--){var Lt=W.g=te[Ke];Fe=yt(Lt,ue,!0,W)&&Fe}if(Lt=W.g=P,Fe=yt(Lt,ue,!0,W)&&Fe,Fe=yt(Lt,ue,!1,W)&&Fe,te)for(Ke=0;Ke<te.length;Ke++)Lt=W.g=te[Ke],Fe=yt(Lt,ue,!1,W)&&Fe}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var P=this.i,W;for(W in P.g){for(var te=P.g[W],ue=0;ue<te.length;ue++)De(te[ue]);delete P.g[W],P.h--}}this.F=null},Re.prototype.K=function(P,W,te,ue){return this.i.add(String(P),W,!1,te,ue)},Re.prototype.L=function(P,W,te,ue){return this.i.add(String(P),W,!0,te,ue)};function yt(P,W,te,ue){if(W=P.i.g[String(W)],!W)return!0;W=W.concat();for(var Fe=!0,Ke=0;Ke<W.length;++Ke){var Lt=W[Ke];if(Lt&&!Lt.da&&Lt.capture==te){var Lr=Lt.listener,Is=Lt.ha||Lt.src;Lt.fa&&de(P.i,Lt),Fe=Lr.call(Is,ue)!==!1&&Fe}}return Fe&&!ue.defaultPrevented}function $t(P,W,te){if(typeof P=="function")te&&(P=d(P,te));else if(P&&typeof P.handleEvent=="function")P=d(P.handleEvent,P);else throw Error("Invalid listener argument");return 2147483647<Number(W)?-1:a.setTimeout(P,W||0)}function Bt(P){P.g=$t(()=>{P.g=null,P.i&&(P.i=!1,Bt(P))},P.l);const W=P.h;P.h=null,P.m.apply(null,W)}class dn extends X{constructor(W,te){super(),this.m=W,this.l=te,this.h=null,this.i=!1,this.g=null}j(W){this.h=arguments,this.g?this.i=!0:Bt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nn(P){X.call(this),this.h=P,this.g={}}p(Nn,X);var dr=[];function ti(P){k(P.g,function(W,te){this.g.hasOwnProperty(te)&&Tt(W)},P),P.g={}}Nn.prototype.N=function(){Nn.aa.N.call(this),ti(this)},Nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=a.JSON.stringify,Bn=a.JSON.parse,Xr=class{stringify(P){return a.JSON.stringify(P,void 0)}parse(P){return a.JSON.parse(P,void 0)}};function ir(){}ir.prototype.h=null;function zs(P){return P.h||(P.h=P.i())}function gi(){}var ni={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yi(){V.call(this,"d")}p(yi,V);function Ar(){V.call(this,"c")}p(Ar,V);var Vs={},Yu=null;function Eo(){return Yu=Yu||new Re}Vs.La="serverreachability";function Ra(P){V.call(this,Vs.La,P)}p(Ra,V);function kr(P){const W=Eo();Ve(W,new Ra(W))}Vs.STAT_EVENT="statevent";function ui(P,W){V.call(this,Vs.STAT_EVENT,P),this.stat=W}p(ui,V);function $r(P){const W=Eo();Ve(W,new ui(W,P))}Vs.Ma="timingevent";function os(P,W){V.call(this,Vs.Ma,P),this.size=W}p(os,V);function yr(P,W){if(typeof P!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){P()},W)}function vi(){this.g=!0}vi.prototype.xa=function(){this.g=!1};function Hs(P,W,te,ue,Fe,Ke){P.info(function(){if(P.g)if(Ke)for(var Lt="",Lr=Ke.split("&"),Is=0;Is<Lr.length;Is++){var lr=Lr[Is].split("=");if(1<lr.length){var Br=lr[0];lr=lr[1];var zi=Br.split("_");Lt=2<=zi.length&&zi[1]=="type"?Lt+(Br+"="+lr+"&"):Lt+(Br+"=redacted&")}}else Lt=null;else Lt=Ke;return"XMLHTTP REQ ("+ue+") [attempt "+Fe+"]: "+W+`
`+te+`
`+Lt})}function Ts(P,W,te,ue,Fe,Ke,Lt){P.info(function(){return"XMLHTTP RESP ("+ue+") [ attempt "+Fe+"]: "+W+`
`+te+`
`+Ke+" "+Lt})}function ro(P,W,te,ue){P.info(function(){return"XMLHTTP TEXT ("+W+"): "+qf(P,te)+(ue?" "+ue:"")})}function pu(P,W){P.info(function(){return"TIMEOUT: "+W})}vi.prototype.info=function(){};function qf(P,W){if(!P.g)return W;if(!W)return null;try{var te=JSON.parse(W);if(te){for(P=0;P<te.length;P++)if(Array.isArray(te[P])){var ue=te[P];if(!(2>ue.length)){var Fe=ue[1];if(Array.isArray(Fe)&&!(1>Fe.length)){var Ke=Fe[0];if(Ke!="noop"&&Ke!="stop"&&Ke!="close")for(var Lt=1;Lt<Fe.length;Lt++)Fe[Lt]=""}}}}return kn(te)}catch{return W}}var hr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ku={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Di;function Qo(){}p(Qo,ir),Qo.prototype.g=function(){return new XMLHttpRequest},Qo.prototype.i=function(){return{}},Di=new Qo;function io(P,W,te,ue){this.j=P,this.i=W,this.l=te,this.R=ue||1,this.U=new Nn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mh}function mh(){this.i=null,this.g="",this.h=!1}var Wf={},Wc={};function Gc(P,W,te){P.L=1,P.v=jn(pt(W)),P.m=te,P.P=!0,ql(P,null)}function ql(P,W){P.F=Date.now(),Yn(P),P.A=pt(P.v);var te=P.A,ue=P.R;Array.isArray(ue)||(ue=[String(ue)]),Kl(te.i,"t",ue),P.C=0,te=P.j.J,P.h=new mh,P.g=Wx(P.j,te?W:null,!P.m),0<P.O&&(P.M=new dn(d(P.Y,P,P.g),P.O)),W=P.U,te=P.g,ue=P.ca;var Fe="readystatechange";Array.isArray(Fe)||(Fe&&(dr[0]=Fe.toString()),Fe=dr);for(var Ke=0;Ke<Fe.length;Ke++){var Lt=it(te,Fe[Ke],ue||W.handleEvent,!1,W.h||W);if(!Lt)break;W.g[Lt.key]=Lt}W=P.H?R(P.H):{},P.m?(P.u||(P.u="POST"),W["Content-Type"]="application/x-www-form-urlencoded",P.g.ea(P.A,P.u,P.m,W)):(P.u="GET",P.g.ea(P.A,P.u,null,W)),kr(),Hs(P.i,P.u,P.A,P.l,P.R,P.m)}io.prototype.ca=function(P){P=P.target;const W=this.M;W&&Ir(P)==3?W.j():this.Y(P)},io.prototype.Y=function(P){try{if(P==this.g)e:{const zi=Ir(this.g);var W=this.g.Ba();const So=this.g.Z();if(!(3>zi)&&(zi!=3||this.g&&(this.h.h||this.g.oa()||ls(this.g)))){this.J||zi!=4||W==7||(W==8||0>=So?kr(3):kr(2)),Ss(this);var te=this.g.Z();this.X=te;t:if(Wl(this)){var ue=ls(this.g);P="";var Fe=ue.length,Ke=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){as(this),mu(this);var Lt="";break t}this.h.i=new a.TextDecoder}for(W=0;W<Fe;W++)this.h.h=!0,P+=this.h.i.decode(ue[W],{stream:!(Ke&&W==Fe-1)});ue.length=0,this.h.g+=P,this.C=0,Lt=this.h.g}else Lt=this.g.oa();if(this.o=te==200,Ts(this.i,this.u,this.A,this.l,this.R,zi,te),this.o){if(this.T&&!this.K){t:{if(this.g){var Lr,Is=this.g;if((Lr=Is.g?Is.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Lr)){var lr=Lr;break t}}lr=null}if(te=lr)ro(this.i,this.l,te,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xu(this,te);else{this.o=!1,this.s=3,$r(12),as(this),mu(this);break e}}if(this.P){te=!0;let Na;for(;!this.J&&this.C<Lt.length;)if(Na=Gl(this,Lt),Na==Wc){zi==4&&(this.s=4,$r(14),te=!1),ro(this.i,this.l,null,"[Incomplete Response]");break}else if(Na==Wf){this.s=4,$r(15),ro(this.i,this.l,Lt,"[Invalid Chunk]"),te=!1;break}else ro(this.i,this.l,Na,null),Xu(this,Na);if(Wl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zi!=4||Lt.length!=0||this.h.h||(this.s=1,$r(16),te=!1),this.o=this.o&&te,!te)ro(this.i,this.l,Lt,"[Invalid Chunked Response]"),as(this),mu(this);else if(0<Lt.length&&!this.W){this.W=!0;var Br=this.j;Br.g==this&&Br.ba&&!Br.M&&(Br.j.info("Great, no buffering proxy detected. Bytes received: "+Lt.length),tl(Br),Br.M=!0,$r(11))}}else ro(this.i,this.l,Lt,null),Xu(this,Lt);zi==4&&as(this),this.o&&!this.J&&(zi==4?Gr(this.j,this):(this.o=!1,Yn(this)))}else Da(this.g),te==400&&0<Lt.indexOf("Unknown SID")?(this.s=3,$r(12)):(this.s=0,$r(13)),as(this),mu(this)}}}catch{}finally{}};function Wl(P){return P.g?P.u=="GET"&&P.L!=2&&P.j.Ca:!1}function Gl(P,W){var te=P.C,ue=W.indexOf(`
`,te);return ue==-1?Wc:(te=Number(W.substring(te,ue)),isNaN(te)?Wf:(ue+=1,ue+te>W.length?Wc:(W=W.slice(ue,ue+te),P.C=ue+te,W)))}io.prototype.cancel=function(){this.J=!0,as(this)};function Yn(P){P.S=Date.now()+P.I,Gf(P,P.I)}function Gf(P,W){if(P.B!=null)throw Error("WatchDog timer not null");P.B=yr(d(P.ba,P),W)}function Ss(P){P.B&&(a.clearTimeout(P.B),P.B=null)}io.prototype.ba=function(){this.B=null;const P=Date.now();0<=P-this.S?(pu(this.i,this.A),this.L!=2&&(kr(),$r(17)),as(this),this.s=2,mu(this)):Gf(this,this.S-P)};function mu(P){P.j.G==0||P.J||Gr(P.j,P)}function as(P){Ss(P);var W=P.M;W&&typeof W.ma=="function"&&W.ma(),P.M=null,ti(P.U),P.g&&(W=P.g,P.g=null,W.abort(),W.ma())}function Xu(P,W){try{var te=P.j;if(te.G!=0&&(te.g==P||As(te.h,P))){if(!P.K&&As(te.h,P)&&te.G==3){try{var ue=te.Da.g.parse(W)}catch{ue=null}if(Array.isArray(ue)&&ue.length==3){var Fe=ue;if(Fe[0]==0){e:if(!te.u){if(te.g)if(te.g.F+3e3<P.F)yh(te),el(te);else break e;um(te),$r(18)}}else te.za=Fe[1],0<te.za-te.T&&37500>Fe[2]&&te.F&&te.v==0&&!te.C&&(te.C=yr(d(te.Za,te),6e3));if(1>=gh(te.h)&&te.ca){try{te.ca()}catch{}te.ca=void 0}}else ec(te,11)}else if((P.K||te.g==P)&&yh(te),!b(W))for(Fe=te.Da.g.parse(W),W=0;W<Fe.length;W++){let lr=Fe[W];if(te.T=lr[0],lr=lr[1],te.G==2)if(lr[0]=="c"){te.K=lr[1],te.ia=lr[2];const Br=lr[3];Br!=null&&(te.la=Br,te.j.info("VER="+te.la));const zi=lr[4];zi!=null&&(te.Aa=zi,te.j.info("SVER="+te.Aa));const So=lr[5];So!=null&&typeof So=="number"&&0<So&&(ue=1.5*So,te.L=ue,te.j.info("backChannelRequestTimeoutMs_="+ue)),ue=te;const Na=P.g;if(Na){const vh=Na.g?Na.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vh){var Ke=ue.h;Ke.g||vh.indexOf("spdy")==-1&&vh.indexOf("quic")==-1&&vh.indexOf("h2")==-1||(Ke.j=Ke.l,Ke.g=new Set,Ke.h&&(ae(Ke,Ke.h),Ke.h=null))}if(ue.D){const ag=Na.g?Na.g.getResponseHeader("X-HTTP-Session-Id"):null;ag&&(ue.ya=ag,on(ue.I,ue.D,ag))}}te.G=3,te.l&&te.l.ua(),te.ba&&(te.R=Date.now()-P.F,te.j.info("Handshake RTT: "+te.R+"ms")),ue=te;var Lt=P;if(ue.qa=sg(ue,ue.J?ue.ia:null,ue.W),Lt.K){we(ue.h,Lt);var Lr=Lt,Is=ue.L;Is&&(Lr.I=Is),Lr.B&&(Ss(Lr),Yn(Lr)),ue.g=Lt}else am(ue);0<te.i.length&&Jl(te)}else lr[0]!="stop"&&lr[0]!="close"||ec(te,7);else te.G==3&&(lr[0]=="stop"||lr[0]=="close"?lr[0]=="stop"?ec(te,7):Qi(te):lr[0]!="noop"&&te.l&&te.l.ta(lr),te.v=0)}}kr(4)}catch{}}var Yf=class{constructor(P,W){this.g=P,this.map=W}};function Qu(P){this.l=P||10,a.PerformanceNavigationTiming?(P=a.performance.getEntriesByType("navigation"),P=0<P.length&&(P[0].nextHopProtocol=="hq"||P[0].nextHopProtocol=="h2")):P=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=P?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cs(P){return P.h?!0:P.g?P.g.size>=P.j:!1}function gh(P){return P.h?1:P.g?P.g.size:0}function As(P,W){return P.h?P.h==W:P.g?P.g.has(W):!1}function ae(P,W){P.g?P.g.add(W):P.h=W}function we(P,W){P.h&&P.h==W?P.h=null:P.g&&P.g.has(W)&&P.g.delete(W)}Qu.prototype.cancel=function(){if(this.i=pe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const P of this.g.values())P.cancel();this.g.clear()}};function pe(P){if(P.h!=null)return P.i.concat(P.h.D);if(P.g!=null&&P.g.size!==0){let W=P.i;for(const te of P.g.values())W=W.concat(te.D);return W}return g(P.i)}function ke(P){if(P.V&&typeof P.V=="function")return P.V();if(typeof Map<"u"&&P instanceof Map||typeof Set<"u"&&P instanceof Set)return Array.from(P.values());if(typeof P=="string")return P.split("");if(u(P)){for(var W=[],te=P.length,ue=0;ue<te;ue++)W.push(P[ue]);return W}W=[],te=0;for(ue in P)W[te++]=P[ue];return W}function Oe(P){if(P.na&&typeof P.na=="function")return P.na();if(!P.V||typeof P.V!="function"){if(typeof Map<"u"&&P instanceof Map)return Array.from(P.keys());if(!(typeof Set<"u"&&P instanceof Set)){if(u(P)||typeof P=="string"){var W=[];P=P.length;for(var te=0;te<P;te++)W.push(te);return W}W=[],te=0;for(const ue in P)W[te++]=ue;return W}}}function Ae(P,W){if(P.forEach&&typeof P.forEach=="function")P.forEach(W,void 0);else if(u(P)||typeof P=="string")Array.prototype.forEach.call(P,W,void 0);else for(var te=Oe(P),ue=ke(P),Fe=ue.length,Ke=0;Ke<Fe;Ke++)W.call(void 0,ue[Ke],te&&te[Ke],P)}var tt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ht(P,W){if(P){P=P.split("&");for(var te=0;te<P.length;te++){var ue=P[te].indexOf("="),Fe=null;if(0<=ue){var Ke=P[te].substring(0,ue);Fe=P[te].substring(ue+1)}else Ke=P[te];W(Ke,Fe?decodeURIComponent(Fe.replace(/\+/g," ")):"")}}}function gt(P){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,P instanceof gt){this.h=P.h,At(this,P.j),this.o=P.o,this.g=P.g,zt(this,P.s),this.l=P.l;var W=P.i,te=new qs;te.i=W.i,W.g&&(te.g=new Map(W.g),te.h=W.h),Tn(this,te),this.m=P.m}else P&&(W=String(P).match(tt))?(this.h=!1,At(this,W[1]||"",!0),this.o=an(W[2]||""),this.g=an(W[3]||"",!0),zt(this,W[4]),this.l=an(W[5]||"",!0),Tn(this,W[6]||"",!0),this.m=an(W[7]||"")):(this.h=!1,this.i=new qs(null,this.h))}gt.prototype.toString=function(){var P=[],W=this.j;W&&P.push(Zn(W,Jo,!0),":");var te=this.g;return(te||W=="file")&&(P.push("//"),(W=this.o)&&P.push(Zn(W,Jo,!0),"@"),P.push(encodeURIComponent(String(te)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),te=this.s,te!=null&&P.push(":",String(te))),(te=this.l)&&(this.g&&te.charAt(0)!="/"&&P.push("/"),P.push(Zn(te,te.charAt(0)=="/"?Kf:Ju,!0))),(te=this.i.toString())&&P.push("?",te),(te=this.m)&&P.push("#",Zn(te,Xf)),P.join("")};function pt(P){return new gt(P)}function At(P,W,te){P.j=te?an(W,!0):W,P.j&&(P.j=P.j.replace(/:$/,""))}function zt(P,W){if(W){if(W=Number(W),isNaN(W)||0>W)throw Error("Bad port number "+W);P.s=W}else P.s=null}function Tn(P,W,te){W instanceof qs?(P.i=W,Pa(P.i,P.h)):(te||(W=Zn(W,Yl)),P.i=new qs(W,P.h))}function on(P,W,te){P.i.set(W,te)}function jn(P){return on(P,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),P}function an(P,W){return P?W?decodeURI(P.replace(/%25/g,"%2525")):decodeURIComponent(P):""}function Zn(P,W,te){return typeof P=="string"?(P=encodeURI(P).replace(W,us),te&&(P=P.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P):null}function us(P){return P=P.charCodeAt(0),"%"+(P>>4&15).toString(16)+(P&15).toString(16)}var Jo=/[#\/\?@]/g,Ju=/[#\?:]/g,Kf=/[#\?]/g,Yl=/[#\?@]/g,Xf=/#/g;function qs(P,W){this.h=this.g=null,this.i=P||null,this.j=!!W}function Ni(P){P.g||(P.g=new Map,P.h=0,P.i&&ht(P.i,function(W,te){P.add(decodeURIComponent(W.replace(/\+/g," ")),te)}))}e=qs.prototype,e.add=function(P,W){Ni(this),this.i=null,P=ea(this,P);var te=this.g.get(P);return te||this.g.set(P,te=[]),te.push(W),this.h+=1,this};function Ws(P,W){Ni(P),W=ea(P,W),P.g.has(W)&&(P.i=null,P.h-=P.g.get(W).length,P.g.delete(W))}function Zo(P,W){return Ni(P),W=ea(P,W),P.g.has(W)}e.forEach=function(P,W){Ni(this),this.g.forEach(function(te,ue){te.forEach(function(Fe){P.call(W,Fe,ue,this)},this)},this)},e.na=function(){Ni(this);const P=Array.from(this.g.values()),W=Array.from(this.g.keys()),te=[];for(let ue=0;ue<W.length;ue++){const Fe=P[ue];for(let Ke=0;Ke<Fe.length;Ke++)te.push(W[ue])}return te},e.V=function(P){Ni(this);let W=[];if(typeof P=="string")Zo(this,P)&&(W=W.concat(this.g.get(ea(this,P))));else{P=Array.from(this.g.values());for(let te=0;te<P.length;te++)W=W.concat(P[te])}return W},e.set=function(P,W){return Ni(this),this.i=null,P=ea(this,P),Zo(this,P)&&(this.h-=this.g.get(P).length),this.g.set(P,[W]),this.h+=1,this},e.get=function(P,W){return P?(P=this.V(P),0<P.length?String(P[0]):W):W};function Kl(P,W,te){Ws(P,W),0<te.length&&(P.i=null,P.g.set(ea(P,W),g(te)),P.h+=te.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const P=[],W=Array.from(this.g.keys());for(var te=0;te<W.length;te++){var ue=W[te];const Ke=encodeURIComponent(String(ue)),Lt=this.V(ue);for(ue=0;ue<Lt.length;ue++){var Fe=Ke;Lt[ue]!==""&&(Fe+="="+encodeURIComponent(String(Lt[ue]))),P.push(Fe)}}return this.i=P.join("&")};function ea(P,W){return W=String(W),P.j&&(W=W.toLowerCase()),W}function Pa(P,W){W&&!P.j&&(Ni(P),P.i=null,P.g.forEach(function(te,ue){var Fe=ue.toLowerCase();ue!=Fe&&(Ws(this,ue),Kl(this,Fe,te))},P)),P.j=W}function rg(P,W){const te=new vi;if(a.Image){const ue=new Image;ue.onload=h(Ui,te,"TestLoadImage: loaded",!0,W,ue),ue.onerror=h(Ui,te,"TestLoadImage: error",!1,W,ue),ue.onabort=h(Ui,te,"TestLoadImage: abort",!1,W,ue),ue.ontimeout=h(Ui,te,"TestLoadImage: timeout",!1,W,ue),a.setTimeout(function(){ue.ontimeout&&ue.ontimeout()},1e4),ue.src=P}else W(!1)}function Zu(P,W){const te=new vi,ue=new AbortController,Fe=setTimeout(()=>{ue.abort(),Ui(te,"TestPingServer: timeout",!1,W)},1e4);fetch(P,{signal:ue.signal}).then(Ke=>{clearTimeout(Fe),Ke.ok?Ui(te,"TestPingServer: ok",!0,W):Ui(te,"TestPingServer: server error",!1,W)}).catch(()=>{clearTimeout(Fe),Ui(te,"TestPingServer: error",!1,W)})}function Ui(P,W,te,ue,Fe){try{Fe&&(Fe.onload=null,Fe.onerror=null,Fe.onabort=null,Fe.ontimeout=null),ue(te)}catch{}}function L1(){this.g=new Xr}function sm(P,W,te){const ue=te||"";try{Ae(P,function(Fe,Ke){let Lt=Fe;l(Fe)&&(Lt=kn(Fe)),W.push(ue+Ke+"="+encodeURIComponent(Lt))})}catch(Fe){throw W.push(ue+"type="+encodeURIComponent("_badmap")),Fe}}function Xl(P){this.l=P.Ub||null,this.j=P.eb||!1}p(Xl,ir),Xl.prototype.g=function(){return new Yc(this.l,this.j)},Xl.prototype.i=function(P){return function(){return P}}({});function Yc(P,W){Re.call(this),this.D=P,this.o=W,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Yc,Re),e=Yc.prototype,e.open=function(P,W){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=P,this.A=W,this.readyState=1,Kn(this)},e.send=function(P){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const W={headers:this.u,method:this.B,credentials:this.m,cache:void 0};P&&(W.body=P),(this.D||a).fetch(new Request(this.A,W)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,er(this)),this.readyState=0},e.Sa=function(P){if(this.g&&(this.l=P,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=P.headers,this.readyState=2,Kn(this)),this.g&&(this.readyState=3,Kn(this),this.g)))if(this.responseType==="arraybuffer")P.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in P){if(this.j=P.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ig(this)}else P.text().then(this.Ra.bind(this),this.ga.bind(this))};function ig(P){P.j.read().then(P.Pa.bind(P)).catch(P.ga.bind(P))}e.Pa=function(P){if(this.g){if(this.o&&P.value)this.response.push(P.value);else if(!this.o){var W=P.value?P.value:new Uint8Array(0);(W=this.v.decode(W,{stream:!P.done}))&&(this.response=this.responseText+=W)}P.done?er(this):Kn(this),this.readyState==3&&ig(this)}},e.Ra=function(P){this.g&&(this.response=this.responseText=P,er(this))},e.Qa=function(P){this.g&&(this.response=P,er(this))},e.ga=function(){this.g&&er(this)};function er(P){P.readyState=4,P.l=null,P.j=null,P.v=null,Kn(P)}e.setRequestHeader=function(P,W){this.u.append(P,W)},e.getResponseHeader=function(P){return this.h&&this.h.get(P.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const P=[],W=this.h.entries();for(var te=W.next();!te.done;)te=te.value,P.push(te[0]+": "+te[1]),te=W.next();return P.join(`\r
`)};function Kn(P){P.onreadystatechange&&P.onreadystatechange.call(P)}Object.defineProperty(Yc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(P){this.m=P?"include":"same-origin"}});function Ql(P){let W="";return k(P,function(te,ue){W+=ue,W+=":",W+=te,W+=`\r
`}),W}function ge(P,W,te){e:{for(ue in te){var ue=!1;break e}ue=!0}ue||(te=Ql(te),typeof P=="string"?te!=null&&encodeURIComponent(String(te)):on(P,W,te))}function Se(P){Re.call(this),this.headers=new Map,this.o=P||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Se,Re);var Ye=/^https?$/i,Jt=["POST","PUT"];e=Se.prototype,e.Ha=function(P){this.J=P},e.ea=function(P,W,te,ue){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+P);W=W?W.toUpperCase():"GET",this.D=P,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Di.g(),this.v=this.o?zs(this.o):zs(Di),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(W,String(P),!0),this.B=!1}catch(Ke){Un(this,Ke);return}if(P=te||"",te=new Map(this.headers),ue)if(Object.getPrototypeOf(ue)===Object.prototype)for(var Fe in ue)te.set(Fe,ue[Fe]);else if(typeof ue.keys=="function"&&typeof ue.get=="function")for(const Ke of ue.keys())te.set(Ke,ue.get(Ke));else throw Error("Unknown input type for opt_headers: "+String(ue));ue=Array.from(te.keys()).find(Ke=>Ke.toLowerCase()=="content-type"),Fe=a.FormData&&P instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Jt,W,void 0))||ue||Fe||te.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ke,Lt]of te)this.g.setRequestHeader(Ke,Lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vr(this),this.u=!0,this.g.send(P),this.u=!1}catch(Ke){Un(this,Ke)}};function Un(P,W){P.h=!1,P.g&&(P.j=!0,P.g.abort(),P.j=!1),P.l=W,P.m=5,ur(P),un(P)}function ur(P){P.A||(P.A=!0,Ve(P,"complete"),Ve(P,"error"))}e.abort=function(P){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=P||7,Ve(this,"complete"),Ve(this,"abort"),un(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),Se.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Fr(this):this.bb())},e.bb=function(){Fr(this)};function Fr(P){if(P.h&&typeof o<"u"&&(!P.v[1]||Ir(P)!=4||P.Z()!=2)){if(P.u&&Ir(P)==4)$t(P.Ea,0,P);else if(Ve(P,"readystatechange"),Ir(P)==4){P.h=!1;try{const Lt=P.Z();e:switch(Lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var W=!0;break e;default:W=!1}var te;if(!(te=W)){var ue;if(ue=Lt===0){var Fe=String(P.D).match(tt)[1]||null;!Fe&&a.self&&a.self.location&&(Fe=a.self.location.protocol.slice(0,-1)),ue=!Ye.test(Fe?Fe.toLowerCase():"")}te=ue}if(te)Ve(P,"complete"),Ve(P,"success");else{P.m=6;try{var Ke=2<Ir(P)?P.g.statusText:""}catch{Ke=""}P.l=Ke+" ["+P.Z()+"]",ur(P)}}finally{un(P)}}}}function un(P,W){if(P.g){vr(P);const te=P.g,ue=P.v[0]?()=>{}:null;P.g=null,P.v=null,W||Ve(P,"ready");try{te.onreadystatechange=ue}catch{}}}function vr(P){P.I&&(a.clearTimeout(P.I),P.I=null)}e.isActive=function(){return!!this.g};function Ir(P){return P.g?P.g.readyState:0}e.Z=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(P){if(this.g){var W=this.g.responseText;return P&&W.indexOf(P)==0&&(W=W.substring(P.length)),Bn(W)}};function ls(P){try{if(!P.g)return null;if("response"in P.g)return P.g.response;switch(P.H){case"":case"text":return P.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in P.g)return P.g.mozResponseArrayBuffer}return null}catch{return null}}function Da(P){const W={};P=(P.g&&2<=Ir(P)&&P.g.getAllResponseHeaders()||"").split(`\r
`);for(let ue=0;ue<P.length;ue++){if(b(P[ue]))continue;var te=M(P[ue]);const Fe=te[0];if(te=te[1],typeof te!="string")continue;te=te.trim();const Ke=W[Fe]||[];W[Fe]=Ke,Ke.push(te)}I(W,function(ue){return ue.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(P,W,te){return te&&te.internalChannelParams&&te.internalChannelParams[P]||W}function Kc(P){this.Aa=0,this.i=[],this.j=new vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,P),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,P),this.cb=bi("retryDelaySeedMs",1e4,P),this.Wa=bi("forwardChannelMaxRetries",2,P),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,P),this.pa=P&&P.xmlHttpFactory||void 0,this.Xa=P&&P.Tb||void 0,this.Ca=P&&P.useFetchStreams||!1,this.L=void 0,this.J=P&&P.supportsCrossDomainXhr||!1,this.K="",this.h=new Qu(P&&P.concurrentRequestLimit),this.Da=new L1,this.P=P&&P.fastHandshake||!1,this.O=P&&P.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=P&&P.Rb||!1,P&&P.xa&&this.j.xa(),P&&P.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&P&&P.detectBufferingProxy||!1,this.ja=void 0,P&&P.longPollingTimeout&&0<P.longPollingTimeout&&(this.ja=P.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Kc.prototype,e.la=8,e.G=1,e.connect=function(P,W,te,ue){$r(0),this.W=P,this.H=W||{},te&&ue!==void 0&&(this.H.OSID=te,this.H.OAID=ue),this.F=this.X,this.I=sg(this,null,this.W),Jl(this)};function Qi(P){if(om(P),P.G==3){var W=P.U++,te=pt(P.I);if(on(te,"SID",P.K),on(te,"RID",W),on(te,"TYPE","terminate"),Qf(P,te),W=new io(P,P.j,W),W.L=2,W.v=jn(pt(te)),te=!1,a.navigator&&a.navigator.sendBeacon)try{te=a.navigator.sendBeacon(W.v.toString(),"")}catch{}!te&&a.Image&&(new Image().src=W.v,te=!0),te||(W.g=Wx(W.j,null),W.g.ea(W.v)),W.F=Date.now(),Yn(W)}qx(P)}function el(P){P.g&&(tl(P),P.g.cancel(),P.g=null)}function om(P){el(P),P.u&&(a.clearTimeout(P.u),P.u=null),yh(P),P.h.cancel(),P.s&&(typeof P.s=="number"&&a.clearTimeout(P.s),P.s=null)}function Jl(P){if(!Cs(P.h)&&!P.s){P.s=!0;var W=P.Ga;ne||q(),Z||(ne(),Z=!0),ie.add(W,P),P.B=0}}function Hx(P,W){return gh(P.h)>=P.h.j-(P.s?1:0)?!1:P.s?(P.i=W.D.concat(P.i),!0):P.G==1||P.G==2||P.B>=(P.Va?0:P.Wa)?!1:(P.s=yr(d(P.Ga,P,W),Zl(P,P.B)),P.B++,!0)}e.Ga=function(P){if(this.s)if(this.s=null,this.G==1){if(!P){this.U=Math.floor(1e5*Math.random()),P=this.U++;const Fe=new io(this,this.j,P);let Ke=this.o;if(this.S&&(Ke?(Ke=R(Ke),L(Ke,this.S)):Ke=this.S),this.m!==null||this.O||(Fe.H=Ke,Ke=null),this.P)e:{for(var W=0,te=0;te<this.i.length;te++){t:{var ue=this.i[te];if("__data__"in ue.map&&(ue=ue.map.__data__,typeof ue=="string")){ue=ue.length;break t}ue=void 0}if(ue===void 0)break;if(W+=ue,4096<W){W=te;break e}if(W===4096||te===this.i.length-1){W=te+1;break e}}W=1e3}else W=1e3;W=ks(this,Fe,W),te=pt(this.I),on(te,"RID",P),on(te,"CVER",22),this.D&&on(te,"X-HTTP-Session-Id",this.D),Qf(this,te),Ke&&(this.O?W="headers="+encodeURIComponent(String(Ql(Ke)))+"&"+W:this.m&&ge(te,this.m,Ke)),ae(this.h,Fe),this.Ua&&on(te,"TYPE","init"),this.P?(on(te,"$req",W),on(te,"SID","null"),Fe.T=!0,Gc(Fe,te,null)):Gc(Fe,te,W),this.G=2}}else this.G==3&&(P?Gs(this,P):this.i.length==0||Cs(this.h)||Gs(this))};function Gs(P,W){var te;W?te=W.l:te=P.U++;const ue=pt(P.I);on(ue,"SID",P.K),on(ue,"RID",te),on(ue,"AID",P.T),Qf(P,ue),P.m&&P.o&&ge(ue,P.m,P.o),te=new io(P,P.j,te,P.B+1),P.m===null&&(te.H=P.o),W&&(P.i=W.D.concat(P.i)),W=ks(P,te,1e3),te.I=Math.round(.5*P.wa)+Math.round(.5*P.wa*Math.random()),ae(P.h,te),Gc(te,ue,W)}function Qf(P,W){P.H&&k(P.H,function(te,ue){on(W,ue,te)}),P.l&&Ae({},function(te,ue){on(W,ue,te)})}function ks(P,W,te){te=Math.min(P.i.length,te);var ue=P.l?d(P.l.Na,P.l,P):null;e:{var Fe=P.i;let Ke=-1;for(;;){const Lt=["count="+te];Ke==-1?0<te?(Ke=Fe[0].g,Lt.push("ofs="+Ke)):Ke=0:Lt.push("ofs="+Ke);let Lr=!0;for(let Is=0;Is<te;Is++){let lr=Fe[Is].g;const Br=Fe[Is].map;if(lr-=Ke,0>lr)Ke=Math.max(0,Fe[Is].g-100),Lr=!1;else try{sm(Br,Lt,"req"+lr+"_")}catch{ue&&ue(Br)}}if(Lr){ue=Lt.join("&");break e}}}return P=P.i.splice(0,te),W.D=P,ue}function am(P){if(!P.g&&!P.u){P.Y=1;var W=P.Fa;ne||q(),Z||(ne(),Z=!0),ie.add(W,P),P.v=0}}function um(P){return P.g||P.u||3<=P.v?!1:(P.Y++,P.u=yr(d(P.Fa,P),Zl(P,P.v)),P.v++,!0)}e.Fa=function(){if(this.u=null,lm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var P=2*this.R;this.j.info("BP detection timer enabled: "+P),this.A=yr(d(this.ab,this),P)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$r(10),el(this),lm(this))};function tl(P){P.A!=null&&(a.clearTimeout(P.A),P.A=null)}function lm(P){P.g=new io(P,P.j,"rpc",P.Y),P.m===null&&(P.g.H=P.o),P.g.O=0;var W=pt(P.qa);on(W,"RID","rpc"),on(W,"SID",P.K),on(W,"AID",P.T),on(W,"CI",P.F?"0":"1"),!P.F&&P.ja&&on(W,"TO",P.ja),on(W,"TYPE","xmlhttp"),Qf(P,W),P.m&&P.o&&ge(W,P.m,P.o),P.L&&(P.g.I=P.L);var te=P.g;P=P.ia,te.L=1,te.v=jn(pt(W)),te.m=null,te.P=!0,ql(te,P)}e.Za=function(){this.C!=null&&(this.C=null,el(this),um(this),$r(19))};function yh(P){P.C!=null&&(a.clearTimeout(P.C),P.C=null)}function Gr(P,W){var te=null;if(P.g==W){yh(P),tl(P),P.g=null;var ue=2}else if(As(P.h,W))te=W.D,we(P.h,W),ue=1;else return;if(P.G!=0){if(W.o)if(ue==1){te=W.m?W.m.length:0,W=Date.now()-W.F;var Fe=P.B;ue=Eo(),Ve(ue,new os(ue,te)),Jl(P)}else am(P);else if(Fe=W.s,Fe==3||Fe==0&&0<W.X||!(ue==1&&Hx(P,W)||ue==2&&um(P)))switch(te&&0<te.length&&(W=P.h,W.i=W.i.concat(te)),Fe){case 1:ec(P,5);break;case 4:ec(P,10);break;case 3:ec(P,6);break;default:ec(P,2)}}}function Zl(P,W){let te=P.Ta+Math.floor(Math.random()*P.cb);return P.isActive()||(te*=2),te*W}function ec(P,W){if(P.j.info("Error code "+W),W==2){var te=d(P.fb,P),ue=P.Xa;const Fe=!ue;ue=new gt(ue||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||At(ue,"https"),jn(ue),Fe?rg(ue.toString(),te):Zu(ue.toString(),te)}else $r(2);P.G=0,P.l&&P.l.sa(W),qx(P),om(P)}e.fb=function(P){P?(this.j.info("Successfully pinged google.com"),$r(2)):(this.j.info("Failed to ping google.com"),$r(1))};function qx(P){if(P.G=0,P.ka=[],P.l){const W=pe(P.h);(W.length!=0||P.i.length!=0)&&(y(P.ka,W),y(P.ka,P.i),P.h.i.length=0,g(P.i),P.i.length=0),P.l.ra()}}function sg(P,W,te){var ue=te instanceof gt?pt(te):new gt(te);if(ue.g!="")W&&(ue.g=W+"."+ue.g),zt(ue,ue.s);else{var Fe=a.location;ue=Fe.protocol,W=W?W+"."+Fe.hostname:Fe.hostname,Fe=+Fe.port;var Ke=new gt(null);ue&&At(Ke,ue),W&&(Ke.g=W),Fe&&zt(Ke,Fe),te&&(Ke.l=te),ue=Ke}return te=P.D,W=P.ya,te&&W&&on(ue,te,W),on(ue,"VER",P.la),Qf(P,ue),ue}function Wx(P,W,te){if(W&&!P.J)throw Error("Can't create secondary domain capable XhrIo object.");return W=P.Ca&&!P.pa?new Se(new Xl({eb:te})):new Se(P.pa),W.Ha(P.J),W}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function M1(){}e=M1.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function og(){}og.prototype.g=function(P,W){return new To(P,W)};function To(P,W){Re.call(this),this.g=new Kc(W),this.l=P,this.h=W&&W.messageUrlParams||null,P=W&&W.messageHeaders||null,W&&W.clientProtocolHeaderRequired&&(P?P["X-Client-Protocol"]="webchannel":P={"X-Client-Protocol":"webchannel"}),this.g.o=P,P=W&&W.initMessageHeaders||null,W&&W.messageContentType&&(P?P["X-WebChannel-Content-Type"]=W.messageContentType:P={"X-WebChannel-Content-Type":W.messageContentType}),W&&W.va&&(P?P["X-WebChannel-Client-Profile"]=W.va:P={"X-WebChannel-Client-Profile":W.va}),this.g.S=P,(P=W&&W.Sb)&&!b(P)&&(this.g.m=P),this.v=W&&W.supportsCrossDomainXhr||!1,this.u=W&&W.sendRawJson||!1,(W=W&&W.httpSessionIdParam)&&!b(W)&&(this.g.D=W,P=this.h,P!==null&&W in P&&(P=this.h,W in P&&delete P[W])),this.j=new Xc(this)}p(To,Re),To.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},To.prototype.close=function(){Qi(this.g)},To.prototype.o=function(P){var W=this.g;if(typeof P=="string"){var te={};te.__data__=P,P=te}else this.u&&(te={},te.__data__=kn(P),P=te);W.i.push(new Yf(W.Ya++,P)),W.G==3&&Jl(W)},To.prototype.N=function(){this.g.l=null,delete this.j,Qi(this.g),delete this.g,To.aa.N.call(this)};function cm(P){yi.call(this),P.__headers__&&(this.headers=P.__headers__,this.statusCode=P.__status__,delete P.__headers__,delete P.__status__);var W=P.__sm__;if(W){e:{for(const te in W){P=te;break e}P=void 0}(this.i=P)&&(P=this.i,W=W!==null&&P in W?W[P]:void 0),this.data=W}else this.data=P}p(cm,yi);function Jf(){Ar.call(this),this.status=1}p(Jf,Ar);function Xc(P){this.g=P}p(Xc,M1),Xc.prototype.ua=function(){Ve(this.g,"a")},Xc.prototype.ta=function(P){Ve(this.g,new cm(P))},Xc.prototype.sa=function(P){Ve(this.g,new Jf)},Xc.prototype.ra=function(){Ve(this.g,"b")},og.prototype.createWebChannel=og.prototype.g,To.prototype.send=To.prototype.o,To.prototype.open=To.prototype.m,To.prototype.close=To.prototype.close,Cye=function(){return new og},Sye=function(){return Eo()},Tye=Vs,o7={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hr.NO_ERROR=0,hr.TIMEOUT=8,hr.HTTP_ERROR=6,s3=hr,Ku.COMPLETE="complete",Eye=Ku,gi.EventType=ni,ni.OPEN="a",ni.CLOSE="b",ni.ERROR="c",ni.MESSAGE="d",Re.prototype.listen=Re.prototype.K,IC=gi,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,_ye=Se}).apply(typeof rD<"u"?rD:typeof self<"u"?self:typeof window<"u"?window:{});const Hne="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}_l.UNAUTHENTICATED=new _l(null),_l.GOOGLE_CREDENTIALS=new _l("google-credentials-uid"),_l.FIRST_PARTY=new _l("first-party-uid"),_l.MOCK_USER=new _l("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XT="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new nL("@firebase/firestore");function N_(){return kb.logLevel}function Zt(e,...t){if(kb.logLevel<=pr.DEBUG){const n=t.map(lW);kb.debug(`Firestore (${XT}): ${e}`,...n)}}function I0(e,...t){if(kb.logLevel<=pr.ERROR){const n=t.map(lW);kb.error(`Firestore (${XT}): ${e}`,...n)}}function ok(e,...t){if(kb.logLevel<=pr.WARN){const n=t.map(lW);kb.warn(`Firestore (${XT}): ${e}`,...n)}}function lW(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(e="Unexpected state"){const t=`FIRESTORE (${XT}) INTERNAL ASSERTION FAILED: `+e;throw I0(t),new Error(t)}function ei(e,t){e||Pn()}function Fn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yt extends Vp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EXe{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class TXe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(_l.UNAUTHENTICATED))}shutdown(){}}class SXe{constructor(t){this.t=t,this.currentUser=_l.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ei(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new f0;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new f0,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Zt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Zt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new f0)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Zt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ei(typeof r.accessToken=="string"),new EXe(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ei(t===null||typeof t=="string"),new _l(t)}}class CXe{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=_l.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class AXe{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new CXe(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(_l.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kXe{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IXe{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){ei(this.o===void 0);const r=s=>{s.error!=null&&Zt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Zt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Zt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Zt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ei(typeof n.token=="string"),this.R=n.token,new kXe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RXe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aye{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=RXe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function _r(e,t){return e<t?-1:e>t?1:0}function DE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{static now(){return go.fromMillis(Date.now())}static fromDate(t){return go.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new go(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Yt(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Yt(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Yt(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Yt(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?_r(this.nanoseconds,t.nanoseconds):_r(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{static fromTimestamp(t){return new Mn(t)}static min(){return new Mn(new go(0,0))}static max(){return new Mn(new go(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(t,n,r){n===void 0?n=0:n>t.length&&Pn(),r===void 0?r=t.length-n:r>t.length-n&&Pn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Hh.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Hh?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=Hh.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=Hh.isNumericId(t),i=Hh.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Hh.extractNumericId(t).compare(Hh.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return xy.fromString(t.substring(4,t.length-2))}}class Fi extends Hh{construct(t,n,r){return new Fi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Yt(ct.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fi(n)}static emptyPath(){return new Fi([])}}const PXe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ga extends Hh{construct(t,n,r){return new ga(t,n,r)}static isValidIdentifier(t){return PXe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ga.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ga(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Yt(ct.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Yt(ct.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Yt(ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Yt(ct.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ga(n)}static emptyPath(){return new ga([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t){this.path=t}static fromPath(t){return new xn(Fi.fromString(t))}static fromName(t){return new xn(Fi.fromString(t).popFirst(5))}static empty(){return new xn(Fi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Fi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Fi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new xn(new Fi(t.slice()))}}function DXe(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Mn.fromTimestamp(r===1e9?new go(n+1,0):new go(n,r));return new Ny(i,xn.empty(),t)}function NXe(e){return new Ny(e.readTime,e.key,-1)}class Ny{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Ny(Mn.min(),xn.empty(),-1)}static max(){return new Ny(Mn.max(),xn.empty(),-1)}}function OXe(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=xn.comparator(e.documentKey,t.documentKey),n!==0?n:_r(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Xe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LXe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QT(e){if(e.code!==ct.FAILED_PRECONDITION||e.message!==$Xe)throw e;Zt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Pn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new dt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof dt?n:dt.resolve(n)}catch(n){return dt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.reject(n)}static resolve(t){return new dt((n,r)=>{n(t)})}static reject(t){return new dt((n,r)=>{r(t)})}static waitFor(t){return new dt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=dt.resolve(!1);for(const r of t)n=n.next(i=>i?dt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new dt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new dt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function MXe(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function JT(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}sL.oe=-1;function oL(e){return e==null}function GO(e){return e===0&&1/e==-1/0}function FXe(e){return typeof e=="number"&&Number.isInteger(e)&&!GO(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BXe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=qne(t)),t=jXe(e.get(n),t);return qne(t)}function jXe(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function qne(e){return e+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wne(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function y1(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function kye(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(t,n){this.comparator=t,this.root=n||da.EMPTY}insert(t,n){return new ss(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,da.BLACK,null,null))}remove(t){return new ss(this.comparator,this.root.remove(t,this.comparator).copy(null,null,da.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new iD(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new iD(this.root,t,this.comparator,!1)}getReverseIterator(){return new iD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new iD(this.root,t,this.comparator,!0)}}class iD{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class da{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??da.RED,this.left=i??da.EMPTY,this.right=s??da.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new da(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return da.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return da.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,da.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,da.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pn();const t=this.left.check();if(t!==this.right.check())throw Pn();return t+(this.isRed()?0:1)}}da.EMPTY=null,da.RED=!0,da.BLACK=!1;da.EMPTY=new class{constructor(){this.size=0}get key(){throw Pn()}get value(){throw Pn()}get color(){throw Pn()}get left(){throw Pn()}get right(){throw Pn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new da(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t){this.comparator=t,this.data=new ss(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gne(this.data.getIterator())}getIteratorFrom(t){return new Gne(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof yo)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new yo(this.comparator);return n.data=t,n}}class Gne{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t){this.fields=t,t.sort(ga.comparator)}static empty(){return new Ec([])}unionWith(t){let n=new yo(ga.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Ec(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return DE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iye extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Iye("Invalid base64 string: "+s):s}}(t);return new Sa(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Sa(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return _r(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Sa.EMPTY_BYTE_STRING=new Sa("");const UXe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oy(e){if(ei(!!e),typeof e=="string"){let t=0;const n=UXe.exec(e);if(ei(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ls(e.seconds),nanos:Ls(e.nanos)}}function Ls(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function $y(e){return typeof e=="string"?Sa.fromBase64String(e):Sa.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function aL(e){const t=e.mapValue.fields.__previous_value__;return cW(t)?aL(t):t}function ak(e){const t=Oy(e.mapValue.fields.__local_write_time__.timestampValue);return new go(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zXe{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class uk{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new uk("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof uk&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ly(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cW(e)?4:HXe(e)?9007199254740991:VXe(e)?10:11:Pn()}function Ap(e,t){if(e===t)return!0;const n=Ly(e);if(n!==Ly(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ak(e).isEqual(ak(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Oy(i.timestampValue),a=Oy(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return $y(i.bytesValue).isEqual($y(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Ls(i.geoPointValue.latitude)===Ls(s.geoPointValue.latitude)&&Ls(i.geoPointValue.longitude)===Ls(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ls(i.integerValue)===Ls(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ls(i.doubleValue),a=Ls(s.doubleValue);return o===a?GO(o)===GO(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return DE(e.arrayValue.values||[],t.arrayValue.values||[],Ap);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Wne(o)!==Wne(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Ap(o[u],a[u])))return!1;return!0}(e,t);default:return Pn()}}function lk(e,t){return(e.values||[]).find(n=>Ap(n,t))!==void 0}function NE(e,t){if(e===t)return 0;const n=Ly(e),r=Ly(t);if(n!==r)return _r(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _r(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Ls(s.integerValue||s.doubleValue),u=Ls(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Yne(e.timestampValue,t.timestampValue);case 4:return Yne(ak(e),ak(t));case 5:return _r(e.stringValue,t.stringValue);case 6:return function(s,o){const a=$y(s),u=$y(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=_r(a[l],u[l]);if(c!==0)return c}return _r(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=_r(Ls(s.latitude),Ls(o.latitude));return a!==0?a:_r(Ls(s.longitude),Ls(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Kne(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,u,l,c;const f=s.fields||{},d=o.fields||{},h=(a=f.value)===null||a===void 0?void 0:a.arrayValue,p=(u=d.value)===null||u===void 0?void 0:u.arrayValue,g=_r(((l=h==null?void 0:h.values)===null||l===void 0?void 0:l.length)||0,((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0);return g!==0?g:Kne(h,p)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===sD.mapValue&&o===sD.mapValue)return 0;if(s===sD.mapValue)return 1;if(o===sD.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=_r(u[f],c[f]);if(d!==0)return d;const h=NE(a[u[f]],l[c[f]]);if(h!==0)return h}return _r(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Pn()}}function Yne(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return _r(e,t);const n=Oy(e),r=Oy(t),i=_r(n.seconds,r.seconds);return i!==0?i:_r(n.nanos,r.nanos)}function Kne(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=NE(n[i],r[i]);if(s)return s}return _r(n.length,r.length)}function OE(e){return a7(e)}function a7(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Oy(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return $y(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return xn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=a7(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${a7(n.fields[o])}`;return i+"}"}(e.mapValue):Pn()}function o3(e){switch(Ly(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=aL(e);return t?16+o3(t):16;case 5:return 2*e.stringValue.length;case 6:return $y(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+o3(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return y1(r.fields,(s,o)=>{i+=s.length+o3(o)}),i}(e.mapValue);default:throw Pn()}}function Xne(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function u7(e){return!!e&&"integerValue"in e}function fW(e){return!!e&&"arrayValue"in e}function Qne(e){return!!e&&"nullValue"in e}function Jne(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function a3(e){return!!e&&"mapValue"in e}function VXe(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function TA(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return y1(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=TA(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=TA(e.arrayValue.values[n]);return t}return Object.assign({},e)}function HXe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(t){this.value=t}static empty(){return new Al({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!a3(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=TA(n)}setAll(t){let n=ga.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=TA(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());a3(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ap(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];a3(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){y1(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Al(TA(this.value))}}function Rye(e){const t=[];return y1(e.fields,(n,r)=>{const i=new ga([n]);if(a3(r)){const s=Rye(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Ec(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Qa(t,0,Mn.min(),Mn.min(),Mn.min(),Al.empty(),0)}static newFoundDocument(t,n,r,i){return new Qa(t,1,n,Mn.min(),r,i,0)}static newNoDocument(t,n){return new Qa(t,2,n,Mn.min(),Mn.min(),Al.empty(),0)}static newUnknownDocument(t,n){return new Qa(t,3,n,Mn.min(),Mn.min(),Al.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Mn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Al.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Al.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Qa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Qa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YO=class{constructor(t,n){this.position=t,this.inclusive=n}};function Zne(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=xn.comparator(xn.fromName(o.referenceValue),n.key):r=NE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ere(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ap(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(t,n="asc"){this.field=t,this.dir=n}}function qXe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pye=class{};class Js extends Pye{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new GXe(t,n,r):n==="array-contains"?new XXe(t,r):n==="in"?new QXe(t,r):n==="not-in"?new JXe(t,r):n==="array-contains-any"?new ZXe(t,r):new Js(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new YXe(t,r):new KXe(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(NE(n,this.value)):n!==null&&Ly(this.value)===Ly(n)&&this.matchesComparison(NE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Pn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wd extends Pye{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Wd(t,n)}matches(t){return Dye(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Dye(e){return e.op==="and"}function Nye(e){return WXe(e)&&Dye(e)}function WXe(e){for(const t of e.filters)if(t instanceof Wd)return!1;return!0}function l7(e){if(e instanceof Js)return e.field.canonicalString()+e.op.toString()+OE(e.value);if(Nye(e))return e.filters.map(t=>l7(t)).join(",");{const t=e.filters.map(n=>l7(n)).join(",");return`${e.op}(${t})`}}function Oye(e,t){return e instanceof Js?function(r,i){return i instanceof Js&&r.op===i.op&&r.field.isEqual(i.field)&&Ap(r.value,i.value)}(e,t):e instanceof Wd?function(r,i){return i instanceof Wd&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Oye(o,i.filters[a]),!0):!1}(e,t):void Pn()}function $ye(e){return e instanceof Js?function(n){return`${n.field.canonicalString()} ${n.op} ${OE(n.value)}`}(e):e instanceof Wd?function(n){return n.op.toString()+" {"+n.getFilters().map($ye).join(" ,")+"}"}(e):"Filter"}class GXe extends Js{constructor(t,n,r){super(t,n,r),this.key=xn.fromName(r.referenceValue)}matches(t){const n=xn.comparator(t.key,this.key);return this.matchesComparison(n)}}class YXe extends Js{constructor(t,n){super(t,"in",n),this.keys=Lye("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class KXe extends Js{constructor(t,n){super(t,"not-in",n),this.keys=Lye("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Lye(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>xn.fromName(r.referenceValue))}class XXe extends Js{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return fW(n)&&lk(n.arrayValue,this.value)}}class QXe extends Js{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&lk(this.value.arrayValue,n)}}class JXe extends Js{constructor(t,n){super(t,"not-in",n)}matches(t){if(lk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!lk(this.value.arrayValue,n)}}class ZXe extends Js{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!fW(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>lk(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQe{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function tre(e,t=null,n=[],r=[],i=null,s=null,o=null){return new eQe(e,t,n,r,i,s,o)}function dW(e){const t=Fn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>l7(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),oL(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>OE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>OE(r)).join(",")),t.ue=n}return t.ue}function hW(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qXe(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Oye(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ere(e.startAt,t.startAt)&&ere(e.endAt,t.endAt)}function c7(e){return xn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function tQe(e,t,n,r,i,s,o,a){return new ZT(e,t,n,r,i,s,o,a)}function pW(e){return new ZT(e)}function nre(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Mye(e){return e.collectionGroup!==null}function SA(e){const t=Fn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new yo(ga.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new ck(s,r))}),n.has(ga.keyField().canonicalString())||t.ce.push(new ck(ga.keyField(),r))}return t.ce}function lp(e){const t=Fn(e);return t.le||(t.le=nQe(t,SA(e))),t.le}function nQe(e,t){if(e.limitType==="F")return tre(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ck(i.field,s)});const n=e.endAt?new YO(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new YO(e.startAt.position,e.startAt.inclusive):null;return tre(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function f7(e,t){const n=e.filters.concat([t]);return new ZT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function d7(e,t,n){return new ZT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function uL(e,t){return hW(lp(e),lp(t))&&e.limitType===t.limitType}function Fye(e){return`${dW(lp(e))}|lt:${e.limitType}`}function O_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$ye(i)).join(", ")}]`),oL(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>OE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>OE(i)).join(",")),`Target(${r})`}(lp(e))}; limitType=${e.limitType})`}function lL(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):xn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of SA(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Zne(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,SA(r),i)||r.endAt&&!function(o,a,u){const l=Zne(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,SA(r),i))}(e,t)}function rQe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Bye(e){return(t,n)=>{let r=!1;for(const i of SA(e)){const s=iQe(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function iQe(e,t,n){const r=e.field.isKeyField()?xn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?NE(u,l):Pn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Pn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){y1(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return kye(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sQe=new ss(xn.comparator);function R0(){return sQe}const jye=new ss(xn.comparator);function RC(...e){let t=jye;for(const n of e)t=t.insert(n.key,n);return t}function Uye(e){let t=jye;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function ib(){return CA()}function zye(){return CA()}function CA(){return new vx(e=>e.toString(),(e,t)=>e.isEqual(t))}const oQe=new ss(xn.comparator),aQe=new yo(xn.comparator);function mr(...e){let t=aQe;for(const n of e)t=t.add(n);return t}const uQe=new yo(_r);function lQe(){return uQe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mW(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:GO(t)?"-0":t}}function Vye(e){return{integerValue:""+e}}function cQe(e,t){return FXe(t)?Vye(t):mW(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(){this._=void 0}}function fQe(e,t,n){return e instanceof fk?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cW(s)&&(s=aL(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof dk?qye(e,t):e instanceof hk?Wye(e,t):function(i,s){const o=Hye(i,s),a=rre(o)+rre(i.Pe);return u7(o)&&u7(i.Pe)?Vye(a):mW(i.serializer,a)}(e,t)}function dQe(e,t,n){return e instanceof dk?qye(e,t):e instanceof hk?Wye(e,t):n}function Hye(e,t){return e instanceof KO?function(r){return u7(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class fk extends cL{}class dk extends cL{constructor(t){super(),this.elements=t}}function qye(e,t){const n=Gye(t);for(const r of e.elements)n.some(i=>Ap(i,r))||n.push(r);return{arrayValue:{values:n}}}class hk extends cL{constructor(t){super(),this.elements=t}}function Wye(e,t){let n=Gye(t);for(const r of e.elements)n=n.filter(i=>!Ap(i,r));return{arrayValue:{values:n}}}class KO extends cL{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function rre(e){return Ls(e.integerValue||e.doubleValue)}function Gye(e){return fW(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQe{constructor(t,n){this.field=t,this.transform=n}}function pQe(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof dk&&i instanceof dk||r instanceof hk&&i instanceof hk?DE(r.elements,i.elements,Ap):r instanceof KO&&i instanceof KO?Ap(r.Pe,i.Pe):r instanceof fk&&i instanceof fk}(e.transform,t.transform)}class mQe{constructor(t,n){this.version=t,this.transformResults=n}}class Ic{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ic}static exists(t){return new Ic(void 0,t)}static updateTime(t){return new Ic(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function u3(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class fL{}function Yye(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new gW(e.key,Ic.none()):new CI(e.key,e.data,Ic.none());{const n=e.data,r=Al.empty();let i=new yo(ga.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new v1(e.key,r,new Ec(i.toArray()),Ic.none())}}function gQe(e,t,n){e instanceof CI?function(i,s,o){const a=i.value.clone(),u=sre(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof v1?function(i,s,o){if(!u3(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=sre(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Kye(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function AA(e,t,n,r){return e instanceof CI?function(s,o,a,u){if(!u3(s.precondition,o))return a;const l=s.value.clone(),c=ore(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof v1?function(s,o,a,u){if(!u3(s.precondition,o))return a;const l=ore(s.fieldTransforms,u,o),c=o.data;return c.setAll(Kye(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return u3(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function yQe(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=Hye(r.transform,i||null);s!=null&&(n===null&&(n=Al.empty()),n.set(r.field,s))}return n||null}function ire(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&DE(r,i,(s,o)=>pQe(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class CI extends fL{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class v1 extends fL{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Kye(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function sre(e,t,n){const r=new Map;ei(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,dQe(o,a,n[i]))}return r}function ore(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,fQe(s,o,t))}return r}class gW extends fL{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vQe extends fL{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQe{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&gQe(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=AA(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=AA(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=zye();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=Yye(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Mn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),mr())}isEqual(t){return this.batchId===t.batchId&&DE(this.mutations,t.mutations,(n,r)=>ire(n,r))&&DE(this.baseMutations,t.baseMutations,(n,r)=>ire(n,r))}}class yW{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ei(t.mutations.length===r.length);let i=function(){return oQe}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new yW(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQe{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wQe{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xs,Nr;function _Qe(e){switch(e){default:return Pn();case ct.CANCELLED:case ct.UNKNOWN:case ct.DEADLINE_EXCEEDED:case ct.RESOURCE_EXHAUSTED:case ct.INTERNAL:case ct.UNAVAILABLE:case ct.UNAUTHENTICATED:return!1;case ct.INVALID_ARGUMENT:case ct.NOT_FOUND:case ct.ALREADY_EXISTS:case ct.PERMISSION_DENIED:case ct.FAILED_PRECONDITION:case ct.ABORTED:case ct.OUT_OF_RANGE:case ct.UNIMPLEMENTED:case ct.DATA_LOSS:return!0}}function Xye(e){if(e===void 0)return I0("GRPC error has no .code"),ct.UNKNOWN;switch(e){case Xs.OK:return ct.OK;case Xs.CANCELLED:return ct.CANCELLED;case Xs.UNKNOWN:return ct.UNKNOWN;case Xs.DEADLINE_EXCEEDED:return ct.DEADLINE_EXCEEDED;case Xs.RESOURCE_EXHAUSTED:return ct.RESOURCE_EXHAUSTED;case Xs.INTERNAL:return ct.INTERNAL;case Xs.UNAVAILABLE:return ct.UNAVAILABLE;case Xs.UNAUTHENTICATED:return ct.UNAUTHENTICATED;case Xs.INVALID_ARGUMENT:return ct.INVALID_ARGUMENT;case Xs.NOT_FOUND:return ct.NOT_FOUND;case Xs.ALREADY_EXISTS:return ct.ALREADY_EXISTS;case Xs.PERMISSION_DENIED:return ct.PERMISSION_DENIED;case Xs.FAILED_PRECONDITION:return ct.FAILED_PRECONDITION;case Xs.ABORTED:return ct.ABORTED;case Xs.OUT_OF_RANGE:return ct.OUT_OF_RANGE;case Xs.UNIMPLEMENTED:return ct.UNIMPLEMENTED;case Xs.DATA_LOSS:return ct.DATA_LOSS;default:return Pn()}}(Nr=Xs||(Xs={}))[Nr.OK=0]="OK",Nr[Nr.CANCELLED=1]="CANCELLED",Nr[Nr.UNKNOWN=2]="UNKNOWN",Nr[Nr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nr[Nr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nr[Nr.NOT_FOUND=5]="NOT_FOUND",Nr[Nr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nr[Nr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nr[Nr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nr[Nr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nr[Nr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nr[Nr.ABORTED=10]="ABORTED",Nr[Nr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nr[Nr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nr[Nr.INTERNAL=13]="INTERNAL",Nr[Nr.UNAVAILABLE=14]="UNAVAILABLE",Nr[Nr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EQe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TQe=new xy([4294967295,4294967295],0);function are(e){const t=EQe().encode(e),n=new wye;return n.update(t),new Uint8Array(n.digest())}function ure(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new xy([n,r],0),new xy([i,s],0)]}class vW{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new PC(`Invalid padding: ${n}`);if(r<0)throw new PC(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new PC(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new PC(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=xy.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(xy.fromNumber(r)));return i.compare(TQe)===1&&(i=new xy([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=are(t),[r,i]=ure(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ee(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new vW(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=are(t),[r,i]=ure(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class PC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,AI.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new dL(Mn.min(),i,new ss(_r),R0(),mr())}}class AI{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new AI(r,n,mr(),mr(),mr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Qye{constructor(t,n){this.targetId=t,this.me=n}}class Jye{constructor(t,n,r=Sa.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class lre{constructor(){this.fe=0,this.ge=cre(),this.pe=Sa.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=mr(),n=mr(),r=mr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Pn()}}),new AI(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=cre()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ei(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class SQe{constructor(t){this.Be=t,this.Le=new Map,this.ke=R0(),this.qe=oD(),this.Qe=oD(),this.Ke=new ss(_r)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:Pn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.me.count,i=this.Ye(n);if(i){const s=i.target;if(c7(s))if(r===0){const o=new xn(s.path);this.We(n,o,Qa.newNoDocument(o,Mn.min()))}else ei(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=$y(r).toUint8Array()}catch(u){if(u instanceof Iye)return ok("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new vW(o,i,s)}catch(u){return ok(u instanceof PC?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.Le.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&c7(a.target)){const u=new xn(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,Qa.newNoDocument(u,t))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=mr();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new dL(t,n,this.Ke,this.ke,r);return this.ke=R0(),this.qe=oD(),this.Qe=oD(),this.Ke=new ss(_r),i}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.ot(t,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new lre,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new yo(_r),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new yo(_r),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||Zt("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new lre),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function oD(){return new ss(xn.comparator)}function cre(){return new ss(xn.comparator)}const CQe={asc:"ASCENDING",desc:"DESCENDING"},AQe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kQe={and:"AND",or:"OR"};class IQe{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function h7(e,t){return e.useProto3Json||oL(t)?t:{value:t}}function XO(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Zye(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function RQe(e,t){return XO(e,t.toTimestamp())}function cp(e){return ei(!!e),Mn.fromTimestamp(function(n){const r=Oy(n);return new go(r.seconds,r.nanos)}(e))}function bW(e,t){return p7(e,t).canonicalString()}function p7(e,t){const n=function(i){return new Fi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function e1e(e){const t=Fi.fromString(e);return ei(s1e(t)),t}function m7(e,t){return bW(e.databaseId,t.path)}function V8(e,t){const n=e1e(t);if(n.get(1)!==e.databaseId.projectId)throw new Yt(ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Yt(ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new xn(n1e(n))}function t1e(e,t){return bW(e.databaseId,t)}function PQe(e){const t=e1e(e);return t.length===4?Fi.emptyPath():n1e(t)}function g7(e){return new Fi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function n1e(e){return ei(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function fre(e,t,n){return{name:m7(e,t),fields:n.value.mapValue.fields}}function DQe(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Pn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ei(c===void 0||typeof c=="string"),Sa.fromBase64String(c||"")):(ei(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Sa.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?ct.UNKNOWN:Xye(l.code);return new Yt(c,l.message||"")}(o);n=new Jye(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=V8(e,r.document.name),s=cp(r.document.updateTime),o=r.document.createTime?cp(r.document.createTime):Mn.min(),a=new Al({mapValue:{fields:r.document.fields}}),u=Qa.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new l3(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=V8(e,r.document),s=r.readTime?cp(r.readTime):Mn.min(),o=Qa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new l3([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=V8(e,r.document),s=r.removedTargetIds||[];n=new l3([],s,i,null)}else{if(!("filter"in t))return Pn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new wQe(i,s),a=r.targetId;n=new Qye(a,o)}}return n}function NQe(e,t){let n;if(t instanceof CI)n={update:fre(e,t.key,t.value)};else if(t instanceof gW)n={delete:m7(e,t.key)};else if(t instanceof v1)n={update:fre(e,t.key,t.data),updateMask:zQe(t.fieldMask)};else{if(!(t instanceof vQe))return Pn();n={verify:m7(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof fk)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof dk)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hk)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof KO)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Pn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:RQe(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pn()}(e,t.precondition)),n}function OQe(e,t){return e&&e.length>0?(ei(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?cp(i.updateTime):cp(s);return o.isEqual(Mn.min())&&(o=cp(s)),new mQe(o,i.transformResults||[])}(n,t))):[]}function $Qe(e,t){return{documents:[t1e(e,t.path)]}}function LQe(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=t1e(e,i);const s=function(l){if(l.length!==0)return i1e(Wd.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:$_(d.field),direction:BQe(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=h7(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ct:n,parent:i}}function MQe(e){let t=PQe(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ei(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=r1e(f);return d instanceof Wd&&Nye(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new ck(L_(p.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,oL(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new YO(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new YO(h,d)}(n.endAt)),tQe(t,i,o,s,a,"F",u,l)}function FQe(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function r1e(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=L_(n.unaryFilter.field);return Js.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=L_(n.unaryFilter.field);return Js.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=L_(n.unaryFilter.field);return Js.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=L_(n.unaryFilter.field);return Js.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Pn()}}(e):e.fieldFilter!==void 0?function(n){return Js.create(L_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Wd.create(n.compositeFilter.filters.map(r=>r1e(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pn()}}(n.compositeFilter.op))}(e):Pn()}function BQe(e){return CQe[e]}function jQe(e){return AQe[e]}function UQe(e){return kQe[e]}function $_(e){return{fieldPath:e.canonicalString()}}function L_(e){return ga.fromServerFormat(e.fieldPath)}function i1e(e){return e instanceof Js?function(n){if(n.op==="=="){if(Jne(n.value))return{unaryFilter:{field:$_(n.field),op:"IS_NAN"}};if(Qne(n.value))return{unaryFilter:{field:$_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jne(n.value))return{unaryFilter:{field:$_(n.field),op:"IS_NOT_NAN"}};if(Qne(n.value))return{unaryFilter:{field:$_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$_(n.field),op:jQe(n.op),value:n.value}}}(e):e instanceof Wd?function(n){const r=n.getFilters().map(i=>i1e(i));return r.length===1?r[0]:{compositeFilter:{op:UQe(n.op),filters:r}}}(e):Pn()}function zQe(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function s1e(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t,n,r,i,s=Mn.min(),o=Mn.min(),a=Sa.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new ay(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ay(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ay(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ay(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VQe{constructor(t){this.ht=t}}function HQe(e){const t=MQe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?d7(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQe{constructor(){this.ln=new WQe}addToCollectionParentIndex(t,n){return this.ln.add(n),dt.resolve()}getCollectionParents(t,n){return dt.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return dt.resolve()}deleteFieldIndex(t,n){return dt.resolve()}deleteAllFieldIndexes(t){return dt.resolve()}createTargetIndexes(t,n){return dt.resolve()}getDocumentsMatchingTarget(t,n){return dt.resolve(null)}getIndexType(t,n){return dt.resolve(0)}getFieldIndexes(t,n){return dt.resolve([])}getNextCollectionGroupToUpdate(t){return dt.resolve(null)}getMinOffset(t,n){return dt.resolve(Ny.min())}getMinOffsetFromCollectionGroup(t,n){return dt.resolve(Ny.min())}updateCollectionGroup(t,n,r){return dt.resolve()}updateIndexEntries(t,n){return dt.resolve()}}class WQe{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new yo(Fi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new yo(Fi.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dre={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class El{static withCacheSize(t){return new El(t,El.DEFAULT_COLLECTION_PERCENTILE,El.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */El.DEFAULT_COLLECTION_PERCENTILE=10,El.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,El.DEFAULT=new El(41943040,El.DEFAULT_COLLECTION_PERCENTILE,El.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),El.DISABLED=new El(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new $E(0)}static Qn(){return new $E(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hre([e,t],[n,r]){const i=_r(e,n);return i===0?_r(t,r):i}class GQe{constructor(t){this.Gn=t,this.buffer=new yo(hre),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();hre(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YQe{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){Zt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){JT(n)?Zt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await QT(n)}await this.Yn(3e5)})}}class KQe{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return dt.resolve(sL.oe);const r=new GQe(n);return this.Zn.forEachTarget(t,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(t,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Zt("LruGarbageCollector","Garbage collection skipped; disabled"),dt.resolve(dre)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Zt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dre):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Zt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(t,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(t,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(f=>(l=Date.now(),N_()<=pr.DEBUG&&Zt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),dt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function XQe(e,t){return new KQe(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQe{constructor(){this.changes=new vx(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Qa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?dt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQe{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQe{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&AA(r.mutation,i,Ec.empty(),go.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,mr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=mr()){const i=ib();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=RC();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=ib();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,mr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=R0();const o=CA(),a=function(){return CA()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof v1)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),AA(c.mutation,l,c.mutation.getFieldMask(),go.now())):o.set(l.key,Ec.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new JQe(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=CA();let i=new ss((o,a)=>o-a),s=mr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Ec.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||mr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=zye();c.forEach(d=>{if(!s.has(d)){const h=Yye(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return dt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return xn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Mye(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):dt.resolve(ib());let a=-1,u=s;return o.next(l=>dt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?dt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,mr())).next(c=>({batchId:a,changes:Uye(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new xn(n)).next(r=>{let i=RC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=RC();return this.indexManager.getCollectionParents(t,s).next(a=>dt.forEach(a,u=>{const l=function(f,d){return new ZT(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,Qa.newInvalidDocument(c)))});let a=RC();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&AA(c.mutation,l,Ec.empty(),go.now()),lL(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJe{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return dt.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:cp(i.createTime)}}(n)),dt.resolve()}getNamedQuery(t,n){return dt.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:HQe(i.bundledQuery),readTime:cp(i.readTime)}}(n)),dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tJe{constructor(){this.overlays=new ss(xn.comparator),this.dr=new Map}getOverlay(t,n){return dt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=ib();return dt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.Tt(t,n,s)}),dt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.dr.delete(r)),dt.resolve()}getOverlaysForCollection(t,n,r){const i=ib(),s=n.length+1,o=new xn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return dt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new ss((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=ib(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=ib(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return dt.resolve(a)}Tt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xQe(n,r));let s=this.dr.get(n);s===void 0&&(s=mr(),this.dr.set(n,s)),this.dr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nJe{constructor(){this.sessionToken=Sa.EMPTY_BYTE_STRING}getSessionToken(t){return dt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW{constructor(){this.Er=new yo(Lo.Ar),this.Rr=new yo(Lo.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const r=new Lo(t,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new Lo(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new xn(new Fi([])),r=new Lo(n,t),i=new Lo(n,t+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new xn(new Fi([])),r=new Lo(n,t),i=new Lo(n,t+1);let s=mr();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Lo(t,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Lo{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return xn.comparator(t.key,n.key)||_r(t.br,n.br)}static Vr(t,n){return _r(t.br,n.br)||xn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJe{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new yo(Lo.Ar)}checkEmpty(t){return dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bQe(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Lo(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return dt.resolve(o)}lookupMutationBatch(t,n){return dt.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return dt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Lo(n,0),i=new Lo(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),dt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new yo(_r);return n.forEach(i=>{const s=new Lo(i,0),o=new Lo(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),dt.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;xn.isDocumentKey(s)||(s=s.child(""));const o=new Lo(new xn(s),0);let a=new yo(_r);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},o),dt.resolve(this.Mr(a))}Mr(t){const n=[];return t.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ei(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return dt.forEach(n.mutations,i=>{const s=new Lo(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.vr=r})}Bn(t){}containsKey(t,n){const r=new Lo(n,0),i=this.vr.firstAfterOrEqual(r);return dt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,dt.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJe{constructor(t){this.Nr=t,this.docs=function(){return new ss(xn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return dt.resolve(r?r.document.mutableCopy():Qa.newInvalidDocument(n))}getEntries(t,n){let r=R0();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Qa.newInvalidDocument(i))}),dt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=R0();const o=n.path,a=new xn(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||OXe(NXe(c),r)<=0||(i.has(c.key)||lL(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return dt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Pn()}Br(t,n){return dt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new sJe(this)}getSize(t){return dt.resolve(this.size)}}class sJe extends QQe{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(t,i)):this.hr.removeEntry(r)}),dt.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJe{constructor(t){this.persistence=t,this.Lr=new vx(n=>dW(n),hW),this.lastRemoteSnapshotVersion=Mn.min(),this.highestTargetId=0,this.kr=0,this.qr=new xW,this.targetCount=0,this.Qr=$E.qn()}forEachTarget(t,n){return this.Lr.forEach((r,i)=>n(i)),dt.resolve()}getLastRemoteSnapshotVersion(t){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return dt.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),dt.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new $E(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,dt.resolve()}updateTargetData(t,n){return this.Un(n),dt.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,dt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Lr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),dt.waitFor(s).next(()=>i)}getTargetCount(t){return dt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Lr.get(n)||null;return dt.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),dt.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),dt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),dt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return dt.resolve(r)}containsKey(t,n){return dt.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1e{constructor(t,n){this.Kr={},this.overlays={},this.$r=new sL(0),this.Ur=!1,this.Ur=!0,this.Wr=new nJe,this.referenceDelegate=t(this),this.Gr=new oJe(this),this.indexManager=new qQe,this.remoteDocumentCache=function(i){return new iJe(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new VQe(n),this.jr=new eJe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new tJe,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new rJe(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){Zt("MemoryPersistence","Starting transaction:",t);const i=new aJe(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(t,n){return dt.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class aJe extends LXe{constructor(t){super(),this.currentSequenceNumber=t}}class wW{constructor(t){this.persistence=t,this.Zr=new xW,this.Xr=null}static ei(t){return new wW(t)}get ti(){if(this.Xr)return this.Xr;throw Pn()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),dt.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),dt.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),dt.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.ti,r=>{const i=xn.fromPath(r);return this.ni(t,i).next(s=>{s||n.removeEntry(i,Mn.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return dt.or([()=>dt.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class QO{constructor(t,n){this.persistence=t,this.ri=new vx(r=>BXe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=XQe(this,n)}static ei(t,n){return new QO(t,n)}Hr(){}Jr(t){return dt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return dt.forEach(this.ri,(r,i)=>this.ir(t,r,i).next(s=>s?dt.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Br(t,o=>this.ir(t,o,n).next(a=>{a||(r++,s.removeEntry(o,Mn.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),dt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),dt.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),dt.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),dt.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=o3(t.data.value)),n}ir(t,n,r){return dt.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.ri.get(n);return dt.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _W{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(t,n){let r=mr(),i=mr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new _W(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uJe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lJe{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return MGe()?8:MXe(uu())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.Xi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new uJe;return this.ts(t,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(t,n,o,a.size)})}).next(()=>s.result)}ns(t,n,r,i){return r.documentReadCount<this.Ji?(N_()<=pr.DEBUG&&Zt("QueryEngine","SDK will not create cache indexes for query:",O_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),dt.resolve()):(N_()<=pr.DEBUG&&Zt("QueryEngine","Query:",O_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(N_()<=pr.DEBUG&&Zt("QueryEngine","The SDK decides to create cache indexes for query:",O_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,lp(n))):dt.resolve())}Xi(t,n){if(nre(n))return dt.resolve(null);let r=lp(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=d7(n,null,"F"),r=lp(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=mr(...s);return this.Zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.rs(n,a);return this.ss(n,l,o,u.readTime)?this.Xi(t,d7(n,null,"F")):this.os(t,l,n,u)}))})))}es(t,n,r,i){return nre(n)||i.isEqual(Mn.min())?dt.resolve(null):this.Zi.getDocuments(t,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?dt.resolve(null):(N_()<=pr.DEBUG&&Zt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),O_(n)),this.os(t,o,n,DXe(i,-1)).next(a=>a))})}rs(t,n){let r=new yo(Bye(t));return n.forEach((i,s)=>{lL(t,s)&&(r=r.add(s))}),r}ss(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(t,n,r){return N_()<=pr.DEBUG&&Zt("QueryEngine","Using full collection scan to execute query:",O_(n)),this.Zi.getDocumentsMatchingQuery(t,n,Ny.min(),r)}os(t,n,r,i){return this.Zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJe{constructor(t,n,r,i){this.persistence=t,this._s=n,this.serializer=i,this.us=new ss(_r),this.cs=new vx(s=>dW(s),hW),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ZQe(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function fJe(e,t,n,r){return new cJe(e,t,n,r)}async function a1e(e,t){const n=Fn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=mr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:o,addedBatchIds:a}))})})}function dJe(e,t){const n=Fn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=dt.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(g=>{const y=l.docVersions.get(p);ei(y!==null),g.version.compareTo(y)<0&&(f.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),c.addEntry(g)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=mr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function u1e(e){const t=Fn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function hJe(e,t){const n=Fn(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Gr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Sa.EMPTY_BYTE_STRING,Mn.min()).withLastLimboFreeSnapshotVersion(Mn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(g,y,x){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(d,h,c)&&a.push(n.Gr.updateTargetData(s,h))});let u=R0(),l=mr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(pJe(s,o,t.documentUpdates).next(c=>{u=c.Is,l=c.ds})),!r.isEqual(Mn.min())){const c=n.Gr.getLastRemoteSnapshotVersion(s).next(f=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return dt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.us=i,s))}function pJe(e,t,n){let r=mr(),i=mr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=R0();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Mn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Zt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:o,ds:i}})}function mJe(e,t){const n=Fn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function gJe(e,t){const n=Fn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,t).next(s=>s?(i=s,dt.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new ay(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function y7(e,t,n){const r=Fn(e),i=r.us.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!JT(o))throw o;Zt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.us=r.us.remove(t),r.cs.delete(i.target)}function pre(e,t,n){const r=Fn(e);let i=Mn.min(),s=mr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=Fn(u),d=f.cs.get(c);return d!==void 0?dt.resolve(f.us.get(d)):f.Gr.getTargetData(l,c)}(r,o,lp(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,t,n?i:Mn.min(),n?s:mr())).next(a=>(yJe(r,rQe(t),a),{documents:a,Es:s})))}function yJe(e,t,n){let r=e.ls.get(t)||Mn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ls.set(t,r)}class mre{constructor(){this.activeTargetIds=lQe()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class vJe{constructor(){this._o=new mre,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new mre,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bJe{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gre{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Zt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){Zt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aD=null;function H8(){return aD===null?aD=function(){return 268435456+Math.round(2147483648*Math.random())}():aD++,"0x"+aD.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xJe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wJe{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="WebChannelConnection";class _Je extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=H8(),u=this.No(n,r.toUriEncodedString());Zt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,s,o),this.Lo(n,u,l,i).then(c=>(Zt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw ok("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+XT}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=xJe[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,r,i){const s=H8();return new Promise((o,a)=>{const u=new _ye;u.setWithCredentials(!0),u.listenOnce(Eye.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case s3.NO_ERROR:const c=u.getResponseJson();Zt(Ua,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case s3.TIMEOUT:Zt(Ua,`RPC '${t}' ${s} timed out`),a(new Yt(ct.DEADLINE_EXCEEDED,"Request time out"));break;case s3.HTTP_ERROR:const f=u.getStatus();if(Zt(Ua,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(y){const x=y.toLowerCase().replace(/_/g,"-");return Object.values(ct).indexOf(x)>=0?x:ct.UNKNOWN}(h.status);a(new Yt(p,h.message))}else a(new Yt(ct.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Yt(ct.UNAVAILABLE,"Connection failed."));break;default:Pn()}}finally{Zt(Ua,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Zt(Ua,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}qo(t,n,r){const i=H8(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Cye(),a=Sye(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Zt(Ua,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new wJe({Eo:y=>{h?Zt(Ua,`Not sending because RPC '${t}' stream ${i} is closed:`,y):(d||(Zt(Ua,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Zt(Ua,`RPC '${t}' stream ${i} sending:`,y),f.send(y))},Ao:()=>f.close()}),g=(y,x,b)=>{y.listen(x,_=>{try{b(_)}catch(E){setTimeout(()=>{throw E},0)}})};return g(f,IC.EventType.OPEN,()=>{h||(Zt(Ua,`RPC '${t}' stream ${i} transport opened.`),p.So())}),g(f,IC.EventType.CLOSE,()=>{h||(h=!0,Zt(Ua,`RPC '${t}' stream ${i} transport closed`),p.Do())}),g(f,IC.EventType.ERROR,y=>{h||(h=!0,ok(Ua,`RPC '${t}' stream ${i} transport errored:`,y),p.Do(new Yt(ct.UNAVAILABLE,"The operation could not be completed")))}),g(f,IC.EventType.MESSAGE,y=>{var x;if(!h){const b=y.data[0];ei(!!b);const _=b,E=(_==null?void 0:_.error)||((x=_[0])===null||x===void 0?void 0:x.error);if(E){Zt(Ua,`RPC '${t}' stream ${i} received error:`,E);const T=E.status;let k=function(D){const L=Xs[D];if(L!==void 0)return Xye(L)}(T),I=E.message;k===void 0&&(k=ct.INTERNAL,I="Unknown error status: "+T+" with message "+E.message),h=!0,p.Do(new Yt(k,I)),f.close()}else Zt(Ua,`RPC '${t}' stream ${i} received:`,b),p.vo(b)}}),g(a,Tye.STAT_EVENT,y=>{y.stat===o7.PROXY?Zt(Ua,`RPC '${t}' stream ${i} detected buffering proxy`):y.stat===o7.NOPROXY&&Zt(Ua,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.bo()},0),p}}function q8(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(e){return new IQe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1e{constructor(t,n,r=1e3,i=1.5,s=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&Zt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1e{constructor(t,n,r,i,s,o,a,u){this.li=t,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new l1e(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===ct.RESOURCE_EXHAUSTED?(I0(n.toString()),I0("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{t(()=>{const i=new Yt(ct.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return Zt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(Zt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EJe extends c1e{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=DQe(this.serializer,t),r=function(s){if(!("targetChange"in s))return Mn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Mn.min():o.readTime?cp(o.readTime):Mn.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=g7(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=c7(u)?{documents:$Qe(s,u)}:{query:LQe(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Zye(s,o.resumeToken);const l=h7(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Mn.min())>0){a.readTime=XO(s,o.snapshotVersion.toTimestamp());const l=h7(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=FQe(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=g7(this.serializer),n.removeTarget=t,this.c_(n)}}class TJe extends c1e{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return ei(!!t.streamToken),this.lastStreamToken=t.streamToken,ei(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){ei(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=OQe(t.writeResults,t.commitTime),r=cp(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=g7(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>NQe(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SJe extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Yt(ct.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(t,p7(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Yt(ct.UNKNOWN,s.toString())})}ko(t,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(t,p7(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Yt(ct.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class CJe{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(I0(n),this.C_=!1):Zt("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AJe{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{bx(this)&&(Zt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=Fn(u);l.k_.add(4),await II(l),l.K_.set("Unknown"),l.k_.delete(4),await kI(l)}(this))})}),this.K_=new CJe(r,i)}}async function kI(e){if(bx(e))for(const t of e.q_)await t(!0)}async function II(e){for(const t of e.q_)await t(!1)}function f1e(e,t){const n=Fn(e);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),CW(n)?SW(n):eS(n).s_()&&TW(n,t))}function EW(e,t){const n=Fn(e),r=eS(n);n.L_.delete(t),r.s_()&&d1e(n,t),n.L_.size===0&&(r.s_()?r.a_():bx(n)&&n.K_.set("Unknown"))}function TW(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Mn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}eS(e).V_(t)}function d1e(e,t){e.U_.xe(t),eS(e).m_(t)}function SW(e){e.U_=new SQe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.L_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),eS(e).start(),e.K_.F_()}function CW(e){return bx(e)&&!eS(e).i_()&&e.L_.size>0}function bx(e){return Fn(e).k_.size===0}function h1e(e){e.U_=void 0}async function kJe(e){e.K_.set("Online")}async function IJe(e){e.L_.forEach((t,n)=>{TW(e,t)})}async function RJe(e,t){h1e(e),CW(e)?(e.K_.O_(t),SW(e)):e.K_.set("Unknown")}async function PJe(e,t,n){if(e.K_.set("Online"),t instanceof Jye&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.L_.delete(a),i.U_.removeTarget(a))}(e,t)}catch(r){Zt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await JO(e,r)}else if(t instanceof l3?e.U_.$e(t):t instanceof Qye?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(Mn.min()))try{const r=await u1e(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.L_.get(l);c&&s.L_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.L_.get(u);if(!c)return;s.L_.set(u,c.withResumeToken(Sa.EMPTY_BYTE_STRING,c.snapshotVersion)),d1e(s,u);const f=new ay(c.target,u,l,c.sequenceNumber);TW(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Zt("RemoteStore","Failed to raise snapshot:",r),await JO(e,r)}}async function JO(e,t,n){if(!JT(t))throw t;e.k_.add(1),await II(e),e.K_.set("Offline"),n||(n=()=>u1e(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Zt("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await kI(e)})}function p1e(e,t){return t().catch(n=>JO(e,n,t))}async function pL(e){const t=Fn(e),n=My(t);let r=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;DJe(t);)try{const i=await mJe(t.localStore,r);if(i===null){t.B_.length===0&&n.a_();break}r=i.batchId,NJe(t,i)}catch(i){await JO(t,i)}m1e(t)&&g1e(t)}function DJe(e){return bx(e)&&e.B_.length<10}function NJe(e,t){e.B_.push(t);const n=My(e);n.s_()&&n.f_&&n.g_(t.mutations)}function m1e(e){return bx(e)&&!My(e).i_()&&e.B_.length>0}function g1e(e){My(e).start()}async function OJe(e){My(e).w_()}async function $Je(e){const t=My(e);for(const n of e.B_)t.g_(n.mutations)}async function LJe(e,t,n){const r=e.B_.shift(),i=yW.from(r,t,n);await p1e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await pL(e)}async function MJe(e,t){t&&My(e).f_&&await async function(r,i){if(function(o){return _Qe(o)&&o!==ct.ABORTED}(i.code)){const s=r.B_.shift();My(r).__(),await p1e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await pL(r)}}(e,t),m1e(e)&&g1e(e)}async function yre(e,t){const n=Fn(e);n.asyncQueue.verifyOperationInProgress(),Zt("RemoteStore","RemoteStore received new credentials");const r=bx(n);n.k_.add(3),await II(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await kI(n)}async function FJe(e,t){const n=Fn(e);t?(n.k_.delete(2),await kI(n)):t||(n.k_.add(2),await II(n),n.K_.set("Unknown"))}function eS(e){return e.W_||(e.W_=function(n,r,i){const s=Fn(n);return s.b_(),new EJe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:kJe.bind(null,e),mo:IJe.bind(null,e),po:RJe.bind(null,e),R_:PJe.bind(null,e)}),e.q_.push(async t=>{t?(e.W_.__(),CW(e)?SW(e):e.K_.set("Unknown")):(await e.W_.stop(),h1e(e))})),e.W_}function My(e){return e.G_||(e.G_=function(n,r,i){const s=Fn(n);return s.b_(),new TJe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:OJe.bind(null,e),po:MJe.bind(null,e),p_:$Je.bind(null,e),y_:LJe.bind(null,e)}),e.q_.push(async t=>{t?(e.G_.__(),await pL(e)):(await e.G_.stop(),e.B_.length>0&&(Zt("RemoteStore",`Stopping write stream with ${e.B_.length} pending writes`),e.B_=[]))})),e.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new f0,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new AW(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Yt(ct.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kW(e,t){if(I0("AsyncQueue",`${t}: ${e}`),JT(e))return new Yt(ct.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{static emptySet(t){return new iE(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||xn.comparator(n.key,r.key):(n,r)=>xn.comparator(n.key,r.key),this.keyedMap=RC(),this.sortedSet=new ss(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof iE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new iE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vre{constructor(){this.z_=new ss(xn.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):Pn():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class LE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new LE(t,n,iE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&uL(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BJe{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class jJe{constructor(){this.queries=bre(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=Fn(n),s=i.queries;i.queries=bre(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})})(this,new Yt(ct.ABORTED,"Firestore shutting down"))}}function bre(){return new vx(e=>Fye(e),uL)}async function y1e(e,t){const n=Fn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Y_()&&t.Z_()&&(r=2):(s=new BJe,r=t.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=kW(o,`Initialization of query '${O_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.J_.push(t),t.ea(n.onlineState),s.H_&&t.ta(s.H_)&&IW(n)}async function v1e(e,t){const n=Fn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(t);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function UJe(e,t){const n=Fn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&IW(n)}function zJe(e,t,n){const r=Fn(e),i=r.queries.get(t);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(t)}function IW(e){e.X_.forEach(t=>{t.next()})}var v7,xre;(xre=v7||(v7={})).na="default",xre.Cache="cache";class b1e{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new LE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=LE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==v7.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1e{constructor(t){this.key=t}}class w1e{constructor(t){this.key=t}}class VJe{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=mr(),this.mutatedKeys=mr(),this.Va=Bye(t),this.ma=new iE(this.Va)}get fa(){return this.Ea}ga(t,n){const r=n?n.pa:new vre,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=lL(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let y=!1;d&&h?d.data.isEqual(h.data)?p!==g&&(r.track({type:3,doc:h}),y=!0):this.ya(d,h)||(r.track({type:2,doc:h}),y=!0,(u&&this.Va(h,u)>0||l&&this.Va(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),y=!0):d&&!h&&(r.track({type:1,doc:d}),y=!0,(u||l)&&(a=!0)),y&&(h?(o=o.add(h),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const o=t.pa.j_();o.sort((c,f)=>function(h,p){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pn()}};return g(h)-g(p)}(c.type,f.type)||this.Va(c.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,o.length!==0||l?{snapshot:new LE(this.query,t.ma,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new vre,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=mr(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new w1e(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new x1e(r))}),n}va(t){this.Ea=t.Es,this.Ra=mr();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return LE.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class HJe{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class qJe{constructor(t){this.key=t,this.Fa=!1}}class WJe{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new vx(a=>Fye(a),uL),this.Oa=new Map,this.Na=new Set,this.Ba=new ss(xn.comparator),this.La=new Map,this.ka=new xW,this.qa={},this.Qa=new Map,this.Ka=$E.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function GJe(e,t,n=!0){const r=A1e(e);let i;const s=r.xa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await _1e(r,t,n,!0),i}async function YJe(e,t){const n=A1e(e);await _1e(n,t,!0,!1)}async function _1e(e,t,n,r){const i=await gJe(e.localStore,lp(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await KJe(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&f1e(e.remoteStore,i),a}async function KJe(e,t,n,r,i){e.Ua=(f,d,h)=>async function(g,y,x,b){let _=y.view.ga(x);_.ss&&(_=await pre(g.localStore,y.query,!1).then(({documents:I})=>y.view.ga(I,_)));const E=b&&b.targetChanges.get(y.targetId),T=b&&b.targetMismatches.get(y.targetId)!=null,k=y.view.applyChanges(_,g.isPrimaryClient,E,T);return _re(g,y.targetId,k.ba),k.snapshot}(e,f,d,h);const s=await pre(e.localStore,t,!0),o=new VJe(t,s.Es),a=o.ga(s.documents),u=AI.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);_re(e,n,l.ba);const c=new HJe(t,n,o);return e.xa.set(t,c),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),l.snapshot}async function XJe(e,t,n){const r=Fn(e),i=r.xa.get(t),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!uL(o,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await y7(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&EW(r.remoteStore,i.targetId),b7(r,i.targetId)}).catch(QT)):(b7(r,i.targetId),await y7(r.localStore,i.targetId,!0))}async function QJe(e,t){const n=Fn(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),EW(n.remoteStore,r.targetId))}async function JJe(e,t,n){const r=sZe(e);try{const i=await function(o,a){const u=Fn(o),l=go.now(),c=a.reduce((h,p)=>h.add(p.key),mr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=R0(),g=mr();return u.hs.getEntries(h,c).next(y=>{p=y,p.forEach((x,b)=>{b.isValidDocument()||(g=g.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(y=>{f=y;const x=[];for(const b of a){const _=yQe(b,f.get(b.key).overlayedDocument);_!=null&&x.push(new v1(b.key,_,Rye(_.value.mapValue),Ic.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,x,a)}).next(y=>{d=y;const x=y.applyToLocalDocumentSet(f,g);return u.documentOverlayCache.saveOverlays(h,y.batchId,x)})}).then(()=>({batchId:d.batchId,changes:Uye(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.qa[o.currentUser.toKey()];l||(l=new ss(_r)),l=l.insert(a,u),o.qa[o.currentUser.toKey()]=l}(r,i.batchId,n),await RI(r,i.changes),await pL(r.remoteStore)}catch(i){const s=kW(i,"Failed to persist write");n.reject(s)}}async function E1e(e,t){const n=Fn(e);try{const r=await hJe(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.La.get(s);o&&(ei(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?ei(o.Fa):i.removedDocuments.size>0&&(ei(o.Fa),o.Fa=!1))}),await RI(n,r,t)}catch(r){await QT(r)}}function wre(e,t,n){const r=Fn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Fn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.J_)d.ea(a)&&(l=!0)}),l&&IW(u)}(r.eventManager,t),i.length&&r.Ma.R_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ZJe(e,t,n){const r=Fn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.La.get(t),s=i&&i.key;if(s){let o=new ss(xn.comparator);o=o.insert(s,Qa.newNoDocument(s,Mn.min()));const a=mr().add(s),u=new dL(Mn.min(),new Map,new ss(_r),o,a);await E1e(r,u),r.Ba=r.Ba.remove(s),r.La.delete(t),RW(r)}else await y7(r.localStore,t,!1).then(()=>b7(r,t,n)).catch(QT)}async function eZe(e,t){const n=Fn(e),r=t.batch.batchId;try{const i=await dJe(n.localStore,t);S1e(n,r,null),T1e(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await RI(n,i)}catch(i){await QT(i)}}async function tZe(e,t,n){const r=Fn(e);try{const i=await function(o,a){const u=Fn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ei(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);S1e(r,t,n),T1e(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await RI(r,i)}catch(i){await QT(i)}}function T1e(e,t){(e.Qa.get(t)||[]).forEach(n=>{n.resolve()}),e.Qa.delete(t)}function S1e(e,t,n){const r=Fn(e);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function b7(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach(r=>{e.ka.containsKey(r)||C1e(e,r)})}function C1e(e,t){e.Na.delete(t.path.canonicalString());const n=e.Ba.get(t);n!==null&&(EW(e.remoteStore,n),e.Ba=e.Ba.remove(t),e.La.delete(n),RW(e))}function _re(e,t,n){for(const r of n)r instanceof x1e?(e.ka.addReference(r.key,t),nZe(e,r)):r instanceof w1e?(Zt("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||C1e(e,r.key)):Pn()}function nZe(e,t){const n=t.key,r=n.path.canonicalString();e.Ba.get(n)||e.Na.has(r)||(Zt("SyncEngine","New document in limbo: "+n),e.Na.add(r),RW(e))}function RW(e){for(;e.Na.size>0&&e.Ba.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new xn(Fi.fromString(t)),r=e.Ka.next();e.La.set(r,new qJe(n)),e.Ba=e.Ba.insert(n,r),f1e(e.remoteStore,new ay(lp(pW(n.path)),r,"TargetPurposeLimboResolution",sL.oe))}}async function RI(e,t,n){const r=Fn(e),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=_W.zi(u.targetId,l);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(u,l){const c=Fn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>dt.forEach(l,d=>dt.forEach(d.Wi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>dt.forEach(d.Gi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!JT(f))throw f;Zt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.us.get(d),p=h.snapshotVersion,g=h.withLastLimboFreeSnapshotVersion(p);c.us=c.us.insert(d,g)}}}(r.localStore,s))}async function rZe(e,t){const n=Fn(e);if(!n.currentUser.isEqual(t)){Zt("SyncEngine","User change. New user:",t.toKey());const r=await a1e(n.localStore,t);n.currentUser=t,function(s,o){s.Qa.forEach(a=>{a.forEach(u=>{u.reject(new Yt(ct.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await RI(n,r.Ts)}}function iZe(e,t){const n=Fn(e),r=n.La.get(t);if(r&&r.Fa)return mr().add(r.key);{let i=mr();const s=n.Oa.get(t);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function A1e(e){const t=Fn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=E1e.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iZe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZJe.bind(null,t),t.Ma.R_=UJe.bind(null,t.eventManager),t.Ma.Wa=zJe.bind(null,t.eventManager),t}function sZe(e){const t=Fn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=eZe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tZe.bind(null,t),t}class ZO{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=hL(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return fJe(this.persistence,new lJe,t.initialUser,this.serializer)}ja(t){return new o1e(wW.ei,this.serializer)}za(t){return new vJe}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ZO.provider={build:()=>new ZO};class oZe extends ZO{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){ei(this.persistence.referenceDelegate instanceof QO);const r=this.persistence.referenceDelegate.garbageCollector;return new YQe(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?El.withCacheSize(this.cacheSizeBytes):El.DEFAULT;return new o1e(r=>QO.ei(r,n),this.serializer)}}class x7{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wre(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rZe.bind(null,this.syncEngine),await FJe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new jJe}()}createDatastore(t){const n=hL(t.databaseInfo.databaseId),r=function(s){return new _Je(s)}(t.databaseInfo);return function(s,o,a,u){return new SJe(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new AJe(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>wre(this.syncEngine,n,0),function(){return gre.p()?new gre:new bJe}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new WJe(i,s,o,a,u,l);return c&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=Fn(i);Zt("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await II(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}x7.provider={build:()=>new x7};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1e{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):I0("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZe{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_l.UNAUTHENTICATED,this.clientId=Aye.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Zt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Zt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new f0;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=kW(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function W8(e,t){e.asyncQueue.verifyOperationInProgress(),Zt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await a1e(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ere(e,t){e.asyncQueue.verifyOperationInProgress();const n=await I1e(e);Zt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>yre(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>yre(t.remoteStore,i)),e._onlineComponents=t}async function I1e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Zt("FirestoreClient","Using user provided OfflineComponentProvider");try{await W8(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===ct.FAILED_PRECONDITION||i.code===ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ok("Error using user provided cache. Falling back to memory cache: "+n),await W8(e,new ZO)}}else Zt("FirestoreClient","Using default OfflineComponentProvider"),await W8(e,new oZe(void 0));return e._offlineComponents}async function PW(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Zt("FirestoreClient","Using user provided OnlineComponentProvider"),await Ere(e,e._uninitializedComponentsProvider._online)):(Zt("FirestoreClient","Using default OnlineComponentProvider"),await Ere(e,new x7))),e._onlineComponents}function uZe(e){return I1e(e).then(t=>t.persistence)}function lZe(e){return PW(e).then(t=>t.remoteStore)}function cZe(e){return PW(e).then(t=>t.syncEngine)}async function R1e(e){const t=await PW(e),n=t.eventManager;return n.onListen=GJe.bind(null,t.syncEngine),n.onUnlisten=XJe.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=YJe.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=QJe.bind(null,t.syncEngine),n}function fZe(e){return e.asyncQueue.enqueue(async()=>{const t=await uZe(e),n=await lZe(e);return t.setNetworkEnabled(!0),function(i){const s=Fn(i);return s.k_.delete(0),kI(s)}(n)})}function dZe(e,t,n={}){const r=new f0;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new k1e({next:d=>{c.eu(),o.enqueueAndForget(()=>v1e(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Yt(ct.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Yt(ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new b1e(pW(a.path),c,{includeMetadataChanges:!0,ua:!0});return y1e(s,f)}(await R1e(e),e.asyncQueue,t,n,r)),r.promise}function hZe(e,t,n={}){const r=new f0;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new k1e({next:d=>{c.eu(),o.enqueueAndForget(()=>v1e(s,f)),d.fromCache&&u.source==="server"?l.reject(new Yt(ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new b1e(a,c,{includeMetadataChanges:!0,ua:!0});return y1e(s,f)}(await R1e(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1e(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tre=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1e(e,t,n){if(!n)throw new Yt(ct.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function pZe(e,t,n,r){if(t===!0&&r===!0)throw new Yt(ct.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Sre(e){if(!xn.isDocumentKey(e))throw new Yt(ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Cre(e){if(xn.isDocumentKey(e))throw new Yt(ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function mL(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Pn()}function kp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Yt(ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mL(e);throw new Yt(ct.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Are{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Yt(ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Yt(ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}pZe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P1e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Yt(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Yt(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Yt(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class DW{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Are({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Yt(ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Yt(ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Are(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TXe;switch(r.type){case"firstParty":return new AXe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Yt(ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Tre.get(n);r&&(Zt("ComponentProvider","Removing Datastore"),Tre.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new xx(this.firestore,t,this._query)}}class Bu{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wy(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Bu(this.firestore,t,this._key)}}class wy extends xx{constructor(t,n,r){super(t,n,pW(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Bu(this.firestore,null,new xn(t))}withConverter(t){return new wy(this.firestore,t,this._path)}}function bl(e,t,...n){if(e=Ri(e),D1e("collection","path",t),e instanceof DW){const r=Fi.fromString(t,...n);return Cre(r),new wy(e,null,r)}{if(!(e instanceof Bu||e instanceof wy))throw new Yt(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Fi.fromString(t,...n));return Cre(r),new wy(e.firestore,null,r)}}function Li(e,t,...n){if(e=Ri(e),arguments.length===1&&(t=Aye.newId()),D1e("doc","path",t),e instanceof DW){const r=Fi.fromString(t,...n);return Sre(r),new Bu(e,null,new xn(r))}{if(!(e instanceof Bu||e instanceof wy))throw new Yt(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Fi.fromString(t,...n));return Sre(r),new Bu(e.firestore,e instanceof wy?e.converter:null,new xn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kre{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new l1e(this,"async_queue_retry"),this.fu=()=>{const r=q8();r&&Zt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=q8();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=q8();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new f0;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!JT(t))throw t;Zt("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw I0("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const i=AW.createAndSchedule(this,t,n,r,s=>this.Su(s));return this.Eu.push(i),i}pu(){this.Au&&Pn()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class wx extends DW{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new kre,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new kre(t),this._firestoreClient=void 0,await t}}}function mZe(e,t,n){n||(n="(default)");const r=KT(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(ik(s,t))return i;throw new Yt(ct.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Yt(ct.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Yt(ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function PI(e){if(e._terminated)throw new Yt(ct.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||gZe(e),e._firestoreClient}function gZe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new zXe(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,P1e(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new aZe(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(e._componentsProvider))}function yZe(e){return fZe(PI(e=kp(e,wx)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ME(Sa.fromBase64String(t))}catch(n){throw new Yt(ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ME(Sa.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Yt(ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ga(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NW=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Yt(ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Yt(ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return _r(this._lat,t._lat)||_r(this._long,t._long)}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vZe=/^__.*__$/;class bZe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new v1(t,this.data,this.fieldMask,n,this.fieldTransforms):new CI(t,this.data,n,this.fieldTransforms)}}class N1e{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new v1(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function O1e(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pn()}}class $W{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new $W(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Bu(t),i}Lu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return e4(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(O1e(this.Mu)&&vZe.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class xZe{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||hL(t)}$u(t,n,r,i=!1){return new $W({Mu:t,methodName:n,Ku:r,path:ga.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yL(e){const t=e._freezeSettings(),n=hL(e._databaseId);return new xZe(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $1e(e,t,n,r,i,s={}){const o=e.$u(s.merge||s.mergeFields?2:0,t,n,i);MW("Data must be an object, but it was:",o,r);const a=F1e(r,o);let u,l;if(s.merge)u=new Ec(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=w7(t,f,n);if(!o.contains(d))throw new Yt(ct.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);j1e(c,d)||c.push(d)}u=new Ec(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new bZe(new Al(a),u,l)}class vL extends gL{_toFieldTransform(t){if(t.Mu!==2)throw t.Mu===1?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof vL}}class LW extends gL{_toFieldTransform(t){return new hQe(t.path,new fk)}isEqual(t){return t instanceof LW}}function L1e(e,t,n,r){const i=e.$u(1,t,n);MW("Data must be an object, but it was:",i,r);const s=[],o=Al.empty();y1(r,(u,l)=>{const c=FW(t,u,n);l=Ri(l);const f=i.Lu(c);if(l instanceof vL)s.push(c);else{const d=NI(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Ec(s);return new N1e(o,a,i.fieldTransforms)}function M1e(e,t,n,r,i,s){const o=e.$u(1,t,n),a=[w7(t,r,n)],u=[i];if(s.length%2!=0)throw new Yt(ct.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(w7(t,s[d])),u.push(s[d+1]);const l=[],c=Al.empty();for(let d=a.length-1;d>=0;--d)if(!j1e(l,a[d])){const h=a[d];let p=u[d];p=Ri(p);const g=o.Lu(h);if(p instanceof vL)l.push(h);else{const y=NI(p,g);y!=null&&(l.push(h),c.set(h,y))}}const f=new Ec(l);return new N1e(c,f,o.fieldTransforms)}function wZe(e,t,n,r=!1){return NI(n,e.$u(r?4:3,t))}function NI(e,t){if(B1e(e=Ri(e)))return MW("Unsupported field value:",t,e),F1e(e,t);if(e instanceof gL)return function(r,i){if(!O1e(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=NI(a,i.ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Ri(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cQe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=go.fromDate(r);return{timestampValue:XO(i.serializer,s)}}if(r instanceof go){const s=new go(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:XO(i.serializer,s)}}if(r instanceof NW)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ME)return{bytesValue:Zye(i.serializer,r._byteString)};if(r instanceof Bu){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bW(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof OW)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return mW(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${mL(r)}`)}(e,t)}function F1e(e,t){const n={};return kye(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):y1(e,(r,i)=>{const s=NI(i,t.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function B1e(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof go||e instanceof NW||e instanceof ME||e instanceof Bu||e instanceof gL||e instanceof OW)}function MW(e,t,n){if(!B1e(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=mL(n);throw r==="an object"?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function w7(e,t,n){if((t=Ri(t))instanceof DI)return t._internalPath;if(typeof t=="string")return FW(e,t);throw e4("Field path arguments must be of type string or ",e,!1,void 0,n)}const _Ze=new RegExp("[~\\*/\\[\\]]");function FW(e,t,n){if(t.search(_Ze)>=0)throw e4(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new DI(...t.split("."))._internalPath}catch{throw e4(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function e4(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Yt(ct.INVALID_ARGUMENT,a+e+u)}function j1e(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1e{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new EZe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(bL("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EZe extends U1e{data(){return super.data()}}function bL(e,t){return typeof t=="string"?FW(e,t):t instanceof DI?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TZe(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Yt(ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BW{}class z1e extends BW{}function G8(e,t,...n){let r=[];t instanceof BW&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof jW).length,a=s.filter(u=>u instanceof xL).length;if(o>1||o>0&&a>0)throw new Yt(ct.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class xL extends z1e{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new xL(t,n,r)}_apply(t){const n=this._parse(t);return V1e(t._query,n),new xx(t.firestore,t.converter,f7(t._query,n))}_parse(t){const n=yL(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Yt(ct.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Dre(f,c);const h=[];for(const p of f)h.push(Pre(u,s,p));d={arrayValue:{values:h}}}else d=Pre(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Dre(f,c),d=wZe(a,o,f,c==="in"||c==="not-in");return Js.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Ire(e,t,n){const r=t,i=bL("where",e);return xL._create(i,r,n)}class jW extends BW{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new jW(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Wd.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)V1e(o,u),o=f7(o,u)}(t._query,n),new xx(t.firestore,t.converter,f7(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class UW extends z1e{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new UW(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Yt(ct.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Yt(ct.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ck(s,o)}(t._query,this._field,this._direction);return new xx(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ZT(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function Rre(e,t="asc"){const n=t,r=bL("orderBy",e);return UW._create(r,n)}function Pre(e,t,n){if(typeof(n=Ri(n))=="string"){if(n==="")throw new Yt(ct.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mye(t)&&n.indexOf("/")!==-1)throw new Yt(ct.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Fi.fromString(n));if(!xn.isDocumentKey(r))throw new Yt(ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xne(e,new xn(r))}if(n instanceof Bu)return Xne(e,n._key);throw new Yt(ct.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mL(n)}.`)}function Dre(e,t){if(!Array.isArray(e)||e.length===0)throw new Yt(ct.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function V1e(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Yt(ct.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Yt(ct.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class SZe{convertValue(t,n="none"){switch(Ly(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ls(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes($y(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Pn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return y1(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ls(o.doubleValue));return new OW(s)}convertGeoPoint(t){return new NW(Ls(t.latitude),Ls(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=aL(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ak(t));default:return null}}convertTimestamp(t){const n=Oy(t);return new go(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Fi.fromString(t);ei(s1e(r));const i=new uk(r.get(1),r.get(3)),s=new xn(r.popFirst(5));return i.isEqual(n)||I0(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1e(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class q1e extends U1e{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new c3(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(bL("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class c3 extends q1e{data(t={}){return super.data(t)}}class CZe{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new DC(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new c3(this._firestore,this._userDataWriter,r.key,r,new DC(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Yt(ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new c3(i._firestore,i._userDataWriter,a.doc.key,a.doc,new DC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new c3(i._firestore,i._userDataWriter,a.doc.key,a.doc,new DC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:AZe(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function AZe(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(e){e=kp(e,Bu);const t=kp(e.firestore,wx);return dZe(PI(t),e._key).then(n=>kZe(t,e,n))}class W1e extends SZe{constructor(t){super(),this.firestore=t}convertBytes(t){return new ME(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Bu(this.firestore,null,n)}}function f_(e){e=kp(e,xx);const t=kp(e.firestore,wx),n=PI(t),r=new W1e(t);return TZe(e._query),hZe(n,e._query).then(i=>new CZe(t,r,e,i))}function za(e,t,n){e=kp(e,Bu);const r=kp(e.firestore,wx),i=H1e(e.converter,t,n);return zW(r,[$1e(yL(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Ic.none())])}function Nre(e,t,n,...r){e=kp(e,Bu);const i=kp(e.firestore,wx),s=yL(i);let o;return o=typeof(t=Ri(t))=="string"||t instanceof DI?M1e(s,"updateDoc",e._key,t,n,r):L1e(s,"updateDoc",e._key,t),zW(i,[o.toMutation(e._key,Ic.exists(!0))])}function zW(e,t){return function(r,i){const s=new f0;return r.asyncQueue.enqueueAndForget(async()=>JJe(await cZe(r),i,s)),s.promise}(PI(e),t)}function kZe(e,t,n){const r=n.docs.get(t._key),i=new W1e(e);return new q1e(e,i,t._key,r,new DC(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IZe{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yL(t)}set(t,n,r){this._verifyNotCommitted();const i=Y8(t,this._firestore),s=H1e(i.converter,n,r),o=$1e(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ic.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=Y8(t,this._firestore);let o;return o=typeof(n=Ri(n))=="string"||n instanceof DI?M1e(this._dataReader,"WriteBatch.update",s._key,n,r,i):L1e(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ic.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Y8(t,this._firestore);return this._mutations=this._mutations.concat(new gW(n._key,Ic.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Yt(ct.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Y8(e,t){if((e=Ri(e)).firestore!==t)throw new Yt(ct.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function lD(){return new LW("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ore(e){return PI(e=kp(e,wx)),new IZe(e,t=>zW(e,t))}(function(t,n=!0){(function(i){XT=i})(yx),k0(new Cp("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new wx(new SXe(r.getProvider("auth-internal")),new IXe(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Yt(ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uk(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Fd(Hne,"4.7.6",t),Fd(Hne,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7=new Map,G1e={activated:!1,tokenObservers:[]},RZe={initialized:!1,enabled:!1};function vo(e){return _7.get(e)||Object.assign({},G1e)}function PZe(e,t){return _7.set(e,t),_7.get(e)}function wL(){return RZe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1e="https://content-firebaseappcheck.googleapis.com/v1",DZe="exchangeRecaptchaV3Token",NZe="exchangeDebugToken",$re={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},OZe=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ze{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new rk,this.pending.promise.catch(n=>{}),await LZe(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new rk,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function LZe(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MZe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Il=new YT("appCheck","AppCheck",MZe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lre(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function VW(e){if(!vo(e).activated)throw Il.create("use-before-activation",{appName:e.name})}function K1e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=cD(n)+"d:"),r&&(o+=cD(r)+"h:"),o+=cD(i)+"m:"+cD(s)+"s",o}function cD(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HW({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Il.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Il.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Il.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Il.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function FZe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${Y1e}/projects/${n}/apps/${r}:${DZe}?key=${i}`,body:{recaptcha_v3_token:t}}}function X1e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${Y1e}/projects/${n}/apps/${r}:${NZe}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BZe="firebase-app-check-database",jZe=1,pk="firebase-app-check-store",Q1e="debug-token";let fD=null;function J1e(){return fD||(fD=new Promise((e,t)=>{try{const n=indexedDB.open(BZe,jZe);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Il.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(pk,{keyPath:"compositeKey"})}}}catch(n){t(Il.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),fD)}function UZe(e){return eve(tve(e))}function zZe(e,t){return Z1e(tve(e),t)}function VZe(e){return Z1e(Q1e,e)}function HZe(){return eve(Q1e)}async function Z1e(e,t){const r=(await J1e()).transaction(pk,"readwrite"),s=r.objectStore(pk).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Il.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function eve(e){const n=(await J1e()).transaction(pk,"readonly"),i=n.objectStore(pk).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Il.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function tve(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=new nL("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qZe(e){if(Zq()){let t;try{t=await UZe(e)}catch(n){mk.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function K8(e,t){return Zq()?zZe(e,t).catch(n=>{mk.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function WZe(){let e;try{e=await HZe()}catch{}if(e)return e;{const t=crypto.randomUUID();return VZe(t).catch(n=>mk.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qW(){return wL().enabled}async function WW(){const e=wL();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function GZe(){const e=Jge(),t=wL();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new rk;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(WZe())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YZe={error:"UNKNOWN_ERROR"};function KZe(e){return Jq.encodeString(JSON.stringify(e),!1)}async function E7(e,t=!1){const n=e.app;VW(n);const r=vo(n);let i=r.token,s;if(i&&!z_(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(z_(u)?i=u:await K8(n,void 0))}if(!t&&i&&z_(i))return{token:i.token};let o=!1;if(qW()){r.exchangeTokenPromise||(r.exchangeTokenPromise=HW(X1e(n,await WW()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await K8(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await vo(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?mk.warn(u.message):mk.error(u),s=u}let a;return i?s?z_(i)?a={token:i.token,internalError:s}:a=Fre(s):(a={token:i.token},r.token=i,await K8(n,i)):a=Fre(s),o&&ive(n,a),a}async function XZe(e){const t=e.app;VW(t);const{provider:n}=vo(t);if(qW()){const r=await WW(),{token:i}=await HW(X1e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function nve(e,t,n,r){const{app:i}=e,s=vo(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&z_(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Mre(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Mre(e))}function rve(e,t){const n=vo(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Mre(e){const{app:t}=e,n=vo(t);let r=n.tokenRefresher;r||(r=QZe(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function QZe(e){const{app:t}=e;return new $Ze(async()=>{const n=vo(t);let r;if(n.token?r=await E7(e,!0):r=await E7(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=vo(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},$re.RETRIAL_MIN_WAIT,$re.RETRIAL_MAX_WAIT)}function ive(e,t){const n=vo(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function z_(e){return e.expireTimeMillis-Date.now()>0}function Fre(e){return{token:KZe(YZe),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZe{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=vo(this.app);for(const n of t)rve(this.app,n.next);return Promise.resolve()}}function ZZe(e,t){return new JZe(e,t)}function eet(e){return{getToken:t=>E7(e,t),getLimitedUseToken:()=>XZe(e),addTokenListener:t=>nve(e,"INTERNAL",t),removeTokenListener:t=>rve(e.app,t)}}const tet="@firebase/app-check",net="0.8.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ret="https://www.google.com/recaptcha/api.js";function iet(e,t){const n=new rk,r=vo(e);r.reCAPTCHAState={initialized:n};const i=set(e),s=Lre(!1);return s?Bre(e,t,s,i,n):uet(()=>{const o=Lre(!1);if(!o)throw new Error("no recaptcha");Bre(e,t,o,i,n)}),n.promise}function Bre(e,t,n,r,i){n.ready(()=>{aet(e,t,n,r),i.resolve(n)})}function set(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function oet(e){VW(e);const n=await vo(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=vo(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function aet(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{vo(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{vo(e).reCAPTCHAState.succeeded=!1}}),s=vo(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function uet(e){const t=document.createElement("script");t.src=ret,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;fet(this._throttleData);const i=await oet(this._app).catch(o=>{throw Il.create("recaptcha-error")});if(!(!((t=vo(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Il.create("recaptcha-error");let s;try{s=await HW(FZe(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=cet(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Il.create("throttled",{time:K1e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=KT(t,"heartbeat"),iet(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof GW?this._siteKey===t._siteKey:!1}}function cet(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+OZe,httpStatus:e};{const n=t?t.backoffCount:0,r=XGe(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function fet(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Il.create("throttled",{time:K1e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function det(e=tW(),t){e=Ri(e);const n=KT(e,"app-check");if(wL().initialized||GZe(),qW()&&WW().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Il.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return het(e,t.provider,t.isTokenAutoRefreshEnabled),vo(e).isTokenAutoRefreshEnabled&&nve(r,"INTERNAL",()=>{}),r}function het(e,t,n){const r=PZe(e,Object.assign({},G1e));r.activated=!0,r.provider=t,r.cachedTokenPromise=qZe(e).then(i=>(i&&z_(i)&&(r.token=i,ive(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const pet="app-check",jre="app-check-internal";function met(){k0(new Cp(pet,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return ZZe(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(jre).initialize()})),k0(new Cp(jre,e=>{const t=e.getProvider("app-check").getImmediate();return eet(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Fd(tet,net)}met();function sve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const get=sve,ove=new YT("auth","Firebase",sve());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=new nL("@firebase/auth");function yet(e,...t){t4.logLevel<=pr.WARN&&t4.warn(`Auth (${yx}): ${e}`,...t)}function f3(e,...t){t4.logLevel<=pr.ERROR&&t4.error(`Auth (${yx}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(e,...t){throw KW(e,...t)}function Bd(e,...t){return KW(e,...t)}function YW(e,t,n){const r=Object.assign(Object.assign({},get()),{[t]:n});return new YT("auth","Firebase",r).create(t,{appName:e.name})}function _y(e){return YW(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vet(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Ip(e,"argument-error"),YW(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function KW(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return ove.create(e,...t)}function On(e,t,...n){if(!e)throw KW(t,...n)}function Zm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw f3(t),new Error(t)}function P0(e,t){e||Zm(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T7(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function bet(){return Ure()==="http:"||Ure()==="https:"}function Ure(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xet(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bet()||OGe()||"connection"in navigator)?navigator.onLine:!0}function wet(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t,n){this.shortDelay=t,this.longDelay=n,P0(n>t,"Short delay should be less than long delay!"),this.isMobile=PGe()||$Ge()}get(){return xet()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XW(e,t){P0(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ave{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _et={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eet=new OI(3e4,6e4);function _L(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function tS(e,t,n,r,i={}){return uve(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=TI(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:u},s);return NGe()||(l.referrerPolicy="no-referrer"),ave.fetch()(cve(e,e.config.apiHost,n,a),l)})}async function uve(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},_et),t);try{const i=new Tet(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw dD(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw dD(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw dD(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw dD(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw YW(e,c,l);Ip(e,c)}}catch(i){if(i instanceof Vp)throw i;Ip(e,"network-request-failed",{message:String(i)})}}async function lve(e,t,n,r,i={}){const s=await tS(e,t,n,r,i);return"mfaPendingCredential"in s&&Ip(e,"multi-factor-auth-required",{_serverResponse:s}),s}function cve(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?XW(e.config,i):`${e.config.apiScheme}://${i}`}class Tet{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bd(this.auth,"network-request-failed")),Eet.get())})}}function dD(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Bd(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cet(e,t){return tS(e,"POST","/v1/accounts:delete",t)}async function fve(e,t){return tS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Aet(e,t=!1){const n=Ri(e),r=await n.getIdToken(t),i=QW(r);On(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:kA(X8(i.auth_time)),issuedAtTime:kA(X8(i.iat)),expirationTime:kA(X8(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function X8(e){return Number(e)*1e3}function QW(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return f3("JWT malformed, contained fewer than 3 sections"),null;try{const i=Qge(n);return i?JSON.parse(i):(f3("Failed to decode base64 JWT payload"),null)}catch(i){return f3("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function zre(e){const t=QW(e);return On(t,"internal-error"),On(typeof t.exp<"u","internal-error"),On(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Vp&&ket(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function ket({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iet{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kA(this.lastLoginAt),this.creationTime=kA(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(e){var t;const n=e.auth,r=await e.getIdToken(),i=await gk(e,fve(n,{idToken:r}));On(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?dve(s.providerUserInfo):[],a=Pet(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new S7(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function Ret(e){const t=Ri(e);await n4(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Pet(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function dve(e){return e.map(t=>{var{providerId:n}=t,r=iI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Det(e,t){const n=await uve(e,{},async()=>{const r=TI({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=cve(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ave.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Net(e,t){return tS(e,"POST","/v2/accounts:revokeToken",_L(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){On(t.idToken,"internal-error"),On(typeof t.idToken<"u","internal-error"),On(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):zre(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){On(t.length!==0,"internal-error");const n=zre(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(On(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Det(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new sE;return r&&(On(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(On(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(On(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new sE,this.toJSON())}_performRefresh(){return Zm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(e,t){On(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class e0{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=iI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Iet(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new S7(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await gk(this,this.stsTokenManager.getToken(this.auth,t));return On(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Aet(this,t)}reload(){return Ret(this)}_assign(t){this!==t&&(On(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new e0(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){On(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await n4(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rp(this.auth.app))return Promise.reject(_y(this.auth));const t=await this.getIdToken();return await gk(this,Cet(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,b=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:E,isAnonymous:T,providerData:k,stsTokenManager:I}=n;On(_&&I,t,"internal-error");const R=sE.fromJSON(this.name,I);On(typeof _=="string",t,"internal-error"),Bg(f,t.name),Bg(d,t.name),On(typeof E=="boolean",t,"internal-error"),On(typeof T=="boolean",t,"internal-error"),Bg(h,t.name),Bg(p,t.name),Bg(g,t.name),Bg(y,t.name),Bg(x,t.name),Bg(b,t.name);const D=new e0({uid:_,auth:t,email:d,emailVerified:E,displayName:f,isAnonymous:T,photoURL:p,phoneNumber:h,tenantId:g,stsTokenManager:R,createdAt:x,lastLoginAt:b});return k&&Array.isArray(k)&&(D.providerData=k.map(L=>Object.assign({},L))),y&&(D._redirectEventId=y),D}static async _fromIdTokenResponse(t,n,r=!1){const i=new sE;i.updateFromServerResponse(n);const s=new e0({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await n4(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];On(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?dve(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new sE;a.updateFromIdToken(r);const u=new e0({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new S7(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vre=new Map;function t0(e){P0(e instanceof Function,"Expected a class definition");let t=Vre.get(e);return t?(P0(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Vre.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hve{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}hve.type="NONE";const Hre=hve;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(e,t,n){return`firebase:${e}:${t}:${n}`}class oE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=d3(this.userKey,i.apiKey,s),this.fullPersistenceKey=d3("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?e0._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new oE(t0(Hre),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||t0(Hre);const o=d3(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=e0._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new oE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new oE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qre(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(yve(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(pve(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(bve(t))return"Blackberry";if(xve(t))return"Webos";if(mve(t))return"Safari";if((t.includes("chrome/")||gve(t))&&!t.includes("edge/"))return"Chrome";if(vve(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pve(e=uu()){return/firefox\//i.test(e)}function mve(e=uu()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function gve(e=uu()){return/crios\//i.test(e)}function yve(e=uu()){return/iemobile/i.test(e)}function vve(e=uu()){return/android/i.test(e)}function bve(e=uu()){return/blackberry/i.test(e)}function xve(e=uu()){return/webos/i.test(e)}function JW(e=uu()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Oet(e=uu()){var t;return JW(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function $et(){return LGe()&&document.documentMode===10}function wve(e=uu()){return JW(e)||vve(e)||xve(e)||bve(e)||/windows phone/i.test(e)||yve(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ve(e,t=[]){let n;switch(e){case"Browser":n=qre(uu());break;case"Worker":n=`${qre(uu())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${yx}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Let{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Met(e,t={}){return tS(e,"GET","/v2/passwordPolicy",_L(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fet=6;class Bet{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Fet,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jet{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wre(this),this.idTokenSubscription=new Wre(this),this.beforeStateQueue=new Let(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ove,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=t0(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await oE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await fve(this,{idToken:t}),r=await e0._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(rp(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return On(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await n4(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=wet()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(rp(this.app))return Promise.reject(_y(this));const n=t?Ri(t):null;return n&&On(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&On(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return rp(this.app)?Promise.reject(_y(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return rp(this.app)?Promise.reject(_y(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(t0(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Met(this),n=new Bet(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new YT("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Net(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&t0(t)||this._popupRedirectResolver;On(n,this,"argument-error"),this.redirectPersistenceManager=await oE.create(this,[t0(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(On(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return On(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=_ve(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&yet(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $I(e){return Ri(e)}class Wre{constructor(t){this.auth=t,this.observer=null,this.addObserver=VGe(n=>this.observer=n)}get next(){return On(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZW={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Uet(e){ZW=e}function zet(e){return ZW.loadJS(e)}function Vet(){return ZW.gapiScript}function Het(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qet(e,t){const n=KT(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ik(s,t??{}))return i;Ip(i,"already-initialized")}return n.initialize({options:t})}function Wet(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(t0);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Get(e,t,n){const r=$I(e);On(r._canInitEmulator,r,"emulator-config-failed"),On(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=Eve(t),{host:o,port:a}=Yet(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Ket()}function Eve(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Yet(e){const t=Eve(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Gre(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Gre(o)}}}function Gre(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Ket(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tve{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Zm("not implemented")}_getIdTokenResponse(t){return Zm("not implemented")}_linkToIdToken(t,n){return Zm("not implemented")}_getReauthenticationResolver(t){return Zm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aE(e,t){return lve(e,"POST","/v1/accounts:signInWithIdp",_L(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xet="http://localhost";class Ib extends Tve{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ib(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ip("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=iI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ib(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return aE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,aE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,aE(t,n)}buildRequest(){const t={requestUri:Xet,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=TI(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI extends eG{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny extends LI{constructor(){super("facebook.com")}static credential(t){return Ib._fromParams({providerId:ny.PROVIDER_ID,signInMethod:ny.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ny.credentialFromTaggedObject(t)}static credentialFromError(t){return ny.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ny.credential(t.oauthAccessToken)}catch{return null}}}ny.FACEBOOK_SIGN_IN_METHOD="facebook.com";ny.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends LI{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ib._fromParams({providerId:Km.PROVIDER_ID,signInMethod:Km.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Km.credentialFromTaggedObject(t)}static credentialFromError(t){return Km.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Km.credential(n,r)}catch{return null}}}Km.GOOGLE_SIGN_IN_METHOD="google.com";Km.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry extends LI{constructor(){super("github.com")}static credential(t){return Ib._fromParams({providerId:ry.PROVIDER_ID,signInMethod:ry.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ry.credentialFromTaggedObject(t)}static credentialFromError(t){return ry.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ry.credential(t.oauthAccessToken)}catch{return null}}}ry.GITHUB_SIGN_IN_METHOD="github.com";ry.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy extends LI{constructor(){super("twitter.com")}static credential(t,n){return Ib._fromParams({providerId:iy.PROVIDER_ID,signInMethod:iy.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return iy.credentialFromTaggedObject(t)}static credentialFromError(t){return iy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return iy.credential(n,r)}catch{return null}}}iy.TWITTER_SIGN_IN_METHOD="twitter.com";iy.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qet(e,t){return lve(e,"POST","/v1/accounts:signUp",_L(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await e0._fromIdTokenResponse(t,r,i),o=Yre(r);return new Fy({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Yre(r);return new Fy({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Yre(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jet(e){var t;if(rp(e.app))return Promise.reject(_y(e));const n=$I(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Fy({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Qet(n,{returnSecureToken:!0}),i=await Fy._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4 extends Vp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,r4.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new r4(t,n,r,i)}}function Sve(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?r4._fromErrorAndOperation(e,s,t,r):s})}async function Zet(e,t,n=!1){const r=await gk(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Fy._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ett(e,t,n=!1){const{auth:r}=e;if(rp(r.app))return Promise.reject(_y(r));const i="reauthenticate";try{const s=await gk(e,Sve(r,i,t,e),n);On(s.idToken,r,"internal-error");const o=QW(s.idToken);On(o,r,"internal-error");const{sub:a}=o;return On(e.uid===a,r,"user-mismatch"),Fy._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ip(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ttt(e,t,n=!1){if(rp(e.app))return Promise.reject(_y(e));const r="signIn",i=await Sve(e,r,t),s=await Fy._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function ntt(e,t,n,r){return Ri(e).onIdTokenChanged(t,n,r)}function rtt(e,t,n){return Ri(e).beforeAuthStateChanged(t,n)}function itt(e,t,n,r){return Ri(e).onAuthStateChanged(t,n,r)}function stt(e){return Ri(e).signOut()}const i4="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cve{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(i4,"1"),this.storage.removeItem(i4),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ott=1e3,att=10;class Ave extends Cve{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wve(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);$et()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,att):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},ott)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Ave.type="LOCAL";const utt=Ave;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kve extends Cve{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}kve.type="SESSION";const Ive=kve;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ltt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new EL(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await ltt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}EL.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tG(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ctt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=tG("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(){return window}function ftt(e){fp().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rve(){return typeof fp().WorkerGlobalScope<"u"&&typeof fp().importScripts=="function"}async function dtt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function htt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function ptt(){return Rve()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pve="firebaseLocalStorageDb",mtt=1,s4="firebaseLocalStorage",Dve="fbase_key";class MI{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function TL(e,t){return e.transaction([s4],t?"readwrite":"readonly").objectStore(s4)}function gtt(){const e=indexedDB.deleteDatabase(Pve);return new MI(e).toPromise()}function C7(){const e=indexedDB.open(Pve,mtt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(s4,{keyPath:Dve})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(s4)?t(r):(r.close(),await gtt(),t(await C7()))})})}async function Kre(e,t,n){const r=TL(e,!0).put({[Dve]:t,value:n});return new MI(r).toPromise()}async function ytt(e,t){const n=TL(e,!1).get(t),r=await new MI(n).toPromise();return r===void 0?null:r.value}function Xre(e,t){const n=TL(e,!0).delete(t);return new MI(n).toPromise()}const vtt=800,btt=3;class Nve{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await C7(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>btt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rve()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=EL._getInstance(ptt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await dtt(),!this.activeServiceWorker)return;this.sender=new ctt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||htt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await C7();return await Kre(t,i4,"1"),await Xre(t,i4),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Kre(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>ytt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xre(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=TL(i,!1).getAll();return new MI(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vtt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Nve.type="LOCAL";const xtt=Nve;new OI(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ove(e,t){return t?t0(t):(On(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG extends Tve{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return aE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return aE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return aE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function wtt(e){return ttt(e.auth,new nG(e),e.bypassAuthState)}function _tt(e){const{auth:t,user:n}=e;return On(n,t,"internal-error"),ett(n,new nG(e),e.bypassAuthState)}async function Ett(e){const{auth:t,user:n}=e;return On(n,t,"internal-error"),Zet(n,new nG(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ve{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return wtt;case"linkViaPopup":case"linkViaRedirect":return Ett;case"reauthViaPopup":case"reauthViaRedirect":return _tt;default:Ip(this.auth,"internal-error")}}resolve(t){P0(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){P0(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ttt=new OI(2e3,1e4);async function Stt(e,t,n){if(rp(e.app))return Promise.reject(Bd(e,"operation-not-supported-in-this-environment"));const r=$I(e);vet(e,t,eG);const i=Ove(r,n);return new sb(r,"signInViaPopup",t,i).executeNotNull()}class sb extends $ve{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,sb.currentPopupAction&&sb.currentPopupAction.cancel(),sb.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return On(t,this.auth,"internal-error"),t}async onExecution(){P0(this.filter.length===1,"Popup operations only handle one event");const t=tG();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Bd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sb.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Ttt.get())};t()}}sb.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ctt="pendingRedirect",h3=new Map;class Att extends $ve{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=h3.get(this.auth._key());if(!t){try{const r=await ktt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}h3.set(this.auth._key(),t)}return this.bypassAuthState||h3.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ktt(e,t){const n=Ptt(t),r=Rtt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Itt(e,t){h3.set(e._key(),t)}function Rtt(e){return t0(e._redirectPersistence)}function Ptt(e){return d3(Ctt,e.config.apiKey,e.name)}async function Dtt(e,t,n=!1){if(rp(e.app))return Promise.reject(_y(e));const r=$I(e),i=Ove(r,t),o=await new Att(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ntt=10*60*1e3;class Ott{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!$tt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!Lve(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Bd(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Ntt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qre(t))}saveEventToCache(t){this.cachedEventUids.add(Qre(t)),this.lastProcessedEventTime=Date.now()}}function Qre(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Lve({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function $tt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lve(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ltt(e,t={}){return tS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mtt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ftt=/^https?/;async function Btt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Ltt(e);for(const n of t)try{if(jtt(n))return}catch{}Ip(e,"unauthorized-domain")}function jtt(e){const t=T7(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Ftt.test(n))return!1;if(Mtt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Utt=new OI(3e4,6e4);function Jre(){const e=fp().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function ztt(e){return new Promise((t,n)=>{var r,i,s;function o(){Jre(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Jre(),n(Bd(e,"network-request-failed"))},timeout:Utt.get()})}if(!((i=(r=fp().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=fp().gapi)===null||s===void 0)&&s.load)o();else{const a=Het("iframefcb");return fp()[a]=()=>{gapi.load?o():n(Bd(e,"network-request-failed"))},zet(`${Vet()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw p3=null,t})}let p3=null;function Vtt(e){return p3=p3||ztt(e),p3}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Htt=new OI(5e3,15e3),qtt="__/auth/iframe",Wtt="emulator/auth/iframe",Gtt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ytt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ktt(e){const t=e.config;On(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?XW(t,Wtt):`https://${e.config.authDomain}/${qtt}`,r={apiKey:t.apiKey,appName:e.name,v:yx},i=Ytt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${TI(r).slice(1)}`}async function Xtt(e){const t=await Vtt(e),n=fp().gapi;return On(n,e,"internal-error"),t.open({where:document.body,url:Ktt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gtt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Bd(e,"network-request-failed"),a=fp().setTimeout(()=>{s(o)},Htt.get());function u(){fp().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qtt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jtt=500,Ztt=600,ent="_blank",tnt="http://localhost";class Zre{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nnt(e,t,n,r=Jtt,i=Ztt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Qtt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=uu().toLowerCase();n&&(a=gve(l)?ent:n),pve(l)&&(t=t||tnt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(Oet(l)&&a!=="_self")return rnt(t||"",a),new Zre(null);const f=window.open(t||"",a,c);On(f,e,"popup-blocked");try{f.focus()}catch{}return new Zre(f)}function rnt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const int="__/auth/handler",snt="emulator/auth/handler",ont=encodeURIComponent("fac");async function eie(e,t,n,r,i,s){On(e.config.authDomain,e,"auth-domain-config-required"),On(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:yx,eventId:i};if(t instanceof eG){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",zGe(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof LI){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${ont}=${encodeURIComponent(u)}`:"";return`${ant(e)}?${TI(a).slice(1)}${l}`}function ant({config:e}){return e.emulator?XW(e,snt):`https://${e.authDomain}/${int}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8="webStorageSupport";class unt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ive,this._completeRedirectFn=Dtt,this._overrideRedirectResult=Itt}async _openPopup(t,n,r,i){var s;P0((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await eie(t,n,r,T7(),i);return nnt(t,o,tG())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await eie(t,n,r,T7(),i);return ftt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(P0(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await Xtt(t),r=new Ott(t);return n.register("authEvent",i=>(On(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Q8,{type:Q8},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Q8];o!==void 0&&n(!!o),Ip(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Btt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return wve()||mve()||JW()}}const Mve=unt;var tie="@firebase/auth",nie="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lnt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){On(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cnt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fnt(e){k0(new Cp("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;On(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_ve(e)},l=new jet(r,i,s,u);return Wet(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),k0(new Cp("auth-internal",t=>{const n=$I(t.getProvider("auth").getImmediate());return(r=>new lnt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fd(tie,nie,cnt(e)),Fd(tie,nie,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dnt=5*60,hnt=tye("authIdTokenMaxAge")||dnt;let rie=null;const pnt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>hnt)return;const i=n==null?void 0:n.token;rie!==i&&(rie=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function o4(e=tW()){const t=KT(e,"auth");if(t.isInitialized())return t.getImmediate();const n=qet(e,{popupRedirectResolver:Mve,persistence:[xtt,utt,Ive]}),r=tye("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=pnt(s.toString());rtt(n,o,()=>o(n.currentUser)),ntt(n,a=>o(a))}}const i=Zge("auth");return i&&Get(n,`http://${i}`),n}function mnt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Uet({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Bd("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mnt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fnt("Browser");function NC(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var J8={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var iie;function gnt(){return iie||(iie=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof NC=="function"&&NC;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var g=r[l][1][p];return o(g||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof NC=="function"&&NC,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var y=s.document.createElement("script");y.onreadystatechange=function(){p(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},s.document.documentElement.appendChild(y)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var y,x,b=h.length;b;){for(x=h,h=[],y=-1;++y<b;)x[y]();b=h.length}d=!1}r.exports=g;function g(y){h.push(y)===1&&!d&&a()}}).call(this,typeof ho<"u"?ho:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,T!==o&&g(this,T)}f.prototype.catch=function(T){return this.then(null,T)},f.prototype.then=function(T,k){if(typeof T!="function"&&this.state===l||typeof k!="function"&&this.state===u)return this;var I=new this.constructor(o);if(this.state!==c){var R=this.state===l?T:k;h(I,R,this.outcome)}else this.queue.push(new d(I,T,k));return I};function d(T,k,I){this.promise=T,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(T){a.resolve(this.promise,T)},d.prototype.otherCallFulfilled=function(T){h(this.promise,this.onFulfilled,T)},d.prototype.callRejected=function(T){a.reject(this.promise,T)},d.prototype.otherCallRejected=function(T){h(this.promise,this.onRejected,T)};function h(T,k,I){s(function(){var R;try{R=k(I)}catch(D){return a.reject(T,D)}R===T?a.reject(T,new TypeError("Cannot resolve promise with itself")):a.resolve(T,R)})}a.resolve=function(T,k){var I=y(p,k);if(I.status==="error")return a.reject(T,I.value);var R=I.value;if(R)g(T,R);else{T.state=l,T.outcome=k;for(var D=-1,L=T.queue.length;++D<L;)T.queue[D].callFulfilled(k)}return T},a.reject=function(T,k){T.state=u,T.outcome=k;for(var I=-1,R=T.queue.length;++I<R;)T.queue[I].callRejected(k);return T};function p(T){var k=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof k=="function")return function(){k.apply(T,arguments)}}function g(T,k){var I=!1;function R(z){I||(I=!0,a.reject(T,z))}function D(z){I||(I=!0,a.resolve(T,z))}function L(){k(D,R)}var M=y(L);M.status==="error"&&R(M.value)}function y(T,k){var I={};try{I.value=T(k),I.status="success"}catch(R){I.status="error",I.value=R}return I}f.resolve=x;function x(T){return T instanceof this?T:a.resolve(new this(o),T)}f.reject=b;function b(T){var k=new this(o);return a.reject(k,T)}f.all=_;function _(T){var k=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=T.length,R=!1;if(!I)return this.resolve([]);for(var D=new Array(I),L=0,M=-1,z=new this(o);++M<I;)F(T[M],M);return z;function F(H,Q){k.resolve(H).then(J,function(ne){R||(R=!0,a.reject(z,ne))});function J(ne){D[Q]=ne,++L===I&&!R&&(R=!0,a.resolve(z,D))}}}f.race=E;function E(T){var k=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=T.length,R=!1;if(!I)return this.resolve([]);for(var D=-1,L=new this(o);++D<I;)M(T[D]);return L;function M(z){k.resolve(z).then(function(F){R||(R=!0,a.resolve(L,F))},function(F){R||(R=!0,a.reject(L,F))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof ho<"u"?ho:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae};function o(ae,we){if(!(ae instanceof we))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ae=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),we=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ae||we)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ae,we){ae=ae||[],we=we||{};try{return new Blob(ae,we)}catch(Ae){if(Ae.name!=="TypeError")throw Ae;for(var pe=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ke=new pe,Oe=0;Oe<ae.length;Oe+=1)ke.append(ae[Oe]);return ke.getBlob(we.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ae,we){we&&ae.then(function(pe){we(null,pe)},function(pe){we(pe)})}function h(ae,we,pe){typeof we=="function"&&ae.then(we),typeof pe=="function"&&ae.catch(pe)}function p(ae){return typeof ae!="string"&&(console.warn(ae+" used as a key, but it is not a string."),ae=String(ae)),ae}function g(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var y="local-forage-detect-blob-support",x=void 0,b={},_=Object.prototype.toString,E="readonly",T="readwrite";function k(ae){for(var we=ae.length,pe=new ArrayBuffer(we),ke=new Uint8Array(pe),Oe=0;Oe<we;Oe++)ke[Oe]=ae.charCodeAt(Oe);return pe}function I(ae){return new f(function(we){var pe=ae.transaction(y,T),ke=c([""]);pe.objectStore(y).put(ke,"key"),pe.onabort=function(Oe){Oe.preventDefault(),Oe.stopPropagation(),we(!1)},pe.oncomplete=function(){var Oe=navigator.userAgent.match(/Chrome\/(\d+)/),Ae=navigator.userAgent.match(/Edge\//);we(Ae||!Oe||parseInt(Oe[1],10)>=43)}}).catch(function(){return!1})}function R(ae){return typeof x=="boolean"?f.resolve(x):I(ae).then(function(we){return x=we,x})}function D(ae){var we=b[ae.name],pe={};pe.promise=new f(function(ke,Oe){pe.resolve=ke,pe.reject=Oe}),we.deferredOperations.push(pe),we.dbReady?we.dbReady=we.dbReady.then(function(){return pe.promise}):we.dbReady=pe.promise}function L(ae){var we=b[ae.name],pe=we.deferredOperations.pop();if(pe)return pe.resolve(),pe.promise}function M(ae,we){var pe=b[ae.name],ke=pe.deferredOperations.pop();if(ke)return ke.reject(we),ke.promise}function z(ae,we){return new f(function(pe,ke){if(b[ae.name]=b[ae.name]||X(),ae.db)if(we)D(ae),ae.db.close();else return pe(ae.db);var Oe=[ae.name];we&&Oe.push(ae.version);var Ae=u.open.apply(u,Oe);we&&(Ae.onupgradeneeded=function(tt){var ht=Ae.result;try{ht.createObjectStore(ae.storeName),tt.oldVersion<=1&&ht.createObjectStore(y)}catch(gt){if(gt.name==="ConstraintError")console.warn('The database "'+ae.name+'" has been upgraded from version '+tt.oldVersion+" to version "+tt.newVersion+', but the storage "'+ae.storeName+'" already exists.');else throw gt}}),Ae.onerror=function(tt){tt.preventDefault(),ke(Ae.error)},Ae.onsuccess=function(){var tt=Ae.result;tt.onversionchange=function(ht){ht.target.close()},pe(tt),L(ae)}})}function F(ae){return z(ae,!1)}function H(ae){return z(ae,!0)}function Q(ae,we){if(!ae.db)return!0;var pe=!ae.db.objectStoreNames.contains(ae.storeName),ke=ae.version<ae.db.version,Oe=ae.version>ae.db.version;if(ke&&(ae.version!==we&&console.warn('The database "'+ae.name+`" can't be downgraded from version `+ae.db.version+" to version "+ae.version+"."),ae.version=ae.db.version),Oe||pe){if(pe){var Ae=ae.db.version+1;Ae>ae.version&&(ae.version=Ae)}return!0}return!1}function J(ae){return new f(function(we,pe){var ke=new FileReader;ke.onerror=pe,ke.onloadend=function(Oe){var Ae=btoa(Oe.target.result||"");we({__local_forage_encoded_blob:!0,data:Ae,type:ae.type})},ke.readAsBinaryString(ae)})}function ne(ae){var we=k(atob(ae.data));return c([we],{type:ae.type})}function Z(ae){return ae&&ae.__local_forage_encoded_blob}function ie(ae){var we=this,pe=we._initReady().then(function(){var ke=b[we._dbInfo.name];if(ke&&ke.dbReady)return ke.dbReady});return h(pe,ae,ae),pe}function q(ae){D(ae);for(var we=b[ae.name],pe=we.forages,ke=0;ke<pe.length;ke++){var Oe=pe[ke];Oe._dbInfo.db&&(Oe._dbInfo.db.close(),Oe._dbInfo.db=null)}return ae.db=null,F(ae).then(function(Ae){return ae.db=Ae,Q(ae)?H(ae):Ae}).then(function(Ae){ae.db=we.db=Ae;for(var tt=0;tt<pe.length;tt++)pe[tt]._dbInfo.db=Ae}).catch(function(Ae){throw M(ae,Ae),Ae})}function U(ae,we,pe,ke){ke===void 0&&(ke=1);try{var Oe=ae.db.transaction(ae.storeName,we);pe(null,Oe)}catch(Ae){if(ke>0&&(!ae.db||Ae.name==="InvalidStateError"||Ae.name==="NotFoundError"))return f.resolve().then(function(){if(!ae.db||Ae.name==="NotFoundError"&&!ae.db.objectStoreNames.contains(ae.storeName)&&ae.version<=ae.db.version)return ae.db&&(ae.version=ae.db.version+1),H(ae)}).then(function(){return q(ae).then(function(){U(ae,we,pe,ke-1)})}).catch(pe);pe(Ae)}}function X(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function V(ae){var we=this,pe={db:null};if(ae)for(var ke in ae)pe[ke]=ae[ke];var Oe=b[pe.name];Oe||(Oe=X(),b[pe.name]=Oe),Oe.forages.push(we),we._initReady||(we._initReady=we.ready,we.ready=ie);var Ae=[];function tt(){return f.resolve()}for(var ht=0;ht<Oe.forages.length;ht++){var gt=Oe.forages[ht];gt!==we&&Ae.push(gt._initReady().catch(tt))}var pt=Oe.forages.slice(0);return f.all(Ae).then(function(){return pe.db=Oe.db,F(pe)}).then(function(At){return pe.db=At,Q(pe,we._defaultConfig.version)?H(pe):At}).then(function(At){pe.db=Oe.db=At,we._dbInfo=pe;for(var zt=0;zt<pt.length;zt++){var Tn=pt[zt];Tn!==we&&(Tn._dbInfo.db=pe.db,Tn._dbInfo.version=pe.version)}})}function K(ae,we){var pe=this;ae=p(ae);var ke=new f(function(Oe,Ae){pe.ready().then(function(){U(pe._dbInfo,E,function(tt,ht){if(tt)return Ae(tt);try{var gt=ht.objectStore(pe._dbInfo.storeName),pt=gt.get(ae);pt.onsuccess=function(){var At=pt.result;At===void 0&&(At=null),Z(At)&&(At=ne(At)),Oe(At)},pt.onerror=function(){Ae(pt.error)}}catch(At){Ae(At)}})}).catch(Ae)});return d(ke,we),ke}function ee(ae,we){var pe=this,ke=new f(function(Oe,Ae){pe.ready().then(function(){U(pe._dbInfo,E,function(tt,ht){if(tt)return Ae(tt);try{var gt=ht.objectStore(pe._dbInfo.storeName),pt=gt.openCursor(),At=1;pt.onsuccess=function(){var zt=pt.result;if(zt){var Tn=zt.value;Z(Tn)&&(Tn=ne(Tn));var on=ae(Tn,zt.key,At++);on!==void 0?Oe(on):zt.continue()}else Oe()},pt.onerror=function(){Ae(pt.error)}}catch(zt){Ae(zt)}})}).catch(Ae)});return d(ke,we),ke}function fe(ae,we,pe){var ke=this;ae=p(ae);var Oe=new f(function(Ae,tt){var ht;ke.ready().then(function(){return ht=ke._dbInfo,_.call(we)==="[object Blob]"?R(ht.db).then(function(gt){return gt?we:J(we)}):we}).then(function(gt){U(ke._dbInfo,T,function(pt,At){if(pt)return tt(pt);try{var zt=At.objectStore(ke._dbInfo.storeName);gt===null&&(gt=void 0);var Tn=zt.put(gt,ae);At.oncomplete=function(){gt===void 0&&(gt=null),Ae(gt)},At.onabort=At.onerror=function(){var on=Tn.error?Tn.error:Tn.transaction.error;tt(on)}}catch(on){tt(on)}})}).catch(tt)});return d(Oe,pe),Oe}function Ee(ae,we){var pe=this;ae=p(ae);var ke=new f(function(Oe,Ae){pe.ready().then(function(){U(pe._dbInfo,T,function(tt,ht){if(tt)return Ae(tt);try{var gt=ht.objectStore(pe._dbInfo.storeName),pt=gt.delete(ae);ht.oncomplete=function(){Oe()},ht.onerror=function(){Ae(pt.error)},ht.onabort=function(){var At=pt.error?pt.error:pt.transaction.error;Ae(At)}}catch(At){Ae(At)}})}).catch(Ae)});return d(ke,we),ke}function ye(ae){var we=this,pe=new f(function(ke,Oe){we.ready().then(function(){U(we._dbInfo,T,function(Ae,tt){if(Ae)return Oe(Ae);try{var ht=tt.objectStore(we._dbInfo.storeName),gt=ht.clear();tt.oncomplete=function(){ke()},tt.onabort=tt.onerror=function(){var pt=gt.error?gt.error:gt.transaction.error;Oe(pt)}}catch(pt){Oe(pt)}})}).catch(Oe)});return d(pe,ae),pe}function _e(ae){var we=this,pe=new f(function(ke,Oe){we.ready().then(function(){U(we._dbInfo,E,function(Ae,tt){if(Ae)return Oe(Ae);try{var ht=tt.objectStore(we._dbInfo.storeName),gt=ht.count();gt.onsuccess=function(){ke(gt.result)},gt.onerror=function(){Oe(gt.error)}}catch(pt){Oe(pt)}})}).catch(Oe)});return d(pe,ae),pe}function De(ae,we){var pe=this,ke=new f(function(Oe,Ae){if(ae<0){Oe(null);return}pe.ready().then(function(){U(pe._dbInfo,E,function(tt,ht){if(tt)return Ae(tt);try{var gt=ht.objectStore(pe._dbInfo.storeName),pt=!1,At=gt.openKeyCursor();At.onsuccess=function(){var zt=At.result;if(!zt){Oe(null);return}ae===0||pt?Oe(zt.key):(pt=!0,zt.advance(ae))},At.onerror=function(){Ae(At.error)}}catch(zt){Ae(zt)}})}).catch(Ae)});return d(ke,we),ke}function me(ae){var we=this,pe=new f(function(ke,Oe){we.ready().then(function(){U(we._dbInfo,E,function(Ae,tt){if(Ae)return Oe(Ae);try{var ht=tt.objectStore(we._dbInfo.storeName),gt=ht.openKeyCursor(),pt=[];gt.onsuccess=function(){var At=gt.result;if(!At){ke(pt);return}pt.push(At.key),At.continue()},gt.onerror=function(){Oe(gt.error)}}catch(At){Oe(At)}})}).catch(Oe)});return d(pe,ae),pe}function de(ae,we){we=g.apply(this,arguments);var pe=this.config();ae=typeof ae!="function"&&ae||{},ae.name||(ae.name=ae.name||pe.name,ae.storeName=ae.storeName||pe.storeName);var ke=this,Oe;if(!ae.name)Oe=f.reject("Invalid arguments");else{var Ae=ae.name===pe.name&&ke._dbInfo.db,tt=Ae?f.resolve(ke._dbInfo.db):F(ae).then(function(ht){var gt=b[ae.name],pt=gt.forages;gt.db=ht;for(var At=0;At<pt.length;At++)pt[At]._dbInfo.db=ht;return ht});ae.storeName?Oe=tt.then(function(ht){if(ht.objectStoreNames.contains(ae.storeName)){var gt=ht.version+1;D(ae);var pt=b[ae.name],At=pt.forages;ht.close();for(var zt=0;zt<At.length;zt++){var Tn=At[zt];Tn._dbInfo.db=null,Tn._dbInfo.version=gt}var on=new f(function(jn,an){var Zn=u.open(ae.name,gt);Zn.onerror=function(us){var Jo=Zn.result;Jo.close(),an(us)},Zn.onupgradeneeded=function(){var us=Zn.result;us.deleteObjectStore(ae.storeName)},Zn.onsuccess=function(){var us=Zn.result;us.close(),jn(us)}});return on.then(function(jn){pt.db=jn;for(var an=0;an<At.length;an++){var Zn=At[an];Zn._dbInfo.db=jn,L(Zn._dbInfo)}}).catch(function(jn){throw(M(ae,jn)||f.resolve()).catch(function(){}),jn})}}):Oe=tt.then(function(ht){D(ae);var gt=b[ae.name],pt=gt.forages;ht.close();for(var At=0;At<pt.length;At++){var zt=pt[At];zt._dbInfo.db=null}var Tn=new f(function(on,jn){var an=u.deleteDatabase(ae.name);an.onerror=function(){var Zn=an.result;Zn&&Zn.close(),jn(an.error)},an.onblocked=function(){console.warn('dropInstance blocked for database "'+ae.name+'" until all open connections are closed')},an.onsuccess=function(){var Zn=an.result;Zn&&Zn.close(),on(Zn)}});return Tn.then(function(on){gt.db=on;for(var jn=0;jn<pt.length;jn++){var an=pt[jn];L(an._dbInfo)}}).catch(function(on){throw(M(ae,on)||f.resolve()).catch(function(){}),on})})}return d(Oe,we),Oe}var $e={_driver:"asyncStorage",_initStorage:V,_support:l(),iterate:ee,getItem:K,setItem:fe,removeItem:Ee,clear:ye,length:_e,key:De,keys:me,dropInstance:de};function Pe(){return typeof openDatabase=="function"}var Ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",Ge=/^~~local_forage_type~([^~]+)~/,et="__lfsc__:",ut=et.length,Tt="arbf",xt="blob",Dt="si08",Ue="ui08",Ft="uic8",tn="si16",Re="si32",Ve="ur16",yt="ui32",$t="fl32",Bt="fl64",dn=ut+Tt.length,Nn=Object.prototype.toString;function dr(ae){var we=ae.length*.75,pe=ae.length,ke,Oe=0,Ae,tt,ht,gt;ae[ae.length-1]==="="&&(we--,ae[ae.length-2]==="="&&we--);var pt=new ArrayBuffer(we),At=new Uint8Array(pt);for(ke=0;ke<pe;ke+=4)Ae=Ze.indexOf(ae[ke]),tt=Ze.indexOf(ae[ke+1]),ht=Ze.indexOf(ae[ke+2]),gt=Ze.indexOf(ae[ke+3]),At[Oe++]=Ae<<2|tt>>4,At[Oe++]=(tt&15)<<4|ht>>2,At[Oe++]=(ht&3)<<6|gt&63;return pt}function ti(ae){var we=new Uint8Array(ae),pe="",ke;for(ke=0;ke<we.length;ke+=3)pe+=Ze[we[ke]>>2],pe+=Ze[(we[ke]&3)<<4|we[ke+1]>>4],pe+=Ze[(we[ke+1]&15)<<2|we[ke+2]>>6],pe+=Ze[we[ke+2]&63];return we.length%3===2?pe=pe.substring(0,pe.length-1)+"=":we.length%3===1&&(pe=pe.substring(0,pe.length-2)+"=="),pe}function kn(ae,we){var pe="";if(ae&&(pe=Nn.call(ae)),ae&&(pe==="[object ArrayBuffer]"||ae.buffer&&Nn.call(ae.buffer)==="[object ArrayBuffer]")){var ke,Oe=et;ae instanceof ArrayBuffer?(ke=ae,Oe+=Tt):(ke=ae.buffer,pe==="[object Int8Array]"?Oe+=Dt:pe==="[object Uint8Array]"?Oe+=Ue:pe==="[object Uint8ClampedArray]"?Oe+=Ft:pe==="[object Int16Array]"?Oe+=tn:pe==="[object Uint16Array]"?Oe+=Ve:pe==="[object Int32Array]"?Oe+=Re:pe==="[object Uint32Array]"?Oe+=yt:pe==="[object Float32Array]"?Oe+=$t:pe==="[object Float64Array]"?Oe+=Bt:we(new Error("Failed to get type for BinaryArray"))),we(Oe+ti(ke))}else if(pe==="[object Blob]"){var Ae=new FileReader;Ae.onload=function(){var tt=it+ae.type+"~"+ti(this.result);we(et+xt+tt)},Ae.readAsArrayBuffer(ae)}else try{we(JSON.stringify(ae))}catch(tt){console.error("Couldn't convert value into a JSON string: ",ae),we(null,tt)}}function Bn(ae){if(ae.substring(0,ut)!==et)return JSON.parse(ae);var we=ae.substring(dn),pe=ae.substring(ut,dn),ke;if(pe===xt&&Ge.test(we)){var Oe=we.match(Ge);ke=Oe[1],we=we.substring(Oe[0].length)}var Ae=dr(we);switch(pe){case Tt:return Ae;case xt:return c([Ae],{type:ke});case Dt:return new Int8Array(Ae);case Ue:return new Uint8Array(Ae);case Ft:return new Uint8ClampedArray(Ae);case tn:return new Int16Array(Ae);case Ve:return new Uint16Array(Ae);case Re:return new Int32Array(Ae);case yt:return new Uint32Array(Ae);case $t:return new Float32Array(Ae);case Bt:return new Float64Array(Ae);default:throw new Error("Unkown type: "+pe)}}var Xr={serialize:kn,deserialize:Bn,stringToBuffer:dr,bufferToString:ti};function ir(ae,we,pe,ke){ae.executeSql("CREATE TABLE IF NOT EXISTS "+we.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],pe,ke)}function zs(ae){var we=this,pe={db:null};if(ae)for(var ke in ae)pe[ke]=typeof ae[ke]!="string"?ae[ke].toString():ae[ke];var Oe=new f(function(Ae,tt){try{pe.db=openDatabase(pe.name,String(pe.version),pe.description,pe.size)}catch(ht){return tt(ht)}pe.db.transaction(function(ht){ir(ht,pe,function(){we._dbInfo=pe,Ae()},function(gt,pt){tt(pt)})},tt)});return pe.serializer=Xr,Oe}function gi(ae,we,pe,ke,Oe,Ae){ae.executeSql(pe,ke,Oe,function(tt,ht){ht.code===ht.SYNTAX_ERR?tt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[we.storeName],function(gt,pt){pt.rows.length?Ae(gt,ht):ir(gt,we,function(){gt.executeSql(pe,ke,Oe,Ae)},Ae)},Ae):Ae(tt,ht)},Ae)}function ni(ae,we){var pe=this;ae=p(ae);var ke=new f(function(Oe,Ae){pe.ready().then(function(){var tt=pe._dbInfo;tt.db.transaction(function(ht){gi(ht,tt,"SELECT * FROM "+tt.storeName+" WHERE key = ? LIMIT 1",[ae],function(gt,pt){var At=pt.rows.length?pt.rows.item(0).value:null;At&&(At=tt.serializer.deserialize(At)),Oe(At)},function(gt,pt){Ae(pt)})})}).catch(Ae)});return d(ke,we),ke}function yi(ae,we){var pe=this,ke=new f(function(Oe,Ae){pe.ready().then(function(){var tt=pe._dbInfo;tt.db.transaction(function(ht){gi(ht,tt,"SELECT * FROM "+tt.storeName,[],function(gt,pt){for(var At=pt.rows,zt=At.length,Tn=0;Tn<zt;Tn++){var on=At.item(Tn),jn=on.value;if(jn&&(jn=tt.serializer.deserialize(jn)),jn=ae(jn,on.key,Tn+1),jn!==void 0){Oe(jn);return}}Oe()},function(gt,pt){Ae(pt)})})}).catch(Ae)});return d(ke,we),ke}function Ar(ae,we,pe,ke){var Oe=this;ae=p(ae);var Ae=new f(function(tt,ht){Oe.ready().then(function(){we===void 0&&(we=null);var gt=we,pt=Oe._dbInfo;pt.serializer.serialize(we,function(At,zt){zt?ht(zt):pt.db.transaction(function(Tn){gi(Tn,pt,"INSERT OR REPLACE INTO "+pt.storeName+" (key, value) VALUES (?, ?)",[ae,At],function(){tt(gt)},function(on,jn){ht(jn)})},function(Tn){if(Tn.code===Tn.QUOTA_ERR){if(ke>0){tt(Ar.apply(Oe,[ae,gt,pe,ke-1]));return}ht(Tn)}})})}).catch(ht)});return d(Ae,pe),Ae}function Vs(ae,we,pe){return Ar.apply(this,[ae,we,pe,1])}function Yu(ae,we){var pe=this;ae=p(ae);var ke=new f(function(Oe,Ae){pe.ready().then(function(){var tt=pe._dbInfo;tt.db.transaction(function(ht){gi(ht,tt,"DELETE FROM "+tt.storeName+" WHERE key = ?",[ae],function(){Oe()},function(gt,pt){Ae(pt)})})}).catch(Ae)});return d(ke,we),ke}function Eo(ae){var we=this,pe=new f(function(ke,Oe){we.ready().then(function(){var Ae=we._dbInfo;Ae.db.transaction(function(tt){gi(tt,Ae,"DELETE FROM "+Ae.storeName,[],function(){ke()},function(ht,gt){Oe(gt)})})}).catch(Oe)});return d(pe,ae),pe}function Ra(ae){var we=this,pe=new f(function(ke,Oe){we.ready().then(function(){var Ae=we._dbInfo;Ae.db.transaction(function(tt){gi(tt,Ae,"SELECT COUNT(key) as c FROM "+Ae.storeName,[],function(ht,gt){var pt=gt.rows.item(0).c;ke(pt)},function(ht,gt){Oe(gt)})})}).catch(Oe)});return d(pe,ae),pe}function kr(ae,we){var pe=this,ke=new f(function(Oe,Ae){pe.ready().then(function(){var tt=pe._dbInfo;tt.db.transaction(function(ht){gi(ht,tt,"SELECT key FROM "+tt.storeName+" WHERE id = ? LIMIT 1",[ae+1],function(gt,pt){var At=pt.rows.length?pt.rows.item(0).key:null;Oe(At)},function(gt,pt){Ae(pt)})})}).catch(Ae)});return d(ke,we),ke}function ui(ae){var we=this,pe=new f(function(ke,Oe){we.ready().then(function(){var Ae=we._dbInfo;Ae.db.transaction(function(tt){gi(tt,Ae,"SELECT key FROM "+Ae.storeName,[],function(ht,gt){for(var pt=[],At=0;At<gt.rows.length;At++)pt.push(gt.rows.item(At).key);ke(pt)},function(ht,gt){Oe(gt)})})}).catch(Oe)});return d(pe,ae),pe}function $r(ae){return new f(function(we,pe){ae.transaction(function(ke){ke.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Oe,Ae){for(var tt=[],ht=0;ht<Ae.rows.length;ht++)tt.push(Ae.rows.item(ht).name);we({db:ae,storeNames:tt})},function(Oe,Ae){pe(Ae)})},function(ke){pe(ke)})})}function os(ae,we){we=g.apply(this,arguments);var pe=this.config();ae=typeof ae!="function"&&ae||{},ae.name||(ae.name=ae.name||pe.name,ae.storeName=ae.storeName||pe.storeName);var ke=this,Oe;return ae.name?Oe=new f(function(Ae){var tt;ae.name===pe.name?tt=ke._dbInfo.db:tt=openDatabase(ae.name,"","",0),ae.storeName?Ae({db:tt,storeNames:[ae.storeName]}):Ae($r(tt))}).then(function(Ae){return new f(function(tt,ht){Ae.db.transaction(function(gt){function pt(on){return new f(function(jn,an){gt.executeSql("DROP TABLE IF EXISTS "+on,[],function(){jn()},function(Zn,us){an(us)})})}for(var At=[],zt=0,Tn=Ae.storeNames.length;zt<Tn;zt++)At.push(pt(Ae.storeNames[zt]));f.all(At).then(function(){tt()}).catch(function(on){ht(on)})},function(gt){ht(gt)})})}):Oe=f.reject("Invalid arguments"),d(Oe,we),Oe}var yr={_driver:"webSQLStorage",_initStorage:zs,_support:Pe(),iterate:yi,getItem:ni,setItem:Vs,removeItem:Yu,clear:Eo,length:Ra,key:kr,keys:ui,dropInstance:os};function vi(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Hs(ae,we){var pe=ae.name+"/";return ae.storeName!==we.storeName&&(pe+=ae.storeName+"/"),pe}function Ts(){var ae="_localforage_support_test";try{return localStorage.setItem(ae,!0),localStorage.removeItem(ae),!1}catch{return!0}}function ro(){return!Ts()||localStorage.length>0}function pu(ae){var we=this,pe={};if(ae)for(var ke in ae)pe[ke]=ae[ke];return pe.keyPrefix=Hs(ae,we._defaultConfig),ro()?(we._dbInfo=pe,pe.serializer=Xr,f.resolve()):f.reject()}function qf(ae){var we=this,pe=we.ready().then(function(){for(var ke=we._dbInfo.keyPrefix,Oe=localStorage.length-1;Oe>=0;Oe--){var Ae=localStorage.key(Oe);Ae.indexOf(ke)===0&&localStorage.removeItem(Ae)}});return d(pe,ae),pe}function hr(ae,we){var pe=this;ae=p(ae);var ke=pe.ready().then(function(){var Oe=pe._dbInfo,Ae=localStorage.getItem(Oe.keyPrefix+ae);return Ae&&(Ae=Oe.serializer.deserialize(Ae)),Ae});return d(ke,we),ke}function Ku(ae,we){var pe=this,ke=pe.ready().then(function(){for(var Oe=pe._dbInfo,Ae=Oe.keyPrefix,tt=Ae.length,ht=localStorage.length,gt=1,pt=0;pt<ht;pt++){var At=localStorage.key(pt);if(At.indexOf(Ae)===0){var zt=localStorage.getItem(At);if(zt&&(zt=Oe.serializer.deserialize(zt)),zt=ae(zt,At.substring(tt),gt++),zt!==void 0)return zt}}});return d(ke,we),ke}function Di(ae,we){var pe=this,ke=pe.ready().then(function(){var Oe=pe._dbInfo,Ae;try{Ae=localStorage.key(ae)}catch{Ae=null}return Ae&&(Ae=Ae.substring(Oe.keyPrefix.length)),Ae});return d(ke,we),ke}function Qo(ae){var we=this,pe=we.ready().then(function(){for(var ke=we._dbInfo,Oe=localStorage.length,Ae=[],tt=0;tt<Oe;tt++){var ht=localStorage.key(tt);ht.indexOf(ke.keyPrefix)===0&&Ae.push(ht.substring(ke.keyPrefix.length))}return Ae});return d(pe,ae),pe}function io(ae){var we=this,pe=we.keys().then(function(ke){return ke.length});return d(pe,ae),pe}function mh(ae,we){var pe=this;ae=p(ae);var ke=pe.ready().then(function(){var Oe=pe._dbInfo;localStorage.removeItem(Oe.keyPrefix+ae)});return d(ke,we),ke}function Wf(ae,we,pe){var ke=this;ae=p(ae);var Oe=ke.ready().then(function(){we===void 0&&(we=null);var Ae=we;return new f(function(tt,ht){var gt=ke._dbInfo;gt.serializer.serialize(we,function(pt,At){if(At)ht(At);else try{localStorage.setItem(gt.keyPrefix+ae,pt),tt(Ae)}catch(zt){(zt.name==="QuotaExceededError"||zt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ht(zt),ht(zt)}})})});return d(Oe,pe),Oe}function Wc(ae,we){if(we=g.apply(this,arguments),ae=typeof ae!="function"&&ae||{},!ae.name){var pe=this.config();ae.name=ae.name||pe.name,ae.storeName=ae.storeName||pe.storeName}var ke=this,Oe;return ae.name?Oe=new f(function(Ae){ae.storeName?Ae(Hs(ae,ke._defaultConfig)):Ae(ae.name+"/")}).then(function(Ae){for(var tt=localStorage.length-1;tt>=0;tt--){var ht=localStorage.key(tt);ht.indexOf(Ae)===0&&localStorage.removeItem(ht)}}):Oe=f.reject("Invalid arguments"),d(Oe,we),Oe}var Gc={_driver:"localStorageWrapper",_initStorage:pu,_support:vi(),iterate:Ku,getItem:hr,setItem:Wf,removeItem:mh,clear:qf,length:io,key:Di,keys:Qo,dropInstance:Wc},ql=function(we,pe){return we===pe||typeof we=="number"&&typeof pe=="number"&&isNaN(we)&&isNaN(pe)},Wl=function(we,pe){for(var ke=we.length,Oe=0;Oe<ke;){if(ql(we[Oe],pe))return!0;Oe++}return!1},Gl=Array.isArray||function(ae){return Object.prototype.toString.call(ae)==="[object Array]"},Yn={},Gf={},Ss={INDEXEDDB:$e,WEBSQL:yr,LOCALSTORAGE:Gc},mu=[Ss.INDEXEDDB._driver,Ss.WEBSQL._driver,Ss.LOCALSTORAGE._driver],as=["dropInstance"],Xu=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(as),Yf={description:"",driver:mu.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Qu(ae,we){ae[we]=function(){var pe=arguments;return ae.ready().then(function(){return ae[we].apply(ae,pe)})}}function Cs(){for(var ae=1;ae<arguments.length;ae++){var we=arguments[ae];if(we)for(var pe in we)we.hasOwnProperty(pe)&&(Gl(we[pe])?arguments[0][pe]=we[pe].slice():arguments[0][pe]=we[pe])}return arguments[0]}var gh=function(){function ae(we){o(this,ae);for(var pe in Ss)if(Ss.hasOwnProperty(pe)){var ke=Ss[pe],Oe=ke._driver;this[pe]=Oe,Yn[Oe]||this.defineDriver(ke)}this._defaultConfig=Cs({},Yf),this._config=Cs({},this._defaultConfig,we),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ae.prototype.config=function(pe){if((typeof pe>"u"?"undefined":s(pe))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ke in pe){if(ke==="storeName"&&(pe[ke]=pe[ke].replace(/\W/g,"_")),ke==="version"&&typeof pe[ke]!="number")return new Error("Database version must be a number.");this._config[ke]=pe[ke]}return"driver"in pe&&pe.driver?this.setDriver(this._config.driver):!0}else return typeof pe=="string"?this._config[pe]:this._config},ae.prototype.defineDriver=function(pe,ke,Oe){var Ae=new f(function(tt,ht){try{var gt=pe._driver,pt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!pe._driver){ht(pt);return}for(var At=Xu.concat("_initStorage"),zt=0,Tn=At.length;zt<Tn;zt++){var on=At[zt],jn=!Wl(as,on);if((jn||pe[on])&&typeof pe[on]!="function"){ht(pt);return}}var an=function(){for(var Jo=function(qs){return function(){var Ni=new Error("Method "+qs+" is not implemented by the current driver"),Ws=f.reject(Ni);return d(Ws,arguments[arguments.length-1]),Ws}},Ju=0,Kf=as.length;Ju<Kf;Ju++){var Yl=as[Ju];pe[Yl]||(pe[Yl]=Jo(Yl))}};an();var Zn=function(Jo){Yn[gt]&&console.info("Redefining LocalForage driver: "+gt),Yn[gt]=pe,Gf[gt]=Jo,tt()};"_support"in pe?pe._support&&typeof pe._support=="function"?pe._support().then(Zn,ht):Zn(!!pe._support):Zn(!0)}catch(us){ht(us)}});return h(Ae,ke,Oe),Ae},ae.prototype.driver=function(){return this._driver||null},ae.prototype.getDriver=function(pe,ke,Oe){var Ae=Yn[pe]?f.resolve(Yn[pe]):f.reject(new Error("Driver not found."));return h(Ae,ke,Oe),Ae},ae.prototype.getSerializer=function(pe){var ke=f.resolve(Xr);return h(ke,pe),ke},ae.prototype.ready=function(pe){var ke=this,Oe=ke._driverSet.then(function(){return ke._ready===null&&(ke._ready=ke._initDriver()),ke._ready});return h(Oe,pe,pe),Oe},ae.prototype.setDriver=function(pe,ke,Oe){var Ae=this;Gl(pe)||(pe=[pe]);var tt=this._getSupportedDrivers(pe);function ht(){Ae._config.driver=Ae.driver()}function gt(zt){return Ae._extend(zt),ht(),Ae._ready=Ae._initStorage(Ae._config),Ae._ready}function pt(zt){return function(){var Tn=0;function on(){for(;Tn<zt.length;){var jn=zt[Tn];return Tn++,Ae._dbInfo=null,Ae._ready=null,Ae.getDriver(jn).then(gt).catch(on)}ht();var an=new Error("No available storage method found.");return Ae._driverSet=f.reject(an),Ae._driverSet}return on()}}var At=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=At.then(function(){var zt=tt[0];return Ae._dbInfo=null,Ae._ready=null,Ae.getDriver(zt).then(function(Tn){Ae._driver=Tn._driver,ht(),Ae._wrapLibraryMethodsWithReady(),Ae._initDriver=pt(tt)})}).catch(function(){ht();var zt=new Error("No available storage method found.");return Ae._driverSet=f.reject(zt),Ae._driverSet}),h(this._driverSet,ke,Oe),this._driverSet},ae.prototype.supports=function(pe){return!!Gf[pe]},ae.prototype._extend=function(pe){Cs(this,pe)},ae.prototype._getSupportedDrivers=function(pe){for(var ke=[],Oe=0,Ae=pe.length;Oe<Ae;Oe++){var tt=pe[Oe];this.supports(tt)&&ke.push(tt)}return ke},ae.prototype._wrapLibraryMethodsWithReady=function(){for(var pe=0,ke=Xu.length;pe<ke;pe++)Qu(this,Xu[pe])},ae.prototype.createInstance=function(pe){return new ae(pe)},ae}(),As=new gh;r.exports=As},{3:3}]},{},[4])(4)})}(J8)),J8.exports}var ynt=gnt();const M_=qc(ynt),la=[];for(let e=0;e<256;++e)la.push((e+256).toString(16).slice(1));function vnt(e,t=0){return(la[e[t+0]]+la[e[t+1]]+la[e[t+2]]+la[e[t+3]]+"-"+la[e[t+4]]+la[e[t+5]]+"-"+la[e[t+6]]+la[e[t+7]]+"-"+la[e[t+8]]+la[e[t+9]]+"-"+la[e[t+10]]+la[e[t+11]]+la[e[t+12]]+la[e[t+13]]+la[e[t+14]]+la[e[t+15]]).toLowerCase()}let Z8;const bnt=new Uint8Array(16);function xnt(){if(!Z8){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Z8=crypto.getRandomValues.bind(crypto)}return Z8(bnt)}const wnt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),sie={randomUUID:wnt};function a4(e,t,n){var i;if(sie.randomUUID&&!e)return sie.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??xnt();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,vnt(r)}class Fve{constructor(t){Eu(this,"engine");Eu(this,"connected",!1);Eu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function u4(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function G2(e){return e.participantId!==void 0}class gf extends Fve{constructor(){super("firebase");Eu(this,"RECAPTCHAV3TOKEN","6Lfbe8IqAAAAAOEYDF0mWB_xkcxWJD0XfCyRaNIi");Eu(this,"firestore");Eu(this,"collectionPrefix","prod-");Eu(this,"studyCollection");Eu(this,"storage");Eu(this,"studyId","");Eu(this,"localForage",M_.createInstance({name:"currentParticipantId"}));Eu(this,"participantData",null);Eu(this,"userManagementData",{});const n=_Ge.parse(` 
{
  apiKey: "AIzaSyBNUsuUETpZj6lJwFHGRcMIdy15R8H-TCo",
  authDomain: "patch-labeling-study.firebaseapp.com",
  projectId: "patch-labeling-study",
  storageBucket: "patch-labeling-study.firebasestorage.app",
  messagingSenderId: "742007974424",
  appId: "1:742007974424:web:43f121ed8397dd9f02716d"
}
`),r=iye(n);this.firestore=mZe(r,{}),this.storage=zne();try{det(r,{provider:new GW(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await yZe(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=o4();if(!i.currentUser&&(await Jet(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=bl(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await u4(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(G2(a))return this.participantData=a,a;const l=await u4(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Li(this.studyCollection,"configHash"),r=await uD(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=Li(this.studyCollection,"configHash");await za(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=hc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=a4(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){let i=null;const s=async o=>{i||(i=setTimeout(async()=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,o.data)},500))};n.addEventListener("dataavailable",s),n.requestData()}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Li(this.studyCollection,"sequenceAssignment");await za(i,{});const s=bl(i,"sequenceAssignment"),o=Li(s,this.currentParticipantId),a=G8(s,Ire("rejected","==",!0),Ire("claimed","==",!1)),u=await f_(a);if(u.docs.length>0){const x=u.docs[0],b=x.data().timestamp;r.dataCollectionEnabled&&(await za(x.ref,{claimed:!0}),await za(o,{participantId:this.currentParticipantId,timestamp:b,rejected:!1,claimed:!1,completed:null,createdTime:lD()}))}else r.dataCollectionEnabled&&await za(o,{participantId:this.currentParticipantId,timestamp:lD(),rejected:!1,claimed:!1,completed:null,createdTime:lD()});const l=G8(s,Rre("timestamp","asc")),f=(await f_(l)).docs.map(x=>x.data()),d=f.filter(x=>!x.rejected).findIndex(x=>x.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");const y=f.sort((x,b)=>x.createdTime-b.createdTime).findIndex(x=>x.participantId===this.currentParticipantId)+1;return{currentRow:p,creationIndex:y}}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=hc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await W2(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");G2(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=zne(),s=await nD(hc(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return G2(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=a4();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=Li(this.studyCollection,"sequenceAssignment"),i=bl(r,"sequenceAssignment"),s=Li(i,this.currentParticipantId);return await Nre(s,{completed:lD()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=bl(this.firestore,"user-management"),i=await f_(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await za(Li(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await za(Li(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await za(Li(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await za(Li(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await za(Li(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=hc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await W2(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");G2(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=bl(this.firestore,`${this.collectionPrefix}${n}`),o=hc(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!G2(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=Li(s,"sequenceAssignment"),l=bl(u,"sequenceAssignment"),c=Li(l,r);await Nre(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=Li(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await za(s,{[r]:i},{merge:!0})}async getModes(n){const r=Li(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await uD(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await za(r,s),s}async getParticipantsStatusCounts(n){const r=bl(this.firestore,`${this.collectionPrefix}${n}`),i=Li(r,"sequenceAssignment"),s=bl(i,"sequenceAssignment"),o=G8(s,Rre("timestamp","asc")),u=(await f_(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const g=await this.removeSnapshotOrLive(i,!1);g.status==="FAILED"?p.push({title:g.error.title,message:g.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=Li(this.firestore,"metadata","collections"),i=await uD(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=Li(this.firestore,"metadata","collections");await za(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=Li(this.firestore,"metadata","collections");return await za(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=Li(this.firestore,"metadata","collections"),i=await uD(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await za(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=hc(this.storage,n),s=(await W2(r)).items.map(o=>Une(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=hc(this.storage,n),o=(await W2(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=hc(this.storage,n),s=hc(this.storage,r),o=await nD(i),u=await(await fetch(o)).blob();await tD(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=bl(this.firestore,n),s=Li(i,"sequenceAssignment"),o=bl(s,"sequenceAssignment"),a=bl(this.firestore,r),u=Li(a,"sequenceAssignment");await za(u,{});const l=bl(u,"sequenceAssignment"),c=await f_(o),f=Ore(this.firestore);c.docs.forEach(d=>{const h=Li(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=bl(this.firestore,n),i=Li(r,"sequenceAssignment"),s=bl(i,"sequenceAssignment"),o=await f_(s),a=Ore(this.firestore);o.forEach(u=>{const l=Li(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=hc(this.storage,n);return(await W2(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=hc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await nD(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await nD(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=hc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await tD(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await tD(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await tD(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=hc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Une(i)}}const Bve=O.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),nS=()=>O.useContext(Bve);function _nt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=O.useState(t),[o,a]=O.useState(!1),{storageEngine:u}=_s(),l=async()=>{const h=o4();try{await stt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;O.useEffect(()=>{s(t);let h;if(u instanceof gf)try{h=o4()}catch{console.warn("No firebase store.")}const p=async x=>{if(s(b=>({user:b.user,isAdmin:b.isAdmin,determiningStatus:!0,adminVerification:!1})),x){const b={user:x,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await f(b);b.isAdmin=!!_,s(b)}else l()},y=(async()=>{if(u instanceof gf){const x=await(u==null?void 0:u.getUserManagementData("authentication"));if(x!=null&&x.isEnabled){const b=itt(h,async _=>await p(_));return()=>b()}s(r)}else u&&s(r);return()=>{}})();return()=>{y.then(x=>x())}},[u,o]);const d=O.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return S.jsx(Bve.Provider,{value:d,children:i.determiningStatus?S.jsx(Oc,{visible:!0}):e})}const Ent="https://github.com/revisit-studies/study/tree/main/public/";function Tnt({configName:e,config:t,url:n}){const{storageEngine:r}=_s(),[i,s]=O.useState(null);O.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=O.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=O.useState(null);O.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=O.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return S.jsx(OT,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?S.jsxs(S.Fragment,{children:[S.jsx(bt,{fw:"bold",children:e}),S.jsxs(sn,{align:"center",direction:"row",children:[S.jsx(pA,{color:"red"}),S.jsx(bt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),S.jsx(i3,{issues:t.errors,type:"error"}),t.warnings.length>0&&S.jsxs(S.Fragment,{children:[S.jsxs(sn,{align:"center",direction:"row",children:[S.jsx(pA,{color:"orange"}),S.jsx(bt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),S.jsx(i3,{issues:t.warnings,type:"warning"})]})]}):S.jsxs(S.Fragment,{children:[S.jsx(sn,{direction:"row",justify:"space-between",children:S.jsx(bt,{fw:"bold",children:t.studyMetadata.title})}),S.jsxs(bt,{c:"dimmed",children:[S.jsx(bt,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),S.jsx(bt,{c:"dimmed",children:t.studyMetadata.description}),S.jsx(bt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:S.jsxs(cx,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${Ent}${n}`,children:["View source:"," ",n,S.jsx(b0e,{style:{width:We(18),height:We(18),marginLeft:We(2),marginBottom:We(-3)}})]})}),t.warnings.length>0&&S.jsxs(S.Fragment,{children:[S.jsxs(sn,{align:"center",direction:"row",children:[S.jsx(pA,{color:"orange"}),S.jsx(bt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),S.jsx(i3,{issues:t.warnings,type:"warning"})]}),S.jsx(fx,{my:"md"}),S.jsxs(sn,{direction:"row",gap:"sm",children:[S.jsxs(bt,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&S.jsx(pGe,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&S.jsxs(bt,{c:"dimmed",mt:4,children:["Activity:"," ",o," ","–"," ",a]}),S.jsxs(sn,{direction:"row",align:"end",gap:"sm",mt:"md",children:[S.jsx(hn,{leftSection:S.jsx(v0e,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${Wo}analysis/stats/${n}`,children:"Analyze & Manage Study"}),S.jsx(hn,{leftSection:S.jsx(x0e,{}),component:"a",href:`${Wo}${n}`,children:"Go to Study"})]})]})},e)}function d_({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=S0e(n);return S.jsx(Tnt,{configName:n,config:r,url:i},n)})}function Snt({globalConfig:e,studyConfigs:t}){const{storageEngine:n}=_s(),{configsList:r}=e,i=r.filter(x=>x.startsWith("demo-")),s=r.filter(x=>x.startsWith("tutorial-")),o=r.filter(x=>x.startsWith("example-")),a=r.filter(x=>x.startsWith("test-")),u=r.filter(x=>x.startsWith("library-")),l=O.useMemo(()=>r.filter(x=>!x.startsWith("demo-")&&!x.startsWith("tutorial-")&&!x.startsWith("example-")&&!x.startsWith("test-")&&!x.startsWith("library-")),[r]),[c,f]=O.useState({});O.useEffect(()=>{async function x(){const b={};await Promise.all(l.map(async _=>{if(n instanceof gf){const E=await n.getModes(_);b[_]=E.analyticsInterfacePubliclyAccessible}})),f(b)}x()},[l,n]);const{user:d}=nS(),h=O.useMemo(()=>l.filter(x=>c[x]||d.isAdmin),[l,c,d]),[p]=G0(),g=O.useMemo(()=>p.get("tab")||(h.length>0?"Others":"Demos"),[h.length,p]),y=nh();return S.jsx(ci.Main,{children:S.jsxs(S0,{size:"sm",px:0,children:[S.jsx(p1,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Wo}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),S.jsxs(wr,{variant:"outline",defaultValue:l.length>0?"Others":"Demos",value:g,onChange:x=>y(`/?tab=${x}`),children:[S.jsxs(wr.List,{children:[h.length>0&&S.jsx(wr.Tab,{value:"Others",children:"Your Studies"}),S.jsx(wr.Tab,{value:"Demos",children:"Demo Studies"}),S.jsx(wr.Tab,{value:"Examples",children:"Example Studies"}),S.jsx(wr.Tab,{value:"Tutorials",children:"Tutorials"}),S.jsx(wr.Tab,{value:"Tests",children:"Tests"}),S.jsx(wr.Tab,{value:"Libraries",children:"Libraries"})]}),h.length>0&&S.jsx(wr.Panel,{value:"Others",children:S.jsx(d_,{configNames:h,studyConfigs:t})}),S.jsxs(wr.Panel,{value:"Demos",children:[S.jsx(bt,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),S.jsx(d_,{configNames:i,studyConfigs:t})]}),S.jsxs(wr.Panel,{value:"Examples",children:[S.jsx(bt,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),S.jsx(d_,{configNames:o,studyConfigs:t})]}),S.jsxs(wr.Panel,{value:"Tutorials",children:[S.jsx(bt,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),S.jsx(d_,{configNames:s,studyConfigs:t})]}),S.jsxs(wr.Panel,{value:"Tests",children:[S.jsx(bt,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),S.jsx(d_,{configNames:a,studyConfigs:t})]}),S.jsxs(wr.Panel,{value:"Libraries",children:[S.jsx(bt,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish."}),S.jsx(d_,{configNames:u,studyConfigs:t})]})]})]})})}var e9={exports:{}},t9={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oie;function Cnt(){if(oie)return t9;oie=1;var e=l$();function t(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,a=e.useDebugValue;return t9.useSyncExternalStoreWithSelector=function(u,l,c,f,d){var h=i(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=o(function(){function y(T){if(!x){if(x=!0,b=T,T=f(T),d!==void 0&&p.hasValue){var k=p.value;if(d(k,T))return _=k}return _=T}if(k=_,n(b,T))return k;var I=f(T);return d!==void 0&&d(k,I)?(b=T,k):(b=T,_=I)}var x=!1,b,_,E=c===void 0?null:c;return[function(){return y(l())},E===null?void 0:function(){return y(E())}]},[l,c,f,d]);var g=r(u,h[0],h[1]);return s(function(){p.hasValue=!0,p.value=g},[g]),a(g),g},t9}var aie;function Ant(){return aie||(aie=1,e9.exports=Cnt()),e9.exports}var knt=Ant();function Int(e){e()}function Rnt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Int(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var uie={notify(){},get:()=>[]};function Pnt(e,t){let n,r=uie,i=0,s=!1;function o(g){c();const y=r.subscribe(g);let x=!1;return()=>{x||(x=!0,y(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Rnt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=uie)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Dnt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nnt=Dnt(),Ont=()=>typeof navigator<"u"&&navigator.product==="ReactNative",$nt=Ont(),Lnt=()=>Nnt||$nt?O.useLayoutEffect:O.useEffect,Mnt=Lnt(),n9=Symbol.for("react-redux-context"),r9=typeof globalThis<"u"?globalThis:{};function Fnt(){if(!O.createContext)return{};const e=r9[n9]??(r9[n9]=new Map);let t=e.get(O.createContext);return t||(t=O.createContext(null),e.set(O.createContext,t)),t}var By=Fnt();function Bnt(e){const{children:t,context:n,serverState:r,store:i}=e,s=O.useMemo(()=>{const u=Pnt(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=O.useMemo(()=>i.getState(),[i]);Mnt(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const a=n||By;return O.createElement(a.Provider,{value:s},t)}var jnt=Bnt;function rG(e=By){return function(){return O.useContext(e)}}var jve=rG();function Uve(e=By){const t=e===By?jve:rG(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Unt=Uve();function znt(e=By){const t=e===By?Unt:Uve(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var zve=znt(),Vnt=(e,t)=>e===t;function Hnt(e=By){const t=e===By?jve:rG(e),n=(r,i={})=>{const{equalityFn:s=Vnt}=typeof i=="function"?{equalityFn:i}:i,o=t(),{store:a,subscription:u,getServerState:l}=o;O.useRef(!0);const c=O.useCallback({[r.name](d){return r(d)}}[r.name],[r]),f=knt.useSyncExternalStoreWithSelector(u.addNestedSub,a.getState,l||a.getState,c,s);return O.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var qnt=Hnt();function fa(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Wnt=typeof Symbol=="function"&&Symbol.observable||"@@observable",lie=Wnt,i9=()=>Math.random().toString(36).substring(7).split("").join("."),Gnt={INIT:`@@redux/INIT${i9()}`,REPLACE:`@@redux/REPLACE${i9()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${i9()}`},l4=Gnt;function iG(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Vve(e,t,n){if(typeof e!="function")throw new Error(fa(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(fa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(fa(1));return n(Vve)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((y,x)=>{o.set(x,y)}))}function c(){if(u)throw new Error(fa(3));return i}function f(y){if(typeof y!="function")throw new Error(fa(4));if(u)throw new Error(fa(5));let x=!0;l();const b=a++;return o.set(b,y),function(){if(x){if(u)throw new Error(fa(6));x=!1,l(),o.delete(b),s=null}}}function d(y){if(!iG(y))throw new Error(fa(7));if(typeof y.type>"u")throw new Error(fa(8));if(typeof y.type!="string")throw new Error(fa(17));if(u)throw new Error(fa(9));try{u=!0,i=r(i,y)}finally{u=!1}return(s=o).forEach(b=>{b()}),y}function h(y){if(typeof y!="function")throw new Error(fa(10));r=y,d({type:l4.REPLACE})}function p(){const y=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(fa(11));function b(){const E=x;E.next&&E.next(c())}return b(),{unsubscribe:y(b)}},[lie](){return this}}}return d({type:l4.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[lie]:p}}function Ynt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:l4.INIT})>"u")throw new Error(fa(12));if(typeof n(void 0,{type:l4.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(fa(13))})}function Knt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Ynt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(fa(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function c4(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Xnt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(fa(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=c4(...a)(i.dispatch),{...i,dispatch:s}}}function Qnt(e){return iG(e)&&"type"in e&&typeof e.type=="string"}var Hve=Symbol.for("immer-nothing"),cie=Symbol.for("immer-draftable"),$c=Symbol.for("immer-state");function Sd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var FE=Object.getPrototypeOf;function Rb(e){return!!e&&!!e[$c]}function D0(e){var t;return e?qve(e)||Array.isArray(e)||!!e[cie]||!!((t=e.constructor)!=null&&t[cie])||CL(e)||AL(e):!1}var Jnt=Object.prototype.constructor.toString();function qve(e){if(!e||typeof e!="object")return!1;const t=FE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Jnt}function f4(e,t){SL(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function SL(e){const t=e[$c];return t?t.type_:Array.isArray(e)?1:CL(e)?2:AL(e)?3:0}function A7(e,t){return SL(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Wve(e,t,n){const r=SL(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Znt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function CL(e){return e instanceof Map}function AL(e){return e instanceof Set}function jv(e){return e.copy_||e.base_}function k7(e,t){if(CL(e))return new Map(e);if(AL(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=qve(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[$c];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(FE(e),r)}else{const r=FE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function sG(e,t=!1){return kL(e)||Rb(e)||!D0(e)||(SL(e)>1&&(e.set=e.add=e.clear=e.delete=ert),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>sG(r,!0))),e}function ert(){Sd(2)}function kL(e){return Object.isFrozen(e)}var trt={};function Pb(e){const t=trt[e];return t||Sd(0,e),t}var yk;function Gve(){return yk}function nrt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fie(e,t){t&&(Pb("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function I7(e){R7(e),e.drafts_.forEach(rrt),e.drafts_=null}function R7(e){e===yk&&(yk=e.parent_)}function die(e){return yk=nrt(yk,e)}function rrt(e){const t=e[$c];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hie(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[$c].modified_&&(I7(t),Sd(4)),D0(e)&&(e=d4(t,e),t.parent_||h4(t,e)),t.patches_&&Pb("Patches").generateReplacementPatches_(n[$c].base_,e,t.patches_,t.inversePatches_)):e=d4(t,n,[]),I7(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Hve?e:void 0}function d4(e,t,n){if(kL(t))return t;const r=t[$c];if(!r)return f4(t,(i,s)=>pie(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return h4(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),f4(s,(a,u)=>pie(e,r,i,a,u,n,o)),h4(e,i,!1),n&&e.patches_&&Pb("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function pie(e,t,n,r,i,s,o){if(Rb(i)){const a=s&&t&&t.type_!==3&&!A7(t.assigned_,r)?s.concat(r):void 0,u=d4(e,i,a);if(Wve(n,r,u),Rb(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(D0(i)&&!kL(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;d4(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&h4(e,i)}}function h4(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&sG(t,n)}function irt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Gve(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=oG;n&&(i=[r],s=vk);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var oG={get(e,t){if(t===$c)return e;const n=jv(e);if(!A7(n,t))return srt(e,n,t);const r=n[t];return e.finalized_||!D0(r)?r:r===s9(e.base_,t)?(o9(e),e.copy_[t]=D7(r,e)):r},has(e,t){return t in jv(e)},ownKeys(e){return Reflect.ownKeys(jv(e))},set(e,t,n){const r=Yve(jv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=s9(jv(e),t),s=i==null?void 0:i[$c];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Znt(n,i)&&(n!==void 0||A7(e.base_,t)))return!0;o9(e),P7(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return s9(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,o9(e),P7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=jv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Sd(11)},getPrototypeOf(e){return FE(e.base_)},setPrototypeOf(){Sd(12)}},vk={};f4(oG,(e,t)=>{vk[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});vk.deleteProperty=function(e,t){return vk.set.call(this,e,t,void 0)};vk.set=function(e,t,n){return oG.set.call(this,e[0],t,n,e[0])};function s9(e,t){const n=e[$c];return(n?jv(n):e)[t]}function srt(e,t,n){var i;const r=Yve(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Yve(e,t){if(!(t in e))return;let n=FE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=FE(n)}}function P7(e){e.modified_||(e.modified_=!0,e.parent_&&P7(e.parent_))}function o9(e){e.copy_||(e.copy_=k7(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ort=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&Sd(6),r!==void 0&&typeof r!="function"&&Sd(7);let i;if(D0(t)){const s=die(this),o=D7(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?I7(s):R7(s)}return fie(s,r),hie(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Hve&&(i=void 0),this.autoFreeze_&&sG(i,!0),r){const s=[],o=[];Pb("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Sd(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){D0(e)||Sd(8),Rb(e)&&(e=art(e));const t=die(this),n=D7(e,void 0);return n[$c].isManual_=!0,R7(t),n}finishDraft(e,t){const n=e&&e[$c];(!n||!n.isManual_)&&Sd(9);const{scope_:r}=n;return fie(r,t),hie(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Pb("Patches").applyPatches_;return Rb(e)?r(e,t):this.produce(e,i=>r(i,t))}};function D7(e,t){const n=CL(e)?Pb("MapSet").proxyMap_(e,t):AL(e)?Pb("MapSet").proxySet_(e,t):irt(e,t);return(t?t.scope_:Gve()).drafts_.push(n),n}function art(e){return Rb(e)||Sd(10,e),Kve(e)}function Kve(e){if(!D0(e)||kL(e))return e;const t=e[$c];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=k7(e,t.scope_.immer_.useStrictShallowCopy_)}else n=k7(e,!0);return f4(n,(r,i)=>{Wve(n,r,Kve(i))}),t&&(t.finalized_=!1),n}var Lc=new ort,Xve=Lc.produce;Lc.produceWithPatches.bind(Lc);Lc.setAutoFreeze.bind(Lc);Lc.setUseStrictShallowCopy.bind(Lc);Lc.applyPatches.bind(Lc);Lc.createDraft.bind(Lc);Lc.finishDraft.bind(Lc);function urt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function lrt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function crt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var mie=e=>Array.isArray(e)?e:[e];function frt(e){const t=Array.isArray(e[0])?e[0]:e;return crt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function drt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var hrt=class{constructor(e){this.value=e}deref(){return this.value}},prt=typeof WeakRef<"u"?WeakRef:hrt,mrt=0,gie=1;function hD(){return{s:mrt,v:void 0,o:null,p:null}}function Qve(e,t={}){let n=hD();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let g=a.o;g===null&&(a.o=g=new WeakMap);const y=g.get(p);y===void 0?(a=hD(),g.set(p,a)):a=y}else{let g=a.p;g===null&&(a.p=g=new Map);const y=g.get(p);y===void 0?(a=hD(),g.set(p,a)):a=y}}const l=a;let c;if(a.s===gie)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new prt(c):c}return l.s=gie,l.v=c,c}return o.clearCache=()=>{n=hD(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function grt(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),urt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=Qve,argsMemoizeOptions:p=[],devModeChecks:g={}}=c,y=mie(d),x=mie(p),b=frt(i),_=f(function(){return s++,l.apply(null,arguments)},...y),E=h(function(){o++;const k=drt(b,arguments);return a=_.apply(null,k),a},...x);return Object.assign(E,{resultFunc:l,memoizedResultFunc:_,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Jve=grt(Qve),yrt=Object.assign((e,t=Jve)=>{lrt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>yrt});function Zve(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var vrt=Zve(),brt=Zve,xrt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?c4:c4.apply(null,arguments)};function yie(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(d0(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Qnt(r)&&r.type===e,n}var ebe=class OC extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,OC.prototype)}static get[Symbol.species](){return OC}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new OC(...t[0].concat(this)):new OC(...t.concat(this))}};function vie(e){return D0(e)?Xve(e,()=>{}):e}function bie(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function wrt(e){return typeof e=="boolean"}var _rt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new ebe;return n&&(wrt(n)?o.push(vrt):o.push(brt(n.extraArgument))),o},Ert="RTK_autoBatch",xie=e=>t=>{setTimeout(t,e)},Trt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:xie(10):e.type==="callback"?e.queueNotification:xie(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Ert]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Srt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new ebe(e);return r&&i.push(Trt(typeof r=="object"?r:void 0)),i};function Crt(e){const t=_rt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(iG(n))a=Knt(n);else throw new Error(d0(1));let u;typeof r=="function"?u=r(t):u=t();let l=c4;i&&(l=xrt({trace:!1,...typeof i=="object"&&i}));const c=Xnt(...u),f=Srt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return Vve(a,s,h)}function tbe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(d0(28));if(a in t)throw new Error(d0(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Art(e){return typeof e=="function"}function krt(e,t){let[n,r,i]=tbe(t),s;if(Art(e))s=()=>vie(e());else{const a=vie(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(Rb(c)){const h=f(c,u);return h===void 0?c:h}else{if(D0(c))return Xve(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return c},a)}return o.getInitialState=s,o}var Irt=Symbol.for("rtk-slice-createasyncthunk");function Rrt(e,t){return`${e}/${t}`}function Prt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Irt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(d0(11));const a=(typeof i.reducers=="function"?i.reducers(Ort()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,E){const T=typeof _=="string"?_:_.type;if(!T)throw new Error(d0(12));if(T in l.sliceCaseReducersByType)throw new Error(d0(13));return l.sliceCaseReducersByType[T]=E,c},addMatcher(_,E){return l.sliceMatchers.push({matcher:_,reducer:E}),c},exposeAction(_,E){return l.actionCreators[_]=E,c},exposeCaseReducer(_,E){return l.sliceCaseReducersByName[_]=E,c}};u.forEach(_=>{const E=a[_],T={reducerName:_,type:Rrt(s,_),createNotation:typeof i.reducers=="function"};Lrt(E)?Frt(T,E,c,t):$rt(T,E,c)});function f(){const[_={},E=[],T=void 0]=typeof i.extraReducers=="function"?tbe(i.extraReducers):[i.extraReducers],k={..._,...l.sliceCaseReducersByType};return krt(i.initialState,I=>{for(let R in k)I.addCase(R,k[R]);for(let R of l.sliceMatchers)I.addMatcher(R.matcher,R.reducer);for(let R of E)I.addMatcher(R.matcher,R.reducer);T&&I.addDefaultCase(T)})}const d=_=>_,h=new Map;let p;function g(_,E){return p||(p=f()),p(_,E)}function y(){return p||(p=f()),p.getInitialState()}function x(_,E=!1){function T(I){let R=I[_];return typeof R>"u"&&E&&(R=y()),R}function k(I=d){const R=bie(h,E,()=>new WeakMap);return bie(R,I,()=>{const D={};for(const[L,M]of Object.entries(i.selectors??{}))D[L]=Drt(M,I,y,E);return D})}return{reducerPath:_,getSelectors:k,get selectors(){return k(T)},selectSlice:T}}const b={name:s,reducer:g,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:y,...x(o),injectInto(_,{reducerPath:E,...T}={}){const k=E??o;return _.inject({reducerPath:k,reducer:g},T),{...b,...x(k,!0)}}};return b}}function Drt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Nrt=Prt();function Ort(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function $rt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Mrt(r))throw new Error(d0(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?yie(e,o):yie(e))}function Lrt(e){return e._reducerDefinitionType==="asyncThunk"}function Mrt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Frt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(d0(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||pD,pending:a||pD,rejected:u||pD,settled:l||pD})}function pD(){}function d0(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Gd(e){return e.components.flatMap(t=>typeof t=="string"?t:Gd(t))}function nbe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:nbe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function rbe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Gd(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Gd(e).length-1}];r+=1}else{const o=rbe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function aG(e,t){const n=rbe(e,t,0);return typeof n=="number"?null:n}function ibe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=ibe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Brt(e,t){const n=ibe(e,t,0);return n.found?n.distance:-1}function sbe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...sbe(i,`${t}-${s}`))}),n}function uG(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>uG(n,`${t}-${r}`))}}async function jrt(e,t,n,r,i,s,o){const a=Gd(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,g)=>[`${p}_${g}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,g)=>({[`${p}_${g}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,g)=>({[`${p}_${g}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,reactiveAnswers:{},reactiveProvenance:null,otherTexts:{},metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=Nrt({name:"storeSlice",initialState:f,reducers:{setConfig(p,g){p.config=g.payload},setIsRecording(p,g){p.isRecording=g.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,g)=>{p.alertModal=g.payload},setreactiveAnswers:(p,g)=>{p.reactiveAnswers=g.payload},setreactiveProvenance:(p,g)=>{p.reactiveProvenance=g.payload},setOtherText:(p,g)=>{p.otherTexts[g.payload.key]=g.payload.value},resetOtherText:p=>{p.otherTexts={}},saveAnalysisState(p,{payload:g}){p.analysisProvState=g},setAnalysisIsPlaying(p,{payload:g}){p.analysisIsPlaying=g},setAnalysisHasAudio(p,{payload:g}){p.analysisHasAudio=g},setAnalysisHasProvenance(p,{payload:g}){p.analysisHasProvenance=g},setMatrixAnswersRadio:(p,g)=>{if(g.payload){const{responseId:y,questionKey:x,val:b}=g.payload;p.matrixAnswers={...p.matrixAnswers,[y]:{...p.matrixAnswers[y],[x]:b}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,g)=>{var y;if(g.payload){const{responseId:x,questionKey:b,value:_,isChecked:E,choiceOptions:T}=g.payload,k=((y=p.matrixAnswers[x])==null?void 0:y[b])??"";let I="";E?k.length>0?I=[...k.split("|"),_].sort((R,D)=>T.map(L=>L.value).indexOf(R)-T.map(L=>L.value).indexOf(D)).join("|"):I=`${_}`:I=k.split("|").filter(R=>R!==_).join("|"),p.matrixAnswers={...p.matrixAnswers,[x]:{...p.matrixAnswers[x],[b]:I}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:g})=>{if(p.trialValidation[g.identifier]||(p.trialValidation[g.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),Object.keys(g.values).length>0){const y=p.trialValidation[g.identifier][g.location].values;p.trialValidation[g.identifier][g.location]={valid:g.status,values:{...y,...g.values}}}g.provenanceGraph&&(p.trialValidation[g.identifier].provenanceGraph=g.provenanceGraph)},saveTrialAnswer(p,{payload:g}){const{identifier:y,answer:x,startTime:b,endTime:_,provenanceGraph:E,windowEvents:T,timedOut:k,incorrectAnswers:I,helpButtonClickedCount:R}=g;p.answers[y]={incorrectAnswers:I,answer:x,startTime:b,endTime:_,provenanceGraph:E,windowEvents:T,timedOut:k,helpButtonClickedCount:R}},incrementHelpCounter(p,{payload:g}){const{identifier:y}=g;p.answers[y].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:g}){const{identifier:y,answer:x,question:b}=g;p.answers[b].incorrectAnswers||(p.answers[b].incorrectAnswers={}),p.answers[b].incorrectAnswers[y]||(p.answers[b].incorrectAnswers[y]={id:y,value:[]}),p.answers[b].incorrectAnswers[y].value.push(x)}}});return{store:Crt({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const obe=O.createContext(null);function Ca(){return O.useContext(obe).actions}const hu=zve,Ur=qnt;function Urt(e){return Ur(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const zrt=Jve(e=>e.sequence,e=>Gd(e));function lG(){return Ur(zrt)}var m3={exports:{}},g3={exports:{}},Vrt=g3.exports,wie;function Cr(){return wie||(wie=1,function(e,t){(function(n,r){e.exports=r()})(Vrt,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof ho<"u"&&ho.crypto&&(s=ho.crypto),!s&&typeof NC=="function")try{s=Kge}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function b(){}return function(_){var E;return b.prototype=_,E=new b,b.prototype=null,E}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(b){var _=a(this);return b&&_.mixIn(b),(!_.hasOwnProperty("init")||this.init===_.init)&&(_.init=function(){_.$super.init.apply(this,arguments)}),_.init.prototype=_,_.$super=this,_},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var _ in b)b.hasOwnProperty(_)&&(this[_]=b[_]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(b,_){b=this.words=b||[],_!=i?this.sigBytes=_:this.sigBytes=b.length*4},toString:function(b){return(b||h).stringify(this)},concat:function(b){var _=this.words,E=b.words,T=this.sigBytes,k=b.sigBytes;if(this.clamp(),T%4)for(var I=0;I<k;I++){var R=E[I>>>2]>>>24-I%4*8&255;_[T+I>>>2]|=R<<24-(T+I)%4*8}else for(var D=0;D<k;D+=4)_[T+D>>>2]=E[D>>>2];return this.sigBytes+=k,this},clamp:function(){var b=this.words,_=this.sigBytes;b[_>>>2]&=4294967295<<32-_%4*8,b.length=r.ceil(_/4)},clone:function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var _=[],E=0;E<b;E+=4)_.push(o());return new f.init(_,b)}}),d=u.enc={},h=d.Hex={stringify:function(b){for(var _=b.words,E=b.sigBytes,T=[],k=0;k<E;k++){var I=_[k>>>2]>>>24-k%4*8&255;T.push((I>>>4).toString(16)),T.push((I&15).toString(16))}return T.join("")},parse:function(b){for(var _=b.length,E=[],T=0;T<_;T+=2)E[T>>>3]|=parseInt(b.substr(T,2),16)<<24-T%8*4;return new f.init(E,_/2)}},p=d.Latin1={stringify:function(b){for(var _=b.words,E=b.sigBytes,T=[],k=0;k<E;k++){var I=_[k>>>2]>>>24-k%4*8&255;T.push(String.fromCharCode(I))}return T.join("")},parse:function(b){for(var _=b.length,E=[],T=0;T<_;T++)E[T>>>2]|=(b.charCodeAt(T)&255)<<24-T%4*8;return new f.init(E,_)}},g=d.Utf8={stringify:function(b){try{return decodeURIComponent(escape(p.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return p.parse(unescape(encodeURIComponent(b)))}},y=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=g.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var _,E=this._data,T=E.words,k=E.sigBytes,I=this.blockSize,R=I*4,D=k/R;b?D=r.ceil(D):D=r.max((D|0)-this._minBufferSize,0);var L=D*I,M=r.min(L*4,k);if(L){for(var z=0;z<L;z+=I)this._doProcessBlock(T,z);_=T.splice(0,L),E.sigBytes-=M}return new f.init(_,M)},clone:function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});l.Hasher=y.extend({cfg:c.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var _=this._doFinalize();return _},blockSize:16,_createHelper:function(b){return function(_,E){return new b.init(E).finalize(_)}},_createHmacHelper:function(b){return function(_,E){return new x.HMAC.init(b,E).finalize(_)}}});var x=u.algo={};return u}(Math);return n})}(g3)),g3.exports}var y3={exports:{}},Hrt=y3.exports,_ie;function IL(){return _ie||(_ie=1,function(e,t){(function(n,r){e.exports=r(Cr())})(Hrt,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(y3)),y3.exports}var v3={exports:{}},qrt=v3.exports,Eie;function Wrt(){return Eie||(Eie=1,function(e,t){(function(n,r){e.exports=r(Cr())})(qrt,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(v3)),v3.exports}var b3={exports:{}},Grt=b3.exports,Tie;function Yrt(){return Tie||(Tie=1,function(e,t){(function(n,r){e.exports=r(Cr())})(Grt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(b3)),b3.exports}var x3={exports:{}},Krt=x3.exports,Sie;function _x(){return Sie||(Sie=1,function(e,t){(function(n,r){e.exports=r(Cr())})(Krt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,g=l[h+1>>>2]>>>24-(h+1)%4*8&255,y=l[h+2>>>2]>>>24-(h+2)%4*8&255,x=p<<16|g<<8|y,b=0;b<4&&h+b*.75<c;b++)d.push(f.charAt(x>>>6*(3-b)&63));var _=f.charAt(64);if(_)for(;d.length%4;)d.push(_);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,g=c[u.charCodeAt(h)]>>>6-h%4*2,y=p|g;f[d>>>2]|=y<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(x3)),x3.exports}var w3={exports:{}},Xrt=w3.exports,Cie;function Qrt(){return Cie||(Cie=1,function(e,t){(function(n,r){e.exports=r(Cr())})(Xrt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var g=c[p>>>2]>>>24-p%4*8&255,y=c[p+1>>>2]>>>24-(p+1)%4*8&255,x=c[p+2>>>2]>>>24-(p+2)%4*8&255,b=g<<16|y<<8|x,_=0;_<4&&p+_*.75<f;_++)h.push(d.charAt(b>>>6*(3-_)&63));var E=d.charAt(64);if(E)for(;h.length%4;)h.push(E);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var g=u.indexOf(p);g!==-1&&(c=g)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,g=c[u.charCodeAt(h)]>>>6-h%4*2,y=p|g;f[d>>>2]|=y<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(w3)),w3.exports}var _3={exports:{}},Jrt=_3.exports,Aie;function Ex(){return Aie||(Aie=1,function(e,t){(function(n,r){e.exports=r(Cr())})(Jrt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var g=0;g<64;g++)l[g]=r.abs(r.sin(g+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,y){for(var x=0;x<16;x++){var b=y+x,_=g[b];g[b]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}var E=this._hash.words,T=g[y+0],k=g[y+1],I=g[y+2],R=g[y+3],D=g[y+4],L=g[y+5],M=g[y+6],z=g[y+7],F=g[y+8],H=g[y+9],Q=g[y+10],J=g[y+11],ne=g[y+12],Z=g[y+13],ie=g[y+14],q=g[y+15],U=E[0],X=E[1],V=E[2],K=E[3];U=f(U,X,V,K,T,7,l[0]),K=f(K,U,X,V,k,12,l[1]),V=f(V,K,U,X,I,17,l[2]),X=f(X,V,K,U,R,22,l[3]),U=f(U,X,V,K,D,7,l[4]),K=f(K,U,X,V,L,12,l[5]),V=f(V,K,U,X,M,17,l[6]),X=f(X,V,K,U,z,22,l[7]),U=f(U,X,V,K,F,7,l[8]),K=f(K,U,X,V,H,12,l[9]),V=f(V,K,U,X,Q,17,l[10]),X=f(X,V,K,U,J,22,l[11]),U=f(U,X,V,K,ne,7,l[12]),K=f(K,U,X,V,Z,12,l[13]),V=f(V,K,U,X,ie,17,l[14]),X=f(X,V,K,U,q,22,l[15]),U=d(U,X,V,K,k,5,l[16]),K=d(K,U,X,V,M,9,l[17]),V=d(V,K,U,X,J,14,l[18]),X=d(X,V,K,U,T,20,l[19]),U=d(U,X,V,K,L,5,l[20]),K=d(K,U,X,V,Q,9,l[21]),V=d(V,K,U,X,q,14,l[22]),X=d(X,V,K,U,D,20,l[23]),U=d(U,X,V,K,H,5,l[24]),K=d(K,U,X,V,ie,9,l[25]),V=d(V,K,U,X,R,14,l[26]),X=d(X,V,K,U,F,20,l[27]),U=d(U,X,V,K,Z,5,l[28]),K=d(K,U,X,V,I,9,l[29]),V=d(V,K,U,X,z,14,l[30]),X=d(X,V,K,U,ne,20,l[31]),U=h(U,X,V,K,L,4,l[32]),K=h(K,U,X,V,F,11,l[33]),V=h(V,K,U,X,J,16,l[34]),X=h(X,V,K,U,ie,23,l[35]),U=h(U,X,V,K,k,4,l[36]),K=h(K,U,X,V,D,11,l[37]),V=h(V,K,U,X,z,16,l[38]),X=h(X,V,K,U,Q,23,l[39]),U=h(U,X,V,K,Z,4,l[40]),K=h(K,U,X,V,T,11,l[41]),V=h(V,K,U,X,R,16,l[42]),X=h(X,V,K,U,M,23,l[43]),U=h(U,X,V,K,H,4,l[44]),K=h(K,U,X,V,ne,11,l[45]),V=h(V,K,U,X,q,16,l[46]),X=h(X,V,K,U,I,23,l[47]),U=p(U,X,V,K,T,6,l[48]),K=p(K,U,X,V,z,10,l[49]),V=p(V,K,U,X,ie,15,l[50]),X=p(X,V,K,U,L,21,l[51]),U=p(U,X,V,K,ne,6,l[52]),K=p(K,U,X,V,R,10,l[53]),V=p(V,K,U,X,Q,15,l[54]),X=p(X,V,K,U,k,21,l[55]),U=p(U,X,V,K,F,6,l[56]),K=p(K,U,X,V,q,10,l[57]),V=p(V,K,U,X,M,15,l[58]),X=p(X,V,K,U,Z,21,l[59]),U=p(U,X,V,K,D,6,l[60]),K=p(K,U,X,V,J,10,l[61]),V=p(V,K,U,X,I,15,l[62]),X=p(X,V,K,U,H,21,l[63]),E[0]=E[0]+U|0,E[1]=E[1]+X|0,E[2]=E[2]+V|0,E[3]=E[3]+K|0},_doFinalize:function(){var g=this._data,y=g.words,x=this._nDataBytes*8,b=g.sigBytes*8;y[b>>>5]|=128<<24-b%32;var _=r.floor(x/4294967296),E=x;y[(b+64>>>9<<4)+15]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,y[(b+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,g.sigBytes=(y.length+1)*4,this._process();for(var T=this._hash,k=T.words,I=0;I<4;I++){var R=k[I];k[I]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360}return T},clone:function(){var g=a.clone.call(this);return g._hash=this._hash.clone(),g}});function f(g,y,x,b,_,E,T){var k=g+(y&x|~y&b)+_+T;return(k<<E|k>>>32-E)+y}function d(g,y,x,b,_,E,T){var k=g+(y&b|x&~b)+_+T;return(k<<E|k>>>32-E)+y}function h(g,y,x,b,_,E,T){var k=g+(y^x^b)+_+T;return(k<<E|k>>>32-E)+y}function p(g,y,x,b,_,E,T){var k=g+(x^(y|~b))+_+T;return(k<<E|k>>>32-E)+y}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(_3)),_3.exports}var E3={exports:{}},Zrt=E3.exports,kie;function abe(){return kie||(kie=1,function(e,t){(function(n,r){e.exports=r(Cr())})(Zrt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],g=d[2],y=d[3],x=d[4],b=0;b<80;b++){if(b<16)u[b]=c[f+b]|0;else{var _=u[b-3]^u[b-8]^u[b-14]^u[b-16];u[b]=_<<1|_>>>31}var E=(h<<5|h>>>27)+x+u[b];b<20?E+=(p&g|~p&y)+1518500249:b<40?E+=(p^g^y)+1859775393:b<60?E+=(p&g|p&y|g&y)-1894007588:E+=(p^g^y)-899497514,x=y,y=g,g=p<<30|p>>>2,p=h,h=E}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+g|0,d[3]=d[3]+y|0,d[4]=d[4]+x|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(E3)),E3.exports}var T3={exports:{}},eit=T3.exports,Iie;function cG(){return Iie||(Iie=1,function(e,t){(function(n,r){e.exports=r(Cr())})(eit,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(x){for(var b=r.sqrt(x),_=2;_<=b;_++)if(!(x%_))return!1;return!0}function p(x){return(x-(x|0))*4294967296|0}for(var g=2,y=0;y<64;)h(g)&&(y<8&&(l[y]=p(r.pow(g,1/2))),c[y]=p(r.pow(g,1/3)),y++),g++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var g=this._hash.words,y=g[0],x=g[1],b=g[2],_=g[3],E=g[4],T=g[5],k=g[6],I=g[7],R=0;R<64;R++){if(R<16)f[R]=h[p+R]|0;else{var D=f[R-15],L=(D<<25|D>>>7)^(D<<14|D>>>18)^D>>>3,M=f[R-2],z=(M<<15|M>>>17)^(M<<13|M>>>19)^M>>>10;f[R]=L+f[R-7]+z+f[R-16]}var F=E&T^~E&k,H=y&x^y&b^x&b,Q=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),J=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),ne=I+J+F+c[R]+f[R],Z=Q+H;I=k,k=T,T=E,E=_+ne|0,_=b,b=x,x=y,y=ne+Z|0}g[0]=g[0]+y|0,g[1]=g[1]+x|0,g[2]=g[2]+b|0,g[3]=g[3]+_|0,g[4]=g[4]+E|0,g[5]=g[5]+T|0,g[6]=g[6]+k|0,g[7]=g[7]+I|0},_doFinalize:function(){var h=this._data,p=h.words,g=this._nDataBytes*8,y=h.sigBytes*8;return p[y>>>5]|=128<<24-y%32,p[(y+64>>>9<<4)+14]=r.floor(g/4294967296),p[(y+64>>>9<<4)+15]=g,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(T3)),T3.exports}var S3={exports:{}},tit=S3.exports,Rie;function nit(){return Rie||(Rie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),cG())})(tit,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(S3)),S3.exports}var C3={exports:{}},rit=C3.exports,Pie;function ube(){return Pie||(Pie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),IL())})(rit,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,g){for(var y=this._hash.words,x=y[0],b=y[1],_=y[2],E=y[3],T=y[4],k=y[5],I=y[6],R=y[7],D=x.high,L=x.low,M=b.high,z=b.low,F=_.high,H=_.low,Q=E.high,J=E.low,ne=T.high,Z=T.low,ie=k.high,q=k.low,U=I.high,X=I.low,V=R.high,K=R.low,ee=D,fe=L,Ee=M,ye=z,_e=F,De=H,me=Q,de=J,$e=ne,Pe=Z,Ze=ie,it=q,Ge=U,et=X,ut=V,Tt=K,xt=0;xt<80;xt++){var Dt,Ue,Ft=d[xt];if(xt<16)Ue=Ft.high=p[g+xt*2]|0,Dt=Ft.low=p[g+xt*2+1]|0;else{var tn=d[xt-15],Re=tn.high,Ve=tn.low,yt=(Re>>>1|Ve<<31)^(Re>>>8|Ve<<24)^Re>>>7,$t=(Ve>>>1|Re<<31)^(Ve>>>8|Re<<24)^(Ve>>>7|Re<<25),Bt=d[xt-2],dn=Bt.high,Nn=Bt.low,dr=(dn>>>19|Nn<<13)^(dn<<3|Nn>>>29)^dn>>>6,ti=(Nn>>>19|dn<<13)^(Nn<<3|dn>>>29)^(Nn>>>6|dn<<26),kn=d[xt-7],Bn=kn.high,Xr=kn.low,ir=d[xt-16],zs=ir.high,gi=ir.low;Dt=$t+Xr,Ue=yt+Bn+(Dt>>>0<$t>>>0?1:0),Dt=Dt+ti,Ue=Ue+dr+(Dt>>>0<ti>>>0?1:0),Dt=Dt+gi,Ue=Ue+zs+(Dt>>>0<gi>>>0?1:0),Ft.high=Ue,Ft.low=Dt}var ni=$e&Ze^~$e&Ge,yi=Pe&it^~Pe&et,Ar=ee&Ee^ee&_e^Ee&_e,Vs=fe&ye^fe&De^ye&De,Yu=(ee>>>28|fe<<4)^(ee<<30|fe>>>2)^(ee<<25|fe>>>7),Eo=(fe>>>28|ee<<4)^(fe<<30|ee>>>2)^(fe<<25|ee>>>7),Ra=($e>>>14|Pe<<18)^($e>>>18|Pe<<14)^($e<<23|Pe>>>9),kr=(Pe>>>14|$e<<18)^(Pe>>>18|$e<<14)^(Pe<<23|$e>>>9),ui=f[xt],$r=ui.high,os=ui.low,yr=Tt+kr,vi=ut+Ra+(yr>>>0<Tt>>>0?1:0),yr=yr+yi,vi=vi+ni+(yr>>>0<yi>>>0?1:0),yr=yr+os,vi=vi+$r+(yr>>>0<os>>>0?1:0),yr=yr+Dt,vi=vi+Ue+(yr>>>0<Dt>>>0?1:0),Hs=Eo+Vs,Ts=Yu+Ar+(Hs>>>0<Eo>>>0?1:0);ut=Ge,Tt=et,Ge=Ze,et=it,Ze=$e,it=Pe,Pe=de+yr|0,$e=me+vi+(Pe>>>0<de>>>0?1:0)|0,me=_e,de=De,_e=Ee,De=ye,Ee=ee,ye=fe,fe=yr+Hs|0,ee=vi+Ts+(fe>>>0<yr>>>0?1:0)|0}L=x.low=L+fe,x.high=D+ee+(L>>>0<fe>>>0?1:0),z=b.low=z+ye,b.high=M+Ee+(z>>>0<ye>>>0?1:0),H=_.low=H+De,_.high=F+_e+(H>>>0<De>>>0?1:0),J=E.low=J+de,E.high=Q+me+(J>>>0<de>>>0?1:0),Z=T.low=Z+Pe,T.high=ne+$e+(Z>>>0<Pe>>>0?1:0),q=k.low=q+it,k.high=ie+Ze+(q>>>0<it>>>0?1:0),X=I.low=X+et,I.high=U+Ge+(X>>>0<et>>>0?1:0),K=R.low=K+Tt,R.high=V+ut+(K>>>0<Tt>>>0?1:0)},_doFinalize:function(){var p=this._data,g=p.words,y=this._nDataBytes*8,x=p.sigBytes*8;g[x>>>5]|=128<<24-x%32,g[(x+128>>>10<<5)+30]=Math.floor(y/4294967296),g[(x+128>>>10<<5)+31]=y,p.sigBytes=g.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(C3)),C3.exports}var A3={exports:{}},iit=A3.exports,Die;function sit(){return Die||(Die=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),IL(),ube())})(iit,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(A3)),A3.exports}var k3={exports:{}},oit=k3.exports,Nie;function ait(){return Nie||(Nie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),IL())})(oit,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var y=1,x=0,b=0;b<24;b++){f[y+5*x]=(b+1)*(b+2)/2%64;var _=x%5,E=(2*y+3*x)%5;y=_,x=E}for(var y=0;y<5;y++)for(var x=0;x<5;x++)d[y+5*x]=x+(2*y+3*x)%5*5;for(var T=1,k=0;k<24;k++){for(var I=0,R=0,D=0;D<7;D++){if(T&1){var L=(1<<D)-1;L<32?R^=1<<L:I^=1<<L-32}T&128?T=T<<1^113:T<<=1}h[k]=l.create(I,R)}})();var p=[];(function(){for(var y=0;y<25;y++)p[y]=l.create()})();var g=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var y=this._state=[],x=0;x<25;x++)y[x]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(y,x){for(var b=this._state,_=this.blockSize/2,E=0;E<_;E++){var T=y[x+2*E],k=y[x+2*E+1];T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var I=b[E];I.high^=k,I.low^=T}for(var R=0;R<24;R++){for(var D=0;D<5;D++){for(var L=0,M=0,z=0;z<5;z++){var I=b[D+5*z];L^=I.high,M^=I.low}var F=p[D];F.high=L,F.low=M}for(var D=0;D<5;D++)for(var H=p[(D+4)%5],Q=p[(D+1)%5],J=Q.high,ne=Q.low,L=H.high^(J<<1|ne>>>31),M=H.low^(ne<<1|J>>>31),z=0;z<5;z++){var I=b[D+5*z];I.high^=L,I.low^=M}for(var Z=1;Z<25;Z++){var L,M,I=b[Z],ie=I.high,q=I.low,U=f[Z];U<32?(L=ie<<U|q>>>32-U,M=q<<U|ie>>>32-U):(L=q<<U-32|ie>>>64-U,M=ie<<U-32|q>>>64-U);var X=p[d[Z]];X.high=L,X.low=M}var V=p[0],K=b[0];V.high=K.high,V.low=K.low;for(var D=0;D<5;D++)for(var z=0;z<5;z++){var Z=D+5*z,I=b[Z],ee=p[Z],fe=p[(D+1)%5+5*z],Ee=p[(D+2)%5+5*z];I.high=ee.high^~fe.high&Ee.high,I.low=ee.low^~fe.low&Ee.low}var I=b[0],ye=h[R];I.high^=ye.high,I.low^=ye.low}},_doFinalize:function(){var y=this._data,x=y.words;this._nDataBytes*8;var b=y.sigBytes*8,_=this.blockSize*32;x[b>>>5]|=1<<24-b%32,x[(r.ceil((b+1)/_)*_>>>5)-1]|=128,y.sigBytes=x.length*4,this._process();for(var E=this._state,T=this.cfg.outputLength/8,k=T/8,I=[],R=0;R<k;R++){var D=E[R],L=D.high,M=D.low;L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,I.push(M),I.push(L)}return new o.init(I,T)},clone:function(){for(var y=a.clone.call(this),x=y._state=this._state.slice(0),b=0;b<25;b++)x[b]=x[b].clone();return y}});i.SHA3=a._createHelper(g),i.HmacSHA3=a._createHmacHelper(g)}(Math),n.SHA3})}(k3)),k3.exports}var I3={exports:{}},uit=I3.exports,Oie;function lit(){return Oie||(Oie=1,function(e,t){(function(n,r){e.exports=r(Cr())})(uit,function(n){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),g=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,I){for(var R=0;R<16;R++){var D=I+R,L=k[D];k[D]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}var M=this._hash.words,z=h.words,F=p.words,H=l.words,Q=c.words,J=f.words,ne=d.words,Z,ie,q,U,X,V,K,ee,fe,Ee;V=Z=M[0],K=ie=M[1],ee=q=M[2],fe=U=M[3],Ee=X=M[4];for(var ye,R=0;R<80;R+=1)ye=Z+k[I+H[R]]|0,R<16?ye+=y(ie,q,U)+z[0]:R<32?ye+=x(ie,q,U)+z[1]:R<48?ye+=b(ie,q,U)+z[2]:R<64?ye+=_(ie,q,U)+z[3]:ye+=E(ie,q,U)+z[4],ye=ye|0,ye=T(ye,J[R]),ye=ye+X|0,Z=X,X=U,U=T(q,10),q=ie,ie=ye,ye=V+k[I+Q[R]]|0,R<16?ye+=E(K,ee,fe)+F[0]:R<32?ye+=_(K,ee,fe)+F[1]:R<48?ye+=b(K,ee,fe)+F[2]:R<64?ye+=x(K,ee,fe)+F[3]:ye+=y(K,ee,fe)+F[4],ye=ye|0,ye=T(ye,ne[R]),ye=ye+Ee|0,V=Ee,Ee=fe,fe=T(ee,10),ee=K,K=ye;ye=M[1]+q+fe|0,M[1]=M[2]+U+Ee|0,M[2]=M[3]+X+V|0,M[3]=M[4]+Z+K|0,M[4]=M[0]+ie+ee|0,M[0]=ye},_doFinalize:function(){var k=this._data,I=k.words,R=this._nDataBytes*8,D=k.sigBytes*8;I[D>>>5]|=128<<24-D%32,I[(D+64>>>9<<4)+14]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,k.sigBytes=(I.length+1)*4,this._process();for(var L=this._hash,M=L.words,z=0;z<5;z++){var F=M[z];M[z]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}return L},clone:function(){var k=a.clone.call(this);return k._hash=this._hash.clone(),k}});function y(k,I,R){return k^I^R}function x(k,I,R){return k&I|~k&R}function b(k,I,R){return(k|~I)^R}function _(k,I,R){return k&R|I&~R}function E(k,I,R){return k^(I|~R)}function T(k,I){return k<<I|k>>>32-I}i.RIPEMD160=a._createHelper(g),i.HmacRIPEMD160=a._createHmacHelper(g)}(),n.RIPEMD160})}(I3)),I3.exports}var R3={exports:{}},cit=R3.exports,$ie;function fG(){return $ie||($ie=1,function(e,t){(function(n,r){e.exports=r(Cr())})(cit,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),g=h.words,y=p.words,x=0;x<f;x++)g[x]^=1549556828,y[x]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(R3)),R3.exports}var P3={exports:{}},fit=P3.exports,Lie;function dit(){return Lie||(Lie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),cG(),fG())})(fit,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),g=o.create(),y=o.create([1]),x=g.words,b=y.words,_=h.keySize,E=h.iterations;x.length<_;){var T=p.update(d).finalize(y);p.reset();for(var k=T.words,I=k.length,R=T,D=1;D<E;D++){R=p.finalize(R),p.reset();for(var L=R.words,M=0;M<I;M++)k[M]^=L[M]}g.concat(T),b[0]++}return g.sigBytes=_*4,g}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(P3)),P3.exports}var D3={exports:{}},hit=D3.exports,Mie;function b1(){return Mie||(Mie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),abe(),fG())})(hit,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),g=o.create(),y=g.words,x=h.keySize,b=h.iterations;y.length<x;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var _=1;_<b;_++)d=p.finalize(d),p.reset();g.concat(d)}return g.sigBytes=x*4,g}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(D3)),D3.exports}var N3={exports:{}},pit=N3.exports,Fie;function Yo(){return Fie||(Fie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),b1())})(pit,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(L,M){return this.create(this._ENC_XFORM_MODE,L,M)},createDecryptor:function(L,M){return this.create(this._DEC_XFORM_MODE,L,M)},init:function(L,M,z){this.cfg=this.cfg.extend(z),this._xformMode=L,this._key=M,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(L){return this._append(L),this._process()},finalize:function(L){L&&this._append(L);var M=this._doFinalize();return M},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function L(M){return typeof M=="string"?D:k}return function(M){return{encrypt:function(z,F,H){return L(F).encrypt(M,z,F,H)},decrypt:function(z,F,H){return L(F).decrypt(M,z,F,H)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var L=this._process(!0);return L},blockSize:1});var p=i.mode={},g=s.BlockCipherMode=o.extend({createEncryptor:function(L,M){return this.Encryptor.create(L,M)},createDecryptor:function(L,M){return this.Decryptor.create(L,M)},init:function(L,M){this._cipher=L,this._iv=M}}),y=p.CBC=function(){var L=g.extend();L.Encryptor=L.extend({processBlock:function(z,F){var H=this._cipher,Q=H.blockSize;M.call(this,z,F,Q),H.encryptBlock(z,F),this._prevBlock=z.slice(F,F+Q)}}),L.Decryptor=L.extend({processBlock:function(z,F){var H=this._cipher,Q=H.blockSize,J=z.slice(F,F+Q);H.decryptBlock(z,F),M.call(this,z,F,Q),this._prevBlock=J}});function M(z,F,H){var Q,J=this._iv;J?(Q=J,this._iv=r):Q=this._prevBlock;for(var ne=0;ne<H;ne++)z[F+ne]^=Q[ne]}return L}(),x=i.pad={},b=x.Pkcs7={pad:function(L,M){for(var z=M*4,F=z-L.sigBytes%z,H=F<<24|F<<16|F<<8|F,Q=[],J=0;J<F;J+=4)Q.push(H);var ne=a.create(Q,F);L.concat(ne)},unpad:function(L){var M=L.words[L.sigBytes-1>>>2]&255;L.sigBytes-=M}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:y,padding:b}),reset:function(){var L;h.reset.call(this);var M=this.cfg,z=M.iv,F=M.mode;this._xformMode==this._ENC_XFORM_MODE?L=F.createEncryptor:(L=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==L?this._mode.init(this,z&&z.words):(this._mode=L.call(F,this,z&&z.words),this._mode.__creator=L)},_doProcessBlock:function(L,M){this._mode.processBlock(L,M)},_doFinalize:function(){var L,M=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(M.pad(this._data,this.blockSize),L=this._process(!0)):(L=this._process(!0),M.unpad(L)),L},blockSize:128/32});var _=s.CipherParams=o.extend({init:function(L){this.mixIn(L)},toString:function(L){return(L||this.formatter).stringify(this)}}),E=i.format={},T=E.OpenSSL={stringify:function(L){var M,z=L.ciphertext,F=L.salt;return F?M=a.create([1398893684,1701076831]).concat(F).concat(z):M=z,M.toString(c)},parse:function(L){var M,z=c.parse(L),F=z.words;return F[0]==1398893684&&F[1]==1701076831&&(M=a.create(F.slice(2,4)),F.splice(0,4),z.sigBytes-=16),_.create({ciphertext:z,salt:M})}},k=s.SerializableCipher=o.extend({cfg:o.extend({format:T}),encrypt:function(L,M,z,F){F=this.cfg.extend(F);var H=L.createEncryptor(z,F),Q=H.finalize(M),J=H.cfg;return _.create({ciphertext:Q,key:z,iv:J.iv,algorithm:L,mode:J.mode,padding:J.padding,blockSize:L.blockSize,formatter:F.format})},decrypt:function(L,M,z,F){F=this.cfg.extend(F),M=this._parse(M,F.format);var H=L.createDecryptor(z,F).finalize(M.ciphertext);return H},_parse:function(L,M){return typeof L=="string"?M.parse(L,this):L}}),I=i.kdf={},R=I.OpenSSL={execute:function(L,M,z,F,H){if(F||(F=a.random(64/8)),H)var Q=d.create({keySize:M+z,hasher:H}).compute(L,F);else var Q=d.create({keySize:M+z}).compute(L,F);var J=a.create(Q.words.slice(M),z*4);return Q.sigBytes=M*4,_.create({key:Q,iv:J,salt:F})}},D=s.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:R}),encrypt:function(L,M,z,F){F=this.cfg.extend(F);var H=F.kdf.execute(z,L.keySize,L.ivSize,F.salt,F.hasher);F.iv=H.iv;var Q=k.encrypt.call(this,L,M,H.key,F);return Q.mixIn(H),Q},decrypt:function(L,M,z,F){F=this.cfg.extend(F),M=this._parse(M,F.format);var H=F.kdf.execute(z,L.keySize,L.ivSize,M.salt,F.hasher);F.iv=H.iv;var Q=k.decrypt.call(this,L,M,H.key,F);return Q}})}()})}(N3)),N3.exports}var O3={exports:{}},mit=O3.exports,Bie;function git(){return Bie||(Bie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),Yo())})(mit,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(O3)),O3.exports}var $3={exports:{}},yit=$3.exports,jie;function vit(){return jie||(jie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),Yo())})(yit,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}($3)),$3.exports}var L3={exports:{}},bit=L3.exports,Uie;function xit(){return Uie||(Uie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),Yo())})(bit,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(L3)),L3.exports}var M3={exports:{}},wit=M3.exports,zie;function _it(){return zie||(zie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),Yo())})(wit,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(M3)),M3.exports}var F3={exports:{}},Eit=F3.exports,Vie;function Tit(){return Vie||(Vie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),Yo())})(Eit,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(F3)),F3.exports}var B3={exports:{}},Sit=B3.exports,Hie;function Cit(){return Hie||(Hie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),Yo())})(Sit,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(B3)),B3.exports}var j3={exports:{}},Ait=j3.exports,qie;function kit(){return qie||(qie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),Yo())})(Ait,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(j3)),j3.exports}var U3={exports:{}},Iit=U3.exports,Wie;function Rit(){return Wie||(Wie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),Yo())})(Iit,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(U3)),U3.exports}var z3={exports:{}},Pit=z3.exports,Gie;function Dit(){return Gie||(Gie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),Yo())})(Pit,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(z3)),z3.exports}var V3={exports:{}},Nit=V3.exports,Yie;function Oit(){return Yie||(Yie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),Yo())})(Nit,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(V3)),V3.exports}var H3={exports:{}},$it=H3.exports,Kie;function Lit(){return Kie||(Kie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),Yo())})($it,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(H3)),H3.exports}var q3={exports:{}},Mit=q3.exports,Xie;function Fit(){return Xie||(Xie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),_x(),Ex(),b1(),Yo())})(Mit,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],g=[],y=[];(function(){for(var _=[],E=0;E<256;E++)E<128?_[E]=E<<1:_[E]=E<<1^283;for(var T=0,k=0,E=0;E<256;E++){var I=k^k<<1^k<<2^k<<3^k<<4;I=I>>>8^I&255^99,a[T]=I,u[I]=T;var R=_[T],D=_[R],L=_[D],M=_[I]*257^I*16843008;l[T]=M<<24|M>>>8,c[T]=M<<16|M>>>16,f[T]=M<<8|M>>>24,d[T]=M;var M=L*16843009^D*65537^R*257^T*16843008;h[I]=M<<24|M>>>8,p[I]=M<<16|M>>>16,g[I]=M<<8|M>>>24,y[I]=M,T?(T=R^_[_[_[L^R]]],k^=_[_[k]]):T=k=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],b=o.AES=s.extend({_doReset:function(){var _;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,T=E.words,k=E.sigBytes/4,I=this._nRounds=k+6,R=(I+1)*4,D=this._keySchedule=[],L=0;L<R;L++)L<k?D[L]=T[L]:(_=D[L-1],L%k?k>6&&L%k==4&&(_=a[_>>>24]<<24|a[_>>>16&255]<<16|a[_>>>8&255]<<8|a[_&255]):(_=_<<8|_>>>24,_=a[_>>>24]<<24|a[_>>>16&255]<<16|a[_>>>8&255]<<8|a[_&255],_^=x[L/k|0]<<24),D[L]=D[L-k]^_);for(var M=this._invKeySchedule=[],z=0;z<R;z++){var L=R-z;if(z%4)var _=D[L];else var _=D[L-4];z<4||L<=4?M[z]=_:M[z]=h[a[_>>>24]]^p[a[_>>>16&255]]^g[a[_>>>8&255]]^y[a[_&255]]}}},encryptBlock:function(_,E){this._doCryptBlock(_,E,this._keySchedule,l,c,f,d,a)},decryptBlock:function(_,E){var T=_[E+1];_[E+1]=_[E+3],_[E+3]=T,this._doCryptBlock(_,E,this._invKeySchedule,h,p,g,y,u);var T=_[E+1];_[E+1]=_[E+3],_[E+3]=T},_doCryptBlock:function(_,E,T,k,I,R,D,L){for(var M=this._nRounds,z=_[E]^T[0],F=_[E+1]^T[1],H=_[E+2]^T[2],Q=_[E+3]^T[3],J=4,ne=1;ne<M;ne++){var Z=k[z>>>24]^I[F>>>16&255]^R[H>>>8&255]^D[Q&255]^T[J++],ie=k[F>>>24]^I[H>>>16&255]^R[Q>>>8&255]^D[z&255]^T[J++],q=k[H>>>24]^I[Q>>>16&255]^R[z>>>8&255]^D[F&255]^T[J++],U=k[Q>>>24]^I[z>>>16&255]^R[F>>>8&255]^D[H&255]^T[J++];z=Z,F=ie,H=q,Q=U}var Z=(L[z>>>24]<<24|L[F>>>16&255]<<16|L[H>>>8&255]<<8|L[Q&255])^T[J++],ie=(L[F>>>24]<<24|L[H>>>16&255]<<16|L[Q>>>8&255]<<8|L[z&255])^T[J++],q=(L[H>>>24]<<24|L[Q>>>16&255]<<16|L[z>>>8&255]<<8|L[F&255])^T[J++],U=(L[Q>>>24]<<24|L[z>>>16&255]<<16|L[F>>>8&255]<<8|L[H&255])^T[J++];_[E]=Z,_[E+1]=ie,_[E+2]=q,_[E+3]=U},keySize:256/32});r.AES=s._createHelper(b)}(),n.AES})}(q3)),q3.exports}var W3={exports:{}},Bit=W3.exports,Qie;function jit(){return Qie||(Qie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),_x(),Ex(),b1(),Yo())})(Bit,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var x=this._key,b=x.words,_=[],E=0;E<56;E++){var T=u[E]-1;_[E]=b[T>>>5]>>>31-T%32&1}for(var k=this._subKeys=[],I=0;I<16;I++){for(var R=k[I]=[],D=c[I],E=0;E<24;E++)R[E/6|0]|=_[(l[E]-1+D)%28]<<31-E%6,R[4+(E/6|0)]|=_[28+(l[E+24]-1+D)%28]<<31-E%6;R[0]=R[0]<<1|R[0]>>>31;for(var E=1;E<7;E++)R[E]=R[E]>>>(E-1)*4+3;R[7]=R[7]<<5|R[7]>>>27}for(var L=this._invSubKeys=[],E=0;E<16;E++)L[E]=k[15-E]},encryptBlock:function(x,b){this._doCryptBlock(x,b,this._subKeys)},decryptBlock:function(x,b){this._doCryptBlock(x,b,this._invSubKeys)},_doCryptBlock:function(x,b,_){this._lBlock=x[b],this._rBlock=x[b+1],p.call(this,4,252645135),p.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),p.call(this,1,1431655765);for(var E=0;E<16;E++){for(var T=_[E],k=this._lBlock,I=this._rBlock,R=0,D=0;D<8;D++)R|=f[D][((I^T[D])&d[D])>>>0];this._lBlock=I,this._rBlock=k^R}var L=this._lBlock;this._lBlock=this._rBlock,this._rBlock=L,p.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),x[b]=this._lBlock,x[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(x,b){var _=(this._lBlock>>>x^this._rBlock)&b;this._rBlock^=_,this._lBlock^=_<<x}function g(x,b){var _=(this._rBlock>>>x^this._lBlock)&b;this._lBlock^=_,this._rBlock^=_<<x}r.DES=o._createHelper(h);var y=a.TripleDES=o.extend({_doReset:function(){var x=this._key,b=x.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var _=b.slice(0,2),E=b.length<4?b.slice(0,2):b.slice(2,4),T=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=h.createEncryptor(s.create(_)),this._des2=h.createEncryptor(s.create(E)),this._des3=h.createEncryptor(s.create(T))},encryptBlock:function(x,b){this._des1.encryptBlock(x,b),this._des2.decryptBlock(x,b),this._des3.encryptBlock(x,b)},decryptBlock:function(x,b){this._des3.decryptBlock(x,b),this._des2.encryptBlock(x,b),this._des1.decryptBlock(x,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(y)}(),n.TripleDES})}(W3)),W3.exports}var G3={exports:{}},Uit=G3.exports,Jie;function zit(){return Jie||(Jie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),_x(),Ex(),b1(),Yo())})(Uit,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,g=0;p<256;p++){var y=p%d,x=f[y>>>2]>>>24-y%4*8&255;g=(g+h[p]+x)%256;var b=h[p];h[p]=h[g],h[g]=b}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var g=c[f];c[f]=c[d],c[d]=g,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(G3)),G3.exports}var Y3={exports:{}},Vit=Y3.exports,Zie;function Hit(){return Zie||(Zie=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),_x(),Ex(),b1(),Yo())})(Vit,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var g=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],y=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)y[p]^=g[p+4&7];if(h){var x=h.words,b=x[0],_=x[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,T=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=E>>>16|T&4294901760,I=T<<16|E&65535;y[0]^=E,y[1]^=k,y[2]^=T,y[3]^=I,y[4]^=E,y[5]^=k,y[6]^=T,y[7]^=I;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var g=0;g<4;g++)a[g]=(a[g]<<8|a[g]>>>24)&16711935|(a[g]<<24|a[g]>>>8)&4278255360,d[h+g]^=a[g]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var g=d[p]+h[p],y=g&65535,x=g>>>16,b=((y*y>>>17)+y*x>>>15)+x*x,_=((g&4294901760)*g|0)+((g&65535)*g|0);l[p]=b^_}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(Y3)),Y3.exports}var K3={exports:{}},qit=K3.exports,ese;function Wit(){return ese||(ese=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),_x(),Ex(),b1(),Yo())})(qit,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var y=0;y<4;y++)f.call(this);for(var y=0;y<8;y++)g[y]^=p[y+4&7];if(h){var x=h.words,b=x[0],_=x[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,T=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=E>>>16|T&4294901760,I=T<<16|E&65535;g[0]^=E,g[1]^=k,g[2]^=T,g[3]^=I,g[4]^=E,g[5]^=k,g[6]^=T,g[7]^=I;for(var y=0;y<4;y++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var g=0;g<4;g++)a[g]=(a[g]<<8|a[g]>>>24)&16711935|(a[g]<<24|a[g]>>>8)&4278255360,d[h+g]^=a[g]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var g=d[p]+h[p],y=g&65535,x=g>>>16,b=((y*y>>>17)+y*x>>>15)+x*x,_=((g&4294901760)*g|0)+((g&65535)*g|0);l[p]=b^_}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(K3)),K3.exports}var X3={exports:{}},Git=X3.exports,tse;function Yit(){return tse||(tse=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),_x(),Ex(),b1(),Yo())})(Git,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(y,x){let b=x>>24&255,_=x>>16&255,E=x>>8&255,T=x&255,k=y.sbox[0][b]+y.sbox[1][_];return k=k^y.sbox[2][E],k=k+y.sbox[3][T],k}function d(y,x,b){let _=x,E=b,T;for(let k=0;k<a;++k)_=_^y.pbox[k],E=f(y,_)^E,T=_,_=E,E=T;return T=_,_=E,E=T,E=E^y.pbox[a],_=_^y.pbox[a+1],{left:_,right:E}}function h(y,x,b){let _=x,E=b,T;for(let k=a+1;k>1;--k)_=_^y.pbox[k],E=f(y,_)^E,T=_,_=E,E=T;return T=_,_=E,E=T,E=E^y.pbox[1],_=_^y.pbox[0],{left:_,right:E}}function p(y,x,b){for(let I=0;I<4;I++){y.sbox[I]=[];for(let R=0;R<256;R++)y.sbox[I][R]=l[I][R]}let _=0;for(let I=0;I<a+2;I++)y.pbox[I]=u[I]^x[_],_++,_>=b&&(_=0);let E=0,T=0,k=0;for(let I=0;I<a+2;I+=2)k=d(y,E,T),E=k.left,T=k.right,y.pbox[I]=E,y.pbox[I+1]=T;for(let I=0;I<4;I++)for(let R=0;R<256;R+=2)k=d(y,E,T),E=k.left,T=k.right,y.sbox[I][R]=E,y.sbox[I][R+1]=T;return!0}var g=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var y=this._keyPriorReset=this._key,x=y.words,b=y.sigBytes/4;p(c,x,b)}},encryptBlock:function(y,x){var b=d(c,y[x],y[x+1]);y[x]=b.left,y[x+1]=b.right},decryptBlock:function(y,x){var b=h(c,y[x],y[x+1]);y[x]=b.left,y[x+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(g)}(),n.Blowfish})}(X3)),X3.exports}var Kit=m3.exports,nse;function Xit(){return nse||(nse=1,function(e,t){(function(n,r,i){e.exports=r(Cr(),IL(),Wrt(),Yrt(),_x(),Qrt(),Ex(),abe(),cG(),nit(),ube(),sit(),ait(),lit(),fG(),dit(),b1(),Yo(),git(),vit(),xit(),_it(),Tit(),Cit(),kit(),Rit(),Dit(),Oit(),Lit(),Fit(),jit(),zit(),Hit(),Wit(),Yit())})(Kit,function(n){return n})}(m3)),m3.exports}var N7=Xit();function Cd(e){const t=N7.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function Qit(e){const t=N7.AES.decrypt(atob(e),"notSecret").toString(N7.enc.Utf8);return parseInt(t,10)}function Tx(){const{studyId:e}=Sp();return`${e}`}function Uf(){const{index:e}=Sp();return e===void 0?0:e.startsWith("reviewer-")||e.startsWith("__")?e:Qit(e)}function ih(){const e=Uf(),t=lG();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var $C={exports:{}};$C.exports;var rse;function Jit(){return rse||(rse=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",y="[object Number]",x="[object Null]",b="[object Object]",_="[object Proxy]",E="[object RegExp]",T="[object Set]",k="[object String]",I="[object Undefined]",R="[object WeakMap]",D="[object ArrayBuffer]",L="[object DataView]",M="[object Float32Array]",z="[object Float64Array]",F="[object Int8Array]",H="[object Int16Array]",Q="[object Int32Array]",J="[object Uint8Array]",ne="[object Uint8ClampedArray]",Z="[object Uint16Array]",ie="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,V={};V[M]=V[z]=V[F]=V[H]=V[Q]=V[J]=V[ne]=V[Z]=V[ie]=!0,V[a]=V[u]=V[D]=V[c]=V[L]=V[f]=V[d]=V[h]=V[g]=V[y]=V[b]=V[E]=V[T]=V[k]=V[R]=!1;var K=typeof ho=="object"&&ho&&ho.Object===Object&&ho,ee=typeof self=="object"&&self&&self.Object===Object&&self,fe=K||ee||Function("return this")(),Ee=t&&!t.nodeType&&t,ye=Ee&&!0&&e&&!e.nodeType&&e,_e=ye&&ye.exports===Ee,De=_e&&K.process,me=function(){try{var ge=ye&&ye.require&&ye.require("util").types;return ge||De&&De.binding&&De.binding("util")}catch{}}(),de=me&&me.isTypedArray;function $e(ge,Se,Ye){switch(Ye.length){case 0:return ge.call(Se);case 1:return ge.call(Se,Ye[0]);case 2:return ge.call(Se,Ye[0],Ye[1]);case 3:return ge.call(Se,Ye[0],Ye[1],Ye[2])}return ge.apply(Se,Ye)}function Pe(ge,Se){for(var Ye=-1,Jt=Array(ge);++Ye<ge;)Jt[Ye]=Se(Ye);return Jt}function Ze(ge){return function(Se){return ge(Se)}}function it(ge,Se){return ge==null?void 0:ge[Se]}function Ge(ge,Se){return function(Ye){return ge(Se(Ye))}}var et=Array.prototype,ut=Function.prototype,Tt=Object.prototype,xt=fe["__core-js_shared__"],Dt=ut.toString,Ue=Tt.hasOwnProperty,Ft=function(){var ge=/[^.]+$/.exec(xt&&xt.keys&&xt.keys.IE_PROTO||"");return ge?"Symbol(src)_1."+ge:""}(),tn=Tt.toString,Re=Dt.call(Object),Ve=RegExp("^"+Dt.call(Ue).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yt=_e?fe.Buffer:void 0,$t=fe.Symbol,Bt=fe.Uint8Array;yt&&yt.allocUnsafe;var dn=Ge(Object.getPrototypeOf,Object),Nn=Object.create,dr=Tt.propertyIsEnumerable,ti=et.splice,kn=$t?$t.toStringTag:void 0,Bn=function(){try{var ge=gt(Object,"defineProperty");return ge({},"",{}),ge}catch{}}(),Xr=yt?yt.isBuffer:void 0,ir=Math.max,zs=Date.now,gi=gt(fe,"Map"),ni=gt(Object,"create"),yi=function(){function ge(){}return function(Se){if(!Zu(Se))return{};if(Nn)return Nn(Se);ge.prototype=Se;var Ye=new ge;return ge.prototype=void 0,Ye}}();function Ar(ge){var Se=-1,Ye=ge==null?0:ge.length;for(this.clear();++Se<Ye;){var Jt=ge[Se];this.set(Jt[0],Jt[1])}}function Vs(){this.__data__=ni?ni(null):{},this.size=0}function Yu(ge){var Se=this.has(ge)&&delete this.__data__[ge];return this.size-=Se?1:0,Se}function Eo(ge){var Se=this.__data__;if(ni){var Ye=Se[ge];return Ye===r?void 0:Ye}return Ue.call(Se,ge)?Se[ge]:void 0}function Ra(ge){var Se=this.__data__;return ni?Se[ge]!==void 0:Ue.call(Se,ge)}function kr(ge,Se){var Ye=this.__data__;return this.size+=this.has(ge)?0:1,Ye[ge]=ni&&Se===void 0?r:Se,this}Ar.prototype.clear=Vs,Ar.prototype.delete=Yu,Ar.prototype.get=Eo,Ar.prototype.has=Ra,Ar.prototype.set=kr;function ui(ge){var Se=-1,Ye=ge==null?0:ge.length;for(this.clear();++Se<Ye;){var Jt=ge[Se];this.set(Jt[0],Jt[1])}}function $r(){this.__data__=[],this.size=0}function os(ge){var Se=this.__data__,Ye=Gl(Se,ge);if(Ye<0)return!1;var Jt=Se.length-1;return Ye==Jt?Se.pop():ti.call(Se,Ye,1),--this.size,!0}function yr(ge){var Se=this.__data__,Ye=Gl(Se,ge);return Ye<0?void 0:Se[Ye][1]}function vi(ge){return Gl(this.__data__,ge)>-1}function Hs(ge,Se){var Ye=this.__data__,Jt=Gl(Ye,ge);return Jt<0?(++this.size,Ye.push([ge,Se])):Ye[Jt][1]=Se,this}ui.prototype.clear=$r,ui.prototype.delete=os,ui.prototype.get=yr,ui.prototype.has=vi,ui.prototype.set=Hs;function Ts(ge){var Se=-1,Ye=ge==null?0:ge.length;for(this.clear();++Se<Ye;){var Jt=ge[Se];this.set(Jt[0],Jt[1])}}function ro(){this.size=0,this.__data__={hash:new Ar,map:new(gi||ui),string:new Ar}}function pu(ge){var Se=ht(this,ge).delete(ge);return this.size-=Se?1:0,Se}function qf(ge){return ht(this,ge).get(ge)}function hr(ge){return ht(this,ge).has(ge)}function Ku(ge,Se){var Ye=ht(this,ge),Jt=Ye.size;return Ye.set(ge,Se),this.size+=Ye.size==Jt?0:1,this}Ts.prototype.clear=ro,Ts.prototype.delete=pu,Ts.prototype.get=qf,Ts.prototype.has=hr,Ts.prototype.set=Ku;function Di(ge){var Se=this.__data__=new ui(ge);this.size=Se.size}function Qo(){this.__data__=new ui,this.size=0}function io(ge){var Se=this.__data__,Ye=Se.delete(ge);return this.size=Se.size,Ye}function mh(ge){return this.__data__.get(ge)}function Wf(ge){return this.__data__.has(ge)}function Wc(ge,Se){var Ye=this.__data__;if(Ye instanceof ui){var Jt=Ye.__data__;if(!gi||Jt.length<n-1)return Jt.push([ge,Se]),this.size=++Ye.size,this;Ye=this.__data__=new Ts(Jt)}return Ye.set(ge,Se),this.size=Ye.size,this}Di.prototype.clear=Qo,Di.prototype.delete=io,Di.prototype.get=mh,Di.prototype.has=Wf,Di.prototype.set=Wc;function Gc(ge,Se){var Ye=Ws(ge),Jt=!Ye&&Ni(ge),Un=!Ye&&!Jt&&ea(ge),ur=!Ye&&!Jt&&!Un&&sm(ge),Fr=Ye||Jt||Un||ur,un=Fr?Pe(ge.length,String):[],vr=un.length;for(var Ir in ge)Fr&&(Ir=="length"||Un&&(Ir=="offset"||Ir=="parent")||ur&&(Ir=="buffer"||Ir=="byteLength"||Ir=="byteOffset")||zt(Ir,vr))||un.push(Ir);return un}function ql(ge,Se,Ye){(Ye!==void 0&&!qs(ge[Se],Ye)||Ye===void 0&&!(Se in ge))&&Yn(ge,Se,Ye)}function Wl(ge,Se,Ye){var Jt=ge[Se];(!(Ue.call(ge,Se)&&qs(Jt,Ye))||Ye===void 0&&!(Se in ge))&&Yn(ge,Se,Ye)}function Gl(ge,Se){for(var Ye=ge.length;Ye--;)if(qs(ge[Ye][0],Se))return Ye;return-1}function Yn(ge,Se,Ye){Se=="__proto__"&&Bn?Bn(ge,Se,{configurable:!0,enumerable:!0,value:Ye,writable:!0}):ge[Se]=Ye}var Gf=tt();function Ss(ge){return ge==null?ge===void 0?I:x:kn&&kn in Object(ge)?pt(ge):us(ge)}function mu(ge){return Ui(ge)&&Ss(ge)==a}function as(ge){if(!Zu(ge)||jn(ge))return!1;var Se=Pa(ge)?Ve:U;return Se.test(Xf(ge))}function Xu(ge){return Ui(ge)&&rg(ge.length)&&!!V[Ss(ge)]}function Yf(ge){if(!Zu(ge))return Zn(ge);var Se=an(ge),Ye=[];for(var Jt in ge)Jt=="constructor"&&(Se||!Ue.call(ge,Jt))||Ye.push(Jt);return Ye}function Qu(ge,Se,Ye,Jt,Un){ge!==Se&&Gf(Se,function(ur,Fr){if(Un||(Un=new Di),Zu(ur))Cs(ge,Se,Fr,Ye,Qu,Jt,Un);else{var un=Jt?Jt(Ju(ge,Fr),ur,Fr+"",ge,Se,Un):void 0;un===void 0&&(un=ur),ql(ge,Fr,un)}},Yc)}function Cs(ge,Se,Ye,Jt,Un,ur,Fr){var un=Ju(ge,Ye),vr=Ju(Se,Ye),Ir=Fr.get(vr);if(Ir){ql(ge,Ye,Ir);return}var ls=ur?ur(un,vr,Ye+"",ge,Se,Fr):void 0,Da=ls===void 0;if(Da){var bi=Ws(vr),Kc=!bi&&ea(vr),Qi=!bi&&!Kc&&sm(vr);ls=vr,bi||Kc||Qi?Ws(un)?ls=un:Kl(un)?ls=ke(un):Kc?(Da=!1,ls=ae(vr)):Qi?(Da=!1,ls=pe(vr)):ls=[]:L1(vr)||Ni(vr)?(ls=un,Ni(un)?ls=Xl(un):(!Zu(un)||Pa(un))&&(ls=At(vr))):Da=!1}Da&&(Fr.set(vr,ls),Un(ls,vr,Jt,ur,Fr),Fr.delete(vr)),ql(ge,Ye,ls)}function gh(ge,Se){return Kf(Jo(ge,Se,Kn),ge+"")}var As=Bn?function(ge,Se){return Bn(ge,"toString",{configurable:!0,enumerable:!1,value:er(Se),writable:!0})}:Kn;function ae(ge,Se){return ge.slice()}function we(ge){var Se=new ge.constructor(ge.byteLength);return new Bt(Se).set(new Bt(ge)),Se}function pe(ge,Se){var Ye=we(ge.buffer);return new ge.constructor(Ye,ge.byteOffset,ge.length)}function ke(ge,Se){var Ye=-1,Jt=ge.length;for(Se||(Se=Array(Jt));++Ye<Jt;)Se[Ye]=ge[Ye];return Se}function Oe(ge,Se,Ye,Jt){var Un=!Ye;Ye||(Ye={});for(var ur=-1,Fr=Se.length;++ur<Fr;){var un=Se[ur],vr=void 0;vr===void 0&&(vr=ge[un]),Un?Yn(Ye,un,vr):Wl(Ye,un,vr)}return Ye}function Ae(ge){return gh(function(Se,Ye){var Jt=-1,Un=Ye.length,ur=Un>1?Ye[Un-1]:void 0,Fr=Un>2?Ye[2]:void 0;for(ur=ge.length>3&&typeof ur=="function"?(Un--,ur):void 0,Fr&&Tn(Ye[0],Ye[1],Fr)&&(ur=Un<3?void 0:ur,Un=1),Se=Object(Se);++Jt<Un;){var un=Ye[Jt];un&&ge(Se,un,Jt,ur)}return Se})}function tt(ge){return function(Se,Ye,Jt){for(var Un=-1,ur=Object(Se),Fr=Jt(Se),un=Fr.length;un--;){var vr=Fr[++Un];if(Ye(ur[vr],vr,ur)===!1)break}return Se}}function ht(ge,Se){var Ye=ge.__data__;return on(Se)?Ye[typeof Se=="string"?"string":"hash"]:Ye.map}function gt(ge,Se){var Ye=it(ge,Se);return as(Ye)?Ye:void 0}function pt(ge){var Se=Ue.call(ge,kn),Ye=ge[kn];try{ge[kn]=void 0;var Jt=!0}catch{}var Un=tn.call(ge);return Jt&&(Se?ge[kn]=Ye:delete ge[kn]),Un}function At(ge){return typeof ge.constructor=="function"&&!an(ge)?yi(dn(ge)):{}}function zt(ge,Se){var Ye=typeof ge;return Se=Se??o,!!Se&&(Ye=="number"||Ye!="symbol"&&X.test(ge))&&ge>-1&&ge%1==0&&ge<Se}function Tn(ge,Se,Ye){if(!Zu(Ye))return!1;var Jt=typeof Se;return(Jt=="number"?Zo(Ye)&&zt(Se,Ye.length):Jt=="string"&&Se in Ye)?qs(Ye[Se],ge):!1}function on(ge){var Se=typeof ge;return Se=="string"||Se=="number"||Se=="symbol"||Se=="boolean"?ge!=="__proto__":ge===null}function jn(ge){return!!Ft&&Ft in ge}function an(ge){var Se=ge&&ge.constructor,Ye=typeof Se=="function"&&Se.prototype||Tt;return ge===Ye}function Zn(ge){var Se=[];if(ge!=null)for(var Ye in Object(ge))Se.push(Ye);return Se}function us(ge){return tn.call(ge)}function Jo(ge,Se,Ye){return Se=ir(Se===void 0?ge.length-1:Se,0),function(){for(var Jt=arguments,Un=-1,ur=ir(Jt.length-Se,0),Fr=Array(ur);++Un<ur;)Fr[Un]=Jt[Se+Un];Un=-1;for(var un=Array(Se+1);++Un<Se;)un[Un]=Jt[Un];return un[Se]=Ye(Fr),$e(ge,this,un)}}function Ju(ge,Se){if(!(Se==="constructor"&&typeof ge[Se]=="function")&&Se!="__proto__")return ge[Se]}var Kf=Yl(As);function Yl(ge){var Se=0,Ye=0;return function(){var Jt=zs(),Un=s-(Jt-Ye);if(Ye=Jt,Un>0){if(++Se>=i)return arguments[0]}else Se=0;return ge.apply(void 0,arguments)}}function Xf(ge){if(ge!=null){try{return Dt.call(ge)}catch{}try{return ge+""}catch{}}return""}function qs(ge,Se){return ge===Se||ge!==ge&&Se!==Se}var Ni=mu(function(){return arguments}())?mu:function(ge){return Ui(ge)&&Ue.call(ge,"callee")&&!dr.call(ge,"callee")},Ws=Array.isArray;function Zo(ge){return ge!=null&&rg(ge.length)&&!Pa(ge)}function Kl(ge){return Ui(ge)&&Zo(ge)}var ea=Xr||Ql;function Pa(ge){if(!Zu(ge))return!1;var Se=Ss(ge);return Se==h||Se==p||Se==l||Se==_}function rg(ge){return typeof ge=="number"&&ge>-1&&ge%1==0&&ge<=o}function Zu(ge){var Se=typeof ge;return ge!=null&&(Se=="object"||Se=="function")}function Ui(ge){return ge!=null&&typeof ge=="object"}function L1(ge){if(!Ui(ge)||Ss(ge)!=b)return!1;var Se=dn(ge);if(Se===null)return!0;var Ye=Ue.call(Se,"constructor")&&Se.constructor;return typeof Ye=="function"&&Ye instanceof Ye&&Dt.call(Ye)==Re}var sm=de?Ze(de):Xu;function Xl(ge){return Oe(ge,Yc(ge))}function Yc(ge){return Zo(ge)?Gc(ge):Yf(ge)}var ig=Ae(function(ge,Se,Ye){Qu(ge,Se,Ye)});function er(ge){return function(){return ge}}function Kn(ge){return ge}function Ql(){return!1}e.exports=ig}($C,$C.exports)),$C.exports}var Zit=Jit();const dG=qc(Zit);function h0(e){return structuredClone(e)}function hG(){const e=Uf(),n=`${ih()}_${e}`;return Ur(i=>i.answers[n])}const lbe=O.createContext(null);function est(){const e=O.useContext(lbe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function N0(){return Ur(e=>e.config)}function rS(){const[e]=G0();return!!e.get("participantId")}function ise(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function tst(){const e=Uf(),t=lG(),r=`${ih()}_${e}`,i=Ur(M=>M.trialValidation),s=Ur(M=>M.sequence),o=Ur(M=>M.answers),a=Ur(M=>M.modes),u=Ur(M=>M.otherTexts),l=hu(),{saveTrialAnswer:c,setreactiveAnswers:f,setMatrixAnswersRadio:d,setMatrixAnswersCheckbox:h,resetOtherText:p}=Ca(),{storageEngine:g}=_s(),y=Tx(),x=O.useMemo(()=>a.dataCollectionEnabled,[a]),b=Urt(r),_=rS(),E=typeof e!="number"||_||!b,T=hG(),k=nh(),I=N0(),R=O.useMemo(()=>Date.now(),[]),D=est(),L=O.useCallback((M=!0)=>{if(typeof e!="number")return;const z=h0(i[r]),F=Object.values(z).reduce((V,K)=>Object.hasOwn(K,"values")?{...V,...K.values}:V,{});Object.entries(u).forEach(([V,K])=>{Array.isArray(F[V])&&F[V].includes("__other")&&(F[V]=F[V].filter(ee=>ee!=="__other"),F[V].push(`other:${K}`)),typeof F[V]=="string"&&F[V]==="__other"&&(F[V]=`other:${K}`)});const{provenanceGraph:H}=z,Q=Date.now(),{incorrectAnswers:J,helpButtonClickedCount:ne}=T,Z=D&&"current"in D&&D.current?D.current.splice(0,D.current.length):[];if(x&&T.endTime===-1){const V={answer:M?F:{},startTime:R,endTime:Q,incorrectAnswers:J,provenanceGraph:H,windowEvents:Z,timedOut:!M,helpButtonClickedCount:ne};l(c({identifier:r,...V})),g&&g.saveAnswers({...o,[r]:V}),l(f({})),l(p()),l(h(null)),l(d(null))}let ie=e+1;const q=aG(s,e),U=q!==null&&q.some(V=>Object.hasOwn(V.currentBlock,"skip")&&V.currentBlock.skip!==void 0),X={...o,[r]:{answer:F,startTime:R,endTime:Q,provenanceGraph:H,windowEvents:Z}};U&&[...q.flatMap(K=>K.currentBlock.skip?K.currentBlock.skip.map(ee=>({...ee,firstIndex:K.firstIndex,lastIndex:K.lastIndex})):[])].some(K=>{let ee=!1;const fe=Object.fromEntries(Object.entries(X).filter(([ye])=>{const _e=parseInt(ye.slice(ye.lastIndexOf("_")+1),10);return _e>=K.firstIndex&&_e<=e})),Ee=K.check!=="block"?Object.entries(fe).filter(([ye])=>ye.slice(0,ye.lastIndexOf("_"))===K.name):Object.entries(fe);if(Ee.length===0)return!1;if(Ee.some(([ye,_e])=>!_e))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(K,null,2)}`);if(K.check==="response"||K.check==="responses"){const[ye,_e]=Ee[0];K.check==="response"?ee=K.comparison==="equal"?K.value===_e.answer[K.responseId]:K.value!==_e.answer[K.responseId]:ee=!ise(_e.answer,ye,I.components[ye.slice(0,ye.lastIndexOf("_"))],I)}else if(K.check==="block"||K.check==="repeatedComponent"){if(Ee.length<K.value)return!1;const ye=Ee.map(([me,de])=>ise(de.answer,me,I.components[me.slice(0,me.lastIndexOf("_"))],I)),_e=ye.filter(me=>me).length,De=ye.length-_e;ee=K.condition==="numCorrect"&&_e===K.value||K.condition==="numIncorrect"&&De===K.value}if(ee){const ye=t.indexOf(K.to),_e=ye===-1?Brt(s,K.to):-1;return ie=ye===-1?_e:ye,!0}return!1}),k(`/${y}/${Cd(ie)}${window.location.search}`)},[e,i,r,u,T,D,x,s,o,R,k,y,l,c,g,f,p,h,d,I,t]);return{isNextDisabled:E,goToNextStep:L}}function nst({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=tst(),o=N0(),a=nh(),u=O.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=O.useState(void 0);O.useEffect(()=>{let p=0;const g=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(g)}},[]),O.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./../__timedOut")},[l,f,a,o.uiConfig.timeoutReject]);const h=O.useMemo(()=>{const p=l&&f?f<=l:!0,g=f?f>=c:!0;return p&&g},[l,c,f]);return O.useEffect(()=>{const p=g=>{g.key==="Enter"&&!t&&!i&&h&&s()};return o.uiConfig.nextOnEnter?(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}):()=>{}},[t,i,h,s,o.uiConfig.nextOnEnter]),S.jsxs(S.Fragment,{children:[S.jsx(hn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&S.jsxs(l0,{mt:"md",title:"Please wait",color:"blue",icon:S.jsx(Rq,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?S.jsxs(l0,{mt:"md",title:"Next button disables soon",color:"yellow",icon:S.jsx(pA,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&S.jsxs(l0,{mt:"md",title:"Next button disabled",color:"red",icon:S.jsx(pA,{}),children:["The next button has timed out and is now disabled.",S.jsx(is,{justify:"right",mt:"sm",children:S.jsx(hn,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function rst(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const ist=typeof window<"u"?O.useLayoutEffect:O.useEffect;function aa(e,t){ist(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function sst(e,t){e&&rst(e),aa(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),aa(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),aa(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),aa(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),aa(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),aa(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),aa(`mantine-form:${e}:clear-errors`,t.clearErrors),aa(`mantine-form:${e}:reset`,t.reset),aa(`mantine-form:${e}:validate`,t.validate),aa(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),aa(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),aa(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),aa(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),aa(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),aa(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),aa(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),aa(`mantine-form:${e}:reset-touched`,t.resetTouched)}function ost(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function O7(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function ast(e){const[t,n]=O.useState(O7(e)),r=O.useRef(t),i=O.useCallback(u=>{n(l=>{const c=O7(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=O.useCallback(()=>i({}),[]),o=O.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=O.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function $7(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function sse(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function ose(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=$7(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=sse(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=sse(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function ust(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function ase(e,t,n){typeof n.value=="object"&&(n.value=V_(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function V_(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(V_(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(V_(a),V_(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(V_(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)ase(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||ase(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function cbe(e){return typeof e!="string"?[]:e.split(".")}function ya(e,t){const n=cbe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!=null;i+=1)r=r[n[i]];return r}function FI(e,t,n){const r=cbe(e);if(r.length===0)return n;const i=V_(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function lst(e,{from:t,to:n},r){const i=ya(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),FI(e,s,r)}function cst(e,t,n,r){const i=ya(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),FI(e,s,r)}function fst(e,t,n){const r=ya(e,n);return Array.isArray(r)?FI(e,r.filter((i,s)=>s!==t),n):n}function dst(e,t,n,r){const i=ya(e,r);if(!Array.isArray(i)||i.length<=n)return r;const s=[...i];return s[n]=t,FI(e,s,r)}function hst({$values:e,$errors:t,$status:n}){const r=O.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>ust(a,u,l)),e.setValues({values:lst(a,u,e.refValues.current),updateState:!0})},[]),i=O.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>ose(a,u,l,-1)),e.setValues({values:fst(a,u,e.refValues.current),updateState:!0})},[]),s=O.useCallback((a,u,l)=>{n.clearFieldDirty(a),t.setErrors(c=>ose(a,l,c,1)),e.setValues({values:cst(a,u,l,e.refValues.current),updateState:!0})},[]),o=O.useCallback((a,u,l)=>{n.clearFieldDirty(a),e.setValues({values:dst(a,l,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s,replaceListItem:o}}var a9,use;function pG(){return use||(use=1,a9=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),a9}var pst=pG();const LC=qc(pst);function Y2(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function mst({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=O.useState(t),[o,a]=O.useState(e),u=O.useRef(t),l=O.useRef(e),c=O.useCallback(k=>{const I=typeof k=="function"?k(u.current):k;u.current=I,n==="controlled"&&s(I)},[]),f=O.useCallback((k,I=!1)=>{const R=typeof k=="function"?k(l.current):k;l.current=R,(n==="controlled"||I)&&a(R)},[]),d=O.useCallback(()=>c({}),[]),h=O.useCallback(k=>{const I=k?{...k,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(I),f({})},[]),p=O.useCallback((k,I)=>{c(R=>Y2(R,k)===I?R:{...R,[k]:I})},[]),g=O.useCallback((k,I,R)=>{f(D=>Y2(D,k)===I?D:{...D,[k]:I},R)},[]),y=O.useCallback((k,I)=>{const R=Y2(l.current,k),D=!LC(ya(k,r.getValuesSnapshot()),I),L=$7(k,l.current);L[k]=D,f(L,R!==D)},[]),x=O.useCallback(k=>Y2(u.current,k),[]),b=O.useCallback(k=>f(I=>{if(typeof k!="string")return I;const R=$7(k,I);return delete R[k],LC(R,I)?I:R}),[]),_=O.useCallback(k=>{if(k){const R=ya(k,l.current);if(typeof R=="boolean")return R;const D=ya(k,r.refValues.current),L=ya(k,r.valuesSnapshot.current);return!LC(D,L)}return Object.keys(l.current).length>0?Y2(l.current):!LC(r.refValues.current,r.valuesSnapshot.current)},[]),E=O.useCallback(()=>l.current,[]),T=O.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:x,setFieldTouched:p,setFieldDirty:g,setTouchedState:s,setDirtyState:a,clearFieldDirty:b,isDirty:_,getDirty:E,getTouched:T,setCalculatedFieldDirty:y}}function gst({initialValues:e,onValuesChange:t,mode:n}){const r=O.useRef(!1),[i,s]=O.useState(e||{}),o=O.useRef(i),a=O.useRef(i),u=O.useCallback(({values:g,subscribers:y,updateState:x=!0,mergeWithPreviousValues:b=!0})=>{const _=o.current,E=g instanceof Function?g(o.current):g,T=b?{..._,...E}:E;o.current=T,x&&s(T),t==null||t(T,_),y==null||y.filter(Boolean).forEach(k=>k({updatedValues:T,previousValues:_}))},[t]),l=O.useCallback(g=>{var b;const y=ya(g.path,o.current),x=g.value instanceof Function?g.value(y):g.value;if(y!==x){const _=o.current,E=FI(g.path,x,o.current);u({values:E,updateState:g.updateState}),(b=g.subscribers)==null||b.filter(Boolean).forEach(T=>T({path:g.path,updatedValues:E,previousValues:_}))}},[u]),c=O.useCallback(g=>{a.current=g},[]),f=O.useCallback((g,y)=>{r.current||(r.current=!0,u({values:g,updateState:n==="controlled"}),c(g),y())},[u]),d=O.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=O.useCallback(()=>o.current,[]),p=O.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h,getValuesSnapshot:p}}function yst({$status:e}){const t=O.useRef({}),n=O.useCallback((i,s)=>{O.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=O.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:ya(i,o.previousValues),value:ya(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function lse(e,t){return e?`${e}-${t.toString()}`:t.toString()}function cse(e){const t=O7(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function L7(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=ya(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>L7(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||L7(o,t,a,i)),i},r)}function M7(e,t){return cse(typeof e=="function"?e(t):L7(e,t))}function mD(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=M7(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const vst="__MANTINE_FORM_INDEX__";function fse(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${vst}`)):!1:!1}function fbe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=g=>g,enhanceGetInputProps:f,validate:d,onSubmitPreventDefault:h="always",touchTrigger:p="change"}={}){const g=ast(r),y=gst({initialValues:n,onValuesChange:l,mode:t}),x=mst({initialDirty:i,initialTouched:s,$values:y,mode:t}),b=hst({$values:y,$errors:g,$status:x}),_=yst({$status:x}),[E,T]=O.useState(0),[k,I]=O.useState({}),[R,D]=O.useState(!1),L=O.useCallback(()=>{y.resetValues(),g.clearErrors(),x.resetDirty(),x.resetTouched(),t==="uncontrolled"&&T(ee=>ee+1)},[]),M=O.useCallback(ee=>{o&&g.clearErrors(),t==="uncontrolled"&&T(fe=>fe+1),Object.keys(_.subscribers.current).forEach(fe=>{const Ee=ya(fe,y.refValues.current),ye=ya(fe,ee);Ee!==ye&&_.getFieldSubscribers(fe).forEach(_e=>_e({previousValues:ee,updatedValues:y.refValues.current}))})},[o]),z=O.useCallback(ee=>{const fe=y.refValues.current;y.initialize(ee,()=>t==="uncontrolled"&&T(Ee=>Ee+1)),M(fe)},[M]),F=O.useCallback((ee,fe,Ee)=>{const ye=fse(ee,a),_e=fe instanceof Function?fe(ya(ee,y.refValues.current)):fe;x.setCalculatedFieldDirty(ee,_e),p==="change"&&x.setFieldTouched(ee,!0),!ye&&o&&g.clearFieldError(ee),y.setFieldValue({path:ee,value:fe,updateState:t==="controlled",subscribers:[..._.getFieldSubscribers(ee),ye?De=>{const me=mD(ee,d,De.updatedValues);me.hasError?g.setFieldError(ee,me.error):g.clearFieldError(ee)}:null,(Ee==null?void 0:Ee.forceUpdate)!==!1&&t!=="controlled"?()=>I(De=>({...De,[ee]:(De[ee]||0)+1})):null]})},[l,d]),H=O.useCallback(ee=>{const fe=y.refValues.current;y.setValues({values:ee,updateState:t==="controlled"}),M(fe)},[l,M]),Q=O.useCallback(()=>{const ee=M7(d,y.refValues.current);return g.setErrors(ee.errors),ee},[d]),J=O.useCallback(ee=>{const fe=mD(ee,d,y.refValues.current);return fe.hasError?g.setFieldError(ee,fe.error):g.clearFieldError(ee),fe},[d]),ne=(ee,{type:fe="input",withError:Ee=!0,withFocus:ye=!0,..._e}={})=>{const me={onChange:ost(de=>F(ee,de,{forceUpdate:!1})),"data-path":lse(e,ee)};return Ee&&(me.error=g.errorsState[ee]),fe==="checkbox"?me[t==="controlled"?"checked":"defaultChecked"]=ya(ee,y.refValues.current):me[t==="controlled"?"value":"defaultValue"]=ya(ee,y.refValues.current),ye&&(me.onFocus=()=>x.setFieldTouched(ee,!0),me.onBlur=()=>{if(fse(ee,u)){const de=mD(ee,d,y.refValues.current);de.hasError?g.setFieldError(ee,de.error):g.clearFieldError(ee)}}),Object.assign(me,f==null?void 0:f({inputProps:me,field:ee,options:{type:fe,withError:Ee,withFocus:ye,..._e},form:K}))},Z=(ee,fe)=>Ee=>{h==="always"&&(Ee==null||Ee.preventDefault());const ye=Q();if(ye.hasErrors)h==="validation-failed"&&(Ee==null||Ee.preventDefault()),fe==null||fe(ye.errors,y.refValues.current,Ee);else{const _e=ee==null?void 0:ee(c(y.refValues.current),Ee);_e instanceof Promise&&(D(!0),_e.finally(()=>D(!1)))}},ie=ee=>c(ee||y.refValues.current),q=O.useCallback(ee=>{ee.preventDefault(),L()},[]),U=O.useCallback(ee=>ee?!mD(ee,d,y.refValues.current).hasError:!M7(d,y.refValues.current).hasErrors,[d]),X=ee=>`${E}-${ee}-${k[ee]||0}`,V=O.useCallback(ee=>document.querySelector(`[data-path="${lse(e,ee)}"]`),[]),K={watch:_.watch,initialized:y.initialized.current,values:y.stateValues,getValues:y.getValues,setInitialValues:y.setValuesSnapshot,initialize:z,setValues:H,setFieldValue:F,submitting:R,setSubmitting:D,errors:g.errorsState,setErrors:g.setErrors,setFieldError:g.setFieldError,clearFieldError:g.clearFieldError,clearErrors:g.clearErrors,resetDirty:x.resetDirty,setTouched:x.setTouched,setDirty:x.setDirty,isTouched:x.isTouched,resetTouched:x.resetTouched,isDirty:x.isDirty,getTouched:x.getTouched,getDirty:x.getDirty,reorderListItem:b.reorderListItem,insertListItem:b.insertListItem,removeListItem:b.removeListItem,replaceListItem:b.replaceListItem,reset:L,validate:Q,validateField:J,getInputProps:ne,onSubmit:Z,onReset:q,isValid:U,getTransformedValues:ie,key:X,getInputNode:V};return sst(e,K),K}function bst(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function xst(e){return bst(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function dbe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const wst=new URLSearchParams(window.location.search),_st=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=wst.get(r.paramCapture):r.type==="reactive"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(a=>[a,""])));const o=r.withDontKnow?{[`${r.id}-dontKnow`]:""}:{};n={...n,[r.id]:s,...o}}}),{...n}},Est=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(s=>s!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const s=[...n.requiredValue].sort(),o=[...r].sort();return s.every((a,u)=>a===o[u])?null:"Incorrect input"}return n.type==="checkbox"?dbe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?(r==null||r==="")&&!i[`${n.id}-dontKnow`]?"Empty input":null:r===null?"Empty input":null}})}),t};function Tst(e,t,n){const[r,i]=O.useState(null),s=fbe({initialValues:_st(e,n),validate:Est(e)});return O.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Sx(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=dbe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function hbe({horizontal:e,children:t,style:n}){return e?S.jsx(is,{mt:We(4),gap:"lg",style:n,children:t}):S.jsx(qd,{gap:"md",style:n,children:t})}function Sst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u,horizontal:l,withOther:c}=e,f=a.map(_=>typeof _=="string"?{value:_,label:_}:_),[d,h]=O.useState(!1),[p,g]=O.useState(""),{setOtherText:y}=Ca(),x=hu();O.useEffect(()=>{x(y({key:e.id,value:p}))},[p,e.id,y,x]);const b=O.useMemo(()=>Sx(e,n,f),[e,n,f]);return S.jsxs(eu.Group,{label:S.jsxs(sn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(Le,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(Le,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(au,{text:s,required:o})})]}),description:u,...n,error:b,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[S.jsx(Le,{mt:"xs",children:S.jsxs(hbe,{horizontal:!!l,style:{flexGrow:1},children:[f.map(_=>S.jsx(eu,{disabled:t,value:_.value,label:_.label},_.value)),c&&S.jsx(eu,{disabled:t,value:"__other",checked:d,onClick:_=>h(_.currentTarget.checked),label:l?"Other":S.jsx(pi,{mt:-8,placeholder:"Other",disabled:!d,value:p,onChange:_=>g(_.currentTarget.value)})},"__other")]})}),l&&c&&S.jsx(pi,{mt:"sm",placeholder:"Other",disabled:!d,value:p,onChange:_=>g(_.currentTarget.value),w:216})]})}function Cst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return S.jsx(FT,{disabled:t,label:S.jsxs(sn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(Le,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(Le,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(au,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:Sx(e,n,c)})}function Ast({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return S.jsx(pi.Wrapper,{label:S.jsxs(sn,{direction:"row",wrap:"nowrap",gap:4,children:[r&&S.jsx(Le,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),S.jsx(Le,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(au,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&S.jsx(Md,{children:Array.isArray(t.value)?t.value.map(a=>S.jsx(Md.Item,{children:a},a)):S.jsx(Md.Item,{children:""})})})}function pbe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f,horizontal:d,withOther:h}=e,p=u.map(T=>typeof T=="string"?{value:T,label:T}:T),[g,y]=O.useState(!1),[x,b]=O.useState(""),{setOtherText:_}=Ca(),E=hu();return O.useEffect(()=>{E(_({key:e.id,value:x}))},[x,e.id,_,E]),S.jsxs(up.Group,{name:`radioInput${e.id}`,label:S.jsxs(sn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(Le,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(Le,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(au,{text:o,required:a})})]}),description:f,...n,error:Sx(e,n,p),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[S.jsxs(is,{gap:"lg",align:"flex-end",mt:d?0:"sm",children:[l?S.jsx(bt,{children:l}):null,S.jsxs(hbe,{horizontal:!!d,style:{flexGrow:1},children:[p.map(T=>S.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":We(12),flex:s?1:"unset",alignItems:"center"},children:[d&&S.jsx(bt,{size:"sm",children:T.label}),S.jsx(up,{disabled:t,value:T.value,label:T.label,styles:{label:{display:"none"}},onChange:()=>y(!1)}),!d&&S.jsx(bt,{size:"sm",children:T.label})]},`${T.value}-${e.id}`)),h&&S.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":We(12),flex:s?1:"unset",alignItems:"center"},children:[d&&S.jsx(bt,{size:"sm",children:"Other"}),S.jsx(up,{disabled:t,value:"other",checked:g,onClick:T=>y(T.currentTarget.checked),label:!d&&S.jsx(pi,{mt:-8,placeholder:"Other",disabled:!g,value:x,onChange:T=>b(T.currentTarget.value)}),mt:0})]})]}),S.jsx(bt,{children:c})]}),d&&h&&S.jsx(pi,{mt:"sm",placeholder:"Other",disabled:!g,value:x,onChange:T=>b(T.currentTarget.value),w:216})]},e.id)}function kst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o,horizontal:!0};return S.jsx(pbe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function Ist({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return S.jsx(tq,{disabled:t,placeholder:l,label:S.jsxs(sn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(Le,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(Le,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(au,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Sx(e,n)})}const Rst="_markLabel_17u7l_1",Pst={markLabel:Rst};function Dst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,[l,c]=O.useMemo(()=>[Math.min(...a.map(d=>d.value)),Math.max(...a.map(d=>d.value))],[a]),f=Sx(e,n);return S.jsx(pi.Wrapper,{label:S.jsxs(sn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(Le,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(Le,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(au,{text:s,required:o})})]}),description:u,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:S.jsx(lq,{disabled:t,marks:a,min:l,max:c,...n,h:40,mt:4,classNames:{markLabel:Pst.markLabel}})})}function Nst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return S.jsx(Jm,{disabled:t,placeholder:s,label:S.jsxs(sn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(Le,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(Le,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(au,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Sx(e,n)})}function Ost({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return S.jsx(zH,{disabled:t,placeholder:s,label:S.jsxs(sn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(Le,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(Le,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(au,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Sx(e,n)})}function $st({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return S.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>S.jsx(eu,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function Lst({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return S.jsx(up.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:S.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>S.jsx(up,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function Mst({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Ca(),a=hu(),{answerOptions:u,questionOptions:l,prompt:c,secondaryText:f,required:d}=e,p=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(E=>({value:E,label:E})):u.map(E=>typeof E=="string"?{value:E,label:E}:E),g=l.map(E=>typeof E=="string"?{value:E,label:E}:E),y=(E,T)=>{const k={type:"radio",questionKey:T,val:E,responseId:e.id};a(s(k))},x=(E,T,k)=>{const I=E.target.checked,R={questionKey:T,responseId:e.id,value:k.value,label:k.label,isChecked:I,choiceOptions:p};a(o(R))},b=p.length,_=g.length;return S.jsxs(S.Fragment,{children:[S.jsxs(sn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(Le,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),S.jsx(Le,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(au,{text:c,required:d})})]}),S.jsx(bt,{c:"dimmed",size:"sm",mt:0,children:f}),S.jsxs(Le,{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},m:"md",mt:"xs",children:[S.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),S.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${b}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:p.map((E,T)=>S.jsx(bt,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:E.label},`choice-${T}-label`))}),S.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${_}, 1fr)`},children:g.map((E,T)=>S.jsx(bt,{style:{height:"80px",width:"100%",display:"flex",alignItems:"center",justifyContent:"end",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,overflowY:"hidden"},ta:"right",p:"sm",miw:140,children:E.label},`question-${T}-label`))}),S.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${_},1fr)`},children:g.map((E,T)=>S.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?S.jsx(Lst,{disabled:r,idx:T,question:E,answer:t,_choices:p,_n:b,onChange:y,response:e}):S.jsx($st,{disabled:r,idx:T,question:E,answer:t,_choices:p,_n:b,onChange:x})},`question-${T}`))})]})]})}function Fst({response:e,answer:t,storedAnswer:n,index:r,configInUse:i,form:s}){const o=(Object.keys(n||{}).length>0?{value:n[e.id]}:t)||{value:void 0},a=Object.keys(n||{}).length>0,[u]=G0(),c=N0().uiConfig.enumerateQuestions??!1,f=O.useMemo(()=>{if(e.paramCapture){const p=u.get(e.paramCapture);return a||!!p}return a},[a,e.paramCapture,u]),[d,h]=O.useState(!!(n!=null&&n[`${e.id}-dontKnow`])||!1);return O.useEffect(()=>{s.setFieldValue(`${e.id}-dontKnow`,d.toString()),d||s.setFieldValue(e.id,"false")},[d,e.id]),S.jsxs(Le,{mb:e.withDivider||i.responseDividers?"xl":"lg",children:[e.type==="numerical"&&S.jsx(Ist,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="shortText"&&S.jsx(Nst,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="longText"&&S.jsx(Ost,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="likert"&&S.jsx(kst,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="dropdown"&&S.jsx(Cst,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="slider"&&S.jsx(Dst,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="radio"&&S.jsx(pbe,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="checkbox"&&S.jsx(Sst,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="reactive"&&S.jsx(Ast,{response:e,answer:o,index:r,enumerateQuestions:c}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&S.jsx(Mst,{disabled:f||d,response:e,answer:o,index:r,enumerateQuestions:c}),e.withDontKnow&&S.jsx(eu,{mt:"xs",disabled:f,label:"I don't know",checked:d,onChange:p=>h(p.currentTarget.checked)}),(e.withDivider||i.responseDividers)&&S.jsx(fx,{mt:"xl",mb:"xs"})]})}function p4({config:e,location:t,status:n,style:r}){var q;const{storageEngine:i}=_s(),s=hu(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=Ca(),c=Uf(),f=ih(),d=n==null?void 0:n.answer,h=Tx(),p=nh(),g=e,y=O.useMemo(()=>{var U;return((U=g==null?void 0:g.response)==null?void 0:U.filter(X=>X.location?X.location===t:t==="belowStimulus"))||[]},[g==null?void 0:g.response,t]),x=O.useMemo(()=>y.map(U=>({...U,required:U.required===void 0?!0:U.required})),[y]),b=Tst(x,c,d||{}),[_,E]=O.useState(void 0),T=Ur(U=>U.reactiveAnswers),k=Ur(U=>U.reactiveProvenance),I=Ur(U=>U.matrixAnswers),R=(g==null?void 0:g.provideFeedback)&&(((q=g==null?void 0:g.correctAnswer)==null?void 0:q.length)||0)>0,D=(g==null?void 0:g.allowFailedTraining)===void 0?!0:g.allowFailedTraining,[L,M]=O.useState(0),z=(g==null?void 0:g.trainingAttempts)||2,[F,H]=O.useState(!1),Q=t===((g==null?void 0:g.nextButtonLocation)||"belowStimulus");O.useEffect(()=>{const U=x.find(X=>X.type==="reactive");if(T&&U){const X=U.id;b.setValues({...b.values,[X]:T[X]})}},[T]),O.useEffect(()=>{k&&E(k)},[k]),O.useEffect(()=>{const U=x.filter(X=>X.type==="matrix-radio"||X.type==="matrix-checkbox");if(I&&U.length>0){const X={...b.values};U.forEach(V=>{const{id:K}=V;X[K]={...b.getInputProps(K).value,...I[K]}}),b.setValues(X)}},[I]),O.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:b.isValid(),values:h0(b.values),provenanceGraph:_}))},[b.values,f,c,t,s,o,_]);const[J,ne]=O.useState(Object.fromEntries(x.map(U=>[U.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),Z=(U,X,V,K,ee)=>{ne(fe=>({...fe,[U]:{visible:X,title:V,message:K,color:ee}}))},ie=()=>{const U=L+1;M(U);const X=Object.fromEntries(x.map(V=>{var fe,Ee;const K=(Ee=(fe=g.correctAnswer)==null?void 0:fe.find(ye=>ye.id===V.id))==null?void 0:Ee.answer,ee=b.values[V.id];return[V.id,Array.isArray(ee)?typeof K=="string"?ee.length===1&&K===ee[0]:ee.length===K.length&&ee.every(ye=>K.includes(ye)):K===ee]}));R&&(x.forEach(V=>{var K;if(X[V.id]&&!((K=J[V.id])!=null&&K.message.includes("You've failed to answer this question correctly")))Z(V.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:V.id,answer:b.values[V.id]}));let ee="";z===-1?ee="Please try again.":U>=z?(ee=`You didn't answer this question correctly after ${z} attempts. ${D?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!D&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./../__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./../__trainingFailed")},5e3)})):z-U===1?ee="Please try again. You have 1 attempt left.":ee=`Please try again. You have ${z-U} attempts left.`,Z(V.id,!0,"Incorrect Answer",ee,"red")}}),H(D&&U>=z||Object.values(X).every(V=>V)&&U<=z))};return S.jsxs("div",{style:r,children:[x.map((U,X)=>{var K,ee;const V=(ee=(K=g.correctAnswer)==null?void 0:K.find(fe=>fe.id===U.id))==null?void 0:ee.answer;return S.jsx(Mr.Fragment,{children:U.hidden?"":S.jsxs(S.Fragment,{children:[S.jsx(Fst,{storedAnswer:d,answer:{...b.getInputProps(U.id,{type:U.type==="checkbox"?"checkbox":"input"})},response:U,index:X+1,configInUse:g,form:b}),J[U.id].visible&&S.jsxs(l0,{mb:"md",title:J[U.id].title,color:J[U.id].color,children:[J[U.id].message," ",J[U.id].message.includes("Please try again")&&S.jsxs(S.Fragment,{children:[S.jsx("br",{}),S.jsx("br",{}),"If you're unsure"," ",S.jsx(cx,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),S.jsx("br",{}),S.jsx("br",{}),L>=z&&z>=0&&V&&` The correct answer was: ${V}.`]})]})},`${U.id}-${c}`)}),S.jsxs(is,{justify:"right",gap:"xs",children:[R&&Q&&S.jsx(hn,{onClick:()=>ie(),disabled:!b.isValid()||L>=z&&z>=0,children:"Check Answer"}),Q&&S.jsx(nst,{disabled:R&&!F||!b.isValid(),label:g.nextButtonText||"Next",configInUse:g})]})]})}const K2="@REVISIT_COMMS",Bst={minHeight:"500px",width:"100%",border:0};function jst({currentConfig:e}){const{setreactiveAnswers:t,setreactiveProvenance:n}=Ca(),r=hu(),i=zve(),s=O.useRef(null),o=O.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=ih(),u=O.useCallback((l,c)=>{var f,d;(d=(f=s.current)==null?void 0:f.contentWindow)==null||d.postMessage({error:!1,type:`${K2}/${l}`,iframeId:o,message:c},"*")},[s,o]);return O.useEffect(()=>{const l=c=>{const{data:f}=c;if(typeof f=="object"&&o===f.iframeId)switch(f.type){case`${K2}/WINDOW_READY`:e.parameters&&u("STUDY_DATA",e.parameters);break;case`${K2}/READY`:s.current&&(s.current.style.height=`${f.message.documentHeight}px`);break;case`${K2}/ANSWERS`:r(t(f.message));break;case`${K2}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",l),()=>window.removeEventListener("message",l)},[r,i,o,e,u,t,n]),S.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${Wo}${e.path}?trialid=${a}&id=${o}`,style:Bst})}async function mG(e){const n=await(await fetch(`${Wo}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function Ust(e){const t=await fetch(`${Wo}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function jy({email:e,path:t}){const n=Bf();return S.jsxs(S0,{fluid:!0,my:50,maw:800,mx:"auto",children:[S.jsx(vs,{order:2,children:S.jsx(bt,{span:!0,c:"orange",children:"404"})}),S.jsxs(bt,{children:[S.jsx(bt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),S.jsx(kc,{h:"lg"}),S.jsxs(Md,{children:[S.jsx(Md.Item,{children:S.jsx(bt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),S.jsx(Md.Item,{children:S.jsxs(bt,{children:["If you're a participant, please contact the study administrator"," ",e&&S.jsxs(S.Fragment,{children:["at"," ",S.jsxs(cx,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const zst={maxWidth:"100%"};function Vst({currentConfig:e}){const t={...zst,...e.style},[n,r]=O.useState(!0),[i,s]=O.useState(!1);return O.useEffect(()=>{async function o(){const a=await mG(e.path);s(!!a),r(!1)}o()},[e]),n||i?S.jsx(p1,{mx:"auto",src:`${Wo}${e.path}`,style:t}):S.jsx(jy,{path:e.path})}function pb({value:e,setValue:t,leftLabel:n="",rightLabel:r="",min:i=-1,max:s=1,step:o=.01,tickInterval:a=.2,center:u=0,onClick:l=()=>{}}){const c=(e-i)/(s-i)*100,f=(u-i)/(s-i)*100,d=e>=u?`linear-gradient(
          to right,
          lightgray 0%,
          lightgray ${f}%,
          #228BE6 ${f}%,
          #228BE6 ${c}%,
          lightgray ${c}%,
          lightgray 100%
        )`:`linear-gradient(
          to right,
          lightgray 0%,
          lightgray ${c}%,
          #228BE6 ${c}%,
          #228BE6 ${f}%,
          lightgray ${f}%,
          lightgray 100%
        )`,h=[];for(let p=u;p<=s;p+=a)h.push(p);for(let p=u-a;p>=i;p-=a)h.push(p);return S.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"600px",margin:"50px auto"},children:[S.jsx("input",{type:"range",min:i,max:s,step:o,value:e,onClick:l,onChange:p=>t(parseFloat(p.target.value)),style:{width:"100%",appearance:"none",height:"8px",borderRadius:"4px",background:d,outline:"none",transition:"background 0.2s"}}),S.jsx("style",{children:`
          input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            background: white;
            border: 3px solid black;
            border-radius: 50%;
            cursor: pointer;
          }
          input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: white;
            border: 3px solid black;
            border-radius: 50%;
            cursor: pointer;
          }
        `}),S.jsx("div",{style:{position:"relative",display:"flex",justifyContent:"space-between",width:"100%",marginTop:"10px",fontSize:"14px",color:"gray"},children:h.map((p,g)=>S.jsxs("span",{style:{position:"absolute",left:`${(p-i)/(s-i)*100}%`,transform:"translateX(-10%)",top:"15px",width:"50px"},children:[" ",S.jsxs(S.Fragment,{children:[p.toFixed(1),S.jsx("br",{}),g===h.length-1&&n,g===3&&r]})]},p))})]})}const Hst=Object.freeze(Object.defineProperty({__proto__:null,default:pb},Symbol.toStringTag,{value:"Module"}));function p0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qst(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iS(e){let t,n,r;e.length!==2?(t=p0,n=(a,u)=>p0(e(a),u),r=(a,u)=>e(a)-u):(t=e===p0||e===qst?e:Wst,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Wst(){return 0}function mbe(e){return e===null?NaN:+e}function*Gst(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const gbe=iS(p0),Uy=gbe.right,Yst=gbe.left;iS(mbe).center;function Kst(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Xst(e,t){const n=Kst(e,t);return n&&Math.sqrt(n)}function Qst(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class ju{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class dse extends Map{constructor(t,n=bbe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(F7(this,t))}has(t){return super.has(F7(this,t))}set(t,n){return super.set(ybe(this,t),n)}delete(t){return super.delete(vbe(this,t))}}class m4 extends Set{constructor(t,n=bbe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(F7(this,t))}add(t){return super.add(ybe(this,t))}delete(t){return super.delete(vbe(this,t))}}function F7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function ybe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function vbe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function bbe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Jst(e,t){return Array.from(t,n=>e[n])}function Zst(e=p0){if(e===p0)return xbe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function xbe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const eot=Math.sqrt(50),tot=Math.sqrt(10),not=Math.sqrt(2);function g4(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=eot?10:s>=tot?5:s>=not?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?g4(e,t,n*2):[a,u,l]}function B7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?g4(t,e,n):g4(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function j7(e,t,n){return t=+t,e=+e,n=+n,g4(e,t,n)[2]}function zy(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?j7(t,e,n):j7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function mb(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function U7(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function wbe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?xbe:Zst(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));wbe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(X2(e,n,t),i(e[r],s)>0&&X2(e,n,r);o<a;){for(X2(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?X2(e,n,a):(++a,X2(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function X2(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function z7(e,t,n){if(e=Float64Array.from(Gst(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return U7(e);if(t>=1)return mb(e);var r,i=(r-1)*t,s=Math.floor(i),o=mb(wbe(e,s).subarray(0,s+1)),a=U7(e.subarray(s+1));return o+(a-o)*(i-s)}}function _be(e,t,n=mbe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function rot(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Ebe(e,t){return z7(e,.5,t)}function*iot(e){for(const t of e)yield*t}function Tbe(e){return Array.from(iot(e))}function Tc(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Sbe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function sot(e,...t){e=new m4(e),t=t.map(oot);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function oot(e){return e instanceof m4?e:new m4(e)}function aot(...e){const t=new m4;for(const n of e)for(const r of n)t.add(r);return t}var uot={value:()=>{}};function gG(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Q3(n)}function Q3(e){this._=e}function lot(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Q3.prototype=gG.prototype={constructor:Q3,on:function(e,t){var n=this._,r=lot(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=cot(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=hse(n[i],e.name,t);else if(t==null)for(i in n)n[i]=hse(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Q3(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function cot(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function hse(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=uot,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var V7="http://www.w3.org/1999/xhtml";const pse={svg:"http://www.w3.org/2000/svg",xhtml:V7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function RL(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),pse.hasOwnProperty(t)?{space:pse[t],local:e}:e}function fot(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===V7&&t.documentElement.namespaceURI===V7?t.createElement(e):t.createElementNS(n,e)}}function dot(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Cbe(e){var t=RL(e);return(t.local?dot:fot)(t)}function hot(){}function yG(e){return e==null?hot:function(){return this.querySelector(e)}}function pot(e){typeof e!="function"&&(e=yG(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Mc(r,this._parents)}function mot(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function got(){return[]}function Abe(e){return e==null?got:function(){return this.querySelectorAll(e)}}function yot(e){return function(){return mot(e.apply(this,arguments))}}function vot(e){typeof e=="function"?e=yot(e):e=Abe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Mc(r,i)}function kbe(e){return function(){return this.matches(e)}}function Ibe(e){return function(t){return t.matches(e)}}var bot=Array.prototype.find;function xot(e){return function(){return bot.call(this.children,e)}}function wot(){return this.firstElementChild}function _ot(e){return this.select(e==null?wot:xot(typeof e=="function"?e:Ibe(e)))}var Eot=Array.prototype.filter;function Tot(){return Array.from(this.children)}function Sot(e){return function(){return Eot.call(this.children,e)}}function Cot(e){return this.selectAll(e==null?Tot:Sot(typeof e=="function"?e:Ibe(e)))}function Aot(e){typeof e!="function"&&(e=kbe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Mc(r,this._parents)}function Rbe(e){return new Array(e.length)}function kot(){return new Mc(this._enter||this._groups.map(Rbe),this._parents)}function y4(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}y4.prototype={constructor:y4,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Iot(e){return function(){return e}}function Rot(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new y4(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Pot(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new y4(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Dot(e){return e.__data__}function Not(e,t){if(!arguments.length)return Array.from(this,Dot);var n=t?Pot:Rot,r=this._parents,i=this._groups;typeof e!="function"&&(e=Iot(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Oot(e.call(c,c&&c.__data__,l,r)),p=h.length,g=a[l]=new Array(p),y=o[l]=new Array(p),x=u[l]=new Array(d);n(c,f,g,y,x,h,t);for(var b=0,_=0,E,T;b<p;++b)if(E=g[b]){for(b>=_&&(_=b+1);!(T=y[_])&&++_<p;);E._next=T||null}}return o=new Mc(o,r),o._enter=a,o._exit=u,o}function Oot(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $ot(){return new Mc(this._exit||this._groups.map(Rbe),this._parents)}function Lot(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Mot(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Mc(a,this._parents)}function Fot(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Bot(e){e||(e=jot);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Mc(i,this._parents).order()}function jot(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Uot(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function zot(){return Array.from(this)}function Vot(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Hot(){let e=0;for(const t of this)++e;return e}function qot(){return!this.node()}function Wot(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Got(e){return function(){this.removeAttribute(e)}}function Yot(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Kot(e,t){return function(){this.setAttribute(e,t)}}function Xot(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Qot(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Jot(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Zot(e,t){var n=RL(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Yot:Got:typeof t=="function"?n.local?Jot:Qot:n.local?Xot:Kot)(n,t))}function Pbe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function eat(e){return function(){this.style.removeProperty(e)}}function tat(e,t,n){return function(){this.style.setProperty(e,t,n)}}function nat(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function rat(e,t,n){return arguments.length>1?this.each((t==null?eat:typeof t=="function"?nat:tat)(e,t,n??"")):BE(this.node(),e)}function BE(e,t){return e.style.getPropertyValue(t)||Pbe(e).getComputedStyle(e,null).getPropertyValue(t)}function iat(e){return function(){delete this[e]}}function sat(e,t){return function(){this[e]=t}}function oat(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function aat(e,t){return arguments.length>1?this.each((t==null?iat:typeof t=="function"?oat:sat)(e,t)):this.node()[e]}function Dbe(e){return e.trim().split(/^|\s+/)}function vG(e){return e.classList||new Nbe(e)}function Nbe(e){this._node=e,this._names=Dbe(e.getAttribute("class")||"")}Nbe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Obe(e,t){for(var n=vG(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function $be(e,t){for(var n=vG(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function uat(e){return function(){Obe(this,e)}}function lat(e){return function(){$be(this,e)}}function cat(e,t){return function(){(t.apply(this,arguments)?Obe:$be)(this,e)}}function fat(e,t){var n=Dbe(e+"");if(arguments.length<2){for(var r=vG(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?cat:t?uat:lat)(n,t))}function dat(){this.textContent=""}function hat(e){return function(){this.textContent=e}}function pat(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function mat(e){return arguments.length?this.each(e==null?dat:(typeof e=="function"?pat:hat)(e)):this.node().textContent}function gat(){this.innerHTML=""}function yat(e){return function(){this.innerHTML=e}}function vat(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function bat(e){return arguments.length?this.each(e==null?gat:(typeof e=="function"?vat:yat)(e)):this.node().innerHTML}function xat(){this.nextSibling&&this.parentNode.appendChild(this)}function wat(){return this.each(xat)}function _at(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Eat(){return this.each(_at)}function Tat(e){var t=typeof e=="function"?e:Cbe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Sat(){return null}function Cat(e,t){var n=typeof e=="function"?e:Cbe(e),r=t==null?Sat:typeof t=="function"?t:yG(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Aat(){var e=this.parentNode;e&&e.removeChild(this)}function kat(){return this.each(Aat)}function Iat(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rat(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pat(e){return this.select(e?Rat:Iat)}function Dat(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Nat(e){return function(t){e.call(this,t,this.__data__)}}function Oat(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function $at(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Lat(e,t,n){return function(){var r=this.__on,i,s=Nat(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Mat(e,t,n){var r=Oat(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Lat:$at,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Lbe(e,t,n){var r=Pbe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Fat(e,t){return function(){return Lbe(this,e,t)}}function Bat(e,t){return function(){return Lbe(this,e,t.apply(this,arguments))}}function jat(e,t){return this.each((typeof t=="function"?Bat:Fat)(e,t))}function*Uat(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Mbe=[null];function Mc(e,t){this._groups=e,this._parents=t}function BI(){return new Mc([[document.documentElement]],Mbe)}function zat(){return this}Mc.prototype=BI.prototype={constructor:Mc,select:pot,selectAll:vot,selectChild:_ot,selectChildren:Cot,filter:Aot,data:Not,enter:kot,exit:$ot,join:Lot,merge:Mot,selection:zat,order:Fot,sort:Bot,call:Uot,nodes:zot,node:Vot,size:Hot,empty:qot,each:Wot,attr:Zot,style:rat,property:aat,classed:fat,text:mat,html:bat,raise:wat,lower:Eat,append:Tat,insert:Cat,remove:kat,clone:Pat,datum:Dat,on:Mat,dispatch:jat,[Symbol.iterator]:Uat};function H7(e){return typeof e=="string"?new Mc([[document.querySelector(e)]],[document.documentElement]):new Mc([[e]],Mbe)}function Vat(e){let t;for(;t=e.sourceEvent;)e=t;return e}function q7(e,t){if(e=Vat(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function sS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function x1(){}var Db=.7,jE=1/Db,uE="\\s*([+-]?\\d+)\\s*",bk="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hat=/^#([0-9a-f]{3,8})$/,qat=new RegExp(`^rgb\\(${uE},${uE},${uE}\\)$`),Wat=new RegExp(`^rgb\\(${dp},${dp},${dp}\\)$`),Gat=new RegExp(`^rgba\\(${uE},${uE},${uE},${bk}\\)$`),Yat=new RegExp(`^rgba\\(${dp},${dp},${dp},${bk}\\)$`),Kat=new RegExp(`^hsl\\(${bk},${dp},${dp}\\)$`),Xat=new RegExp(`^hsla\\(${bk},${dp},${dp},${bk}\\)$`),mse={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sS(x1,Nb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gse,formatHex:gse,formatHex8:Qat,formatHsl:Jat,formatRgb:yse,toString:yse});function gse(){return this.rgb().formatHex()}function Qat(){return this.rgb().formatHex8()}function Jat(){return Fbe(this).formatHsl()}function yse(){return this.rgb().formatRgb()}function Nb(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Hat.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?vse(t):n===3?new Bo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?gD(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?gD(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qat.exec(e))?new Bo(t[1],t[2],t[3],1):(t=Wat.exec(e))?new Bo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Gat.exec(e))?gD(t[1],t[2],t[3],t[4]):(t=Yat.exec(e))?gD(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Kat.exec(e))?wse(t[1],t[2]/100,t[3]/100,1):(t=Xat.exec(e))?wse(t[1],t[2]/100,t[3]/100,t[4]):mse.hasOwnProperty(e)?vse(mse[e]):e==="transparent"?new Bo(NaN,NaN,NaN,0):null}function vse(e){return new Bo(e>>16&255,e>>8&255,e&255,1)}function gD(e,t,n,r){return r<=0&&(e=t=n=NaN),new Bo(e,t,n,r)}function bG(e){return e instanceof x1||(e=Nb(e)),e?(e=e.rgb(),new Bo(e.r,e.g,e.b,e.opacity)):new Bo}function Vy(e,t,n,r){return arguments.length===1?bG(e):new Bo(e,t,n,r??1)}function Bo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}sS(Bo,Vy,jI(x1,{brighter(e){return e=e==null?jE:Math.pow(jE,e),new Bo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Db:Math.pow(Db,e),new Bo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Bo(gb(this.r),gb(this.g),gb(this.b),v4(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bse,formatHex:bse,formatHex8:Zat,formatRgb:xse,toString:xse}));function bse(){return`#${ob(this.r)}${ob(this.g)}${ob(this.b)}`}function Zat(){return`#${ob(this.r)}${ob(this.g)}${ob(this.b)}${ob((isNaN(this.opacity)?1:this.opacity)*255)}`}function xse(){const e=v4(this.opacity);return`${e===1?"rgb(":"rgba("}${gb(this.r)}, ${gb(this.g)}, ${gb(this.b)}${e===1?")":`, ${e})`}`}function v4(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gb(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ob(e){return e=gb(e),(e<16?"0":"")+e.toString(16)}function wse(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ad(e,t,n,r)}function Fbe(e){if(e instanceof Ad)return new Ad(e.h,e.s,e.l,e.opacity);if(e instanceof x1||(e=Nb(e)),!e)return new Ad;if(e instanceof Ad)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Ad(o,a,u,e.opacity)}function b4(e,t,n,r){return arguments.length===1?Fbe(e):new Ad(e,t,n,r??1)}function Ad(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}sS(Ad,b4,jI(x1,{brighter(e){return e=e==null?jE:Math.pow(jE,e),new Ad(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Db:Math.pow(Db,e),new Ad(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Bo(u9(e>=240?e-240:e+120,i,r),u9(e,i,r),u9(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ad(_se(this.h),yD(this.s),yD(this.l),v4(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=v4(this.opacity);return`${e===1?"hsl(":"hsla("}${_se(this.h)}, ${yD(this.s)*100}%, ${yD(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _se(e){return e=(e||0)%360,e<0?e+360:e}function yD(e){return Math.max(0,Math.min(1,e||0))}function u9(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Bbe=Math.PI/180,jbe=180/Math.PI,x4=18,Ube=.96422,zbe=1,Vbe=.82521,Hbe=4/29,lE=6/29,qbe=3*lE*lE,eut=lE*lE*lE;function Wbe(e){if(e instanceof hp)return new hp(e.l,e.a,e.b,e.opacity);if(e instanceof n0)return Gbe(e);e instanceof Bo||(e=bG(e));var t=d9(e.r),n=d9(e.g),r=d9(e.b),i=l9((.2225045*t+.7168786*n+.0606169*r)/zbe),s,o;return t===n&&n===r?s=o=i:(s=l9((.4360747*t+.3850649*n+.1430804*r)/Ube),o=l9((.0139322*t+.0971045*n+.7141733*r)/Vbe)),new hp(116*i-16,500*(s-i),200*(i-o),e.opacity)}function w4(e,t,n,r){return arguments.length===1?Wbe(e):new hp(e,t,n,r??1)}function hp(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}sS(hp,w4,jI(x1,{brighter(e){return new hp(this.l+x4*(e??1),this.a,this.b,this.opacity)},darker(e){return new hp(this.l-x4*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Ube*c9(t),e=zbe*c9(e),n=Vbe*c9(n),new Bo(f9(3.1338561*t-1.6168667*e-.4906146*n),f9(-.9787684*t+1.9161415*e+.033454*n),f9(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function l9(e){return e>eut?Math.pow(e,1/3):e/qbe+Hbe}function c9(e){return e>lE?e*e*e:qbe*(e-Hbe)}function f9(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function d9(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function tut(e){if(e instanceof n0)return new n0(e.h,e.c,e.l,e.opacity);if(e instanceof hp||(e=Wbe(e)),e.a===0&&e.b===0)return new n0(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*jbe;return new n0(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function _4(e,t,n,r){return arguments.length===1?tut(e):new n0(e,t,n,r??1)}function n0(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Gbe(e){if(isNaN(e.h))return new hp(e.l,0,0,e.opacity);var t=e.h*Bbe;return new hp(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}sS(n0,_4,jI(x1,{brighter(e){return new n0(this.h,this.c,this.l+x4*(e??1),this.opacity)},darker(e){return new n0(this.h,this.c,this.l-x4*(e??1),this.opacity)},rgb(){return Gbe(this).rgb()}}));var Ybe=-.14861,xG=1.78277,wG=-.29227,PL=-.90649,xk=1.97294,Ese=xk*PL,Tse=xk*xG,Sse=xG*wG-PL*Ybe;function nut(e){if(e instanceof yb)return new yb(e.h,e.s,e.l,e.opacity);e instanceof Bo||(e=bG(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Sse*r+Ese*t-Tse*n)/(Sse+Ese-Tse),s=r-i,o=(xk*(n-i)-wG*s)/PL,a=Math.sqrt(o*o+s*s)/(xk*i*(1-i)),u=a?Math.atan2(o,s)*jbe-120:NaN;return new yb(u<0?u+360:u,a,i,e.opacity)}function W7(e,t,n,r){return arguments.length===1?nut(e):new yb(e,t,n,r??1)}function yb(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}sS(yb,W7,jI(x1,{brighter(e){return e=e==null?jE:Math.pow(jE,e),new yb(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Db:Math.pow(Db,e),new yb(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Bbe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Bo(255*(t+n*(Ybe*r+xG*i)),255*(t+n*(wG*r+PL*i)),255*(t+n*(xk*r)),this.opacity)}}));function Kbe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function Xbe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return Kbe((n-r/t)*t,o,i,s,a)}}function Qbe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return Kbe((n-r/t)*t,i,s,o,a)}}const DL=e=>()=>e;function Jbe(e,t){return function(n){return e+n*t}}function rut(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function NL(e,t){var n=t-e;return n?Jbe(e,n>180||n<-180?n-360*Math.round(n/360):n):DL(isNaN(e)?t:e)}function iut(e){return(e=+e)==1?jo:function(t,n){return n-t?rut(t,n,e):DL(isNaN(t)?n:t)}}function jo(e,t){var n=t-e;return n?Jbe(e,n):DL(isNaN(e)?t:e)}const wk=function e(t){var n=iut(t);function r(i,s){var o=n((i=Vy(i)).r,(s=Vy(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=jo(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Zbe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Vy(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var sut=Zbe(Xbe),out=Zbe(Qbe);function _G(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function exe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function aut(e,t){return(exe(t)?_G:txe)(e,t)}function txe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=w1(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function nxe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function yf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function rxe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=w1(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var G7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,h9=new RegExp(G7.source,"g");function uut(e){return function(){return e}}function lut(e){return function(t){return e(t)+""}}function EG(e,t){var n=G7.lastIndex=h9.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=G7.exec(e))&&(i=h9.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:yf(r,i)})),n=h9.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?lut(u[0].x):uut(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function w1(e,t){var n=typeof t,r;return t==null||n==="boolean"?DL(t):(n==="number"?yf:n==="string"?(r=Nb(t))?(t=r,wk):EG:t instanceof Nb?wk:t instanceof Date?nxe:exe(t)?_G:Array.isArray(t)?txe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?rxe:yf)(e,t)}function cut(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function fut(e,t){var n=NL(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function UI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Cse=180/Math.PI,Y7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ixe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Cse,skewX:Math.atan(u)*Cse,scaleX:o,scaleY:a}}var vD;function dut(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Y7:ixe(t.a,t.b,t.c,t.d,t.e,t.f)}function hut(e){return e==null||(vD||(vD=document.createElementNS("http://www.w3.org/2000/svg","g")),vD.setAttribute("transform",e),!(e=vD.transform.baseVal.consolidate()))?Y7:(e=e.matrix,ixe(e.a,e.b,e.c,e.d,e.e,e.f))}function sxe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:yf(l,f)},{i:g-2,x:yf(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:yf(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:yf(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:yf(l,f)},{i:g-2,x:yf(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,g=d.length,y;++p<g;)f[(y=d[p]).i]=y.x(h);return f.join("")}}}var oxe=sxe(dut,"px, ","px)","deg)"),axe=sxe(hut,", ",")",")"),put=1e-12;function Ase(e){return((e=Math.exp(e))+1/e)/2}function mut(e){return((e=Math.exp(e))-1/e)/2}function gut(e){return((e=Math.exp(2*e))-1)/(e+1)}const yut=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,g=h*h+p*p,y,x;if(g<put)x=Math.log(d/l)/t,y=function(I){return[a+I*h,u+I*p,l*Math.exp(t*I*x)]};else{var b=Math.sqrt(g),_=(d*d-l*l+r*g)/(2*l*n*b),E=(d*d-l*l-r*g)/(2*d*n*b),T=Math.log(Math.sqrt(_*_+1)-_),k=Math.log(Math.sqrt(E*E+1)-E);x=(k-T)/t,y=function(I){var R=I*x,D=Ase(T),L=l/(n*b)*(D*gut(t*R+T)-mut(T));return[a+L*h,u+L*p,l*D/Ase(t*R+T)]}}return y.duration=x*1e3*t/Math.SQRT2,y}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function uxe(e){return function(t,n){var r=e((t=b4(t)).h,(n=b4(n)).h),i=jo(t.s,n.s),s=jo(t.l,n.l),o=jo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const vut=uxe(NL);var but=uxe(jo);function xut(e,t){var n=jo((e=w4(e)).l,(t=w4(t)).l),r=jo(e.a,t.a),i=jo(e.b,t.b),s=jo(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function lxe(e){return function(t,n){var r=e((t=_4(t)).h,(n=_4(n)).h),i=jo(t.c,n.c),s=jo(t.l,n.l),o=jo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const wut=lxe(NL);var _ut=lxe(jo);function cxe(e){return function t(n){n=+n;function r(i,s){var o=e((i=W7(i)).h,(s=W7(s)).h),a=jo(i.s,s.s),u=jo(i.l,s.l),l=jo(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Eut=cxe(NL);var Tut=cxe(jo);function TG(e,t){t===void 0&&(t=e,e=w1);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Sut(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Cut=Object.freeze(Object.defineProperty({__proto__:null,interpolate:w1,interpolateArray:aut,interpolateBasis:Xbe,interpolateBasisClosed:Qbe,interpolateCubehelix:Eut,interpolateCubehelixLong:Tut,interpolateDate:nxe,interpolateDiscrete:cut,interpolateHcl:wut,interpolateHclLong:_ut,interpolateHsl:vut,interpolateHslLong:but,interpolateHue:fut,interpolateLab:xut,interpolateNumber:yf,interpolateNumberArray:_G,interpolateObject:rxe,interpolateRgb:wk,interpolateRgbBasis:sut,interpolateRgbBasisClosed:out,interpolateRound:UI,interpolateString:EG,interpolateTransformCss:oxe,interpolateTransformSvg:axe,interpolateZoom:yut,piecewise:TG,quantize:Sut},Symbol.toStringTag,{value:"Module"}));var UE=0,MC=0,Q2=0,fxe=1e3,E4,FC,T4=0,Ob=0,OL=0,_k=typeof performance=="object"&&performance.now?performance:Date,dxe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $L(){return Ob||(dxe(Aut),Ob=_k.now()+OL)}function Aut(){Ob=0}function Ek(){this._call=this._time=this._next=null}Ek.prototype=SG.prototype={constructor:Ek,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?$L():+n)+(t==null?0:+t),!this._next&&FC!==this&&(FC?FC._next=this:E4=this,FC=this),this._call=e,this._time=n,K7()},stop:function(){this._call&&(this._call=null,this._time=1/0,K7())}};function SG(e,t,n){var r=new Ek;return r.restart(e,t,n),r}function kut(){$L(),++UE;for(var e=E4,t;e;)(t=Ob-e._time)>=0&&e._call.call(void 0,t),e=e._next;--UE}function kse(){Ob=(T4=_k.now())+OL,UE=MC=0;try{kut()}finally{UE=0,Rut(),Ob=0}}function Iut(){var e=_k.now(),t=e-T4;t>fxe&&(OL-=t,T4=e)}function Rut(){for(var e,t=E4,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:E4=n);FC=e,K7(r)}function K7(e){if(!UE){MC&&(MC=clearTimeout(MC));var t=e-Ob;t>24?(e<1/0&&(MC=setTimeout(kse,e-_k.now()-OL)),Q2&&(Q2=clearInterval(Q2))):(Q2||(T4=_k.now(),Q2=setInterval(Iut,fxe)),UE=1,dxe(kse))}}function Ise(e,t,n){var r=new Ek;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Put(e,t,n){var r=new Ek,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?$L():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Dut=gG("start","end","cancel","interrupt"),Nut=[],hxe=0,Rse=1,X7=2,J3=3,Pse=4,Q7=5,Z3=6;function LL(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Out(e,n,{name:t,index:r,group:i,on:Dut,tween:Nut,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:hxe})}function CG(e,t){var n=sh(e,t);if(n.state>hxe)throw new Error("too late; already scheduled");return n}function Hp(e,t){var n=sh(e,t);if(n.state>J3)throw new Error("too late; already running");return n}function sh(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Out(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=SG(s,0,n.time);function s(l){n.state=Rse,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Rse)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===J3)return Ise(o);h.state===Pse?(h.state=Z3,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=Z3,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Ise(function(){n.state===J3&&(n.state=Pse,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=X7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===X7){for(n.state=J3,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Q7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===Q7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Z3,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function $ut(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>X7&&r.state<Q7,r.state=Z3,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Lut(e){return this.each(function(){$ut(this,e)})}function Mut(e,t){var n,r;return function(){var i=Hp(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Fut(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Hp(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function But(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=sh(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Mut:Fut)(n,e,t))}function AG(e,t,n){var r=e._id;return e.each(function(){var i=Hp(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return sh(i,r).value[t]}}function pxe(e,t){var n;return(typeof t=="number"?yf:t instanceof Nb?wk:(n=Nb(t))?(t=n,wk):EG)(e,t)}function jut(e){return function(){this.removeAttribute(e)}}function Uut(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zut(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Vut(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Hut(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function qut(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Wut(e,t){var n=RL(e),r=n==="transform"?axe:pxe;return this.attrTween(e,typeof t=="function"?(n.local?qut:Hut)(n,r,AG(this,"attr."+e,t)):t==null?(n.local?Uut:jut)(n):(n.local?Vut:zut)(n,r,t))}function Gut(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Yut(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Kut(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Yut(e,s)),n}return i._value=t,i}function Xut(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Gut(e,s)),n}return i._value=t,i}function Qut(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=RL(e);return this.tween(n,(r.local?Kut:Xut)(r,t))}function Jut(e,t){return function(){CG(this,e).delay=+t.apply(this,arguments)}}function Zut(e,t){return t=+t,function(){CG(this,e).delay=t}}function elt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jut:Zut)(t,e)):sh(this.node(),t).delay}function tlt(e,t){return function(){Hp(this,e).duration=+t.apply(this,arguments)}}function nlt(e,t){return t=+t,function(){Hp(this,e).duration=t}}function rlt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tlt:nlt)(t,e)):sh(this.node(),t).duration}function ilt(e,t){if(typeof t!="function")throw new Error;return function(){Hp(this,e).ease=t}}function slt(e){var t=this._id;return arguments.length?this.each(ilt(t,e)):sh(this.node(),t).ease}function olt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Hp(this,e).ease=n}}function alt(e){if(typeof e!="function")throw new Error;return this.each(olt(this._id,e))}function ult(e){typeof e!="function"&&(e=kbe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new O0(r,this._parents,this._name,this._id)}function llt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new O0(o,this._parents,this._name,this._id)}function clt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function flt(e,t,n){var r,i,s=clt(t)?CG:Hp;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function dlt(e,t){var n=this._id;return arguments.length<2?sh(this.node(),n).on.on(e):this.each(flt(n,e,t))}function hlt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function plt(){return this.on("end.remove",hlt(this._id))}function mlt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=yG(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,LL(l[d],t,n,d,l,sh(c,n)));return new O0(s,this._parents,t,n)}function glt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Abe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=sh(c,n),g=0,y=d.length;g<y;++g)(h=d[g])&&LL(h,t,n,g,d,p);s.push(d),o.push(c)}return new O0(s,o,t,n)}var ylt=BI.prototype.constructor;function vlt(){return new ylt(this._groups,this._parents)}function blt(e,t){var n,r,i;return function(){var s=BE(this,e),o=(this.style.removeProperty(e),BE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function mxe(e){return function(){this.style.removeProperty(e)}}function xlt(e,t,n){var r,i=n+"",s;return function(){var o=BE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function wlt(e,t,n){var r,i,s;return function(){var o=BE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),BE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function _lt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Hp(this,e),l=u.on,c=u.value[s]==null?a||(a=mxe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Elt(e,t,n){var r=(e+="")=="transform"?oxe:pxe;return t==null?this.styleTween(e,blt(e,r)).on("end.style."+e,mxe(e)):typeof t=="function"?this.styleTween(e,wlt(e,r,AG(this,"style."+e,t))).each(_lt(this._id,e)):this.styleTween(e,xlt(e,r,t),n).on("end.style."+e,null)}function Tlt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Slt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Tlt(e,o,n)),r}return s._value=t,s}function Clt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Slt(e,t,n??""))}function Alt(e){return function(){this.textContent=e}}function klt(e){return function(){var t=e(this);this.textContent=t??""}}function Ilt(e){return this.tween("text",typeof e=="function"?klt(AG(this,"text",e)):Alt(e==null?"":e+""))}function Rlt(e){return function(t){this.textContent=e.call(this,t)}}function Plt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Rlt(i)),t}return r._value=e,r}function Dlt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Plt(e))}function Nlt(){for(var e=this._name,t=this._id,n=gxe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=sh(u,t);LL(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new O0(r,this._parents,e,n)}function Olt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Hp(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var $lt=0;function O0(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function gxe(){return++$lt}var Om=BI.prototype;O0.prototype={constructor:O0,select:mlt,selectAll:glt,selectChild:Om.selectChild,selectChildren:Om.selectChildren,filter:ult,merge:llt,selection:vlt,transition:Nlt,call:Om.call,nodes:Om.nodes,node:Om.node,size:Om.size,empty:Om.empty,each:Om.each,on:dlt,attr:Wut,attrTween:Qut,style:Elt,styleTween:Clt,text:Ilt,textTween:Dlt,remove:plt,tween:But,delay:elt,duration:rlt,ease:slt,easeVarying:alt,end:Olt,[Symbol.iterator]:Om[Symbol.iterator]};function Llt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Mlt={time:null,delay:0,duration:250,ease:Llt};function Flt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Blt(e){var t,n;e instanceof O0?(t=e._id,e=e._name):(t=gxe(),(n=Mlt).time=$L(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&LL(u,e,t,l,o,n||Flt(u,t));return new O0(r,this._parents,e,t)}BI.prototype.interrupt=Lut;BI.prototype.transition=Blt;const J7=Math.PI,Z7=2*J7,Uv=1e-6,jlt=Z7-Uv;function yxe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ult(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return yxe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let kG=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?yxe:Ult(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Uv)if(!(Math.abs(f*u-l*c)>Uv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,g=u*u+l*l,y=h*h+p*p,x=Math.sqrt(g),b=Math.sqrt(d),_=s*Math.tan((J7-Math.acos((g+d-y)/(2*x*b)))/2),E=_/b,T=_/x;Math.abs(E-1)>Uv&&this._append`L${t+E*c},${n+E*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+T*u},${this._y1=n+T*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Uv||Math.abs(this._y1-c)>Uv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%Z7+Z7),d>jlt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Uv&&this._append`A${r},${r},0,${+(d>=J7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function ML(){return new kG}ML.prototype=kG.prototype;const m0=11102230246251565e-32,Va=134217729,zlt=(3+8*m0)*m0;function p9(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Vlt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function zI(e){return new Float64Array(e)}const Hlt=(3+16*m0)*m0,qlt=(2+12*m0)*m0,Wlt=(9+64*m0)*m0*m0,h_=zI(4),Dse=zI(8),Nse=zI(12),Ose=zI(16),Cu=zI(4);function Glt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,g,y,x,b,_,E,T,k,I,R;const D=e-i,L=n-i,M=t-s,z=r-s;E=D*z,d=Va*D,h=d-(d-D),p=D-h,d=Va*z,g=d-(d-z),y=z-g,T=p*y-(E-h*g-p*g-h*y),k=M*L,d=Va*M,h=d-(d-M),p=M-h,d=Va*L,g=d-(d-L),y=L-g,I=p*y-(k-h*g-p*g-h*y),x=T-I,f=T-x,h_[0]=T-(x+f)+(f-I),b=E+x,f=b-E,_=E-(b-f)+(x-f),x=_-k,f=_-x,h_[1]=_-(x+f)+(f-k),R=b+x,f=R-b,h_[2]=b-(R-f)+(x-f),h_[3]=R;let F=Vlt(4,h_),H=qlt*o;if(F>=H||-F>=H||(f=e-D,a=e-(D+f)+(f-i),f=n-L,l=n-(L+f)+(f-i),f=t-M,u=t-(M+f)+(f-s),f=r-z,c=r-(z+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(H=Wlt*o+zlt*Math.abs(F),F+=D*c+z*a-(M*l+L*u),F>=H||-F>=H))return F;E=a*z,d=Va*a,h=d-(d-a),p=a-h,d=Va*z,g=d-(d-z),y=z-g,T=p*y-(E-h*g-p*g-h*y),k=u*L,d=Va*u,h=d-(d-u),p=u-h,d=Va*L,g=d-(d-L),y=L-g,I=p*y-(k-h*g-p*g-h*y),x=T-I,f=T-x,Cu[0]=T-(x+f)+(f-I),b=E+x,f=b-E,_=E-(b-f)+(x-f),x=_-k,f=_-x,Cu[1]=_-(x+f)+(f-k),R=b+x,f=R-b,Cu[2]=b-(R-f)+(x-f),Cu[3]=R;const Q=p9(4,h_,4,Cu,Dse);E=D*c,d=Va*D,h=d-(d-D),p=D-h,d=Va*c,g=d-(d-c),y=c-g,T=p*y-(E-h*g-p*g-h*y),k=M*l,d=Va*M,h=d-(d-M),p=M-h,d=Va*l,g=d-(d-l),y=l-g,I=p*y-(k-h*g-p*g-h*y),x=T-I,f=T-x,Cu[0]=T-(x+f)+(f-I),b=E+x,f=b-E,_=E-(b-f)+(x-f),x=_-k,f=_-x,Cu[1]=_-(x+f)+(f-k),R=b+x,f=R-b,Cu[2]=b-(R-f)+(x-f),Cu[3]=R;const J=p9(Q,Dse,4,Cu,Nse);E=a*c,d=Va*a,h=d-(d-a),p=a-h,d=Va*c,g=d-(d-c),y=c-g,T=p*y-(E-h*g-p*g-h*y),k=u*l,d=Va*u,h=d-(d-u),p=u-h,d=Va*l,g=d-(d-l),y=l-g,I=p*y-(k-h*g-p*g-h*y),x=T-I,f=T-x,Cu[0]=T-(x+f)+(f-I),b=E+x,f=b-E,_=E-(b-f)+(x-f),x=_-k,f=_-x,Cu[1]=_-(x+f)+(f-k),R=b+x,f=R-b,Cu[2]=b-(R-f)+(x-f),Cu[3]=R;const ne=p9(J,Nse,4,Cu,Ose);return Ose[ne-1]}function bD(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=Hlt*l?u:-Glt(e,t,n,r,i,s,l)}const $se=Math.pow(2,-52),xD=new Uint32Array(512);class S4{static from(t,n=Jlt,r=Zlt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new S4(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let D=0;D<o;D++){const L=t[2*D],M=t[2*D+1];L<a&&(a=L),M<u&&(u=M),L>l&&(l=L),M>c&&(c=M),this._ids[D]=D}const f=(a+l)/2,d=(u+c)/2;let h,p,g;for(let D=0,L=1/0;D<o;D++){const M=m9(f,d,t[2*D],t[2*D+1]);M<L&&(h=D,L=M)}const y=t[2*h],x=t[2*h+1];for(let D=0,L=1/0;D<o;D++){if(D===h)continue;const M=m9(y,x,t[2*D],t[2*D+1]);M<L&&M>0&&(p=D,L=M)}let b=t[2*p],_=t[2*p+1],E=1/0;for(let D=0;D<o;D++){if(D===h||D===p)continue;const L=Xlt(y,x,b,_,t[2*D],t[2*D+1]);L<E&&(g=D,E=L)}let T=t[2*g],k=t[2*g+1];if(E===1/0){for(let M=0;M<o;M++)this._dists[M]=t[2*M]-t[0]||t[2*M+1]-t[1];H_(this._ids,this._dists,0,o-1);const D=new Uint32Array(o);let L=0;for(let M=0,z=-1/0;M<o;M++){const F=this._ids[M],H=this._dists[F];H>z&&(D[L++]=F,z=H)}this.hull=D.subarray(0,L),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(bD(y,x,b,_,T,k)<0){const D=p,L=b,M=_;p=g,b=T,_=k,g=D,T=L,k=M}const I=Qlt(y,x,b,_,T,k);this._cx=I.x,this._cy=I.y;for(let D=0;D<o;D++)this._dists[D]=m9(t[2*D],t[2*D+1],I.x,I.y);H_(this._ids,this._dists,0,o-1),this._hullStart=h;let R=3;r[h]=n[g]=p,r[p]=n[h]=g,r[g]=n[p]=h,i[h]=0,i[p]=1,i[g]=2,s.fill(-1),s[this._hashKey(y,x)]=h,s[this._hashKey(b,_)]=p,s[this._hashKey(T,k)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let D=0,L,M;D<this._ids.length;D++){const z=this._ids[D],F=t[2*z],H=t[2*z+1];if(D>0&&Math.abs(F-L)<=$se&&Math.abs(H-M)<=$se||(L=F,M=H,z===h||z===p||z===g))continue;let Q=0;for(let q=0,U=this._hashKey(F,H);q<this._hashSize&&(Q=s[(U+q)%this._hashSize],!(Q!==-1&&Q!==r[Q]));q++);Q=n[Q];let J=Q,ne;for(;ne=r[J],bD(F,H,t[2*J],t[2*J+1],t[2*ne],t[2*ne+1])>=0;)if(J=ne,J===Q){J=-1;break}if(J===-1)continue;let Z=this._addTriangle(J,z,r[J],-1,-1,i[J]);i[z]=this._legalize(Z+2),i[J]=Z,R++;let ie=r[J];for(;ne=r[ie],bD(F,H,t[2*ie],t[2*ie+1],t[2*ne],t[2*ne+1])<0;)Z=this._addTriangle(ie,z,ne,i[z],-1,i[ie]),i[z]=this._legalize(Z+2),r[ie]=ie,R--,ie=ne;if(J===Q)for(;ne=n[J],bD(F,H,t[2*ne],t[2*ne+1],t[2*J],t[2*J+1])<0;)Z=this._addTriangle(ne,z,J,-1,i[J],i[ne]),this._legalize(Z+2),i[ne]=Z,r[J]=J,R--,J=ne;this._hullStart=n[z]=J,r[J]=n[ie]=z,r[z]=ie,s[this._hashKey(F,H)]=z,s[this._hashKey(t[2*J],t[2*J+1])]=J}this.hull=new Uint32Array(R);for(let D=0,L=this._hullStart;D<R;D++)this.hull[D]=L,L=r[L];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Ylt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=xD[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],g=n[f];if(Klt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const x=r[f];if(x===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,x),this._link(a,r[o]),this._link(o,f);const b=l+(a+1)%3;s<xD.length&&(xD[s++]=b)}else{if(s===0)break;t=xD[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Ylt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function m9(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Klt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,g=c*c+f*f,y=d*d+h*h;return u*(f*y-g*h)-l*(c*y-g*d)+p*(c*h-f*d)<0}function Xlt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function Qlt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function H_(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;J2(e,i,s),t[e[n]]>t[e[r]]&&J2(e,n,r),t[e[s]]>t[e[r]]&&J2(e,s,r),t[e[n]]>t[e[s]]&&J2(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;J2(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(H_(e,t,s,r),H_(e,t,n,o-1)):(H_(e,t,n,o-1),H_(e,t,s,r))}}function J2(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Jlt(e){return e[0]}function Zlt(e){return e[1]}const Lse=1e-6;class ab{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Lse||Math.abs(this._y1-s)>Lse)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class eU{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let ect=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,y=0,x=r.length,b,_;g<x;g+=3,y+=2){const E=r[g]*2,T=r[g+1]*2,k=r[g+2]*2,I=t[E],R=t[E+1],D=t[T],L=t[T+1],M=t[k],z=t[k+1],F=D-I,H=L-R,Q=M-I,J=z-R,ne=(F*J-H*Q)*2;if(Math.abs(ne)<1e-9){if(s===void 0){s=o=0;for(const ie of n)s+=t[ie*2],o+=t[ie*2+1];s/=n.length,o/=n.length}const Z=1e9*Math.sign((s-I)*J-(o-R)*Q);b=(I+M)/2-Z*J,_=(R+z)/2+Z*Q}else{const Z=1/ne,ie=F*F+H*H,q=Q*Q+J*J;b=I+(J*ie-H*q)*Z,_=R+(F*q-Q*ie)*Z}a[y]=b,a[y+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let g=0;g<n.length;++g)u=n[g],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new ab:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=o[h],y=o[h+1],x=o[p],b=o[p+1];this._renderSegment(g,y,x,b,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new ab:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new ab:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new eU;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,g,y,x,b;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[g,y,x,b]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[x,b,g,y]=p,f=d,d=this._edgecode(g,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,y):i=[g,y]}f=d,d=this._edgecode(x,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(x,b):i=[x,b]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const tct=2*Math.PI,p_=Math.pow;function nct(e){return e[0]}function rct(e){return e[1]}function ict(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function sct(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class IG{static from(t,n=nct,r=rct,i){return new IG("length"in t?oct(t,n,r,i):Float64Array.from(act(t,n,r,i)))}constructor(t){this._delaunator=new S4(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&ict(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=sct(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new S4(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new ect(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=p_(n-l[t*2],2)+p_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const g=p_(n-l[p*2],2)+p_(r-l[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&p_(n-l[h*2],2)+p_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new ab:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new ab:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,tct)}return r&&r.value()}renderHull(t){const n=t==null?t=new ab:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new eU;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new ab:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new eU;return this.renderTriangle(t,n),n.value()}}function oct(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*act(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Mse={},g9={},y9=34,Z2=10,v9=13;function vxe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function uct(e,t){var n=vxe(e);return function(r,i){return t(n(r),i,e)}}function Fse(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function wl(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function lct(e){return e<0?"-"+wl(-e,6):e>9999?"+"+wl(e,6):wl(e,4)}function cct(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":lct(e.getUTCFullYear())+"-"+wl(e.getUTCMonth()+1,2)+"-"+wl(e.getUTCDate(),2)+(i?"T"+wl(t,2)+":"+wl(n,2)+":"+wl(r,2)+"."+wl(i,3)+"Z":r?"T"+wl(t,2)+":"+wl(n,2)+":"+wl(r,2)+"Z":n||t?"T"+wl(t,2)+":"+wl(n,2)+"Z":"")}function fct(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,g=i(f,function(y,x){if(h)return h(y,x-1);p=y,h=d?uct(y,d):vxe(y)});return g.columns=p||[],g}function i(f,d){var h=[],p=f.length,g=0,y=0,x,b=p<=0,_=!1;f.charCodeAt(p-1)===Z2&&--p,f.charCodeAt(p-1)===v9&&--p;function E(){if(b)return g9;if(_)return _=!1,Mse;var k,I=g,R;if(f.charCodeAt(I)===y9){for(;g++<p&&f.charCodeAt(g)!==y9||f.charCodeAt(++g)===y9;);return(k=g)>=p?b=!0:(R=f.charCodeAt(g++))===Z2?_=!0:R===v9&&(_=!0,f.charCodeAt(g)===Z2&&++g),f.slice(I+1,k-1).replace(/""/g,'"')}for(;g<p;){if((R=f.charCodeAt(k=g++))===Z2)_=!0;else if(R===v9)_=!0,f.charCodeAt(g)===Z2&&++g;else if(R!==n)continue;return f.slice(I,k)}return b=!0,f.slice(I,p)}for(;(x=E())!==g9;){for(var T=[];x!==Mse&&x!==g9;)T.push(x),x=E();d&&(T=d(T,y++))==null||h.push(T)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Fse(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Fse(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?cct(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function dct(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function hct(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return bxe(this.cover(t,n),t,n,e)}function bxe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,g,y,x,b;if(!s)return e._root=o,e;for(;s.length;)if((g=t>=(f=(a+l)/2))?a=f:l=f,(y=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[x=y<<1|g]))return i[x]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[x]=o:e._root=o,e;do i=i?i[x]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+l)/2))?a=f:l=f,(y=n>=(d=(u+c)/2))?u=d:c=d;while((x=y<<1|g)===(b=(p>=d)<<1|h>=f));return i[b]=s,i[x]=o,e}function pct(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)bxe(this,o[n],a[n],e[n]);return this}function mct(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function gct(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function yct(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function $u(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function vct(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new $u(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var y=(o+u)/2,x=(a+l)/2;d.push(new $u(h[3],y,x,u,l),new $u(h[2],o,x,y,l),new $u(h[1],y,a,u,x),new $u(h[0],o,a,y,x)),(g=(t>=x)<<1|e>=y)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var b=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),E=b*b+_*_;if(E<n){var T=Math.sqrt(n=E);i=e-T,s=t-T,c=e+T,f=t+T,r=h.data}}return r}function bct(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,g,y,x;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(g=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[y=g<<1|p]))return this;if(!n.length)break;(t[y+1&3]||t[y+2&3]||t[y+3&3])&&(r=t,x=y)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[y]=s:delete t[y],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[x]=n:this._root=n),this):(this._root=s,this)}function xct(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function wct(){return this._root}function _ct(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Ect(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new $u(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new $u(i,l,c,a,u)),(i=r[2])&&t.push(new $u(i,s,c,l,u)),(i=r[1])&&t.push(new $u(i,l,o,a,c)),(i=r[0])&&t.push(new $u(i,s,o,l,c))}return this}function Tct(e){var t=[],n=[],r;for(this._root&&t.push(new $u(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new $u(s,o,a,c,f)),(s=i[1])&&t.push(new $u(s,c,a,u,f)),(s=i[2])&&t.push(new $u(s,o,f,c,l)),(s=i[3])&&t.push(new $u(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Sct(e){return e[0]}function Cct(e){return arguments.length?(this._x=e,this):this._x}function Act(e){return e[1]}function kct(e){return arguments.length?(this._y=e,this):this._y}function RG(e,t,n){var r=new PG(t??Sct,n??Act,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function PG(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Bse(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Wu=RG.prototype=PG.prototype;Wu.copy=function(){var e=new PG(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Bse(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Bse(r));return e};Wu.add=hct;Wu.addAll=pct;Wu.cover=mct;Wu.data=gct;Wu.extent=yct;Wu.find=vct;Wu.remove=bct;Wu.removeAll=xct;Wu.root=wct;Wu.size=_ct;Wu.visit=Ect;Wu.visitAfter=Tct;Wu.x=Cct;Wu.y=kct;function Mu(e){return function(){return e}}function uy(e){return(e()-.5)*1e-6}function Ict(e){return e.x+e.vx}function Rct(e){return e.y+e.vy}function Pct(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Mu(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,g,y,x=0;x<s;++x)for(f=RG(t,Ict,Rct).visitAfter(a),l=0;l<c;++l)d=t[l],g=n[d.index],y=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(b);function b(_,E,T,k,I){var R=_.data,D=_.r,L=g+D;if(R){if(R.index>d.index){var M=h-R.x-R.vx,z=p-R.y-R.vy,F=M*M+z*z;F<L*L&&(M===0&&(M=uy(r),F+=M*M),z===0&&(z=uy(r),F+=z*z),F=(L-(F=Math.sqrt(F)))/F*i,d.vx+=(M*=F)*(L=(D*=D)/(y+D)),d.vy+=(z*=F)*L,R.vx-=M*(L=1-L),R.vy-=z*L)}return}return E>h+L||k<h-L||T>p+L||I<p-L}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Mu(+l),u(),o):e},o}function Dct(e){return e.index}function jse(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Nct(e){var t=Dct,n=f,r,i=Mu(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(y){return 1/Math.min(a[y.source.index],a[y.target.index])}function d(y){for(var x=0,b=e.length;x<c;++x)for(var _=0,E,T,k,I,R,D,L;_<b;++_)E=e[_],T=E.source,k=E.target,I=k.x+k.vx-T.x-T.vx||uy(l),R=k.y+k.vy-T.y-T.vy||uy(l),D=Math.sqrt(I*I+R*R),D=(D-s[_])/D*y*r[_],I*=D,R*=D,k.vx-=I*(L=u[_]),k.vy-=R*L,T.vx+=I*(L=1-L),T.vy+=R*L}function h(){if(o){var y,x=o.length,b=e.length,_=new Map(o.map((T,k)=>[t(T,k,o),T])),E;for(y=0,a=new Array(x);y<b;++y)E=e[y],E.index=y,typeof E.source!="object"&&(E.source=jse(_,E.source)),typeof E.target!="object"&&(E.target=jse(_,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(y=0,u=new Array(b);y<b;++y)E=e[y],u[y]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(b),p(),s=new Array(b),g()}}function p(){if(o)for(var y=0,x=e.length;y<x;++y)r[y]=+n(e[y],y,e)}function g(){if(o)for(var y=0,x=e.length;y<x;++y)s[y]=+i(e[y],y,e)}return d.initialize=function(y,x){o=y,l=x,h()},d.links=function(y){return arguments.length?(e=y,h(),d):e},d.id=function(y){return arguments.length?(t=y,d):t},d.iterations=function(y){return arguments.length?(c=+y,d):c},d.strength=function(y){return arguments.length?(n=typeof y=="function"?y:Mu(+y),p(),d):n},d.distance=function(y){return arguments.length?(i=typeof y=="function"?y:Mu(+y),g(),d):i},d}const Oct=1664525,$ct=1013904223,Use=4294967296;function Lct(){let e=1;return()=>(e=(Oct*e+$ct)%Use)/Use}function Mct(e){return e.x}function Fct(e){return e.y}var Bct=10,jct=Math.PI*(3-Math.sqrt(5));function Uct(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=SG(f),l=gG("tick","end"),c=Lct();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(g){var y,x=e.length,b;g===void 0&&(g=1);for(var _=0;_<g;++_)for(n+=(s-n)*i,a.forEach(function(E){E(n)}),y=0;y<x;++y)b=e[y],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return t}function h(){for(var g=0,y=e.length,x;g<y;++g){if(x=e[g],x.index=g,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var b=Bct*Math.sqrt(.5+g),_=g*jct;x.x=b*Math.cos(_),x.y=b*Math.sin(_)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(s=+g,t):s},velocityDecay:function(g){return arguments.length?(o=1-g,t):1-o},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,y){return arguments.length>1?(y==null?a.delete(g):a.set(g,p(y)),t):a.get(g)},find:function(g,y,x){var b=0,_=e.length,E,T,k,I,R;for(x==null?x=1/0:x*=x,b=0;b<_;++b)I=e[b],E=g-I.x,T=y-I.y,k=E*E+T*T,k<x&&(R=I,x=k);return R},on:function(g,y){return arguments.length>1?(l.on(g,y),t):l.on(g)}}}function zct(){var e,t,n,r,i=Mu(-30),s,o=1,a=1/0,u=.81;function l(h){var p,g=e.length,y=RG(e,Mct,Fct).visitAfter(f);for(r=h,p=0;p<g;++p)t=e[p],y.visit(d)}function c(){if(e){var h,p=e.length,g;for(s=new Array(p),h=0;h<p;++h)g=e[h],s[g.index]=+i(g,h,e)}}function f(h){var p=0,g,y,x=0,b,_,E;if(h.length){for(b=_=E=0;E<4;++E)(g=h[E])&&(y=Math.abs(g.value))&&(p+=g.value,x+=y,b+=y*g.x,_+=y*g.y);h.x=b/x,h.y=_/x}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,y){if(!h.value)return!0;var x=h.x-t.x,b=h.y-t.y,_=y-p,E=x*x+b*b;if(_*_/u<E)return E<a&&(x===0&&(x=uy(n),E+=x*x),b===0&&(b=uy(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)),t.vx+=x*h.value*r/E,t.vy+=b*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(x===0&&(x=uy(n),E+=x*x),b===0&&(b=uy(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)));do h.data!==t&&(_=s[h.data.index]*r/E,t.vx+=x*_,t.vy+=b*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Mu(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Vct(e){var t=Mu(.1),n,r,i;typeof e!="function"&&(e=Mu(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Mu(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Mu(+a),o(),s):e},s}function Hct(e){var t=Mu(.1),n,r,i;typeof e!="function"&&(e=Mu(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Mu(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Mu(+a),o(),s):e},s}function qct(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function C4(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function zE(e){return e=C4(Math.abs(e)),e?e[1]:NaN}function Wct(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Gct(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Yct=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $b(e){if(!(t=Yct.exec(e)))throw new Error("invalid format: "+e);var t;return new DG({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$b.prototype=DG.prototype;function DG(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}DG.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Kct(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var xxe;function Xct(e,t){var n=C4(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(xxe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+C4(e,Math.max(0,t+s-1))[0]}function zse(e,t){var n=C4(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Vse={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:qct,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>zse(e*100,t),r:zse,s:Xct,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Hse(e){return e}var qse=Array.prototype.map,Wse=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function wxe(e){var t=e.grouping===void 0||e.thousands===void 0?Hse:Wct(qse.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Hse:Gct(qse.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=$b(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,y=f.zero,x=f.width,b=f.comma,_=f.precision,E=f.trim,T=f.type;T==="n"?(b=!0,T="g"):Vse[T]||(_===void 0&&(_=12),E=!0,T="g"),(y||d==="0"&&h==="=")&&(y=!0,d="0",h="=");var k=g==="$"?n:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",I=g==="$"?r:/[%p]/.test(T)?o:"",R=Vse[T],D=/[defgprs%]/.test(T);_=_===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function L(M){var z=k,F=I,H,Q,J;if(T==="c")F=R(M)+F,M="";else{M=+M;var ne=M<0||1/M<0;if(M=isNaN(M)?u:R(Math.abs(M),_),E&&(M=Kct(M)),ne&&+M==0&&p!=="+"&&(ne=!1),z=(ne?p==="("?p:a:p==="-"||p==="("?"":p)+z,F=(T==="s"?Wse[8+xxe/3]:"")+F+(ne&&p==="("?")":""),D){for(H=-1,Q=M.length;++H<Q;)if(J=M.charCodeAt(H),48>J||J>57){F=(J===46?i+M.slice(H+1):M.slice(H))+F,M=M.slice(0,H);break}}}b&&!y&&(M=t(M,1/0));var Z=z.length+M.length+F.length,ie=Z<x?new Array(x-Z+1).join(d):"";switch(b&&y&&(M=t(ie+M,ie.length?x-F.length:1/0),ie=""),h){case"<":M=z+M+F+ie;break;case"=":M=z+ie+M+F;break;case"^":M=ie.slice(0,Z=ie.length>>1)+z+M+F+ie.slice(Z);break;default:M=ie+z+M+F;break}return s(M)}return L.toString=function(){return f+""},L}function c(f,d){var h=l((f=$b(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(zE(d)/3)))*3,g=Math.pow(10,-p),y=Wse[8+p/3];return function(x){return h(g*x)+y}}return{format:l,formatPrefix:c}}var wD,FL,NG;Qct({thousands:",",grouping:[3],currency:["$",""]});function Qct(e){return wD=wxe(e),FL=wD.format,NG=wD.formatPrefix,wD}function _xe(e){return Math.max(0,-zE(Math.abs(e)))}function Exe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zE(t)/3)))*3-zE(Math.abs(e)))}function Txe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,zE(t)-zE(e))+1}var En=1e-6,tU=1e-12,or=Math.PI,bs=or/2,A4=or/4,zu=or*2,$s=180/or,rr=or/180,Tr=Math.abs,oS=Math.atan,Af=Math.atan2,_n=Math.cos,_D=Math.ceil,Sxe=Math.exp,nU=Math.hypot,k4=Math.log,b9=Math.pow,gn=Math.sin,xf=Math.sign||function(e){return e>0?1:e<0?-1:0},Vu=Math.sqrt,OG=Math.tan;function Cxe(e){return e>1?0:e<-1?or:Math.acos(e)}function Ll(e){return e>1?bs:e<-1?-bs:Math.asin(e)}function ba(){}function I4(e,t){e&&Yse.hasOwnProperty(e.type)&&Yse[e.type](e,t)}var Gse={Feature:function(e,t){I4(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)I4(n[r].geometry,t)}},Yse={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){rU(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)rU(n[r],t,0)},Polygon:function(e,t){Kse(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Kse(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)I4(n[r],t)}};function rU(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Kse(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)rU(e[n],t,1);t.polygonEnd()}function Xm(e,t){e&&Gse.hasOwnProperty(e.type)?Gse[e.type](e,t):I4(e,t)}var R4=new ju,P4=new ju,Axe,kxe,iU,sU,oU,Rp={point:ba,lineStart:ba,lineEnd:ba,polygonStart:function(){R4=new ju,Rp.lineStart=Jct,Rp.lineEnd=Zct},polygonEnd:function(){var e=+R4;P4.add(e<0?zu+e:e),this.lineStart=this.lineEnd=this.point=ba},sphere:function(){P4.add(zu)}};function Jct(){Rp.point=eft}function Zct(){Ixe(Axe,kxe)}function eft(e,t){Rp.point=Ixe,Axe=e,kxe=t,e*=rr,t*=rr,iU=e,sU=_n(t=t/2+A4),oU=gn(t)}function Ixe(e,t){e*=rr,t*=rr,t=t/2+A4;var n=e-iU,r=n>=0?1:-1,i=r*n,s=_n(t),o=gn(t),a=oU*o,u=sU*s+a*_n(i),l=a*r*gn(i);R4.add(Af(l,u)),iU=e,sU=s,oU=o}function tft(e){return P4=new ju,Xm(e,Rp),P4*2}function D4(e){return[Af(e[1],e[0]),Ll(e[2])]}function Lb(e){var t=e[0],n=e[1],r=_n(n);return[r*_n(t),r*gn(t),gn(n)]}function ED(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function VE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function x9(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function TD(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function N4(e){var t=Vu(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var es,Cl,ps,bc,zv,Rxe,Pxe,cE,IA,Yg,$0,qm={point:aU,lineStart:Xse,lineEnd:Qse,polygonStart:function(){qm.point=Nxe,qm.lineStart=nft,qm.lineEnd=rft,IA=new ju,Rp.polygonStart()},polygonEnd:function(){Rp.polygonEnd(),qm.point=aU,qm.lineStart=Xse,qm.lineEnd=Qse,R4<0?(es=-(ps=180),Cl=-(bc=90)):IA>En?bc=90:IA<-1e-6&&(Cl=-90),$0[0]=es,$0[1]=ps},sphere:function(){es=-(ps=180),Cl=-(bc=90)}};function aU(e,t){Yg.push($0=[es=e,ps=e]),t<Cl&&(Cl=t),t>bc&&(bc=t)}function Dxe(e,t){var n=Lb([e*rr,t*rr]);if(cE){var r=VE(cE,n),i=[r[1],-r[0],0],s=VE(i,r);N4(s),s=D4(s);var o=e-zv,a=o>0?1:-1,u=s[0]*$s*a,l,c=Tr(o)>180;c^(a*zv<u&&u<a*e)?(l=s[1]*$s,l>bc&&(bc=l)):(u=(u+360)%360-180,c^(a*zv<u&&u<a*e)?(l=-s[1]*$s,l<Cl&&(Cl=l)):(t<Cl&&(Cl=t),t>bc&&(bc=t))),c?e<zv?yc(es,e)>yc(es,ps)&&(ps=e):yc(e,ps)>yc(es,ps)&&(es=e):ps>=es?(e<es&&(es=e),e>ps&&(ps=e)):e>zv?yc(es,e)>yc(es,ps)&&(ps=e):yc(e,ps)>yc(es,ps)&&(es=e)}else Yg.push($0=[es=e,ps=e]);t<Cl&&(Cl=t),t>bc&&(bc=t),cE=n,zv=e}function Xse(){qm.point=Dxe}function Qse(){$0[0]=es,$0[1]=ps,qm.point=aU,cE=null}function Nxe(e,t){if(cE){var n=e-zv;IA.add(Tr(n)>180?n+(n>0?360:-360):n)}else Rxe=e,Pxe=t;Rp.point(e,t),Dxe(e,t)}function nft(){Rp.lineStart()}function rft(){Nxe(Rxe,Pxe),Rp.lineEnd(),Tr(IA)>En&&(es=-(ps=180)),$0[0]=es,$0[1]=ps,cE=null}function yc(e,t){return(t-=e)<0?t+360:t}function ift(e,t){return e[0]-t[0]}function Jse(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function sft(e){var t,n,r,i,s,o,a;if(bc=ps=-(es=Cl=1/0),Yg=[],Xm(e,qm),n=Yg.length){for(Yg.sort(ift),t=1,r=Yg[0],s=[r];t<n;++t)i=Yg[t],Jse(r,i[0])||Jse(r,i[1])?(yc(r[0],i[1])>yc(r[0],r[1])&&(r[1]=i[1]),yc(i[0],r[1])>yc(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=yc(r[1],i[0]))>o&&(o=a,es=i[0],ps=r[1])}return Yg=$0=null,es===1/0||Cl===1/0?[[NaN,NaN],[NaN,NaN]]:[[es,Cl],[ps,bc]]}var BC,O4,$4,L4,M4,F4,B4,j4,uU,lU,cU,Oxe,$xe,Du,Nu,Ou,Dd={sphere:ba,point:$G,lineStart:Zse,lineEnd:eoe,polygonStart:function(){Dd.lineStart=uft,Dd.lineEnd=lft},polygonEnd:function(){Dd.lineStart=Zse,Dd.lineEnd=eoe}};function $G(e,t){e*=rr,t*=rr;var n=_n(t);VI(n*_n(e),n*gn(e),gn(t))}function VI(e,t,n){++BC,$4+=(e-$4)/BC,L4+=(t-L4)/BC,M4+=(n-M4)/BC}function Zse(){Dd.point=oft}function oft(e,t){e*=rr,t*=rr;var n=_n(t);Du=n*_n(e),Nu=n*gn(e),Ou=gn(t),Dd.point=aft,VI(Du,Nu,Ou)}function aft(e,t){e*=rr,t*=rr;var n=_n(t),r=n*_n(e),i=n*gn(e),s=gn(t),o=Af(Vu((o=Nu*s-Ou*i)*o+(o=Ou*r-Du*s)*o+(o=Du*i-Nu*r)*o),Du*r+Nu*i+Ou*s);O4+=o,F4+=o*(Du+(Du=r)),B4+=o*(Nu+(Nu=i)),j4+=o*(Ou+(Ou=s)),VI(Du,Nu,Ou)}function eoe(){Dd.point=$G}function uft(){Dd.point=cft}function lft(){Lxe(Oxe,$xe),Dd.point=$G}function cft(e,t){Oxe=e,$xe=t,e*=rr,t*=rr,Dd.point=Lxe;var n=_n(t);Du=n*_n(e),Nu=n*gn(e),Ou=gn(t),VI(Du,Nu,Ou)}function Lxe(e,t){e*=rr,t*=rr;var n=_n(t),r=n*_n(e),i=n*gn(e),s=gn(t),o=Nu*s-Ou*i,a=Ou*r-Du*s,u=Du*i-Nu*r,l=nU(o,a,u),c=Ll(l),f=l&&-c/l;uU.add(f*o),lU.add(f*a),cU.add(f*u),O4+=c,F4+=c*(Du+(Du=r)),B4+=c*(Nu+(Nu=i)),j4+=c*(Ou+(Ou=s)),VI(Du,Nu,Ou)}function fft(e){BC=O4=$4=L4=M4=F4=B4=j4=0,uU=new ju,lU=new ju,cU=new ju,Xm(e,Dd);var t=+uU,n=+lU,r=+cU,i=nU(t,n,r);return i<tU&&(t=F4,n=B4,r=j4,O4<En&&(t=$4,n=L4,r=M4),i=nU(t,n,r),i<tU)?[NaN,NaN]:[Af(n,t)*$s,Ll(r/i)*$s]}function fU(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function dU(e,t){return Tr(e)>or&&(e-=Math.round(e/zu)*zu),[e,t]}dU.invert=dU;function Mxe(e,t,n){return(e%=zu)?t||n?fU(noe(e),roe(t,n)):noe(e):t||n?roe(t,n):dU}function toe(e){return function(t,n){return t+=e,Tr(t)>or&&(t-=Math.round(t/zu)*zu),[t,n]}}function noe(e){var t=toe(e);return t.invert=toe(-e),t}function roe(e,t){var n=_n(e),r=gn(e),i=_n(t),s=gn(t);function o(a,u){var l=_n(u),c=_n(a)*l,f=gn(a)*l,d=gn(u),h=d*n+c*r;return[Af(f*i-h*s,c*n-d*r),Ll(h*i+f*s)]}return o.invert=function(a,u){var l=_n(u),c=_n(a)*l,f=gn(a)*l,d=gn(u),h=d*i-f*s;return[Af(f*i+d*s,c*n+h*r),Ll(h*n-c*r)]},o}function dft(e){e=Mxe(e[0]*rr,e[1]*rr,e.length>2?e[2]*rr:0);function t(n){return n=e(n[0]*rr,n[1]*rr),n[0]*=$s,n[1]*=$s,n}return t.invert=function(n){return n=e.invert(n[0]*rr,n[1]*rr),n[0]*=$s,n[1]*=$s,n},t}function hft(e,t,n,r,i,s){if(n){var o=_n(t),a=gn(t),u=r*n;i==null?(i=t+r*zu,s=t-u/2):(i=ioe(o,i),s=ioe(o,s),(r>0?i<s:i>s)&&(i+=r*zu));for(var l,c=i;r>0?c>s:c<s;c-=u)l=D4([o,-a*_n(c),-a*gn(c)]),e.point(l[0],l[1])}}function ioe(e,t){t=Lb(t),t[0]-=e,N4(t);var n=Cxe(-t[1]);return((-t[2]<0?-n:n)+zu-En)%zu}function Fxe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ba,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function eO(e,t){return Tr(e[0]-t[0])<En&&Tr(e[1]-t[1])<En}function SD(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Bxe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,y=p[0],x=p[g],b;if(eO(y,x)){if(!y[2]&&!x[2]){for(i.lineStart(),a=0;a<g;++a)i.point((y=p[a])[0],y[1]);i.lineEnd();return}x[0]+=2*En}s.push(b=new SD(y,p,null,!0)),o.push(b.o=new SD(y,null,b,!1)),s.push(b=new SD(x,p,null,!1)),o.push(b.o=new SD(x,null,b,!0))}}),!!s.length){for(o.sort(t),soe(s),soe(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function soe(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function w9(e){return Tr(e[0])<=or?e[0]:xf(e[0])*((Tr(e[0])+or)%zu-or)}function pft(e,t){var n=w9(t),r=t[1],i=gn(r),s=[gn(n),-_n(n),0],o=0,a=0,u=new ju;i===1?r=bs+En:i===-1&&(r=-bs-En);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=w9(h),g=h[1]/2+A4,y=gn(g),x=_n(g),b=0;b<d;++b,p=E,y=k,x=I,h=_){var _=f[b],E=w9(_),T=_[1]/2+A4,k=gn(T),I=_n(T),R=E-p,D=R>=0?1:-1,L=D*R,M=L>or,z=y*k;if(u.add(Af(z*D*gn(L),x*I+z*_n(L))),o+=M?R+D*zu:R,M^p>=n^E>=n){var F=VE(Lb(h),Lb(_));N4(F);var H=VE(s,F);N4(H);var Q=(M^R>=0?-1:1)*Ll(H[2]);(r>Q||r===Q&&(F[0]||F[1]))&&(a+=M^R>=0?1:-1)}}return(o<-1e-6||o<En&&u<-1e-12)^a&1}function jxe(e,t,n,r){return function(i){var s=t(i),o=Fxe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:g,lineEnd:y,polygonStart:function(){d.point=x,d.lineStart=b,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=y,c=Tbe(c);var E=pft(l,r);c.length?(u||(i.polygonStart(),u=!0),Bxe(c,gft,E,n,i)):E&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,T){e(E,T)&&i.point(E,T)}function p(E,T){s.point(E,T)}function g(){d.point=p,s.lineStart()}function y(){d.point=h,s.lineEnd()}function x(E,T){f.push([E,T]),a.point(E,T)}function b(){a.lineStart(),f=[]}function _(){x(f[0][0],f[0][1]),a.lineEnd();var E=a.clean(),T=o.result(),k,I=T.length,R,D,L;if(f.pop(),l.push(f),f=null,!!I){if(E&1){if(D=T[0],(R=D.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),k=0;k<R;++k)i.point((L=D[k])[0],L[1]);i.lineEnd()}return}I>1&&E&2&&T.push(T.pop().concat(T.shift())),c.push(T.filter(mft))}}return d}}function mft(e){return e.length>1}function gft(e,t){return((e=e.x)[0]<0?e[1]-bs-En:bs-e[1])-((t=t.x)[0]<0?t[1]-bs-En:bs-t[1])}const ooe=jxe(function(){return!0},yft,bft,[-or,-bs]);function yft(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?or:-or,u=Tr(s-t);Tr(u-or)<En?(e.point(t,n=(n+o)/2>0?bs:-bs),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=or&&(Tr(t-r)<En&&(t-=r*En),Tr(s-a)<En&&(s-=a*En),n=vft(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function vft(e,t,n,r){var i,s,o=gn(e-n);return Tr(o)>En?oS((gn(t)*(s=_n(r))*gn(n)-gn(r)*(i=_n(t))*gn(e))/(i*s*o)):(t+r)/2}function bft(e,t,n,r){var i;if(e==null)i=n*bs,r.point(-or,i),r.point(0,i),r.point(or,i),r.point(or,0),r.point(or,-i),r.point(0,-i),r.point(-or,-i),r.point(-or,0),r.point(-or,i);else if(Tr(e[0]-t[0])>En){var s=e[0]<t[0]?or:-or;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function xft(e){var t=_n(e),n=2*rr,r=t>0,i=Tr(t)>En;function s(c,f,d,h){hft(h,e,n,d,c,f)}function o(c,f){return _n(c)*_n(f)>t}function a(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(y,x){var b=[y,x],_,E=o(y,x),T=r?E?0:l(y,x):E?l(y+(y<0?or:-or),x):0;if(!f&&(p=h=E)&&c.lineStart(),E!==h&&(_=u(f,b),(!_||eO(f,_)||eO(b,_))&&(b[2]=1)),E!==h)g=0,E?(c.lineStart(),_=u(b,f),c.point(_[0],_[1])):(_=u(f,b),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^E){var k;!(T&d)&&(k=u(b,f,!0))&&(g=0,r?(c.lineStart(),c.point(k[0][0],k[0][1]),c.point(k[1][0],k[1][1]),c.lineEnd()):(c.point(k[1][0],k[1][1]),c.lineEnd(),c.lineStart(),c.point(k[0][0],k[0][1],3)))}E&&(!f||!eO(f,b))&&c.point(b[0],b[1]),f=b,h=E,d=T},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function u(c,f,d){var h=Lb(c),p=Lb(f),g=[1,0,0],y=VE(h,p),x=ED(y,y),b=y[0],_=x-b*b;if(!_)return!d&&c;var E=t*x/_,T=-t*b/_,k=VE(g,y),I=TD(g,E),R=TD(y,T);x9(I,R);var D=k,L=ED(I,D),M=ED(D,D),z=L*L-M*(ED(I,I)-1);if(!(z<0)){var F=Vu(z),H=TD(D,(-L-F)/M);if(x9(H,I),H=D4(H),!d)return H;var Q=c[0],J=f[0],ne=c[1],Z=f[1],ie;J<Q&&(ie=Q,Q=J,J=ie);var q=J-Q,U=Tr(q-or)<En,X=U||q<En;if(!U&&Z<ne&&(ie=ne,ne=Z,Z=ie),X?U?ne+Z>0^H[1]<(Tr(H[0]-Q)<En?ne:Z):ne<=H[1]&&H[1]<=Z:q>or^(Q<=H[0]&&H[0]<=J)){var V=TD(D,(-L+F)/M);return x9(V,I),[H,D4(V)]}}}function l(c,f){var d=r?e:or-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return jxe(o,a,s,r?[0,-e]:[-or,e-or])}function wft(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var CD=1e9,AD=-1e9;function Uxe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Tr(l[0]-e)<En?c>0?0:3:Tr(l[0]-n)<En?c>0?2:1:Tr(l[1]-t)<En?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=Fxe(),d,h,p,g,y,x,b,_,E,T,k,I={point:R,lineStart:z,lineEnd:F,polygonStart:L,polygonEnd:M};function R(Q,J){i(Q,J)&&c.point(Q,J)}function D(){for(var Q=0,J=0,ne=h.length;J<ne;++J)for(var Z=h[J],ie=1,q=Z.length,U=Z[0],X,V,K=U[0],ee=U[1];ie<q;++ie)X=K,V=ee,U=Z[ie],K=U[0],ee=U[1],V<=r?ee>r&&(K-X)*(r-V)>(ee-V)*(e-X)&&++Q:ee<=r&&(K-X)*(r-V)<(ee-V)*(e-X)&&--Q;return Q}function L(){c=f,d=[],h=[],k=!0}function M(){var Q=D(),J=k&&Q,ne=(d=Tbe(d)).length;(J||ne)&&(l.polygonStart(),J&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),ne&&Bxe(d,a,Q,s,l),l.polygonEnd()),c=l,d=h=p=null}function z(){I.point=H,h&&h.push(p=[]),T=!0,E=!1,b=_=NaN}function F(){d&&(H(g,y),x&&E&&f.rejoin(),d.push(f.result())),I.point=R,E&&c.lineEnd()}function H(Q,J){var ne=i(Q,J);if(h&&p.push([Q,J]),T)g=Q,y=J,x=ne,T=!1,ne&&(c.lineStart(),c.point(Q,J));else if(ne&&E)c.point(Q,J);else{var Z=[b=Math.max(AD,Math.min(CD,b)),_=Math.max(AD,Math.min(CD,_))],ie=[Q=Math.max(AD,Math.min(CD,Q)),J=Math.max(AD,Math.min(CD,J))];wft(Z,ie,e,t,n,r)?(E||(c.lineStart(),c.point(Z[0],Z[1])),c.point(ie[0],ie[1]),ne||c.lineEnd(),k=!1):ne&&(c.lineStart(),c.point(Q,J),k=!1)}b=Q,_=J,E=ne}return I}}function aoe(e,t,n){var r=Tc(e,t-En,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function uoe(e,t,n){var r=Tc(e,t-En,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function _ft(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,g,y=2.5;function x(){return{type:"MultiLineString",coordinates:b()}}function b(){return Tc(_D(r/c)*c,n,c).map(p).concat(Tc(_D(a/f)*f,o,f).map(g)).concat(Tc(_D(t/u)*u,e,u).filter(function(_){return Tr(_%c)>En}).map(d)).concat(Tc(_D(s/l)*l,i,l).filter(function(_){return Tr(_%f)>En}).map(h))}return x.lines=function(){return b().map(function(_){return{type:"LineString",coordinates:_}})},x.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},x.extent=function(_){return arguments.length?x.extentMajor(_).extentMinor(_):x.extentMinor()},x.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),x.precision(y)):[[r,a],[n,o]]},x.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),x.precision(y)):[[t,s],[e,i]]},x.step=function(_){return arguments.length?x.stepMajor(_).stepMinor(_):x.stepMinor()},x.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],x):[c,f]},x.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],x):[u,l]},x.precision=function(_){return arguments.length?(y=+_,d=aoe(s,i,90),h=uoe(t,e,y),p=aoe(a,o,90),g=uoe(r,n,y),x):y},x.extentMajor([[-180,-90+En],[180,90-En]]).extentMinor([[-180,-80-En],[180,80+En]])}const Tk=e=>e;var _9=new ju,hU=new ju,zxe,Vxe,pU,mU,Qm={point:ba,lineStart:ba,lineEnd:ba,polygonStart:function(){Qm.lineStart=Eft,Qm.lineEnd=Sft},polygonEnd:function(){Qm.lineStart=Qm.lineEnd=Qm.point=ba,_9.add(Tr(hU)),hU=new ju},result:function(){var e=_9/2;return _9=new ju,e}};function Eft(){Qm.point=Tft}function Tft(e,t){Qm.point=Hxe,zxe=pU=e,Vxe=mU=t}function Hxe(e,t){hU.add(mU*e-pU*t),pU=e,mU=t}function Sft(){Hxe(zxe,Vxe)}var HE=1/0,U4=HE,Sk=-HE,z4=Sk,V4={point:Cft,lineStart:ba,lineEnd:ba,polygonStart:ba,polygonEnd:ba,result:function(){var e=[[HE,U4],[Sk,z4]];return Sk=z4=-(U4=HE=1/0),e}};function Cft(e,t){e<HE&&(HE=e),e>Sk&&(Sk=e),t<U4&&(U4=t),t>z4&&(z4=t)}var gU=0,yU=0,jC=0,H4=0,q4=0,q_=0,vU=0,bU=0,UC=0,qxe,Wxe,Qh,Jh,bf={point:Mb,lineStart:loe,lineEnd:coe,polygonStart:function(){bf.lineStart=Ift,bf.lineEnd=Rft},polygonEnd:function(){bf.point=Mb,bf.lineStart=loe,bf.lineEnd=coe},result:function(){var e=UC?[vU/UC,bU/UC]:q_?[H4/q_,q4/q_]:jC?[gU/jC,yU/jC]:[NaN,NaN];return gU=yU=jC=H4=q4=q_=vU=bU=UC=0,e}};function Mb(e,t){gU+=e,yU+=t,++jC}function loe(){bf.point=Aft}function Aft(e,t){bf.point=kft,Mb(Qh=e,Jh=t)}function kft(e,t){var n=e-Qh,r=t-Jh,i=Vu(n*n+r*r);H4+=i*(Qh+e)/2,q4+=i*(Jh+t)/2,q_+=i,Mb(Qh=e,Jh=t)}function coe(){bf.point=Mb}function Ift(){bf.point=Pft}function Rft(){Gxe(qxe,Wxe)}function Pft(e,t){bf.point=Gxe,Mb(qxe=Qh=e,Wxe=Jh=t)}function Gxe(e,t){var n=e-Qh,r=t-Jh,i=Vu(n*n+r*r);H4+=i*(Qh+e)/2,q4+=i*(Jh+t)/2,q_+=i,i=Jh*e-Qh*t,vU+=i*(Qh+e),bU+=i*(Jh+t),UC+=i*3,Mb(Qh=e,Jh=t)}function Yxe(e){this._context=e}Yxe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,zu);break}}},result:ba};var xU=new ju,E9,Kxe,Xxe,zC,VC,Ck={point:ba,lineStart:function(){Ck.point=Dft},lineEnd:function(){E9&&Qxe(Kxe,Xxe),Ck.point=ba},polygonStart:function(){E9=!0},polygonEnd:function(){E9=null},result:function(){var e=+xU;return xU=new ju,e}};function Dft(e,t){Ck.point=Qxe,Kxe=zC=e,Xxe=VC=t}function Qxe(e,t){zC-=e,VC-=t,xU.add(Vu(zC*zC+VC*VC)),zC=e,VC=t}let foe,W4,doe,hoe;class poe{constructor(t){this._append=t==null?Jxe:Nft(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==doe||this._append!==W4){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,doe=r,W4=this._append,hoe=this._,this._=i}this._+=hoe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Jxe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Nft(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Jxe;if(t!==foe){const n=10**t;foe=t,W4=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return W4}function Zxe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Xm(a,i(s))),s.result()}return o.area=function(a){return Xm(a,i(Qm)),Qm.result()},o.measure=function(a){return Xm(a,i(Ck)),Ck.result()},o.bounds=function(a){return Xm(a,i(V4)),V4.result()},o.centroid=function(a){return Xm(a,i(bf)),bf.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,Tk):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new poe(n)):new Yxe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new poe(n)),o},o.projection(e).digits(n).context(t)}function BL(e){return function(t){var n=new wU;for(var r in e)n[r]=e[r];return n.stream=t,n}}function wU(){}wU.prototype={constructor:wU,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function LG(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Xm(n,e.stream(V4)),t(V4.result()),r!=null&&e.clipExtent(r),e}function jL(e,t,n){return LG(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function MG(e,t,n){return jL(e,[[0,0],t],n)}function FG(e,t,n){return LG(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function BG(e,t,n){return LG(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var moe=16,Oft=_n(30*rr);function goe(e,t){return+t?Lft(e,t):$ft(e)}function $ft(e){return BL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Lft(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,g,y){var x=l-r,b=c-i,_=x*x+b*b;if(_>4*t&&g--){var E=o+d,T=a+h,k=u+p,I=Vu(E*E+T*T+k*k),R=Ll(k/=I),D=Tr(Tr(k)-1)<En||Tr(s-f)<En?(s+f)/2:Af(T,E),L=e(D,R),M=L[0],z=L[1],F=M-r,H=z-i,Q=b*F-x*H;(Q*Q/_>t||Tr((x*F+b*H)/_-.5)>.3||o*d+a*h+u*p<Oft)&&(n(r,i,s,o,a,u,M,z,D,E/=I,T/=I,k,g,y),y.point(M,z),n(M,z,D,E,T,k,l,c,f,d,h,p,g,y))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,g,y={point:x,lineStart:b,lineEnd:E,polygonStart:function(){r.polygonStart(),y.lineStart=T},polygonEnd:function(){r.polygonEnd(),y.lineStart=b}};function x(R,D){R=e(R,D),r.point(R[0],R[1])}function b(){f=NaN,y.point=_,r.lineStart()}function _(R,D){var L=Lb([R,D]),M=e(R,D);n(f,d,c,h,p,g,f=M[0],d=M[1],c=R,h=L[0],p=L[1],g=L[2],moe,r),r.point(f,d)}function E(){y.point=x,r.lineEnd()}function T(){b(),y.point=k,y.lineEnd=I}function k(R,D){_(i=R,D),s=f,o=d,a=h,u=p,l=g,y.point=_}function I(){n(f,d,c,h,p,g,s,o,i,a,u,l,moe,r),y.lineEnd=E,E()}return y}}var Mft=BL({point:function(e,t){this.stream.point(e*rr,t*rr)}});function Fft(e){return BL({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Bft(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function yoe(e,t,n,r,i,s){if(!s)return Bft(e,t,n,r,i);var o=_n(s),a=gn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(g,y){return g*=r,y*=i,[u*g-l*y+t,n-l*g-u*y]}return p.invert=function(g,y){return[r*(c*g-f*y+d),i*(h-f*g-c*y)]},p}function qp(e){return ewe(function(){return e})()}function ewe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,g=ooe,y=null,x,b,_,E=Tk,T=.5,k,I,R,D,L;function M(Q){return R(Q[0]*rr,Q[1]*rr)}function z(Q){return Q=R.invert(Q[0],Q[1]),Q&&[Q[0]*$s,Q[1]*$s]}M.stream=function(Q){return D&&L===Q?D:D=Mft(Fft(c)(g(k(E(L=Q)))))},M.preclip=function(Q){return arguments.length?(g=Q,p=void 0,H()):g},M.postclip=function(Q){return arguments.length?(E=Q,y=x=b=_=null,H()):E},M.clipAngle=function(Q){return arguments.length?(g=+Q?xft(p=Q*rr):(p=null,ooe),H()):p*$s},M.clipExtent=function(Q){return arguments.length?(E=Q==null?(y=x=b=_=null,Tk):Uxe(y=+Q[0][0],x=+Q[0][1],b=+Q[1][0],_=+Q[1][1]),H()):y==null?null:[[y,x],[b,_]]},M.scale=function(Q){return arguments.length?(n=+Q,F()):n},M.translate=function(Q){return arguments.length?(r=+Q[0],i=+Q[1],F()):[r,i]},M.center=function(Q){return arguments.length?(s=Q[0]%360*rr,o=Q[1]%360*rr,F()):[s*$s,o*$s]},M.rotate=function(Q){return arguments.length?(a=Q[0]%360*rr,u=Q[1]%360*rr,l=Q.length>2?Q[2]%360*rr:0,F()):[a*$s,u*$s,l*$s]},M.angle=function(Q){return arguments.length?(f=Q%360*rr,F()):f*$s},M.reflectX=function(Q){return arguments.length?(d=Q?-1:1,F()):d<0},M.reflectY=function(Q){return arguments.length?(h=Q?-1:1,F()):h<0},M.precision=function(Q){return arguments.length?(k=goe(I,T=Q*Q),H()):Vu(T)},M.fitExtent=function(Q,J){return jL(M,Q,J)},M.fitSize=function(Q,J){return MG(M,Q,J)},M.fitWidth=function(Q,J){return FG(M,Q,J)},M.fitHeight=function(Q,J){return BG(M,Q,J)};function F(){var Q=yoe(n,0,0,d,h,f).apply(null,t(s,o)),J=yoe(n,r-Q[0],i-Q[1],d,h,f);return c=Mxe(a,u,l),I=fU(t,J),R=fU(c,I),k=goe(I,T),H()}function H(){return D=L=null,M}return function(){return t=e.apply(this,arguments),M.invert=t.invert&&z,F()}}function jG(e){var t=0,n=or/3,r=ewe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*rr,n=s[1]*rr):[t*$s,n*$s]},i}function jft(e){var t=_n(e);function n(r,i){return[r*t,gn(i)/t]}return n.invert=function(r,i){return[r/t,Ll(i*t)]},n}function Uft(e,t){var n=gn(e),r=(n+gn(t))/2;if(Tr(r)<En)return jft(e);var i=1+n*(2*r-n),s=Vu(i)/r;function o(a,u){var l=Vu(i-2*r*gn(u))/r;return[l*gn(a*=r),s-l*_n(a)]}return o.invert=function(a,u){var l=s-u,c=Af(a,Tr(l))*xf(l);return l*r<0&&(c-=or*xf(a)*xf(l)),[c/r,Ll((i-(a*a+l*l)*r*r)/(2*r))]},o}function G4(){return jG(Uft).scale(155.424).center([0,33.6442])}function twe(){return G4().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function zft(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Vft(){var e,t,n=twe(),r,i=G4().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=G4().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,y=(d[1]-p[1])/h;return(y>=.12&&y<.234&&g>=-.425&&g<-.214?i:y>=.166&&y<.234&&g>=-.214&&g<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=zft([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(l),s=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+En,g+.12*h+En],[p-.214*h-En,g+.234*h-En]]).stream(l),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+En,g+.166*h+En],[p-.115*h-En,g+.234*h-En]]).stream(l),f()},c.fitExtent=function(d,h){return jL(c,d,h)},c.fitSize=function(d,h){return MG(c,d,h)},c.fitWidth=function(d,h){return FG(c,d,h)},c.fitHeight=function(d,h){return BG(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function nwe(e){return function(t,n){var r=_n(t),i=_n(n),s=e(r*i);return s===1/0?[2,0]:[s*i*gn(t),s*gn(n)]}}function HI(e){return function(t,n){var r=Vu(t*t+n*n),i=e(r),s=gn(i),o=_n(i);return[Af(t*s,r*o),Ll(r&&n*s/r)]}}var rwe=nwe(function(e){return Vu(2/(1+e))});rwe.invert=HI(function(e){return 2*Ll(e/2)});function Hft(){return qp(rwe).scale(124.75).clipAngle(180-.001)}var iwe=nwe(function(e){return(e=Cxe(e))&&e/gn(e)});iwe.invert=HI(function(e){return e});function qft(){return qp(iwe).scale(79.4188).clipAngle(180-.001)}function UL(e,t){return[e,k4(OG((bs+t)/2))]}UL.invert=function(e,t){return[e,2*oS(Sxe(t))-bs]};function Wft(){return swe(UL).scale(961/zu)}function swe(e){var t=qp(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=or*r(),d=t(dft(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===UL?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function kD(e){return OG((bs+e)/2)}function Gft(e,t){var n=_n(e),r=e===t?gn(e):k4(n/_n(t))/k4(kD(t)/kD(e)),i=n*b9(kD(e),r)/r;if(!r)return UL;function s(o,a){i>0?a<-bs+En&&(a=-bs+En):a>bs-En&&(a=bs-En);var u=i/b9(kD(a),r);return[u*gn(r*o),i-u*_n(r*o)]}return s.invert=function(o,a){var u=i-a,l=xf(r)*Vu(o*o+u*u),c=Af(o,Tr(u))*xf(u);return u*r<0&&(c-=or*xf(o)*xf(u)),[c/r,2*oS(b9(i/l,1/r))-bs]},s}function Yft(){return jG(Gft).scale(109.5).parallels([30,30])}function Y4(e,t){return[e,t]}Y4.invert=Y4;function Kft(){return qp(Y4).scale(152.63)}function Xft(e,t){var n=_n(e),r=e===t?gn(e):(n-_n(t))/(t-e),i=n/r+e;if(Tr(r)<En)return Y4;function s(o,a){var u=i-a,l=r*o;return[u*gn(l),i-u*_n(l)]}return s.invert=function(o,a){var u=i-a,l=Af(o,Tr(u))*xf(u);return u*r<0&&(l-=or*xf(o)*xf(u)),[l/r,i-xf(r)*Vu(o*o+u*u)]},s}function Qft(){return jG(Xft).scale(131.154).center([0,13.9389])}var RA=1.340264,PA=-.081106,DA=893e-6,NA=.003796,K4=Vu(3)/2,Jft=12;function owe(e,t){var n=Ll(K4*gn(t)),r=n*n,i=r*r*r;return[e*_n(n)/(K4*(RA+3*PA*r+i*(7*DA+9*NA*r))),n*(RA+PA*r+i*(DA+NA*r))]}owe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<Jft&&(a=n*(RA+PA*r+i*(DA+NA*r))-t,u=RA+3*PA*r+i*(7*DA+9*NA*r),n-=o=a/u,r=n*n,i=r*r*r,!(Tr(o)<tU));++s);return[K4*e*(RA+3*PA*r+i*(7*DA+9*NA*r))/_n(n),Ll(gn(n)/K4)]};function Zft(){return qp(owe).scale(177.158)}function awe(e,t){var n=_n(t),r=_n(e)*n;return[n*gn(e)/r,gn(t)/r]}awe.invert=HI(oS);function edt(){return qp(awe).scale(144.049).clipAngle(60)}function tdt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=BL({point:function(E,T){var k=_([E,T]);this.stream.point(k[0],k[1])}}),g=Tk,y,x;function b(){return d=e*r,h=e*i,y=x=null,_}function _(E){var T=E[0]*d,k=E[1]*h;if(s){var I=k*o-T*a;T=T*o+k*a,k=I}return[T+t,k+n]}return _.invert=function(E){var T=E[0]-t,k=E[1]-n;if(s){var I=k*o+T*a;T=T*o-k*a,k=I}return[T/d,k/h]},_.stream=function(E){return y&&x===E?y:y=p(g(x=E))},_.postclip=function(E){return arguments.length?(g=E,u=l=c=f=null,b()):g},_.clipExtent=function(E){return arguments.length?(g=E==null?(u=l=c=f=null,Tk):Uxe(u=+E[0][0],l=+E[0][1],c=+E[1][0],f=+E[1][1]),b()):u==null?null:[[u,l],[c,f]]},_.scale=function(E){return arguments.length?(e=+E,b()):e},_.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],b()):[t,n]},_.angle=function(E){return arguments.length?(s=E%360*rr,a=gn(s),o=_n(s),b()):s*$s},_.reflectX=function(E){return arguments.length?(r=E?-1:1,b()):r<0},_.reflectY=function(E){return arguments.length?(i=E?-1:1,b()):i<0},_.fitExtent=function(E,T){return jL(_,E,T)},_.fitSize=function(E,T){return MG(_,E,T)},_.fitWidth=function(E,T){return FG(_,E,T)},_.fitHeight=function(E,T){return BG(_,E,T)},_}function uwe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}uwe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Tr(i)>En&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function ndt(){return qp(uwe).scale(175.295)}function lwe(e,t){return[_n(t)*gn(e),gn(t)]}lwe.invert=HI(Ll);function rdt(){return qp(lwe).scale(249.5).clipAngle(90+En)}function cwe(e,t){var n=_n(t),r=1+_n(e)*n;return[n*gn(e)/r,gn(t)/r]}cwe.invert=HI(function(e){return 2*oS(e)});function idt(){return qp(cwe).scale(250).clipAngle(142)}function fwe(e,t){return[k4(OG((bs+t)/2)),-e]}fwe.invert=function(e,t){return[-t,2*oS(Sxe(e))-bs]};function sdt(){var e=swe(fwe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function odt(e,t){return e.parent===t.parent?1:2}function adt(e){return e.reduce(udt,0)/e.length}function udt(e,t){return e+t.x}function ldt(e){return 1+e.reduce(cdt,0)}function cdt(e,t){return Math.max(e,t.y)}function fdt(e){for(var t;t=e.children;)e=t[0];return e}function ddt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function hdt(){var e=odt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=adt(h),d.y=ldt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=fdt(s),l=ddt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function pdt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function mdt(){return this.eachAfter(pdt)}function gdt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function ydt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function vdt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function bdt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function xdt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function wdt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function _dt(e){for(var t=this,n=Edt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Edt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Tdt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Sdt(){return Array.from(this)}function Cdt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Adt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*kdt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function UG(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Pdt)):t===void 0&&(t=Rdt);for(var n=new qE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new qE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(dwe)}function Idt(){return UG(this).eachBefore(Ddt)}function Rdt(e){return e.children}function Pdt(e){return Array.isArray(e)?e[1]:null}function Ddt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function dwe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function qE(e){this.data=e,this.depth=this.height=0,this.parent=null}qE.prototype=UG.prototype={constructor:qE,count:mdt,each:gdt,eachAfter:vdt,eachBefore:ydt,find:bdt,sum:xdt,sort:wdt,path:_dt,ancestors:Tdt,descendants:Sdt,leaves:Cdt,links:Adt,copy:Idt,[Symbol.iterator]:kdt};function tO(e){return e==null?null:hwe(e)}function hwe(e){if(typeof e!="function")throw new Error;return e}function Kv(){return 0}function F_(e){return function(){return e}}const Ndt=1664525,Odt=1013904223,voe=4294967296;function $dt(){let e=1;return()=>(e=(Ndt*e+Odt)%voe)/voe}function Ldt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Mdt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Fdt(e,t){for(var n=0,r=(e=Mdt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&pwe(o,s)?++n:(o=jdt(i=Bdt(i,s)),n=0);return o}function Bdt(e,t){var n,r;if(T9(t,e))return[t];for(n=0;n<e.length;++n)if(ID(t,e[n])&&T9(HC(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(ID(HC(e[n],e[r]),t)&&ID(HC(e[n],t),e[r])&&ID(HC(e[r],t),e[n])&&T9(mwe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function ID(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function pwe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function T9(e,t){for(var n=0;n<t.length;++n)if(!pwe(e,t[n]))return!1;return!0}function jdt(e){switch(e.length){case 1:return Udt(e[0]);case 2:return HC(e[0],e[1]);case 3:return mwe(e[0],e[1],e[2])}}function Udt(e){return{x:e.x,y:e.y,r:e.r}}function HC(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function mwe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,g=i-c,y=u-s,x=f-s,b=r*r+i*i-s*s,_=b-o*o-a*a+u*u,E=b-l*l-c*c+f*f,T=h*p-d*g,k=(p*E-g*_)/(T*2)-r,I=(g*y-p*x)/T,R=(h*_-d*E)/(T*2)-i,D=(d*x-h*y)/T,L=I*I+D*D-1,M=2*(s+k*I+R*D),z=k*k+R*R-s*s,F=-(Math.abs(L)>1e-6?(M+Math.sqrt(M*M-4*L*z))/(2*L):z/M);return{x:r+k+I*F,y:i+R+D*F,r:F}}function boe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function xoe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function woe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function RD(e){this._=e,this.next=null,this.previous=null}function zdt(e,t){if(!(s=(e=Ldt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;boe(r,n,i=e[2]),n=new RD(n),r=new RD(r),i=new RD(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){boe(n._,r._,i=e[u]),i=new RD(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(xoe(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(xoe(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=woe(n);(i=i.next)!==r;)(a=woe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Fdt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Vdt(e){return Math.sqrt(e.value)}function Hdt(){var e=null,t=1,n=1,r=Kv;function i(s){const o=$dt();return s.x=t/2,s.y=n/2,e?s.eachBefore(_oe(e)).eachAfter(S9(r,.5,o)).eachBefore(Eoe(1)):s.eachBefore(_oe(Vdt)).eachAfter(S9(Kv,1,o)).eachAfter(S9(r,s.r/Math.min(t,n),o)).eachBefore(Eoe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=tO(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:F_(+s),i):r},i}function _oe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function S9(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=zdt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Eoe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function gwe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function qI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function qdt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(gwe),o}function s(o,a){return function(u){u.children&&qI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Wdt={depth:-1},Toe={},C9={};function Gdt(e){return e.id}function Ydt(e){return e.parentId}function Soe(){var e=Gdt,t=Ydt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,g,y=new Map;if(n!=null){const x=s.map((E,T)=>Kdt(n(E,T,i))),b=x.map(Coe),_=new Set(x).add("");for(const E of b)_.has(E)||(_.add(E),x.push(E),b.push(Coe(E)),s.push(C9));o=(E,T)=>x[T],a=(E,T)=>b[T]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new qE(l),(p=o(l,c,i))!=null&&(p+="")&&(g=h.id=p,y.set(g,y.has(g)?Toe:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=y.get(p),!d)throw new Error("missing: "+p);if(d===Toe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===C9&&f.children.length===1;)f=f.children[0],--u;for(let x=s.length-1;x>=0&&(h=s[x],h.data===C9);--x)h.data=null}if(f.parent=Wdt,f.eachBefore(function(x){x.depth=x.parent.depth+1,--u}).eachBefore(dwe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=tO(i),r):e},r.parentId=function(i){return arguments.length?(t=tO(i),r):t},r.path=function(i){return arguments.length?(n=tO(i),r):n},r}function Kdt(e){e=`${e}`;let t=e.length;return _U(e,t-1)&&!_U(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Coe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!_U(e,t););return e.slice(0,t)}function _U(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Xdt(e,t){return e.parent===t.parent?1:2}function A9(e){var t=e.children;return t?t[0]:e.t}function k9(e){var t=e.children;return t?t[t.length-1]:e.t}function Qdt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Jdt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Zdt(e,t,n){return e.a.parent===t.parent?e.a:n}function nO(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}nO.prototype=Object.create(qE.prototype);function eht(e){for(var t=new nO(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new nO(s[o],o)),i.parent=n;return(t.parent=new nO(null,0)).children=[t],t}function tht(){var e=Xdt,t=1,n=1,r=null;function i(l){var c=eht(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=f===d?1:e(f,d)/2,g=p-f.x,y=t/(d.x+p+g),x=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+g)*y,b.y=b.depth*x})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Jdt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,g=d.parent.children[0],y=d.m,x=h.m,b=p.m,_=g.m,E;p=k9(p),d=A9(d),p&&d;)g=A9(g),h=k9(h),h.a=l,E=p.z+b-d.z-y+e(p._,d._),E>0&&(Qdt(Zdt(p,l,f),l,E),y+=E,x+=E),b+=p.m,y+=d.m,_+=g.m,x+=h.m;p&&!k9(h)&&(h.t=p,h.m+=b-x),d&&!A9(g)&&(g.t=d,g.m+=y-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function zL(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var ywe=(1+Math.sqrt(5))/2;function vwe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,g=t.value,y,x,b,_,E,T,k;c<d;){h=i-n,p=s-r;do y=a[f++].value;while(!y&&f<d);for(x=b=y,T=Math.max(p/h,h/p)/(g*e),k=y*y*T,E=Math.max(b/k,k/x);f<d;++f){if(y+=l=a[f].value,l<x&&(x=l),l>b&&(b=l),k=y*y*T,_=Math.max(b/k,k/x),_>E){y-=l;break}E=_}o.push(u={value:y,dice:h<p,children:a.slice(c,f)}),u.dice?qI(u,n,r,i,g?r+=p*y/g:s):zL(u,n,r,g?n+=h*y/g:i,s),g-=y,c=f}return o}const bwe=function e(t){function n(r,i,s,o,a){vwe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(ywe);function nht(){var e=bwe,t=!1,n=1,r=1,i=[0],s=Kv,o=Kv,a=Kv,u=Kv,l=Kv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(gwe),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,y=d.x1-h,x=d.y1-h;y<p&&(p=y=(p+y)/2),x<g&&(g=x=(g+x)/2),d.x0=p,d.y0=g,d.x1=y,d.y1=x,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,g+=o(d)-h,y-=a(d)-h,x-=u(d)-h,y<p&&(p=y=(p+y)/2),x<g&&(g=x=(g+x)/2),e(d,p,g,y,x))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=hwe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:F_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:F_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:F_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:F_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:F_(+d),c):l},c}function rht(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,g,y,x){if(f>=d-1){var b=s[f];b.x0=p,b.y0=g,b.x1=y,b.y1=x;return}for(var _=l[f],E=h/2+_,T=f+1,k=d-1;T<k;){var I=T+k>>>1;l[I]<E?T=I+1:k=I}E-l[T-1]<l[T]-E&&f+1<T&&--T;var R=l[T]-_,D=h-R;if(y-p>x-g){var L=h?(p*D+y*R)/h:y;c(f,T,R,p,g,L,x),c(T,d,D,L,g,y,x)}else{var M=h?(g*D+x*R)/h:x;c(f,T,R,p,g,y,M),c(T,d,D,p,M,y,x)}}}function iht(e,t,n,r,i){(e.depth&1?zL:qI)(e,t,n,r,i)}const sht=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,g=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?qI(l,i,s,o,g?s+=(a-s)*l.value/g:a):zL(l,i,s,g?i+=(o-i)*l.value/g:o,a),g-=l.value}else r._squarify=u=vwe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(ywe);function Wp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function _1(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const EU=Symbol("implicit");function zG(){var e=new dse,t=[],n=[],r=EU;function i(s){let o=e.get(s);if(o===void 0){if(r!==EU)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new dse;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return zG(t,n).unknown(r)},Wp.apply(i,arguments),i}function oht(e){return function(){return e}}function TU(e){return+e}var Aoe=[0,1];function Rl(e){return e}function SU(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:oht(isNaN(t)?NaN:.5)}function aht(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function uht(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=SU(i,r),s=n(o,s)):(r=SU(r,i),s=n(s,o)),function(a){return s(r(a))}}function lht(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=SU(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=Uy(e,a,1,r)-1;return s[u](i[u](a))}}function WI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function VL(){var e=Aoe,t=Aoe,n=w1,r,i,s,o=Rl,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Rl&&(o=aht(e[0],e[d-1])),a=d>2?lht:uht,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),yf)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,TU),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=UI,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Rl,c()):o!==Rl},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function xwe(){return VL()(Rl,Rl)}function wwe(e,t,n,r){var i=zy(e,t,n),s;switch(r=$b(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Exe(i,o))&&(r.precision=s),NG(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Txe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=_xe(i))&&(r.precision=s-(r.type==="%")*2);break}}return FL(r)}function Cx(e){var t=e.domain;return e.ticks=function(n){var r=t();return B7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return wwe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=j7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function HL(){var e=xwe();return e.copy=function(){return WI(e,HL())},Wp.apply(e,arguments),Cx(e)}function _we(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,TU),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return _we(e).unknown(t)},e=arguments.length?Array.from(e,TU):[0,1],Cx(n)}function Ewe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function koe(e){return Math.log(e)}function Ioe(e){return Math.exp(e)}function cht(e){return-Math.log(-e)}function fht(e){return-Math.exp(-e)}function dht(e){return isFinite(e)?+("1e"+e):e<0?0:e}function hht(e){return e===10?dht:e===Math.E?Math.exp:t=>Math.pow(e,t)}function pht(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Roe(e){return(t,n)=>-e(-t,n)}function VG(e){const t=e(koe,Ioe),n=t.domain;let r=10,i,s;function o(){return i=pht(r),s=hht(r),n()[0]<0?(i=Roe(i),s=Roe(s),e(cht,fht)):e(koe,Ioe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,g;const y=a==null?10:+a;let x=[];if(!(r%1)&&h-d<y){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/s(-d):p*s(d),!(g<l)){if(g>c)break;x.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/s(-d):p*s(d),!(g<l)){if(g>c)break;x.push(g)}x.length*2<y&&(x=B7(l,c,y))}else x=B7(d,h,Math.min(h-d,y)).map(s);return f?x.reverse():x},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=$b(u)).precision==null&&(u.trim=!0),u=FL(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(Ewe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function Twe(){const e=VG(VL()).domain([1,10]);return e.copy=()=>WI(e,Twe()).base(e.base()),Wp.apply(e,arguments),e}function Poe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Doe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function HG(e){var t=1,n=e(Poe(t),Doe(t));return n.constant=function(r){return arguments.length?e(Poe(t=+r),Doe(t)):t},Cx(n)}function Swe(){var e=HG(VL());return e.copy=function(){return WI(e,Swe()).constant(e.constant())},Wp.apply(e,arguments)}function Noe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function mht(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ght(e){return e<0?-e*e:e*e}function qG(e){var t=e(Rl,Rl),n=1;function r(){return n===1?e(Rl,Rl):n===.5?e(mht,ght):e(Noe(n),Noe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Cx(t)}function WG(){var e=qG(VL());return e.copy=function(){return WI(e,WG()).exponent(e.exponent())},Wp.apply(e,arguments),e}function yht(){return WG.apply(null,arguments).exponent(.5)}function Cwe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=_be(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Uy(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(p0),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Cwe().domain(e).range(t).unknown(r)},Wp.apply(s,arguments)}function Awe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[Uy(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Awe().domain([e,t]).range(i).unknown(s)},Wp.apply(Cx(o),arguments)}function kwe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Uy(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return kwe().domain(e).range(t).unknown(n)},Wp.apply(i,arguments)}const I9=new Date,R9=new Date;function wo(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>wo(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(I9.setTime(+s),R9.setTime(+o),e(I9),e(R9),Math.floor(n(I9,R9))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const WE=wo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);WE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?wo(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):WE);WE.range;const r0=1e3,wf=r0*60,i0=wf*60,L0=i0*24,GG=L0*7,Ooe=L0*30,P9=L0*365,s0=wo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*r0)},(e,t)=>(t-e)/r0,e=>e.getUTCSeconds());s0.range;const qL=wo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*r0)},(e,t)=>{e.setTime(+e+t*wf)},(e,t)=>(t-e)/wf,e=>e.getMinutes());qL.range;const WL=wo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wf)},(e,t)=>(t-e)/wf,e=>e.getUTCMinutes());WL.range;const GL=wo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*r0-e.getMinutes()*wf)},(e,t)=>{e.setTime(+e+t*i0)},(e,t)=>(t-e)/i0,e=>e.getHours());GL.range;const YL=wo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*i0)},(e,t)=>(t-e)/i0,e=>e.getUTCHours());YL.range;const g0=wo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wf)/L0,e=>e.getDate()-1);g0.range;const Ey=wo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/L0,e=>e.getUTCDate()-1);Ey.range;const Iwe=wo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/L0,e=>Math.floor(e/L0));Iwe.range;function Ax(e){return wo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*wf)/GG)}const aS=Ax(0),X4=Ax(1),vht=Ax(2),bht=Ax(3),GE=Ax(4),xht=Ax(5),wht=Ax(6);aS.range;X4.range;vht.range;bht.range;GE.range;xht.range;wht.range;function kx(e){return wo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/GG)}const uS=kx(0),Q4=kx(1),_ht=kx(2),Eht=kx(3),YE=kx(4),Tht=kx(5),Sht=kx(6);uS.range;Q4.range;_ht.range;Eht.range;YE.range;Tht.range;Sht.range;const Ak=wo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ak.range;const kk=wo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());kk.range;const Pp=wo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Pp.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Pp.range;const Dp=wo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Dp.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Dp.range;function Rwe(e,t,n,r,i,s){const o=[[s0,1,r0],[s0,5,5*r0],[s0,15,15*r0],[s0,30,30*r0],[s,1,wf],[s,5,5*wf],[s,15,15*wf],[s,30,30*wf],[i,1,i0],[i,3,3*i0],[i,6,6*i0],[i,12,12*i0],[r,1,L0],[r,2,2*L0],[n,1,GG],[t,1,Ooe],[t,3,3*Ooe],[e,1,P9]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=iS(([,,y])=>y).right(o,d);if(h===o.length)return e.every(zy(l/P9,c/P9,f));if(h===0)return WE.every(Math.max(zy(l,c,f),1));const[p,g]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(g)}return[a,u]}const[Cht,Aht]=Rwe(Dp,kk,uS,Iwe,YL,WL),[kht,Iht]=Rwe(Pp,Ak,aS,g0,GL,qL);function D9(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function N9(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function eC(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Pwe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=tC(i),c=nC(i),f=tC(s),d=nC(s),h=tC(o),p=nC(o),g=tC(a),y=nC(a),x=tC(u),b=nC(u),_={a:ne,A:Z,b:ie,B:q,c:null,d:joe,e:joe,f:Jht,g:upt,G:cpt,H:Kht,I:Xht,j:Qht,L:Dwe,m:Zht,M:ept,p:U,q:X,Q:Voe,s:Hoe,S:tpt,u:npt,U:rpt,V:ipt,w:spt,W:opt,x:null,X:null,y:apt,Y:lpt,Z:fpt,"%":zoe},E={a:V,A:K,b:ee,B:fe,c:null,d:Uoe,e:Uoe,f:mpt,g:Spt,G:Apt,H:dpt,I:hpt,j:ppt,L:Owe,m:gpt,M:ypt,p:Ee,q:ye,Q:Voe,s:Hoe,S:vpt,u:bpt,U:xpt,V:wpt,w:_pt,W:Ept,x:null,X:null,y:Tpt,Y:Cpt,Z:kpt,"%":zoe},T={a:L,A:M,b:z,B:F,c:H,d:Foe,e:Foe,f:qht,g:Moe,G:Loe,H:Boe,I:Boe,j:Uht,L:Hht,m:jht,M:zht,p:D,q:Bht,Q:Ght,s:Yht,S:Vht,u:Oht,U:$ht,V:Lht,w:Nht,W:Mht,x:Q,X:J,y:Moe,Y:Loe,Z:Fht,"%":Wht};_.x=k(n,_),_.X=k(r,_),_.c=k(t,_),E.x=k(n,E),E.X=k(r,E),E.c=k(t,E);function k(_e,De){return function(me){var de=[],$e=-1,Pe=0,Ze=_e.length,it,Ge,et;for(me instanceof Date||(me=new Date(+me));++$e<Ze;)_e.charCodeAt($e)===37&&(de.push(_e.slice(Pe,$e)),(Ge=$oe[it=_e.charAt(++$e)])!=null?it=_e.charAt(++$e):Ge=it==="e"?" ":"0",(et=De[it])&&(it=et(me,Ge)),de.push(it),Pe=$e+1);return de.push(_e.slice(Pe,$e)),de.join("")}}function I(_e,De){return function(me){var de=eC(1900,void 0,1),$e=R(de,_e,me+="",0),Pe,Ze;if($e!=me.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(De&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Pe=N9(eC(de.y,0,1)),Ze=Pe.getUTCDay(),Pe=Ze>4||Ze===0?Q4.ceil(Pe):Q4(Pe),Pe=Ey.offset(Pe,(de.V-1)*7),de.y=Pe.getUTCFullYear(),de.m=Pe.getUTCMonth(),de.d=Pe.getUTCDate()+(de.w+6)%7):(Pe=D9(eC(de.y,0,1)),Ze=Pe.getDay(),Pe=Ze>4||Ze===0?X4.ceil(Pe):X4(Pe),Pe=g0.offset(Pe,(de.V-1)*7),de.y=Pe.getFullYear(),de.m=Pe.getMonth(),de.d=Pe.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),Ze="Z"in de?N9(eC(de.y,0,1)).getUTCDay():D9(eC(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(Ze+5)%7:de.w+de.U*7-(Ze+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,N9(de)):D9(de)}}function R(_e,De,me,de){for(var $e=0,Pe=De.length,Ze=me.length,it,Ge;$e<Pe;){if(de>=Ze)return-1;if(it=De.charCodeAt($e++),it===37){if(it=De.charAt($e++),Ge=T[it in $oe?De.charAt($e++):it],!Ge||(de=Ge(_e,me,de))<0)return-1}else if(it!=me.charCodeAt(de++))return-1}return de}function D(_e,De,me){var de=l.exec(De.slice(me));return de?(_e.p=c.get(de[0].toLowerCase()),me+de[0].length):-1}function L(_e,De,me){var de=h.exec(De.slice(me));return de?(_e.w=p.get(de[0].toLowerCase()),me+de[0].length):-1}function M(_e,De,me){var de=f.exec(De.slice(me));return de?(_e.w=d.get(de[0].toLowerCase()),me+de[0].length):-1}function z(_e,De,me){var de=x.exec(De.slice(me));return de?(_e.m=b.get(de[0].toLowerCase()),me+de[0].length):-1}function F(_e,De,me){var de=g.exec(De.slice(me));return de?(_e.m=y.get(de[0].toLowerCase()),me+de[0].length):-1}function H(_e,De,me){return R(_e,t,De,me)}function Q(_e,De,me){return R(_e,n,De,me)}function J(_e,De,me){return R(_e,r,De,me)}function ne(_e){return o[_e.getDay()]}function Z(_e){return s[_e.getDay()]}function ie(_e){return u[_e.getMonth()]}function q(_e){return a[_e.getMonth()]}function U(_e){return i[+(_e.getHours()>=12)]}function X(_e){return 1+~~(_e.getMonth()/3)}function V(_e){return o[_e.getUTCDay()]}function K(_e){return s[_e.getUTCDay()]}function ee(_e){return u[_e.getUTCMonth()]}function fe(_e){return a[_e.getUTCMonth()]}function Ee(_e){return i[+(_e.getUTCHours()>=12)]}function ye(_e){return 1+~~(_e.getUTCMonth()/3)}return{format:function(_e){var De=k(_e+="",_);return De.toString=function(){return _e},De},parse:function(_e){var De=I(_e+="",!1);return De.toString=function(){return _e},De},utcFormat:function(_e){var De=k(_e+="",E);return De.toString=function(){return _e},De},utcParse:function(_e){var De=I(_e+="",!0);return De.toString=function(){return _e},De}}}var $oe={"-":"",_:" ",0:"0"},Ko=/^\s*\d+/,Rht=/^%/,Pht=/[\\^$*+?|[\]().{}]/g;function zr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Dht(e){return e.replace(Pht,"\\$&")}function tC(e){return new RegExp("^(?:"+e.map(Dht).join("|")+")","i")}function nC(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Nht(e,t,n){var r=Ko.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Oht(e,t,n){var r=Ko.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function $ht(e,t,n){var r=Ko.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Lht(e,t,n){var r=Ko.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Mht(e,t,n){var r=Ko.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Loe(e,t,n){var r=Ko.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Moe(e,t,n){var r=Ko.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Fht(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Bht(e,t,n){var r=Ko.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function jht(e,t,n){var r=Ko.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Foe(e,t,n){var r=Ko.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Uht(e,t,n){var r=Ko.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Boe(e,t,n){var r=Ko.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function zht(e,t,n){var r=Ko.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Vht(e,t,n){var r=Ko.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Hht(e,t,n){var r=Ko.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function qht(e,t,n){var r=Ko.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Wht(e,t,n){var r=Rht.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Ght(e,t,n){var r=Ko.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Yht(e,t,n){var r=Ko.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function joe(e,t){return zr(e.getDate(),t,2)}function Kht(e,t){return zr(e.getHours(),t,2)}function Xht(e,t){return zr(e.getHours()%12||12,t,2)}function Qht(e,t){return zr(1+g0.count(Pp(e),e),t,3)}function Dwe(e,t){return zr(e.getMilliseconds(),t,3)}function Jht(e,t){return Dwe(e,t)+"000"}function Zht(e,t){return zr(e.getMonth()+1,t,2)}function ept(e,t){return zr(e.getMinutes(),t,2)}function tpt(e,t){return zr(e.getSeconds(),t,2)}function npt(e){var t=e.getDay();return t===0?7:t}function rpt(e,t){return zr(aS.count(Pp(e)-1,e),t,2)}function Nwe(e){var t=e.getDay();return t>=4||t===0?GE(e):GE.ceil(e)}function ipt(e,t){return e=Nwe(e),zr(GE.count(Pp(e),e)+(Pp(e).getDay()===4),t,2)}function spt(e){return e.getDay()}function opt(e,t){return zr(X4.count(Pp(e)-1,e),t,2)}function apt(e,t){return zr(e.getFullYear()%100,t,2)}function upt(e,t){return e=Nwe(e),zr(e.getFullYear()%100,t,2)}function lpt(e,t){return zr(e.getFullYear()%1e4,t,4)}function cpt(e,t){var n=e.getDay();return e=n>=4||n===0?GE(e):GE.ceil(e),zr(e.getFullYear()%1e4,t,4)}function fpt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+zr(t/60|0,"0",2)+zr(t%60,"0",2)}function Uoe(e,t){return zr(e.getUTCDate(),t,2)}function dpt(e,t){return zr(e.getUTCHours(),t,2)}function hpt(e,t){return zr(e.getUTCHours()%12||12,t,2)}function ppt(e,t){return zr(1+Ey.count(Dp(e),e),t,3)}function Owe(e,t){return zr(e.getUTCMilliseconds(),t,3)}function mpt(e,t){return Owe(e,t)+"000"}function gpt(e,t){return zr(e.getUTCMonth()+1,t,2)}function ypt(e,t){return zr(e.getUTCMinutes(),t,2)}function vpt(e,t){return zr(e.getUTCSeconds(),t,2)}function bpt(e){var t=e.getUTCDay();return t===0?7:t}function xpt(e,t){return zr(uS.count(Dp(e)-1,e),t,2)}function $we(e){var t=e.getUTCDay();return t>=4||t===0?YE(e):YE.ceil(e)}function wpt(e,t){return e=$we(e),zr(YE.count(Dp(e),e)+(Dp(e).getUTCDay()===4),t,2)}function _pt(e){return e.getUTCDay()}function Ept(e,t){return zr(Q4.count(Dp(e)-1,e),t,2)}function Tpt(e,t){return zr(e.getUTCFullYear()%100,t,2)}function Spt(e,t){return e=$we(e),zr(e.getUTCFullYear()%100,t,2)}function Cpt(e,t){return zr(e.getUTCFullYear()%1e4,t,4)}function Apt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?YE(e):YE.ceil(e),zr(e.getUTCFullYear()%1e4,t,4)}function kpt(){return"+0000"}function zoe(){return"%"}function Voe(e){return+e}function Hoe(e){return Math.floor(+e/1e3)}var m_,YG,Lwe,KG,Mwe;Ipt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ipt(e){return m_=Pwe(e),YG=m_.format,Lwe=m_.parse,KG=m_.utcFormat,Mwe=m_.utcParse,m_}function Rpt(e){return new Date(e)}function Ppt(e){return e instanceof Date?+e:+new Date(+e)}function XG(e,t,n,r,i,s,o,a,u,l){var c=xwe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),g=l("%I:%M"),y=l("%I %p"),x=l("%a %d"),b=l("%b %d"),_=l("%B"),E=l("%Y");function T(k){return(u(k)<k?h:a(k)<k?p:o(k)<k?g:s(k)<k?y:r(k)<k?i(k)<k?x:b:n(k)<k?_:E)(k)}return c.invert=function(k){return new Date(f(k))},c.domain=function(k){return arguments.length?d(Array.from(k,Ppt)):d().map(Rpt)},c.ticks=function(k){var I=d();return e(I[0],I[I.length-1],k??10)},c.tickFormat=function(k,I){return I==null?T:l(I)},c.nice=function(k){var I=d();return(!k||typeof k.range!="function")&&(k=t(I[0],I[I.length-1],k??10)),k?d(Ewe(I,k)):c},c.copy=function(){return WI(c,XG(e,t,n,r,i,s,o,a,u,l))},c}function Dpt(){return Wp.apply(XG(kht,Iht,Pp,Ak,aS,g0,GL,qL,s0,YG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Npt(){return Wp.apply(XG(Cht,Aht,Dp,kk,uS,Ey,YL,WL,s0,KG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function KL(){var e=0,t=1,n,r,i,s,o=Rl,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(w1),l.rangeRound=c(UI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function E1(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function QG(){var e=Cx(KL()(Rl));return e.copy=function(){return E1(e,QG())},_1.apply(e,arguments)}function Fwe(){var e=VG(KL()).domain([1,10]);return e.copy=function(){return E1(e,Fwe()).base(e.base())},_1.apply(e,arguments)}function Bwe(){var e=HG(KL());return e.copy=function(){return E1(e,Bwe()).constant(e.constant())},_1.apply(e,arguments)}function JG(){var e=qG(KL());return e.copy=function(){return E1(e,JG()).exponent(e.exponent())},_1.apply(e,arguments)}function Opt(){return JG.apply(null,arguments).exponent(.5)}function XL(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Rl,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-s)*(r*g<r*s?a:u),l(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(l=g,h):l};function p(g){return function(y){var x,b,_;return arguments.length?([x,b,_]=y,l=TG(g,[x,b,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(w1),h.rangeRound=p(UI),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),s=g(t),o=g(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function jwe(){var e=Cx(XL()(Rl));return e.copy=function(){return E1(e,jwe())},_1.apply(e,arguments)}function Uwe(){var e=VG(XL()).domain([.1,1,10]);return e.copy=function(){return E1(e,Uwe()).base(e.base())},_1.apply(e,arguments)}function zwe(){var e=HG(XL());return e.copy=function(){return E1(e,zwe()).constant(e.constant())},_1.apply(e,arguments)}function ZG(){var e=qG(XL());return e.copy=function(){return E1(e,ZG()).exponent(e.exponent())},_1.apply(e,arguments)}function $pt(){return ZG.apply(null,arguments).exponent(.5)}function Gp(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Lpt=Gp("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Mpt=Gp("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Fpt=Gp("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Bpt=Gp("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),jpt=Gp("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Upt=Gp("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),zpt=Gp("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Vpt=Gp("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Hpt=Gp("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),qpt=Gp("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Zr(e){return function(){return e}}const qoe=Math.abs,Ha=Math.atan2,_v=Math.cos,Wpt=Math.max,O9=Math.min,Fh=Math.sin,ub=Math.sqrt,qa=1e-12,KE=Math.PI,J4=KE/2,Vwe=2*KE;function Gpt(e){return e>1?0:e<-1?KE:Math.acos(e)}function Woe(e){return e>=1?J4:e<=-1?-J4:Math.asin(e)}function QL(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new kG(t)}function Ypt(e){return e.innerRadius}function Kpt(e){return e.outerRadius}function Xpt(e){return e.startAngle}function Qpt(e){return e.endAngle}function Jpt(e){return e&&e.padAngle}function Zpt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<qa))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function PD(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/ub(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,g=r+f,y=(d+p)/2,x=(h+g)/2,b=p-d,_=g-h,E=b*b+_*_,T=i-s,k=d*g-p*h,I=(_<0?-1:1)*ub(Wpt(0,T*T*E-k*k)),R=(k*_-b*I)/E,D=(-k*b-_*I)/E,L=(k*_+b*I)/E,M=(-k*b+_*I)/E,z=R-y,F=D-x,H=L-y,Q=M-x;return z*z+F*F>H*H+Q*Q&&(R=L,D=M),{cx:R,cy:D,x01:-c,y01:-f,x11:R*(i/T-1),y11:D*(i/T-1)}}function emt(){var e=Ypt,t=Kpt,n=Zr(0),r=null,i=Xpt,s=Qpt,o=Jpt,a=null,u=QL(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-J4,g=s.apply(this,arguments)-J4,y=qoe(g-p),x=g>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>qa))a.moveTo(0,0);else if(y>Vwe-qa)a.moveTo(h*_v(p),h*Fh(p)),a.arc(0,0,h,p,g,!x),d>qa&&(a.moveTo(d*_v(g),d*Fh(g)),a.arc(0,0,d,g,p,x));else{var b=p,_=g,E=p,T=g,k=y,I=y,R=o.apply(this,arguments)/2,D=R>qa&&(r?+r.apply(this,arguments):ub(d*d+h*h)),L=O9(qoe(h-d)/2,+n.apply(this,arguments)),M=L,z=L,F,H;if(D>qa){var Q=Woe(D/d*Fh(R)),J=Woe(D/h*Fh(R));(k-=Q*2)>qa?(Q*=x?1:-1,E+=Q,T-=Q):(k=0,E=T=(p+g)/2),(I-=J*2)>qa?(J*=x?1:-1,b+=J,_-=J):(I=0,b=_=(p+g)/2)}var ne=h*_v(b),Z=h*Fh(b),ie=d*_v(T),q=d*Fh(T);if(L>qa){var U=h*_v(_),X=h*Fh(_),V=d*_v(E),K=d*Fh(E),ee;if(y<KE)if(ee=Zpt(ne,Z,V,K,U,X,ie,q)){var fe=ne-ee[0],Ee=Z-ee[1],ye=U-ee[0],_e=X-ee[1],De=1/Fh(Gpt((fe*ye+Ee*_e)/(ub(fe*fe+Ee*Ee)*ub(ye*ye+_e*_e)))/2),me=ub(ee[0]*ee[0]+ee[1]*ee[1]);M=O9(L,(d-me)/(De-1)),z=O9(L,(h-me)/(De+1))}else M=z=0}I>qa?z>qa?(F=PD(V,K,ne,Z,h,z,x),H=PD(U,X,ie,q,h,z,x),a.moveTo(F.cx+F.x01,F.cy+F.y01),z<L?a.arc(F.cx,F.cy,z,Ha(F.y01,F.x01),Ha(H.y01,H.x01),!x):(a.arc(F.cx,F.cy,z,Ha(F.y01,F.x01),Ha(F.y11,F.x11),!x),a.arc(0,0,h,Ha(F.cy+F.y11,F.cx+F.x11),Ha(H.cy+H.y11,H.cx+H.x11),!x),a.arc(H.cx,H.cy,z,Ha(H.y11,H.x11),Ha(H.y01,H.x01),!x))):(a.moveTo(ne,Z),a.arc(0,0,h,b,_,!x)):a.moveTo(ne,Z),!(d>qa)||!(k>qa)?a.lineTo(ie,q):M>qa?(F=PD(ie,q,U,X,d,-M,x),H=PD(ne,Z,V,K,d,-M,x),a.lineTo(F.cx+F.x01,F.cy+F.y01),M<L?a.arc(F.cx,F.cy,M,Ha(F.y01,F.x01),Ha(H.y01,H.x01),!x):(a.arc(F.cx,F.cy,M,Ha(F.y01,F.x01),Ha(F.y11,F.x11),!x),a.arc(0,0,d,Ha(F.cy+F.y11,F.cx+F.x11),Ha(H.cy+H.y11,H.cx+H.x11),x),a.arc(H.cx,H.cy,M,Ha(H.y11,H.x11),Ha(H.y01,H.x01),!x))):a.arc(0,0,d,T,E,x)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-KE/2;return[_v(f)*c,Fh(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Zr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Zr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Zr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Zr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Zr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Zr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Zr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function Hwe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qwe(e){this._context=e}qwe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function eY(e){return new qwe(e)}function Wwe(e){return e[0]}function Gwe(e){return e[1]}function Ywe(e,t){var n=Zr(!0),r=null,i=eY,s=null,o=QL(a);e=typeof e=="function"?e:e===void 0?Wwe:Zr(e),t=typeof t=="function"?t:t===void 0?Gwe:Zr(t);function a(u){var l,c=(u=Hwe(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Zr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Zr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Zr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function Kwe(e,t,n){var r=null,i=Zr(!0),s=null,o=eY,a=null,u=QL(l);e=typeof e=="function"?e:e===void 0?Wwe:Zr(+e),t=typeof t=="function"?t:Zr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Gwe:Zr(+n);function l(f){var d,h,p,g=(f=Hwe(f)).length,y,x=!1,b,_=new Array(g),E=new Array(g);for(s==null&&(a=o(b=u())),d=0;d<=g;++d){if(!(d<g&&i(y=f[d],d,f))===x)if(x=!x)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],E[p]);a.lineEnd(),a.areaEnd()}x&&(_[d]=+e(y,d,f),E[d]=+t(y,d,f),a.point(r?+r(y,d,f):_[d],n?+n(y,d,f):E[d]))}if(b)return a=null,b+""||null}function c(){return Ywe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Zr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Zr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Zr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Zr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Zr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Zr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Zr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const tmt={draw(e,t){const n=ub(t/KE);e.moveTo(n,0),e.arc(0,0,n,0,Vwe)}};function nmt(e,t){let n=null,r=QL(i);e=typeof e=="function"?e:Zr(e||tmt),t=typeof t=="function"?t:Zr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Zr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Zr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Hy(){}function Z4(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function JL(e){this._context=e}JL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Z4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Z4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rmt(e){return new JL(e)}function Xwe(e){this._context=e}Xwe.prototype={areaStart:Hy,areaEnd:Hy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Z4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function imt(e){return new Xwe(e)}function Qwe(e){this._context=e}Qwe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Z4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function smt(e){return new Qwe(e)}function Jwe(e,t){this._basis=new JL(e),this._beta=t}Jwe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const omt=function e(t){function n(r){return t===1?new JL(r):new Jwe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function e6(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function tY(e,t){this._context=e,this._k=(1-t)/6}tY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:e6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:e6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const amt=function e(t){function n(r){return new tY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function nY(e,t){this._context=e,this._k=(1-t)/6}nY.prototype={areaStart:Hy,areaEnd:Hy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:e6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const umt=function e(t){function n(r){return new nY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function rY(e,t){this._context=e,this._k=(1-t)/6}rY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:e6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lmt=function e(t){function n(r){return new rY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function iY(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>qa){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>qa){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function Zwe(e,t){this._context=e,this._alpha=t}Zwe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:iY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const cmt=function e(t){function n(r){return t?new Zwe(r,t):new tY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function e_e(e,t){this._context=e,this._alpha=t}e_e.prototype={areaStart:Hy,areaEnd:Hy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:iY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const fmt=function e(t){function n(r){return t?new e_e(r,t):new nY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function t_e(e,t){this._context=e,this._alpha=t}t_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:iY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const dmt=function e(t){function n(r){return t?new t_e(r,t):new rY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function n_e(e){this._context=e}n_e.prototype={areaStart:Hy,areaEnd:Hy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function hmt(e){return new n_e(e)}function Goe(e){return e<0?-1:1}function Yoe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Goe(s)+Goe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Koe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function $9(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function t6(e){this._context=e}t6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$9(this,this._t0,Koe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,$9(this,Koe(this,n=Yoe(this,e,t)),n);break;default:$9(this,this._t0,n=Yoe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function r_e(e){this._context=new i_e(e)}(r_e.prototype=Object.create(t6.prototype)).point=function(e,t){t6.prototype.point.call(this,t,e)};function i_e(e){this._context=e}i_e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function pmt(e){return new t6(e)}function mmt(e){return new r_e(e)}function s_e(e){this._context=e}s_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Xoe(e),i=Xoe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Xoe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function gmt(e){return new s_e(e)}function ZL(e,t){this._context=e,this._t=t}ZL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ymt(e){return new ZL(e,.5)}function vmt(e){return new ZL(e,0)}function bmt(e){return new ZL(e,1)}function qC(e,t,n){this.k=e,this.x=t,this.y=n}qC.prototype={constructor:qC,scale:function(e){return e===1?this:new qC(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new qC(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};qC.prototype;var WC={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var xmt=WC.exports,Qoe;function wmt(){return Qoe||(Qoe=1,function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,g=2,y=1,x=2,b=4,_=8,E=16,T=32,k=64,I=128,R=256,D=512,L=30,M="...",z=800,F=16,H=1,Q=2,J=3,ne=1/0,Z=9007199254740991,ie=17976931348623157e292,q=NaN,U=4294967295,X=U-1,V=U>>>1,K=[["ary",I],["bind",y],["bindKey",x],["curry",_],["curryRight",E],["flip",D],["partial",T],["partialRight",k],["rearg",R]],ee="[object Arguments]",fe="[object Array]",Ee="[object AsyncFunction]",ye="[object Boolean]",_e="[object Date]",De="[object DOMException]",me="[object Error]",de="[object Function]",$e="[object GeneratorFunction]",Pe="[object Map]",Ze="[object Number]",it="[object Null]",Ge="[object Object]",et="[object Promise]",ut="[object Proxy]",Tt="[object RegExp]",xt="[object Set]",Dt="[object String]",Ue="[object Symbol]",Ft="[object Undefined]",tn="[object WeakMap]",Re="[object WeakSet]",Ve="[object ArrayBuffer]",yt="[object DataView]",$t="[object Float32Array]",Bt="[object Float64Array]",dn="[object Int8Array]",Nn="[object Int16Array]",dr="[object Int32Array]",ti="[object Uint8Array]",kn="[object Uint8ClampedArray]",Bn="[object Uint16Array]",Xr="[object Uint32Array]",ir=/\b__p \+= '';/g,zs=/\b(__p \+=) '' \+/g,gi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ni=/&(?:amp|lt|gt|quot|#39);/g,yi=/[&<>"']/g,Ar=RegExp(ni.source),Vs=RegExp(yi.source),Yu=/<%-([\s\S]+?)%>/g,Eo=/<%([\s\S]+?)%>/g,Ra=/<%=([\s\S]+?)%>/g,kr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ui=/^\w*$/,$r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,os=/[\\^$.*+?()[\]{}|]/g,yr=RegExp(os.source),vi=/^\s+/,Hs=/\s/,Ts=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ro=/\{\n\/\* \[wrapped with (.+)\] \*/,pu=/,? & /,qf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hr=/[()=,{}\[\]\/\s]/,Ku=/\\(\\)?/g,Di=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qo=/\w*$/,io=/^[-+]0x[0-9a-f]+$/i,mh=/^0b[01]+$/i,Wf=/^\[object .+?Constructor\]$/,Wc=/^0o[0-7]+$/i,Gc=/^(?:0|[1-9]\d*)$/,ql=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wl=/($^)/,Gl=/['\n\r\u2028\u2029\\]/g,Yn="\\ud800-\\udfff",Gf="\\u0300-\\u036f",Ss="\\ufe20-\\ufe2f",mu="\\u20d0-\\u20ff",as=Gf+Ss+mu,Xu="\\u2700-\\u27bf",Yf="a-z\\xdf-\\xf6\\xf8-\\xff",Qu="\\xac\\xb1\\xd7\\xf7",Cs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gh="\\u2000-\\u206f",As=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ae="A-Z\\xc0-\\xd6\\xd8-\\xde",we="\\ufe0e\\ufe0f",pe=Qu+Cs+gh+As,ke="['’]",Oe="["+Yn+"]",Ae="["+pe+"]",tt="["+as+"]",ht="\\d+",gt="["+Xu+"]",pt="["+Yf+"]",At="[^"+Yn+pe+ht+Xu+Yf+ae+"]",zt="\\ud83c[\\udffb-\\udfff]",Tn="(?:"+tt+"|"+zt+")",on="[^"+Yn+"]",jn="(?:\\ud83c[\\udde6-\\uddff]){2}",an="[\\ud800-\\udbff][\\udc00-\\udfff]",Zn="["+ae+"]",us="\\u200d",Jo="(?:"+pt+"|"+At+")",Ju="(?:"+Zn+"|"+At+")",Kf="(?:"+ke+"(?:d|ll|m|re|s|t|ve))?",Yl="(?:"+ke+"(?:D|LL|M|RE|S|T|VE))?",Xf=Tn+"?",qs="["+we+"]?",Ni="(?:"+us+"(?:"+[on,jn,an].join("|")+")"+qs+Xf+")*",Ws="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Zo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Kl=qs+Xf+Ni,ea="(?:"+[gt,jn,an].join("|")+")"+Kl,Pa="(?:"+[on+tt+"?",tt,jn,an,Oe].join("|")+")",rg=RegExp(ke,"g"),Zu=RegExp(tt,"g"),Ui=RegExp(zt+"(?="+zt+")|"+Pa+Kl,"g"),L1=RegExp([Zn+"?"+pt+"+"+Kf+"(?="+[Ae,Zn,"$"].join("|")+")",Ju+"+"+Yl+"(?="+[Ae,Zn+Jo,"$"].join("|")+")",Zn+"?"+Jo+"+"+Kf,Zn+"+"+Yl,Zo,Ws,ht,ea].join("|"),"g"),sm=RegExp("["+us+Yn+as+we+"]"),Xl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ig=-1,er={};er[$t]=er[Bt]=er[dn]=er[Nn]=er[dr]=er[ti]=er[kn]=er[Bn]=er[Xr]=!0,er[ee]=er[fe]=er[Ve]=er[ye]=er[yt]=er[_e]=er[me]=er[de]=er[Pe]=er[Ze]=er[Ge]=er[Tt]=er[xt]=er[Dt]=er[tn]=!1;var Kn={};Kn[ee]=Kn[fe]=Kn[Ve]=Kn[yt]=Kn[ye]=Kn[_e]=Kn[$t]=Kn[Bt]=Kn[dn]=Kn[Nn]=Kn[dr]=Kn[Pe]=Kn[Ze]=Kn[Ge]=Kn[Tt]=Kn[xt]=Kn[Dt]=Kn[Ue]=Kn[ti]=Kn[kn]=Kn[Bn]=Kn[Xr]=!0,Kn[me]=Kn[de]=Kn[tn]=!1;var Ql={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Se={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ye={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Jt=parseFloat,Un=parseInt,ur=typeof ho=="object"&&ho&&ho.Object===Object&&ho,Fr=typeof self=="object"&&self&&self.Object===Object&&self,un=ur||Fr||Function("return this")(),vr=t&&!t.nodeType&&t,Ir=vr&&!0&&e&&!e.nodeType&&e,ls=Ir&&Ir.exports===vr,Da=ls&&ur.process,bi=function(){try{var Ne=Ir&&Ir.require&&Ir.require("util").types;return Ne||Da&&Da.binding&&Da.binding("util")}catch{}}(),Kc=bi&&bi.isArrayBuffer,Qi=bi&&bi.isDate,el=bi&&bi.isMap,om=bi&&bi.isRegExp,Jl=bi&&bi.isSet,Hx=bi&&bi.isTypedArray;function Gs(Ne,nt,He){switch(He.length){case 0:return Ne.call(nt);case 1:return Ne.call(nt,He[0]);case 2:return Ne.call(nt,He[0],He[1]);case 3:return Ne.call(nt,He[0],He[1],He[2])}return Ne.apply(nt,He)}function Qf(Ne,nt,He,Wt){for(var In=-1,Rr=Ne==null?0:Ne.length;++In<Rr;){var cs=Ne[In];nt(Wt,cs,He(cs),Ne)}return Wt}function ks(Ne,nt){for(var He=-1,Wt=Ne==null?0:Ne.length;++He<Wt&&nt(Ne[He],He,Ne)!==!1;);return Ne}function am(Ne,nt){for(var He=Ne==null?0:Ne.length;He--&&nt(Ne[He],He,Ne)!==!1;);return Ne}function um(Ne,nt){for(var He=-1,Wt=Ne==null?0:Ne.length;++He<Wt;)if(!nt(Ne[He],He,Ne))return!1;return!0}function tl(Ne,nt){for(var He=-1,Wt=Ne==null?0:Ne.length,In=0,Rr=[];++He<Wt;){var cs=Ne[He];nt(cs,He,Ne)&&(Rr[In++]=cs)}return Rr}function lm(Ne,nt){var He=Ne==null?0:Ne.length;return!!He&&Jf(Ne,nt,0)>-1}function yh(Ne,nt,He){for(var Wt=-1,In=Ne==null?0:Ne.length;++Wt<In;)if(He(nt,Ne[Wt]))return!0;return!1}function Gr(Ne,nt){for(var He=-1,Wt=Ne==null?0:Ne.length,In=Array(Wt);++He<Wt;)In[He]=nt(Ne[He],He,Ne);return In}function Zl(Ne,nt){for(var He=-1,Wt=nt.length,In=Ne.length;++He<Wt;)Ne[In+He]=nt[He];return Ne}function ec(Ne,nt,He,Wt){var In=-1,Rr=Ne==null?0:Ne.length;for(Wt&&Rr&&(He=Ne[++In]);++In<Rr;)He=nt(He,Ne[In],In,Ne);return He}function qx(Ne,nt,He,Wt){var In=Ne==null?0:Ne.length;for(Wt&&In&&(He=Ne[--In]);In--;)He=nt(He,Ne[In],In,Ne);return He}function sg(Ne,nt){for(var He=-1,Wt=Ne==null?0:Ne.length;++He<Wt;)if(nt(Ne[He],He,Ne))return!0;return!1}var Wx=te("length");function M1(Ne){return Ne.split("")}function og(Ne){return Ne.match(qf)||[]}function To(Ne,nt,He){var Wt;return He(Ne,function(In,Rr,cs){if(nt(In,Rr,cs))return Wt=Rr,!1}),Wt}function cm(Ne,nt,He,Wt){for(var In=Ne.length,Rr=He+(Wt?1:-1);Wt?Rr--:++Rr<In;)if(nt(Ne[Rr],Rr,Ne))return Rr;return-1}function Jf(Ne,nt,He){return nt===nt?Yx(Ne,nt,He):cm(Ne,P,He)}function Xc(Ne,nt,He,Wt){for(var In=He-1,Rr=Ne.length;++In<Rr;)if(Wt(Ne[In],nt))return In;return-1}function P(Ne){return Ne!==Ne}function W(Ne,nt){var He=Ne==null?0:Ne.length;return He?Lt(Ne,nt)/He:q}function te(Ne){return function(nt){return nt==null?n:nt[Ne]}}function ue(Ne){return function(nt){return Ne==null?n:Ne[nt]}}function Fe(Ne,nt,He,Wt,In){return In(Ne,function(Rr,cs,Qr){He=Wt?(Wt=!1,Rr):nt(He,Rr,cs,Qr)}),He}function Ke(Ne,nt){var He=Ne.length;for(Ne.sort(nt);He--;)Ne[He]=Ne[He].value;return Ne}function Lt(Ne,nt){for(var He,Wt=-1,In=Ne.length;++Wt<In;){var Rr=nt(Ne[Wt]);Rr!==n&&(He=He===n?Rr:He+Rr)}return He}function Lr(Ne,nt){for(var He=-1,Wt=Array(Ne);++He<Ne;)Wt[He]=nt(He);return Wt}function Is(Ne,nt){return Gr(nt,function(He){return[He,Ne[He]]})}function lr(Ne){return Ne&&Ne.slice(0,Kx(Ne)+1).replace(vi,"")}function Br(Ne){return function(nt){return Ne(nt)}}function zi(Ne,nt){return Gr(nt,function(He){return Ne[He]})}function So(Ne,nt){return Ne.has(nt)}function Na(Ne,nt){for(var He=-1,Wt=Ne.length;++He<Wt&&Jf(nt,Ne[He],0)>-1;);return He}function vh(Ne,nt){for(var He=Ne.length;He--&&Jf(nt,Ne[He],0)>-1;);return He}function ag(Ne,nt){for(var He=Ne.length,Wt=0;He--;)Ne[He]===nt&&++Wt;return Wt}var MR=ue(Ql),FR=ue(ge);function BR(Ne){return"\\"+Ye[Ne]}function ug(Ne,nt){return Ne==null?n:Ne[nt]}function lg(Ne){return sm.test(Ne)}function Y5(Ne){return Xl.test(Ne)}function K5(Ne){for(var nt,He=[];!(nt=Ne.next()).done;)He.push(nt.value);return He}function Gx(Ne){var nt=-1,He=Array(Ne.size);return Ne.forEach(function(Wt,In){He[++nt]=[In,Wt]}),He}function DS(Ne,nt){return function(He){return Ne(nt(He))}}function nl(Ne,nt){for(var He=-1,Wt=Ne.length,In=0,Rr=[];++He<Wt;){var cs=Ne[He];(cs===nt||cs===c)&&(Ne[He]=c,Rr[In++]=He)}return Rr}function bh(Ne){var nt=-1,He=Array(Ne.size);return Ne.forEach(function(Wt){He[++nt]=Wt}),He}function X5(Ne){var nt=-1,He=Array(Ne.size);return Ne.forEach(function(Wt){He[++nt]=[Wt,Wt]}),He}function Yx(Ne,nt,He){for(var Wt=He-1,In=Ne.length;++Wt<In;)if(Ne[Wt]===nt)return Wt;return-1}function Q5(Ne,nt,He){for(var Wt=He+1;Wt--;)if(Ne[Wt]===nt)return Wt;return Wt}function fm(Ne){return lg(Ne)?UR(Ne):Wx(Ne)}function gu(Ne){return lg(Ne)?zR(Ne):M1(Ne)}function Kx(Ne){for(var nt=Ne.length;nt--&&Hs.test(Ne.charAt(nt)););return nt}var jR=ue(Se);function UR(Ne){for(var nt=Ui.lastIndex=0;Ui.test(Ne);)++nt;return nt}function zR(Ne){return Ne.match(Ui)||[]}function J5(Ne){return Ne.match(L1)||[]}var Z5=function Ne(nt){nt=nt==null?un:cg.defaults(un.Object(),nt,cg.pick(un,Yc));var He=nt.Array,Wt=nt.Date,In=nt.Error,Rr=nt.Function,cs=nt.Math,Qr=nt.Object,F1=nt.RegExp,eF=nt.String,rl=nt.TypeError,Zf=He.prototype,NS=Rr.prototype,Qc=Qr.prototype,fg=nt["__core-js_shared__"],B1=NS.toString,Pr=Qc.hasOwnProperty,dg=0,Xx=function(){var w=/[^.]+$/.exec(fg&&fg.keys&&fg.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),j1=Qc.toString,Qx=B1.call(Qr),VR=un._,HR=F1("^"+B1.call(Pr).replace(os,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U1=ls?nt.Buffer:n,ed=nt.Symbol,z1=nt.Uint8Array,OS=U1?U1.allocUnsafe:n,tc=DS(Qr.getPrototypeOf,Qr),Jx=Qr.create,Zx=Qc.propertyIsEnumerable,ew=Zf.splice,qR=ed?ed.isConcatSpreadable:n,td=ed?ed.iterator:n,dm=ed?ed.toStringTag:n,V1=function(){try{var w=Rh(Qr,"defineProperty");return w({},"",{}),w}catch{}}(),WR=nt.clearTimeout!==un.clearTimeout&&nt.clearTimeout,xi=Wt&&Wt.now!==un.Date.now&&Wt.now,$S=nt.setTimeout!==un.setTimeout&&nt.setTimeout,hm=cs.ceil,xh=cs.floor,tw=Qr.getOwnPropertySymbols,LS=U1?U1.isBuffer:n,hg=nt.isFinite,nw=Zf.join,pg=DS(Qr.keys,Qr),fs=cs.max,Co=cs.min,tF=Wt.now,GR=nt.parseInt,H1=cs.random,rw=Zf.reverse,q1=Rh(nt,"DataView"),pm=Rh(nt,"Map"),W1=Rh(nt,"Promise"),wh=Rh(nt,"Set"),G1=Rh(nt,"WeakMap"),mg=Rh(Qr,"create"),iw=G1&&new G1,gg={},MS=Ph(q1),_h=Ph(pm),YR=Ph(W1),yg=Ph(wh),Jc=Ph(G1),Eh=ed?ed.prototype:n,yu=Eh?Eh.valueOf:n,sw=Eh?Eh.toString:n;function oe(w){if(hs(w)&&!Hn(w)&&!(w instanceof Vn)){if(w instanceof Ao)return w;if(Pr.call(w,"__wrapped__"))return _P(w)}return new Ao(w)}var vg=function(){function w(){}return function(C){if(!Zi(C))return{};if(Jx)return Jx(C);w.prototype=C;var $=new w;return w.prototype=n,$}}();function Zc(){}function Ao(w,C){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=n}oe.templateSettings={escape:Yu,evaluate:Eo,interpolate:Ra,variable:"",imports:{_:oe}},oe.prototype=Zc.prototype,oe.prototype.constructor=oe,Ao.prototype=vg(Zc.prototype),Ao.prototype.constructor=Ao;function Vn(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function ow(){var w=new Vn(this.__wrapped__);return w.__actions__=na(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=na(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=na(this.__views__),w}function FS(){if(this.__filtered__){var w=new Vn(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function bg(){var w=this.__wrapped__.value(),C=this.__dir__,$=Hn(w),Y=C<0,re=$?w.length:0,le=d2(0,re,this.__views__),be=le.start,Ce=le.end,Me=Ce-be,lt=Y?Ce:be-1,ft=this.__iteratees__,wt=ft.length,qt=0,fn=Co(Me,this.__takeCount__);if(!$||!Y&&re==Me&&fn==Me)return Ag(w,this.__actions__);var Cn=[];e:for(;Me--&&qt<fn;){lt+=C;for(var Jn=-1,An=w[lt];++Jn<wt;){var cr=ft[Jn],xr=cr.iteratee,fc=cr.type,_u=xr(An);if(fc==Q)An=_u;else if(!_u){if(fc==H)continue e;break e}}Cn[qt++]=An}return Cn}Vn.prototype=vg(Zc.prototype),Vn.prototype.constructor=Vn;function Oa(w){var C=-1,$=w==null?0:w.length;for(this.clear();++C<$;){var Y=w[C];this.set(Y[0],Y[1])}}function wi(){this.__data__=mg?mg(null):{},this.size=0}function li(w){var C=this.has(w)&&delete this.__data__[w];return this.size-=C?1:0,C}function Th(w){var C=this.__data__;if(mg){var $=C[w];return $===u?n:$}return Pr.call(C,w)?C[w]:n}function ko(w){var C=this.__data__;return mg?C[w]!==n:Pr.call(C,w)}function $a(w,C){var $=this.__data__;return this.size+=this.has(w)?0:1,$[w]=mg&&C===n?u:C,this}Oa.prototype.clear=wi,Oa.prototype.delete=li,Oa.prototype.get=Th,Oa.prototype.has=ko,Oa.prototype.set=$a;function ta(w){var C=-1,$=w==null?0:w.length;for(this.clear();++C<$;){var Y=w[C];this.set(Y[0],Y[1])}}function xg(){this.__data__=[],this.size=0}function La(w){var C=this.__data__,$=Ro(C,w);if($<0)return!1;var Y=C.length-1;return $==Y?C.pop():ew.call(C,$,1),--this.size,!0}function aw(w){var C=this.__data__,$=Ro(C,w);return $<0?n:C[$][1]}function KR(w){return Ro(this.__data__,w)>-1}function XR(w,C){var $=this.__data__,Y=Ro($,w);return Y<0?(++this.size,$.push([w,C])):$[Y][1]=C,this}ta.prototype.clear=xg,ta.prototype.delete=La,ta.prototype.get=aw,ta.prototype.has=KR,ta.prototype.set=XR;function il(w){var C=-1,$=w==null?0:w.length;for(this.clear();++C<$;){var Y=w[C];this.set(Y[0],Y[1])}}function QR(){this.size=0,this.__data__={hash:new Oa,map:new(pm||ta),string:new Oa}}function nd(w){var C=lv(this,w).delete(w);return this.size-=C?1:0,C}function uw(w){return lv(this,w).get(w)}function BS(w){return lv(this,w).has(w)}function JR(w,C){var $=lv(this,w),Y=$.size;return $.set(w,C),this.size+=$.size==Y?0:1,this}il.prototype.clear=QR,il.prototype.delete=nd,il.prototype.get=uw,il.prototype.has=BS,il.prototype.set=JR;function mm(w){var C=-1,$=w==null?0:w.length;for(this.__data__=new il;++C<$;)this.add(w[C])}function Sh(w){return this.__data__.set(w,u),this}function wg(w){return this.__data__.has(w)}mm.prototype.add=mm.prototype.push=Sh,mm.prototype.has=wg;function Io(w){var C=this.__data__=new ta(w);this.size=C.size}function lw(){this.__data__=new ta,this.size=0}function cw(w){var C=this.__data__,$=C.delete(w);return this.size=C.size,$}function sl(w){return this.__data__.get(w)}function ol(w){return this.__data__.has(w)}function gm(w,C){var $=this.__data__;if($ instanceof ta){var Y=$.__data__;if(!pm||Y.length<i-1)return Y.push([w,C]),this.size=++$.size,this;$=this.__data__=new il(Y)}return $.set(w,C),this.size=$.size,this}Io.prototype.clear=lw,Io.prototype.delete=cw,Io.prototype.get=sl,Io.prototype.has=ol,Io.prototype.set=gm;function ef(w,C){var $=Hn(w),Y=!$&&wv(w),re=!$&&!Y&&Mg(w),le=!$&&!Y&&!re&&t_(w),be=$||Y||re||le,Ce=be?Lr(w.length,eF):[],Me=Ce.length;for(var lt in w)(C||Pr.call(w,lt))&&!(be&&(lt=="length"||re&&(lt=="offset"||lt=="parent")||le&&(lt=="buffer"||lt=="byteLength"||lt=="byteOffset")||Ci(lt,Me)))&&Ce.push(lt);return Ce}function tf(w){var C=w.length;return C?w[Sg(0,C-1)]:n}function ym(w,C){return Lw(na(w),rd(C,0,w.length))}function ZR(w){return Lw(na(w))}function Y1(w,C,$){($!==n&&!hd(w[C],$)||$===n&&!(C in w))&&nf(w,C,$)}function vm(w,C,$){var Y=w[C];(!(Pr.call(w,C)&&hd(Y,$))||$===n&&!(C in w))&&nf(w,C,$)}function Ro(w,C){for(var $=w.length;$--;)if(hd(w[$][0],C))return $;return-1}function vu(w,C,$,Y){return sf(w,function(re,le,be){C(Y,re,$(re),be)}),Y}function _i(w,C){return w&&rc(C,No(C),w)}function nc(w,C){return w&&rc(C,ml(C),w)}function nf(w,C,$){C=="__proto__"&&V1?V1(w,C,{configurable:!0,enumerable:!0,value:$,writable:!0}):w[C]=$}function fw(w,C){for(var $=-1,Y=C.length,re=He(Y),le=w==null;++$<Y;)re[$]=le?n:EF(w,C[$]);return re}function rd(w,C,$){return w===w&&($!==n&&(w=w<=$?w:$),C!==n&&(w=w>=C?w:C)),w}function Ma(w,C,$,Y,re,le){var be,Ce=C&f,Me=C&d,lt=C&h;if($&&(be=re?$(w,Y,re,le):$(w)),be!==n)return be;if(!Zi(w))return w;var ft=Hn(w);if(ft){if(be=fv(w),!Ce)return na(w,be)}else{var wt=ao(w),qt=wt==de||wt==$e;if(Mg(w))return e2(w,Ce);if(wt==Ge||wt==ee||qt&&!re){if(be=Me||qt?{}:uo(w),!Ce)return Me?rF(w,nc(be,w)):Tw(w,_i(be,w))}else{if(!Kn[wt])return re?w:{};be=iF(w,wt,Ce)}}le||(le=new Io);var fn=le.get(w);if(fn)return fn;le.set(w,be),wZ(w)?w.forEach(function(An){be.add(Ma(An,C,$,An,w,le))}):bZ(w)&&w.forEach(function(An,cr){be.set(cr,Ma(An,C,$,cr,w,le))});var Cn=lt?Me?uv:av:Me?ml:No,Jn=ft?n:Cn(w);return ks(Jn||w,function(An,cr){Jn&&(cr=An,An=w[cr]),vm(be,cr,Ma(An,C,$,cr,w,le))}),be}function eP(w){var C=No(w);return function($){return K1($,w,C)}}function K1(w,C,$){var Y=$.length;if(w==null)return!Y;for(w=Qr(w);Y--;){var re=$[Y],le=C[re],be=w[re];if(be===n&&!(re in w)||!le(be))return!1}return!0}function jS(w,C,$){if(typeof w!="function")throw new rl(o);return Og(function(){w.apply(n,$)},C)}function rf(w,C,$,Y){var re=-1,le=lm,be=!0,Ce=w.length,Me=[],lt=C.length;if(!Ce)return Me;$&&(C=Gr(C,Br($))),Y?(le=yh,be=!1):C.length>=i&&(le=So,be=!1,C=new mm(C));e:for(;++re<Ce;){var ft=w[re],wt=$==null?ft:$(ft);if(ft=Y||ft!==0?ft:0,be&&wt===wt){for(var qt=lt;qt--;)if(C[qt]===wt)continue e;Me.push(ft)}else le(C,wt,Y)||Me.push(ft)}return Me}var sf=fl(bu),tP=fl(Ch,!0);function X1(w,C){var $=!0;return sf(w,function(Y,re,le){return $=!!C(Y,re,le),$}),$}function bm(w,C,$){for(var Y=-1,re=w.length;++Y<re;){var le=w[Y],be=C(le);if(be!=null&&(Ce===n?be===be&&!cc(be):$(be,Ce)))var Ce=be,Me=le}return Me}function nP(w,C,$,Y){var re=w.length;for($=Qn($),$<0&&($=-$>re?0:re+$),Y=Y===n||Y>re?re:Qn(Y),Y<0&&(Y+=re),Y=$>Y?0:EZ(Y);$<Y;)w[$++]=C;return w}function US(w,C){var $=[];return sf(w,function(Y,re,le){C(Y,re,le)&&$.push(Y)}),$}function Vi(w,C,$,Y,re){var le=-1,be=w.length;for($||($=Nw),re||(re=[]);++le<be;){var Ce=w[le];C>0&&$(Ce)?C>1?Vi(Ce,C-1,$,Y,re):Zl(re,Ce):Y||(re[re.length]=Ce)}return re}var dw=Cw(),Q1=Cw(!0);function bu(w,C){return w&&dw(w,C,No)}function Ch(w,C){return w&&Q1(w,C,No)}function _g(w,C){return tl(C,function($){return Pm(w[$])})}function id(w,C){C=uf(C,w);for(var $=0,Y=C.length;w!=null&&$<Y;)w=w[ac(C[$++])];return $&&$==Y?w:n}function hw(w,C,$){var Y=C(w);return Hn(w)?Y:Zl(Y,$(w))}function so(w){return w==null?w===n?Ft:it:dm&&dm in Qr(w)?Dw(w):p2(w)}function Ah(w,C){return w>C}function al(w,C){return w!=null&&Pr.call(w,C)}function xm(w,C){return w!=null&&C in Qr(w)}function zS(w,C,$){return w>=Co(C,$)&&w<fs(C,$)}function pw(w,C,$){for(var Y=$?yh:lm,re=w[0].length,le=w.length,be=le,Ce=He(le),Me=1/0,lt=[];be--;){var ft=w[be];be&&C&&(ft=Gr(ft,Br(C))),Me=Co(ft.length,Me),Ce[be]=!$&&(C||re>=120&&ft.length>=120)?new mm(be&&ft):n}ft=w[0];var wt=-1,qt=Ce[0];e:for(;++wt<re&&lt.length<Me;){var fn=ft[wt],Cn=C?C(fn):fn;if(fn=$||fn!==0?fn:0,!(qt?So(qt,Cn):Y(lt,Cn,$))){for(be=le;--be;){var Jn=Ce[be];if(!(Jn?So(Jn,Cn):Y(w[be],Cn,$)))continue e}qt&&qt.push(Cn),lt.push(fn)}}return lt}function sd(w,C,$,Y){return bu(w,function(re,le,be){C(Y,$(re),le,be)}),Y}function ul(w,C,$){C=uf(C,w),w=Ys(w,C);var Y=w==null?w:w[ac(sa(C))];return Y==null?n:Gs(Y,w,$)}function mw(w){return hs(w)&&so(w)==ee}function rP(w){return hs(w)&&so(w)==Ve}function od(w){return hs(w)&&so(w)==_e}function ll(w,C,$,Y,re){return w===C?!0:w==null||C==null||!hs(w)&&!hs(C)?w!==w&&C!==C:gw(w,C,$,Y,ll,re)}function gw(w,C,$,Y,re,le){var be=Hn(w),Ce=Hn(C),Me=be?fe:ao(w),lt=Ce?fe:ao(C);Me=Me==ee?Ge:Me,lt=lt==ee?Ge:lt;var ft=Me==Ge,wt=lt==Ge,qt=Me==lt;if(qt&&Mg(w)){if(!Mg(C))return!1;be=!0,ft=!1}if(qt&&!ft)return le||(le=new Io),be||t_(w)?c2(w,C,$,Y,re,le):f2(w,C,Me,$,Y,re,le);if(!($&p)){var fn=ft&&Pr.call(w,"__wrapped__"),Cn=wt&&Pr.call(C,"__wrapped__");if(fn||Cn){var Jn=fn?w.value():w,An=Cn?C.value():C;return le||(le=new Io),re(Jn,An,$,Y,le)}}return qt?(le||(le=new Io),pP(w,C,$,Y,re,le)):!1}function iP(w){return hs(w)&&ao(w)==Pe}function Eg(w,C,$,Y){var re=$.length,le=re,be=!Y;if(w==null)return!le;for(w=Qr(w);re--;){var Ce=$[re];if(be&&Ce[2]?Ce[1]!==w[Ce[0]]:!(Ce[0]in w))return!1}for(;++re<le;){Ce=$[re];var Me=Ce[0],lt=w[Me],ft=Ce[1];if(be&&Ce[2]){if(lt===n&&!(Me in w))return!1}else{var wt=new Io;if(Y)var qt=Y(lt,ft,Me,w,C,wt);if(!(qt===n?ll(ft,lt,p|g,Y,wt):qt))return!1}}return!0}function VS(w){if(!Zi(w)||yP(w))return!1;var C=Pm(w)?HR:Wf;return C.test(Ph(w))}function J1(w){return hs(w)&&so(w)==Tt}function of(w){return hs(w)&&ao(w)==xt}function Z1(w){return hs(w)&&LP(w.length)&&!!er[so(w)]}function Tg(w){return typeof w=="function"?w:w==null?gl:typeof w=="object"?Hn(w)?Si(w[0],w[1]):yw(w):OZ(w)}function ad(w){if(!fd(w))return pg(w);var C=[];for(var $ in Qr(w))Pr.call(w,$)&&$!="constructor"&&C.push($);return C}function HS(w){if(!Zi(w))return xP(w);var C=fd(w),$=[];for(var Y in w)Y=="constructor"&&(C||!Pr.call(w,Y))||$.push(Y);return $}function kh(w,C){return w<C}function qS(w,C){var $=-1,Y=pl(w)?He(w.length):[];return sf(w,function(re,le,be){Y[++$]=C(re,le,be)}),Y}function yw(w){var C=cv(w);return C.length==1&&C[0][2]?Ow(C[0][0],C[0][1]):function($){return $===w||Eg($,w,C)}}function Si(w,C){return Xt(w)&&hv(C)?Ow(ac(w),C):function($){var Y=EF($,w);return Y===n&&Y===C?TF($,w):ll(C,Y,p|g)}}function wm(w,C,$,Y,re){w!==C&&dw(C,function(le,be){if(re||(re=new Io),Zi(le))WS(w,C,be,$,wm,Y,re);else{var Ce=Y?Y(ff(w,be),le,be+"",w,C,re):n;Ce===n&&(Ce=le),Y1(w,be,Ce)}},ml)}function WS(w,C,$,Y,re,le,be){var Ce=ff(w,$),Me=ff(C,$),lt=be.get(Me);if(lt){Y1(w,$,lt);return}var ft=le?le(Ce,Me,$+"",w,C,be):n,wt=ft===n;if(wt){var qt=Hn(Me),fn=!qt&&Mg(Me),Cn=!qt&&!fn&&t_(Me);ft=Me,qt||fn||Cn?Hn(Ce)?ft=Ce:Ns(Ce)?ft=na(Ce):fn?(wt=!1,ft=e2(Me,!0)):Cn?(wt=!1,ft=lP(Me,!0)):ft=[]:D2(Me)||wv(Me)?(ft=Ce,wv(Ce)?ft=TZ(Ce):(!Zi(Ce)||Pm(Ce))&&(ft=uo(Me))):wt=!1}wt&&(be.set(Me,ft),re(ft,Me,Y,le,be),be.delete(Me)),Y1(w,$,ft)}function vw(w,C){var $=w.length;if($)return C+=C<0?$:0,Ci(C,$)?w[C]:n}function ev(w,C,$){C.length?C=Gr(C,function(le){return Hn(le)?function(be){return id(be,le.length===1?le[0]:le)}:le}):C=[gl];var Y=-1;C=Gr(C,Br(wn()));var re=qS(w,function(le,be,Ce){var Me=Gr(C,function(lt){return lt(le)});return{criteria:Me,index:++Y,value:le}});return Ke(re,function(le,be){return nF(le,be,$)})}function GS(w,C){return Ih(w,C,function($,Y){return TF(w,Y)})}function Ih(w,C,$){for(var Y=-1,re=C.length,le={};++Y<re;){var be=C[Y],Ce=id(w,be);$(Ce,be)&&Em(le,uf(be,w),Ce)}return le}function Oi(w){return function(C){return id(C,w)}}function Ji(w,C,$,Y){var re=Y?Xc:Jf,le=-1,be=C.length,Ce=w;for(w===C&&(C=na(C)),$&&(Ce=Gr(w,Br($)));++le<be;)for(var Me=0,lt=C[le],ft=$?$(lt):lt;(Me=re(Ce,ft,Me,Y))>-1;)Ce!==w&&ew.call(Ce,Me,1),ew.call(w,Me,1);return w}function Rs(w,C){for(var $=w?C.length:0,Y=$-1;$--;){var re=C[$];if($==Y||re!==le){var le=re;Ci(re)?ew.call(w,re,1):ww(w,re)}}return w}function Sg(w,C){return w+xh(H1()*(C-w+1))}function tv(w,C,$,Y){for(var re=-1,le=fs(hm((C-w)/($||1)),0),be=He(le);le--;)be[Y?le:++re]=w,w+=$;return be}function _m(w,C){var $="";if(!w||C<1||C>Z)return $;do C%2&&($+=w),C=xh(C/2),C&&(w+=w);while(C);return $}function Xn(w,C){return xu($w(w,C,gl),w+"")}function Po(w){return tf(n_(w))}function YS(w,C){var $=n_(w);return Lw($,rd(C,0,$.length))}function Em(w,C,$,Y){if(!Zi(w))return w;C=uf(C,w);for(var re=-1,le=C.length,be=le-1,Ce=w;Ce!=null&&++re<le;){var Me=ac(C[re]),lt=$;if(Me==="__proto__"||Me==="constructor"||Me==="prototype")return w;if(re!=be){var ft=Ce[Me];lt=Y?Y(ft,Me,Ce):n,lt===n&&(lt=Zi(ft)?ft:Ci(C[re+1])?[]:{})}vm(Ce,Me,lt),Ce=Ce[Me]}return w}var bw=iw?function(w,C){return iw.set(w,C),w}:gl,af=V1?function(w,C){return V1(w,"toString",{configurable:!0,enumerable:!1,value:CF(C),writable:!0})}:gl;function cl(w){return Lw(n_(w))}function Do(w,C,$){var Y=-1,re=w.length;C<0&&(C=-C>re?0:re+C),$=$>re?re:$,$<0&&($+=re),re=C>$?0:$-C>>>0,C>>>=0;for(var le=He(re);++Y<re;)le[Y]=w[Y+C];return le}function KS(w,C){var $;return sf(w,function(Y,re,le){return $=C(Y,re,le),!$}),!!$}function Cg(w,C,$){var Y=0,re=w==null?Y:w.length;if(typeof C=="number"&&C===C&&re<=V){for(;Y<re;){var le=Y+re>>>1,be=w[le];be!==null&&!cc(be)&&($?be<=C:be<C)?Y=le+1:re=le}return re}return xw(w,C,gl,$)}function xw(w,C,$,Y){var re=0,le=w==null?0:w.length;if(le===0)return 0;C=$(C);for(var be=C!==C,Ce=C===null,Me=cc(C),lt=C===n;re<le;){var ft=xh((re+le)/2),wt=$(w[ft]),qt=wt!==n,fn=wt===null,Cn=wt===wt,Jn=cc(wt);if(be)var An=Y||Cn;else lt?An=Cn&&(Y||qt):Ce?An=Cn&&qt&&(Y||!fn):Me?An=Cn&&qt&&!fn&&(Y||!Jn):fn||Jn?An=!1:An=Y?wt<=C:wt<C;An?re=ft+1:le=ft}return Co(le,X)}function XS(w,C){for(var $=-1,Y=w.length,re=0,le=[];++$<Y;){var be=w[$],Ce=C?C(be):be;if(!$||!hd(Ce,Me)){var Me=Ce;le[re++]=be===0?0:be}}return le}function QS(w){return typeof w=="number"?w:cc(w)?q:+w}function Fa(w){if(typeof w=="string")return w;if(Hn(w))return Gr(w,Fa)+"";if(cc(w))return sw?sw.call(w):"";var C=w+"";return C=="0"&&1/w==-1/0?"-0":C}function ud(w,C,$){var Y=-1,re=lm,le=w.length,be=!0,Ce=[],Me=Ce;if($)be=!1,re=yh;else if(le>=i){var lt=C?null:hP(w);if(lt)return bh(lt);be=!1,re=So,Me=new mm}else Me=C?[]:Ce;e:for(;++Y<le;){var ft=w[Y],wt=C?C(ft):ft;if(ft=$||ft!==0?ft:0,be&&wt===wt){for(var qt=Me.length;qt--;)if(Me[qt]===wt)continue e;C&&Me.push(wt),Ce.push(ft)}else re(Me,wt,$)||(Me!==Ce&&Me.push(wt),Ce.push(ft))}return Ce}function ww(w,C){return C=uf(C,w),w=Ys(w,C),w==null||delete w[ac(sa(C))]}function JS(w,C,$,Y){return Em(w,C,$(id(w,C)),Y)}function nv(w,C,$,Y){for(var re=w.length,le=Y?re:-1;(Y?le--:++le<re)&&C(w[le],le,w););return $?Do(w,Y?0:le,Y?le+1:re):Do(w,Y?le+1:0,Y?re:le)}function Ag(w,C){var $=w;return $ instanceof Vn&&($=$.value()),ec(C,function(Y,re){return re.func.apply(re.thisArg,Zl([Y],re.args))},$)}function _w(w,C,$){var Y=w.length;if(Y<2)return Y?ud(w[0]):[];for(var re=-1,le=He(Y);++re<Y;)for(var be=w[re],Ce=-1;++Ce<Y;)Ce!=re&&(le[re]=rf(le[re]||be,w[Ce],C,$));return ud(Vi(le,1),C,$)}function rv(w,C,$){for(var Y=-1,re=w.length,le=C.length,be={};++Y<re;){var Ce=Y<le?C[Y]:n;$(be,w[Y],Ce)}return be}function kg(w){return Ns(w)?w:[]}function Ew(w){return typeof w=="function"?w:gl}function uf(w,C){return Hn(w)?w:Xt(w,C)?[w]:y2(Jr(w))}var sP=Xn;function ld(w,C,$){var Y=w.length;return $=$===n?Y:$,!C&&$>=Y?w:Do(w,C,$)}var ZS=WR||function(w){return un.clearTimeout(w)};function e2(w,C){if(C)return w.slice();var $=w.length,Y=OS?OS($):new w.constructor($);return w.copy(Y),Y}function iv(w){var C=new w.constructor(w.byteLength);return new z1(C).set(new z1(w)),C}function oP(w,C){var $=C?iv(w.buffer):w.buffer;return new w.constructor($,w.byteOffset,w.byteLength)}function aP(w){var C=new w.constructor(w.source,Qo.exec(w));return C.lastIndex=w.lastIndex,C}function uP(w){return yu?Qr(yu.call(w)):{}}function lP(w,C){var $=C?iv(w.buffer):w.buffer;return new w.constructor($,w.byteOffset,w.length)}function t2(w,C){if(w!==C){var $=w!==n,Y=w===null,re=w===w,le=cc(w),be=C!==n,Ce=C===null,Me=C===C,lt=cc(C);if(!Ce&&!lt&&!le&&w>C||le&&be&&Me&&!Ce&&!lt||Y&&be&&Me||!$&&Me||!re)return 1;if(!Y&&!le&&!lt&&w<C||lt&&$&&re&&!Y&&!le||Ce&&$&&re||!be&&re||!Me)return-1}return 0}function nF(w,C,$){for(var Y=-1,re=w.criteria,le=C.criteria,be=re.length,Ce=$.length;++Y<be;){var Me=t2(re[Y],le[Y]);if(Me){if(Y>=Ce)return Me;var lt=$[Y];return Me*(lt=="desc"?-1:1)}}return w.index-C.index}function cP(w,C,$,Y){for(var re=-1,le=w.length,be=$.length,Ce=-1,Me=C.length,lt=fs(le-be,0),ft=He(Me+lt),wt=!Y;++Ce<Me;)ft[Ce]=C[Ce];for(;++re<be;)(wt||re<le)&&(ft[$[re]]=w[re]);for(;lt--;)ft[Ce++]=w[re++];return ft}function n2(w,C,$,Y){for(var re=-1,le=w.length,be=-1,Ce=$.length,Me=-1,lt=C.length,ft=fs(le-Ce,0),wt=He(ft+lt),qt=!Y;++re<ft;)wt[re]=w[re];for(var fn=re;++Me<lt;)wt[fn+Me]=C[Me];for(;++be<Ce;)(qt||re<le)&&(wt[fn+$[be]]=w[re++]);return wt}function na(w,C){var $=-1,Y=w.length;for(C||(C=He(Y));++$<Y;)C[$]=w[$];return C}function rc(w,C,$,Y){var re=!$;$||($={});for(var le=-1,be=C.length;++le<be;){var Ce=C[le],Me=Y?Y($[Ce],w[Ce],Ce,$,w):n;Me===n&&(Me=w[Ce]),re?nf($,Ce,Me):vm($,Ce,Me)}return $}function Tw(w,C){return rc(w,ic(w),C)}function rF(w,C){return rc(w,mP(w),C)}function Sw(w,C){return function($,Y){var re=Hn($)?Qf:vu,le=C?C():{};return re($,w,wn(Y,2),le)}}function Ig(w){return Xn(function(C,$){var Y=-1,re=$.length,le=re>1?$[re-1]:n,be=re>2?$[2]:n;for(le=w.length>3&&typeof le=="function"?(re--,le):n,be&&ia($[0],$[1],be)&&(le=re<3?n:le,re=1),C=Qr(C);++Y<re;){var Ce=$[Y];Ce&&w(C,Ce,Y,le)}return C})}function fl(w,C){return function($,Y){if($==null)return $;if(!pl($))return w($,Y);for(var re=$.length,le=C?re:-1,be=Qr($);(C?le--:++le<re)&&Y(be[le],le,be)!==!1;);return $}}function Cw(w){return function(C,$,Y){for(var re=-1,le=Qr(C),be=Y(C),Ce=be.length;Ce--;){var Me=be[w?Ce:++re];if($(le[Me],Me,le)===!1)break}return C}}function Aw(w,C,$){var Y=C&y,re=Rg(w);function le(){var be=this&&this!==un&&this instanceof le?re:w;return be.apply(Y?$:this,arguments)}return le}function r2(w){return function(C){C=Jr(C);var $=lg(C)?gu(C):n,Y=$?$[0]:C.charAt(0),re=$?ld($,1).join(""):C.slice(1);return Y[w]()+re}}function Tm(w){return function(C){return ec(DZ(PZ(C).replace(rg,"")),w,"")}}function Rg(w){return function(){var C=arguments;switch(C.length){case 0:return new w;case 1:return new w(C[0]);case 2:return new w(C[0],C[1]);case 3:return new w(C[0],C[1],C[2]);case 4:return new w(C[0],C[1],C[2],C[3]);case 5:return new w(C[0],C[1],C[2],C[3],C[4]);case 6:return new w(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new w(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var $=vg(w.prototype),Y=w.apply($,C);return Zi(Y)?Y:$}}function i2(w,C,$){var Y=Rg(w);function re(){for(var le=arguments.length,be=He(le),Ce=le,Me=cd(re);Ce--;)be[Ce]=arguments[Ce];var lt=le<3&&be[0]!==Me&&be[le-1]!==Me?[]:nl(be,Me);if(le-=lt.length,le<$)return ra(w,C,Pg,re.placeholder,n,be,lt,n,n,$-le);var ft=this&&this!==un&&this instanceof re?Y:w;return Gs(ft,this,be)}return re}function Sm(w){return function(C,$,Y){var re=Qr(C);if(!pl(C)){var le=wn($,3);C=No(C),$=function(Ce){return le(re[Ce],Ce,re)}}var be=w(C,$,Y);return be>-1?re[le?C[be]:be]:n}}function kw(w){return cf(function(C){var $=C.length,Y=$,re=Ao.prototype.thru;for(w&&C.reverse();Y--;){var le=C[Y];if(typeof le!="function")throw new rl(o);if(re&&!be&&Dg(le)=="wrapper")var be=new Ao([],!0)}for(Y=be?Y:$;++Y<$;){le=C[Y];var Ce=Dg(le),Me=Ce=="wrapper"?Pw(le):n;Me&&dv(Me[0])&&Me[1]==(I|_|T|R)&&!Me[4].length&&Me[9]==1?be=be[Dg(Me[0])].apply(be,Me[3]):be=le.length==1&&dv(le)?be[Ce]():be.thru(le)}return function(){var lt=arguments,ft=lt[0];if(be&&lt.length==1&&Hn(ft))return be.plant(ft).value();for(var wt=0,qt=$?C[wt].apply(this,lt):ft;++wt<$;)qt=C[wt].call(this,qt);return qt}})}function Pg(w,C,$,Y,re,le,be,Ce,Me,lt){var ft=C&I,wt=C&y,qt=C&x,fn=C&(_|E),Cn=C&D,Jn=qt?n:Rg(w);function An(){for(var cr=arguments.length,xr=He(cr),fc=cr;fc--;)xr[fc]=arguments[fc];if(fn)var _u=cd(An),dc=ag(xr,_u);if(Y&&(xr=cP(xr,Y,re,fn)),le&&(xr=n2(xr,le,be,fn)),cr-=dc,fn&&cr<lt){var Os=nl(xr,_u);return ra(w,C,Pg,An.placeholder,$,xr,Os,Ce,Me,lt-cr)}var pd=wt?$:this,Nm=qt?pd[w]:w;return cr=xr.length,Ce?xr=sc(xr,Ce):Cn&&cr>1&&xr.reverse(),ft&&Me<cr&&(xr.length=Me),this&&this!==un&&this instanceof An&&(Nm=Jn||Rg(Nm)),Nm.apply(pd,xr)}return An}function fP(w,C){return function($,Y){return sd($,w,C(Y),{})}}function sv(w,C){return function($,Y){var re;if($===n&&Y===n)return C;if($!==n&&(re=$),Y!==n){if(re===n)return Y;typeof $=="string"||typeof Y=="string"?($=Fa($),Y=Fa(Y)):($=QS($),Y=QS(Y)),re=w($,Y)}return re}}function Iw(w){return cf(function(C){return C=Gr(C,Br(wn())),Xn(function($){var Y=this;return w(C,function(re){return Gs(re,Y,$)})})})}function ov(w,C){C=C===n?" ":Fa(C);var $=C.length;if($<2)return $?_m(C,w):C;var Y=_m(C,hm(w/fm(C)));return lg(C)?ld(gu(Y),0,w).join(""):Y.slice(0,w)}function dP(w,C,$,Y){var re=C&y,le=Rg(w);function be(){for(var Ce=-1,Me=arguments.length,lt=-1,ft=Y.length,wt=He(ft+Me),qt=this&&this!==un&&this instanceof be?le:w;++lt<ft;)wt[lt]=Y[lt];for(;Me--;)wt[lt++]=arguments[++Ce];return Gs(qt,re?$:this,wt)}return be}function s2(w){return function(C,$,Y){return Y&&typeof Y!="number"&&ia(C,$,Y)&&($=Y=n),C=Dm(C),$===n?($=C,C=0):$=Dm($),Y=Y===n?C<$?1:-1:Dm(Y),tv(C,$,Y,w)}}function Rw(w){return function(C,$){return typeof C=="string"&&typeof $=="string"||(C=df(C),$=df($)),w(C,$)}}function ra(w,C,$,Y,re,le,be,Ce,Me,lt){var ft=C&_,wt=ft?be:n,qt=ft?n:be,fn=ft?le:n,Cn=ft?n:le;C|=ft?T:k,C&=~(ft?k:T),C&b||(C&=-4);var Jn=[w,C,re,fn,wt,Cn,qt,Ce,Me,lt],An=$.apply(n,Jn);return dv(w)&&m2(An,Jn),An.placeholder=Y,g2(An,w,C)}function oo(w){var C=cs[w];return function($,Y){if($=df($),Y=Y==null?0:Co(Qn(Y),292),Y&&hg($)){var re=(Jr($)+"e").split("e"),le=C(re[0]+"e"+(+re[1]+Y));return re=(Jr(le)+"e").split("e"),+(re[0]+"e"+(+re[1]-Y))}return C($)}}var hP=wh&&1/bh(new wh([,-0]))[1]==ne?function(w){return new wh(w)}:IF;function o2(w){return function(C){var $=ao(C);return $==Pe?Gx(C):$==xt?X5(C):Is(C,w(C))}}function lf(w,C,$,Y,re,le,be,Ce){var Me=C&x;if(!Me&&typeof w!="function")throw new rl(o);var lt=Y?Y.length:0;if(lt||(C&=-97,Y=re=n),be=be===n?be:fs(Qn(be),0),Ce=Ce===n?Ce:Qn(Ce),lt-=re?re.length:0,C&k){var ft=Y,wt=re;Y=re=n}var qt=Me?n:Pw(w),fn=[w,C,$,Y,re,ft,wt,le,be,Ce];if(qt&&bP(fn,qt),w=fn[0],C=fn[1],$=fn[2],Y=fn[3],re=fn[4],Ce=fn[9]=fn[9]===n?Me?0:w.length:fs(fn[9]-lt,0),!Ce&&C&(_|E)&&(C&=-25),!C||C==y)var Cn=Aw(w,C,$);else C==_||C==E?Cn=i2(w,C,Ce):(C==T||C==(y|T))&&!re.length?Cn=dP(w,C,$,Y):Cn=Pg.apply(n,fn);var Jn=qt?bw:m2;return g2(Jn(Cn,fn),w,C)}function a2(w,C,$,Y){return w===n||hd(w,Qc[$])&&!Pr.call(Y,$)?C:w}function u2(w,C,$,Y,re,le){return Zi(w)&&Zi(C)&&(le.set(C,w),wm(w,C,n,u2,le),le.delete(C)),w}function l2(w){return D2(w)?n:w}function c2(w,C,$,Y,re,le){var be=$&p,Ce=w.length,Me=C.length;if(Ce!=Me&&!(be&&Me>Ce))return!1;var lt=le.get(w),ft=le.get(C);if(lt&&ft)return lt==C&&ft==w;var wt=-1,qt=!0,fn=$&g?new mm:n;for(le.set(w,C),le.set(C,w);++wt<Ce;){var Cn=w[wt],Jn=C[wt];if(Y)var An=be?Y(Jn,Cn,wt,C,w,le):Y(Cn,Jn,wt,w,C,le);if(An!==n){if(An)continue;qt=!1;break}if(fn){if(!sg(C,function(cr,xr){if(!So(fn,xr)&&(Cn===cr||re(Cn,cr,$,Y,le)))return fn.push(xr)})){qt=!1;break}}else if(!(Cn===Jn||re(Cn,Jn,$,Y,le))){qt=!1;break}}return le.delete(w),le.delete(C),qt}function f2(w,C,$,Y,re,le,be){switch($){case yt:if(w.byteLength!=C.byteLength||w.byteOffset!=C.byteOffset)return!1;w=w.buffer,C=C.buffer;case Ve:return!(w.byteLength!=C.byteLength||!le(new z1(w),new z1(C)));case ye:case _e:case Ze:return hd(+w,+C);case me:return w.name==C.name&&w.message==C.message;case Tt:case Dt:return w==C+"";case Pe:var Ce=Gx;case xt:var Me=Y&p;if(Ce||(Ce=bh),w.size!=C.size&&!Me)return!1;var lt=be.get(w);if(lt)return lt==C;Y|=g,be.set(w,C);var ft=c2(Ce(w),Ce(C),Y,re,le,be);return be.delete(w),ft;case Ue:if(yu)return yu.call(w)==yu.call(C)}return!1}function pP(w,C,$,Y,re,le){var be=$&p,Ce=av(w),Me=Ce.length,lt=av(C),ft=lt.length;if(Me!=ft&&!be)return!1;for(var wt=Me;wt--;){var qt=Ce[wt];if(!(be?qt in C:Pr.call(C,qt)))return!1}var fn=le.get(w),Cn=le.get(C);if(fn&&Cn)return fn==C&&Cn==w;var Jn=!0;le.set(w,C),le.set(C,w);for(var An=be;++wt<Me;){qt=Ce[wt];var cr=w[qt],xr=C[qt];if(Y)var fc=be?Y(xr,cr,qt,C,w,le):Y(cr,xr,qt,w,C,le);if(!(fc===n?cr===xr||re(cr,xr,$,Y,le):fc)){Jn=!1;break}An||(An=qt=="constructor")}if(Jn&&!An){var _u=w.constructor,dc=C.constructor;_u!=dc&&"constructor"in w&&"constructor"in C&&!(typeof _u=="function"&&_u instanceof _u&&typeof dc=="function"&&dc instanceof dc)&&(Jn=!1)}return le.delete(w),le.delete(C),Jn}function cf(w){return xu($w(w,n,Fw),w+"")}function av(w){return hw(w,No,ic)}function uv(w){return hw(w,ml,mP)}var Pw=iw?function(w){return iw.get(w)}:IF;function Dg(w){for(var C=w.name+"",$=gg[C],Y=Pr.call(gg,C)?$.length:0;Y--;){var re=$[Y],le=re.func;if(le==null||le==w)return re.name}return C}function cd(w){var C=Pr.call(oe,"placeholder")?oe:w;return C.placeholder}function wn(){var w=oe.iteratee||AF;return w=w===AF?Tg:w,arguments.length?w(arguments[0],arguments[1]):w}function lv(w,C){var $=w.__data__;return Ng(C)?$[typeof C=="string"?"string":"hash"]:$.map}function cv(w){for(var C=No(w),$=C.length;$--;){var Y=C[$],re=w[Y];C[$]=[Y,re,hv(re)]}return C}function Rh(w,C){var $=ug(w,C);return VS($)?$:n}function Dw(w){var C=Pr.call(w,dm),$=w[dm];try{w[dm]=n;var Y=!0}catch{}var re=j1.call(w);return Y&&(C?w[dm]=$:delete w[dm]),re}var ic=tw?function(w){return w==null?[]:(w=Qr(w),tl(tw(w),function(C){return Zx.call(w,C)}))}:RF,mP=tw?function(w){for(var C=[];w;)Zl(C,ic(w)),w=tc(w);return C}:RF,ao=so;(q1&&ao(new q1(new ArrayBuffer(1)))!=yt||pm&&ao(new pm)!=Pe||W1&&ao(W1.resolve())!=et||wh&&ao(new wh)!=xt||G1&&ao(new G1)!=tn)&&(ao=function(w){var C=so(w),$=C==Ge?w.constructor:n,Y=$?Ph($):"";if(Y)switch(Y){case MS:return yt;case _h:return Pe;case YR:return et;case yg:return xt;case Jc:return tn}return C});function d2(w,C,$){for(var Y=-1,re=$.length;++Y<re;){var le=$[Y],be=le.size;switch(le.type){case"drop":w+=be;break;case"dropRight":C-=be;break;case"take":C=Co(C,w+be);break;case"takeRight":w=fs(w,C-be);break}}return{start:w,end:C}}function gP(w){var C=w.match(ro);return C?C[1].split(pu):[]}function h2(w,C,$){C=uf(C,w);for(var Y=-1,re=C.length,le=!1;++Y<re;){var be=ac(C[Y]);if(!(le=w!=null&&$(w,be)))break;w=w[be]}return le||++Y!=re?le:(re=w==null?0:w.length,!!re&&LP(re)&&Ci(be,re)&&(Hn(w)||wv(w)))}function fv(w){var C=w.length,$=new w.constructor(C);return C&&typeof w[0]=="string"&&Pr.call(w,"index")&&($.index=w.index,$.input=w.input),$}function uo(w){return typeof w.constructor=="function"&&!fd(w)?vg(tc(w)):{}}function iF(w,C,$){var Y=w.constructor;switch(C){case Ve:return iv(w);case ye:case _e:return new Y(+w);case yt:return oP(w,$);case $t:case Bt:case dn:case Nn:case dr:case ti:case kn:case Bn:case Xr:return lP(w,$);case Pe:return new Y;case Ze:case Dt:return new Y(w);case Tt:return aP(w);case xt:return new Y;case Ue:return uP(w)}}function sF(w,C){var $=C.length;if(!$)return w;var Y=$-1;return C[Y]=($>1?"& ":"")+C[Y],C=C.join($>2?", ":" "),w.replace(Ts,`{
/* [wrapped with `+C+`] */
`)}function Nw(w){return Hn(w)||wv(w)||!!(qR&&w&&w[qR])}function Ci(w,C){var $=typeof w;return C=C??Z,!!C&&($=="number"||$!="symbol"&&Gc.test(w))&&w>-1&&w%1==0&&w<C}function ia(w,C,$){if(!Zi($))return!1;var Y=typeof C;return(Y=="number"?pl($)&&Ci(C,$.length):Y=="string"&&C in $)?hd($[C],w):!1}function Xt(w,C){if(Hn(w))return!1;var $=typeof w;return $=="number"||$=="symbol"||$=="boolean"||w==null||cc(w)?!0:ui.test(w)||!kr.test(w)||C!=null&&w in Qr(C)}function Ng(w){var C=typeof w;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?w!=="__proto__":w===null}function dv(w){var C=Dg(w),$=oe[C];if(typeof $!="function"||!(C in Vn.prototype))return!1;if(w===$)return!0;var Y=Pw($);return!!Y&&w===Y[0]}function yP(w){return!!Xx&&Xx in w}var oF=fg?Pm:PF;function fd(w){var C=w&&w.constructor,$=typeof C=="function"&&C.prototype||Qc;return w===$}function hv(w){return w===w&&!Zi(w)}function Ow(w,C){return function($){return $==null?!1:$[w]===C&&(C!==n||w in Qr($))}}function vP(w){var C=Rt(w,function(Y){return $.size===l&&$.clear(),Y}),$=C.cache;return C}function bP(w,C){var $=w[1],Y=C[1],re=$|Y,le=re<(y|x|I),be=Y==I&&$==_||Y==I&&$==R&&w[7].length<=C[8]||Y==(I|R)&&C[7].length<=C[8]&&$==_;if(!(le||be))return w;Y&y&&(w[2]=C[2],re|=$&y?0:b);var Ce=C[3];if(Ce){var Me=w[3];w[3]=Me?cP(Me,Ce,C[4]):Ce,w[4]=Me?nl(w[3],c):C[4]}return Ce=C[5],Ce&&(Me=w[5],w[5]=Me?n2(Me,Ce,C[6]):Ce,w[6]=Me?nl(w[5],c):C[6]),Ce=C[7],Ce&&(w[7]=Ce),Y&I&&(w[8]=w[8]==null?C[8]:Co(w[8],C[8])),w[9]==null&&(w[9]=C[9]),w[0]=C[0],w[1]=re,w}function xP(w){var C=[];if(w!=null)for(var $ in Qr(w))C.push($);return C}function p2(w){return j1.call(w)}function $w(w,C,$){return C=fs(C===n?w.length-1:C,0),function(){for(var Y=arguments,re=-1,le=fs(Y.length-C,0),be=He(le);++re<le;)be[re]=Y[C+re];re=-1;for(var Ce=He(C+1);++re<C;)Ce[re]=Y[re];return Ce[C]=$(be),Gs(w,this,Ce)}}function Ys(w,C){return C.length<2?w:id(w,Do(C,0,-1))}function sc(w,C){for(var $=w.length,Y=Co(C.length,$),re=na(w);Y--;){var le=C[Y];w[Y]=Ci(le,$)?re[le]:n}return w}function ff(w,C){if(!(C==="constructor"&&typeof w[C]=="function")&&C!="__proto__")return w[C]}var m2=oc(bw),Og=$S||function(w,C){return un.setTimeout(w,C)},xu=oc(af);function g2(w,C,$){var Y=C+"";return xu(w,sF(Y,wP(gP(Y),$)))}function oc(w){var C=0,$=0;return function(){var Y=tF(),re=F-(Y-$);if($=Y,re>0){if(++C>=z)return arguments[0]}else C=0;return w.apply(n,arguments)}}function Lw(w,C){var $=-1,Y=w.length,re=Y-1;for(C=C===n?Y:C;++$<C;){var le=Sg($,re),be=w[le];w[le]=w[$],w[$]=be}return w.length=C,w}var y2=vP(function(w){var C=[];return w.charCodeAt(0)===46&&C.push(""),w.replace($r,function($,Y,re,le){C.push(re?le.replace(Ku,"$1"):Y||$)}),C});function ac(w){if(typeof w=="string"||cc(w))return w;var C=w+"";return C=="0"&&1/w==-1/0?"-0":C}function Ph(w){if(w!=null){try{return B1.call(w)}catch{}try{return w+""}catch{}}return""}function wP(w,C){return ks(K,function($){var Y="_."+$[0];C&$[1]&&!lm(w,Y)&&w.push(Y)}),w.sort()}function _P(w){if(w instanceof Vn)return w.clone();var C=new Ao(w.__wrapped__,w.__chain__);return C.__actions__=na(w.__actions__),C.__index__=w.__index__,C.__values__=w.__values__,C}function Mw(w,C,$){($?ia(w,C,$):C===n)?C=1:C=fs(Qn(C),0);var Y=w==null?0:w.length;if(!Y||C<1)return[];for(var re=0,le=0,be=He(hm(Y/C));re<Y;)be[le++]=Do(w,re,re+=C);return be}function v2(w){for(var C=-1,$=w==null?0:w.length,Y=0,re=[];++C<$;){var le=w[C];le&&(re[Y++]=le)}return re}function dl(){var w=arguments.length;if(!w)return[];for(var C=He(w-1),$=arguments[0],Y=w;Y--;)C[Y-1]=arguments[Y];return Zl(Hn($)?na($):[$],Vi(C,1))}var br=Xn(function(w,C){return Ns(w)?rf(w,Vi(C,1,Ns,!0)):[]}),Ks=Xn(function(w,C){var $=sa(C);return Ns($)&&($=n),Ns(w)?rf(w,Vi(C,1,Ns,!0),wn($,2)):[]}),ds=Xn(function(w,C){var $=sa(C);return Ns($)&&($=n),Ns(w)?rf(w,Vi(C,1,Ns,!0),n,$):[]});function lo(w,C,$){var Y=w==null?0:w.length;return Y?(C=$||C===n?1:Qn(C),Do(w,C<0?0:C,Y)):[]}function wu(w,C,$){var Y=w==null?0:w.length;return Y?(C=$||C===n?1:Qn(C),C=Y-C,Do(w,0,C<0?0:C)):[]}function $g(w,C){return w&&w.length?nv(w,wn(C,3),!0,!0):[]}function Ps(w,C){return w&&w.length?nv(w,wn(C,3),!0):[]}function pv(w,C,$,Y){var re=w==null?0:w.length;return re?($&&typeof $!="number"&&ia(w,C,$)&&($=0,Y=re),nP(w,C,$,Y)):[]}function Dh(w,C,$){var Y=w==null?0:w.length;if(!Y)return-1;var re=$==null?0:Qn($);return re<0&&(re=fs(Y+re,0)),cm(w,wn(C,3),re)}function mv(w,C,$){var Y=w==null?0:w.length;if(!Y)return-1;var re=Y-1;return $!==n&&(re=Qn($),re=$<0?fs(Y+re,0):Co(re,Y-1)),cm(w,wn(C,3),re,!0)}function Fw(w){var C=w==null?0:w.length;return C?Vi(w,1):[]}function gv(w){var C=w==null?0:w.length;return C?Vi(w,ne):[]}function Ba(w,C){var $=w==null?0:w.length;return $?(C=C===n?1:Qn(C),Vi(w,C)):[]}function b2(w){for(var C=-1,$=w==null?0:w.length,Y={};++C<$;){var re=w[C];Y[re[0]]=re[1]}return Y}function Cm(w){return w&&w.length?w[0]:n}function dd(w,C,$){var Y=w==null?0:w.length;if(!Y)return-1;var re=$==null?0:Qn($);return re<0&&(re=fs(Y+re,0)),Jf(w,C,re)}function Bw(w){var C=w==null?0:w.length;return C?Do(w,0,-1):[]}var x2=Xn(function(w){var C=Gr(w,kg);return C.length&&C[0]===w[0]?pw(C):[]}),Nh=Xn(function(w){var C=sa(w),$=Gr(w,kg);return C===sa($)?C=n:$.pop(),$.length&&$[0]===w[0]?pw($,wn(C,2)):[]}),jw=Xn(function(w){var C=sa(w),$=Gr(w,kg);return C=typeof C=="function"?C:n,C&&$.pop(),$.length&&$[0]===w[0]?pw($,n,C):[]});function Oh(w,C){return w==null?"":nw.call(w,C)}function sa(w){var C=w==null?0:w.length;return C?w[C-1]:n}function yv(w,C,$){var Y=w==null?0:w.length;if(!Y)return-1;var re=Y;return $!==n&&(re=Qn($),re=re<0?fs(Y+re,0):Co(re,Y-1)),C===C?Q5(w,C,re):cm(w,P,re,!0)}function w2(w,C){return w&&w.length?vw(w,Qn(C)):n}var Uw=Xn(vv);function vv(w,C){return w&&w.length&&C&&C.length?Ji(w,C):w}function oa(w,C,$){return w&&w.length&&C&&C.length?Ji(w,C,wn($,2)):w}function $h(w,C,$){return w&&w.length&&C&&C.length?Ji(w,C,n,$):w}var uc=cf(function(w,C){var $=w==null?0:w.length,Y=fw(w,C);return Rs(w,Gr(C,function(re){return Ci(re,$)?+re:re}).sort(t2)),Y});function ja(w,C){var $=[];if(!(w&&w.length))return $;var Y=-1,re=[],le=w.length;for(C=wn(C,3);++Y<le;){var be=w[Y];C(be,Y,w)&&($.push(be),re.push(Y))}return Rs(w,re),$}function zw(w){return w==null?w:rw.call(w)}function _2(w,C,$){var Y=w==null?0:w.length;return Y?($&&typeof $!="number"&&ia(w,C,$)?(C=0,$=Y):(C=C==null?0:Qn(C),$=$===n?Y:Qn($)),Do(w,C,$)):[]}function E2(w,C){return Cg(w,C)}function aF(w,C,$){return xw(w,C,wn($,2))}function Lh(w,C){var $=w==null?0:w.length;if($){var Y=Cg(w,C);if(Y<$&&hd(w[Y],C))return Y}return-1}function EP(w,C){return Cg(w,C,!0)}function T2(w,C,$){return xw(w,C,wn($,2),!0)}function Am(w,C){var $=w==null?0:w.length;if($){var Y=Cg(w,C,!0)-1;if(hd(w[Y],C))return Y}return-1}function S2(w){return w&&w.length?XS(w):[]}function km(w,C){return w&&w.length?XS(w,wn(C,2)):[]}function TP(w){var C=w==null?0:w.length;return C?Do(w,1,C):[]}function SP(w,C,$){return w&&w.length?(C=$||C===n?1:Qn(C),Do(w,0,C<0?0:C)):[]}function C2(w,C,$){var Y=w==null?0:w.length;return Y?(C=$||C===n?1:Qn(C),C=Y-C,Do(w,C<0?0:C,Y)):[]}function Vw(w,C){return w&&w.length?nv(w,wn(C,3),!1,!0):[]}function uF(w,C){return w&&w.length?nv(w,wn(C,3)):[]}var lF=Xn(function(w){return ud(Vi(w,1,Ns,!0))}),CP=Xn(function(w){var C=sa(w);return Ns(C)&&(C=n),ud(Vi(w,1,Ns,!0),wn(C,2))}),AP=Xn(function(w){var C=sa(w);return C=typeof C=="function"?C:n,ud(Vi(w,1,Ns,!0),n,C)});function Im(w){return w&&w.length?ud(w):[]}function cF(w,C){return w&&w.length?ud(w,wn(C,2)):[]}function Lg(w,C){return C=typeof C=="function"?C:n,w&&w.length?ud(w,n,C):[]}function Hw(w){if(!(w&&w.length))return[];var C=0;return w=tl(w,function($){if(Ns($))return C=fs($.length,C),!0}),Lr(C,function($){return Gr(w,te($))})}function $i(w,C){if(!(w&&w.length))return[];var $=Hw(w);return C==null?$:Gr($,function(Y){return Gs(C,n,Y)})}var fF=Xn(function(w,C){return Ns(w)?rf(w,C):[]}),kP=Xn(function(w){return _w(tl(w,Ns))}),dF=Xn(function(w){var C=sa(w);return Ns(C)&&(C=n),_w(tl(w,Ns),wn(C,2))}),hF=Xn(function(w){var C=sa(w);return C=typeof C=="function"?C:n,_w(tl(w,Ns),n,C)}),IP=Xn(Hw);function RP(w,C){return rv(w||[],C||[],vm)}function pF(w,C){return rv(w||[],C||[],Em)}var hl=Xn(function(w){var C=w.length,$=C>1?w[C-1]:n;return $=typeof $=="function"?(w.pop(),$):n,$i(w,$)});function qw(w){var C=oe(w);return C.__chain__=!0,C}function mF(w,C){return C(w),w}function lc(w,C){return C(w)}var Ww=cf(function(w){var C=w.length,$=C?w[0]:0,Y=this.__wrapped__,re=function(le){return fw(le,w)};return C>1||this.__actions__.length||!(Y instanceof Vn)||!Ci($)?this.thru(re):(Y=Y.slice($,+$+(C?1:0)),Y.__actions__.push({func:lc,args:[re],thisArg:n}),new Ao(Y,this.__chain__).thru(function(le){return C&&!le.length&&le.push(n),le}))});function Rm(){return qw(this)}function Gw(){return new Ao(this.value(),this.__chain__)}function A2(){this.__values__===n&&(this.__values__=_Z(this.value()));var w=this.__index__>=this.__values__.length,C=w?n:this.__values__[this.__index__++];return{done:w,value:C}}function k2(){return this}function gF(w){for(var C,$=this;$ instanceof Zc;){var Y=_P($);Y.__index__=0,Y.__values__=n,C?re.__wrapped__=Y:C=Y;var re=Y;$=$.__wrapped__}return re.__wrapped__=w,C}function I2(){var w=this.__wrapped__;if(w instanceof Vn){var C=w;return this.__actions__.length&&(C=new Vn(this)),C=C.reverse(),C.__actions__.push({func:lc,args:[zw],thisArg:n}),new Ao(C,this.__chain__)}return this.thru(zw)}function yF(){return Ag(this.__wrapped__,this.__actions__)}var PP=Sw(function(w,C,$){Pr.call(w,$)?++w[$]:nf(w,$,1)});function DP(w,C,$){var Y=Hn(w)?um:X1;return $&&ia(w,C,$)&&(C=n),Y(w,wn(C,3))}function Yw(w,C){var $=Hn(w)?tl:US;return $(w,wn(C,3))}var Kw=Sm(Dh),NP=Sm(mv);function R2(w,C){return Vi(Zw(w,C),1)}function OP(w,C){return Vi(Zw(w,C),ne)}function P2(w,C,$){return $=$===n?1:Qn($),Vi(Zw(w,C),$)}function bv(w,C){var $=Hn(w)?ks:sf;return $(w,wn(C,3))}function Xw(w,C){var $=Hn(w)?am:tP;return $(w,wn(C,3))}var Qw=Sw(function(w,C,$){Pr.call(w,$)?w[$].push(C):nf(w,$,[C])});function $P(w,C,$,Y){w=pl(w)?w:n_(w),$=$&&!Y?Qn($):0;var re=w.length;return $<0&&($=fs(re+$,0)),MP(w)?$<=re&&w.indexOf(C,$)>-1:!!re&&Jf(w,C,$)>-1}var vF=Xn(function(w,C,$){var Y=-1,re=typeof C=="function",le=pl(w)?He(w.length):[];return sf(w,function(be){le[++Y]=re?Gs(C,be,$):ul(be,C,$)}),le}),Jw=Sw(function(w,C,$){nf(w,$,C)});function Zw(w,C){var $=Hn(w)?Gr:qS;return $(w,wn(C,3))}function xv(w,C,$,Y){return w==null?[]:(Hn(C)||(C=C==null?[]:[C]),$=Y?n:$,Hn($)||($=$==null?[]:[$]),ev(w,C,$))}var bF=Sw(function(w,C,$){w[$?0:1].push(C)},function(){return[[],[]]});function e_(w,C,$){var Y=Hn(w)?ec:Fe,re=arguments.length<3;return Y(w,wn(C,4),$,re,sf)}function m(w,C,$){var Y=Hn(w)?qx:Fe,re=arguments.length<3;return Y(w,wn(C,4),$,re,tP)}function v(w,C){var $=Hn(w)?tl:US;return $(w,rn(wn(C,3)))}function A(w){var C=Hn(w)?tf:Po;return C(w)}function N(w,C,$){($?ia(w,C,$):C===n)?C=1:C=Qn(C);var Y=Hn(w)?ym:YS;return Y(w,C)}function j(w){var C=Hn(w)?ZR:cl;return C(w)}function G(w){if(w==null)return 0;if(pl(w))return MP(w)?fm(w):w.length;var C=ao(w);return C==Pe||C==xt?w.size:ad(w).length}function se(w,C,$){var Y=Hn(w)?sg:KS;return $&&ia(w,C,$)&&(C=n),Y(w,wn(C,3))}var ve=Xn(function(w,C){if(w==null)return[];var $=C.length;return $>1&&ia(w,C[0],C[1])?C=[]:$>2&&ia(C[0],C[1],C[2])&&(C=[C[0]]),ev(w,Vi(C,1),[])}),Te=xi||function(){return un.Date.now()};function qe(w,C){if(typeof C!="function")throw new rl(o);return w=Qn(w),function(){if(--w<1)return C.apply(this,arguments)}}function vt(w,C,$){return C=$?n:C,C=w&&C==null?w.length:C,lf(w,I,n,n,n,n,C)}function St(w,C){var $;if(typeof C!="function")throw new rl(o);return w=Qn(w),function(){return--w>0&&($=C.apply(this,arguments)),w<=1&&(C=n),$}}var mt=Xn(function(w,C,$){var Y=y;if($.length){var re=nl($,cd(mt));Y|=T}return lf(w,Y,C,$,re)}),Gt=Xn(function(w,C,$){var Y=y|x;if($.length){var re=nl($,cd(Gt));Y|=T}return lf(C,Y,w,$,re)});function en(w,C,$){C=$?n:C;var Y=lf(w,_,n,n,n,n,n,C);return Y.placeholder=en.placeholder,Y}function nn(w,C,$){C=$?n:C;var Y=lf(w,E,n,n,n,n,n,C);return Y.placeholder=nn.placeholder,Y}function Hi(w,C,$){var Y,re,le,be,Ce,Me,lt=0,ft=!1,wt=!1,qt=!0;if(typeof w!="function")throw new rl(o);C=df(C)||0,Zi($)&&(ft=!!$.leading,wt="maxWait"in $,le=wt?fs(df($.maxWait)||0,C):le,qt="trailing"in $?!!$.trailing:qt);function fn(Os){var pd=Y,Nm=re;return Y=re=n,lt=Os,be=w.apply(Nm,pd),be}function Cn(Os){return lt=Os,Ce=Og(cr,C),ft?fn(Os):be}function Jn(Os){var pd=Os-Me,Nm=Os-lt,$Z=C-pd;return wt?Co($Z,le-Nm):$Z}function An(Os){var pd=Os-Me,Nm=Os-lt;return Me===n||pd>=C||pd<0||wt&&Nm>=le}function cr(){var Os=Te();if(An(Os))return xr(Os);Ce=Og(cr,Jn(Os))}function xr(Os){return Ce=n,qt&&Y?fn(Os):(Y=re=n,be)}function fc(){Ce!==n&&ZS(Ce),lt=0,Y=Me=re=Ce=n}function _u(){return Ce===n?be:xr(Te())}function dc(){var Os=Te(),pd=An(Os);if(Y=arguments,re=this,Me=Os,pd){if(Ce===n)return Cn(Me);if(wt)return ZS(Ce),Ce=Og(cr,C),fn(Me)}return Ce===n&&(Ce=Og(cr,C)),be}return dc.cancel=fc,dc.flush=_u,dc}var Be=Xn(function(w,C){return jS(w,1,C)}),Ie=Xn(function(w,C,$){return jS(w,df(C)||0,$)});function ze(w){return lf(w,D)}function Rt(w,C){if(typeof w!="function"||C!=null&&typeof C!="function")throw new rl(o);var $=function(){var Y=arguments,re=C?C.apply(this,Y):Y[0],le=$.cache;if(le.has(re))return le.get(re);var be=w.apply(this,Y);return $.cache=le.set(re,be)||le,be};return $.cache=new(Rt.Cache||il),$}Rt.Cache=il;function rn(w){if(typeof w!="function")throw new rl(o);return function(){var C=arguments;switch(C.length){case 0:return!w.call(this);case 1:return!w.call(this,C[0]);case 2:return!w.call(this,C[0],C[1]);case 3:return!w.call(this,C[0],C[1],C[2])}return!w.apply(this,C)}}function yn(w){return St(2,w)}var vn=sP(function(w,C){C=C.length==1&&Hn(C[0])?Gr(C[0],Br(wn())):Gr(Vi(C,1),Br(wn()));var $=C.length;return Xn(function(Y){for(var re=-1,le=Co(Y.length,$);++re<le;)Y[re]=C[re].call(this,Y[re]);return Gs(w,this,Y)})}),Sn=Xn(function(w,C){var $=nl(C,cd(Sn));return lf(w,T,n,C,$)}),Ds=Xn(function(w,C){var $=nl(C,cd(Ds));return lf(w,k,n,C,$)}),Dr=cf(function(w,C){return lf(w,R,n,n,n,C)});function Mh(w,C){if(typeof w!="function")throw new rl(o);return C=C===n?C:Qn(C),Xn(w,C)}function xF(w,C){if(typeof w!="function")throw new rl(o);return C=C==null?0:fs(Qn(C),0),Xn(function($){var Y=$[C],re=ld($,0,C);return Y&&Zl(re,Y),Gs(w,this,re)})}function CPe(w,C,$){var Y=!0,re=!0;if(typeof w!="function")throw new rl(o);return Zi($)&&(Y="leading"in $?!!$.leading:Y,re="trailing"in $?!!$.trailing:re),Hi(w,C,{leading:Y,maxWait:C,trailing:re})}function APe(w){return vt(w,1)}function kPe(w,C){return Sn(Ew(C),w)}function IPe(){if(!arguments.length)return[];var w=arguments[0];return Hn(w)?w:[w]}function RPe(w){return Ma(w,h)}function PPe(w,C){return C=typeof C=="function"?C:n,Ma(w,h,C)}function DPe(w){return Ma(w,f|h)}function NPe(w,C){return C=typeof C=="function"?C:n,Ma(w,f|h,C)}function OPe(w,C){return C==null||K1(w,C,No(C))}function hd(w,C){return w===C||w!==w&&C!==C}var $Pe=Rw(Ah),LPe=Rw(function(w,C){return w>=C}),wv=mw(function(){return arguments}())?mw:function(w){return hs(w)&&Pr.call(w,"callee")&&!Zx.call(w,"callee")},Hn=He.isArray,MPe=Kc?Br(Kc):rP;function pl(w){return w!=null&&LP(w.length)&&!Pm(w)}function Ns(w){return hs(w)&&pl(w)}function FPe(w){return w===!0||w===!1||hs(w)&&so(w)==ye}var Mg=LS||PF,BPe=Qi?Br(Qi):od;function jPe(w){return hs(w)&&w.nodeType===1&&!D2(w)}function UPe(w){if(w==null)return!0;if(pl(w)&&(Hn(w)||typeof w=="string"||typeof w.splice=="function"||Mg(w)||t_(w)||wv(w)))return!w.length;var C=ao(w);if(C==Pe||C==xt)return!w.size;if(fd(w))return!ad(w).length;for(var $ in w)if(Pr.call(w,$))return!1;return!0}function zPe(w,C){return ll(w,C)}function VPe(w,C,$){$=typeof $=="function"?$:n;var Y=$?$(w,C):n;return Y===n?ll(w,C,n,$):!!Y}function wF(w){if(!hs(w))return!1;var C=so(w);return C==me||C==De||typeof w.message=="string"&&typeof w.name=="string"&&!D2(w)}function HPe(w){return typeof w=="number"&&hg(w)}function Pm(w){if(!Zi(w))return!1;var C=so(w);return C==de||C==$e||C==Ee||C==ut}function vZ(w){return typeof w=="number"&&w==Qn(w)}function LP(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=Z}function Zi(w){var C=typeof w;return w!=null&&(C=="object"||C=="function")}function hs(w){return w!=null&&typeof w=="object"}var bZ=el?Br(el):iP;function qPe(w,C){return w===C||Eg(w,C,cv(C))}function WPe(w,C,$){return $=typeof $=="function"?$:n,Eg(w,C,cv(C),$)}function GPe(w){return xZ(w)&&w!=+w}function YPe(w){if(oF(w))throw new In(s);return VS(w)}function KPe(w){return w===null}function XPe(w){return w==null}function xZ(w){return typeof w=="number"||hs(w)&&so(w)==Ze}function D2(w){if(!hs(w)||so(w)!=Ge)return!1;var C=tc(w);if(C===null)return!0;var $=Pr.call(C,"constructor")&&C.constructor;return typeof $=="function"&&$ instanceof $&&B1.call($)==Qx}var _F=om?Br(om):J1;function QPe(w){return vZ(w)&&w>=-9007199254740991&&w<=Z}var wZ=Jl?Br(Jl):of;function MP(w){return typeof w=="string"||!Hn(w)&&hs(w)&&so(w)==Dt}function cc(w){return typeof w=="symbol"||hs(w)&&so(w)==Ue}var t_=Hx?Br(Hx):Z1;function JPe(w){return w===n}function ZPe(w){return hs(w)&&ao(w)==tn}function eDe(w){return hs(w)&&so(w)==Re}var tDe=Rw(kh),nDe=Rw(function(w,C){return w<=C});function _Z(w){if(!w)return[];if(pl(w))return MP(w)?gu(w):na(w);if(td&&w[td])return K5(w[td]());var C=ao(w),$=C==Pe?Gx:C==xt?bh:n_;return $(w)}function Dm(w){if(!w)return w===0?w:0;if(w=df(w),w===ne||w===-1/0){var C=w<0?-1:1;return C*ie}return w===w?w:0}function Qn(w){var C=Dm(w),$=C%1;return C===C?$?C-$:C:0}function EZ(w){return w?rd(Qn(w),0,U):0}function df(w){if(typeof w=="number")return w;if(cc(w))return q;if(Zi(w)){var C=typeof w.valueOf=="function"?w.valueOf():w;w=Zi(C)?C+"":C}if(typeof w!="string")return w===0?w:+w;w=lr(w);var $=mh.test(w);return $||Wc.test(w)?Un(w.slice(2),$?2:8):io.test(w)?q:+w}function TZ(w){return rc(w,ml(w))}function rDe(w){return w?rd(Qn(w),-9007199254740991,Z):w===0?w:0}function Jr(w){return w==null?"":Fa(w)}var iDe=Ig(function(w,C){if(fd(C)||pl(C)){rc(C,No(C),w);return}for(var $ in C)Pr.call(C,$)&&vm(w,$,C[$])}),SZ=Ig(function(w,C){rc(C,ml(C),w)}),FP=Ig(function(w,C,$,Y){rc(C,ml(C),w,Y)}),sDe=Ig(function(w,C,$,Y){rc(C,No(C),w,Y)}),oDe=cf(fw);function aDe(w,C){var $=vg(w);return C==null?$:_i($,C)}var uDe=Xn(function(w,C){w=Qr(w);var $=-1,Y=C.length,re=Y>2?C[2]:n;for(re&&ia(C[0],C[1],re)&&(Y=1);++$<Y;)for(var le=C[$],be=ml(le),Ce=-1,Me=be.length;++Ce<Me;){var lt=be[Ce],ft=w[lt];(ft===n||hd(ft,Qc[lt])&&!Pr.call(w,lt))&&(w[lt]=le[lt])}return w}),lDe=Xn(function(w){return w.push(n,u2),Gs(CZ,n,w)});function cDe(w,C){return To(w,wn(C,3),bu)}function fDe(w,C){return To(w,wn(C,3),Ch)}function dDe(w,C){return w==null?w:dw(w,wn(C,3),ml)}function hDe(w,C){return w==null?w:Q1(w,wn(C,3),ml)}function pDe(w,C){return w&&bu(w,wn(C,3))}function mDe(w,C){return w&&Ch(w,wn(C,3))}function gDe(w){return w==null?[]:_g(w,No(w))}function yDe(w){return w==null?[]:_g(w,ml(w))}function EF(w,C,$){var Y=w==null?n:id(w,C);return Y===n?$:Y}function vDe(w,C){return w!=null&&h2(w,C,al)}function TF(w,C){return w!=null&&h2(w,C,xm)}var bDe=fP(function(w,C,$){C!=null&&typeof C.toString!="function"&&(C=j1.call(C)),w[C]=$},CF(gl)),xDe=fP(function(w,C,$){C!=null&&typeof C.toString!="function"&&(C=j1.call(C)),Pr.call(w,C)?w[C].push($):w[C]=[$]},wn),wDe=Xn(ul);function No(w){return pl(w)?ef(w):ad(w)}function ml(w){return pl(w)?ef(w,!0):HS(w)}function _De(w,C){var $={};return C=wn(C,3),bu(w,function(Y,re,le){nf($,C(Y,re,le),Y)}),$}function EDe(w,C){var $={};return C=wn(C,3),bu(w,function(Y,re,le){nf($,re,C(Y,re,le))}),$}var TDe=Ig(function(w,C,$){wm(w,C,$)}),CZ=Ig(function(w,C,$,Y){wm(w,C,$,Y)}),SDe=cf(function(w,C){var $={};if(w==null)return $;var Y=!1;C=Gr(C,function(le){return le=uf(le,w),Y||(Y=le.length>1),le}),rc(w,uv(w),$),Y&&($=Ma($,f|d|h,l2));for(var re=C.length;re--;)ww($,C[re]);return $});function CDe(w,C){return AZ(w,rn(wn(C)))}var ADe=cf(function(w,C){return w==null?{}:GS(w,C)});function AZ(w,C){if(w==null)return{};var $=Gr(uv(w),function(Y){return[Y]});return C=wn(C),Ih(w,$,function(Y,re){return C(Y,re[0])})}function kDe(w,C,$){C=uf(C,w);var Y=-1,re=C.length;for(re||(re=1,w=n);++Y<re;){var le=w==null?n:w[ac(C[Y])];le===n&&(Y=re,le=$),w=Pm(le)?le.call(w):le}return w}function IDe(w,C,$){return w==null?w:Em(w,C,$)}function RDe(w,C,$,Y){return Y=typeof Y=="function"?Y:n,w==null?w:Em(w,C,$,Y)}var kZ=o2(No),IZ=o2(ml);function PDe(w,C,$){var Y=Hn(w),re=Y||Mg(w)||t_(w);if(C=wn(C,4),$==null){var le=w&&w.constructor;re?$=Y?new le:[]:Zi(w)?$=Pm(le)?vg(tc(w)):{}:$={}}return(re?ks:bu)(w,function(be,Ce,Me){return C($,be,Ce,Me)}),$}function DDe(w,C){return w==null?!0:ww(w,C)}function NDe(w,C,$){return w==null?w:JS(w,C,Ew($))}function ODe(w,C,$,Y){return Y=typeof Y=="function"?Y:n,w==null?w:JS(w,C,Ew($),Y)}function n_(w){return w==null?[]:zi(w,No(w))}function $De(w){return w==null?[]:zi(w,ml(w))}function LDe(w,C,$){return $===n&&($=C,C=n),$!==n&&($=df($),$=$===$?$:0),C!==n&&(C=df(C),C=C===C?C:0),rd(df(w),C,$)}function MDe(w,C,$){return C=Dm(C),$===n?($=C,C=0):$=Dm($),w=df(w),zS(w,C,$)}function FDe(w,C,$){if($&&typeof $!="boolean"&&ia(w,C,$)&&(C=$=n),$===n&&(typeof C=="boolean"?($=C,C=n):typeof w=="boolean"&&($=w,w=n)),w===n&&C===n?(w=0,C=1):(w=Dm(w),C===n?(C=w,w=0):C=Dm(C)),w>C){var Y=w;w=C,C=Y}if($||w%1||C%1){var re=H1();return Co(w+re*(C-w+Jt("1e-"+((re+"").length-1))),C)}return Sg(w,C)}var BDe=Tm(function(w,C,$){return C=C.toLowerCase(),w+($?RZ(C):C)});function RZ(w){return SF(Jr(w).toLowerCase())}function PZ(w){return w=Jr(w),w&&w.replace(ql,MR).replace(Zu,"")}function jDe(w,C,$){w=Jr(w),C=Fa(C);var Y=w.length;$=$===n?Y:rd(Qn($),0,Y);var re=$;return $-=C.length,$>=0&&w.slice($,re)==C}function UDe(w){return w=Jr(w),w&&Vs.test(w)?w.replace(yi,FR):w}function zDe(w){return w=Jr(w),w&&yr.test(w)?w.replace(os,"\\$&"):w}var VDe=Tm(function(w,C,$){return w+($?"-":"")+C.toLowerCase()}),HDe=Tm(function(w,C,$){return w+($?" ":"")+C.toLowerCase()}),qDe=r2("toLowerCase");function WDe(w,C,$){w=Jr(w),C=Qn(C);var Y=C?fm(w):0;if(!C||Y>=C)return w;var re=(C-Y)/2;return ov(xh(re),$)+w+ov(hm(re),$)}function GDe(w,C,$){w=Jr(w),C=Qn(C);var Y=C?fm(w):0;return C&&Y<C?w+ov(C-Y,$):w}function YDe(w,C,$){w=Jr(w),C=Qn(C);var Y=C?fm(w):0;return C&&Y<C?ov(C-Y,$)+w:w}function KDe(w,C,$){return $||C==null?C=0:C&&(C=+C),GR(Jr(w).replace(vi,""),C||0)}function XDe(w,C,$){return($?ia(w,C,$):C===n)?C=1:C=Qn(C),_m(Jr(w),C)}function QDe(){var w=arguments,C=Jr(w[0]);return w.length<3?C:C.replace(w[1],w[2])}var JDe=Tm(function(w,C,$){return w+($?"_":"")+C.toLowerCase()});function ZDe(w,C,$){return $&&typeof $!="number"&&ia(w,C,$)&&(C=$=n),$=$===n?U:$>>>0,$?(w=Jr(w),w&&(typeof C=="string"||C!=null&&!_F(C))&&(C=Fa(C),!C&&lg(w))?ld(gu(w),0,$):w.split(C,$)):[]}var eNe=Tm(function(w,C,$){return w+($?" ":"")+SF(C)});function tNe(w,C,$){return w=Jr(w),$=$==null?0:rd(Qn($),0,w.length),C=Fa(C),w.slice($,$+C.length)==C}function nNe(w,C,$){var Y=oe.templateSettings;$&&ia(w,C,$)&&(C=n),w=Jr(w),C=FP({},C,Y,a2);var re=FP({},C.imports,Y.imports,a2),le=No(re),be=zi(re,le),Ce,Me,lt=0,ft=C.interpolate||Wl,wt="__p += '",qt=F1((C.escape||Wl).source+"|"+ft.source+"|"+(ft===Ra?Di:Wl).source+"|"+(C.evaluate||Wl).source+"|$","g"),fn="//# sourceURL="+(Pr.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ig+"]")+`
`;w.replace(qt,function(An,cr,xr,fc,_u,dc){return xr||(xr=fc),wt+=w.slice(lt,dc).replace(Gl,BR),cr&&(Ce=!0,wt+=`' +
__e(`+cr+`) +
'`),_u&&(Me=!0,wt+=`';
`+_u+`;
__p += '`),xr&&(wt+=`' +
((__t = (`+xr+`)) == null ? '' : __t) +
'`),lt=dc+An.length,An}),wt+=`';
`;var Cn=Pr.call(C,"variable")&&C.variable;if(!Cn)wt=`with (obj) {
`+wt+`
}
`;else if(hr.test(Cn))throw new In(a);wt=(Me?wt.replace(ir,""):wt).replace(zs,"$1").replace(gi,"$1;"),wt="function("+(Cn||"obj")+`) {
`+(Cn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ce?", __e = _.escape":"")+(Me?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+wt+`return __p
}`;var Jn=NZ(function(){return Rr(le,fn+"return "+wt).apply(n,be)});if(Jn.source=wt,wF(Jn))throw Jn;return Jn}function rNe(w){return Jr(w).toLowerCase()}function iNe(w){return Jr(w).toUpperCase()}function sNe(w,C,$){if(w=Jr(w),w&&($||C===n))return lr(w);if(!w||!(C=Fa(C)))return w;var Y=gu(w),re=gu(C),le=Na(Y,re),be=vh(Y,re)+1;return ld(Y,le,be).join("")}function oNe(w,C,$){if(w=Jr(w),w&&($||C===n))return w.slice(0,Kx(w)+1);if(!w||!(C=Fa(C)))return w;var Y=gu(w),re=vh(Y,gu(C))+1;return ld(Y,0,re).join("")}function aNe(w,C,$){if(w=Jr(w),w&&($||C===n))return w.replace(vi,"");if(!w||!(C=Fa(C)))return w;var Y=gu(w),re=Na(Y,gu(C));return ld(Y,re).join("")}function uNe(w,C){var $=L,Y=M;if(Zi(C)){var re="separator"in C?C.separator:re;$="length"in C?Qn(C.length):$,Y="omission"in C?Fa(C.omission):Y}w=Jr(w);var le=w.length;if(lg(w)){var be=gu(w);le=be.length}if($>=le)return w;var Ce=$-fm(Y);if(Ce<1)return Y;var Me=be?ld(be,0,Ce).join(""):w.slice(0,Ce);if(re===n)return Me+Y;if(be&&(Ce+=Me.length-Ce),_F(re)){if(w.slice(Ce).search(re)){var lt,ft=Me;for(re.global||(re=F1(re.source,Jr(Qo.exec(re))+"g")),re.lastIndex=0;lt=re.exec(ft);)var wt=lt.index;Me=Me.slice(0,wt===n?Ce:wt)}}else if(w.indexOf(Fa(re),Ce)!=Ce){var qt=Me.lastIndexOf(re);qt>-1&&(Me=Me.slice(0,qt))}return Me+Y}function lNe(w){return w=Jr(w),w&&Ar.test(w)?w.replace(ni,jR):w}var cNe=Tm(function(w,C,$){return w+($?" ":"")+C.toUpperCase()}),SF=r2("toUpperCase");function DZ(w,C,$){return w=Jr(w),C=$?n:C,C===n?Y5(w)?J5(w):og(w):w.match(C)||[]}var NZ=Xn(function(w,C){try{return Gs(w,n,C)}catch($){return wF($)?$:new In($)}}),fNe=cf(function(w,C){return ks(C,function($){$=ac($),nf(w,$,mt(w[$],w))}),w});function dNe(w){var C=w==null?0:w.length,$=wn();return w=C?Gr(w,function(Y){if(typeof Y[1]!="function")throw new rl(o);return[$(Y[0]),Y[1]]}):[],Xn(function(Y){for(var re=-1;++re<C;){var le=w[re];if(Gs(le[0],this,Y))return Gs(le[1],this,Y)}})}function hNe(w){return eP(Ma(w,f))}function CF(w){return function(){return w}}function pNe(w,C){return w==null||w!==w?C:w}var mNe=kw(),gNe=kw(!0);function gl(w){return w}function AF(w){return Tg(typeof w=="function"?w:Ma(w,f))}function yNe(w){return yw(Ma(w,f))}function vNe(w,C){return Si(w,Ma(C,f))}var bNe=Xn(function(w,C){return function($){return ul($,w,C)}}),xNe=Xn(function(w,C){return function($){return ul(w,$,C)}});function kF(w,C,$){var Y=No(C),re=_g(C,Y);$==null&&!(Zi(C)&&(re.length||!Y.length))&&($=C,C=w,w=this,re=_g(C,No(C)));var le=!(Zi($)&&"chain"in $)||!!$.chain,be=Pm(w);return ks(re,function(Ce){var Me=C[Ce];w[Ce]=Me,be&&(w.prototype[Ce]=function(){var lt=this.__chain__;if(le||lt){var ft=w(this.__wrapped__),wt=ft.__actions__=na(this.__actions__);return wt.push({func:Me,args:arguments,thisArg:w}),ft.__chain__=lt,ft}return Me.apply(w,Zl([this.value()],arguments))})}),w}function wNe(){return un._===this&&(un._=VR),this}function IF(){}function _Ne(w){return w=Qn(w),Xn(function(C){return vw(C,w)})}var ENe=Iw(Gr),TNe=Iw(um),SNe=Iw(sg);function OZ(w){return Xt(w)?te(ac(w)):Oi(w)}function CNe(w){return function(C){return w==null?n:id(w,C)}}var ANe=s2(),kNe=s2(!0);function RF(){return[]}function PF(){return!1}function INe(){return{}}function RNe(){return""}function PNe(){return!0}function DNe(w,C){if(w=Qn(w),w<1||w>Z)return[];var $=U,Y=Co(w,U);C=wn(C),w-=U;for(var re=Lr(Y,C);++$<w;)C($);return re}function NNe(w){return Hn(w)?Gr(w,ac):cc(w)?[w]:na(y2(Jr(w)))}function ONe(w){var C=++dg;return Jr(w)+C}var $Ne=sv(function(w,C){return w+C},0),LNe=oo("ceil"),MNe=sv(function(w,C){return w/C},1),FNe=oo("floor");function BNe(w){return w&&w.length?bm(w,gl,Ah):n}function jNe(w,C){return w&&w.length?bm(w,wn(C,2),Ah):n}function UNe(w){return W(w,gl)}function zNe(w,C){return W(w,wn(C,2))}function VNe(w){return w&&w.length?bm(w,gl,kh):n}function HNe(w,C){return w&&w.length?bm(w,wn(C,2),kh):n}var qNe=sv(function(w,C){return w*C},1),WNe=oo("round"),GNe=sv(function(w,C){return w-C},0);function YNe(w){return w&&w.length?Lt(w,gl):0}function KNe(w,C){return w&&w.length?Lt(w,wn(C,2)):0}return oe.after=qe,oe.ary=vt,oe.assign=iDe,oe.assignIn=SZ,oe.assignInWith=FP,oe.assignWith=sDe,oe.at=oDe,oe.before=St,oe.bind=mt,oe.bindAll=fNe,oe.bindKey=Gt,oe.castArray=IPe,oe.chain=qw,oe.chunk=Mw,oe.compact=v2,oe.concat=dl,oe.cond=dNe,oe.conforms=hNe,oe.constant=CF,oe.countBy=PP,oe.create=aDe,oe.curry=en,oe.curryRight=nn,oe.debounce=Hi,oe.defaults=uDe,oe.defaultsDeep=lDe,oe.defer=Be,oe.delay=Ie,oe.difference=br,oe.differenceBy=Ks,oe.differenceWith=ds,oe.drop=lo,oe.dropRight=wu,oe.dropRightWhile=$g,oe.dropWhile=Ps,oe.fill=pv,oe.filter=Yw,oe.flatMap=R2,oe.flatMapDeep=OP,oe.flatMapDepth=P2,oe.flatten=Fw,oe.flattenDeep=gv,oe.flattenDepth=Ba,oe.flip=ze,oe.flow=mNe,oe.flowRight=gNe,oe.fromPairs=b2,oe.functions=gDe,oe.functionsIn=yDe,oe.groupBy=Qw,oe.initial=Bw,oe.intersection=x2,oe.intersectionBy=Nh,oe.intersectionWith=jw,oe.invert=bDe,oe.invertBy=xDe,oe.invokeMap=vF,oe.iteratee=AF,oe.keyBy=Jw,oe.keys=No,oe.keysIn=ml,oe.map=Zw,oe.mapKeys=_De,oe.mapValues=EDe,oe.matches=yNe,oe.matchesProperty=vNe,oe.memoize=Rt,oe.merge=TDe,oe.mergeWith=CZ,oe.method=bNe,oe.methodOf=xNe,oe.mixin=kF,oe.negate=rn,oe.nthArg=_Ne,oe.omit=SDe,oe.omitBy=CDe,oe.once=yn,oe.orderBy=xv,oe.over=ENe,oe.overArgs=vn,oe.overEvery=TNe,oe.overSome=SNe,oe.partial=Sn,oe.partialRight=Ds,oe.partition=bF,oe.pick=ADe,oe.pickBy=AZ,oe.property=OZ,oe.propertyOf=CNe,oe.pull=Uw,oe.pullAll=vv,oe.pullAllBy=oa,oe.pullAllWith=$h,oe.pullAt=uc,oe.range=ANe,oe.rangeRight=kNe,oe.rearg=Dr,oe.reject=v,oe.remove=ja,oe.rest=Mh,oe.reverse=zw,oe.sampleSize=N,oe.set=IDe,oe.setWith=RDe,oe.shuffle=j,oe.slice=_2,oe.sortBy=ve,oe.sortedUniq=S2,oe.sortedUniqBy=km,oe.split=ZDe,oe.spread=xF,oe.tail=TP,oe.take=SP,oe.takeRight=C2,oe.takeRightWhile=Vw,oe.takeWhile=uF,oe.tap=mF,oe.throttle=CPe,oe.thru=lc,oe.toArray=_Z,oe.toPairs=kZ,oe.toPairsIn=IZ,oe.toPath=NNe,oe.toPlainObject=TZ,oe.transform=PDe,oe.unary=APe,oe.union=lF,oe.unionBy=CP,oe.unionWith=AP,oe.uniq=Im,oe.uniqBy=cF,oe.uniqWith=Lg,oe.unset=DDe,oe.unzip=Hw,oe.unzipWith=$i,oe.update=NDe,oe.updateWith=ODe,oe.values=n_,oe.valuesIn=$De,oe.without=fF,oe.words=DZ,oe.wrap=kPe,oe.xor=kP,oe.xorBy=dF,oe.xorWith=hF,oe.zip=IP,oe.zipObject=RP,oe.zipObjectDeep=pF,oe.zipWith=hl,oe.entries=kZ,oe.entriesIn=IZ,oe.extend=SZ,oe.extendWith=FP,kF(oe,oe),oe.add=$Ne,oe.attempt=NZ,oe.camelCase=BDe,oe.capitalize=RZ,oe.ceil=LNe,oe.clamp=LDe,oe.clone=RPe,oe.cloneDeep=DPe,oe.cloneDeepWith=NPe,oe.cloneWith=PPe,oe.conformsTo=OPe,oe.deburr=PZ,oe.defaultTo=pNe,oe.divide=MNe,oe.endsWith=jDe,oe.eq=hd,oe.escape=UDe,oe.escapeRegExp=zDe,oe.every=DP,oe.find=Kw,oe.findIndex=Dh,oe.findKey=cDe,oe.findLast=NP,oe.findLastIndex=mv,oe.findLastKey=fDe,oe.floor=FNe,oe.forEach=bv,oe.forEachRight=Xw,oe.forIn=dDe,oe.forInRight=hDe,oe.forOwn=pDe,oe.forOwnRight=mDe,oe.get=EF,oe.gt=$Pe,oe.gte=LPe,oe.has=vDe,oe.hasIn=TF,oe.head=Cm,oe.identity=gl,oe.includes=$P,oe.indexOf=dd,oe.inRange=MDe,oe.invoke=wDe,oe.isArguments=wv,oe.isArray=Hn,oe.isArrayBuffer=MPe,oe.isArrayLike=pl,oe.isArrayLikeObject=Ns,oe.isBoolean=FPe,oe.isBuffer=Mg,oe.isDate=BPe,oe.isElement=jPe,oe.isEmpty=UPe,oe.isEqual=zPe,oe.isEqualWith=VPe,oe.isError=wF,oe.isFinite=HPe,oe.isFunction=Pm,oe.isInteger=vZ,oe.isLength=LP,oe.isMap=bZ,oe.isMatch=qPe,oe.isMatchWith=WPe,oe.isNaN=GPe,oe.isNative=YPe,oe.isNil=XPe,oe.isNull=KPe,oe.isNumber=xZ,oe.isObject=Zi,oe.isObjectLike=hs,oe.isPlainObject=D2,oe.isRegExp=_F,oe.isSafeInteger=QPe,oe.isSet=wZ,oe.isString=MP,oe.isSymbol=cc,oe.isTypedArray=t_,oe.isUndefined=JPe,oe.isWeakMap=ZPe,oe.isWeakSet=eDe,oe.join=Oh,oe.kebabCase=VDe,oe.last=sa,oe.lastIndexOf=yv,oe.lowerCase=HDe,oe.lowerFirst=qDe,oe.lt=tDe,oe.lte=nDe,oe.max=BNe,oe.maxBy=jNe,oe.mean=UNe,oe.meanBy=zNe,oe.min=VNe,oe.minBy=HNe,oe.stubArray=RF,oe.stubFalse=PF,oe.stubObject=INe,oe.stubString=RNe,oe.stubTrue=PNe,oe.multiply=qNe,oe.nth=w2,oe.noConflict=wNe,oe.noop=IF,oe.now=Te,oe.pad=WDe,oe.padEnd=GDe,oe.padStart=YDe,oe.parseInt=KDe,oe.random=FDe,oe.reduce=e_,oe.reduceRight=m,oe.repeat=XDe,oe.replace=QDe,oe.result=kDe,oe.round=WNe,oe.runInContext=Ne,oe.sample=A,oe.size=G,oe.snakeCase=JDe,oe.some=se,oe.sortedIndex=E2,oe.sortedIndexBy=aF,oe.sortedIndexOf=Lh,oe.sortedLastIndex=EP,oe.sortedLastIndexBy=T2,oe.sortedLastIndexOf=Am,oe.startCase=eNe,oe.startsWith=tNe,oe.subtract=GNe,oe.sum=YNe,oe.sumBy=KNe,oe.template=nNe,oe.times=DNe,oe.toFinite=Dm,oe.toInteger=Qn,oe.toLength=EZ,oe.toLower=rNe,oe.toNumber=df,oe.toSafeInteger=rDe,oe.toString=Jr,oe.toUpper=iNe,oe.trim=sNe,oe.trimEnd=oNe,oe.trimStart=aNe,oe.truncate=uNe,oe.unescape=lNe,oe.uniqueId=ONe,oe.upperCase=cNe,oe.upperFirst=SF,oe.each=bv,oe.eachRight=Xw,oe.first=Cm,kF(oe,function(){var w={};return bu(oe,function(C,$){Pr.call(oe.prototype,$)||(w[$]=C)}),w}(),{chain:!1}),oe.VERSION=r,ks(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){oe[w].placeholder=oe}),ks(["drop","take"],function(w,C){Vn.prototype[w]=function($){$=$===n?1:fs(Qn($),0);var Y=this.__filtered__&&!C?new Vn(this):this.clone();return Y.__filtered__?Y.__takeCount__=Co($,Y.__takeCount__):Y.__views__.push({size:Co($,U),type:w+(Y.__dir__<0?"Right":"")}),Y},Vn.prototype[w+"Right"]=function($){return this.reverse()[w]($).reverse()}}),ks(["filter","map","takeWhile"],function(w,C){var $=C+1,Y=$==H||$==J;Vn.prototype[w]=function(re){var le=this.clone();return le.__iteratees__.push({iteratee:wn(re,3),type:$}),le.__filtered__=le.__filtered__||Y,le}}),ks(["head","last"],function(w,C){var $="take"+(C?"Right":"");Vn.prototype[w]=function(){return this[$](1).value()[0]}}),ks(["initial","tail"],function(w,C){var $="drop"+(C?"":"Right");Vn.prototype[w]=function(){return this.__filtered__?new Vn(this):this[$](1)}}),Vn.prototype.compact=function(){return this.filter(gl)},Vn.prototype.find=function(w){return this.filter(w).head()},Vn.prototype.findLast=function(w){return this.reverse().find(w)},Vn.prototype.invokeMap=Xn(function(w,C){return typeof w=="function"?new Vn(this):this.map(function($){return ul($,w,C)})}),Vn.prototype.reject=function(w){return this.filter(rn(wn(w)))},Vn.prototype.slice=function(w,C){w=Qn(w);var $=this;return $.__filtered__&&(w>0||C<0)?new Vn($):(w<0?$=$.takeRight(-w):w&&($=$.drop(w)),C!==n&&(C=Qn(C),$=C<0?$.dropRight(-C):$.take(C-w)),$)},Vn.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},Vn.prototype.toArray=function(){return this.take(U)},bu(Vn.prototype,function(w,C){var $=/^(?:filter|find|map|reject)|While$/.test(C),Y=/^(?:head|last)$/.test(C),re=oe[Y?"take"+(C=="last"?"Right":""):C],le=Y||/^find/.test(C);re&&(oe.prototype[C]=function(){var be=this.__wrapped__,Ce=Y?[1]:arguments,Me=be instanceof Vn,lt=Ce[0],ft=Me||Hn(be),wt=function(cr){var xr=re.apply(oe,Zl([cr],Ce));return Y&&qt?xr[0]:xr};ft&&$&&typeof lt=="function"&&lt.length!=1&&(Me=ft=!1);var qt=this.__chain__,fn=!!this.__actions__.length,Cn=le&&!qt,Jn=Me&&!fn;if(!le&&ft){be=Jn?be:new Vn(this);var An=w.apply(be,Ce);return An.__actions__.push({func:lc,args:[wt],thisArg:n}),new Ao(An,qt)}return Cn&&Jn?w.apply(this,Ce):(An=this.thru(wt),Cn?Y?An.value()[0]:An.value():An)})}),ks(["pop","push","shift","sort","splice","unshift"],function(w){var C=Zf[w],$=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",Y=/^(?:pop|shift)$/.test(w);oe.prototype[w]=function(){var re=arguments;if(Y&&!this.__chain__){var le=this.value();return C.apply(Hn(le)?le:[],re)}return this[$](function(be){return C.apply(Hn(be)?be:[],re)})}}),bu(Vn.prototype,function(w,C){var $=oe[C];if($){var Y=$.name+"";Pr.call(gg,Y)||(gg[Y]=[]),gg[Y].push({name:C,func:$})}}),gg[Pg(n,x).name]=[{name:"wrapper",func:n}],Vn.prototype.clone=ow,Vn.prototype.reverse=FS,Vn.prototype.value=bg,oe.prototype.at=Ww,oe.prototype.chain=Rm,oe.prototype.commit=Gw,oe.prototype.next=A2,oe.prototype.plant=gF,oe.prototype.reverse=I2,oe.prototype.toJSON=oe.prototype.valueOf=oe.prototype.value=yF,oe.prototype.first=oe.prototype.head,td&&(oe.prototype[td]=k2),oe},cg=Z5();Ir?((Ir.exports=cg)._=cg,vr._=cg):un._=cg}).call(xmt)}(WC,WC.exports)),WC.exports}var o_e=wmt();const _mt=qc(o_e);function Emt({parameters:e,setAnswer:t}){const n=O.useRef(null),{image:r,radius:i,ratio:s,example:o,seconds:a,correlation:u,label:l,X:c,Y:f}=e,[d,h]=O.useState([]),[p,g]=O.useState({width:0,height:0}),[y,x]=O.useState("belief"),[b,_]=O.useState(s),[E,T]=O.useState(0),[k,I]=O.useState(null),R=O.useRef(null),[D,L]=O.useState(4),[M,z]=O.useState(0),[F,H]=O.useState(0),[Q,J]=O.useState(!1),[ne,Z]=O.useState(!1),[ie,q]=O.useState(!1);O.useEffect(()=>{if(y!=="scatter"||!Q||!p.width)return;const ye=setTimeout(()=>{x("corrafter")},a*1e3);return()=>clearTimeout(ye)},[y,a,Q,p.width]);const U=O.useCallback(ye=>{t({answers:{status:!0,answer:JSON.stringify({clicked:d,corrBefore:M,corrActual:u,corrAfter:ye,belief:(D-1)/6})}}),H(ye)},[d,M,u,t,D]);O.useEffect(()=>{if(y!=="scatter")return;const ye=new Image;ye.src=r,ye.onload=()=>{const _e=R.current,De=window.innerHeight-_e.getBoundingClientRect().top,me=window.innerWidth-_e.getBoundingClientRect().left,de=ye.width/ye.height;let $e,Pe;De*de<=me?(Pe=De,$e=De*de):($e=me,Pe=me/de);const Ze=$e/ye.width;g({width:$e,height:Pe,multiplier:Ze});const it=typeof s=="number"?s:typeof i=="number"&&ye.width>0?i/ye.width:.1;_(it),T(it*$e)}},[r,y,s,i]),O.useEffect(()=>{!p.width||typeof b!="number"||T(b*p.width)},[p.width,b]);const X=O.useCallback((ye,_e)=>{const De={x:parseInt(ye),y:parseInt(_e)};h(me=>[...me,De])},[h]),V=O.useMemo(()=>_mt.throttle((ye,_e)=>X(ye,_e),100,{leading:!0,trailing:!0}),[X]);O.useEffect(()=>()=>V.cancel(),[V]);const K=O.useCallback(ye=>{const _e=H7(n.current),De=q7(ye,_e.node());J(!0),V(De[0],De[1])},[V]),ee=O.useCallback(ye=>{if(!Q)return;const _e=H7(n.current),De=q7(ye,_e.node());I({x:parseInt(De[0]),y:parseInt(De[1])}),V(De[0],De[1])},[Q,V]),fe=O.useCallback(()=>{V.flush()},[V]),Ee=O.useCallback(()=>{V.flush(),I(null)},[V]);return S.jsxs("div",{children:[o&&S.jsx("h1",{style:{color:"red"},children:"Example Question"}),y==="scatter"&&S.jsxs("div",{children:[S.jsxs("h3",{children:["Explore the scatterplot of the two variables for ",a," seconds through clicking and moving your mouse!"]}),S.jsxs("h3",{children:["X: ",c,"    /    Y: ",f]}),S.jsx(Le,{ref:R,className:"ImageWrapper",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:S.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:p.width,height:p.height,onMouseDown:K,onMouseMove:ee,onMouseUp:fe,onMouseLeave:Ee,children:[S.jsx("defs",{children:S.jsxs("mask",{id:"revealMask",children:[S.jsx("rect",{width:"100%",height:"100%",fill:"white"}),k&&S.jsx("circle",{cx:k.x,cy:k.y,r:E,fill:"black"})]})}),S.jsx("image",{href:r,width:p.width,height:p.height}),S.jsx("rect",{x:"0",y:"0",width:p.width,height:p.height,fill:"white",mask:"url(#revealMask)"}),k&&S.jsx("circle",{cx:k.x,cy:k.y,r:E,fill:"transparent",stroke:"red",strokeWidth:"1"}),S.jsx("rect",{x:"0",y:"0",width:p.width,height:p.height,fill:"transparent",stroke:"black",strokeWidth:"1"})]})})]}),y==="corrbefore"&&S.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[S.jsx("h3",{children:"Predict the correlation of the two variables below:"}),S.jsxs("h3",{children:["X: ",c]}),S.jsxs("h3",{children:["Y: ",f]}),S.jsx(pb,{value:M,setValue:ye=>{z(ye),q(!0)},min:-1,max:1,step:.01,tickInterval:.2}),S.jsx(hn,{float:"right",disabled:!ie,onClick:()=>x("scatter"),children:"Done"})]}),y==="corrafter"&&S.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[S.jsx("h3",{children:"Estimate the correlation of the scatterplot."}),S.jsx(pb,{value:F,setValue:U,min:-1,max:1,step:.01,tickInterval:.2})]}),y==="belief"&&S.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[S.jsx("h3",{children:"How much do you believe about this statement?"}),S.jsx("h3",{children:l}),S.jsx("div",{style:{marginBottom:100},children:S.jsx(pb,{value:D,onClick:()=>Z(!0),setValue:ye=>{L(ye)},leftLabel:"Not at all",rightLabel:"Completely",min:1,max:7,step:1,tickInterval:1,center:4})}),S.jsx(hn,{disabled:!ne,onClick:()=>x("corrbefore"),children:"Done"})]})]})}const Tmt=Object.freeze(Object.defineProperty({__proto__:null,default:Emt},Symbol.toStringTag,{value:"Module"}));function kd(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function qy(e){return!!e&&!!e[Gi]}function M0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Nmt}(e)||Array.isArray(e)||!!e[iae]||!!(!((t=e.constructor)===null||t===void 0)&&t[iae])||sY(e)||oY(e))}function Fb(e,t,n){n===void 0&&(n=!1),lS(e)===0?(n?Object.keys:dE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function lS(e){var t=e[Gi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:sY(e)?2:oY(e)?3:0}function fE(e,t){return lS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Smt(e,t){return lS(e)===2?e.get(t):e[t]}function a_e(e,t,n){var r=lS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function u_e(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function sY(e){return Pmt&&e instanceof Map}function oY(e){return Dmt&&e instanceof Set}function Vv(e){return e.o||e.t}function aY(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=c_e(e);delete t[Gi];for(var n=dE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function uY(e,t){return t===void 0&&(t=!1),lY(e)||qy(e)||!M0(e)||(lS(e)>1&&(e.set=e.add=e.clear=e.delete=Cmt),Object.freeze(e),t&&Fb(e,function(n,r){return uY(r,!0)},!0)),e}function Cmt(){kd(2)}function lY(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function pp(e){var t=IU[e];return t||kd(18,e),t}function Amt(e,t){IU[e]||(IU[e]=t)}function CU(){return Ik}function L9(e,t){t&&(pp("Patches"),e.u=[],e.s=[],e.v=t)}function n6(e){AU(e),e.p.forEach(kmt),e.p=null}function AU(e){e===Ik&&(Ik=e.l)}function Joe(e){return Ik={p:[],l:Ik,h:e,m:!0,_:0}}function kmt(e){var t=e[Gi];t.i===0||t.i===1?t.j():t.g=!0}function M9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||pp("ES5").S(t,e,r),r?(n[Gi].P&&(n6(t),kd(4)),M0(e)&&(e=r6(t,e),t.l||i6(t,e)),t.u&&pp("Patches").M(n[Gi].t,e,t.u,t.s)):e=r6(t,n,[]),n6(t),t.u&&t.v(t.u,t.s),e!==l_e?e:void 0}function r6(e,t,n){if(lY(t))return t;var r=t[Gi];if(!r)return Fb(t,function(a,u){return Zoe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return i6(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=aY(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Fb(s,function(a,u){return Zoe(e,r,i,a,u,n,o)}),i6(e,i,!1),n&&e.u&&pp("Patches").N(r,n,e.u,e.s)}return r.o}function Zoe(e,t,n,r,i,s,o){if(qy(i)){var a=r6(e,i,s&&t&&t.i!==3&&!fE(t.R,r)?s.concat(r):void 0);if(a_e(n,r,a),!qy(a))return;e.m=!1}else o&&n.add(i);if(M0(i)&&!lY(i)){if(!e.h.D&&e._<1)return;r6(e,i),t&&t.A.l||i6(e,i)}}function i6(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&uY(t,n)}function F9(e,t){var n=e[Gi];return(n?Vv(n):e)[t]}function eae(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function sy(e){e.P||(e.P=!0,e.l&&sy(e.l))}function B9(e){e.o||(e.o=aY(e.t))}function kU(e,t,n){var r=sY(t)?pp("MapSet").F(t,n):oY(t)?pp("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:CU(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=Rk;o&&(u=[a],l=GC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):pp("ES5").J(t,n);return(n?n.A:CU()).p.push(r),r}function Imt(e){return qy(e)||kd(22,e),function t(n){if(!M0(n))return n;var r,i=n[Gi],s=lS(n);if(i){if(!i.P&&(i.i<4||!pp("ES5").K(i)))return i.t;i.I=!0,r=tae(n,s),i.I=!1}else r=tae(n,s);return Fb(r,function(o,a){i&&Smt(i.t,o)===a||a_e(r,o,t(a))}),s===3?new Set(r):r}(e)}function tae(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return aY(e)}function Rmt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Gi];return Rk.get(u,s)},set:function(u){var l=this[Gi];Rk.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Gi];if(!a.P)switch(a.i){case 5:r(a)&&sy(a);break;case 4:n(a)&&sy(a)}}}function n(s){for(var o=s.t,a=s.k,u=dE(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Gi){var f=o[c];if(f===void 0&&!fE(o,c))return!0;var d=a[c],h=d&&d[Gi];if(h?h.t!==f:!u_e(d,f))return!0}}var p=!!o[Gi];return u.length!==dE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Amt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=c_e(f);delete p[Gi];for(var g=dE(p),y=0;y<g.length;y++){var x=g[y];p[x]=e(x,c||!!p[x].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:CU(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Gi,{value:l,writable:!0}),u},S:function(s,o,a){a?qy(o)&&o[Gi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Gi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)Fb(d,function(_){_!==Gi&&(f[_]!==void 0||fE(f,_)?h[_]||u(d[_]):(h[_]=!0,sy(c)))}),Fb(f,function(_){d[_]!==void 0||fE(d,_)||(h[_]=!1,sy(c))});else if(p===5){if(r(c)&&(sy(c),h.length=!0),d.length<f.length)for(var g=d.length;g<f.length;g++)h[g]=!1;else for(var y=f.length;y<d.length;y++)h[y]=!0;for(var x=Math.min(d.length,f.length),b=0;b<x;b++)d.hasOwnProperty(b)||(h[b]=!0),h[b]===void 0&&u(d[b])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var nae,Ik,cY=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Pmt=typeof Map<"u",Dmt=typeof Set<"u",rae=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",l_e=cY?Symbol.for("immer-nothing"):((nae={})["immer-nothing"]=!0,nae),iae=cY?Symbol.for("immer-draftable"):"__$immer_draftable",Gi=cY?Symbol.for("immer-state"):"__$immer_state",Nmt=""+Object.prototype.constructor,dE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,c_e=Object.getOwnPropertyDescriptors||function(e){var t={};return dE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},IU={},Rk={get:function(e,t){if(t===Gi)return e;var n=Vv(e);if(!fE(n,t))return function(i,s,o){var a,u=eae(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!M0(r)?r:r===F9(e.t,t)?(B9(e),e.o[t]=kU(e.A.h,r,e)):r},has:function(e,t){return t in Vv(e)},ownKeys:function(e){return Reflect.ownKeys(Vv(e))},set:function(e,t,n){var r=eae(Vv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=F9(Vv(e),t),s=i==null?void 0:i[Gi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(u_e(n,i)&&(n!==void 0||fE(e.t,t)))return!0;B9(e),sy(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return F9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,B9(e),sy(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Vv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){kd(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){kd(12)}},GC={};Fb(Rk,function(e,t){GC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),GC.deleteProperty=function(e,t){return GC.set.call(this,e,t,void 0)},GC.set=function(e,t,n){return Rk.set.call(this,e[0],t,n,e[0])};var Omt=function(){function e(n){var r=this;this.O=rae,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(g){var y=this;g===void 0&&(g=a);for(var x=arguments.length,b=Array(x>1?x-1:0),_=1;_<x;_++)b[_-1]=arguments[_];return u.produce(g,function(E){var T;return(T=s).call.apply(T,[y,E].concat(b))})}}var l;if(typeof s!="function"&&kd(6),o!==void 0&&typeof o!="function"&&kd(7),M0(i)){var c=Joe(r),f=kU(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?n6(c):AU(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(g){return L9(c,o),M9(g,c)},function(g){throw n6(c),g}):(L9(c,o),M9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===l_e&&(l=void 0),r.D&&uY(l,!0),o){var h=[],p=[];pp("Patches").M(i,l,h,p),o(h,p)}return l}kd(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){M0(n)||kd(8),qy(n)&&(n=Imt(n));var r=Joe(this),i=kU(this,n,void 0);return i[Gi].C=!0,AU(r),i},t.finishDraft=function(n,r){var i=n&&n[Gi],s=i.A;return L9(s,r),M9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!rae&&kd(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=pp("Patches").$;return qy(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Fc=new Omt,f_e=Fc.produce;Fc.produceWithPatches.bind(Fc);Fc.setAutoFreeze.bind(Fc);Fc.setUseProxies.bind(Fc);Fc.applyPatches.bind(Fc);Fc.createDraft.bind(Fc);Fc.finishDraft.bind(Fc);function Pk(e){"@babel/helpers - typeof";return Pk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pk(e)}function $mt(e,t){if(Pk(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lmt(e){var t=$mt(e,"string");return Pk(t)=="symbol"?t:t+""}function Mmt(e,t,n){return(t=Lmt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sae(Object(n),!0).forEach(function(r){Mmt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ga(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var aae=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),j9=function(){return Math.random().toString(36).substring(7).split("").join(".")},s6={INIT:"@@redux/INIT"+j9(),REPLACE:"@@redux/REPLACE"+j9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+j9()}};function Fmt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function d_e(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ga(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ga(1));return n(d_e)(e,t)}if(typeof e!="function")throw new Error(Ga(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Ga(3));return s}function f(g){if(typeof g!="function")throw new Error(Ga(4));if(u)throw new Error(Ga(5));var y=!0;return l(),a.push(g),function(){if(y){if(u)throw new Error(Ga(6));y=!1,l();var b=a.indexOf(g);a.splice(b,1),o=null}}}function d(g){if(!Fmt(g))throw new Error(Ga(7));if(typeof g.type>"u")throw new Error(Ga(8));if(u)throw new Error(Ga(9));try{u=!0,s=i(s,g)}finally{u=!1}for(var y=o=a,x=0;x<y.length;x++){var b=y[x];b()}return g}function h(g){if(typeof g!="function")throw new Error(Ga(10));i=g,d({type:s6.REPLACE})}function p(){var g,y=f;return g={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Ga(11));function _(){b.next&&b.next(c())}_();var E=y(_);return{unsubscribe:E}}},g[aae]=function(){return this},g}return d({type:s6.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[aae]=p,r}function Bmt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:s6.INIT});if(typeof r>"u")throw new Error(Ga(12));if(typeof n(void 0,{type:s6.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ga(13))})}function jmt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{Bmt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],g=u[h],y=p(g,l);if(typeof y>"u")throw l&&l.type,new Error(Ga(14));f[h]=y,c=c||y!==g}return c=c||s.length!==Object.keys(u).length,c?f:u}}function o6(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Umt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Ga(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=o6.apply(void 0,a)(i.dispatch),oae(oae({},i),{},{dispatch:s})}}}function h_e(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var RU=h_e();RU.withExtraArgument=h_e;var p_e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),GI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Bb=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},zmt=Object.defineProperty,Vmt=Object.defineProperties,Hmt=Object.getOwnPropertyDescriptors,uae=Object.getOwnPropertySymbols,qmt=Object.prototype.hasOwnProperty,Wmt=Object.prototype.propertyIsEnumerable,lae=function(e,t,n){return t in e?zmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ty=function(e,t){for(var n in t||(t={}))qmt.call(t,n)&&lae(e,n,t[n]);if(uae)for(var r=0,i=uae(t);r<i.length;r++){var n=i[r];Wmt.call(t,n)&&lae(e,n,t[n])}return e},U9=function(e,t){return Vmt(e,Hmt(t))},YI=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},Gmt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?o6:o6.apply(null,arguments)};function m_e(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var Ymt=function(e){return e&&typeof e.match=="function"};function mp(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Ty(Ty({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Kmt(e){return m_e(e)&&"type"in e}var Xmt=function(e){p_e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Bb([void 0],n[0].concat(this)))):new(t.bind.apply(t,Bb([void 0],n.concat(this))))},t}(Array),Qmt=function(e){p_e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Bb([void 0],n[0].concat(this)))):new(t.bind.apply(t,Bb([void 0],n.concat(this))))},t}(Array);function PU(e){return M0(e)?f_e(e,function(){}):e}function Jmt(e){return typeof e=="boolean"}function Zmt(){return function(t){return e0t(t)}}function e0t(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new Xmt;return n&&(Jmt(n)?r.push(RU):r.push(RU.withExtraArgument(n.extraArgument))),r}function t0t(e){var t=Zmt(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(m_e(i))h=jmt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var g=Umt.apply(void 0,p),y=o6;u&&(y=Gmt(Ty({trace:!1},typeof u=="object"&&u)));var x=new Qmt(g),b=x;Array.isArray(d)?b=Bb([g],d):typeof d=="function"&&(b=d(x));var _=y.apply(void 0,b);return d_e(h,c,_)}function g_e(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function n0t(e){return typeof e=="function"}function r0t(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?g_e(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(n0t(e))u=function(){return PU(e())};else{var l=PU(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=Bb([s[d.type]],o.filter(function(p){var g=p.matcher;return g(d)}).map(function(p){var g=p.reducer;return g}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,g){if(g)if(qy(p)){var y=p,x=g(y,d);return x===void 0?p:x}else{if(M0(p))return f_e(p,function(b){return g(b,d)});var x=g(p,d);if(x===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return p},f)}return c.getInitialState=u,c}function i0t(e,t){return e+"/"+t}function s0t(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:PU(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=i0t(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?mp(d,p):mp(d)});function u(){var c=typeof e.extraReducers=="function"?g_e(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,g=c[2],y=g===void 0?void 0:g,x=Ty(Ty({},d),o);return r0t(n,function(b){for(var _ in x)b.addCase(_,x[_]);for(var E=0,T=p;E<T.length;E++){var k=T[E];b.addMatcher(k.matcher,k.reducer)}y&&b.addDefaultCase(y)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var o0t="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",y_e=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=o0t[Math.random()*64|0];return t},a0t=["name","message","stack","code"],z9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),cae=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),u0t=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=a0t;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=mp(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:U9(Ty({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=mp(t+"/pending",function(l,c,f){return{payload:void 0,meta:U9(Ty({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=mp(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||u0t)(l||"Rejected"),meta:U9(Ty({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):y_e(),p=new a,g;function y(b){g=b,p.abort()}var x=function(){return YI(this,null,function(){var b,_,E,T,k,I,R;return GI(this,function(D){switch(D.label){case 0:return D.trys.push([0,4,,5]),T=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,l,{getState:f,extra:d}),c0t(T)?[4,T]:[3,2];case 1:T=D.sent(),D.label=2;case 2:if(T===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return k=new Promise(function(L,M){return p.signal.addEventListener("abort",function(){return M({name:"AbortError",message:g||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([k,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:y,rejectWithValue:function(L,M){return new z9(L,M)},fulfillWithValue:function(L,M){return new cae(L,M)}})).then(function(L){if(L instanceof z9)throw L;return L instanceof cae?i(L.payload,h,l,L.meta):i(L,h,l)})])];case 3:return E=D.sent(),[3,5];case 4:return I=D.sent(),E=I instanceof z9?o(null,h,l,I.payload,I.meta):o(I,h,l),[3,5];case 5:return R=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,R||c(E),[2,E]}})})}();return Object.assign(x,{abort:y,requestId:h,arg:l,unwrap:function(){return x.then(l0t)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function l0t(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function c0t(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var f0t=function(e,t){return Ymt(e)?e.match(t):e(t)};function fae(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return f0t(r,n)})}}var fY=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},DU=function(){},v_e=function(e,t){return t===void 0&&(t=DU),e.catch(t),e},b_e=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},hE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},d0t="task",x_e="listener",w_e="completed",dY="cancelled",h0t="task-"+dY,p0t="task-"+w_e,__e=x_e+"-"+dY,m0t=x_e+"-"+w_e,eM=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=d0t+" "+dY+" (reason: "+t+")"}return e}(),pE=function(e){if(e.aborted)throw new eM(e.reason)};function E_e(e,t){var n=DU;return new Promise(function(r,i){var s=function(){return i(new eM(e.reason))};if(e.aborted){s();return}n=b_e(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=DU})}var g0t=function(e,t){return YI(void 0,null,function(){var n,r;return GI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof eM?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},a6=function(e){return function(t){return v_e(E_e(e,t).then(function(n){return pE(e),n}))}},T_e=function(e){var t=a6(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},y0t=Object.assign,dae={},KI="listenerMiddleware",v0t=function(e,t){var n=function(r){return b_e(e,function(){return hE(r,e.reason)})};return function(r,i){fY(r,"taskExecutor");var s=new AbortController;n(s);var o=g0t(function(){return YI(void 0,null,function(){var a;return GI(this,function(u){switch(u.label){case 0:return pE(e),pE(s.signal),[4,r({pause:a6(s.signal),delay:T_e(s.signal),signal:s.signal})];case 1:return a=u.sent(),pE(s.signal),[2,a]}})})},function(){return hE(s,p0t)});return i!=null&&i.autoJoin&&t.push(o),{result:a6(e)(o),cancel:function(){hE(s,h0t)}}}},b0t=function(e,t){var n=function(r,i){return YI(void 0,null,function(){var s,o,a,u;return GI(this,function(l){switch(l.label){case 0:pE(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,E_e(t,Promise.race(a))];case 2:return u=l.sent(),pE(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return v_e(n(r,i))}},S_e=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=mp(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return fY(s,"options.listener"),{predicate:i,type:t,effect:s}},x0t=function(e){var t=S_e(e),n=t.type,r=t.predicate,i=t.effect,s=y_e(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},NU=function(e){e.pending.forEach(function(t){hE(t,__e)})},w0t=function(e){return function(){e.forEach(NU),e.clear()}},hae=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},_0t=mp(KI+"/add"),E0t=mp(KI+"/removeAll"),T0t=mp(KI+"/remove"),S0t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Bb([KI+"/error"],e))};function C0t(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?S0t:i;fY(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&NU(h)}},a=function(h){for(var p=0,g=Array.from(n.values());p<g.length;p++){var y=g[p];if(h(y))return y}},u=function(h){var p=a(function(g){return g.effect===h.effect});return p||(p=x0t(h)),o(p)},l=function(h){var p=S_e(h),g=p.type,y=p.effect,x=p.predicate,b=a(function(_){var E=typeof g=="string"?_.type===g:_.predicate===x;return E&&_.effect===y});return b&&(b.unsubscribe(),h.cancelActive&&NU(b)),!!b},c=function(h,p,g,y){return YI(t,null,function(){var x,b,_,E;return GI(this,function(T){switch(T.label){case 0:x=new AbortController,b=b0t(u,x.signal),_=[],T.label=1;case 1:return T.trys.push([1,3,4,6]),h.pending.add(x),[4,Promise.resolve(h.effect(p,y0t({},g,{getOriginalState:y,condition:function(k,I){return b(k,I).then(Boolean)},take:b,delay:T_e(x.signal),pause:a6(x.signal),extra:r,signal:x.signal,fork:v0t(x.signal,_),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(k,I,R){k!==x&&(hE(k,__e),R.delete(k))})}})))];case 2:return T.sent(),[3,6];case 3:return E=T.sent(),E instanceof eM||hae(s,E,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(_)];case 5:return T.sent(),hE(x,m0t),h.pending.delete(x),[7];case 6:return[2]}})})},f=w0t(n),d=function(h){return function(p){return function(g){if(!Kmt(g))return p(g);if(_0t.match(g))return u(g.payload);if(E0t.match(g)){f();return}if(T0t.match(g))return l(g.payload);var y=h.getState(),x=function(){if(y===dae)throw new Error(KI+": getOriginalState can only be called synchronously");return y},b;try{if(b=p(g),n.size>0)for(var _=h.getState(),E=Array.from(n.values()),T=0,k=E;T<k.length;T++){var I=k[T],R=!1;try{R=I.predicate(g,_,y)}catch(D){R=!1,hae(s,D,{raisedBy:"predicate"})}R&&c(I,g,h,x)}}finally{y=dae}return b}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var pae;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Rmt();function A0t(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let DD;const k0t=new Uint8Array(16);function I0t(){if(!DD&&(DD=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!DD))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return DD(k0t)}const ca=[];for(let e=0;e<256;++e)ca.push((e+256).toString(16).slice(1));function R0t(e,t=0){return(ca[e[t+0]]+ca[e[t+1]]+ca[e[t+2]]+ca[e[t+3]]+"-"+ca[e[t+4]]+ca[e[t+5]]+"-"+ca[e[t+6]]+ca[e[t+7]]+"-"+ca[e[t+8]]+ca[e[t+9]]+"-"+ca[e[t+10]]+ca[e[t+11]]+ca[e[t+12]]+ca[e[t+13]]+ca[e[t+14]]+ca[e[t+15]]).toLowerCase()}const P0t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),mae={randomUUID:P0t};function gae(e,t,n){if(mae.randomUUID&&!e)return mae.randomUUID();e=e||{};const r=e.random||(e.rng||I0t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,R0t(r)}class gp{static get(){let t=gae();for(;this.ids.has(t);)t=gae();return this.ids.set(t,!0),t}}gp.ids=new Map;function jd(e){return"parent"in e}function D0t(e){return!jd(e)}function N0t(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:gp.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:gp.get(),createdOn:Date.now(),val:r}]:[];return{id:gp.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function O0t({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:gp.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:gp.get(),createdOn:Date.now(),val:s}]:[];return{id:gp.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function ys(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=V0t[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function jb(e){return!!e&&!!e[Bc]}function Wy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===H0t}(e)||Array.isArray(e)||!!e[OA]||!!(!((t=e.constructor)===null||t===void 0)&&t[OA])||tM(e)||nM(e))}function XE(e,t,n){n===void 0&&(n=!1),Gy(e)===0?(n?Object.keys:vY)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Gy(e){var t=e[Bc];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:tM(e)?2:nM(e)?3:0}function Dk(e,t){return Gy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function rO(e,t){return Gy(e)===2?e.get(t):e[t]}function C_e(e,t,n){var r=Gy(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function $0t(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function tM(e){return U0t&&e instanceof Map}function nM(e){return z0t&&e instanceof Set}function Hv(e){return e.o||e.t}function hY(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=q0t(e);delete t[Bc];for(var n=vY(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function pY(e,t){return t===void 0&&(t=!1),mY(e)||jb(e)||!Wy(e)||(Gy(e)>1&&(e.set=e.add=e.clear=e.delete=L0t),Object.freeze(e),t&&XE(e,function(n,r){return pY(r,!0)},!0)),e}function L0t(){ys(2)}function mY(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function yp(e){var t=MU[e];return t||ys(18,e),t}function M0t(e,t){MU[e]||(MU[e]=t)}function yae(){return{}.NODE_ENV==="production"||QE||ys(0),QE}function V9(e,t){t&&(yp("Patches"),e.u=[],e.s=[],e.v=t)}function u6(e){OU(e),e.p.forEach(F0t),e.p=null}function OU(e){e===QE&&(QE=e.l)}function vae(e){return QE={p:[],l:QE,h:e,m:!0,_:0}}function F0t(e){var t=e[Bc];t.i===0||t.i===1?t.j():t.O=!0}function H9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||yp("ES5").S(t,e,r),r?(n[Bc].P&&(u6(t),ys(4)),Wy(e)&&(e=l6(t,e),t.l||c6(t,e)),t.u&&yp("Patches").M(n[Bc].t,e,t.u,t.s)):e=l6(t,n,[]),u6(t),t.u&&t.v(t.u,t.s),e!==yY?e:void 0}function l6(e,t,n){if(mY(t))return t;var r=t[Bc];if(!r)return XE(t,function(s,o){return bae(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return c6(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=hY(r.k):r.o;XE(r.i===3?new Set(i):i,function(s,o){return bae(e,r,i,s,o,n)}),c6(e,i,!1),n&&e.u&&yp("Patches").R(r,n,e.u,e.s)}return r.o}function bae(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&ys(5),jb(i)){var o=l6(e,i,s&&t&&t.i!==3&&!Dk(t.D,r)?s.concat(r):void 0);if(C_e(n,r,o),!jb(o))return;e.m=!1}if(Wy(i)&&!mY(i)){if(!e.h.F&&e._<1)return;l6(e,i),t&&t.A.l||c6(e,i)}}function c6(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&pY(t,n)}function q9(e,t){var n=e[Bc];return(n?Hv(n):e)[t]}function xae(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function $U(e){e.P||(e.P=!0,e.l&&$U(e.l))}function W9(e){e.o||(e.o=hY(e.t))}function LU(e,t,n){var r=tM(t)?yp("MapSet").N(t,n):nM(t)?yp("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:yae(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=FU;o&&(u=[a],l=YC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):yp("ES5").J(t,n);return(n?n.A:yae()).p.push(r),r}function B0t(e){return jb(e)||ys(22,e),function t(n){if(!Wy(n))return n;var r,i=n[Bc],s=Gy(n);if(i){if(!i.P&&(i.i<4||!yp("ES5").K(i)))return i.t;i.I=!0,r=wae(n,s),i.I=!1}else r=wae(n,s);return XE(r,function(o,a){i&&rO(i.t,o)===a||C_e(r,o,t(a))}),s===3?new Set(r):r}(e)}function wae(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return hY(e)}function j0t(){function e(r){if(!Wy(r))return r;if(Array.isArray(r))return r.map(e);if(tM(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(nM(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return Dk(r,OA)&&(i[OA]=r[OA]),i}function t(r){return jb(r)?e(r):r}var n="add";M0t("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Gy(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||ys(24),typeof u=="function"&&f==="prototype"&&ys(24),typeof(u=rO(u,f))!="object"&&ys(15,o.join("/"))}var d=Gy(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:ys(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:ys(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;XE(a.D,function(h,p){var g=rO(f,h),y=rO(d,h),x=p?Dk(f,h)?"replace":n:"remove";if(g!==y||x!=="replace"){var b=u.concat(h);l.push(x==="remove"?{op:x,path:b}:{op:x,path:b,value:y}),c.push(x===n?{op:"remove",path:b}:x==="remove"?{op:n,path:b,value:t(g)}:{op:"replace",path:b,value:t(g)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var g=[c,l];l=g[0],c=g[1]}for(var y=0;y<f.length;y++)if(d[y]&&h[y]!==f[y]){var x=u.concat([y]);l.push({op:"replace",path:x,value:t(h[y])}),c.push({op:"replace",path:x,value:t(f[y])})}for(var b=f.length;b<h.length;b++){var _=u.concat([b]);l.push({op:n,path:_,value:t(h[b])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var g=u.concat([h]);l.push({op:"remove",path:g,value:p}),c.unshift({op:n,path:g,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var g=u.concat([h]);l.push({op:n,path:g,value:p}),c.unshift({op:"remove",path:g,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===yY?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var _ae,QE,gY=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",U0t=typeof Map<"u",z0t=typeof Set<"u",Eae=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",yY=gY?Symbol.for("immer-nothing"):((_ae={})["immer-nothing"]=!0,_ae),OA=gY?Symbol.for("immer-draftable"):"__$immer_draftable",Bc=gY?Symbol.for("immer-state"):"__$immer_state",V0t={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},H0t=""+Object.prototype.constructor,vY=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,q0t=Object.getOwnPropertyDescriptors||function(e){var t={};return vY(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},MU={},FU={get:function(e,t){if(t===Bc)return e;var n=Hv(e);if(!Dk(n,t))return function(i,s,o){var a,u=xae(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Wy(r)?r:r===q9(e.t,t)?(W9(e),e.o[t]=LU(e.A.h,r,e)):r},has:function(e,t){return t in Hv(e)},ownKeys:function(e){return Reflect.ownKeys(Hv(e))},set:function(e,t,n){var r=xae(Hv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=q9(Hv(e),t),s=i==null?void 0:i[Bc];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if($0t(n,i)&&(n!==void 0||Dk(e.t,t)))return!0;W9(e),$U(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return q9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,W9(e),$U(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Hv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){ys(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ys(12)}},YC={};XE(FU,function(e,t){YC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),YC.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&ys(13),YC.set.call(this,e,t,void 0)},YC.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&ys(14),FU.set.call(this,e[0],t,n,e[0])};var W0t=function(){function e(n){var r=this;this.g=Eae,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(g){var y=this;g===void 0&&(g=a);for(var x=arguments.length,b=Array(x>1?x-1:0),_=1;_<x;_++)b[_-1]=arguments[_];return u.produce(g,function(E){var T;return(T=s).call.apply(T,[y,E].concat(b))})}}var l;if(typeof s!="function"&&ys(6),o!==void 0&&typeof o!="function"&&ys(7),Wy(i)){var c=vae(r),f=LU(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?u6(c):OU(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(g){return V9(c,o),H9(g,c)},function(g){throw u6(c),g}):(V9(c,o),H9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===yY&&(l=void 0),r.F&&pY(l,!0),o){var h=[],p=[];yp("Patches").M(i,l,h,p),o(h,p)}return l}ys(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Wy(n)||ys(8),jb(n)&&(n=B0t(n));var r=vae(this),i=LU(this,n,void 0);return i[Bc].C=!0,OU(r),i},t.finishDraft=function(n,r){var i=n&&n[Bc];({}).NODE_ENV!=="production"&&(i&&i.C||ys(9),i.I&&ys(10));var s=i.A;return V9(s,r),H9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Eae&&ys(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=yp("Patches").$;return jb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),jc=new W0t,G0t=jc.produce;jc.produceWithPatches.bind(jc);jc.setAutoFreeze.bind(jc);jc.setUseProxies.bind(jc);jc.applyPatches.bind(jc);jc.createDraft.bind(jc);jc.finishDraft.bind(jc);function Y0t(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=N0t({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return s0t({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:gp.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:gp.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function K0t(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=Y0t(e),s=C0t();s.startListening({matcher:fae(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=fae(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=t0t({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:gp.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var X0t=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q0t=Object.prototype.hasOwnProperty;function BU(e,t){return Q0t.call(e,t)}function jU(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)BU(e,i)&&r.push(i);return r}function Pl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function UU(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function qv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function A_e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function zU(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(zU(e[t]))return!0}else if(typeof e=="object"){for(var r=jU(e),i=r.length,s=0;s<i;s++)if(zU(e[r[s]]))return!0}}return!1}function Tae(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var k_e=function(e){X0t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Tae(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Tae(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),ms=k_e,J0t=Pl,W_={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=f6(n,this.path);r&&(r=Pl(r));var i=vb(n,{op:"remove",path:this.from}).removed;return vb(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=f6(n,this.from);return vb(n,{op:"add",path:this.path,value:Pl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Nk(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Z0t={add:function(e,t,n){return UU(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:W_.move,copy:W_.copy,test:W_.test,_get:W_._get};function f6(e,t){if(t=="")return e;var n={op:"_get",path:t};return vb(e,n),n.value}function vb(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):d6(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=f6(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Nk(e,t.value),o.test===!1)throw new ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ms("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Pl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=d6;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=A_e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!UU(h))throw new ms("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);UU(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ms("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=Z0t[t.op].call(t,l,h,e);if(o.test===!1)throw new ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=W_[t.op].call(t,l,h,e);if(o.test===!1)throw new ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ms("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function rM(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ms("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Pl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=vb(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function egt(e,t,n){var r=vb(e,t);if(r.test===!1)throw new ms("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function d6(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ms("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(W_[e.op]){if(typeof e.path!="string")throw new ms("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ms('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ms("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ms("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&zU(e.value))throw new ms("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ms("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ms("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=I_e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ms("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ms("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function I_e(e,t,n){try{if(!Array.isArray(e))throw new ms("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)rM(Pl(t),Pl(e),n||!0);else{n=n||d6;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ms)return i;throw i}}function Nk(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!Nk(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!Nk(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const tgt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ms,_areEquals:Nk,applyOperation:vb,applyPatch:rM,applyReducer:egt,deepClone:J0t,getValueByPointer:f6,validate:I_e,validator:d6},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var bY=new WeakMap,ngt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),rgt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function igt(e){return bY.get(e)}function sgt(e,t){return e.observers.get(t)}function ogt(e,t){e.observers.delete(t.callback)}function agt(e,t){t.unobserve()}function ugt(e,t){var n=[],r,i=igt(e);if(!i)i=new ngt(e),bY.set(e,i);else{var s=sgt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Pl(e),t){r.callback=t,r.next=null;var o=function(){VU(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){VU(r),clearTimeout(r.next),ogt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new rgt(t,r)),r}function VU(e,t){t===void 0&&(t=!1);var n=bY.get(e.object);xY(n.value,e.object,e.patches,"",t),e.patches.length&&rM(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function xY(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=jU(t),o=jU(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(BU(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?xY(c,f,n,r+"/"+qv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+qv(l),value:Pl(c)}),n.push({op:"replace",path:r+"/"+qv(l),value:Pl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+qv(l),value:Pl(c)}),n.push({op:"remove",path:r+"/"+qv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!BU(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+qv(l),value:Pl(t[l])})}}}function R_e(e,t,n){n===void 0&&(n=!1);var r=[];return xY(e,t,r,"",n),r}const lgt=Object.freeze(Object.defineProperty({__proto__:null,compare:R_e,generate:VU,observe:ugt,unobserve:agt},Symbol.toStringTag,{value:"Module"}));Object.assign({},tgt,lgt,{JsonPatchError:k_e,deepClone:Pl,escapePathComponent:qv,unescapePathComponent:A_e});var KC=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(KC||{});function iO(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=P_e(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=iO(i,t);return rM(a,Pl(o),!0,!1).newDocument}function cgt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function wY({registry:e,initialState:t}){let n=!1;const r=A0t(),i=K0t(t);function s(c){return i.backend.nodes[c]}r.listen(KC.TRAVERSAL_START,()=>{n=!0}),r.listen(KC.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const g=f[p].at(-1);return g&&(h[p]=g),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return iO(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let g=null,y=null;const x=iO(this.current,this.graph.backend.nodes);if(p)y={type:"checkpoint",val:f};else{const b=R_e(x,f);if(cgt(f,b)==="checkpoint")y={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;y={type:"patch",val:b,checkpointRef:_}}}if(!y)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(g=O0t({label:c,state:y,parent:this.current,sideEffects:d,event:h}),!g)throw new Error("State Node creation failed!");i.update(i.addNode(g))},async apply(c,f){const d=e.get(f.type),h=iO(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:g}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[g]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(KC.TRAVERSAL_START);const f=P_e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),g=s(f[h+1]);dgt(p,g)?jd(p)&&d.push(...p.sideEffects.undo):jd(g)&&d.push(...g.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(KC.TRAVERSAL_END)},undo(){const{current:c}=i;return jd(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return D_e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function fgt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;jd(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)jd(r)&&(r=n[r.parent]),jd(i)&&(i=n[i.parent]);return r.id}function P_e(e,t,n){const r=fgt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),jd(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),jd(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function dgt(e,t){if(jd(e)&&e.parent===t.id)return!0;if(jd(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function D_e(e,t){return{...e,children:e.children.map(n=>D_e(t[n],t)),name:`${e.label}`}}j0t();function hgt(e){return e.length===2?G0t(e):e}class XI{static create(){return new XI}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:hgt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),mp(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}function pgt({parameters:e,setAnswer:t}){const n=O.useRef(null),{image:r,label:i,X:s,Y:o}=e,[a,u]=O.useState([]),[l,c]=O.useState({width:0,height:0}),[f,d]=O.useState("remember","draw","report"),[h,p]=O.useState(0),[g,y]=O.useState(4),x=O.useRef(null),[b,_]=O.useState(!1),{actions:E,trrack:T}=O.useMemo(()=>{const D=XI.create(),L=D.register("click",(z,F)=>(z.clickRecord=F,z)),M=wY({registry:D,initialState:{clickRecord:{timestamp:new Date().getTime()}}});return{actions:{clickAction:L},trrack:M}},[]),k=O.useCallback(D=>{t({answers:{status:!0,answer:JSON.stringify({clicked:a,remember:(g-1)/6,corrAfter:D})},provenanceGraph:T.graph.backend}),p(D)},[a,T,t]);O.useEffect(()=>{if(f!=="draw")return;const D=new Image;D.src=r,D.onload=()=>{const L=x.current,M=window.innerHeight-L.getBoundingClientRect().top,z=window.innerWidth-L.getBoundingClientRect().left,F=D.width/D.height;let H,Q;M*F<=z?(Q=M,H=M*F):(H=z,Q=z/F);const J=H/D.width;c({width:H,height:Q,multiplier:J})}},[r,f]);const I=O.useCallback(D=>{const L=H7(n.current),M=q7(D,L.node()),z={x:parseInt(M[0]),y:parseInt(M[1])};if(a.length>=20){alert("You have already clicked 20 points. Please click Done Button.");return}const F=[...a,z];u(F);const H={x:z.x,y:z.y,multiplier:l.multiplier};T.apply("click",E.clickAction(H))},[a,l,T,E]),R=O.useCallback(()=>{if(a.length>0){const D=a.slice(0,-1);u(D)}},[a]);return S.jsxs("div",{children:[f==="draw"&&S.jsxs("div",{children:[S.jsxs("h3",{children:["Please draw the scatterplot you recall. You have ",20-a.length," points left to draw."]}),S.jsxs(Le,{ref:x,className:"ImageWrapper",style:{display:"flex",justifyContent:"center",width:"100%"},children:[S.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:l.width,height:l.height,onClick:I,style:{border:"1px solid black",marginRight:10},children:[S.jsx("image",{href:r,width:l.width,height:l.height}),a.map(D=>S.jsx("circle",{cx:D.x,cy:D.y,r:5,fill:"black",stroke:"black"},0))]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginLeft:"10px"},children:[S.jsx(hn,{disabled:a.length<20,onClick:()=>d("corrafter"),children:"Done"}),S.jsx(hn,{variant:"outline",disabled:a.length===0,onClick:R,children:"Undo"})]})]})]}),f==="corrafter"&&S.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[S.jsx("h3",{children:"Estimate the correlation of the scatterplot."}),S.jsxs("h3",{children:["X: ",s]}),S.jsxs("h3",{children:["Y: ",o]}),S.jsx(pb,{value:h,setValue:k,min:-1,max:1,step:.01,tickInterval:.2})]}),f==="remember"&&S.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[S.jsxs("h3",{children:["How much do you ",S.jsx("span",{style:{textDecoration:"underline"},children:"remember"})," about this scatterplot that you've seen?"]}),S.jsxs("h3",{children:["X: ",s]}),S.jsxs("h3",{children:["Y: ",o]}),S.jsx("div",{style:{marginBottom:100,marginTop:100},children:S.jsx(pb,{value:g,onClick:()=>_(!0),setValue:D=>{y(D)},min:1,max:7,center:4,step:1,leftLabel:"Definitely No",rightLabel:"Definitely Yes",tickInterval:1})}),S.jsx(hn,{disabled:!b,onClick:()=>d("draw"),children:"Done"})]})]})}const mgt=Object.freeze(Object.defineProperty({__proto__:null,default:pgt},Symbol.toStringTag,{value:"Module"}));function ggt({parameters:e,setAnswer:t}){const n=O.useRef(null),{image:r,radius:i,example:s,correlation:o,seconds:a}=e,[u,l]=O.useState({width:0,height:0}),[c,f]=O.useState("scatter"),[d,h]=O.useState(i),p=O.useRef(null),[g,y]=O.useState(0),[x,b]=O.useState(!1);O.useEffect(()=>{if(!u.width)return;const T=setTimeout(()=>{f("slider")},a*1e3);return()=>clearTimeout(T)},[u.width,a]);const _=O.useCallback(()=>{t({answers:{status:!0,answer:JSON.stringify({corr_est:g,corr_act:o})}})},[g,t]),E=()=>{_(),f("feedback")};return O.useEffect(()=>{const T=new Image;T.src=r,T.onload=()=>{const k=p.current,I=window.innerHeight-k.getBoundingClientRect().top,R=window.innerWidth-k.getBoundingClientRect().left,D=T.width/T.height;let L,M;I*D<=R?(M=I,L=I*D):(L=R,M=R/D);const z=L/T.width;l({width:L,height:M,multiplier:z}),h(i*z)}},[r]),S.jsxs("div",{children:[s&&S.jsx("div",{children:S.jsx("h1",{style:{color:"red"},children:"Example Question"})}),c==="scatter"&&S.jsx(Le,{ref:p,className:"ImageWrapper",style:{display:"flex",justifyContent:"center",width:"100%"},children:S.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[S.jsx("image",{href:r,width:u.width,height:u.height}),S.jsx("rect",{x:"0",y:"0",width:u.width,height:u.height,fill:"transparent",stroke:"black",strokeWidth:"1"})]})}),c==="slider"&&S.jsxs("div",{style:{width:"80%",margin:"50px auto"},children:[S.jsx("h2",{children:"Predict the Correlation!"}),S.jsx(pb,{value:g,setValue:T=>{y(T),b(!0)},min:-1,max:1,step:.01,tickInterval:.2}),S.jsx(hn,{sx:{mt:2},disabled:!x,onClick:E,children:"Done"})]}),c==="feedback"&&S.jsxs("div",{children:[S.jsxs("h2",{children:["Your estimation: ",g]}),S.jsxs("h2",{children:["Actual correlation: ",o.toFixed(2)]})]})]})}const ygt=Object.freeze(Object.defineProperty({__proto__:null,default:ggt},Symbol.toStringTag,{value:"Module"}));class vgt extends Mr.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?S.jsx(bt,{children:this.state.error.toString()}):this.props.children}}const Sae=Object.assign({"../public/gaze/assets/Slider.jsx":Hst,"../public/gaze/assets/bubble.jsx":Tmt,"../public/gaze/assets/draw.jsx":mgt,"../public/gaze/assets/plain.jsx":ygt});function bgt({currentConfig:e,provState:t}){const n=Uf(),r=ih(),i=`../public/${e.path}`,s=i in Sae?Sae[i].default:null,o=hu(),{updateResponseBlockValidation:a,setreactiveAnswers:u}=Ca(),l=O.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return S.jsx(O.Suspense,{fallback:S.jsx("div",{children:"Loading..."}),children:s?S.jsx(vgt,{children:S.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):S.jsx(jy,{path:e.path})})}function xgt({currentConfig:e}){const[t,n]=O.useState(""),[r,i]=O.useState(!0);return O.useEffect(()=>{async function s(){const o=await mG(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?S.jsx(au,{text:t}):S.jsx(jy,{path:e.path})}function cS(e){return e.baseComponent!==void 0}function N_e(){const e=Uf(),{setAlertModal:t}=Ca(),n=hu();O.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Cae=Object.prototype.hasOwnProperty;function Aae(e,t,n){for(n of e.keys())if($A(n,t))return n}function $A(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&$A(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Aae(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Aae(t,i),!i)||!$A(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Cae.call(e,n)&&++r&&!Cae.call(t,n)||!(n in t)||!$A(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function wgt(e){var t=O.useRef(e),n=O.useRef(0);return $A(e,t.current)||(t.current=e,n.current+=1),O.useMemo(function(){return t.current},[n.current])}function _gt(e,t){return O.useEffect(e,wgt(t))}const h6=(e,t=null)=>{const[n,r]=O.useState("idle"),[i,s]=O.useState(null),[o,a]=O.useState(null),u=O.useRef(null),l=O.useRef(!1);O.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=O.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return _gt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function O_e(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const Egt="_root_1spq0_1",Tgt="_description_1spq0_9",Sgt="_title_1spq0_10",Cgt="_closeButton_1spq0_14",Agt={root:Egt,description:Tgt,title:Sgt,closeButton:Cgt},Ok=e=>{const{title:t,message:n,color:r}=e;px.show({title:t,message:n,position:"top-center",classNames:Agt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},kae=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],$_e=["participantId","trialId","trialOrder","responseId"];function _Y(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function kgt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(Gd(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=cS(u)&&u.baseComponent&&n.baseComponents?dG({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=O_e(s);return Object.entries(s.answer).map(([h,p])=>{var x,b;const g={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},y=l.response.find(_=>_.id===h);if(t.includes("status")&&(g.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(g.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(g.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(g.configHash=e.participantConfigHash),t.includes("percentComplete")&&(g.percentComplete=r),t.includes("description")&&(g.description=l.description),t.includes("instruction")&&(g.instruction=l.instruction),t.includes("responsePrompt")&&(g.responsePrompt=y==null?void 0:y.prompt),t.includes("answer")&&(g.answer=p),t.includes("correctAnswer")){const _=(b=(x=l.correctAnswer)==null?void 0:x.find(E=>E.id===h))==null?void 0:b.answer;g.correctAnswer=typeof _=="object"?JSON.stringify(_):_}return t.includes("responseMin")&&(g.responseMin=(y==null?void 0:y.type)==="numerical"?y.min:void 0),t.includes("responseMax")&&(g.responseMax=(y==null?void 0:y.type)==="numerical"?y.max:void 0),t.includes("startTime")&&(g.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(g.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(g.duration=c),t.includes("cleanedDuration")&&(g.cleanedDuration=f),t.includes("meta")&&(g.meta=JSON.stringify(l.meta,null,2)),g}).flat()}).flat()]}async function Igt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...$_e,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await kgt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function Rgt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=O.useState([...kae].filter(p=>p!=="meta")),a=_s(),{value:u,status:l,error:c}=h6(Igt,[s,r,a.storageEngine,i]),f=O.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(g=>u.header.map(y=>`"${`${g[y]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);_Y(p,n)},[n,u]),d=O.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),Ok({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=O.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,g=p===1?"":"s";return`This is a preview of the first ${g?p:""} row${g} of the CSV. The full CSV contains ${u.rows.length} row${g}.`},[u]);return S.jsxs(ns,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[S.jsx(JH,{searchable:!0,nothingFoundMessage:"Property not found",data:[...kae],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:S.jsx(Aje,{}),variant:"filled"}),S.jsx(kc,{h:"md"}),S.jsxs(Le,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?S.jsxs(bn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[S.jsx(bn.Thead,{children:S.jsx(bn.Tr,{children:u.header.map(p=>S.jsx(bn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:S.jsxs(sn,{direction:"row",justify:"space-between",align:"center",children:[p,!$_e.includes(p)&&S.jsx(f1,{onClick:()=>o(s.filter(g=>g!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:S.jsx(vI,{size:16})})]})},p))})}),S.jsx(bn.Tbody,{children:u.rows.slice(0,5).map((p,g)=>S.jsx(bn.Tr,{children:u.header.map(y=>S.jsx(bn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(y)?"normal":"nowrap"},children:p[y]},`${g}-${y}`))},g))})]}):l==="error"&&c?S.jsx(l0,{variant:"light",children:c.message}):null,S.jsx(Oc,{visible:l==="pending"||l==="idle"})]}),S.jsx(kc,{h:"sm"}),S.jsx(sn,{justify:"center",fz:"sm",c:"dimmed",children:S.jsx(bt,{children:h})}),S.jsx(kc,{h:"md"}),S.jsxs(is,{justify:"right",children:[S.jsx(hn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),S.jsx(hn,{leftSection:S.jsx(E0e,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&S.jsx(hn,{onClick:d,children:S.jsx(yje,{})})]})]})}function Pgt(){const e=N0(),{storageEngine:t}=_s(),n=Ur(_=>_.answers),r=rS(),[i,s]=O.useState(!1);O.useEffect(()=>{if(r){s(!0);return}const _=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(_))},1e3)},[]),N_e();const[o,a]=O.useState(),[u,l]=O.useState(""),c=e.studyMetadata.title.replace(" ","_");O.useEffect(()=>{async function _(){if(t){const E=await t.getCurrentParticipantId(),T=await t.getParticipantData();l(E),a(T)}}_()},[t]);const f=O.useCallback(async()=>{_Y(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,g]=O.useState(Math.floor(h/1e3));O.useEffect(()=>{if(i){const _=setInterval(()=>{g(E=>E-1)},1e3);return p<=0?(d&&f(),clearInterval(_),()=>clearInterval(_)):()=>clearInterval(_)}return()=>{}},[d,i,p,f]);const y=Tx(),[x,b]=O.useState(!1);return O.useEffect(()=>{(async()=>{if(t){const E=await t.getModes(y);b(E.dataCollectionEnabled)}})()},[t,y]),S.jsx(T0,{style:{height:"100%"},children:S.jsx(sn,{direction:"column",children:i||!x?e.uiConfig.studyEndMsg?S.jsx(au,{text:e.uiConfig.studyEndMsg}):S.jsx(bt,{size:"xl",display:"block",children:"Thank you for completing the study. You may close this window now."}):S.jsxs(S.Fragment,{children:[S.jsx(bt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),S.jsx(kc,{h:"lg"}),S.jsx(T0,{children:S.jsx(Up,{color:"blue"})})]})})})}function Dgt(){return S.jsx(bt,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function Ngt(){return S.jsx(bt,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const Iae={};function HU(e,t){e===void 0&&(e=Iae),t===void 0&&(t=Iae);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Ogt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$gt=Object.prototype.hasOwnProperty;function qU(e,t){return $gt.call(e,t)}function WU(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)qU(e,i)&&r.push(i);return r}function Sc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function GU(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Wv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function L_e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function YU(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(YU(e[t]))return!0}else if(typeof e=="object"){for(var r=WU(e),i=r.length,s=0;s<i;s++)if(YU(e[r[s]]))return!0}}return!1}function Rae(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var M_e=function(e){Ogt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Rae(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Rae(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),gs=M_e,Lgt=Sc,G_={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=p6(n,this.path);r&&(r=Sc(r));var i=bb(n,{op:"remove",path:this.from}).removed;return bb(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=p6(n,this.from);return bb(n,{op:"add",path:this.path,value:Sc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:$k(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Mgt={add:function(e,t,n){return GU(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:G_.move,copy:G_.copy,test:G_.test,_get:G_._get};function p6(e,t){if(t=="")return e;var n={op:"_get",path:t};return bb(e,n),n.value}function bb(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):m6(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=p6(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=$k(e,t.value),o.test===!1)throw new gs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new gs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Sc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=m6;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=L_e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!GU(h))throw new gs("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);GU(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new gs("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=Mgt[t.op].call(t,l,h,e);if(o.test===!1)throw new gs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=G_[t.op].call(t,l,h,e);if(o.test===!1)throw new gs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new gs("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function iM(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new gs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Sc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=bb(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function Fgt(e,t,n){var r=bb(e,t);if(r.test===!1)throw new gs("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function m6(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new gs("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(G_[e.op]){if(typeof e.path!="string")throw new gs("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new gs('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new gs("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new gs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&YU(e.value))throw new gs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new gs("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new gs("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=F_e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new gs("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new gs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function F_e(e,t,n){try{if(!Array.isArray(e))throw new gs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)iM(Sc(t),Sc(e),n||!0);else{n=n||m6;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof gs)return i;throw i}}function $k(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!$k(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!$k(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Bgt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:gs,_areEquals:$k,applyOperation:bb,applyPatch:iM,applyReducer:Fgt,deepClone:Lgt,getValueByPointer:p6,validate:F_e,validator:m6},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var EY=new WeakMap,jgt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Ugt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function zgt(e){return EY.get(e)}function Vgt(e,t){return e.observers.get(t)}function Hgt(e,t){e.observers.delete(t.callback)}function qgt(e,t){t.unobserve()}function Wgt(e,t){var n=[],r,i=zgt(e);if(!i)i=new jgt(e),EY.set(e,i);else{var s=Vgt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Sc(e),t){r.callback=t,r.next=null;var o=function(){KU(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){KU(r),clearTimeout(r.next),Hgt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Ugt(t,r)),r}function KU(e,t){t===void 0&&(t=!1);var n=EY.get(e.object);TY(n.value,e.object,e.patches,"",t),e.patches.length&&iM(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function TY(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=WU(t),o=WU(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(qU(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?TY(c,f,n,r+"/"+Wv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Wv(l),value:Sc(c)}),n.push({op:"replace",path:r+"/"+Wv(l),value:Sc(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Wv(l),value:Sc(c)}),n.push({op:"remove",path:r+"/"+Wv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!qU(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Wv(l),value:Sc(t[l])})}}}function Ggt(e,t,n){n===void 0&&(n=!1);var r=[];return TY(e,t,r,"",n),r}const Ygt=Object.freeze(Object.defineProperty({__proto__:null,compare:Ggt,generate:KU,observe:Wgt,unobserve:qgt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Bgt,Ygt,{JsonPatchError:M_e,deepClone:Sc,escapePathComponent:Wv,unescapePathComponent:L_e});var G9,Pae;function Kgt(){if(Pae)return G9;Pae=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return G9=function(n,r){var i,s,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,function a(u,l,c){var f,d,h,p,g,y,x,b,_,E,T,k;if(u&&typeof u.toJSON=="function"&&(u=u.toJSON()),T=JSON.stringify(u,o),T===void 0)return T;if(x=s-l.length-c,T.length<=x&&(_=T.replace(e,function(I,R){return R||I+" "}),_.length<=x))return _;if(o!=null&&(u=JSON.parse(T),o=void 0),typeof u=="object"&&u!==null){if(b=l+i,h=[],d=0,Array.isArray(u))for(E="[",f="]",x=u.length;d<x;d++)h.push(a(u[d],b,d===x-1?0:1)||"null");else for(E="{",f="}",y=Object.keys(u),x=y.length;d<x;d++)p=y[d],g=JSON.stringify(p)+": ",k=a(u[p],b,g.length+(d===x-1?0:1)),k!==void 0&&h.push(g+k);if(h.length>0)return[E,i+h.join(`,
`+b),f].join(`
`+l)}return T}(n,"",0)},G9}var Xgt=Kgt();const Y9=qc(Xgt);function Vl(e,t,n){return e.fields=t||[],e.fname=n,e}function xs(e){return e==null?null:e.fname}function ru(e){return e==null?null:e.fields}function B_e(e){return e.length===1?Qgt(e[0]):Jgt(e)}const Qgt=e=>function(t){return t[e]},Jgt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function st(e){throw Error(e)}function Yp(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||st("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&st("Access path missing closing bracket: "+e),r&&st("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function kf(e,t,n){const r=Yp(e);return e=r.length===1?r[0]:e,Vl((n&&n.get||B_e)(r),[e],t||e)}const QI=kf("id"),lu=Vl(e=>e,[],"identity"),oy=Vl(()=>0,[],"zero"),fS=Vl(()=>1,[],"one"),If=Vl(()=>!0,[],"true"),Hg=Vl(()=>!1,[],"false");function Zgt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const j_e=0,SY=1,CY=2,U_e=3,z_e=4;function AY(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Zgt,r=e||j_e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=SY&&n(t||"error","ERROR",arguments),this},warn(){return r>=CY&&n(t||"warn","WARN",arguments),this},info(){return r>=U_e&&n(t||"log","INFO",arguments),this},debug(){return r>=z_e&&n(t||"log","DEBUG",arguments),this}}}var at=Array.isArray;function Ut(e){return e===Object(e)}const Dae=e=>e!=="__proto__";function dS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=eyt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;hS(r,s,i[s],o)}return r},{})}function hS(e,t,n,r){if(!Dae(t))return;let i,s;if(Ut(n)&&!at(n)){s=Ut(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?hS(s,i,n[i]):Dae(i)&&(s[i]=n[i])}else e[t]=n}function eyt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Sr(e){return e[e.length-1]}function tu(e){return e==null||e===""?null:+e}const V_e=e=>t=>e*Math.exp(t),H_e=e=>t=>Math.log(e*t),q_e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),W_e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,g6=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function sM(e,t,n,r){const i=n(e[0]),s=n(Sr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function G_e(e,t){return sM(e,t,tu,lu)}function Y_e(e,t){var n=Math.sign(e[0]);return sM(e,t,H_e(n),V_e(n))}function K_e(e,t,n){return sM(e,t,g6(n),g6(1/n))}function X_e(e,t,n){return sM(e,t,q_e(n),W_e(n))}function oM(e,t,n,r,i){const s=r(e[0]),o=r(Sr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function kY(e,t,n){return oM(e,t,n,tu,lu)}function IY(e,t,n){const r=Math.sign(e[0]);return oM(e,t,n,H_e(r),V_e(r))}function y6(e,t,n,r){return oM(e,t,n,g6(r),g6(1/r))}function RY(e,t,n,r){return oM(e,t,n,q_e(r),W_e(r))}function Q_e(e){return 1+~~(new Date(e).getMonth()/3)}function J_e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Vt(e){return e!=null?at(e)?e:[e]:[]}function Z_e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Gn(e){return typeof e=="function"}const tyt="descending";function PY(e,t,n){n=n||{},t=Vt(t)||[];const r=[],i=[],s={},o=n.comparator||nyt;return Vt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===tyt?-1:1),i.push(a=Gn(a)?a:kf(a,null,n)),(ru(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Vl(o(i,r),Object.keys(s))}const aM=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),nyt=(e,t)=>e.length===1?ryt(e[0],t[0]):iyt(e,t,e.length),ryt=(e,t)=>function(n,r){return aM(e(n),e(r))*t},iyt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=aM(s(r),s(i));return o*t[a]});function cu(e){return Gn(e)?e:()=>e}function DY(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Wn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Np(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function eEe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const syt=Object.prototype.hasOwnProperty;function Kt(e,t){return syt.call(e,t)}const ND={};function pS(e){let t={},n;function r(s){return Kt(t,s)&&t[s]!==ND}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===ND&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=ND),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==ND&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function tEe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Sr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function Mt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Wn(r,n)}function Y_(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function T1(e){return typeof e=="boolean"}function Sy(e){return Object.prototype.toString.call(e)==="[object Date]"}function nEe(e){return e&&Gn(e[Symbol.iterator])}function Vr(e){return typeof e=="number"}function rEe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Ht(e){return typeof e=="string"}function NY(e,t,n){e&&(e=t?Vt(e).map(a=>a.replace(/\\(.)/g,"$1")):Vt(e));const r=e&&e.length,i=n&&n.get||B_e,s=a=>i(t?[a]:Yp(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Vl(o,e,"key")}function iEe(e,t){const n=e[0],r=Sr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const oyt=1e4;function sEe(e){e=+e||oyt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Kt(t,o)||Kt(n,o),get:o=>Kt(t,o)?t[o]:Kt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Kt(t,o)?t[o]=a:s(o,a)}}function oEe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function XC(e,t){let n="";for(;--t>=0;)n+=e;return n}function aEe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?XC(i,o)+s:r==="center"?XC(i,~~(o/2))+s+XC(i,Math.ceil(o/2)):s+XC(i,o)}function JI(e){return e&&Sr(e)-e[0]||0}function Ot(e){return at(e)?"["+e.map(Ot)+"]":Ut(e)||Ht(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function OY(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const ayt=e=>Vr(e)||Sy(e)?e:Date.parse(e);function $Y(e,t){return t=t||ayt,e==null||e===""?null:t(e)}function LY(e){return e==null||e===""?null:e+""}function Yd(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function uEe(e,t,n,r){const i=r??"…",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Kg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function uyt(e){return e}function lyt(e){if(e==null)return uyt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function cyt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function fyt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Nae(e,n)})}:Nae(e,t)}function Nae(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=lEe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function lEe(e,t){var n=lyt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&cyt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function dyt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var y=p===h?h:p.concat(h);r[y.start=p.start]=i[y.end=h.end]=y}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function hyt(e){return lEe(e,pyt.apply(this,arguments))}function pyt(e,t,n){var r,i,s;if(arguments.length>1)r=myt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:dyt(e,r)}}function myt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Ea="year",Ml="quarter",iu="month",po="week",Fl="date",Ja="day",Op="dayofyear",Uc="hours",zc="minutes",Rf="seconds",Kd="milliseconds",MY=[Ea,Ml,iu,po,Fl,Ja,Op,Uc,zc,Rf,Kd],K9=MY.reduce((e,t,n)=>(e[t]=1+n,e),{});function FY(e){const t=Vt(e).slice(),n={};return t.length||st("Missing time unit."),t.forEach(i=>{Kt(K9,i)?n[i]=1:st(`Invalid time unit: ${i}.`)}),(n[po]||n[Ja]?1:0)+(n[Ml]||n[iu]||n[Fl]?1:0)+(n[Op]?1:0)>1&&st(`Incompatible time units: ${e}`),t.sort((i,s)=>K9[i]-K9[s]),t}const gyt={[Ea]:"%Y ",[Ml]:"Q%q ",[iu]:"%b ",[Fl]:"%d ",[po]:"W%U ",[Ja]:"%a ",[Op]:"%j ",[Uc]:"%H:00",[zc]:"00:%M",[Rf]:":%S",[Kd]:".%L",[`${Ea}-${iu}`]:"%Y-%m ",[`${Ea}-${iu}-${Fl}`]:"%Y-%m-%d ",[`${Uc}-${zc}`]:"%H:%M"};function cEe(e,t){const n=Wn({},gyt,t),r=FY(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Xv=new Date;function BY(e){return Xv.setFullYear(e),Xv.setMonth(0),Xv.setDate(1),Xv.setHours(0,0,0,0),Xv}function fEe(e){return hEe(new Date(e))}function dEe(e){return XU(new Date(e))}function hEe(e){return g0.count(BY(e.getFullYear())-1,e)}function XU(e){return aS.count(BY(e.getFullYear())-1,e)}function QU(e){return BY(e).getDay()}function yyt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function pEe(e){return gEe(new Date(e))}function mEe(e){return JU(new Date(e))}function gEe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ey.count(t-1,e)}function JU(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return uS.count(t-1,e)}function ZU(e){return Xv.setTime(Date.UTC(e,0,1)),Xv.getUTCDay()}function vyt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function yEe(e,t,n,r,i){const s=t||1,o=Sr(e),a=(x,b,_)=>(_=_||x,byt(n[_],r[_],x===o&&s,b)),u=new Date,l=Yd(e),c=l[Ea]?a(Ea):cu(2012),f=l[iu]?a(iu):l[Ml]?a(Ml):oy,d=l[po]&&l[Ja]?a(Ja,1,po+Ja):l[po]?a(po,1):l[Ja]?a(Ja,1):l[Fl]?a(Fl,1):l[Op]?a(Op,1):fS,h=l[Uc]?a(Uc):oy,p=l[zc]?a(zc):oy,g=l[Rf]?a(Rf):oy,y=l[Kd]?a(Kd):oy;return function(x){u.setTime(+x);const b=c(u);return i(b,f(u),d(u,b),h(u),p(u),g(u),y(u))}}function byt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function JE(e,t,n){return t+e*7-(n+6)%7}const xyt={[Ea]:e=>e.getFullYear(),[Ml]:e=>Math.floor(e.getMonth()/3),[iu]:e=>e.getMonth(),[Fl]:e=>e.getDate(),[Uc]:e=>e.getHours(),[zc]:e=>e.getMinutes(),[Rf]:e=>e.getSeconds(),[Kd]:e=>e.getMilliseconds(),[Op]:e=>hEe(e),[po]:e=>XU(e),[po+Ja]:(e,t)=>JE(XU(e),e.getDay(),QU(t)),[Ja]:(e,t)=>JE(1,e.getDay(),QU(t))},wyt={[Ml]:e=>3*e,[po]:(e,t)=>JE(e,0,QU(t))};function vEe(e,t){return yEe(e,t||1,xyt,wyt,yyt)}const _yt={[Ea]:e=>e.getUTCFullYear(),[Ml]:e=>Math.floor(e.getUTCMonth()/3),[iu]:e=>e.getUTCMonth(),[Fl]:e=>e.getUTCDate(),[Uc]:e=>e.getUTCHours(),[zc]:e=>e.getUTCMinutes(),[Rf]:e=>e.getUTCSeconds(),[Kd]:e=>e.getUTCMilliseconds(),[Op]:e=>gEe(e),[po]:e=>JU(e),[Ja]:(e,t)=>JE(1,e.getUTCDay(),ZU(t)),[po+Ja]:(e,t)=>JE(JU(e),e.getUTCDay(),ZU(t))},Eyt={[Ml]:e=>3*e,[po]:(e,t)=>JE(e,0,ZU(t))};function bEe(e,t){return yEe(e,t||1,_yt,Eyt,vyt)}const Tyt={[Ea]:Pp,[Ml]:Ak.every(3),[iu]:Ak,[po]:aS,[Fl]:g0,[Ja]:g0,[Op]:g0,[Uc]:GL,[zc]:qL,[Rf]:s0,[Kd]:WE},Syt={[Ea]:Dp,[Ml]:kk.every(3),[iu]:kk,[po]:uS,[Fl]:Ey,[Ja]:Ey,[Op]:Ey,[Uc]:YL,[zc]:WL,[Rf]:s0,[Kd]:WE};function mS(e){return Tyt[e]}function gS(e){return Syt[e]}function xEe(e,t,n){return e?e.offset(t,n):void 0}function wEe(e,t,n){return xEe(mS(e),t,n)}function _Ee(e,t,n){return xEe(gS(e),t,n)}function EEe(e,t,n,r){return e?e.range(t,n,r):void 0}function TEe(e,t,n,r){return EEe(mS(e),t,n,r)}function SEe(e,t,n,r){return EEe(gS(e),t,n,r)}const QC=1e3,JC=QC*60,ZC=JC*60,uM=ZC*24,Cyt=uM*7,Oae=uM*30,ez=uM*365,CEe=[Ea,iu,Fl,Uc,zc,Rf,Kd],eA=CEe.slice(0,-1),tA=eA.slice(0,-1),nA=tA.slice(0,-1),Ayt=nA.slice(0,-1),kyt=[Ea,po],$ae=[Ea,iu],AEe=[Ea],rC=[[eA,1,QC],[eA,5,5*QC],[eA,15,15*QC],[eA,30,30*QC],[tA,1,JC],[tA,5,5*JC],[tA,15,15*JC],[tA,30,30*JC],[nA,1,ZC],[nA,3,3*ZC],[nA,6,6*ZC],[nA,12,12*ZC],[Ayt,1,uM],[kyt,1,Cyt],[$ae,1,Oae],[$ae,3,3*Oae],[AEe,1,ez]];function kEe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(JI(t))/n;let i=iS(a=>a[2]).right(rC,r),s,o;return i===rC.length?(s=AEe,o=zy(t[0]/ez,t[1]/ez,n)):i?(i=rC[r/rC[i-1][2]<rC[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=CEe,o=Math.max(zy(t[0],t[1],n),1)),{units:s,step:o}}function rA(e){const t={};return n=>t[n]||(t[n]=e(n))}function Iyt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=Ryt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function Ryt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function IEe(e){const t=rA(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=$b(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Iyt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=$b(o??",f");const a=zy(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=Exe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Txe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=_xe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let tz;REe();function REe(){return tz=IEe({format:FL,formatPrefix:NG})}function PEe(e){return IEe(wxe(e))}function v6(e){return arguments.length?tz=PEe(e):tz}function Lae(e,t,n){n=n||{},Ut(n)||st(`Invalid time multi-format specifier: ${n}`);const r=t(Rf),i=t(zc),s=t(Uc),o=t(Fl),a=t(po),u=t(iu),l=t(Ml),c=t(Ea),f=e(n[Kd]||".%L"),d=e(n[Rf]||":%S"),h=e(n[zc]||"%I:%M"),p=e(n[Uc]||"%I %p"),g=e(n[Fl]||n[Ja]||"%a %d"),y=e(n[po]||"%b %d"),x=e(n[iu]||"%B"),b=e(n[Ml]||"%B"),_=e(n[Ea]||"%Y");return E=>(r(E)<E?f:i(E)<E?d:s(E)<E?h:o(E)<E?p:u(E)<E?a(E)<E?g:y:c(E)<E?l(E)<E?x:b:_)(E)}function DEe(e){const t=rA(e.format),n=rA(e.utcFormat);return{timeFormat:r=>Ht(r)?t(r):Lae(t,mS,r),utcFormat:r=>Ht(r)?n(r):Lae(n,gS,r),timeParse:rA(e.parse),utcParse:rA(e.utcParse)}}let nz;NEe();function NEe(){return nz=DEe({format:YG,parse:Lwe,utcFormat:KG,utcParse:Mwe})}function OEe(e){return DEe(Pwe(e))}function Lk(e){return arguments.length?nz=OEe(e):nz}const rz=(e,t)=>Wn({},e,t);function $Ee(e,t){const n=e?PEe(e):v6(),r=t?OEe(t):Lk();return rz(n,r)}function jY(e,t){const n=arguments.length;return n&&n!==2&&st("defaultLocale expects either zero or two arguments."),n?rz(v6(e),Lk(t)):rz(v6(),Lk())}function Pyt(){return REe(),NEe(),jY()}const Dyt=/^(data:|([A-Za-z]+:)?\/\/)/,Nyt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Oyt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Mae="file://";function $yt(e,t){return n=>({options:n||{},sanitize:Myt,load:Lyt,fileAccess:!1,file:Fyt(t),http:jyt(e)})}async function Lyt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function Myt(e,t){t=Wn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=Nyt.test(e.replace(Oyt,""));(e==null||typeof e!="string"||!a)&&st("Sanitize failure, invalid URI: "+Ot(e));const u=Dyt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Mae))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Mae.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function Fyt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):Byt}async function Byt(){st("No file system access.")}function jyt(e){return e?async function(t,n){const r=Wn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Gn(s[i])?s[i]():s.text():st(s.status+""+s.statusText)}:Uyt}async function Uyt(){st("No HTTP fetch method available.")}const zyt=e=>e!=null&&e===e,Vyt=e=>e==="true"||e==="false"||e===!0||e===!1,Hyt=e=>!Number.isNaN(Date.parse(e)),LEe=e=>!Number.isNaN(+e)&&!(e instanceof Date),qyt=e=>LEe(e)&&Number.isInteger(+e),iz={boolean:OY,integer:tu,number:tu,date:$Y,string:LY,unknown:lu},OD=[Vyt,qyt,LEe,Hyt],Wyt=["boolean","integer","number","date"];function MEe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=OD.length,i=OD.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&zyt(u)&&!OD[a](u)&&(i[a]=0,++o,o===OD.length))return"string";return Wyt[i.reduce((s,o)=>s===0?o:s,0)-1]}function FEe(e,t){return t.reduce((n,r)=>(n[r]=MEe(e,r),n),{})}function Fae(e){const t=function(n,r){const i={delimiter:e};return UY(n,r?Wn(r,i):i)};return t.responseType="text",t}function UY(e,t){return t.header&&(e=t.header.map(Ot).join(t.delimiter)+`
`+e),fct(t.delimiter).parse(e+"")}UY.responseType="text";function Gyt(e){return typeof Buffer=="function"&&Gn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function zY(e,t){const n=t&&t.property?kf(t.property):lu;return Ut(e)&&!Gyt(e)?Yyt(n(e),t):n(JSON.parse(e))}zY.responseType="json";function Yyt(e,t){return!at(e)&&nEe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Kyt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function BEe(e,t){let n,r,i,s;return e=zY(e,t),t&&t.feature?(n=fyt,i=t.feature):t&&t.mesh?(n=hyt,i=t.mesh,s=Kyt[t.filter]):st("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):st("Invalid TopoJSON object: "+i),r&&r.features||[r]}BEe.responseType="json";const sO={dsv:UY,csv:Fae(","),tsv:Fae("	"),json:zY,topojson:BEe};function VY(e,t){return arguments.length>1?(sO[e]=t,this):Kt(sO,e)?sO[e]:null}function jEe(e){const t=VY(e);return t&&t.responseType||"text"}function UEe(e,t,n,r){t=t||{};const i=VY(t.type||"json");return i||st("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Xyt(e,t.parse,n,r),Kt(e,"columns")&&delete e.columns,e}function Xyt(e,t,n,r){if(!e.length)return;const i=Lk();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=FEe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let g,y;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),y=g[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(g[0]==="utc"?r:n)(y);if(!iz[p])throw Error("Illegal format pattern: "+h+":"+p);return iz[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const lM=$yt(typeof fetch<"u"&&fetch,null);function cM(e){const t=e||lu,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function oO(e,t){try{await t(e)}catch(n){e.error(n)}}const zEe=Symbol("vega_id");let Qyt=1;function fM(e){return!!(e&&mn(e))}function mn(e){return e[zEe]}function VEe(e,t){return e[zEe]=t,e}function Kr(e){const t=e===Object(e)?e:{data:e};return mn(t)?t:VEe(t,Qyt++)}function HY(e){return dM(e,Kr({}))}function dM(e,t){for(const n in e)t[n]=e[n];return t}function HEe(e,t){return VEe(t,mn(e))}function Ix(e,t){return e?t?(n,r)=>e(n,r)||mn(t(n))-mn(t(r)):(n,r)=>e(n,r)||mn(n)-mn(r):null}function qEe(e){return e&&e.constructor===Rx}function Rx(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Rx,insert(a){const u=Vt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Gn(a)?r:t,l=Vt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:cu(l)};return Gn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Gn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,g,y;for(f=0,d=u.length;f<d;++f)l[mn(u[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],l[mn(g)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(b=>{p(b)&&(l[mn(b)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],y=mn(g),l[y]?l[y]=1:a.add.push(Kr(e[f]));for(f=0,d=u.length;f<d;++f)g=u[f],l[mn(g)]<0&&a.rem.push(g);function x(b,_,E){E?b[_]=E(b):a.encode=_,o||(c[mn(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,y=l[mn(g)],y>0&&(x(g,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(b=>{p(b)&&l[mn(b)]>0&&x(b,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(b=>l[mn(b)]>0):u.slice();else for(y in c)a.mod.push(c[y]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const aO="_:mod:_";function hM(){Object.defineProperty(this,aO,{writable:!0,value:{}})}hM.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[aO];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=at(n)?1+n.length:-1),i},modified(e,t){const n=this[aO];if(arguments.length){if(at(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[aO]={},this}};let Jyt=0;const Zyt="pulse",e1t=new hM,t1t=1,n1t=2;function Ei(e,t,n,r){this.id=++Jyt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Bae(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ei.prototype={targets(){return this._targets||(this._targets=cM(QI))},set(e){return this.value!==e?(this.value=e,1):0},skip:Bae(t1t),modified:Bae(n1t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new hM,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Ei?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===Zyt)Vt(a).forEach(f=>{f instanceof Ei?f!==this&&(f.targets().add(this),s.push(f)):st("Pulse parameters must be operator instances.")}),this.source=a;else if(at(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||e1t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function r1t(e,t,n,r){let i=1,s;return e instanceof Ei?s=e:e&&e.prototype instanceof Ei?s=new e:Gn(e)?s=new Ei(null,e):(i=0,s=new Ei(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function i1t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let s1t=0;function pM(e,t,n){this.id=++s1t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function qg(e,t,n){return new pM(e,t,n)}pM.prototype={_filter:If,_apply:lu,targets(){return this._targets||(this._targets=cM(QI))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=qg(e);return this.targets().add(t),t},apply(e){const t=qg(null,e);return this.targets().add(t),t},merge(){const e=qg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=qg();return this.targets().add(qg(null,null,DY(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(qg(null,null,()=>n=!0)),t.targets().add(qg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=If,this._targets=null}};function o1t(e,t,n,r){const i=this,s=qg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Vt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function a1t(e,t){const n=this.locale();return UEe(e,t,n.timeParse,n.utcParse)}function u1t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function l1t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:jEe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function c1t(e,t,n){const r=this,i=r._pending||f1t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(If).insert(s.data||[])),i.done(),s}function f1t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const d1t={skip:!0};function h1t(e,t,n,r,i){return(e instanceof Ei?m1t:p1t)(this,e,t,n,r,i),this}function p1t(e,t,n,r,i,s){const o=Wn({},s,d1t);let a,u;Gn(n)||(n=cu(n)),r===void 0?a=l=>e.touch(n(l)):Gn(r)?(u=new Ei(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;qEe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function m1t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Ei(null,g1t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function g1t(e,t){return t=Gn(t)?t:cu(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function y1t(e){e.rank=++this._rank}function v1t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&st("Cycle detected in dataflow graph.")}const b6={},qh=1,Xg=2,Vm=4,b1t=qh|Xg,jae=qh|Vm,g_=qh|Xg|Vm,Uae=8,iC=16,zae=32,Vae=64;function Cy(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function X9(e,t){const n=[];return Kg(e,t,r=>n.push(r)),n}function Hae(e,t){const n={};return e.visit(t,r=>{n[mn(r)]=1}),r=>n[mn(r)]?null:r}function $D(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Cy.prototype={StopPropagation:b6,ADD:qh,REM:Xg,MOD:Vm,ADD_REM:b1t,ADD_MOD:jae,ALL:g_,REFLOW:Uae,SOURCE:iC,NO_SOURCE:zae,NO_FIELDS:Vae,fork(e){return new Cy(this.dataflow).init(this,e)},clone(){const e=this.fork(g_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(g_|iC)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Cy(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Vae)&&(n.fields=e.fields),t&qh?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Xg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Vm?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&zae?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||g_;return t&qh&&this.add.length||t&Xg&&this.rem.length||t&Vm&&this.mod.length},reflow(e){if(e)return this.fork(g_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Vm,Hae(this,qh))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return at(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?at(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&qh&&(n.addF=$D(n.addF,t)),e&Xg&&(n.remF=$D(n.remF,t)),e&Vm&&(n.modF=$D(n.modF,t)),e&iC&&(n.srcF=$D(n.srcF,t)),n},materialize(e){e=e||g_;const t=this;return e&qh&&t.addF&&(t.add=X9(t.add,t.addF),t.addF=null),e&Xg&&t.remF&&(t.rem=X9(t.rem,t.remF),t.remF=null),e&Vm&&t.modF&&(t.mod=X9(t.mod,t.modF),t.modF=null),e&iC&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&iC)return Kg(n.source,n.srcF,r),n;e&qh&&Kg(n.add,n.addF,r),e&Xg&&Kg(n.rem,n.remF,r),e&Vm&&Kg(n.mod,n.modF,r);const i=n.source;if(e&Uae&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Kg(i,Hae(n,jae),r):Kg(i,n.srcF,r))}return n}};function qY(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Mt(qY,Cy,{fork(e){const t=new Cy(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?at(e)?e.some(r=>n[r]):n[e]:0},filter(){st("MultiPulse does not support filtering.")},materialize(){st("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function x1t(e,t,n){const r=this,i=[];if(r._pulse)return WEe(r);if(r._pending&&await r._pending,t&&await oO(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new Cy(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=cM(QI);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=b6),u!==b6&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await oO(r,c[f].callback)}return n&&await oO(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function w1t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function _1t(e,t,n){return this._pulse?WEe(this):(this.evaluate(e,t,n),this)}function E1t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function WEe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function T1t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function S1t(e,t){const n=e.source,r=this._clock;return n&&at(n)?new qY(this,r,n.map(i=>i.pulse),t):this._input[e.id]||C1t(this._pulse,n&&n.pulse)}function C1t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==b6&&(e.source=t.source),e)}const WY={skip:!1,force:!1};function A1t(e,t){const n=t||WY;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function k1t(e,t,n){const r=n||WY;return(e.set(t)||r.force)&&this.touch(e,r),this}function I1t(e,t,n){this.touch(e,n||WY);const r=new Cy(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function R1t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),GEe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,P1t(t,0,e)):r=n,r}}}function GEe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function P1t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,GEe(e,r,t,n)}function mE(){this.logger(AY()),this.logLevel(SY),this._clock=0,this._rank=0,this._locale=jY();try{this._loader=lM()}catch{}this._touched=cM(QI),this._input={},this._pulse=null,this._heap=R1t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function sC(e){return function(){return this._log[e].apply(this,arguments)}}mE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:sC("error"),warn:sC("warn"),info:sC("info"),debug:sC("debug"),logLevel:sC("level"),cleanThreshold:1e4,add:r1t,connect:i1t,rank:y1t,rerank:v1t,pulse:I1t,touch:A1t,update:k1t,changeset:Rx,ingest:u1t,parse:a1t,preload:c1t,request:l1t,events:o1t,on:h1t,evaluate:x1t,run:_1t,runAsync:w1t,runAfter:E1t,_enqueue:T1t,_getPulse:S1t};function Je(e,t){Ei.call(this,e,null,t)}Mt(Je,Ei,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const ZE={};function YEe(e){const t=KEe(e);return t&&t.Definition||null}function KEe(e){return e=e&&e.toLowerCase(),Kt(ZE,e)?ZE[e]:null}function*XEe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function GY(e,t,n){const r=Float64Array.from(XEe(e,n));return r.sort(p0),t.map(i=>_be(r,i))}function YY(e,t){return GY(e,[.25,.5,.75],t)}function KY(e,t){const n=e.length,r=Xst(e,t),i=YY(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function QEe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+g)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Pf=Math.random;function D1t(e){Pf=e}function JEe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(XEe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Pf()*s)];c[l]=a/s}return c.sort(p0),[z7(c,n/2),z7(c,1-n/2)]}function ZEe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?N1t(s,t+t/4):s}function N1t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function O1t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function $1t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Pf())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const eTe=Math.sqrt(2*Math.PI),L1t=Math.SQRT2;let oC=NaN;function mM(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(oC===oC)n=oC,oC=NaN;else{do n=Pf()*2-1,r=Pf()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,oC=r*s}return e+n*t}function XY(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*eTe)}function gM(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function yM(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*L1t*M1t(2*e-1)}function M1t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function QY(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>mM(n,r),pdf:s=>XY(s,n,r),cdf:s=>gM(s,n,r),icdf:s=>yM(s,n,r)};return i.mean(e).stdev(t)}function JY(e,t){const n=QY();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=KY(e)),i):t},sample(){return e[~~(Pf()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function ZY(e,t){return e=e||0,t=t??1,Math.exp(e+mM()*t)}function eK(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*eTe*e)}function tK(e,t,n){return gM(Math.log(e),t,n)}function nK(e,t,n){return Math.exp(yM(e,t,n))}function tTe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>ZY(n,r),pdf:s=>eK(s,n,r),cdf:s=>tK(s,n,r),icdf:s=>nK(s,n,r)};return i.mean(e).stdev(t)}function nTe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Pf();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function rK(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Pf()}function iK(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function sK(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function oK(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function rTe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>rK(n,r),pdf:s=>iK(s,n,r),cdf:s=>sK(s,n,r),icdf:s=>oK(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function aK(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function ZI(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function vM(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function eR(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function yS(e,t,n,r,i){let s=0,o=0;return eR(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function uK(e,t,n){let r=0,i=0,s=0,o=0,a=0;eR(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=ZI(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:yS(e,t,n,i,l)}}function iTe(e,t,n){let r=0,i=0,s=0,o=0,a=0;eR(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=ZI(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:yS(e,t,n,i,l)}}function sTe(e,t,n){const[r,i,s,o]=vM(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;eR(e,t,n,(b,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[g,y]=ZI(u/o,a/o,l/o,c/o),x=b=>Math.exp(g+y*(b-s));return{coef:[Math.exp(g-y*s),y],predict:x,rSquared:yS(e,t,n,o,x)}}function oTe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;eR(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=ZI(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:yS(e,t,n,a,c)}}function lK(e,t,n){const[r,i,s,o]=vM(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,g,y;for(h=0;h<a;)p=r[h],g=i[h++],y=p*p,u+=(y-u)/h,l+=(y*p-l)/h,c+=(y*y-c)/h,f+=(p*g-f)/h,d+=(y*g-d)/h;const x=c-u*u,b=u*x-l*l,_=(d*u-f*l)/b,E=(f*x-d*l)/b,T=-_*u,k=I=>(I=I-s,_*I*I+E*I+T+o);return{coef:[T-E*s+_*s*s+o,E-2*_*s,_],predict:k,rSquared:yS(e,t,n,o,k)}}function aTe(e,t,n,r){if(r===0)return aK(e,t,n);if(r===1)return uK(e,t,n);if(r===2)return lK(e,t,n);const[i,s,o,a]=vM(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,g,y;for(d=0;d<f;++d){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],d)*s[p];for(l.push(g),y=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],d+h);y[h]=g}c.push(y)}c.push(l);const x=B1t(c),b=_=>{_-=o;let E=a+x[0]+x[1]*_+x[2]*_*_;for(d=3;d<f;++d)E+=x[d]*Math.pow(_,d);return E};return{coef:F1t(f,x,-o,a),predict:b,rSquared:yS(e,t,n,a,b)}}function F1t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function B1t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const qae=2,Wae=1e-12;function uTe(e,t,n,r){const[i,s,o,a]=vM(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=qae;){const p=[0,l-1];for(let y=0;y<u;++y){const x=i[y],b=p[0],_=p[1],E=x-i[b]>i[_]-x?b:_;let T=0,k=0,I=0,R=0,D=0;const L=1/Math.abs(i[E]-x||1);for(let F=b;F<=_;++F){const H=i[F],Q=s[F],J=j1t(Math.abs(x-H)*L)*d[F],ne=H*J;T+=J,k+=ne,I+=Q*J,R+=Q*ne,D+=H*ne}const[M,z]=ZI(k/T,I/T,R/T,D/T);c[y]=M+z*x,f[y]=Math.abs(s[y]-c[y]),U1t(i,y+1,p)}if(h===qae)break;const g=Ebe(f);if(Math.abs(g)<Wae)break;for(let y=0,x,b;y<u;++y)x=f[y]/(6*g),d[y]=x>=1?Wae:(b=1-x*x)*b}return z1t(i,c,o,a)}function j1t(e){return(e=1-e*e*e)*e*e}function U1t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function z1t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const V1t=.5*Math.PI/180;function bM(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let g=1;g<r;++g)l.push(i(s+g/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let g=n;--g>0;)c.push(i(s+g/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=H1t(f[1],c);for(;d;){const g=i((f[0]+d[0])/2);g[0]-f[0]>=u&&q1t(f,g,d,h,p)>V1t?c.push(g):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function H1t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function q1t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function W1t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function sz(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:W1t(e)}function lTe(e,t,n){return n||e+(t?"_"+t:"")}const Q9=()=>{},G1t={init:Q9,add:Q9,rem:Q9,idx:0},Mk={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},tR=Object.keys(Mk).filter(e=>e!=="__count__");function Y1t(e,t){return(n,r)=>Wn({name:e,aggregate_param:r,out:n||e},G1t,t)}[...tR,"__count__"].forEach(e=>{Mk[e]=Y1t(e,Mk[e])});function cTe(e,t,n){return Mk[e](n,t)}function fTe(e,t){return e.idx-t.idx}function K1t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=Mk[i]())})};return e.forEach(n),Object.values(t).sort(fTe)}function X1t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Q1t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function J1t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Z1t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function dTe(e,t){const n=t||lu,r=K1t(e),i=e.slice().sort(fTe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=X1t,s.prototype.add=Q1t,s.prototype.rem=J1t,s.prototype.set=Z1t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function cK(e){this._key=e?kf(e):mn,this.reset()}const Ia=cK.prototype;Ia.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Ia.add=function(e){this._add.push(e)};Ia.rem=function(e){this._rem.push(e)};Ia.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Ia.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Kt(n,s)||(n[s]=1,++i);return i};Ia.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=eEe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Ia.argmin=function(e){return this.extent(e)[0]||{}};Ia.argmax=function(e){return this.extent(e)[1]||{}};Ia.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Ia.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Ia.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=YY(this.values(),e),this._get=e),this._q};Ia.q1=function(e){return this.quartile(e)[0]};Ia.q2=function(e){return this.quartile(e)[1]};Ia.q3=function(e){return this.quartile(e)[2]};Ia.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=JEe(this.values(),1e3,.05,e),this._get=e),this._ci};Ia.ci0=function(e){return this.ci(e)[0]};Ia.ci1=function(e){return this.ci(e)[1]};function Yy(e){Je.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Yy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:tR},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Mt(Yy,Je,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const _=Vt(ru(b)),E=_.length;let T=0,k;for(;T<E;++T)r[k=_[T]]||(r[k]=1,t.push(k))}this._dims=Vt(e.groupby),this._dnames=this._dims.map(b=>{const _=xs(b);return i(b),n.push(_),_}),this.cellkey=e.key?e.key:sz(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,g,y,x;for(l!==o.length&&st("Unmatched number of fields and aggregate ops."),x=0;x<l;++x){if(f=s[x],d=o[x],h=a[x]||null,f==null&&d!=="count"&&st("Null aggregate field specified."),g=xs(f),y=lTe(d,g,u[x]),n.push(y),d==="count"){this._counts.push(y);continue}p=c[g],p||(i(f),p=c[g]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(cTe(d,h,y))}return this._measures=this._measures.map(b=>dTe(b,b.field)),Object.create(null)},cellkey:sz(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new cK),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?HEe(t.tuple,s):Kr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const evt=1e-14;function fK(e){Je.call(this,null,e)}fK.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Mt(fK,Je,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ru(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=QEe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=tu(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(evt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Vl(u,ru(t),e.name||"bin_"+xs(t))}});function hTe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?oEe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function dK(e){Je.call(this,[],e)}dK.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Mt(dK,Je,{transform(e,t){const n=t.fork(t.ALL),r=hTe(mn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Ix(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function pTe(e){Ei.call(this,null,tvt,e)}Mt(pTe,Ei);function tvt(e){return this.value&&!e.modified()?this.value:PY(e.fields,e.orders)}function hK(e){Je.call(this,null,e)}hK.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function nvt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Mt(hK,Je,{transform(e,t){const n=f=>d=>{for(var h=nvt(a(d),e.case,s)||[],p,g=0,y=h.length;g<y;++g)o.test(p=h[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Kr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function pK(e){Je.call(this,null,e)}pK.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Mt(pK,Je,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=rvt(a,i,s,e.filter||If)):n.mod=a,n.source=this.value,n.modifies(r)}});function rvt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Kr(s)),s={},s[t]=l);return i}const Gae={kde:JY,mixture:nTe,normal:QY,lognormal:tTe,uniform:rTe},ivt="distributions",Yae="function",svt="field";function mTe(e,t){const n=e[Yae];Kt(Gae,n)||st("Unknown distribution function: "+n);const r=Gae[n]();for(const i in e)i===svt?r.data((e.from||t()).map(e[i])):i===ivt?r[i](e[i].map(s=>mTe(s,t))):typeof r[i]===Yae&&r[i](e[i]);return r}function mK(e){Je.call(this,null,e)}const gTe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],ovt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:gTe},{name:"weights",type:"number",array:!0}]};mK.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:gTe.concat(ovt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Mt(mK,Je,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=mTe(e.distribution,avt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&st("Invalid density method: "+o),!e.extent&&!r.data&&st("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Np(r.data()),l=bM(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Kr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function avt(e){return()=>e.materialize(e.SOURCE).source}function yTe(e,t){return e?e.map((n,r)=>t[r]||xs(n)):null}function gK(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const vTe="bin";function yK(e){Je.call(this,null,e)}yK.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:vTe}]};const uvt=(e,t)=>JI(Np(e,t))/30;Mt(yK,Je,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=gK(t.source,e.groupby,lu),i=e.smooth||!1,s=e.field,o=e.step||uvt(n,s),a=Ix((p,g)=>s(p)-s(g)),u=e.as||vTe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const g of ZEe(p,o,i,s))g<c&&(c=g),g>f&&(f=g),p[++h][u]=g}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function bTe(e){Ei.call(this,null,lvt,e),this.modified(!0)}Mt(bTe,Ei);function lvt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Vl(n=>t(n,e),ru(t),xs(t))}function vK(e){Je.call(this,[void 0,void 0],e)}vK.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Mt(vK,Je,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=tu(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=xs(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function bK(e,t){Ei.call(this,e),this.parent=t,this.count=0}Mt(bK,Ei,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function xM(e){Je.call(this,{},e),this._keys=pS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Mt(xM,Je,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Kt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new bK(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=mn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(mn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=mn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(mn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=mn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function xTe(e){Ei.call(this,null,cvt,e)}Mt(xTe,Ei);function cvt(e){return this.value&&!e.modified()?this.value:at(e.name)?Vt(e.name).map(t=>kf(t)):kf(e.name,e.as)}function xK(e){Je.call(this,pS(),e)}xK.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Mt(xK,Je,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=mn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(mn(f),1)});function c(f){const d=mn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function wK(e){Je.call(this,[],e)}wK.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Mt(wK,Je,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=yTe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=HY(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function _K(e){Je.call(this,[],e)}_K.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Mt(_K,Je,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(xs),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=HY(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function EK(e){Je.call(this,null,e)}EK.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Mt(EK,Je,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function wTe(e){Je.call(this,[],e)}Mt(wTe,Je,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Kr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const LD={value:"value",median:Ebe,mean:rot,min:U7,max:mb},fvt=[];function TK(e){Je.call(this,[],e)}TK.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function dvt(e){var t=e.method||LD.value,n;if(LD[t]==null)st("Unrecognized imputation method: "+t);else return t===LD.value?(n=e.value!==void 0?e.value:0,()=>n):LD[t]}function hvt(e){const t=e.field;return n=>n?t(n):NaN}Mt(TK,Je,{transform(e,t){var n=t.fork(t.ALL),r=dvt(e),i=hvt(e),s=xs(e.field),o=xs(e.key),a=(e.groupby||[]).map(xs),u=pvt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,g,y,x,b,_,E,T;for(y=0,_=u.length;y<_;++y)for(d=u[y],p=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(g=u.domain[b],T={_impute:!0},x=0,E=p.length;x<E;++x)T[a[x]]=p[x];T[o]=g,T[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Kr(T))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function pvt(e,t,n,r){var i=x=>x(y),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,g,y;for(o.forEach((x,b)=>a[x]=b+1),d=0,g=e.length;d<g;++d)y=e[d],p=n(y),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):fvt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=y;return s.domain=o,s}function SK(e){Yy.call(this,e)}SK.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:tR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Mt(SK,Yy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Wn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function CK(e){Je.call(this,null,e)}CK.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Mt(CK,Je,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=gK(r,e.groupby,e.field),s=(e.groupby||[]).map(xs),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&st("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Np(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=JY(h,o)[a],g=e.counts?h.length:1,y=c||Np(h);bM(p,y,f,d).forEach(x=>{const b={};for(let _=0;_<s.length;++_)b[s[_]]=h.dims[_];b[u[0]]=x[0],b[u[1]]=x[1]*g,l.push(Kr(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function _Te(e){Ei.call(this,null,mvt,e)}Mt(_Te,Ei);function mvt(e){return this.value&&!e.modified()?this.value:NY(e.fields,e.flat)}function ETe(e){Je.call(this,[],e),this._pending=null}Mt(ETe,Je,{transform(e,t){const n=t.dataflow;return this._pending?J9(this,t,this._pending):gvt(e)?t.StopPropagation:e.values?J9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Vt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>J9(this,t,Vt(r.data)))}});function gvt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function J9(e,t,n){n.forEach(Kr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function AK(e){Je.call(this,{},e)}AK.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Mt(AK,Je,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&st('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&st('The "as" parameter has too few output field names.'),c=c||i.map(xs),f=function(p){for(var g=0,y=0,x,b;g<a;++g)if(b=r.get(n[g](p)),b==null)for(x=0;x<d;++x,++y)p[c[y]]=s;else for(x=0;x<d;++x,++y)p[c[y]]=i[x](b)}):(c||st("Missing output field names."),f=function(p){for(var g=0,y;g<a;++g)y=r.get(n[g](p)),p[c[g]]=y??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function TTe(e){Ei.call(this,null,yvt,e)}Mt(TTe,Ei);function yvt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function STe(e){Ei.call(this,null,vvt,e)}Mt(STe,Ei);function vvt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function CTe(e){Je.call(this,null,e)}Mt(CTe,Je,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function kK(e){Yy.call(this,e)}kK.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:tR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Mt(kK,Yy,{_transform:Yy.prototype.transform,transform(e,t){return this._transform(bvt(e,t),t)}});function bvt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ru(n).concat(ru(r)),o=wvt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>xvt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function xvt(e,t,n,r){return Vl(i=>t(i)===e?n(i):NaN,r,e+"")}function wvt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(aM),t?i.slice(0,t):i}function ATe(e){xM.call(this,e)}Mt(ATe,xM,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(mn(s),n,t,s);return(e.modified("field")||r&&t.modified(ru(r)))&&st("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Kr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function IK(e){Je.call(this,null,e)}IK.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Mt(IK,Je,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=yTe(e.fields,e.as||[]),s=r?(a,u)=>_vt(a,u,r,i):dM;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=mn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Kr({}));o[mn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[mn(a)]))}),n}});function _vt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function kTe(e){Je.call(this,null,e)}Mt(kTe,Je,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function RK(e){Je.call(this,null,e)}RK.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Evt=1e-14;Mt(RK,Je,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=gK(i,e.groupby,e.field),o=(e.groupby||[]).map(xs),a=[],u=e.step||.01,l=e.probs||Tc(u/2,1-Evt,u),c=l.length;return s.forEach(f=>{const d=GY(f,l);for(let h=0;h<c;++h){const p={};for(let g=0;g<o.length;++g)p[o[g]]=f.dims[g];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Kr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function ITe(e){Je.call(this,null,e)}Mt(ITe,Je,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=mn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=HY(i);r[mn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[mn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function PK(e){Je.call(this,[],e),this.count=0}PK.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Mt(PK,Je,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[mn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Pf()),d<o.length&&d>=u&&(f=o[d],s[mn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=mn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[mn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[mn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[mn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[mn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[mn(c)])),this.count=a,this.value=n.source=o,n}});function DK(e){Je.call(this,null,e)}DK.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Mt(DK,Je,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Tc(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Kr(s)}),n.add=t.add.concat(this.value),n}});function RTe(e){Je.call(this,null,e),this.modified(!0)}Mt(RTe,Je,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function NK(e){Je.call(this,null,e)}const PTe=["unit0","unit1"];NK.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:MY,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:PTe}]};Mt(NK,Je,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?gS:mS)(s.unit).offset,a=e.as||PTe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ru(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let y,x;g==null?(p[u]=null,r&&(p[l]=null)):(p[u]=y=x=s(g),r&&(p[l]=x=o(y,c)),y<f&&(f=y),x>d&&(d=x))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:kEe({extent:e.extent||Np(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=FY(r),o=this.value||{},a=(n?bEe:vEe)(s,i);return a.unit=Sr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function DTe(e){Je.call(this,pS(),e)}Mt(DTe,Je,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function NTe(e){Je.call(this,null,e)}Mt(NTe,Je,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ix(e.sort)):t.source).map(e.field))}});function Tvt(e,t,n,r){const i=Fk[e](t,n);return{init:i.init||oy,update:function(s,o){o[r]=i.next(s)}}}const Fk={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Fk.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||st("ntile num must be greater than zero.");const n=Fk.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||st("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Svt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Svt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Cvt=Object.keys(Fk);function OTe(e){const t=Vt(e.ops),n=Vt(e.fields),r=Vt(e.params),i=Vt(e.aggregate_params),s=Vt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Vt(ru(p)).forEach(g=>u[g]=1)}h(e.sort),t.forEach((p,g)=>{const y=n[g],x=r[g],b=i[g]||null,_=xs(y),E=lTe(p,_,s[g]);if(h(y),o.push(E),Kt(Fk,p))a.push(Tvt(p,y,x,E));else{if(y==null&&p!=="count"&&st("Null aggregate field specified."),p==="count"){c.push(E);return}d=!1;let T=l[_];T||(T=l[_]=[],T.field=y,f.push(T)),T.push(cTe(p,b,E))}}),(c.length||f.length)&&(this.cell=Avt(f,c,d)),this.inputs=Object.keys(u)}const $Te=OTe.prototype;$Te.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};$Te.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Avt(e,t,n){e=e.map(u=>dTe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new cK;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function OK(e){Je.call(this,{},e),this._mlen=0,this._mods=[]}OK.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Cvt.concat(tR)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Mt(OK,Je,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Ix(e.sort),i=sz(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new OTe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)kvt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=hTe(mn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function kvt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?iS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||cu(-1)};t.init();for(let f=0;f<u;++f)Ivt(c,o,f,u),s&&Rvt(c,l),t.update(c,a[f])}function Ivt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Rvt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const Pvt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Yy,bin:fK,collect:dK,compare:pTe,countpattern:hK,cross:pK,density:mK,dotbin:yK,expression:bTe,extent:vK,facet:xM,field:xTe,filter:xK,flatten:wK,fold:_K,formula:EK,generate:wTe,impute:TK,joinaggregate:SK,kde:CK,key:_Te,load:ETe,lookup:AK,multiextent:TTe,multivalues:STe,params:CTe,pivot:kK,prefacet:ATe,project:IK,proxy:kTe,quantile:RK,relay:ITe,sample:PK,sequence:DK,sieve:RTe,subflow:bK,timeunit:NK,tupleindex:DTe,values:NTe,window:OK},Symbol.toStringTag,{value:"Module"}));function Ay(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Dvt=()=>typeof Image<"u"?Image:null;function $K(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const Nvt="identity",eT="linear",F0="log",nR="pow",rR="sqrt",wM="symlog",Ub="time",zb="utc",vp="sequential",vS="diverging",tT="quantile",_M="quantize",EM="threshold",LK="ordinal",oz="point",LTe="band",MK="bin-ordinal",_o="continuous",iR="discrete",sR="discretizing",zf="interpolating",FK="temporal";function Ovt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function $vt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function BK(){const e=zG().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=$K(f,a,u);let g=r[d-0];i=(h-g)/(p||1),o&&(i=Math.floor(i)),g+=(h-g-i*(f-a))*l,s=i*(1-a),o&&(g=Math.round(g),s=Math.round(s));const y=Tc(f).map(x=>g+i*x);return n(d?y.reverse():y)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],y=+f[1],x,b,_;if(!(g!==g||y!==y)&&(y<g&&(_=g,g=y,y=_),!(y<h[0]||g>r[1-d])))return x=Math.max(0,Uy(h,g)-1),b=g===y?x:Uy(h,y)-1,g-h[x]>s+1e-10&&++x,d&&(_=x,x=p-b,b=p-_),x>b?void 0:t().slice(x,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return BK().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function MTe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return MTe(t())},e}function Lvt(){return MTe(BK().paddingInner(1))}var Mvt=Array.prototype.map;function Fvt(e){return Mvt.call(e,tu)}const Bvt=Array.prototype.slice;function FTe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Uy(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Fvt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Bvt.call(r),n):t.slice()},n.tickFormat=function(r,i){return wwe(e[0],Sr(e),r??10,i)},n.copy=function(){return FTe().domain(n.domain()).range(n.range())},n}const x6=new Map,BTe=Symbol("vega_scale");function jTe(e){return e[BTe]=!0,e}function jvt(e){return e&&e[BTe]===!0}function Uvt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?Ovt(s):s.invertExtent?$vt(s):void 0),s.type=e,jTe(s)};return r.metadata=Yd(Vt(n)),r}function Hr(e,t,n){return arguments.length>1?(x6.set(e,Uvt(e,t,n)),this):UTe(e)?x6.get(e):void 0}Hr(Nvt,_we);Hr(eT,HL,_o);Hr(F0,Twe,[_o,F0]);Hr(nR,WG,_o);Hr(rR,yht,_o);Hr(wM,Swe,_o);Hr(Ub,Dpt,[_o,FK]);Hr(zb,Npt,[_o,FK]);Hr(vp,QG,[_o,zf]);Hr(`${vp}-${eT}`,QG,[_o,zf]);Hr(`${vp}-${F0}`,Fwe,[_o,zf,F0]);Hr(`${vp}-${nR}`,JG,[_o,zf]);Hr(`${vp}-${rR}`,Opt,[_o,zf]);Hr(`${vp}-${wM}`,Bwe,[_o,zf]);Hr(`${vS}-${eT}`,jwe,[_o,zf]);Hr(`${vS}-${F0}`,Uwe,[_o,zf,F0]);Hr(`${vS}-${nR}`,ZG,[_o,zf]);Hr(`${vS}-${rR}`,$pt,[_o,zf]);Hr(`${vS}-${wM}`,zwe,[_o,zf]);Hr(tT,Cwe,[sR,tT]);Hr(_M,Awe,sR);Hr(EM,kwe,sR);Hr(MK,FTe,[iR,sR]);Hr(LK,zG,iR);Hr(LTe,BK,iR);Hr(oz,Lvt,iR);function UTe(e){return x6.has(e)}function Px(e,t){const n=x6.get(e);return n&&n.metadata[t]}function jK(e){return Px(e,_o)}function nT(e){return Px(e,iR)}function az(e){return Px(e,sR)}function zTe(e){return Px(e,F0)}function zvt(e){return Px(e,FK)}function VTe(e){return Px(e,zf)}function HTe(e){return Px(e,tT)}const Vvt=["clamp","base","constant","exponent"];function qTe(e,t){const n=t[0],r=Sr(t)-n;return function(i){return e(n+i*r)}}function TM(e,t,n){return TG(UK(t||"rgb",n),e)}function WTe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function GTe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?cu(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=Hr(s)().domain([t,n]).range([0,1]),Vvt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function UK(e,t){const n=Cut[Hvt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Hvt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const qvt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Wvt={accent:Mpt,category10:Lpt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Fpt,observable10:Bpt,paired:jpt,pastel1:Upt,pastel2:zpt,set1:Vpt,set2:Hpt,set3:qpt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function YTe(e){if(at(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function KTe(e,t){for(const n in e)zK(n,t(e[n]))}const Kae={};KTe(Wvt,YTe);KTe(qvt,e=>TM(YTe(e)));function zK(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Kae[e]=t,this):Kae[e]}const uO="symbol",Gvt="discrete",Yvt="gradient",Kvt=e=>at(e)?e.map(t=>String(t)):String(e),Xvt=(e,t)=>e[1]-t[1],Qvt=(e,t)=>t[1]-e[1];function VK(e,t,n){let r;return Vr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(JI(e.domain())/n||1)+1))),Ut(t)&&(r=t.step,t=t.interval),Ht(t)&&(t=e.type===Ub?mS(t):e.type==zb?gS(t):st("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function XTe(e,t,n){let r=e.range(),i=r[0],s=Sr(r),o=Xvt;if(i>s&&(r=s,s=i,i=r,o=Qvt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Sr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function HK(e,t){return e.bins?XTe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function QTe(e,t,n,r,i,s){const o=t.type;let a=Kvt;if(o===Ub||i===Ub)a=e.timeFormat(r);else if(o===zb||i===zb)a=e.utcFormat(r);else if(zTe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=JTe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function JTe(e,t,n){const r=HK(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const uz={[tT]:"quantiles",[_M]:"thresholds",[EM]:"domain"},ZTe={[tT]:"quantiles",[_M]:"domain"};function eSe(e,t){return e.bins?ebt(e.bins):e.type===F0?JTe(e,t,!0):uz[e.type]?Zvt(e[uz[e.type]]()):HK(e,t)}function Jvt(e,t,n){const r=t[ZTe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Zvt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function ebt(e){const t=e.slice(0,-1);return t.max=Sr(e),t}const tbt=e=>uz[e.type]||e.bins;function tSe(e,t,n,r,i,s,o){const a=ZTe[t.type]&&s!==Ub&&s!==zb?Jvt(e,t,i):QTe(e,t,n,i,s,o);return r===uO&&tbt(t)?nbt(a):r===Gvt?rbt(a):ibt(a)}const nbt=e=>(t,n,r)=>{const i=Xae(r[n+1],Xae(r.max,1/0)),s=Qae(t,e),o=Qae(i,e);return s&&o?s+" – "+o:o?"< "+o:"≥ "+s},Xae=(e,t)=>e??t,rbt=e=>(t,n)=>n?e(t):null,ibt=e=>t=>e(t),Qae=(e,t)=>Number.isFinite(e)?t(e):null;function sbt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Sr(t),s=i-r;if(e.type===EM){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function obt(e,t,n,r){const i=r||t.type;return Ht(n)&&zvt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Ub?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===zb?e.utcFormat("%A, %d %B %Y, %X UTC"):tSe(e,t,5,null,n,r,!0)}function nSe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=obt(e,t,n.format,n.formatType);if(az(t.type)){const s=eSe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(nT(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Sr(s))}`}}let rSe=0;function abt(){rSe=0}const w6="p_";function qK(e){return e&&e.gradient}function iSe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?w6:"";return i||(i=e.id="gradient_"+rSe++,r==="radial"?(e.x1=Bh(e.x1,.5),e.y1=Bh(e.y1,.5),e.r1=Bh(e.r1,0),e.x2=Bh(e.x2,.5),e.y2=Bh(e.y2,.5),e.r2=Bh(e.r2,.5),s=w6):(e.x1=Bh(e.x1,0),e.y1=Bh(e.y1,0),e.x2=Bh(e.x2,1),e.y2=Bh(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Bh(e,t){return e??t}function sSe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Jae={basis:{curve:rmt},"basis-closed":{curve:imt},"basis-open":{curve:smt},bundle:{curve:omt,tension:"beta",value:.85},cardinal:{curve:amt,tension:"tension",value:0},"cardinal-open":{curve:lmt,tension:"tension",value:0},"cardinal-closed":{curve:umt,tension:"tension",value:0},"catmull-rom":{curve:cmt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:fmt,tension:"alpha",value:.5},"catmull-rom-open":{curve:dmt,tension:"alpha",value:.5},linear:{curve:eY},"linear-closed":{curve:hmt},monotone:{horizontal:mmt,vertical:pmt},natural:{curve:gmt},step:{curve:ymt},"step-after":{curve:bmt},"step-before":{curve:vmt}};function WK(e,t,n){var r=Kt(Jae,e)&&Jae[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const ubt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},lbt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,cbt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,fbt=/^((\s+,?\s*)|(,\s*))/,dbt=/^[01]/;function rT(e){const t=[];return(e.match(lbt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=ubt[s],a=hbt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function hbt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?dbt:cbt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(fbt);u!==null&&(i+=u[0].length)}return r}const Ky=Math.PI/180,pbt=1e-14,Qv=Math.PI/2,Zh=Math.PI*2,y_=Math.sqrt(3)/2;var Z9={},eB={},oSe=[].join;function mbt(e,t,n,r,i,s,o,a,u){const l=oSe.call(arguments);if(Z9[l])return Z9[l];const c=o*Ky,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const y=d/n,x=f/n,b=-f/r,_=d/r,E=y*a+x*u,T=b*a+_*u,k=y*e+x*t,I=b*e+_*t;let D=1/((k-E)*(k-E)+(I-T)*(I-T))-.25;D<0&&(D=0);let L=Math.sqrt(D);s==i&&(L=-L);const M=.5*(E+k)-L*(I-T),z=.5*(T+I)+L*(k-E),F=Math.atan2(T-z,E-M);let Q=Math.atan2(I-z,k-M)-F;Q<0&&s===1?Q+=Zh:Q>0&&s===0&&(Q-=Zh);const J=Math.ceil(Math.abs(Q/(Qv+.001))),ne=[];for(let Z=0;Z<J;++Z){const ie=F+Z*Q/J,q=F+(Z+1)*Q/J;ne[Z]=[M,z,ie,q,n,r,f,d]}return Z9[l]=ne}function gbt(e){const t=oSe.call(e);if(eB[t])return eB[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),g=Math.sin(i),y=Math.cos(s),x=Math.sin(s),b=.5*(s-i),_=Math.sin(b*.5),E=8/3*_*_/Math.sin(b),T=n+p-E*g,k=r+g+E*p,I=n+y,R=r+x,D=I+E*x,L=R-E*y;return eB[t]=[c*T+f*k,d*T+h*k,c*D+f*L,d*D+h*L,c*I+f*R,d*I+h*R]}const hf=["l",0,0,0,0,0,0,0];function ybt(e,t,n){const r=hf[0]=e[0];if(r==="a"||r==="A")hf[1]=t*e[1],hf[2]=n*e[2],hf[3]=e[3],hf[4]=e[4],hf[5]=e[5],hf[6]=t*e[6],hf[7]=n*e[7];else if(r==="h"||r==="H")hf[1]=t*e[1];else if(r==="v"||r==="V")hf[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)hf[i]=(i%2==1?t:n)*e[i];return hf}function Bk(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,g,y=0,x=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var b=0,_=t.length;b<_;++b){switch(o=t[b],(i!==1||s!==1)&&(o=ybt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],y=u,x=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],y=u,x=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-g):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Zae(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Zae(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=y,l=x,e.closePath();break}a=o}}function Zae(e,t,n,r){const i=mbt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=gbt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const eue=.5773502691896257,tue={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Zh)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=y_*n,i=r-n*eue,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=y_*n,i=r-n*eue;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=y_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=y_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=y_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=y_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function aSe(e){return Kt(tue,e)?tue[e]:vbt(e)}var tB={};function vbt(e){if(!Kt(tB,e)){const t=rT(e);tB[e]={draw:function(n,r){Bk(n,t,0,0,Math.sqrt(r)/2)}}}return tB[e]}const jg=.448084975506;function bbt(e){return e.x}function xbt(e){return e.y}function wbt(e){return e.width}function _bt(e){return e.height}function $m(e){return typeof e=="function"?e:()=>+e}function MD(e,t,n){return Math.max(t,Math.min(e,n))}function uSe(){var e=bbt,t=xbt,n=wbt,r=_bt,i=$m(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),g=d??+t.call(this,c),y=+n.call(this,c),x=+r.call(this,c),b=Math.min(y,x)/2,_=MD(+i.call(this,c),0,b),E=MD(+s.call(this,c),0,b),T=MD(+o.call(this,c),0,b),k=MD(+a.call(this,c),0,b);if(u||(u=h=ML()),_<=0&&E<=0&&T<=0&&k<=0)u.rect(p,g,y,x);else{var I=p+y,R=g+x;u.moveTo(p+_,g),u.lineTo(I-E,g),u.bezierCurveTo(I-jg*E,g,I,g+jg*E,I,g+E),u.lineTo(I,R-k),u.bezierCurveTo(I,R-jg*k,I-jg*k,R,I-k,R),u.lineTo(p+T,R),u.bezierCurveTo(p+jg*T,R,p,R-jg*T,p,R-T),u.lineTo(p,g+_),u.bezierCurveTo(p,g+jg*_,p+jg*_,g,p+_,g),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=$m(c),l):e},l.y=function(c){return arguments.length?(t=$m(c),l):t},l.width=function(c){return arguments.length?(n=$m(c),l):n},l.height=function(c){return arguments.length?(r=$m(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=$m(c),s=f!=null?$m(f):i,a=d!=null?$m(d):i,o=h!=null?$m(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function lSe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var g=a-d,y=f-o;if(g||y){var x=Math.hypot(g,y),b=(g/=x)*u,_=(y/=x)*u,E=Math.atan2(y,g);i.moveTo(o-b,a-_),i.lineTo(f-g*p,d-y*p),i.arc(f,d,p,E-Math.PI,E),i.lineTo(o+b,a+_),i.arc(o,a,u,E,E+Math.PI)}else i.arc(f,d,p,0,Zh);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,g=!1,y;for(i==null&&(i=y=ML()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===g&&(g=!g)&&(s=0),g&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(y)return i=null,y+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function oR(e,t){return e??t}const aR=e=>e.x||0,uR=e=>e.y||0,Ebt=e=>e.width||0,Tbt=e=>e.height||0,Sbt=e=>(e.x||0)+(e.width||0),Cbt=e=>(e.y||0)+(e.height||0),Abt=e=>e.startAngle||0,kbt=e=>e.endAngle||0,Ibt=e=>e.padAngle||0,Rbt=e=>e.innerRadius||0,Pbt=e=>e.outerRadius||0,Dbt=e=>e.cornerRadius||0,Nbt=e=>oR(e.cornerRadiusTopLeft,e.cornerRadius)||0,Obt=e=>oR(e.cornerRadiusTopRight,e.cornerRadius)||0,$bt=e=>oR(e.cornerRadiusBottomRight,e.cornerRadius)||0,Lbt=e=>oR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Mbt=e=>oR(e.size,64),Fbt=e=>e.size||1,SM=e=>e.defined!==!1,Bbt=e=>aSe(e.shape||"circle"),jbt=emt().startAngle(Abt).endAngle(kbt).padAngle(Ibt).innerRadius(Rbt).outerRadius(Pbt).cornerRadius(Dbt),Ubt=Kwe().x(aR).y1(uR).y0(Cbt).defined(SM),zbt=Kwe().y(uR).x1(aR).x0(Sbt).defined(SM),Vbt=Ywe().x(aR).y(uR).defined(SM),Hbt=uSe().x(aR).y(uR).width(Ebt).height(Tbt).cornerRadius(Nbt,Obt,$bt,Lbt),qbt=nmt().type(Bbt).size(Mbt),Wbt=lSe().x(aR).y(uR).defined(SM).size(Fbt);function GK(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Gbt(e,t){return jbt.context(e)(t)}function Ybt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?zbt:Ubt).curve(WK(r,n.orient,n.tension)).context(e)(t)}function Kbt(e,t){const n=t[0],r=n.interpolate||"linear";return Vbt.curve(WK(r,n.orient,n.tension)).context(e)(t)}function bS(e,t,n,r){return Hbt.context(e)(t,n,r)}function Xbt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Qbt(e,t){return qbt.context(e)(t)}function Jbt(e,t){return Wbt.context(e)(t)}var cSe=1;function fSe(){cSe=1}function YK(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+cSe++),o=i.clipping[s]||(i.clipping[s]={id:s});return Gn(r)?o.path=r(null):GK(n)?o.path=bS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function eo(e){this.clear(),e&&this.union(e)}eo.prototype={clone(){return new eo(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function CM(e){this.mark=e,this.bounds=this.bounds||new eo}function AM(e){CM.call(this,e),this.items=this.items||[]}Mt(AM,CM);class dSe{constructor(t){this._pending=0,this._loader=t||lM()}pending(){return this._pending}sanitizeURL(t){const n=this;return nue(n),n._loader.sanitize(t,{context:"href"}).then(r=>(aC(n),r)).catch(()=>(aC(n),null))}loadImage(t){const n=this,r=Dvt();return nue(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Kt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>aC(n),o.onerror=()=>aC(n),o.src=s,o}).catch(i=>(aC(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function nue(e){e._pending+=1}function aC(e){e._pending-=1}function Y0(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Zbt(t,r):0))}return e}function Zbt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const ext=Zh-1e-8;let kM,lO,cO,lb,lz,fO,cz,fz;const ly=(e,t)=>kM.add(e,t),dO=(e,t)=>ly(lO=e,cO=t),rue=e=>ly(e,kM.y1),iue=e=>ly(kM.x1,e),Jv=(e,t)=>lz*e+cz*t,Zv=(e,t)=>fO*e+fz*t,nB=(e,t)=>ly(Jv(e,t),Zv(e,t)),rB=(e,t)=>dO(Jv(e,t),Zv(e,t));function lR(e,t){return kM=e,t?(lb=t*Ky,lz=fz=Math.cos(lb),fO=Math.sin(lb),cz=-fO):(lz=fz=1,lb=fO=cz=0),txt}const txt={beginPath(){},closePath(){},moveTo:rB,lineTo:rB,rect(e,t,n,r){lb?(nB(e+n,t),nB(e+n,t+r),nB(e,t+r),rB(e,t)):(ly(e+n,t+r),dO(e,t))},quadraticCurveTo(e,t,n,r){const i=Jv(e,t),s=Zv(e,t),o=Jv(n,r),a=Zv(n,r);sue(lO,i,o,rue),sue(cO,s,a,iue),dO(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Jv(e,t),a=Zv(e,t),u=Jv(n,r),l=Zv(n,r),c=Jv(i,s),f=Zv(i,s);oue(lO,o,u,c,rue),oue(cO,a,l,f,iue),dO(c,f)},arc(e,t,n,r,i,s){if(r+=lb,i+=lb,lO=n*Math.cos(i)+e,cO=n*Math.sin(i)+t,Math.abs(i-r)>ext)ly(e-n,t-n),ly(e+n,t+n);else{const o=l=>ly(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Zh,r<0&&(r+=Zh),i=i%Zh,i<0&&(i+=Zh),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Zh,a=r-r%Qv,u=0;u<4&&a>i;++u,a-=Qv)o(a);else for(a=r-r%Qv+Qv,u=0;u<4&&a<i;++u,a=a+Qv)o(a)}}};function sue(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function oue(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>pbt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(aue(u,e,t,n,r)),0<l&&l<1&&i(aue(l,e,t,n,r))}function aue(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var ky=(ky=Ay(1,1))?ky.getContext("2d"):null;const dz=new eo;function KK(e){return function(t,n){if(!ky)return!0;e(ky,t),dz.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=dz;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(ky.isPointInPath(u,a))return!0;return!1}}function XK(e,t){return t.contains(e.x||0,e.y||0)}function hSe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(dz.set(n,r,n+i,r+s))}function pSe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return K_(t,n,r,i,s)}function K_(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,g,y;for(y=0;y<4;++y){if(y===0&&(h=-l,p=-(s-t)),y===1&&(h=l,p=a-t),y===2&&(h=-c,p=-(o-n)),y===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function iT(e,t){e.globalCompositeOperation=t.blend||"source-over"}function yd(e,t){return e??t}function uue(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function nxt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+yd(t.x1,.5)*r,n.y1+yd(t.y1,.5)*i,Math.max(r,i)*yd(t.r1,0),n.x1+yd(t.x2,.5)*r,n.y1+yd(t.y2,.5)*i,Math.max(r,i)*yd(t.r2,.5));else{const o=yd(t.x1,0),a=yd(t.y1,0),u=yd(t.x2,1),l=yd(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=Ay(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=uue(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return uue(s,t.stops)}function mSe(e,t,n){return qK(n)?nxt(e,n,t.bounds):n}function _6(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=mSe(e,t,t.fill),!0):!1}var rxt=[];function sT(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=mSe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||rxt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function ixt(e,t){return e.zindex-t.zindex||e.index-t.index}function QK(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(ixt)}function Xd(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=QK(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function E6(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=QK(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function JK(e){return function(t,n,r){Xd(n,i=>{(!r||r.intersects(i.bounds))&&gSe(e,t,i,i)})}}function sxt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&gSe(e,t,n.items[0],n.items)}}function gSe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(iT(t,n),n.fill&&_6(t,n,i)&&t.fill(),n.stroke&&sT(t,n,i)&&t.stroke()))}function IM(e){return e=e||If,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,E6(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function cR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function ZK(e){return IM(cR(e))}function xb(e,t){return"translate("+e+","+t+")"}function eX(e){return"rotate("+e+")"}function oxt(e,t){return"scale("+e+","+t+")"}function ySe(e){return xb(e.x||0,e.y||0)}function axt(e){return xb(e.x||0,e.y||0)+(e.angle?" "+eX(e.angle):"")}function uxt(e){return xb(e.x||0,e.y||0)+(e.angle?" "+eX(e.angle):"")+(e.scaleX||e.scaleY?" "+oxt(e.scaleX||1,e.scaleY||1):"")}function tX(e,t,n){function r(o,a){o("transform",axt(a)),o("d",t(null,a))}function i(o,a){return t(lR(o,a.angle),a),Y0(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Ky),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:JK(s),pick:ZK(s),isect:n||KK(s)}}var lxt=tX("arc",Gbt);function cxt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function fxt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function dxt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function nX(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(lR(u),c),Y0(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=cR(s);function a(u,l,c,f,d,h){var p=l.items,g=l.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:sxt(s),pick:a,isect:XK,tip:n}}var hxt=nX("area",Ybt,cxt);function pxt(e,t){var n=t.clip;e.save(),Gn(n)?(e.beginPath(),n(e),e.clip()):vSe(e,t.group)}function vSe(e,t){e.beginPath(),GK(t)?bS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function bSe(e){const t=yd(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function mxt(e,t){e("transform",ySe(t))}function xSe(e,t){const n=bSe(t);e("d",bS(null,t,n,n))}function gxt(e,t){e("class","background"),e("aria-hidden",!0),xSe(e,t)}function yxt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?xSe(e,t):e("d","")}function vxt(e,t,n){const r=t.clip?YK(n,t,t):null;e("clip-path",r)}function bxt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Y0(e,t),e.translate(t.x||0,t.y||0)}function jk(e,t,n,r){const i=bSe(t);e.beginPath(),bS(e,t,(n||0)+i,(r||0)+i)}const xxt=cR(jk),wxt=cR(jk,!1),_xt=cR(jk,!0);function Ext(e,t,n,r){Xd(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(jk(e,i,s,o),iT(e,i),i.fill&&_6(e,i,u)&&e.fill(),i.stroke&&!a&&sT(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&vSe(e,i),n&&n.translate(-s,-o),Xd(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(jk(e,i,s,o),iT(e,i),sT(e,i,u)&&e.stroke())})}function Txt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return E6(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),g=u.clip;if(g&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,g&&GK(u)&&!_xt(e,u,o,a))return e.restore(),null;const y=u.strokeForeground,x=t.interactive!==!1;return x&&y&&u.stroke&&wxt(e,u,o,a)?(e.restore(),u):(l=E6(u,b=>Sxt(b,c,f)?this.pick(b,n,r,c,f):null),!l&&x&&(u.fill||!y&&u.stroke)&&xxt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function Sxt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Cxt={type:"group",tag:"g",nested:!1,attr:mxt,bound:bxt,draw:Ext,pick:Txt,isect:hSe,content:vxt,background:gxt,foreground:yxt},Uk={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function rX(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function iX(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function sX(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function RM(e,t){return e==="center"?t/2:e==="right"?t:0}function PM(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Axt(e,t,n){const r=rX(t,n),i=iX(t,r),s=sX(t,r),o=(t.x||0)-RM(t.align,i),a=(t.y||0)-PM(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,Uk["xmlns:xlink"],"xlink:href"),e("transform",xb(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function kxt(e,t){const n=t.image,r=iX(t,n),i=sX(t,n),s=(t.x||0)-RM(t.align,r),o=(t.y||0)-PM(t.baseline,i);return e.set(s,o,s+r,o+i)}function Ixt(e,t,n){Xd(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=rX(r,this);let s=iX(r,i),o=sX(r,i);if(s===0||o===0)return;let a=(r.x||0)-RM(r.align,s),u=(r.y||0)-PM(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(iT(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var Rxt={type:"image",tag:"image",nested:!1,attr:Axt,bound:kxt,draw:Ixt,pick:IM(),isect:If,get:rX,xOffset:RM,yOffset:PM},Pxt=nX("line",Kbt,fxt);function Dxt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",uxt(t)),e("d",t.path)}function hO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Ky,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=rT(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),Bk(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):Bk(e,u,r,i,s,o)}function Nxt(e,t){return hO(lR(e,t.angle),t)?e.set(0,0,0,0):Y0(e,t,!0)}var Oxt={type:"path",tag:"path",nested:!1,attr:Dxt,bound:Nxt,draw:JK(hO),pick:ZK(hO),isect:KK(hO)};function $xt(e,t){e("d",bS(null,t))}function Lxt(e,t){var n,r;return Y0(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function lue(e,t){e.beginPath(),bS(e,t)}var Mxt={type:"rect",tag:"path",nested:!1,attr:$xt,bound:Lxt,draw:JK(lue),pick:ZK(lue),isect:hSe};function Fxt(e,t){e("transform",ySe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Bxt(e,t){var n,r;return Y0(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function wSe(e,t,n){var r,i,s,o;return t.stroke&&sT(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function jxt(e,t,n){Xd(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&wSe(e,r,i)&&(iT(e,r),e.stroke())}})}function Uxt(e,t,n,r){return e.isPointInStroke?wSe(e,t,1)&&e.isPointInStroke(n,r):!1}var zxt={type:"rule",tag:"line",nested:!1,attr:Fxt,bound:Bxt,draw:jxt,pick:IM(Uxt),isect:pSe},Vxt=tX("shape",Xbt),Hxt=tX("symbol",Qbt,XK);const cue=sEe();var Rc={height:Kp,measureWidth:oX,estimateWidth:T6,width:T6,canvas:_Se};_Se(!0);function _Se(e){Rc.width=e&&ky?oX:T6}function T6(e,t){return ESe(Qy(e,t),Kp(e))}function ESe(e,t){return~~(.8*e.length*t)}function oX(e,t){return Kp(e)<=0||!(t=Qy(e,t))?0:TSe(t,DM(e))}function TSe(e,t){const n=`(${t}) ${e}`;let r=cue.get(n);return r===void 0&&(ky.font=t,r=ky.measureText(e).width,cue.set(n,r)),r}function Kp(e){return e.fontSize!=null?+e.fontSize||0:11}function Xy(e){return e.lineHeight!=null?e.lineHeight:Kp(e)+2}function qxt(e){return at(e)?e.length>1?e:e[0]:e}function fR(e){return qxt(e.lineBreak&&e.text&&!at(e.text)?e.text.split(e.lineBreak):e.text)}function aX(e){const t=fR(e);return(at(t)?t.length-1:0)*Xy(e)}function Qy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Gxt(e,n):n}function Wxt(e){if(Rc.width===oX){const t=DM(e);return n=>TSe(n,t)}else if(Rc.width===T6){const t=Kp(e);return n=>ESe(n,t)}else return t=>Rc.width(e,t)}function Gxt(e,t){var n=+e.limit,r=Wxt(e);if(r(t)<n)return t;var i=e.ellipsis||"…",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function dR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function DM(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Kp(e)+"px "+dR(e,t)}function uX(e){var t=e.baseline,n=Kp(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Xy(e):t==="line-bottom"?.29*n-.5*Xy(e):0)}const Yxt={left:"start",center:"middle",right:"end"},LA=new eo;function NM(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Qv,t+=r*Math.cos(i),n+=r*Math.sin(i)),LA.x1=t,LA.y1=n,LA}function Kxt(e,t){var n=t.dx||0,r=(t.dy||0)+uX(t),i=NM(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",Yxt[t.align]||"start"),a?(u=xb(s,o)+" "+eX(a),(n||r)&&(u+=" "+xb(n,r))):u=xb(s+n,o+r),e("transform",u)}function lX(e,t,n){var r=Rc.height(t),i=t.align,s=NM(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+uX(t)-Math.round(.8*r),c=fR(t),f;if(at(c)?(r+=Xy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Rc.width(t,h)),0)):f=Rc.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Ky,o,a);else if(n===2)return e.rotatedPoints(t.angle*Ky,o,a);return e}function Xxt(e,t,n){Xd(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=DM(r),e.textAlign=r.align||"left",s=NM(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Ky),o=a=0),o+=r.dx||0,a+=(r.dy||0)+uX(r),c=fR(r),iT(e,r),at(c))for(l=Xy(r),u=0;u<c.length;++u)f=Qy(r,c[u]),r.fill&&_6(e,r,i)&&e.fillText(f,o,a),r.stroke&&sT(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Qy(r,c),r.fill&&_6(e,r,i)&&e.fillText(f,o,a),r.stroke&&sT(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function Qxt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=NM(t),a=o.x1,u=o.y1,l=lX(LA,t,1),c=-t.angle*Ky,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function Jxt(e,t){const n=lX(LA,e,2);return K_(t,n[0],n[1],n[2],n[3])||K_(t,n[0],n[1],n[4],n[5])||K_(t,n[4],n[5],n[6],n[7])||K_(t,n[2],n[3],n[6],n[7])}var Zxt={type:"text",tag:"text",nested:!1,attr:Kxt,bound:lX,draw:Xxt,pick:IM(Qxt),isect:Jxt},ewt=nX("trail",Jbt,dxt),Vc={arc:lxt,area:hxt,group:Cxt,image:Rxt,line:Pxt,path:Oxt,rect:Mxt,rule:zxt,shape:Vxt,symbol:Hxt,text:Zxt,trail:ewt};function hz(e,t,n){var r=Vc[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new eo),e,n)}var fue={mark:null};function SSe(e,t,n){var r=Vc[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(fue.mark=e,l=fue),c=hz(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new eo,o)for(a=0,u=s.length;a<u;++a)t.union(hz(s[a],i,n));return e.bounds=t}const twt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function CSe(e,t){return JSON.stringify(e,twt,t)}function ASe(e){const t=typeof e=="string"?JSON.parse(e):e;return kSe(t)}function kSe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&kSe(n[i]);return t&&SSe(e),e}class ISe{constructor(t){arguments.length?this.root=ASe(t):(this.root=due({marktype:"group",name:"root",role:"frame"}),this.root.items=[new AM(this.root)])}toJSON(t){return CSe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=due(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function due(e,t){const n={bounds:new eo,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function cy(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function cX(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function fo(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=cy(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function vf(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function RSe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function OM(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function nwt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Vc[i.marktype]).tip){for(o=OM(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let fX=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||lM(),this._tooltip=n||rwt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=cy(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=nwt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function rwt(e,t,n,r){e.element().setAttribute("title",r||"")}class hR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new dSe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const iwt="keydown",swt="keypress",owt="keyup",PSe="dragenter",pO="dragleave",DSe="dragover",pz="pointerdown",awt="pointerup",S6="pointermove",mO="pointerout",NSe="pointerover",mz="mousedown",uwt="mouseup",OSe="mousemove",C6="mouseout",$Se="mouseover",A6="click",lwt="dblclick",cwt="wheel",LSe="mousewheel",k6="touchstart",I6="touchmove",R6="touchend",fwt=[iwt,swt,owt,PSe,pO,DSe,pz,awt,S6,mO,NSe,mz,uwt,OSe,C6,$Se,A6,lwt,cwt,LSe,k6,I6,R6],gz=S6,MA=C6,yz=A6;class pR extends fX{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=fwt,this.pointermove=pue([S6,OSe],[NSe,$Se],[mO,C6]),this.dragover=pue([DSe],[PSe],[pO]),this.pointerout=mue([mO,C6]),this.dragleave=mue([pO])}initialize(t,n,r){return this._canvas=t&&cX(t,"canvas"),[A6,mz,pz,S6,mO,pO].forEach(i=>hue(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(LSe,t)}pointerdown(t){this._down=this._active,this.fire(pz,t)}mousedown(t){this._down=this._active,this.fire(mz,t)}click(t){this._down===this._active&&(this.fire(A6,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(k6,t,!0)}touchmove(t){this.fire(I6,t,!0)}touchend(t){this.fire(R6,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===yz&&i&&i.href?this.handleHref(n,i,i.href):(t===gz||t===MA)&&this.handleTooltip(n,i,t!==MA),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(hue(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=OM(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Vc[t.marktype].pick.call(this,o,t,n,r,i,s)}}const dwt=e=>e===k6||e===I6||e===R6?[k6,I6,R6]:[e];function hue(e,t){dwt(t).forEach(n=>hwt(e,n))}function hwt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function iA(e,t,n){t.forEach(r=>e.fire(r,n))}function pue(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?iA(this,e,r):((!i||!i.exit)&&iA(this,n,r),this._active=s,iA(this,t,r),iA(this,e,r))}}function mue(e){return function(t){iA(this,e,t),this._active=null}}function pwt(){return typeof window<"u"&&window.devicePixelRatio||1}function mwt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?pwt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class P6 extends hR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new eo,this._tempb=new eo}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Ay(1,1,this._options.type),t&&this._canvas&&(vf(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)mwt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||st("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=gwt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):ywt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Vc[n.marktype];n.clip&&pxt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const gwt=(e,t,n)=>new eo().set(0,0,t,n).translate(-e[0],-e[1]);function ywt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class MSe extends fX{constructor(t,n){super(t,n);const r=this;r._hrefHandler=iB(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=iB(r,(i,s)=>{r.handleTooltip(i,s,i.type!==MA)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(yz,this._hrefHandler),i.removeEventListener(gz,this._tooltipHandler),i.removeEventListener(MA,this._tooltipHandler)),this._svg=i=t&&cX(t,"svg"),i&&(i.addEventListener(yz,this._hrefHandler),i.addEventListener(gz,this._tooltipHandler),i.addEventListener(MA,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:iB(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const iB=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},FSe="aria-hidden",dX="aria-label",hX="role",pX="aria-roledescription",BSe="graphics-object",mX="graphics-symbol",jSe=(e,t,n)=>({[hX]:e,[pX]:t,[dX]:n||void 0}),vwt=Yd(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),gue={axis:{desc:"axis",caption:wwt},legend:{desc:"legend",caption:_wt},"title-text":{desc:"title",caption:e=>`Title text '${vue(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${vue(e)}'`}},yue={ariaRole:hX,ariaRoleDescription:pX,description:dX};function USe(e,t){const n=t.aria===!1;if(e(FSe,n||void 0),n||t.description==null)for(const r in yue)e(yue[r],void 0);else{const r=t.mark.marktype;e(dX,t.description),e(hX,t.ariaRole||(r==="group"?BSe:mX)),e(pX,t.ariaRoleDescription||`${r} mark`)}}function zSe(e){return e.aria===!1?{[FSe]:!0}:vwt[e.role]?null:gue[e.role]?xwt(e,gue[e.role]):bwt(e)}function bwt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return jSe(n?BSe:mX,`${t} mark container`,e.description)}function xwt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return jSe(t.role||mX,t.desc,n.description||r(n))}catch{return null}}function vue(e){return Vt(e.text).join(" ")}function wwt(e){const t=e.datum,n=e.orient,r=t.title?VSe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${nT(a)?"discrete":a} scale with ${nSe(o,s,e)}`}function _wt(e){const t=e.datum,n=t.title?VSe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return Twt(r)+(n?` titled '${n}'`:"")+` for ${Ewt(s)} with ${nSe(u,a,e)}`}function VSe(e){try{return Vt(Sr(e.items).items[0].text).join(" ")}catch{return null}}function Ewt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Sr(e)}function Twt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const HSe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Swt=e=>HSe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function gX(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${Swt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=HSe(u),a),toString:()=>e};return a}const qSe=e=>WSe(gX(),e)+"";function WSe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):WSe(e,r)}return e.close()}const D6={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},N6={blend:"mix-blend-mode"},GSe={fill:"none","stroke-miterlimit":10},uC=0,bue="http://www.w3.org/2000/xmlns/",co=Uk.xmlns;class yX extends hR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=fo(t,0,"svg",co),this._svg.setAttributeNS(bue,"xmlns",co),this._svg.setAttributeNS(bue,"xmlns:xlink",Uk["xmlns:xlink"]),this._svg.setAttribute("version",Uk.version),this._svg.setAttribute("class","marks"),vf(t,1),this._root=fo(this._svg,uC,"g",co),fy(this._root,GSe),vf(this._svg,uC+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(fy(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=fo(t,uC,"rect",co),fy(r,{width:this._width,height:this._height,fill:n}));const i=qSe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),vf(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Vc[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,xue(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,xue(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Vc[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=wue(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return vf(c,0),n._svg;c.setAttribute("class",RSe(n));const f=zSe(n);for(const g in f)Iu(c,g,f[g]);l||Iu(c,"pointer-events",u),Iu(c,"clip-path",n.clip?YK(this,n,n.group):null);let d=null,h=0;const p=g=>{const y=this.isDirty(g),x=wue(g,c,d,a.tag,s);y&&(this._update(a,x,g),l&&kwt(this,x,g,i)),d=x,++h};return a.nested?n.items.length&&p(n.items[0]):Xd(n,p),vf(c,h),c}_update(t,n,r){o0=n,Ya=n.__values__,USe(FA,r),t.attr(FA,r,this);const i=Rwt[t.type];i&&i.call(this,t,n,r),o0&&this.style(o0,r)}style(t,n){if(n!=null){for(const r in D6){let i=r==="font"?dR(n):n[r];if(i===Ya[r])continue;const s=D6[r];i==null?t.removeAttribute(s):(qK(i)&&(i=iSe(i,this._defs.gradient,YSe())),t.setAttribute(s,i+"")),Ya[r]=i}for(const r in N6)gO(t,N6[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=fo(t,uC+1,"defs",co)),i=Cwt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=fo(t,uC+1,"defs",co)),i=Awt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):vf(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function xue(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Cwt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=fo(e,n++,"pattern",co);fy(o,{id:w6+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=fo(o,0,"rect",co),fy(o,{width:1,height:1,fill:`url(${YSe()}#${t.id})`}),e=fo(e,n++,"radialGradient",co),fy(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=fo(e,n++,"linearGradient",co),fy(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=fo(e,r,"stop",co),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return vf(e,r),n}function Awt(e,t,n){let r;return e=fo(e,n,"clipPath",co),e.setAttribute("id",t.id),t.path?(r=fo(e,0,"path",co),r.setAttribute("d",t.path)):(r=fo(e,0,"rect",co),fy(r,{x:0,y:0,width:t.width,height:t.height})),vf(e,1),n+1}function kwt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Xd(n,o=>{i=e.mark(t,o,i,r),++s}),vf(t,1+s)}function wue(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=cy(o,r,co),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=cy(o,"path",co);s.appendChild(a),a.__data__=e;const u=cy(o,"g",co);s.appendChild(u),u.__data__=e;const l=cy(o,"path",co);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||Iwt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function Iwt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let o0=null,Ya=null;const Rwt={group(e,t,n){const r=o0=t.childNodes[2];Ya=r.__values__,e.foreground(FA,n,this),Ya=t.__values__,o0=t.childNodes[1],e.content(FA,n,this);const i=o0=t.childNodes[0];e.background(FA,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Ya.events&&(Iu(r,"pointer-events",s),Iu(i,"pointer-events",s),Ya.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Iu(r,"display",null),this.style(i,n),Iu(i,"stroke",null),o&&(n.fill=null),Ya=r.__values__,this.style(r,n),o&&(n.fill=o),o0=null}else Iu(r,"display","none")},image(e,t,n){n.smooth===!1?(gO(t,"image-rendering","optimizeSpeed"),gO(t,"image-rendering","pixelated")):gO(t,"image-rendering",null)},text(e,t,n){const r=fR(n);let i,s,o,a;at(r)?(s=r.map(u=>Qy(n,u)),i=s.join(`
`),i!==Ya.text&&(vf(t,0),o=t.ownerDocument,a=Xy(n),s.forEach((u,l)=>{const c=cy(o,"tspan",co);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Ya.text=i)):(s=Qy(n,r),s!==Ya.text&&(t.textContent=s,Ya.text=s)),Iu(t,"font-family",dR(n)),Iu(t,"font-size",Kp(n)+"px"),Iu(t,"font-style",n.fontStyle),Iu(t,"font-variant",n.fontVariant),Iu(t,"font-weight",n.fontWeight)}};function FA(e,t,n){t!==Ya[e]&&(n?Pwt(o0,e,t,n):Iu(o0,e,t),Ya[e]=t)}function gO(e,t,n){n!==Ya[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Ya[t]=n)}function fy(e,t){for(const n in t)Iu(e,n,t[n])}function Iu(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Pwt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function YSe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class KSe extends hR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=gX();n.open("svg",Wn({},Uk,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",GSe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Vc[n.marktype],i=r.tag,s=[USe,r.attr];t.open("g",{class:RSe(n),"clip-path":n.clip?YK(this,n,n.group):null},zSe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=fR(a);if(at(l)){const c={x:0,dy:Xy(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Qy(a,l[f])).close()}else t.text(Qy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Xd(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Xd(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&Dwt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:w6+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function Dwt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=dR(t),e["font-size"]=Kp(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in D6){let a=t[o];const u=D6[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(qK(a)&&(a=iSe(a,i.gradient,"")),e[u]=a)}for(const o in N6){const a=t[o];a!=null&&(s=s||[],s.push(`${N6[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const wd={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Nwt(e){wd.svgMarkTypes=e.svgMarkTypes??["text"],wd.svgOnTop=e.svgOnTop??!0,wd.debug=e.debug??!1}class vz extends hR{constructor(t){super(t),this._svgRenderer=new yX(t),this._canvasRenderer=new P6(t)}initialize(t,n,r,i,s){this._root_el=fo(t,0,"div");const o=fo(this._root_el,0,"div"),a=fo(this._root_el,1,"div");return this._root_el.style.position="relative",wd.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=wd.svgOnTop?a:o,this._canvasEl=wd.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return wd.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!wd.svgMarkTypes.includes(s));this._svgRenderer.render(t,wd.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return wd.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class XSe extends pR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=fo(fo(t,0,"div"),wd.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const QSe="canvas",JSe="hybrid",ZSe="png",e2e="svg",t2e="none",dy={Canvas:QSe,PNG:ZSe,SVG:e2e,Hybrid:JSe,None:t2e},Vb={};Vb[QSe]=Vb[ZSe]={renderer:P6,headless:P6,handler:pR};Vb[e2e]={renderer:yX,headless:KSe,handler:MSe};Vb[JSe]={renderer:vz,headless:vz,handler:XSe};Vb[t2e]={};function $M(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Vb[e]=t,this):Vb[e]}function n2e(e,t,n){const r=[],i=new eo().union(t),s=e.marktype;return s?r2e(e,i,n,r):s==="group"?i2e(e,i,n,r):st("Intersect scene must be mark node or group item.")}function r2e(e,t,n,r){if(Owt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)i2e(i[a],t,n,r);else for(const u=Vc[s].isect;a<o;++a){const l=i[a];s2e(l,t,u)&&r.push(l)}}return r}function Owt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function i2e(e,t,n,r){n&&n(e.mark)&&s2e(e,t,Vc.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)r2e(i[u],t,n,r);t.translate(o,a)}return r}function s2e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const sB=new eo;function o2e(e){const t=e.clip;if(Gn(t))t(lR(sB.clear()));else if(t)sB.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(sB)}const $wt=1e-9;function vX(e,t,n){return e===t?!0:n==="path"?a2e(e,t):e instanceof Date&&t instanceof Date?+e==+t:Vr(e)&&Vr(t)?Math.abs(e-t)<=$wt:!e||!t||!Ut(e)&&!Ut(t)?e==t:Lwt(e,t)}function a2e(e,t){return vX(rT(e),rT(t))}function Lwt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!vX(e[i],t[i],i))return!1;return typeof e==typeof t}function Mwt(){fSe(),abt()}const oT="top",Id="left",Nd="right",Jy="bottom",Fwt="top-left",Bwt="top-right",jwt="bottom-left",Uwt="bottom-right",bX="start",bz="middle",Pu="end",zwt="x",Vwt="y",LM="group",xX="axis",wX="title",Hwt="frame",qwt="scope",_X="legend",u2e="row-header",l2e="row-footer",c2e="row-title",f2e="column-header",d2e="column-footer",h2e="column-title",Wwt="padding",Gwt="symbol",p2e="fit",m2e="fit-x",g2e="fit-y",Ywt="pad",EX="none",FD="all",xz="each",TX="flush",hy="column",py="row";function y2e(e){Je.call(this,null,e)}Mt(y2e,Je,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Vc[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=BD(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===LM||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(BD(l,o))),r.role){case xX:case _X:case wX:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(BD(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(BD(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return o2e(r),t.modifies("bounds")}});function BD(e,t,n){return t(e.bounds.clear(),e,n)}const _ue=":vega_identifier:";function SX(e){Je.call(this,0,e)}SX.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Mt(SX,Je,{transform(e,t){const n=Kwt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Kwt(e){return e._signals[_ue]||(e._signals[_ue]=e.add(0))}function v2e(e){Je.call(this,null,e)}Mt(v2e,Je,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Xwt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===LM?AM:CM;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Xwt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function b2e(e){Je.call(this,null,e)}const Eue={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!x2e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},x2e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Tue=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(x2e(i,s=e[n].bounds,t))return!0},Qwt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Jwt=(e,t,n)=>{var r=e.range(),i=new eo;return t===oT||t===Jy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Sue=e=>(e.forEach(t=>t.opacity=1),e),Cue=(e,t)=>e.reflow(t.modified()).modifies("opacity");Mt(b2e,Je,{transform(e,t){const n=Eue[e.method]||Eue.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Sue(i),t=Cue(t,e)),t;if(i=i.filter(Qwt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Sue(i),t=Cue(t,e),s.length>=3&&Tue(s,r)){do s=n(s,r);while(s.length>=3&&Tue(s,r));s.length<3&&!Sr(i).opacity&&(s.length>1&&(Sr(s).opacity=0),Sr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Jwt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function w2e(e){Je.call(this,null,e)}Mt(w2e,Je,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Wa=new eo;function X_(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Zwt(e){var t=e.items[0].orient;return t===Id||t===Nd}function e_t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function t_t(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=e_t(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],g=i.titlePadding,y=i.bounds,x=p&&aX(p),b=0,_=0,E,T;switch(Wa.clear().union(y),y.clear(),(E=u[0])>-1&&y.union(i.items[E].bounds),(E=u[1])>-1&&y.union(i.items[E].bounds),a){case oT:b=f||0,_=-c,T=Math.max(d,Math.min(h,-y.y1)),y.add(0,-T).add(l,0),p&&jD(e,p,T,g,x,0,-1,y);break;case Id:b=-c,_=f||0,T=Math.max(d,Math.min(h,-y.x1)),y.add(-T,0).add(0,l),p&&jD(e,p,T,g,x,1,-1,y);break;case Nd:b=n+c,_=f||0,T=Math.max(d,Math.min(h,y.x2)),y.add(0,0).add(T,l),p&&jD(e,p,T,g,x,1,1,y);break;case Jy:b=f||0,_=r+c,T=Math.max(d,Math.min(h,y.y2)),y.add(0,0).add(l,T),p&&jD(e,p,T,g,0,0,1,y);break;default:b=i.x,_=i.y}return Y0(y.translate(b,_),i),X_(i,"x",b+o)|X_(i,"y",_+o)&&(i.bounds=Wa,e.dirty(i),i.bounds=y,e.dirty(i)),i.mark.bounds.clear().union(y)}function jD(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Aue=(e,t)=>Math.floor(Math.min(e,t)),kue=(e,t)=>Math.ceil(Math.max(e,t));function n_t(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===LM)switch(i.role){case xX:case _X:case wX:break;case u2e:o.rowheaders.push(...s);break;case l2e:o.rowfooters.push(...s);break;case f2e:o.colheaders.push(...s);break;case d2e:o.colfooters.push(...s);break;case c2e:o.rowtitle=s[0];break;case h2e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function r_t(e){return new eo().set(0,0,e.width||0,e.height||0)}function i_t(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Wi(e,t,n){const r=Ut(e)?e[t]:e;return r??(n!==void 0?n:0)}function Iue(e){return e<0?Math.ceil(-e):0}function _2e(e,t,n){var r=!n.nodirty,i=n.bounds===TX?r_t:i_t,s=Wa.set(0,0,0,0),o=Wi(n.align,hy),a=Wi(n.align,py),u=Wi(n.padding,hy),l=Wi(n.padding,py),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,y=Array(d),x=Array(f),b=0,_=Array(d),E=Array(d),T=Array(d),k,I,R,D,L,M,z,F,H,Q,J;for(I=0;I<c;++I)p[I]=0;for(I=0;I<f;++I)x[I]=0;for(I=0;I<d;++I)M=t[I],L=T[I]=i(M),M.x=M.x||0,_[I]=0,M.y=M.y||0,E[I]=0,R=I%c,D=~~(I/c),g=Math.max(g,z=Math.ceil(L.x2)),b=Math.max(b,F=Math.ceil(L.y2)),p[R]=Math.max(p[R],z),x[D]=Math.max(x[D],F),h[I]=u+Iue(L.x1),y[I]=l+Iue(L.y1),r&&e.dirty(t[I]);for(I=0;I<d;++I)I%c===0&&(h[I]=0),I<c&&(y[I]=0);if(o===xz)for(R=1;R<c;++R){for(J=0,I=R;I<d;I+=c)J<h[I]&&(J=h[I]);for(I=R;I<d;I+=c)h[I]=J+p[R-1]}else if(o===FD){for(J=0,I=0;I<d;++I)I%c&&J<h[I]&&(J=h[I]);for(I=0;I<d;++I)I%c&&(h[I]=J+g)}else for(o=!1,R=1;R<c;++R)for(I=R;I<d;I+=c)h[I]+=p[R-1];if(a===xz)for(D=1;D<f;++D){for(J=0,I=D*c,k=I+c;I<k;++I)J<y[I]&&(J=y[I]);for(I=D*c;I<k;++I)y[I]=J+x[D-1]}else if(a===FD){for(J=0,I=c;I<d;++I)J<y[I]&&(J=y[I]);for(I=c;I<d;++I)y[I]=J+b}else for(a=!1,D=1;D<f;++D)for(I=D*c,k=I+c;I<k;++I)y[I]+=x[D-1];for(H=0,I=0;I<d;++I)H=h[I]+(I%c?H:0),_[I]+=H-t[I].x;for(R=0;R<c;++R)for(Q=0,I=R;I<d;I+=c)Q+=y[I],E[I]+=Q-t[I].y;if(o&&Wi(n.center,hy)&&f>1)for(I=0;I<d;++I)L=o===FD?g:p[I%c],H=L-T[I].x2-t[I].x-_[I],H>0&&(_[I]+=H/2);if(a&&Wi(n.center,py)&&c!==1)for(I=0;I<d;++I)L=a===FD?b:x[~~(I/c)],Q=L-T[I].y2-t[I].y-E[I],Q>0&&(E[I]+=Q/2);for(I=0;I<d;++I)s.union(T[I].translate(_[I],E[I]));switch(H=Wi(n.anchor,zwt),Q=Wi(n.anchor,Vwt),Wi(n.anchor,hy)){case Pu:H-=s.width();break;case bz:H-=s.width()/2}switch(Wi(n.anchor,py)){case Pu:Q-=s.height();break;case bz:Q-=s.height()/2}for(H=Math.round(H),Q=Math.round(Q),s.clear(),I=0;I<d;++I)t[I].mark.bounds.clear();for(I=0;I<d;++I)M=t[I],M.x+=_[I]+=H,M.y+=E[I]+=Q,s.union(M.mark.bounds.union(M.bounds.translate(_[I],E[I]))),r&&e.dirty(M);return s}function s_t(e,t,n){var r=n_t(t),i=r.marks,s=n.bounds===TX?o_t:a_t,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,g,y;const x=_2e(e,i,n);x.empty()&&x.set(0,0,0,0),r.rowheaders&&(g=Wi(n.headerBand,py,null),c=UD(e,r.rowheaders,i,a,u,-Wi(o,"rowHeader"),Aue,0,s,"x1",0,a,1,g)),r.colheaders&&(g=Wi(n.headerBand,hy,null),f=UD(e,r.colheaders,i,a,a,-Wi(o,"columnHeader"),Aue,1,s,"y1",0,1,a,g)),r.rowfooters&&(g=Wi(n.footerBand,py,null),d=UD(e,r.rowfooters,i,a,u,Wi(o,"rowFooter"),kue,0,s,"x2",a-1,a,1,g)),r.colfooters&&(g=Wi(n.footerBand,hy,null),h=UD(e,r.colfooters,i,a,a,Wi(o,"columnFooter"),kue,1,s,"y2",l-a,1,a,g)),r.rowtitle&&(p=Wi(n.titleAnchor,py),y=Wi(o,"rowTitle"),y=p===Pu?d+y:c-y,g=Wi(n.titleBand,py,.5),Rue(e,r.rowtitle,y,0,x,g)),r.coltitle&&(p=Wi(n.titleAnchor,hy),y=Wi(o,"columnTitle"),y=p===Pu?h+y:f-y,g=Wi(n.titleBand,hy,.5),Rue(e,r.coltitle,y,1,x,g))}function o_t(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function a_t(e,t){return e.bounds[t]}function UD(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,g=0,y=0,x,b,_,E,T,k,I,R,D;if(!p)return g;for(x=c;x<p;x+=f)n[x]&&(g=o(g,u(n[x],l)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=s,b=0,E=t.length;b<E;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(x=c,b=0,E=t.length;b<E;++b,x+=f){for(k=t[b],T=k.mark.bounds,_=x;_>=0&&(I=n[_])==null;_-=d);a?(R=h==null?I.x:Math.round(I.bounds.x1+h*I.bounds.width()),D=g):(R=g,D=h==null?I.y:Math.round(I.bounds.y1+h*I.bounds.height())),T.union(k.bounds.translate(R-(k.x||0),D-(k.y||0))),k.x=R,k.y=D,e.dirty(k),y=o(y,T[l])}return y}function Rue(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function u_t(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function l_t(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function c_t(e,t,n,r,i,s,o){const a=u_t(n,t),u=l_t(e,a("offset",0)),l=a("anchor",bX),c=l===Pu?1:l===bz?.5:0,f={align:xz,bounds:a("bounds",TX),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Id:f.anchor={x:Math.floor(r.x1)-u,column:Pu,y:c*(o||r.height()+2*r.y1),row:l};break;case Nd:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case oT:f.anchor={y:Math.floor(i.y1)-u,row:Pu,x:c*(s||i.width()+2*i.x1),column:l};break;case Jy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case Fwt:f.anchor={x:u,y:u};break;case Bwt:f.anchor={x:s-u,y:u,column:Pu};break;case jwt:f.anchor={x:u,y:o-u,row:Pu};break;case Uwt:f.anchor={x:s-u,y:o-u,column:Pu,row:Pu};break}return f}function f_t(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),h_t(e,n,n.items[0].items[0]),s=d_t(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===Gwt&&p_t(n.items[0].items[0].items[0].items),i!==EX&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Y0(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function d_t(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function h_t(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&lC(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Id:i+=Math.ceil(o.bounds.width())+u;break;case Nd:case Jy:break;default:s+=o.bounds.height()+u}switch((i||s)&&lC(e,n,i,s),o.orient){case Id:c+=v_(t,n,o,a,1,1);break;case Nd:l+=v_(t,n,o,Pu,0,0)+u,c+=v_(t,n,o,a,1,1);break;case Jy:l+=v_(t,n,o,a,0,0),c+=v_(t,n,o,Pu,-1,0,1)+u;break;default:l+=v_(t,n,o,a,0,0)}(l||c)&&lC(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(lC(e,n,-l,0),lC(e,o,-l,0))}}function v_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:aX(n);return Math.round(r===bX?f:r===Pu?d-h:.5*(c-h))}function lC(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function p_t(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function m_t(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Id||a===Nd?r:n,p=0,g=0,y=0,x=0,b=0,_;if(o!==LM?a===Id?(p=i.y2,h=i.y1):a===Nd?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Id&&(p=r,h=0),_=u===bX?p:u===Pu?h:(p+h)/2,d&&d.text){switch(a){case oT:case Jy:b=f.bounds.height()+c;break;case Id:x=f.bounds.width()+c;break;case Nd:x=-f.bounds.width()-c;break}Wa.clear().union(d.bounds),Wa.translate(x-(d.x||0),b-(d.y||0)),X_(d,"x",x)|X_(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(Wa),d.mark.bounds.clear().union(Wa),e.dirty(d)),Wa.clear().union(d.bounds)}else Wa.clear();switch(Wa.union(f.bounds),a){case oT:g=_,y=i.y1-Wa.height()-l;break;case Id:g=i.x1-Wa.width()-l,y=_;break;case Nd:g=i.x2+Wa.width()+l,y=_;break;case Jy:g=_,y=i.y2+l;break;default:g=s.x,y=s.y}return X_(s,"x",g)|X_(s,"y",y)&&(Wa.translate(g,y),e.dirty(s),s.bounds.clear().union(Wa),t.bounds.clear().union(Wa),e.dirty(s)),s.bounds}function E2e(e){Je.call(this,null,e)}Mt(E2e,Je,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&s_t(n,r,e.layout),y_t(n,r,e)}),g_t(e.mark.group)?t.reflow():t}});function g_t(e){return e&&e.mark.role!=="legend-entry"}function y_t(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new eo().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case xX:h=Zwt(f)?a:u,h.union(t_t(e,f,i,s));break;case wX:c=f;break;case _X:l.push(f_t(e,f));break;case Hwt:case qwt:case u2e:case l2e:case c2e:case f2e:case d2e:case h2e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const y={};l.forEach(x=>{d=x.orient||Nd,d!==EX&&(y[d]||(y[d]=[])).push(x)});for(const x in y){const b=y[x];_2e(e,b,c_t(b,x,n.legends,a,u,i,s))}l.forEach(x=>{const b=x.bounds;if(b.equals(x._bounds)||(x.bounds=x._bounds,e.dirty(x),x.bounds=b,e.dirty(x)),n.autosize&&(n.autosize.type===p2e||n.autosize.type===m2e||n.autosize.type===g2e))switch(x.orient){case Id:case Nd:o.add(b.x1,0).add(b.x2,0);break;case oT:case Jy:o.add(0,b.y1).add(0,b.y2)}else o.union(b)})}o.union(a).union(u),c&&o.union(m_t(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),v_t(e,t,o,n)}function v_t(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Wwt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===EX?(l=0,f=0,u=o,c=a):s===p2e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===m2e?(u=Math.max(0,o-l-d),a=c+f+h):s===g2e?(o=u+l+d,c=Math.max(0,a-f-h)):s===Ywt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const b_t=Object.freeze(Object.defineProperty({__proto__:null,bound:y2e,identifier:SX,mark:v2e,overlap:b2e,render:w2e,viewlayout:E2e},Symbol.toStringTag,{value:"Module"}));function T2e(e){Je.call(this,null,e)}Mt(T2e,Je,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=VK(s,o,e.minstep),u=e.format||QTe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?XTe(s,e.values,a):HK(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Kr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Kr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function S2e(e){Je.call(this,null,e)}function x_t(){return Kr({})}function w_t(e){const t=pS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Mt(S2e,Je,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||x_t,s=e.key||mn,o=this.value;return at(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&st("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=w_t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function C2e(e){Je.call(this,null,e)}Mt(C2e,Je,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(at(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Hg,u=i.enter||Hg,l=i.exit||Hg,c=(s&&!o?i[s]:a)||Hg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Hg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Hg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Hg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function A2e(e){Je.call(this,[],e)}Mt(A2e,Je,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||uO,o=e.scale,a=+e.limit,u=VK(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===uO,c=e.format||tSe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||eSe(o,u),d,h,p,g,y;return i&&(r.rem=i),s===uO?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),y=!0):i=f,Gn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),g=i.reduce((x,b)=>Math.max(x,p(b,e)),0)):p=cu(g=p||8),i=i.map((x,b)=>Kr({index:b,label:c(x,b,i),value:x,offset:g,size:p(x,e)})),y&&(y=f[i.length],i.push(Kr({index:i.length,label:`…${f.length-i.length} entries`,value:y,offset:g,size:p(y,e)})))):s===Yvt?(d=o.domain(),h=GTe(o,d[0],Sr(d)),f.length<3&&!e.values&&d[0]!==Sr(d)&&(f=[d[0],Sr(d)]),i=f.map((x,b)=>Kr({index:b,label:c(x,b,f),value:x,perc:h(x)}))):(p=f.length-1,h=sbt(o),i=f.map((x,b)=>Kr({index:b,label:c(x,b,f),value:x,perc:b?h(x):0,perc2:b===p?1:h(f[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const __t=e=>e.source.x,E_t=e=>e.source.y,T_t=e=>e.target.x,S_t=e=>e.target.y;function CX(e){Je.call(this,{},e)}CX.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Mt(CX,Je,{transform(e,t){var n=e.sourceX||__t,r=e.sourceY||E_t,i=e.targetX||T_t,s=e.targetY||S_t,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Pue.get(u+"-"+a)||Pue.get(u);return l||st("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const k2e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,C_t=(e,t,n,r)=>k2e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),I2e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},A_t=(e,t,n,r)=>I2e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),R2e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},k_t=(e,t,n,r)=>R2e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),I_t=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,R_t=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,P_t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},D_t=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},N_t=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},O_t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Pue=pS({line:k2e,"line-radial":C_t,arc:I2e,"arc-radial":A_t,curve:R2e,"curve-radial":k_t,"orthogonal-horizontal":I_t,"orthogonal-vertical":R_t,"orthogonal-radial":P_t,"diagonal-horizontal":D_t,"diagonal-vertical":N_t,"diagonal-radial":O_t});function AX(e){Je.call(this,null,e)}AX.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Mt(AX,Je,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||fS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/Sbe(l),h=Tc(c),p,g,y;for(e.sort&&h.sort((x,b)=>l[x]-l[b]),p=0;p<c;++p)y=l[h[p]],g=u[h[p]],g[r]=f,g[i]=f+=y*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const $_t=5;function L_t(e){const t=e.type;return!e.bins&&(t===eT||t===nR||t===rR)}function P2e(e){return jK(e)&&e!==vp}const M_t=Yd(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function D2e(e){Je.call(this,null,e),this.modified(!0)}Mt(D2e,Je,{transform(e,t){var n=t.dataflow,r=this.value,i=F_t(e);(!r||i!==r.type)&&(this.value=r=Hr(i)());for(i in e)if(!M_t[i]){if(i==="padding"&&P2e(r.type))continue;Gn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return H_t(r,e,V_t(r,e,j_t(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function F_t(e){var t=e.type,n="",r;return t===vp?vp+"-"+eT:(B_t(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?vp+"-":r===3?vS+"-":""),(n+t||eT).toLowerCase())}function B_t(e){const t=e.type;return jK(t)&&t!==Ub&&t!==zb&&(e.scheme||e.range&&e.range.length&&e.range.every(Ht))}function j_t(e,t,n){const r=U_t(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&L_t(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return P2e(s)&&t.padding&&i[0]!==Sr(i)&&(i=z_t(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(N2e(s,i,n)),s===LK&&e.unknown(t.domainImplicit?EU:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&VK(e,t.nice)||null),i.length}function U_t(e,t,n){return t?(e.domain(N2e(e.type,t,n)),t.length):-1}function z_t(e,t,n,r,i,s){var o=Math.abs(Sr(n)-n[0]),a=o/(o-2*r),u=e===F0?IY(t,null,a):e===rR?y6(t,null,a,.5):e===nR?y6(t,null,a,i||1):e===wM?RY(t,null,a,s||1):kY(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function N2e(e,t,n){if(zTe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Ot(t))}return t}function V_t(e,t,n){let r=t.bins;if(r&&!at(r)){const i=e.domain(),s=i[0],o=Sr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||st("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Tc(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===MK&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function H_t(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=q_t(r,t,n);else if(t.scheme&&(s=W_t(r,t,n),Gn(s))){if(e.interpolator)return e.interpolator(s);st(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&VTe(r))return e.interpolator(TM(wz(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(UK(t.interpolate,t.interpolateGamma)):Gn(e.round)?e.round(i):Gn(e.rangeRound)&&e.interpolate(i?UI:w1),s&&e.range(wz(s,t.reverse))}function q_t(e,t,n){e!==LTe&&e!==oz&&st("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===oz?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*$K(n,i,r)]}function W_t(e,t,n){var r=t.schemeExtent,i,s;return at(t.scheme)?s=TM(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=zK(i),s||st(`Unrecognized scheme name: ${t.scheme}`)),n=e===EM?n+1:e===MK?n-1:e===tT||e===_M?+t.schemeCount||$_t:n,VTe(e)?Due(s,r,t.reverse):Gn(s)?WTe(Due(s,r),n):e===LK?s:s.slice(0,n)}function Due(e,t,n){return Gn(e)&&(t||n)?qTe(e,wz(t||[0,1],n)):e}function wz(e,t){return t?e.slice().reverse():e}function O2e(e){Je.call(this,null,e)}Mt(O2e,Je,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ix(e.sort)),this.modified(n),t}});const Nue="zero",$2e="center",L2e="normalize",M2e=["y0","y1"];function kX(e){Je.call(this,null,e)}kX.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Nue,values:[Nue,$2e,L2e]},{name:"as",type:"string",array:!0,length:2,default:M2e}]};Mt(kX,Je,{transform(e,t){var n=e.as||M2e,r=n[0],i=n[1],s=Ix(e.sort),o=e.field||fS,a=e.offset===$2e?G_t:e.offset===L2e?Y_t:K_t,u,l,c,f;for(u=X_t(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function G_t(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function Y_t(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function K_t(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function X_t(e,t,n,r){var i=[],s=g=>g(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const Q_t=Object.freeze(Object.defineProperty({__proto__:null,axisticks:T2e,datajoin:S2e,encode:C2e,legendentries:A2e,linkpath:CX,pie:AX,scale:D2e,sortitems:O2e,stack:kX},Symbol.toStringTag,{value:"Module"}));var J_t=Math.abs,_z=Math.cos,O6=Math.sin,Z_t=1e-6,F2e=Math.PI,Ez=F2e/2,Oue=eEt(2);function $ue(e){return e>1?Ez:e<-1?-Ez:Math.asin(e)}function eEt(e){return e>0?Math.sqrt(e):0}function tEt(e,t){var n=e*O6(t),r=30,i;do t-=i=(t+O6(t)-n)/(1+_z(t));while(J_t(i)>Z_t&&--r>0);return t/2}function nEt(e,t,n){function r(i,s){return[e*i*_z(s=tEt(n,s)),t*O6(s)]}return r.invert=function(i,s){return s=$ue(s/t),[i/(e*_z(s)),$ue((2*s+O6(2*s))/n)]},r}var rEt=nEt(Oue/Ez,Oue,F2e);function iEt(){return qp(rEt).scale(169.529)}const sEt=Zxe(),Tz=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function oEt(e,t){return function n(){const r=t();return r.type=e,r.path=Zxe().projection(r),r.copy=r.copy||function(){const i=n();return Tz.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},jTe(r)}}function IX(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?($6[e]=oEt(e,t),this):$6[e]||null}function B2e(e){return e&&e.path||sEt}const $6={albers:twe,albersusa:Vft,azimuthalequalarea:Hft,azimuthalequidistant:qft,conicconformal:Yft,conicequalarea:G4,conicequidistant:Qft,equalEarth:Zft,equirectangular:Kft,gnomonic:edt,identity:tdt,mercator:Wft,mollweide:iEt,naturalEarth1:ndt,orthographic:rdt,stereographic:idt,transversemercator:sdt};for(const e in $6)IX(e,$6[e]);function aEt(){}const Lm=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function j2e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),uEt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(lEt((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=[],d=[],h,p,g,y,x,b;for(h=p=-1,y=u[0]>=l,Lm[y<<1].forEach(_);++h<e-1;)g=y,y=u[h+1]>=l,Lm[g|y<<1].forEach(_);for(Lm[y<<0].forEach(_);++p<t-1;){for(h=-1,y=u[p*e+e]>=l,x=u[p*e]>=l,Lm[y<<1|x<<2].forEach(_);++h<e-1;)g=y,y=u[p*e+e+h+1]>=l,b=x,x=u[p*e+h+1]>=l,Lm[g|y<<1|x<<2|b<<3].forEach(_);Lm[y|x<<3].forEach(_)}for(h=-1,x=u[p*e]>=l,Lm[x<<2].forEach(_);++h<e-1;)b=x,x=u[p*e+h+1]>=l,Lm[x<<2|b<<3].forEach(_);Lm[x<<3].forEach(_);function _(E){var T=[E[0][0]+h,E[0][1]+p],k=[E[1][0]+h,E[1][1]+p],I=o(T),R=o(k),D,L;(D=d[I])?(L=f[R])?(delete d[D.end],delete f[L.start],D===L?(D.ring.push(k),c(D.ring)):f[D.start]=d[L.end]={start:D.start,end:L.end,ring:D.ring.concat(L.ring)}):(delete d[D.end],D.ring.push(k),d[D.end=R]=D):(D=f[R])?(L=d[I])?(delete f[D.start],delete d[L.end],D===L?(D.ring.push(k),c(D.ring)):f[L.start]=d[D.end]={start:L.start,end:D.end,ring:L.ring.concat(D.ring)}):(delete f[D.start],D.ring.unshift(T),f[D.start=I]=D):f[I]=d[R]={start:I,end:R,ring:[T,k]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,y,x=l[g*e+p];d>0&&d<e&&p===d&&(y=l[g*e+p-1],f[0]=d+(c-y)/(x-y)-.5),h>0&&h<t&&g===h&&(y=l[(g-1)*e+p],f[1]=h+(c-y)/(x-y)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||st("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:aEt,r):n===a},r}function uEt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function lEt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=cEt(e,t[n]))return i;return 0}function cEt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(fEt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function fEt(e,t,n){var r;return dEt(e,t,n)&&hEt(e[r=+(e[0]===t[0])],n[r],t[r])}function dEt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function hEt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function U2e(e,t,n){return function(r){var i=Np(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?zy(s,o,e):a/(e+1);return Tc(s+u,o,u)}}function RX(e){Je.call(this,null,e)}RX.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Mt(RX,Je,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||lu,s=j2e().smooth(e.smooth!==!1),o=e.thresholds||pEt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,at(o)?o:o(c.values));mEt(f,c,l,e),f.forEach(d=>{u.push(dM(l,Kr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function pEt(e,t,n){const r=U2e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>mb(t(i).values)))}function mEt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Gn(i)&&(i=i(n,r)),Gn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Vr(i)?i:i[0])||1,a=(Vr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(z2e(t,o,a,u,l))}function z2e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Lue(e,t,n){const r=e>=0?e:KY(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function oB(e){return Gn(e)?e:cu(+e)}function V2e(){var e=u=>u[0],t=u=>u[1],n=fS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=Lue(r[0],u,e)>>o,f=Lue(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),g=2*h+(s>>o),y=new Float32Array(p*g),x=new Float32Array(p*g);let b=y;u.forEach(E=>{const T=d+(+e(E)>>o),k=h+(+t(E)>>o);T>=0&&T<p&&k>=0&&k<g&&(y[T+k*p]+=+n(E))}),c>0&&f>0?(b_(p,g,y,x,c),x_(p,g,x,y,f),b_(p,g,y,x,c),x_(p,g,x,y,f),b_(p,g,y,x,c),x_(p,g,x,y,f)):c>0?(b_(p,g,y,x,c),b_(p,g,x,y,c),b_(p,g,y,x,c),b=x):f>0&&(x_(p,g,y,x,f),x_(p,g,x,y,f),x_(p,g,y,x,f),b=x);const _=l?Math.pow(2,-2*o):1/Sbe(b);for(let E=0,T=p*g;E<T;++E)b[E]*=_;return{values:b,scale:1<<o,width:p,height:g,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=oB(u),a):e},a.y=function(u){return arguments.length?(t=oB(u),a):t},a.weight=function(u){return arguments.length?(n=oB(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||st("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||st("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Vt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&st("invalid bandwidth"),r=u,a):r},a}function b_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function x_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function PX(e){Je.call(this,null,e)}PX.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const gEt=["x","y","weight","size","cellSize","bandwidth"];function H2e(e,t){return gEt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Mt(PX,Je,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=yEt(r,e.groupby),s=(e.groupby||[]).map(xs),o=H2e(V2e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Kr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function yEt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function DX(e){Je.call(this,null,e)}DX.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Mt(DX,Je,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=j2e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||U2e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=H2e(V2e(),e)(i,!0),u=z2e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=at(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Kr),n}});const Sz="Feature",NX="FeatureCollection",vEt="MultiPoint";function OX(e){Je.call(this,null,e)}OX.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Mt(OX,Je,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&lu,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ru(a))||s&&t.modified(ru(s))||o&&t.modified(ru(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:Sz,geometry:{type:vEt,coordinates:r}})),this.value={type:NX,features:n}}});function $X(e){Je.call(this,null,e)}$X.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Mt($X,Je,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||lu,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=B2e(e.projection),n.materialize().reflow()):o=i===lu||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=bEt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function bEt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function LX(e){Je.call(this,null,e)}LX.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Mt(LX,Je,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function MX(e){Je.call(this,null,e)}MX.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Mt(MX,Je,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=xEt(B2e(e.projection),e.field||kf("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function xEt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function FX(e){Je.call(this,[],e),this.generator=_ft()}FX.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Mt(FX,Je,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Gn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(HEe(n[0],i)):t.add.push(Kr(i)),n[0]=i,t}});function BX(e){Je.call(this,null,e)}BX.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Mt(BX,Je,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||lu,s=_Et(e.opacity,e),o=wEt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?mb(n.map(l=>mb(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Wn({},l,u);r||(f.$max=mb(c.values||[])),l[a]=EEt(c,f,o.dep?o:cu(o(f)),s.dep?s:cu(s(f)))}),t.reflow(!0).modifies(a)}});function wEt(e,t){let n;return Gn(e)?(n=r=>Vy(e(r,t)),n.dep=q2e(e)):n=cu(Vy(e||"#888")),n}function _Et(e,t){let n;return Gn(e)?(n=r=>e(r,t),n.dep=q2e(e)):e?n=cu(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function q2e(e){if(!Gn(e))return!1;const t=Yd(ru(e));return t.$x||t.$y||t.$value||t.$max}function EEt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?y=>c[y]:oy,d=Ay(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),g=p.data;for(let y=a,x=0;y<l;++y){t.$y=y-a;for(let b=o,_=y*i;b<u;++b,x+=4){t.$x=b-o,t.$value=f(b+_);const E=n(t);g[x+0]=E.r,g[x+1]=E.g,g[x+2]=E.b,g[x+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function W2e(e){Je.call(this,null,e),this.modified(!0)}Mt(W2e,Je,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=SEt(e.type),Tz.forEach(r=>{e[r]!=null&&Mue(n,r,e[r])})):Tz.forEach(r=>{e.modified(r)&&Mue(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&TEt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function TEt(e,t){const n=CEt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function SEt(e){const t=IX((e||"mercator").toLowerCase());return t||st("Unrecognized projection type: "+e),t()}function Mue(e,t,n){Gn(e[t])&&e[t](n)}function CEt(e){return e=Vt(e),e.length===1?e[0]:{type:NX,features:e.reduce((t,n)=>t.concat(AEt(n)),[])}}function AEt(e){return e.type===NX?e.features:Vt(e).filter(t=>t!=null).map(t=>t.type===Sz?t:{type:Sz,geometry:t})}const kEt=Object.freeze(Object.defineProperty({__proto__:null,contour:DX,geojson:OX,geopath:$X,geopoint:LX,geoshape:MX,graticule:FX,heatmap:BX,isocontour:RX,kde2d:PX,projection:W2e},Symbol.toStringTag,{value:"Module"})),Fue={center:dct,collide:Pct,nbody:zct,link:Nct,x:Vct,y:Hct},sA="forces",Cz=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],IEt=["static","iterations"],G2e=["x","y","vx","vy"];function jX(e){Je.call(this,null,e)}jX.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:G2e}]};Mt(jX,Je,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(Cz),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Y2e(n,e,0,t)):(this.value=n=PEt(t.source,e),n.on("tick",REt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(IEt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==sA||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(G2e)}});function REt(e,t){return()=>e.touch(t).run()}function PEt(e,t){const n=Uct(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),Y2e(n,t,!0).on("end",()=>s=!0)}function Y2e(e,t,n,r){var i=Vt(t.forces),s,o,a,u;for(s=0,o=Cz.length;s<o;++s)a=Cz[s],a!==sA&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=sA+s,a=n||t.modified(sA,s)?NEt(i[s]):r&&DEt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(sA+s,null);return e.numForces=i.length,e}function DEt(e,t){var n,r;for(n in e)if(Gn(r=e[n])&&t.modified(ru(r)))return 1;return 0}function NEt(e){var t,n;Kt(Fue,e.force)||st("Unrecognized force: "+e.force),t=Fue[e.force]();for(n in e)Gn(t[n])&&OEt(t[n],e[n],e);return t}function OEt(e,t,n){e(Gn(t)?r=>t(r,n):t)}const $Et=Object.freeze(Object.defineProperty({__proto__:null,force:jX},Symbol.toStringTag,{value:"Module"}));function Az(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function UX(e){Je.call(this,null,e)}UX.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const LEt=e=>e.values;Mt(UX,Je,{transform(e,t){t.source||st("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&fM(o.data)&&i.rem.push(o.data)}),this.value=s=UG({values:Vt(e.keys).reduce((o,a)=>(o.key(a),o),MEt()).entries(i.source)},LEt),n&&s.each(o=>{o.children&&(o=Kr(o.data),i.add.push(o),i.source.push(o))}),Az(s,mn,mn)),i.source.root=s,i}});function MEt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function K0(e){Je.call(this,null,e)}const FEt=(e,t)=>e.parent===t.parent?1:2;Mt(K0,Je,{transform(e,t){(!t.source||!t.source.root)&&st(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Ix(e.sort,o=>o.data)),BEt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?FEt:fS);try{this.value=n(i)}catch(o){st(o)}return i.each(o=>jEt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function BEt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function jEt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const kz=["x","y","r","depth","children"];function zX(e){K0.call(this,e)}zX.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:kz.length,default:kz}]};Mt(zX,K0,{layout:Hdt,params:["radius","size","padding"],fields:kz});const Iz=["x0","y0","x1","y1","depth","children"];function VX(e){K0.call(this,e)}VX.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Iz.length,default:Iz}]};Mt(VX,K0,{layout:qdt,params:["size","round","padding"],fields:Iz});function HX(e){Je.call(this,null,e)}HX.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Mt(HX,Je,{transform(e,t){t.source||st("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?Az(Soe().id(e.key).parentId(e.parentKey)(i.source),e.key,If):Az(Soe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Bue={tidy:tht,cluster:hdt},Rz=["x","y","depth","children"];function qX(e){K0.call(this,e)}qX.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Rz.length,default:Rz}]};Mt(qX,K0,{layout(e){const t=e||"tidy";if(Kt(Bue,t))return Bue[t]();st("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Rz});function WX(e){Je.call(this,[],e)}WX.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Mt(WX,Je,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||st("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[mn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[mn(a)]&&s[mn(u)]&&i.add.push(Kr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[mn(o)]=1),n.forEach(o=>{(s[mn(o.source)]||s[mn(o.target)])&&i.mod.push(o)})),i}});const jue={binary:rht,dice:qI,slice:zL,slicedice:iht,squarify:bwe,resquarify:sht},Pz=["x0","y0","x1","y1","depth","children"];function GX(e){K0.call(this,e)}GX.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Pz.length,default:Pz}]};Mt(GX,K0,{layout(){const e=nht();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Kt(jue,t)?e.tile(jue[t]):st("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Pz});const UEt=Object.freeze(Object.defineProperty({__proto__:null,nest:UX,pack:zX,partition:VX,stratify:HX,tree:qX,treelinks:WX,treemap:GX},Symbol.toStringTag,{value:"Module"})),aB=4278190080;function zEt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function VEt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=Ay(s,o).getContext("2d"),l=Ay(s,o).getContext("2d"),c=a&&Ay(s,o).getContext("2d");n.forEach(R=>yO(u,R,!1)),yO(l,t,!1),a&&yO(c,t,!0);const f=uB(u,s,o),d=uB(l,s,o),h=a&&uB(c,s,o),p=e.bitmap(),g=a&&e.bitmap();let y,x,b,_,E,T,k,I;for(x=0;x<o;++x)for(y=0;y<s;++y)E=x*s+y,T=f[E]&aB,I=d[E]&aB,k=a&&h[E]&aB,(T||k||I)&&(b=e(y),_=e(x),!i&&(T||I)&&p.set(b,_),a&&(T||k)&&g.set(b,_));return[p,g]}function uB(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function yO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>yO(e,s.items,n))}):Vc[r].draw(e,{items:n?t.map(HEt):t})}function HEt(e){const t=dM(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Mm=5,Au=31,zk=32,Qg=new Uint32Array(zk+1),Td=new Uint32Array(zk+1);Td[0]=0;Qg[0]=~Td[0];for(let e=1;e<=zk;++e)Td[e]=Td[e-1]<<1|1,Qg[e]=~Td[e];function qEt(e,t){const n=new Uint32Array(~~((e*t+zk)/zk));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Mm]&1<<(a&Au)},set:(s,o)=>{const a=o*e+s;r(a>>>Mm,1<<(a&Au))},clear:(s,o)=>{const a=o*e+s;i(a>>>Mm,~(1<<(a&Au)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Mm,h=f>>>Mm,d===h){if(n[d]&Qg[c&Au]&Td[(f&Au)+1])return!0}else{if(n[d]&Qg[c&Au]||n[h]&Td[(f&Au)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Mm,d=c>>>Mm,f===d)r(f,Qg[l&Au]&Td[(c&Au)+1]);else for(r(f,Qg[l&Au]),r(d,Td[(c&Au)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Mm,d=c>>>Mm,f===d)i(f,Td[l&Au]|Qg[(c&Au)+1]);else for(i(f,Td[l&Au]),i(d,Qg[(c&Au)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function WEt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>qEt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function GEt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Rc.width(o.datum,o.datum.text);let f=0,d,h,p,g,y,x,b;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,g=a[_].y2===void 0?p:a[_].y2,y=(d+h)/2,x=(p+g)/2,b=Math.abs(h-d+g-p),b>=f&&(f=b,o.x=y,o.y=x);return y=c/2,x=l/2,d=o.x-y,h=o.x+y,p=o.y-x,g=o.y+x,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&g<=s?o.baseline="top":0<=p&&s<g&&(o.baseline="bottom"),!0}}function L6(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function my(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function YEt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),g=e.invert(c);let y=f,x=s,b;if(!L6(p,g,d,h,i,s)&&!my(e,p,g,h,d,y,o,a)&&!my(e,p,g,h,d,h,o,null)){for(;x-y>=1;)b=(y+x)/2,my(e,p,g,h,d,b,o,a)?x=b:y=b;if(y>f)return[p,g,y,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Rc.width(l.datum,l.datum.text);let p=n?d:0,g=!1,y=!1,x=0,b,_,E,T,k,I,R,D,L,M,z,F,H,Q,J,ne,Z;for(let ie=0;ie<f;++ie){for(b=c[ie].x,E=c[ie].y,_=c[ie].x2===void 0?b:c[ie].x2,T=c[ie].y2===void 0?E:c[ie].y2,b>_&&(Z=b,b=_,_=Z),E>T&&(Z=E,E=T,T=Z),L=e(b),z=e(_),M=~~((L+z)/2),F=e(E),Q=e(T),H=~~((F+Q)/2),R=M;R>=L;--R)for(D=H;D>=F;--D)ne=u(R,D,p,h,d),ne&&([l.x,l.y,p,g]=ne);for(R=M;R<=z;++R)for(D=H;D<=Q;++D)ne=u(R,D,p,h,d),ne&&([l.x,l.y,p,g]=ne);!g&&!n&&(J=Math.abs(_-b+T-E),k=(b+_)/2,I=(E+T)/2,J>=x&&!L6(k,I,h,d,i,s)&&!my(e,k,I,d,h,d,o,null)&&(x=J,l.x=k,l.y=I,y=!0))}return g||y?(k=h/2,I=d/2,o.setRange(e(l.x-k),e(l.y-I),e(l.x+k),e(l.y+I)),l.align="center",l.baseline="middle",!0):!1}}const KEt=[-1,-1,1,1],XEt=[-1,1,-1,1];function QEt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Rc.width(l.datum,l.datum.text),p=[];let g=n?d:0,y=!1,x=!1,b=0,_,E,T,k,I,R,D,L,M,z,F,H;for(let Q=0;Q<f;++Q){for(_=c[Q].x,T=c[Q].y,E=c[Q].x2===void 0?_:c[Q].x2,k=c[Q].y2===void 0?T:c[Q].y2,p.push([e((_+E)/2),e((T+k)/2)]);p.length;)if([D,L]=p.pop(),!(o.get(D,L)||a.get(D,L)||u.get(D,L))){u.set(D,L);for(let J=0;J<4;++J)I=D+KEt[J],R=L+XEt[J],u.outOfBounds(I,R,I,R)||p.push([I,R]);if(I=e.invert(D),R=e.invert(L),M=g,z=s,!L6(I,R,h,d,i,s)&&!my(e,I,R,d,h,M,o,a)&&!my(e,I,R,d,h,d,o,null)){for(;z-M>=1;)F=(M+z)/2,my(e,I,R,d,h,F,o,a)?z=F:M=F;M>g&&(l.x=I,l.y=R,g=M,y=!0)}}!y&&!n&&(H=Math.abs(E-_+k-T),I=(_+E)/2,R=(T+k)/2,H>=b&&!L6(I,R,h,d,i,s)&&!my(e,I,R,d,h,d,o,null)&&(b=H,l.x=I,l.y=R,x=!0))}return y||x?(I=h/2,R=d/2,o.setRange(e(l.x-I),e(l.y-R),e(l.x+I),e(l.y+R)),l.align="center",l.baseline="middle",!0):!1}}const JEt=["right","center","left"],ZEt=["bottom","middle","top"];function eTt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,g,y,x,b,_,E,T,k,I,R,D,L,M;for(let z=0;z<u;++z){if(h=(n[z]&3)-1,p=(n[z]>>>2&3)-1,g=h===0&&p===0||r[z]<0,y=h&&p?Math.SQRT1_2:1,x=r[z]<0?-1:1,b=c[1+h]+r[z]*h*y,I=c[4+p]+x*f*p/2+r[z]*p*y,E=I-f/2,T=I+f/2,R=e(b),L=e(E),M=e(T),!d)if(Uue(R,R,L,M,o,a,b,b,E,T,c,g))d=Rc.width(l.datum,l.datum.text);else continue;if(k=b+x*d*h/2,b=k-d/2,_=k+d/2,R=e(b),D=e(_),Uue(R,D,L,M,o,a,b,_,E,T,c,g))return l.x=h?h*x<0?_:b:k,l.y=p?p*x<0?T:E:I,l.align=JEt[h*x+1],l.baseline=ZEt[p*x+1],o.setRange(R,L,D,M),!0}return!1}}function Uue(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const lB=0,cB=4,fB=8,dB=0,hB=1,pB=2,tTt={"top-left":lB+dB,top:lB+hB,"top-right":lB+pB,left:cB+dB,middle:cB+hB,right:cB+pB,"bottom-left":fB+dB,bottom:fB+hB,"bottom-right":fB+pB},nTt={naive:GEt,"reduced-search":YEt,floodfill:QEt};function rTt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=iTt(r,f),h=sTt(i,f),p=oTt(e[0].datum),g=p==="group"&&e[0].datum.items[u].marktype,y=g==="area",x=aTt(p,g,a,u),b=l===null||l===1/0,_=y&&c==="naive";let E=-1,T=-1;const k=e.map(L=>{const M=b?Rc.width(L,L.text):void 0;return E=Math.max(E,M),T=Math.max(T,L.fontSize),{datum:L,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:x(L),textWidth:M}});l=l===null||l===1/0?Math.max(E,T)+Math.max(...r):l;const I=WEt(t[0],t[1],l);let R;if(!_){n&&k.sort((z,F)=>n(z.datum,F.datum));let L=!1;for(let z=0;z<h.length&&!L;++z)L=h[z]===5||d[z]<0;const M=(p&&o||y)&&e.map(z=>z.datum);R=s.length||M?VEt(I,M||[],s,L,y):zEt(I,o&&k)}const D=y?nTt[c](I,R,o,u):eTt(I,R,h,d);return k.forEach(L=>L.opacity=+D(L)),k}function iTt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function sTt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=tTt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function oTt(e){return e&&e.mark&&e.mark.marktype}function aTt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const Dz=["x","y","opacity","align","baseline"],K2e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function YX(e){Je.call(this,null,e)}YX.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:K2e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Dz.length,default:Dz}]};Mt(YX,Je,{transform(e,t){function n(s){const o=e[s];return Gn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&st("Size parameter should be specified as a [width, height] array.");const i=e.as||Dz;return rTt(t.materialize(t.SOURCE).source||[],e.size,e.sort,Vt(e.offset==null?1:e.offset),Vt(e.anchor||K2e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const uTt=Object.freeze(Object.defineProperty({__proto__:null,label:YX},Symbol.toStringTag,{value:"Module"}));function X2e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function KX(e){Je.call(this,null,e)}KX.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Mt(KX,Je,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=X2e(r,e.groupby),s=(e.groupby||[]).map(xs),o=s.length,a=e.as||[xs(e.x),xs(e.y)],u=[];i.forEach(l=>{uTe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Kr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const Nz={constant:aK,linear:uK,log:iTe,exp:sTe,pow:oTe,quad:lK,poly:aTe},lTt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function XX(e){Je.call(this,null,e)}XX.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Nz)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Mt(XX,Je,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=X2e(r,e.groupby),s=(e.groupby||[]).map(xs),o=e.method||"linear",a=e.order==null?3:e.order,u=lTt(o,a),l=e.as||[xs(e.x),xs(e.y)],c=Nz[o],f=[];let d=e.extent;Kt(Nz,o)||st("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,a);if(e.params){f.push(Kr({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const y=d||Np(h,e.x),x=b=>{const _={};for(let E=0;E<s.length;++E)_[s[E]]=h.dims[E];_[l[0]]=b[0],_[l[1]]=b[1],f.push(Kr(_))};o==="linear"||o==="constant"?y.forEach(b=>x([b,g.predict(b)])):bM(g.predict,y,25,200).forEach(x)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const cTt=Object.freeze(Object.defineProperty({__proto__:null,loess:KX,regression:XX},Symbol.toStringTag,{value:"Module"}));function QX(e){Je.call(this,null,e)}QX.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const fTt=[-1e5,-1e5,1e5,1e5];Mt(QX,Je,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:fTt;const s=this.value=IG.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!hTt(u)?dTt(u):null}return t.reflow(e.modified()).modifies(n)}});function dTt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function hTt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const pTt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:QX},Symbol.toStringTag,{value:"Module"}));var mB=Math.PI/180,oA=64,vO=2048;function mTt(){var e=[256,256],t,n,r,i,s,o,a,u=Q2e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(Ay()),g=wTt((e[0]>>5)*e[1]),y=null,x=l.length,b=-1,_=[],E=l.map(k=>({text:t(k),font:n(k),style:i(k),weight:s(k),rotate:o(k),size:~~(r(k)+1e-14),padding:a(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,I)=>I.size-k.size);++b<x;){var T=E[b];T.x=e[0]*(c()+.5)>>1,T.y=e[1]*(c()+.5)>>1,gTt(p,T,E,b),T.hasText&&h(g,T,y)&&(_.push(T),y?vTt(y,T):y=[{x:T.x+T.x0,y:T.y+T.y0},{x:T.x+T.x1,y:T.y+T.y1}],T.x-=e[0]>>1,T.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(oA<<5)/g,p.height=vO/g;var y=p.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:g}}function h(p,g,y){for(var x=g.x,b=g.y,_=Math.hypot(e[0],e[1]),E=u(e),T=c()<.5?1:-1,k=-T,I,R,D;(I=E(k+=T))&&(R=~~I[0],D=~~I[1],!(Math.min(Math.abs(R),Math.abs(D))>=_));)if(g.x=x+R,g.y=b+D,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!y||!yTt(g,p,e[0]))&&(!y||bTt(g,y))){for(var L=g.sprite,M=g.width>>5,z=e[0]>>5,F=g.x-(M<<4),H=F&127,Q=32-H,J=g.y1-g.y0,ne=(g.y+g.y0)*z+(F>>5),Z,ie=0;ie<J;ie++){Z=0;for(var q=0;q<=M;q++)p[ne+q]|=Z<<Q|(q<M?(Z=L[ie*M+q])>>>H:0);ne+=z}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Ev(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Ev(p),f):i},f.fontWeight=function(p){return arguments.length?(s=Ev(p),f):s},f.rotate=function(p){return arguments.length?(o=Ev(p),f):o},f.text=function(p){return arguments.length?(t=Ev(p),f):t},f.spiral=function(p){return arguments.length?(u=_Tt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Ev(p),f):r},f.padding=function(p){return arguments.length?(a=Ev(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function gTt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(oA<<5)/s,vO/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*mB),y=Math.cos(t.rotate*mB),x=c*y,b=c*g,_=d*y,E=d*g;c=Math.max(Math.abs(x+E),Math.abs(x-E))+31>>5<<5,d=~~Math.max(Math.abs(b+_),Math.abs(b-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=oA<<5&&(o=0,a+=u,u=0),a+d>=vO)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*mB),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var T=i.getImageData(0,0,(oA<<5)/s,vO/s).data,k=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)k[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var I=0,R=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var D=f*p+(h>>5),L=T[(a+p)*(oA<<5)+(o+h)<<2]?1<<31-h%32:0;k[D]|=L,I|=L}I?R=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+R,t.sprite=k.slice(0,(t.y1-t.y0)*f)}}}function yTt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function vTt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function bTt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Q2e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function xTt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function wTt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Ev(e){return typeof e=="function"?e:function(){return e}}var _Tt={archimedean:Q2e,rectangular:xTt};const J2e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],ETt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function JX(e){Je.call(this,mTt(),e)}JX.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:J2e}]};Mt(JX,Je,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&st("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return Gn(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||ETt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||J2e;let a=e.fontSize||14,u;if(Gn(a)?u=e.fontSizeRange:a=cu(a),u){const p=a,g=Hr("sqrt")().domain(Np(i,p)).range(u);a=y=>g(p(y))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Pf).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,g,y;p<h;++p)g=l[p],y=g.datum,y[o[0]]=g.x+f,y[o[1]]=g.y+d,y[o[2]]=g.font,y[o[3]]=g.size,y[o[4]]=g.style,y[o[5]]=g.weight,y[o[6]]=g.rotate;return t.reflow(r).modifies(o)}});const TTt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:JX},Symbol.toStringTag,{value:"Module"})),STt=e=>new Uint8Array(e),CTt=e=>new Uint16Array(e),BA=e=>new Uint32Array(e);function ATt(){let e=8,t=[],n=BA(0),r=zD(0,e),i=zD(0,e);return{data:()=>t,seen:()=>n=kTt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=zD(s,e,r),i=zD(s,e))}}}function kTt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function zD(e,t,n){const r=(t<257?STt:t<65537?CTt:BA)(e);return n&&r.set(n),r}function zue(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Vue(){let e=BA(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=BA(f);let h=Array(f),p,g,y;for(y=0;y<f;++y)h[y]=a(u[y]),d[y]=y;if(h=ITt(h,d),c)p=t,g=e,t=Array(c+f),e=BA(c+f),RTt(l,p,g,c,h,d,f,t,e);else{if(l>0)for(y=0;y<f;++y)d[y]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Yst(u,a[0],0,l),Uy(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function ITt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Jst(e,t)}function RTt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function ZX(e){Je.call(this,ATt(),e),this._indices=null,this._dims=null}ZX.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Mt(ZX,Je,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Vue()),s.push(zue(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let g,y,x,b,_,E,T,k,I;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},b=t.mod,T=0,k=b.length;T<k;++T)E[b[T]._index]=1;for(T=0;T<h;++T)I=r[T],(!o[T]||e.modified("fields",T)||t.modified(I.fields))&&(x=I.fname,(g=p[x])||(s[x]=y=Vue(),p[x]=g=y.insert(I,t.source,0)),o[T]=zue(y,T,i[T]).onAdd(g,u));for(T=0,k=a.data().length;T<k;++T)_[T]||(l[T]!==u[T]?f.push(T):E[T]&&u[T]!==c&&d.push(T));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,g;i.resize(c,f),i.add(r);const y=i.curr(),x=i.prev(),b=i.all();for(h=0;h<f;++h)p=a[h].fname,g=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(g,y);for(;d<c;++d)x[d]=b,y[d]!==b&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],g=e.one;let y,x,b;if(f<h)for(y=f,x=Math.min(h,d);y<x;++y)b=u[y],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=g;else if(f>h)for(y=h,x=Math.min(f,p);y<x;++y)b=u[y],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=g;if(d>p)for(y=Math.max(f,p),x=d;y<x;++y)b=u[y],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=g;else if(d<p)for(y=Math.max(h,d),x=p;y<x;++y)b=u[y],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,g,y;if(l<f)for(p=l,g=Math.min(f,c);p<g;++p)y=o[p],s[y]^=h,n.push(y);else if(l>f)for(p=f,g=Math.min(l,d);p<g;++p)y=o[p],s[y]^=h,r.push(y);if(c>d)for(p=Math.max(l,d),g=c;p<g;++p)y=o[p],s[y]^=h,n.push(y);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)y=o[p],s[y]^=h,r.push(y);e.range=t.slice()}});function eQ(e){Je.call(this,null,e)}eQ.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Mt(eQ,Je,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const PTt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:ZX,resolvefilter:eQ},Symbol.toStringTag,{value:"Module"})),DTt="RawCode",aT="Literal",NTt="Property",OTt="Identifier",$Tt="ArrayExpression",LTt="BinaryExpression",Z2e="CallExpression",MTt="ConditionalExpression",FTt="LogicalExpression",BTt="MemberExpression",jTt="ObjectExpression",UTt="UnaryExpression";function oh(e){this.type=e}oh.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=zTt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function zTt(e){switch(e.type){case $Tt:return e.elements;case LTt:case FTt:return[e.left,e.right];case Z2e:return[e.callee].concat(e.arguments);case MTt:return[e.test,e.consequent,e.alternate];case BTt:return[e.object,e.property];case jTt:return e.properties;case NTt:return[e.key,e.value];case UTt:return[e.argument];case OTt:case aT:case DTt:default:return[]}}var Xp,ln,rt,su,si,MM=1,mR=2,Hb=3,S1=4,FM=5,Dx=6,Tl=7,gR=8,VTt=9;Xp={};Xp[MM]="Boolean";Xp[mR]="<end>";Xp[Hb]="Identifier";Xp[S1]="Keyword";Xp[FM]="Null";Xp[Dx]="Numeric";Xp[Tl]="Punctuator";Xp[gR]="String";Xp[VTt]="RegularExpression";var HTt="ArrayExpression",qTt="BinaryExpression",WTt="CallExpression",GTt="ConditionalExpression",eCe="Identifier",YTt="Literal",KTt="LogicalExpression",XTt="MemberExpression",QTt="ObjectExpression",JTt="Property",ZTt="UnaryExpression",Uo="Unexpected token %0",eSt="Unexpected number",tSt="Unexpected string",nSt="Unexpected identifier",rSt="Unexpected reserved word",iSt="Unexpected end of input",Oz="Invalid regular expression",gB="Invalid regular expression: missing /",tCe="Octal literals are not allowed in strict mode.",sSt="Duplicate data property in object literal not allowed in strict mode",xa="ILLEGAL",Vk="Disabled.",oSt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),aSt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function BM(e,t){if(!e)throw new Error("ASSERT: "+t)}function Wm(e){return e>=48&&e<=57}function tQ(e){return"0123456789abcdefABCDEF".includes(e)}function jA(e){return"01234567".includes(e)}function uSt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Hk(e){return e===10||e===13||e===8232||e===8233}function yR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&oSt.test(String.fromCharCode(e))}function M6(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&aSt.test(String.fromCharCode(e))}const lSt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function nCe(){for(;rt<su;){const e=ln.charCodeAt(rt);if(uSt(e)||Hk(e))++rt;else break}}function $z(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)rt<su&&tQ(ln[rt])?(r=ln[rt++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):jr({},Uo,xa);return String.fromCharCode(i)}function cSt(){var e,t,n,r;for(e=ln[rt],t=0,e==="}"&&jr({},Uo,xa);rt<su&&(e=ln[rt++],!!tQ(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&jr({},Uo,xa),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function rCe(){var e,t;for(e=ln.charCodeAt(rt++),t=String.fromCharCode(e),e===92&&(ln.charCodeAt(rt)!==117&&jr({},Uo,xa),++rt,e=$z("u"),(!e||e==="\\"||!yR(e.charCodeAt(0)))&&jr({},Uo,xa),t=e);rt<su&&(e=ln.charCodeAt(rt),!!M6(e));)++rt,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ln.charCodeAt(rt)!==117&&jr({},Uo,xa),++rt,e=$z("u"),(!e||e==="\\"||!M6(e.charCodeAt(0)))&&jr({},Uo,xa),t+=e);return t}function fSt(){var e,t;for(e=rt++;rt<su;){if(t=ln.charCodeAt(rt),t===92)return rt=e,rCe();if(M6(t))++rt;else break}return ln.slice(e,rt)}function dSt(){var e,t,n;return e=rt,t=ln.charCodeAt(rt)===92?rCe():fSt(),t.length===1?n=Hb:lSt.hasOwnProperty(t)?n=S1:t==="null"?n=FM:t==="true"||t==="false"?n=MM:n=Hb,{type:n,value:t,start:e,end:rt}}function yB(){var e=rt,t=ln.charCodeAt(rt),n,r=ln[rt],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++rt,{type:Tl,value:String.fromCharCode(t),start:e,end:rt};default:if(n=ln.charCodeAt(rt+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return rt+=2,{type:Tl,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:rt};case 33:case 61:return rt+=2,ln.charCodeAt(rt)===61&&++rt,{type:Tl,value:ln.slice(e,rt),start:e,end:rt}}}if(o=ln.substr(rt,4),o===">>>=")return rt+=4,{type:Tl,value:o,start:e,end:rt};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return rt+=3,{type:Tl,value:s,start:e,end:rt};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return rt+=2,{type:Tl,value:i,start:e,end:rt};if(i==="//"&&jr({},Uo,xa),"<>=!+-*%&|^/".includes(r))return++rt,{type:Tl,value:r,start:e,end:rt};jr({},Uo,xa)}function hSt(e){let t="";for(;rt<su&&tQ(ln[rt]);)t+=ln[rt++];return t.length===0&&jr({},Uo,xa),yR(ln.charCodeAt(rt))&&jr({},Uo,xa),{type:Dx,value:parseInt("0x"+t,16),start:e,end:rt}}function pSt(e){let t="0"+ln[rt++];for(;rt<su&&jA(ln[rt]);)t+=ln[rt++];return(yR(ln.charCodeAt(rt))||Wm(ln.charCodeAt(rt)))&&jr({},Uo,xa),{type:Dx,value:parseInt(t,8),octal:!0,start:e,end:rt}}function Hue(){var e,t,n;if(n=ln[rt],BM(Wm(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=rt,e="",n!=="."){if(e=ln[rt++],n=ln[rt],e==="0"){if(n==="x"||n==="X")return++rt,hSt(t);if(jA(n))return pSt(t);n&&Wm(n.charCodeAt(0))&&jr({},Uo,xa)}for(;Wm(ln.charCodeAt(rt));)e+=ln[rt++];n=ln[rt]}if(n==="."){for(e+=ln[rt++];Wm(ln.charCodeAt(rt));)e+=ln[rt++];n=ln[rt]}if(n==="e"||n==="E")if(e+=ln[rt++],n=ln[rt],(n==="+"||n==="-")&&(e+=ln[rt++]),Wm(ln.charCodeAt(rt)))for(;Wm(ln.charCodeAt(rt));)e+=ln[rt++];else jr({},Uo,xa);return yR(ln.charCodeAt(rt))&&jr({},Uo,xa),{type:Dx,value:parseFloat(e),start:t,end:rt}}function mSt(){var e="",t,n,r,i,s=!1;for(t=ln[rt],BM(t==="'"||t==='"',"String literal must starts with a quote"),n=rt,++rt;rt<su;)if(r=ln[rt++],r===t){t="";break}else if(r==="\\")if(r=ln[rt++],!r||!Hk(r.charCodeAt(0)))switch(r){case"u":case"x":ln[rt]==="{"?(++rt,e+=cSt()):e+=$z(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:jA(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),rt<su&&jA(ln[rt])&&(s=!0,i=i*8+"01234567".indexOf(ln[rt++]),"0123".includes(r)&&rt<su&&jA(ln[rt])&&(i=i*8+"01234567".indexOf(ln[rt++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ln[rt]===`
`&&++rt;else{if(Hk(r.charCodeAt(0)))break;e+=r}return t!==""&&jr({},Uo,xa),{type:gR,value:e,octal:s,start:n,end:rt}}function gSt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";jr({},Oz)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{jr({},Oz)}try{return new RegExp(e,t)}catch{return null}}function ySt(){var e,t,n,r,i;for(e=ln[rt],BM(e==="/","Regular expression literal must start with a slash"),t=ln[rt++],n=!1,r=!1;rt<su;)if(e=ln[rt++],t+=e,e==="\\")e=ln[rt++],Hk(e.charCodeAt(0))&&jr({},gB),t+=e;else if(Hk(e.charCodeAt(0)))jr({},gB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||jr({},gB),i=t.substr(1,t.length-2),{value:i,literal:t}}function vSt(){var e,t,n;for(t="",n="";rt<su&&(e=ln[rt],!!M6(e.charCodeAt(0)));)++rt,e==="\\"&&rt<su?jr({},Uo,xa):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&jr({},Oz,n),{value:n,literal:t}}function bSt(){var e,t,n,r;return si=null,nCe(),e=rt,t=ySt(),n=vSt(),r=gSt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:rt}}function xSt(e){return e.type===Hb||e.type===S1||e.type===MM||e.type===FM}function iCe(){if(nCe(),rt>=su)return{type:mR,start:rt,end:rt};const e=ln.charCodeAt(rt);return yR(e)?dSt():e===40||e===41||e===59?yB():e===39||e===34?mSt():e===46?Wm(ln.charCodeAt(rt+1))?Hue():yB():Wm(e)?Hue():yB()}function kl(){const e=si;return rt=e.end,si=iCe(),rt=e.end,e}function sCe(){const e=rt;si=iCe(),rt=e}function wSt(e){const t=new oh(HTt);return t.elements=e,t}function que(e,t,n){const r=new oh(e==="||"||e==="&&"?KTt:qTt);return r.operator=e,r.left=t,r.right=n,r}function _St(e,t){const n=new oh(WTt);return n.callee=e,n.arguments=t,n}function ESt(e,t,n){const r=new oh(GTt);return r.test=e,r.consequent=t,r.alternate=n,r}function nQ(e){const t=new oh(eCe);return t.name=e,t}function aA(e){const t=new oh(YTt);return t.value=e.value,t.raw=ln.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Wue(e,t,n){const r=new oh(XTt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function TSt(e){const t=new oh(QTt);return t.properties=e,t}function Gue(e,t,n){const r=new oh(JTt);return r.key=t,r.value=n,r.kind=e,r}function SSt(e,t){const n=new oh(ZTt);return n.operator=e,n.argument=t,n.prefix=!0,n}function jr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(BM(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=rt,n.description=i,n}function jM(e){e.type===mR&&jr(e,iSt),e.type===Dx&&jr(e,eSt),e.type===gR&&jr(e,tSt),e.type===Hb&&jr(e,nSt),e.type===S1&&jr(e,rSt),jr(e,Uo,e.value)}function ou(e){const t=kl();(t.type!==Tl||t.value!==e)&&jM(t)}function Bi(e){return si.type===Tl&&si.value===e}function vB(e){return si.type===S1&&si.value===e}function CSt(){const e=[];for(rt=si.start,ou("[");!Bi("]");)Bi(",")?(kl(),e.push(null)):(e.push(qb()),Bi("]")||ou(","));return kl(),wSt(e)}function Yue(){rt=si.start;const e=kl();return e.type===gR||e.type===Dx?(e.octal&&jr(e,tCe),aA(e)):nQ(e.value)}function ASt(){var e,t,n,r;if(rt=si.start,e=si,e.type===Hb)return n=Yue(),ou(":"),r=qb(),Gue("init",n,r);if(e.type===mR||e.type===Tl)jM(e);else return t=Yue(),ou(":"),r=qb(),Gue("init",t,r)}function kSt(){var e=[],t,n,r,i={},s=String;for(rt=si.start,ou("{");!Bi("}");)t=ASt(),t.key.type===eCe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?jr({},sSt):i[r]=!0,e.push(t),Bi("}")||ou(",");return ou("}"),TSt(e)}function ISt(){ou("(");const e=rQ();return ou(")"),e}const RSt={if:1};function PSt(){var e,t,n;if(Bi("("))return ISt();if(Bi("["))return CSt();if(Bi("{"))return kSt();if(e=si.type,rt=si.start,e===Hb||RSt[si.value])n=nQ(kl().value);else if(e===gR||e===Dx)si.octal&&jr(si,tCe),n=aA(kl());else{if(e===S1)throw new Error(Vk);e===MM?(t=kl(),t.value=t.value==="true",n=aA(t)):e===FM?(t=kl(),t.value=null,n=aA(t)):Bi("/")||Bi("/=")?(n=aA(bSt()),sCe()):jM(kl())}return n}function DSt(){const e=[];if(ou("("),!Bi(")"))for(;rt<su&&(e.push(qb()),!Bi(")"));)ou(",");return ou(")"),e}function NSt(){rt=si.start;const e=kl();return xSt(e)||jM(e),nQ(e.value)}function OSt(){return ou("."),NSt()}function $St(){ou("[");const e=rQ();return ou("]"),e}function LSt(){var e,t,n;for(e=PSt();;)if(Bi("."))n=OSt(),e=Wue(".",e,n);else if(Bi("("))t=DSt(),e=_St(e,t);else if(Bi("["))n=$St(),e=Wue("[",e,n);else break;return e}function Kue(){const e=LSt();if(si.type===Tl&&(Bi("++")||Bi("--")))throw new Error(Vk);return e}function bO(){var e,t;if(si.type!==Tl&&si.type!==S1)t=Kue();else{if(Bi("++")||Bi("--"))throw new Error(Vk);if(Bi("+")||Bi("-")||Bi("~")||Bi("!"))e=kl(),t=bO(),t=SSt(e.value,t);else{if(vB("delete")||vB("void")||vB("typeof"))throw new Error(Vk);t=Kue()}}return t}function Xue(e){let t=0;if(e.type!==Tl&&e.type!==S1)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function MSt(){var e,t,n,r,i,s,o,a,u,l;if(e=si,u=bO(),r=si,i=Xue(r),i===0)return u;for(r.prec=i,kl(),t=[e,si],o=bO(),s=[u,r,o];(i=Xue(si))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=que(a,u,o),s.push(n);r=kl(),r.prec=i,s.push(r),t.push(si),n=bO(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=que(s[l-1].value,s[l-2],n),l-=2;return n}function qb(){var e,t,n;return e=MSt(),Bi("?")&&(kl(),t=qb(),ou(":"),n=qb(),e=ESt(e,t,n)),e}function rQ(){const e=qb();if(Bi(","))throw new Error(Vk);return e}function iQ(e){ln=e,rt=0,su=ln.length,si=null,sCe();const t=rQ();if(si.type!==mR)throw new Error("Unexpect token after expression.");return t}var oCe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function aCe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&st("Missing arguments to clamp function."),o.length>3&&st("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&st("Missing arguments to if function."),o.length>3&&st("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function FSt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function uCe(e){e=e||{};const t=e.allowed?Yd(e.allowed):{},n=e.forbidden?Yd(e.forbidden):{},r=e.constants||oCe,i=(e.functions||aCe)(f),s=e.globalvar,o=e.fieldvar,a=Gn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Ht(p))return p;const g=d[p.type];return g==null&&st("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:Kt(n,g)?st("Illegal identifier: "+g):Kt(r,g)?r[g]:Kt(t,g)?g:(u[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,y=f(p.object);g&&(c+=1);const x=f(p.property);return y===o&&(l[FSt(x)]=1),g&&(c-=1),y+(g?"."+x:"["+x+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&st("Illegal callee type: "+p.callee.type);const g=p.callee.name,y=p.arguments,x=Kt(i,g)&&i[g];return x||st("Unrecognized function: "+g),Gn(x)?x(y):x+"("+y.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},g}return h.functions=i,h.constants=r,h}const BSt="Literal";var Qp,jSt=1,USt=2,zSt=3,VSt=4,HSt=5,qSt=6,WSt=7,GSt=8,YSt=9;Qp={};Qp[jSt]="Boolean";Qp[USt]="<end>";Qp[zSt]="Identifier";Qp[VSt]="Keyword";Qp[HSt]="Null";Qp[qSt]="Numeric";Qp[WSt]="Punctuator";Qp[GSt]="String";Qp[YSt]="RegularExpression";const Que=Symbol("vega_selection_getter");function lCe(e){return(!e.getter||!e.getter[Que])&&(e.getter=kf(e.field),e.getter[Que]=!0),e.getter}const sQ="intersect",Jue="union",KSt="vlMulti",XSt="vlPoint",Zue="or",QSt="and",Gh="_vgsid_",qk=kf(Gh),JSt="E",ZSt="R",e2t="R-E",t2t="R-LE",n2t="R-RE",F6="index:unit";function ele(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=lCe(a)(e),Sy(o)&&(o=tu(o)),Sy(r[s])&&(r[s]=tu(r[s])),at(r[s])&&Sy(r[s][0])&&(r[s]=r[s].map(tu)),a.type===JSt){if(at(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===ZSt){if(!Y_(o,r[s]))return!1}else if(a.type===n2t){if(!Y_(o,r[s],!0,!1))return!1}else if(a.type===e2t){if(!Y_(o,r[s],!1,!1))return!1}else if(a.type===t2t&&!Y_(o,r[s],!1,!0))return!1;return!0}function r2t(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[F6]&&r[F6].value:void 0,o=n===sQ,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=ele(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=ele(t,l),o^h)return h;return a&&o}const cCe=iS(qk),i2t=cCe.left,s2t=cCe.right;function o2t(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[F6]&&r[F6].value:void 0,o=n===sQ,a=qk(t),u=i2t(i,a);if(u===i.length||qk(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(s2t(i,a)-u<s.size)return!1}return!0}function a2t(e,t){return e.map(n=>Wn(t.fields?{values:t.fields.map(r=>lCe(r)(n.datum))}:{[Gh]:qk(n.datum)},t))}function u2t(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,g,y,x,b,_=s.length,E=0,T,k;E<_;++E)if(l=s[E],d=l.unit,c=l.fields,f=l.values,c&&f){for(T=0,k=c.length;T<k;++T)h=c[T],g=o[h.field]||(o[h.field]={}),y=g[d]||(g[d]=[]),u[h.field]=x=h.type.charAt(0),b=bB[`${x}_union`],g[d]=b(y,Vt(f[T]));n&&(y=a[d]||(a[d]=[]),y.push(Vt(f).reduce((I,R,D)=>(I[c[D].field]=R,I),{})))}else h=Gh,p=qk(l),g=o[h]||(o[h]={}),y=g[d]||(g[d]=[]),y.push(p),n&&(y=a[d]||(a[d]=[]),y.push({[Gh]:p}));if(t=t||Jue,o[Gh]?o[Gh]=bB[`${Gh}_${t}`](...Object.values(o[Gh])):Object.keys(o).forEach(I=>{o[I]=Object.keys(o[I]).map(R=>o[I][R]).reduce((R,D)=>R===void 0?D:bB[`${u[I]}_${t}`](R,D))}),s=Object.keys(a),n&&s.length){const I=r?XSt:KSt;o[I]=t===Jue?{[Zue]:s.reduce((R,D)=>(R.push(...a[D]),R),[])}:{[QSt]:s.map(R=>({[Zue]:a[R]}))}}return o}var bB={[`${Gh}_union`]:aot,[`${Gh}_intersect`]:sot,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=tu(t[0]),r=tu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=tu(t[0]),r=tu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const l2t=":",c2t="@";function oQ(e,t,n,r){t[0].type!==BSt&&st("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Sr(t).value,o="unit",a=c2t+o,u=l2t+i;s===sQ&&!Kt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Kt(r,u)||(r[u]=n.getData(i).tuplesRef())}function fCe(e){const t=this.context.data[e];return t?t.values.value:[]}function f2t(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function d2t(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(If).insert(t)),1}function h2t(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const vR=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},p2t=vR("format"),dCe=vR("timeFormat"),m2t=vR("utcFormat"),g2t=vR("timeParse"),y2t=vR("utcParse"),VD=new Date(2e3,0,1);function UM(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(VD.setYear(2e3),VD.setMonth(e),VD.setDate(t),dCe.call(this,VD,n))}function v2t(e){return UM.call(this,e,1,"%B")}function b2t(e){return UM.call(this,e,1,"%b")}function x2t(e){return UM.call(this,0,2+e,"%A")}function w2t(e){return UM.call(this,0,2+e,"%a")}const _2t=":",E2t="@",Lz="%",hCe="$";function aQ(e,t,n,r){t[0].type!==aT&&st("First argument to data functions must be a string literal.");const i=t[0].value,s=_2t+i;if(!Kt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function T2t(e,t,n,r){t[0].type!==aT&&st("First argument to indata must be a string literal."),t[1].type!==aT&&st("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=E2t+s;Kt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Uu(e,t,n,r){if(t[0].type===aT)tle(n,r,t[0].value);else for(e in n.scales)tle(n,r,e)}function tle(e,t,n){const r=Lz+n;if(!Kt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Jp(e,t){if(Gn(e))return e;if(Ht(e)){const n=t.scales[e];return n&&jvt(n.value)?n.value:void 0}}function S2t(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Uu,n._range=Uu,n._scale=Uu;const r=i=>"_["+(i.type===aT?Ot(Lz+i.value):Ot(Lz)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function uQ(e,t){return function(n,r,i){if(n){const s=Jp(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const C2t=uQ("area",tft),A2t=uQ("bounds",sft),k2t=uQ("centroid",fft);function I2t(e,t){const n=Jp(e,(t||this).context);return n&&n.scale()}function R2t(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function lQ(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function P2t(){return lQ(this.context.dataflow,"warn",arguments)}function D2t(){return lQ(this.context.dataflow,"info",arguments)}function N2t(){return lQ(this.context.dataflow,"debug",arguments)}function xB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Mz(e){const t=Vy(e),n=xB(t.r),r=xB(t.g),i=xB(t.b);return .2126*n+.7152*r+.0722*i}function O2t(e,t){const n=Mz(e),r=Mz(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function $2t(){const e=[].slice.call(arguments);return e.unshift({}),Wn(...e)}function pCe(e,t){return e===t||e!==e&&t!==t?!0:at(e)?at(t)&&e.length===t.length?L2t(e,t):!1:Ut(e)&&Ut(t)?mCe(e,t):!1}function L2t(e,t){for(let n=0,r=e.length;n<r;++n)if(!pCe(e[n],t[n]))return!1;return!0}function mCe(e,t){for(const n in e)if(!pCe(e[n],t[n]))return!1;return!0}function nle(e){return t=>mCe(e,t)}function M2t(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?If:at(n)||fM(n)?n:nle(n),c.remove(f)),t&&c.insert(t),r&&(f=nle(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function F2t(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function B2t(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const rle={};function j2t(e,t){const n=rle[t]||(rle[t]=kf(t));return at(e)?e.map(n):n(e)}function cQ(e){return at(e)||ArrayBuffer.isView(e)?e:null}function fQ(e){return cQ(e)||(Ht(e)?e:null)}function U2t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return cQ(e).join(...n)}function z2t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fQ(e).indexOf(...n)}function V2t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fQ(e).lastIndexOf(...n)}function H2t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fQ(e).slice(...n)}function q2t(e,t,n){return Gn(n)&&st("Function argument passed to replace."),String(e).replace(t,n)}function W2t(e){return cQ(e).slice().reverse()}function G2t(e,t,n){return $K(e||0,t||0,n||0)}function Y2t(e,t){const n=Jp(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function K2t(e,t){const n=Jp(e,(t||this).context);return n?n.copy():void 0}function X2t(e,t){const n=Jp(e,(t||this).context);return n?n.domain():[]}function Q2t(e,t,n){const r=Jp(e,(n||this).context);return r?at(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function J2t(e,t){const n=Jp(e,(t||this).context);return n&&n.range?n.range():[]}function Z2t(e,t,n){const r=Jp(e,(n||this).context);return r?r(t):void 0}function eCt(e,t,n,r,i){e=Jp(e,(i||this).context);const s=sSe(t,n);let o=e.domain(),a=o[0],u=Sr(o),l=lu;return u-a?l=GTe(e,a,u):e=(e.interpolator?Hr("sequential")().interpolator(e.interpolator()):Hr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Sr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function tCt(e,t,n){const r=Jp(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function nCt(e){let t=null;return function(n){return n?Bk(n,t=t||rT(e)):e}}const gCe=e=>e.data;function yCe(e,t){const n=fCe.call(t,e);return n.root&&n.root.lookup||{}}function rCt(e,t,n){const r=yCe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(gCe):void 0}function iCt(e,t){const n=yCe(e,this)[t];return n?n.ancestors().map(gCe):void 0}const vCe=()=>typeof window<"u"&&window||null;function sCt(){const e=vCe();return e?e.screen:{}}function oCt(){const e=vCe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function aCt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function bCe(e,t,n){if(!e)return[];const[r,i]=e,s=new eo().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return n2e(o,s,uCt(t))}function uCt(e){let t=null;if(e){const n=Vt(e.marktype),r=Vt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function lCt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Vt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function cCt(e){return Vt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function fCt(e,t,n){const{x:r,y:i,mark:s}=n,o=new eo().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),bCe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>dCt(u.x,u.y,t))}function dCt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const Wk={random(){return Pf()},cumulativeNormal:gM,cumulativeLogNormal:tK,cumulativeUniform:sK,densityNormal:XY,densityLogNormal:eK,densityUniform:iK,quantileNormal:yM,quantileLogNormal:nK,quantileUniform:oK,sampleNormal:mM,sampleLogNormal:ZY,sampleUniform:rK,isArray:at,isBoolean:T1,isDate:Sy,isDefined(e){return e!==void 0},isNumber:Vr,isObject:Ut,isRegExp:rEe,isString:Ht,isTuple:fM,isValid(e){return e!=null&&e===e},toBoolean:OY,toDate(e){return $Y(e)},toNumber:tu,toString:LY,indexof:z2t,join:U2t,lastindexof:V2t,replace:q2t,reverse:W2t,slice:H2t,flush:tEe,lerp:iEe,merge:$2t,pad:aEe,peek:Sr,pluck:j2t,span:JI,inrange:Y_,truncate:uEe,rgb:Vy,lab:w4,hcl:_4,hsl:b4,luminance:Mz,contrast:O2t,sequence:Tc,format:p2t,utcFormat:m2t,utcParse:y2t,utcOffset:_Ee,utcSequence:SEe,timeFormat:dCe,timeParse:g2t,timeOffset:wEe,timeSequence:TEe,timeUnitSpecifier:cEe,monthFormat:v2t,monthAbbrevFormat:b2t,dayFormat:x2t,dayAbbrevFormat:w2t,quarter:Q_e,utcquarter:J_e,week:dEe,utcweek:mEe,dayofyear:fEe,utcdayofyear:pEe,warn:P2t,info:D2t,debug:N2t,extent(e){return Np(e)},inScope:R2t,intersect:bCe,clampRange:Z_e,pinchDistance:F2t,pinchAngle:B2t,screen:sCt,containerSize:aCt,windowSize:oCt,bandspace:G2t,setdata:d2t,pathShape:nCt,panLinear:G_e,panLog:Y_e,panPow:K_e,panSymlog:X_e,zoomLinear:kY,zoomLog:IY,zoomPow:y6,zoomSymlog:RY,encode:h2t,modify:M2t,lassoAppend:lCt,lassoPath:cCt,intersectLasso:fCt},hCt=["view","item","group","xy","x","y"],pCt="event.vega.",xCe="this.",dQ={},wCe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Ot(hCe+e)}]`,functions:mCt,constants:oCe,visitors:dQ},_Ce=uCe(wCe);function mCt(e){const t=aCe(e);hCt.forEach(n=>t[n]=pCt+n);for(const n in Wk)t[n]=xCe+n;return Wn(t,S2t(e,Wk,dQ)),t}function Us(e,t,n){return arguments.length===1?Wk[e]:(Wk[e]=t,n&&(dQ[e]=n),_Ce.functions[e]=xCe+e,this)}Us("bandwidth",Y2t,Uu);Us("copy",K2t,Uu);Us("domain",X2t,Uu);Us("range",J2t,Uu);Us("invert",Q2t,Uu);Us("scale",Z2t,Uu);Us("gradient",eCt,Uu);Us("geoArea",C2t,Uu);Us("geoBounds",A2t,Uu);Us("geoCentroid",k2t,Uu);Us("geoShape",tCt,Uu);Us("geoScale",I2t,Uu);Us("indata",f2t,T2t);Us("data",fCe,aQ);Us("treePath",rCt,aQ);Us("treeAncestors",iCt,aQ);Us("vlSelectionTest",r2t,oQ);Us("vlSelectionIdTest",o2t,oQ);Us("vlSelectionResolve",u2t,oQ);Us("vlSelectionTuples",a2t);function $p(e,t){const n={};let r;try{e=Ht(e)?e:Ot(e)+"",r=iQ(e)}catch{st("Expression parse error: "+e)}r.visit(s=>{if(s.type!==Z2e)return;const o=s.callee.name,a=wCe.visitors[o];a&&a(o,s.arguments,t,n)});const i=_Ce(r);return i.globals.forEach(s=>{const o=hCe+s;!Kt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Wn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function gCt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const yCt=Yd(["rule"]),ile=Yd(["group","image","rect"]);function vCt(e,t){let n="";return yCt[t]||(e.x2&&(e.x?(ile[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(ile[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function hQ(e){return(e+"").toLowerCase()}function bCt(e){return hQ(e)==="operator"}function xCt(e){return hQ(e)==="collect"}function cC(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function wCt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var _Ct={operator:(e,t)=>cC(e,["_"],t.code),parameter:(e,t)=>cC(e,["datum","_"],t.code),event:(e,t)=>cC(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return cC(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Ot(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=vCt(r,n),i+="return m;",cC(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Ot).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),wCt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function ECt(e){const t=this;bCt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function TCt(e){const t=this;if(e.params){const n=t.get(e.id);n||st("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function SCt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=at(i)?i.map(s=>sle(s,n,t)):sle(i,n,t)}return t}function sle(e,t,n){if(!e||!Ut(e))return e;for(let r=0,i=ole.length,s;r<i;++r)if(s=ole[r],Kt(e,s.key))return s.parse(e,t,n);return e}var ole=[{key:"$ref",parse:CCt},{key:"$key",parse:kCt},{key:"$expr",parse:ACt},{key:"$field",parse:ICt},{key:"$encode",parse:PCt},{key:"$compare",parse:RCt},{key:"$context",parse:DCt},{key:"$subflow",parse:NCt},{key:"$tupleid",parse:OCt}];function CCt(e,t){return t.get(e.$ref)||st("Operator not defined: "+e.$ref)}function ACt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Vl(t.parameterExpression(e.$expr),e.$fields))}function kCt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=NY(e.$key,e.$flat,t.expr.codegen))}function ICt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=kf(e.$field,e.$name,t.expr.codegen))}function RCt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Vt(e.$compare).map(i=>i&&i.$tupleid?mn:i);return t.fn[n]||(t.fn[n]=PY(r,e.$order,t.expr.codegen))}function PCt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Vl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function DCt(e,t){return t}function NCt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function OCt(){return mn}function $Ct(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&st("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function LCt(e){var t=this,n=Ut(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||st("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const MCt={skip:!0};function FCt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function BCt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],MCt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(If).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function ECe(e,t,n,r){return new TCe(e,t,n,r)}function TCe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||_Ct,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function ale(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}TCe.prototype=ale.prototype={fork(){const e=new ale(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),xCt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[hQ(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:gCt,parseOperator:ECt,parseOperatorParameters:TCt,parseParameters:SCt,parseStream:$Ct,parseUpdate:LCt,getState:FCt,setState:BCt};function jCt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),SCe(t,e.description()))}function SCe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function UCt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const wB="default";function zCt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:wB,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Ht(i)?i:i.user:wB,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Ht(r)||(i=r.item,r=r.user),Fz(e,r&&r!==wB?r:i||r),i},{cursor:t})}function Fz(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function B6(e,t){var n=e._runtime.data;return Kt(n,t)||st("Unrecognized data set: "+t),n[t]}function VCt(e,t){return arguments.length<2?B6(this,e).values.value:zM.call(this,e,Rx().remove(If).insert(t))}function zM(e,t){qEe(t)||st("Second argument to changes must be a changeset.");const n=B6(this,e);return n.modified=!0,this.pulse(n.input,t)}function HCt(e,t){return zM.call(this,e,Rx().insert(t))}function qCt(e,t){return zM.call(this,e,Rx().remove(t))}function CCe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function ACe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function VM(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function WCt(e){var t=VM(e),n=CCe(e),r=ACe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function GCt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=VM(e),o=t.changedTouches?t.changedTouches[0]:t,s=OM(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=YCt(e,n,s),t}function YCt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Ht(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:cu(e),item:cu(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const ule="view",KCt="timer",XCt="window",QCt={trap:!1};function JCt(e){const t=Wn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{at(r[s])&&(r[s]=Yd(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function kCe(e,t,n,r){e._eventListeners.push({type:n,sources:Vt(t),handler:r})}function ZCt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function HD(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ut(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function eAt(e,t,n){var r=this,i=new pM(n),s=function(l,c){r.runAsync(null,()=>{e===ule&&ZCt(r,t)&&l.preventDefault(),i.receive(GCt(r,l,c))})},o;if(e===KCt)HD(r,"timer",t)&&r.timer(s,t);else if(e===ule)HD(r,"view",t)&&r.addEventListener(t,s,QCt);else if(e===XCt?HD(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&HD(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);kCe(r,o,t,s)}return i}function lle(e){return e.item}function cle(e){return e.item.mark.source}function fle(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function tAt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",lle),cle,fle(e)),this.on(this.events("view","pointerout",lle),cle,fle(t)),this}function nAt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Pc(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const rAt="vega-bind",iAt="vega-bind-name",sAt="vega-bind-radio";function oAt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=DY(r.debounce,i.update))),(r.input==null&&r.element?aAt:lAt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function aAt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),kCe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(uAt(i))}}function uAt(e){return typeof Event<"u"?new Event(e):{type:e}}function lAt(e,t,n,r){const i=r.signal(n.signal),s=Pc("div",{class:rAt}),o=n.input==="radio"?s:s.appendChild(Pc("label"));o.appendChild(Pc("span",{class:iAt},n.name||n.signal)),t.appendChild(s);let a=cAt;switch(n.input){case"checkbox":a=fAt;break;case"select":a=dAt;break;case"radio":a=hAt;break;case"range":a=pAt;break}a(e,o,n,i)}function cAt(e,t,n,r){const i=Pc("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function fAt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Pc("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function dAt(e,t,n,r){const i=Pc("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};j6(o,r)&&(u.selected=!0),i.appendChild(Pc("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(j6(n.options[a],o)){i.selectedIndex=a;return}}}function hAt(e,t,n,r){const i=Pc("span",{class:sAt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};j6(o,r)&&(u.checked=!0);const l=Pc("input",u);l.addEventListener("change",()=>e.update(o));const c=Pc("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)j6(a[l].value,o)&&(a[l].checked=!0)}}function pAt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||zy(s,i,100),a=Pc("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Pc("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function j6(e,t){return e===t||e+""==t+""}function ICe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,CCe(e),ACe(e),VM(e),i,s).background(e.background())}function pQ(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function mAt(e,t,n,r){const i=new r(e.loader(),pQ(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,VM(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function gAt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=$M(r);e=n._el=e?_B(n,e,!0):null,jCt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||pR,a=e?s.renderer:s.headless;return n._renderer=a?ICe(n,n._renderer,e,a):null,n._handler=mAt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=_B(n,t,!0):e.appendChild(Pc("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=_B(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{oAt(n,u.element||t,u)})),n}function _B(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const fC=e=>+e||0,yAt=e=>({top:e,bottom:e,left:e,right:e});function dle(e){return Ut(e)?{top:fC(e.top),bottom:fC(e.bottom),left:fC(e.left),right:fC(e.right)}:yAt(fC(e))}async function mQ(e,t,n,r){const i=$M(t),s=i&&i.headless;return s||st("Unrecognized renderer type: "+t),await e.runAsync(),ICe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function vAt(e,t){e!==dy.Canvas&&e!==dy.SVG&&e!==dy.PNG&&st("Unrecognized image type: "+e);const n=await mQ(this,e,t);return e===dy.SVG?bAt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function bAt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function xAt(e,t){return(await mQ(this,dy.Canvas,e,t)).canvas()}async function wAt(e){return(await mQ(this,dy.SVG,e)).svg()}function _At(e,t,n){return ECe(e,ZE,Wk,n).parse(t)}function EAt(e){var t=this._runtime.scales;return Kt(t,e)||st("Unrecognized scale or projection: "+e),t[e].value}var RCe="width",PCe="height",gQ="padding",hle={skip:!0};function DCe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===gQ?r.left+r.right:0)}function NCe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===gQ?r.top+r.bottom:0)}function TAt(e){var t=e._signals,n=t[RCe],r=t[PCe],i=t[gQ];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=DCe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=NCe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function SAt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(RCe,n,hle),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(PCe,r,hle),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function CAt(e){return this._runtime.getState(e||{data:AAt,signals:kAt,recurse:!0})}function AAt(e,t){return t.modified&&at(t.input.value)&&!e.startsWith("_:vega:_")}function kAt(e,t){return!(e==="parent"||t instanceof ZE.proxy)}function IAt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function RAt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Put(n,t))}function PAt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",DAt(r))}function DAt(e){return e==null?"":at(e)?OCe(e):Ut(e)&&!Sy(e)?NAt(e):e+""}function NAt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(at(n)?OCe(n):$Ce(n))}).join(`
`)}function OCe(e){return"["+e.map($Ce).join(", ")+"]"}function $Ce(e){return at(e)?"[…]":Ut(e)&&!Sy(e)?"{…}":e}function OAt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function LCe(e,t){const n=this;if(t=t||{},mE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Wn({},e.locale,t.locale);n.locale($Ee(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||dy.Canvas,n._scenegraph=new ISe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||PAt,n._redraw=!0,n._handler=new pR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=JCt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=_At(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Wn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=DCe(n,n._width),n._viewHeight=NCe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,TAt(n),UCt(n),zCt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function qD(e,t){return Kt(e._signals,t)?e._signals[t]:st("Unrecognized signal name: "+Ot(t))}function MCe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function ple(e,t,n,r){let i=MCe(n,r);return i||(i=pQ(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function mle(e,t,n){const r=MCe(t,n);return r&&t._targets.remove(r),e}Mt(LCe,mE,{async evaluate(e,t,n){if(await mE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,WCt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&oO(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&SCe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=qD(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",dle(e)):dle(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?($M(e)||st("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(mE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(qD(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:SAt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=pQ(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return ple(this,e,qD(this,e),t)},removeSignalListener(e,t){return mle(this,qD(this,e),t)},addDataListener(e,t){return ple(this,e,B6(this,e).values,t)},removeDataListener(e,t){return mle(this,B6(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=Fz(this,null);this._globalCursor=!!e,t&&Fz(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:RAt,events:eAt,finalize:nAt,hover:tAt,data:VCt,change:zM,insert:HCt,remove:qCt,scale:EAt,initialize:gAt,toImageURL:vAt,toCanvas:xAt,toSVG:wAt,getState:CAt,setState:IAt,_watchPixelRatio:OAt});const $At="view",U6="[",z6="]",FCe="{",BCe="}",LAt=":",jCe=",",MAt="@",FAt=">",BAt=/[[\]{}]/,jAt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let UCe,zCe;function C1(e,t,n){return UCe=t||$At,zCe=n||jAt,VCe(e.trim()).map(Bz)}function UAt(e){return zCe[e]}function UA(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function VCe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=UA(e,i,jCe,U6+FCe,z6+BCe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function Bz(e){return e[0]==="["?zAt(e):VAt(e)}function zAt(e){const t=e.length;let n=1,r;if(n=UA(e,n,z6,U6,z6),n===t)throw"Empty between selector: "+e;if(r=VCe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==FAt)throw"Expected '>' after between selector: "+e;r=r.map(Bz);const i=Bz(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function VAt(e){const t={source:UCe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===BCe){if(a=e.lastIndexOf(FCe),a>=0){try{r=HAt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===MAt&&(i=++a),u=UA(e,a,LAt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=UA(e,a,U6),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=UA(e,a,z6),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==U6)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||BAt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):UAt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function HAt(e){const t=e.split(jCe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function qAt(e){return Ut(e)?e:{type:e||"pad"}}const dC=e=>+e||0,WAt=e=>({top:e,bottom:e,left:e,right:e});function GAt(e){return Ut(e)?e.signal?e:{top:dC(e.top),bottom:dC(e.bottom),left:dC(e.left),right:dC(e.right)}:WAt(dC(e))}const zo=e=>Ut(e)&&!at(e)?Wn({},e):{value:e};function gle(e,t,n,r){return n!=null?(Ut(n)&&!at(n)||at(n)&&n.length&&Ut(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Aa(e,t,n){for(const r in t)gle(e,r,t[r]);for(const r in n)gle(e,r,n[r],"update")}function xS(e,t,n){for(const r in t)n&&Kt(n,r)||(e[r]=Wn(e[r]||{},t[r]));return e}function B_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const yQ="mark",vQ="frame",bQ="scope",YAt="axis",KAt="axis-domain",XAt="axis-grid",QAt="axis-label",JAt="axis-tick",ZAt="axis-title",ekt="legend",tkt="legend-band",nkt="legend-entry",rkt="legend-gradient",HCe="legend-label",ikt="legend-symbol",skt="legend-title",okt="title",akt="title-text",ukt="title-subtitle";function lkt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!B_(u,e)&&EB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===vQ?i.group:n===yQ?Wn({},i.mark,i[t]):null;for(u in c)l=B_(u,e)||(u==="fill"||u==="stroke")&&(B_("fill",e)||B_("stroke",e)),l||EB(s,u,c[u]);Vt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)B_(h,e)||EB(s,h,d[h])}),e=Wn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=Wn(o,e.enter),a&&(e.update=Wn(a,e.update)),e}function EB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const qCe=e=>Ht(e)?Ot(e):e.signal?`(${e.signal})`:WCe(e);function HM(e){if(e.gradient!=null)return fkt(e);let t=e.signal?`(${e.signal})`:e.color?ckt(e.color):e.field!=null?WCe(e.field):e.value!==void 0?Ot(e.value):void 0;return e.scale!=null&&(t=dkt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${xO(e.exponent)})`),e.mult!=null&&(t+=`*${xO(e.mult)}`),e.offset!=null&&(t+=`+${xO(e.offset)}`),e.round&&(t=`round(${t})`),t}const WD=(e,t,n,r)=>`(${e}(${[t,n,r].map(HM).join(",")})+'')`;function ckt(e){return e.c?WD("hcl",e.h,e.c,e.l):e.h||e.s?WD("hsl",e.h,e.s,e.l):e.l||e.a?WD("lab",e.l,e.a,e.b):e.r||e.g||e.b?WD("rgb",e.r,e.g,e.b):null}function fkt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Ot(n));for(;t.length&&Sr(t)==null;)t.pop();return t.unshift(qCe(e.gradient)),`gradient(${t.join(",")})`}function xO(e){return Ut(e)?"("+HM(e)+")":e}function WCe(e){return GCe(Ut(e)?e:{datum:e})}function GCe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):st("Invalid field reference: "+Ot(e));return e.signal||(r=Ht(r)?Yp(r).map(Ot).join("]["):GCe(r)),t+"["+r+"]"}function dkt(e,t){const n=qCe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+xO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function hkt(e){let t="";return e.forEach(n=>{const r=HM(n);t+=n.test?`(${n.test})?${r}:`:r}),Sr(t)===":"&&(t+="null"),t}function YCe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=lkt(e,t,n,r,i.config);for(const a in e)o[a]=pkt(e[a],t,s,i);return s}function pkt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=gkt(mkt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function mkt(e){return at(e)?hkt(e):HM(e)}function gkt(e,t,n,r){const i=$p(e,t);return i.$fields.forEach(s=>r[s]=1),Wn(n,i.$params),i.$expr}const ykt="outer",vkt=["value","update","init","react","bind"];function yle(e,t){st(e+' for "outer" push: '+Ot(t))}function KCe(e,t){const n=e.name;if(e.push===ykt)t.signals[n]||yle("No prior signal definition",n),vkt.forEach(r=>{e[r]!==void 0&&yle("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function jz(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function qM(e,t,n,r){return new jz(e,t,n,r)}function V6(e,t){return qM("operator",e,t)}function pn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Gk(e,t){return t?{$field:e,$name:t}:{$field:e}}const Uz=Gk("key");function vle(e,t){return{$compare:e,$order:t}}function bkt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const xkt="ascending",wkt="descending";function _kt(e){return Ut(e)?(e.order===wkt?"-":"+")+WM(e.op,e.field):""}function WM(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const xQ="scope",zz="view";function bo(e){return e&&e.signal}function Ekt(e){return e&&e.expr}function wO(e){if(bo(e))return!0;if(Ut(e)){for(const t in e)if(wO(e[t]))return!0}return!1}function _d(e,t){return e??t}function wb(e){return e&&e.signal||e}const ble="timer";function Yk(e,t){return(e.merge?Skt:e.stream?Ckt:e.type?Akt:st("Invalid stream specification: "+Ot(e)))(e,t)}function Tkt(e){return e===xQ?zz:e||zz}function Skt(e,t){const n=e.merge.map(i=>Yk(i,t)),r=wQ({merge:n},e,t);return t.addStream(r).id}function Ckt(e,t){const n=Yk(e.stream,t),r=wQ({stream:n},e,t);return t.addStream(r).id}function Akt(e,t){let n;e.type===ble?(n=t.event(ble,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Tkt(e.source),e.type);const r=wQ({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function wQ(e,t,n){let r=t.between;return r&&(r.length!==2&&st('Stream "between" parameter must have 2 entries: '+Ot(t)),e.between=[Yk(r[0],n),Yk(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(kkt(t.marktype,t.markname,t.markrole)),t.source===xQ&&r.push("inScope(event.item)"),r.length&&(e.filter=$p("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function kkt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Ikt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Rkt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||st("Signal update missing events specification."),Ht(s)&&(s=C1(s,t.isSubscope()?xQ:zz)),s=Vt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Dkt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&st("Signal encode and update are mutually exclusive."),o="encode(item(),"+Ot(r)+")"),i.update=Ht(o)?$p(o,t):o.expr!=null?$p(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Ikt,$params:{$value:t.signalRef(o.signal)}}:st("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(Wn(Pkt(u,t),i)))}function Pkt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Yk(e,t)}}function Dkt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Nkt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?st("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=$p(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Rkt(i,t,n.id))}const mi=e=>(t,n,r)=>qM(e,n,t||void 0,r),XCe=mi("aggregate"),Okt=mi("axisticks"),QCe=mi("bound"),ah=mi("collect"),xle=mi("compare"),$kt=mi("datajoin"),JCe=mi("encode"),Lkt=mi("expression"),Mkt=mi("facet"),Fkt=mi("field"),Bkt=mi("key"),jkt=mi("legendentries"),Ukt=mi("load"),zkt=mi("mark"),Vkt=mi("multiextent"),Hkt=mi("multivalues"),qkt=mi("overlap"),Wkt=mi("params"),ZCe=mi("prefacet"),Gkt=mi("projection"),Ykt=mi("proxy"),Kkt=mi("relay"),eAe=mi("render"),Xkt=mi("scale"),Nx=mi("sieve"),Qkt=mi("sortitems"),tAe=mi("viewlayout"),Jkt=mi("values");let Zkt=0;const nAe={min:"min",max:"max",count:"sum"};function eIt(e,t){const n=e.type||"linear";UTe(n)||st("Unrecognized scale type: "+Ot(n)),t.addScale(e.name,{type:n,domain:void 0})}function tIt(e,t){const n=t.getScale(e.name).params;let r;n.domain=rAe(e.domain,e,t),e.range!=null&&(n.range=sAe(e,t,n)),e.interpolate!=null&&fIt(e.interpolate,n),e.nice!=null&&(n.nice=cIt(e.nice,t)),e.bins!=null&&(n.bins=lIt(e.bins,t));for(r in e)Kt(n,r)||r==="name"||(n[r]=_f(e[r],t))}function _f(e,t){return Ut(e)?e.signal?t.signalRef(e.signal):st("Unsupported object: "+Ot(e)):e}function _O(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>_f(n,t))}function GM(e){st("Can not find data set: "+Ot(e))}function rAe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&st("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(at(e)?nIt:e.fields?iIt:rIt)(e,t,n)}function nIt(e,t,n){return e.map(r=>_f(r,n))}function rIt(e,t,n){const r=n.getData(e.data);return r||GM(e.data),nT(t.type)?r.valuesRef(n,e.field,iAe(e.sort,!1)):HTe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function iIt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Ht(o)?{data:r,field:o}:at(o)||o.signal?sIt(o,n):o,s.push(o),s),[]);return(nT(t.type)?oIt:HTe(t.type)?aIt:uIt)(e,n,i)}function sIt(e,t){const n="_:vega:_"+Zkt++,r=ah({});if(at(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Ot(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Nx({})]),{data:n,field:"data"}}function oIt(e,t,n){const r=iAe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||GM(l.data),c.countsRef(t,l.field,r)}),a={groupby:Uz,pulse:o};r&&(i=r.op||"count",s=r.field?WM(i,r.field):"count",a.ops=[nAe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(XCe(a));const u=t.add(ah({pulse:pn(i)}));return s=t.add(Jkt({field:Uz,sort:t.sortRef(r),pulse:pn(u)})),pn(s)}function iAe(e,t){return e&&(!e.field&&!e.op?Ut(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?st("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!nAe[e.op]&&st("Multiple domain scales can not be sorted using "+e.op)),e}function aIt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||GM(i.data),s.domainRef(t,i.field)});return pn(t.add(Hkt({values:r})))}function uIt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||GM(i.data),s.extentRef(t,i.field)});return pn(t.add(Vkt({extents:r})))}function lIt(e,t){return e.signal||at(e)?_O(e,t):t.objectProperty(e)}function cIt(e,t){return e.signal?t.signalRef(e.signal):Ut(e)?{interval:_f(e.interval),step:_f(e.step)}:_f(e)}function fIt(e,t){t.interpolate=_f(e.type||e),e.gamma!=null&&(t.interpolateGamma=_f(e.gamma))}function sAe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Ht(i)){if(r&&Kt(r,i))return e=Wn({},e,{range:r[i]}),sAe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=nT(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:st("Unrecognized scale range value: "+Ot(i))}else if(i.scheme){n.scheme=at(i.scheme)?_O(i.scheme,t):_f(i.scheme,t),i.extent&&(n.schemeExtent=_O(i.extent,t)),i.count&&(n.schemeCount=_f(i.count,t));return}else if(i.step){n.rangeStep=_f(i.step,t);return}else{if(nT(e.type)&&!at(i))return rAe(i,e,t);at(i)||st("Unsupported range type: "+Ot(i))}return i.map(s=>(at(s)?_O:_f)(s,t))}function dIt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=Vz(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=Vz(n[i],i,t));t.addProjection(e.name,r)}function Vz(e,t,n){return at(e)?e.map(r=>Vz(r,t,n)):Ut(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:st("Unsupported parameter object: "+Ot(e)):e}const uh="top",wS="left",_S="right",Zy="bottom",oAe="center",hIt="vertical",pIt="start",mIt="middle",gIt="end",Hz="index",_Q="label",yIt="offset",uT="perc",vIt="perc2",Tf="value",bR="guide-label",EQ="guide-title",bIt="group-title",xIt="group-subtitle",wle="symbol",EO="gradient",qz="discrete",Wz="size",wIt="shape",_It="fill",EIt="stroke",TIt="strokeWidth",SIt="strokeDash",CIt="opacity",TQ=[Wz,wIt,_It,EIt,TIt,SIt,CIt],xR={name:1,style:1,interactive:1},Or={value:0},Sf={value:1},YM="group",aAe="rect",SQ="rule",AIt="symbol",Ox="text";function Kk(e){return e.type=YM,e.interactive=e.interactive||!1,e}function Hl(e,t){const n=(r,i)=>_d(e[r],_d(t[r],i));return n.isVertical=r=>hIt===_d(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>_d(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>_d(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>_d(e.columns,_d(t.columns,+n.isVertical(!0))),n}function uAe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function kIt(e,t,n){const r=t.config.style[n];return r&&r[e]}function KM(e,t,n){return`item.anchor === '${pIt}' ? ${e} : item.anchor === '${gIt}' ? ${t} : ${n}`}const CQ=KM(Ot(wS),Ot(_S),Ot(oAe));function IIt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Ut(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function lAe(e,t){return t?e?Ut(e)?Object.assign({},e,{offset:lAe(e.offset,t)}):{value:e,offset:t}:t:e}function Hc(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=xS(e.encode,t,xR)):e.interactive=!1,e}function RIt(e,t,n,r){const i=Hl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Or,x:Or,y:Or,width:zo(f),height:zo(d)},update:Wn({},u,{opacity:Sf,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Or}};return Aa(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Hc({type:aAe,role:rkt,encode:h},r)}function PIt(e,t,n,r,i){const s=Hl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Or,fill:{scale:t,field:Tf}};p[l]={signal:h+"datum."+uT,mult:u},p[c]=Or,p[f]={signal:h+"datum."+vIt,mult:u},p[d]=zo(a);const g={enter:p,update:Wn({},p,{opacity:Sf}),exit:{opacity:Or}};return Aa(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Hc({type:aAe,role:tkt,key:Tf,from:i,encode:g},r)}const DIt=`datum.${uT}<=0?"${wS}":datum.${uT}>=1?"${_S}":"${oAe}"`,NIt=`datum.${uT}<=0?"${Zy}":datum.${uT}>=1?"${uh}":"${mIt}"`;function _le(e,t,n,r){const i=Hl(e,t),s=i.isVertical(),o=zo(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Or},update:c={opacity:Sf,text:{field:_Q}},exit:{opacity:Or}};return Aa(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:_d(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:NIt},f="y",d="x",h="1-"):(l.align=c.align={signal:DIt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+uT,mult:a},l[d]=c[d]=o,o.offset=_d(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+Hz}:void 0,Hc({type:Ox,role:HCe,style:bR,key:Tf,from:r,encode:p,overlap:u},n)}function OIt(e,t,n,r,i){const s=Hl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${yIt} : datum.${Wz}`,h=l?zo(l):{field:Wz},p=`datum.${Hz}`,g=`max(1, ${i})`;let y,x,b,_,E;h.mult=.5,y={enter:x={opacity:Or,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:Sf,x:x.x,y:x.y},exit:{opacity:Or}};let T=null,k=null;e.fill||(T=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),Aa(y,{fill:s("symbolFillColor",T),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",k),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),TQ.forEach(L=>{e[L]&&(b[L]=x[L]={scale:e[L],field:Tf})});const I=Hc({type:AIt,role:ikt,key:Tf,from:f,clip:l?!0:void 0,encode:y},n.symbols),R=zo(c);R.offset=s("labelOffset"),y={enter:x={opacity:Or,x:{signal:d,offset:R},y:h},update:b={opacity:Sf,text:{field:_Q},x:x.x,y:x.y},exit:{opacity:Or}},Aa(y,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const D=Hc({type:Ox,role:HCe,style:bR,key:Tf,from:f,encode:y},n.labels);return y={enter:{noBound:{value:!l},width:Or,height:l?zo(l):Or,opacity:Or},exit:{opacity:Or},update:b={opacity:Sf,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${g})`,b.row.signal=`${p}%${_}`,b.column.signal=`floor(${p} / ${_})`,E={field:["row",p]}):(b.row.signal=`floor(${p} / ${g})`,b.column.signal=`${p} % ${g}`,E={field:p}),b.column.signal=`(${i})?${b.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:Hz}},Kk({role:bQ,from:r,encode:xS(y,o,xR),marks:[I,D],name:u,interactive:a,sort:E})}function $It(e,t){const n=Hl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const AQ='item.orient === "left"',kQ='item.orient === "right"',XM=`(${AQ} || ${kQ})`,LIt=`datum.vgrad && ${XM}`,MIt=KM('"top"','"bottom"','"middle"'),FIt=KM('"right"','"left"','"center"'),BIt=`datum.vgrad && ${kQ} ? (${FIt}) : (${XM} && !(datum.vgrad && ${AQ})) ? "left" : ${CQ}`,jIt=`item._anchor || (${XM} ? "middle" : "start")`,UIt=`${LIt} ? (${AQ} ? -90 : 90) : 0`,zIt=`${XM} ? (datum.vgrad ? (${kQ} ? "bottom" : "top") : ${MIt}) : "top"`;function VIt(e,t,n,r){const i=Hl(e,t),s={enter:{opacity:Or},update:{opacity:Sf,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Or}};return Aa(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:jIt},angle:{signal:UIt},align:{signal:BIt},baseline:{signal:zIt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Hc({type:Ox,role:skt,style:EQ,from:r,encode:s},n)}function HIt(e,t){let n;return Ut(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Ele(e.path)+")":e.sphere&&(n="geoShape("+Ele(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Ele(e){return Ut(e)&&e.signal?e.signal:Ot(e)}function cAe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===YM?bQ:t||yQ}function qIt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||cAe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function WIt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function IQ(e,t){const n=YEe(e.type);n||st("Unrecognized transform type: "+Ot(e.type));const r=qM(n.type.toLowerCase(),null,fAe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function fAe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=GIt(o,t,n)}return r}function GIt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return YIt(e,t,n);if(i===void 0){e.required&&st("Missing required "+Ot(t.type)+" parameter: "+Ot(e.name));return}else{if(r==="param")return KIt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!bo(i)?i.map(s=>Tle(e,s,n)):Tle(e,i,n)}function Tle(e,t,n){const r=e.type;if(bo(t))return Cle(r)?st("Expression references can not be signals."):TB(r)?n.fieldRef(t):Ale(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||TB(r);return i&&XIt(t)?n.exprRef(t.expr,t.as):i&&QIt(t)?Gk(t.field,t.as):Cle(r)?$p(t,n):JIt(r)?pn(n.getData(t).values):TB(r)?Gk(t):Ale(r)?n.compareRef(t):t}}function YIt(e,t,n){return Ht(t.from)||st('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function KIt(e,t,n){const r=t[e.name];return e.array?(at(r)||st("Expected an array of sub-parameters. Instead: "+Ot(r)),r.map(i=>Sle(e,i,n))):Sle(e,r,n)}function Sle(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||st("Unsupported parameter: "+Ot(t));const s=Wn(fAe(i,t,n),i.key);return pn(n.add(Wkt(s)))}const XIt=e=>e&&e.expr,QIt=e=>e&&e.field,JIt=e=>e==="data",Cle=e=>e==="expr",TB=e=>e==="field",Ale=e=>e==="compare";function ZIt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||st("Only group marks can be faceted."),r.field!=null?o=a=TO(r,n):(e.data?a=pn(n.getData(e.data).aggregate):(s=IQ(Wn({type:"aggregate",groupby:Vt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=TO(r,n),o=a=pn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=pn(n.add(ah(null,[{}]))),o||(o=TO(e,n)),{key:i,pulse:o,parent:a}}function TO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:pn(t.getData(e.data).output)}function Wb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Wb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=pn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new Wb(e,s,i,r,o)};function dAe(e){return Ht(e)?e:null}function kle(e,t,n){const r=WM(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function hC(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=_kt(s);let l=dAe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:Uz,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:pn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(qM(r,void 0,d)),o&&(t.index[i]=f),c=pn(f),l!=null&&(a[l]=c)}return c}Wb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=dAe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&kle(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:pn(r.output)},n&&n.field&&kle(e,u,n),a=e.add(XCe(u)),o=e.add(ah({pulse:pn(a)})),o={agg:a,ref:pn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return pn(this.values)},extentRef(e,t){return hC(e,this,"extent","extent",t,!1)},domainRef(e,t){return hC(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return hC(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return hC(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return hC(e,this,"indata","tupleindex",t,!0,!0)}};function eRt(e,t,n){const r=e.from.facet,i=r.name,s=TO(r,t);let o;r.name||st("Facet must have a name: "+Ot(r)),r.data||st("Facet must reference a data set: "+Ot(r)),r.field?o=t.add(ZCe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Mkt({key:t.keyRef(r.groupby),group:pn(t.proxy(n.parent)),pulse:s})):st("Facet must specify groupby or field: "+Ot(r));const a=t.fork(),u=a.add(ah()),l=a.add(Nx({pulse:pn(u)}));a.addData(i,new Wb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function tRt(e,t,n){const r=t.add(ZCe({pulse:n.pulse})),i=t.fork();i.add(Nx()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function hAe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(V6()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=$p(l,t);u.update=c.$expr,u.params=c.$params}function QM(e,t){const n=cAe(e),r=e.type===YM,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===bQ||n===vQ,a,u,l,c,f,d,h;const p=n===yQ||o||i,g=ZIt(e.from,r,t);u=t.add($kt({key:g.key||(e.key?Gk(e.key):void 0),pulse:g.pulse,clean:!r}));const y=pn(u);u=l=t.add(ah({pulse:y})),u=t.add(zkt({markdef:qIt(e),interactive:WIt(e.interactive,t),clip:HIt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:pn(u)}));const x=pn(u);u=c=t.add(JCe(YCe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:x}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const I=IQ(k,t),R=I.metadata;(R.generates||R.changes)&&st("Mark transforms should not generate new data."),R.nomod||(c.params.mod=!0),I.params.pulse=pn(u),t.add(u=I)}),e.sort&&(u=t.add(Qkt({sort:t.compareRef(e.sort),pulse:pn(u)})));const b=pn(u);(i||o)&&(o=t.add(tAe({layout:t.objectProperty(e.layout),legends:t.legends,mark:x,pulse:b})),d=pn(o));const _=t.add(QCe({mark:x,pulse:d||b}));h=pn(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(b,d||h,y),i?eRt(e,t,g):p?tRt(e,t,g):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=nRt(s,h,t));const E=t.add(eAe({pulse:h})),T=t.add(Nx({pulse:pn(E)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Wb(t,l,E,T)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&st("Marks only support modify triggers."),hAe(k,t,f)}))}function nRt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:bo(s)?n.signalRef(s.signal):s,method:bo(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=bo(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return pn(n.add(qkt(o)))}function rRt(e,t){const n=t.config.legend,r=e.encode||{},i=Hl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;TQ.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||st("Missing valid scale for legend.");const p=iRt(e,t.scaleType(c)),g={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},y=pn(t.add(ah(null,[g]))),x={enter:{x:{value:0},y:{value:0}}},b=pn(t.add(jkt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===EO?(h=[RIt(e,c,n,r.gradient),_le(e,n,r.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${wb(i.gradientLength())})/100))`)):p===qz?h=[PIt(e,c,n,r.gradient,b),_le(e,n,r.labels,b)]:(f=$It(e,n),h=[OIt(e,n,r,b,wb(f.columns))],d.size=aRt(e,t,h[0].marks)),h=[Kk({role:nkt,from:y,encode:x,marks:h,layout:f,interactive:a})],g.title&&h.push(VIt(e,n,r.title,y)),QM(Kk({role:ekt,from:y,encode:xS(oRt(i,e,n),s,xR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function iRt(e,t){let n=e.type||wle;return!e.type&&sRt(e)===1&&(e.fill||e.stroke)&&(n=jK(t)?EO:az(t)?qz:wle),n!==EO?n:az(t)?qz:EO}function sRt(e){return TQ.reduce((t,n)=>t+(e[n]?1:0),0)}function oRt(e,t,n){const r={enter:{},update:{}};return Aa(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function aRt(e,t,n){const r=wb(Ile("size",e,n)),i=wb(Ile("strokeWidth",e,n)),s=wb(uRt(n[1].encode,t,bR));return $p(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Ile(e,t,n){return t[e]?`scale("${t[e]}",datum)`:uAe(e,n[0].encode)}function uRt(e,t,n){return uAe("fontSize",e)||kIt("fontSize",t,n)}const lRt=`item.orient==="${wS}"?-90:item.orient==="${_S}"?90:0`;function cRt(e,t){e=Ht(e)?{text:e}:e;const n=Hl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=pn(t.add(ah(null,[l])));return u.push(hRt(e,n,fRt(e),c)),e.subtitle&&u.push(pRt(e,n,r.subtitle,c)),QM(Kk({role:okt,from:c,encode:dRt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function fRt(e){const t=e.encode;return t&&t.title||Wn({name:e.name,interactive:e.interactive,style:e.style},t)}function dRt(e,t){const n={enter:{},update:{}};return Aa(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:CQ},angle:{signal:lRt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),xS(n,t,xR)}function hRt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Aa(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Hc({type:Ox,role:akt,style:bIt,from:r,encode:o},n)}function pRt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Aa(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Hc({type:Ox,role:ukt,style:xIt,from:r,encode:o},n)}function mRt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(IQ(r,t))}),e.on&&e.on.forEach(r=>{hAe(r,t,e.name)}),t.addDataPipeline(e.name,gRt(e,t,n))}function gRt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?bo(e.values)||wO(e.format)?(r.push(Rle(t,e)),r.push(i=Tv())):r.push(i=Tv({$ingest:e.values,$format:e.format})):e.url?wO(e.url)||wO(e.format)?(r.push(Rle(t,e)),r.push(i=Tv())):r.push(i=Tv({$request:e.url,$format:e.format})):e.source&&(i=a=Vt(e.source).map(d=>pn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Tv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=Kkt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Tv())),i||r.push(Tv()),r.push(Nx({})),r}function Tv(e){const t=ah({},e);return t.metadata={source:!0},t}function Rle(e,t){return Ukt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const pAe=e=>e===Zy||e===uh,JM=(e,t,n)=>bo(e)?xRt(e.signal,t,n):e===wS||e===uh?t:n,Vo=(e,t,n)=>bo(e)?vRt(e.signal,t,n):pAe(e)?t:n,Ud=(e,t,n)=>bo(e)?bRt(e.signal,t,n):pAe(e)?n:t,mAe=(e,t,n)=>bo(e)?wRt(e.signal,t,n):e===uh?{value:t}:{value:n},yRt=(e,t,n)=>bo(e)?_Rt(e.signal,t,n):e===_S?{value:t}:{value:n},vRt=(e,t,n)=>gAe(`${e} === '${uh}' || ${e} === '${Zy}'`,t,n),bRt=(e,t,n)=>gAe(`${e} !== '${uh}' && ${e} !== '${Zy}'`,t,n),xRt=(e,t,n)=>RQ(`${e} === '${wS}' || ${e} === '${uh}'`,t,n),wRt=(e,t,n)=>RQ(`${e} === '${uh}'`,t,n),_Rt=(e,t,n)=>RQ(`${e} === '${_S}'`,t,n),gAe=(e,t,n)=>(t=t!=null?zo(t):t,n=n!=null?zo(n):n,Ple(t)&&Ple(n)?(t=t?t.signal||Ot(t.value):null,n=n?n.signal||Ot(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Wn({test:e},t)].concat(n||[])),Ple=e=>e==null||Object.keys(e).length===1,RQ=(e,t,n)=>({signal:`${e} ? (${Q_(t)}) : (${Q_(n)})`}),ERt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${wS}' ? (${Q_(r)}) : `:"")+(n!=null?`${e} === '${Zy}' ? (${Q_(n)}) : `:"")+(i!=null?`${e} === '${_S}' ? (${Q_(i)}) : `:"")+(t!=null?`${e} === '${uh}' ? (${Q_(t)}) : `:"")+"(null)"}),Q_=e=>bo(e)?e.signal:e==null?null:Ot(e),TRt=(e,t)=>t===0?0:bo(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},gE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function w_(e,t,n,r){let i;if(t&&Kt(t,e))return t[e];if(Kt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[EQ][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[bR][i]}return null}function Dle(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function SRt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(bo(o)){const f=Dle([n.axisX,n.axisY]),d=Dle([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Vo(o,w_(l,n.axisX,i,r),w_(l,n.axisY,i,r));u={};for(l of d)u[l]=ERt(o.signal,w_(l,n.axisTop,i,r),w_(l,n.axisBottom,i,r),w_(l,n.axisLeft,i,r),w_(l,n.axisRight,i,r))}else a=o===uh||o===Zy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Wn({},i,a,u,s):i}function CRt(e,t,n,r){const i=Hl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Or},update:a={opacity:Sf},exit:{opacity:Or}};Aa(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Nle(e,0),c=Nle(e,1);return o.x=a.x=Vo(s,l,Or),o.x2=a.x2=Vo(s,c),o.y=a.y=Ud(s,l,Or),o.y2=a.y2=Ud(s,c),Hc({type:SQ,role:KAt,from:r,encode:u},n)}function Nle(e,t){return{scale:e.scale,range:t}}function ARt(e,t,n,r,i){const s=Hl(e,t),o=e.orient,a=e.gridScale,u=JM(o,1,-1),l=kRt(e.offset,u);let c,f,d;const h={enter:c={opacity:Or},update:d={opacity:Sf},exit:f={opacity:Or}};Aa(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Tf,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=Vo(o,{signal:"height"},{signal:"width"}),y=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},x=a?{scale:a,range:1,mult:u,offset:l}:Wn(g,{mult:u,offset:l});return c.x=d.x=Vo(o,p,y),c.y=d.y=Ud(o,p,y),c.x2=d.x2=Ud(o,x),c.y2=d.y2=Vo(o,x),f.x=Vo(o,p),f.y=Ud(o,p),Hc({type:SQ,role:XAt,key:Tf,from:r,encode:h},n)}function kRt(e,t){if(t!==1)if(!Ut(e))e=bo(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Wn({},e);for(;n.mult!=null;)if(Ut(n.mult))n=n.mult=Wn({},n.mult);else return n.mult=bo(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function IRt(e,t,n,r,i,s){const o=Hl(e,t),a=e.orient,u=JM(a,-1,1);let l,c,f;const d={enter:l={opacity:Or},update:f={opacity:Sf},exit:c={opacity:Or}};Aa(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=zo(i);h.mult=u;const p={scale:e.scale,field:Tf,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Vo(a,Or,p),f.y2=l.y2=Vo(a,h),c.x=Vo(a,p),f.x=l.x=Ud(a,Or,p),f.x2=l.x2=Ud(a,h),c.y=Ud(a,p),Hc({type:SQ,role:JAt,key:Tf,from:r,encode:d},n)}function SB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function RRt(e,t,n,r,i,s){const o=Hl(e,t),a=e.orient,u=e.scale,l=JM(a,-1,1),c=wb(o("labelFlush")),f=wb(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,g;const y=zo(i);y.mult=l,y.offset=zo(o("labelPadding")||0),y.offset.mult=l;const x={scale:u,field:Tf,band:.5,offset:lAe(s.offset,o("labelOffset"))},b=Vo(a,p?SB(u,c,'"left"','"right"','"center"'):{value:"center"},yRt(a,"left","right")),_=Vo(a,mAe(a,"bottom","top"),p?SB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),E=SB(u,c,`-(${f})`,f,0);p=p&&f;const T={opacity:Or,x:Vo(a,x,y),y:Ud(a,x,y)},k={enter:T,update:g={opacity:Sf,text:{field:_Q},x:T.x,y:T.y,align:b,baseline:_},exit:{opacity:Or,x:T.x,y:T.y}};Aa(k,{dx:!d&&p?Vo(a,E):null,dy:!h&&p?Ud(a,E):null}),Aa(k,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const I=o("labelBound");let R=o("labelOverlap");return R=R||I?{separation:o("labelSeparation"),method:R,order:"datum.index",bound:I?{scale:u,orient:a,tolerance:I}:null}:void 0,g.align!==b&&(g.align=gE(g.align,b)),g.baseline!==_&&(g.baseline=gE(g.baseline,_)),Hc({type:Ox,role:QAt,style:bR,key:Tf,from:r,encode:k,overlap:R},n)}function PRt(e,t,n,r){const i=Hl(e,t),s=e.orient,o=JM(s,-1,1);let a,u;const l={enter:a={opacity:Or,anchor:zo(i("titleAnchor",null)),align:{signal:CQ}},update:u=Wn({},a,{opacity:Sf,text:zo(e.title)}),exit:{opacity:Or}},c={signal:`lerp(range("${e.scale}"), ${KM(0,1,.5)})`};return u.x=Vo(s,c),u.y=Ud(s,c),a.angle=Vo(s,Or,TRt(o,90)),a.baseline=Vo(s,mAe(s,Zy,uh),{value:Zy}),u.angle=a.angle,u.baseline=a.baseline,Aa(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),DRt(i,s,l,n),l.update.align=gE(l.update.align,a.align),l.update.angle=gE(l.update.angle,a.angle),l.update.baseline=gE(l.update.baseline,a.baseline),Hc({type:Ox,role:ZAt,style:EQ,from:r,encode:l},n)}function DRt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=gE(zo(a),n.update[u]),!1):!B_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?zo(o):Vo(t,zo(o),zo(s))}function NRt(e,t){const n=SRt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Hl(e,n),l=IIt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=pn(t.add(ah({},[c]))),d=pn(t.add(Okt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(ARt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(IRt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(RRt(e,n,r.labels,d,p,l))),c.domain&&h.push(CRt(e,n,r.domain,f)),c.title&&h.push(PRt(e,n,r.title,f)),QM(Kk({role:YAt,from:f,encode:xS(ORt(u,e),i,xR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function ORt(e,t){const n={enter:{},update:{}};return Aa(n,{orient:e("orient"),offset:e("offset")||0,position:_d(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function yAe(e,t,n){const r=Vt(e.signals),i=Vt(e.scales);return n||r.forEach(s=>KCe(s,t)),Vt(e.projections).forEach(s=>dIt(s,t)),i.forEach(s=>eIt(s,t)),Vt(e.data).forEach(s=>mRt(s,t)),i.forEach(s=>tIt(s,t)),(n||r).forEach(s=>Nkt(s,t)),Vt(e.axes).forEach(s=>NRt(s,t)),Vt(e.marks).forEach(s=>QM(s,t)),Vt(e.legends).forEach(s=>rRt(s,t)),e.title&&cRt(e.title,t),t.parseLambdas(),t}const $Rt=e=>xS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function LRt(e,t){const n=t.config,r=pn(t.root=t.add(V6())),i=MRt(e,n);i.forEach(l=>KCe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(ah()),o=t.add(JCe(YCe($Rt(e.encode),YM,vQ,e.style,t,{pulse:pn(s)}))),a=t.add(tAe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:pn(o)}));t.operators.pop(),t.pushState(pn(o),pn(a),null),yAe(e,t,i),t.operators.push(a);let u=t.add(QCe({mark:r,pulse:pn(a)}));return u=t.add(eAe({pulse:pn(u)})),u=t.add(Nx({pulse:pn(u)})),t.addData("root",new Wb(t,s,s,u)),t}function pC(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function MRt(e,t){const n=o=>_d(e[o],t[o]),r=[pC("background",n("background")),pC("autosize",qAt(n("autosize"))),pC("padding",GAt(n("padding"))),pC("width",n("width")||0),pC("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Vt(e.signals).forEach(o=>{Kt(i,o.name)?o=Wn(i[o.name],o):r.push(o),s[o.name]=o}),Vt(t.signals).forEach(o=>{!Kt(s,o.name)&&!Kt(i,o.name)&&r.push(o)}),r}function vAe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Ole(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}vAe.prototype=Ole.prototype={parse(e){return yAe(e,this)},fork(){return new Ole(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof jz?pn(e):e;return this.add(Ykt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(pn(this.add(Nx({pulse:e})))),this._parent.push(t),this._lookup.push(n?pn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Sr(this._parent)},encode(){return Sr(this._encode)},lookup(){return Sr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Ht(e))return Gk(e,t);e.signal||st("Unsupported field reference: "+Ot(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=pn(this.add(Fkt(i)))}return r},compareRef(e){let t=!1;const n=s=>bo(s)?(t=!0,this.signalRef(s.signal)):Ekt(s)?(t=!0,this.exprRef(s.expr)):s,r=Vt(e.field).map(n),i=Vt(e.order).map(n);return t?pn(this.add(xle({fields:r,orders:i}))):vle(r,i)},keyRef(e,t){let n=!1;const r=s=>bo(s)?(n=!0,pn(i[s.signal])):s,i=this.signals;return e=Vt(e).map(r),n?pn(this.add(Bkt({fields:e,flat:t}))):bkt(e,t)},sortRef(e){if(!e)return e;const t=WM(e.op,e.field),n=e.order||xkt;return n.signal?pn(this.add(xle({fields:t,orders:this.signalRef(n.signal)}))):vle(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Kt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&st("Duplicate signal name: "+Ot(e));const n=t instanceof jz?t:this.add(V6(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||st("Unrecognized signal name: "+Ot(e)),this.signals[e]},signalRef(e){return this.signals[e]?pn(this.signals[e]):(Kt(this.lambdas,e)||(this.lambdas[e]=this.add(V6(null))),pn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=$p(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ut(e)?e:this.signalRef(e.signal||PQ(e))},exprRef(e,t){const n={expr:$p(e,this)};return t&&(n.expr.$name=t),pn(this.add(Lkt(n)))},addBinding(e,t){this.bindings||st("Nested signals do not support binding: "+Ot(e)),this.bindings.push(Wn({signal:e},t))},addScaleProj(e,t){Kt(this.scales,e)&&st("Duplicate scale or projection name: "+Ot(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Xkt(t))},addProjection(e,t){this.addScaleProj(e,Gkt(t))},getScale(e){return this.scales[e]||st("Unrecognized scale name: "+Ot(e)),this.scales[e]},scaleRef(e){return pn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Kt(this.data,e)&&st("Duplicate data set name: "+Ot(e)),this.data[e]=t},getData(e){return this.data[e]||st("Undefined data set name: "+Ot(e)),this.data[e]},addDataPipeline(e,t){return Kt(this.data,e)&&st("Duplicate data set name: "+Ot(e)),this.addData(e,Wb.fromEntries(this,t))}};function PQ(e){return(at(e)?FRt:BRt)(e)}function FRt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Ut(i)?i.signal||PQ(i):Ot(i))}return n+"]"}function BRt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Ot(r)+":"+(Ut(i)?i.signal||PQ(i):Ot(i));return t+"}"}function jRt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function URt(e,t,n){return Ut(e)||st("Input Vega specification must be an object."),t=dS(jRt(),t,e.config),LRt(e,new vAe(t,n)).toRuntime()}var zRt="5.30.0";Wn(ZE,Pvt,b_t,Q_t,kEt,$Et,uTt,UEt,cTt,pTt,TTt,PTt);const VRt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:eo,CanvasHandler:pR,CanvasRenderer:P6,DATE:Fl,DAY:Ja,DAYOFYEAR:Op,Dataflow:mE,Debug:z_e,Error:SY,EventStream:pM,Gradient:sSe,GroupItem:AM,HOURS:Uc,Handler:fX,HybridHandler:XSe,HybridRenderer:vz,Info:U_e,Item:CM,MILLISECONDS:Kd,MINUTES:zc,MONTH:iu,Marks:Vc,MultiPulse:qY,None:j_e,Operator:Ei,Parameters:hM,Pulse:Cy,QUARTER:Ml,RenderType:dy,Renderer:hR,ResourceLoader:dSe,SECONDS:Rf,SVGHandler:MSe,SVGRenderer:yX,SVGStringRenderer:KSe,Scenegraph:ISe,TIME_UNITS:MY,Transform:Je,View:LCe,WEEK:po,Warn:CY,YEAR:Ea,accessor:Vl,accessorFields:ru,accessorName:xs,array:Vt,ascending:aM,bandwidthNRD:KY,bin:QEe,bootstrapCI:JEe,boundClip:o2e,boundContext:lR,boundItem:hz,boundMark:SSe,boundStroke:Y0,changeset:Rx,clampRange:Z_e,codegenExpression:uCe,compare:PY,constant:cu,cumulativeLogNormal:tK,cumulativeNormal:gM,cumulativeUniform:sK,dayofyear:fEe,debounce:DY,defaultLocale:jY,definition:YEe,densityLogNormal:eK,densityNormal:XY,densityUniform:iK,domChild:fo,domClear:vf,domCreate:cy,domFind:cX,dotbin:ZEe,error:st,expressionFunction:Us,extend:Wn,extent:Np,extentIndex:eEe,falsy:Hg,fastmap:pS,field:kf,flush:tEe,font:DM,fontFamily:dR,fontSize:Kp,format:sO,formatLocale:v6,formats:VY,hasOwnProperty:Kt,id:QI,identity:lu,inferType:MEe,inferTypes:FEe,ingest:Kr,inherits:Mt,inrange:Y_,interpolate:UK,interpolateColors:TM,interpolateRange:qTe,intersect:n2e,intersectBoxLine:K_,intersectPath:KK,intersectPoint:XK,intersectRule:pSe,isArray:at,isBoolean:T1,isDate:Sy,isFunction:Gn,isIterable:nEe,isNumber:Vr,isObject:Ut,isRegExp:rEe,isString:Ht,isTuple:fM,key:NY,lerp:iEe,lineHeight:Xy,loader:lM,locale:$Ee,logger:AY,lruCache:sEe,markup:gX,merge:oEe,mergeConfig:dS,multiLineOffset:aX,one:fS,pad:aEe,panLinear:G_e,panLog:Y_e,panPow:K_e,panSymlog:X_e,parse:URt,parseExpression:iQ,parseSelector:C1,path:ML,pathCurves:WK,pathEqual:a2e,pathParse:rT,pathRectangle:uSe,pathRender:Bk,pathSymbols:aSe,pathTrail:lSe,peek:Sr,point:OM,projection:IX,quantileLogNormal:nK,quantileNormal:yM,quantileUniform:oK,quantiles:GY,quantizeInterpolator:WTe,quarter:Q_e,quartiles:YY,get random(){return Pf},randomInteger:$1t,randomKDE:JY,randomLCG:O1t,randomLogNormal:tTe,randomMixture:nTe,randomNormal:QY,randomUniform:rTe,read:UEe,regressionConstant:aK,regressionExp:sTe,regressionLinear:uK,regressionLoess:uTe,regressionLog:iTe,regressionPoly:aTe,regressionPow:oTe,regressionQuad:lK,renderModule:$M,repeat:XC,resetDefaultLocale:Pyt,resetSVGClipId:fSe,resetSVGDefIds:Mwt,responseType:jEe,runtimeContext:ECe,sampleCurve:bM,sampleLogNormal:ZY,sampleNormal:mM,sampleUniform:rK,scale:Hr,sceneEqual:vX,sceneFromJSON:ASe,scenePickVisit:E6,sceneToJSON:CSe,sceneVisit:Xd,sceneZOrder:QK,scheme:zK,serializeXML:qSe,setHybridRendererOptions:Nwt,setRandom:D1t,span:JI,splitAccessPath:Yp,stringValue:Ot,textMetrics:Rc,timeBin:kEe,timeFloor:vEe,timeFormatLocale:Lk,timeInterval:mS,timeOffset:wEe,timeSequence:TEe,timeUnitSpecifier:cEe,timeUnits:FY,toBoolean:OY,toDate:$Y,toNumber:tu,toSet:Yd,toString:LY,transform:KEe,transforms:ZE,truncate:uEe,truthy:If,tupleid:mn,typeParsers:iz,utcFloor:bEe,utcInterval:gS,utcOffset:_Ee,utcSequence:SEe,utcdayofyear:pEe,utcquarter:J_e,utcweek:mEe,version:zRt,visitArray:Kg,week:dEe,writeConfig:hS,zero:oy,zoomLinear:kY,zoomLog:IY,zoomPow:y6,zoomSymlog:RY},Symbol.toStringTag,{value:"Module"}));function HRt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var qRt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},WRt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},GRt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const YRt=Array.prototype.slice,Sv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,YRt.call(t,1))},KRt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var XRt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:KRt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Sv("join",arguments)},indexof:function(){return Sv("indexOf",arguments)},lastindexof:function(){return Sv("lastIndexOf",arguments)},slice:function(){return Sv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Sv("substring",arguments,String)},split:function(){return Sv("split",arguments,String)},replace:function(){return Sv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const QRt=["view","item","group","xy","x","y"],Gz=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&Gz.add(setImmediate);const JRt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:qRt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),Gz.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||XRt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>WRt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>GRt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,Gz.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function mC(e,t,n,r,i,s){const o=a=>JRt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,QRt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var ZRt={operator(e,t){const n=t.ast,r=e.functions;return i=>mC(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>mC(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>mC(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return mC(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=mC(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&HRt(o,r,s),l}}};const ePt="vega-lite",tPt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',nPt="5.23.0",rPt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],iPt="https://vega.github.io/vega-lite/",sPt="Vega-Lite is a concise high-level language for interactive visualization.",oPt=["vega","chart","visualization"],aPt="build/vega-lite.js",uPt="build/vega-lite.min.js",lPt="build/vega-lite.min.js",cPt="build/src/index",fPt="build/src/index.d.ts",dPt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},hPt=["bin","build","src","vega-lite*","tsconfig.json"],pPt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},mPt={type:"git",url:"https://github.com/vega/vega-lite.git"},gPt="BSD-3-Clause",yPt={url:"https://github.com/vega/vega-lite/issues"},vPt={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},bPt={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},xPt={vega:"^5.24.0"},wPt={node:">=18"},_Pt="yarn@1.22.22",EPt={name:ePt,author:tPt,version:nPt,collaborators:rPt,homepage:iPt,description:sPt,keywords:oPt,main:aPt,unpkg:uPt,jsdelivr:lPt,module:cPt,types:fPt,bin:dPt,files:hPt,scripts:pPt,repository:mPt,license:gPt,bugs:yPt,devDependencies:vPt,dependencies:bPt,peerDependencies:xPt,engines:wPt,packageManager:_Pt};function DQ(e){return Ct(e,"or")}function NQ(e){return Ct(e,"and")}function OQ(e){return Ct(e,"not")}function SO(e,t){if(OQ(e))SO(e.not,t);else if(NQ(e))for(const n of e.and)SO(n,t);else if(DQ(e))for(const n of e.or)SO(n,t);else t(e)}function yE(e,t){return OQ(e)?{not:yE(e.not,t)}:NQ(e)?{and:e.and.map(n=>yE(n,t))}:DQ(e)?{or:e.or.map(n=>yE(n,t))}:t(e)}const Dn=structuredClone;function bAe(e){throw new Error(e)}function lT(e,t){const n={};for(const r of t)Kt(e,r)&&(n[r]=e[r]);return n}function Nl(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>hi(e)).join(",")})`};function gr(e){if(Vr(e))return e;const t=Ht(e)?e:hi(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function Yz(e){return e===!1||e===null}function ar(e,t){return e.includes(t)}function cT(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function $Q(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function xAe(e,...t){for(const n of t)TPt(e,n??{});return e}function TPt(e,t){for(const n of _t(t))hS(e,n,t[n],!0)}function sp(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function SPt(e,t){const n=_t(e),r=_t(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function wAe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function LQ(e,t){for(const n of e)if(t.has(n))return!0;return!1}function Kz(e){const t=new Set;for(const n of e){const i=Yp(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function MQ(e,t){return e===void 0||t===void 0?!0:LQ(Kz(e),Kz(t))}function di(e){return _t(e).length===0}const _t=Object.keys,Ta=Object.values,e1=Object.entries;function Xk(e){return e===!0||e===!1}function Yi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function zA(e,t){return OQ(e)?`!(${zA(e.not,t)})`:NQ(e)?`(${e.and.map(n=>zA(n,t)).join(") && (")})`:DQ(e)?`(${e.or.map(n=>zA(n,t)).join(") || (")})`:t(e)}function H6(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&H6(e[n],t)&&delete e[n],di(e)}function wR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function FQ(e,t="datum"){const n=Yp(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Ot).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function _Ae(e,t="datum"){return`${t}[${Ot(Yp(e).join("."))}]`}function ii(e){return`datum['${e.replaceAll("'","\\'")}']`}function CPt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Df(e){return`${Yp(e).map(CPt).join("\\.")}`}function Gb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function ES(e){return`${Yp(e).join(".")}`}function fT(e){return e?Yp(e).length:0}function Bs(...e){return e.find(t=>t!==void 0)}let EAe=42;function TAe(e){const t=++EAe;return e?String(e)+t:t}function APt(){EAe=42}function SAe(e){return CAe(e)?e:`__${e}`}function CAe(e){return e.startsWith("__")}function Qk(e){if(e!==void 0)return(e%360+360)%360}function ZM(e){return Vr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const $le=Object.getPrototypeOf(structuredClone({}));function Cc(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Cc(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Cc(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==$le.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==$le.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Cc(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function hi(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}function Ct(e,t){return Ut(e)&&Kt(e,t)&&e[t]!==void 0}const y0="row",v0="column",e5="facet",Xi="x",Xo="y",lh="x2",Zp="y2",A1="xOffset",TS="yOffset",ch="radius",X0="radius2",Vf="theta",Q0="theta2",fh="latitude",dh="longitude",hh="latitude2",Nf="longitude2",k1="time",Bl="color",em="fill",tm="stroke",jl="shape",J0="size",$x="angle",Z0="opacity",I1="fillOpacity",R1="strokeOpacity",P1="strokeWidth",D1="strokeDash",_R="text",dT="order",ER="detail",t5="key",Yb="tooltip",n5="href",r5="url",i5="description",kPt={x:1,y:1,x2:1,y2:1},AAe={theta:1,theta2:1,radius:1,radius2:1};function kAe(e){return Kt(AAe,e)}const BQ={longitude:1,longitude2:1,latitude:1,latitude2:1};function IAe(e){switch(e){case fh:return"y";case hh:return"y2";case dh:return"x";case Nf:return"x2"}}function RAe(e){return Kt(BQ,e)}const IPt=_t(BQ),jQ={...kPt,...AAe,...BQ,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function vE(e){return e===Bl||e===em||e===tm}const PAe={row:1,column:1,facet:1},Ef=_t(PAe),UQ={...jQ,...PAe},RPt=_t(UQ),{order:SBt,detail:CBt,tooltip:ABt,...PPt}=UQ,{row:kBt,column:IBt,facet:RBt,...DPt}=PPt;function NPt(e){return Kt(DPt,e)}function DAe(e){return Kt(UQ,e)}const OPt=[lh,Zp,hh,Nf,Q0,X0];function NAe(e){return Lx(e)!==e}function Lx(e){switch(e){case lh:return Xi;case Zp:return Xo;case hh:return fh;case Nf:return dh;case Q0:return Vf;case X0:return ch}return e}function t1(e){if(kAe(e))switch(e){case Vf:return"startAngle";case Q0:return"endAngle";case ch:return"outerRadius";case X0:return"innerRadius"}return e}function nm(e){switch(e){case Xi:return lh;case Xo:return Zp;case fh:return hh;case dh:return Nf;case Vf:return Q0;case ch:return X0}}function Ul(e){switch(e){case Xi:case lh:return"width";case Xo:case Zp:return"height"}}function OAe(e){switch(e){case Xi:return"xOffset";case Xo:return"yOffset";case lh:return"x2Offset";case Zp:return"y2Offset";case Vf:return"thetaOffset";case ch:return"radiusOffset";case Q0:return"theta2Offset";case X0:return"radius2Offset"}}function zQ(e){switch(e){case Xi:return"xOffset";case Xo:return"yOffset"}}function $Pt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const LPt=_t(jQ),{x:PBt,y:DBt,x2:NBt,y2:OBt,xOffset:$Bt,yOffset:LBt,latitude:MBt,longitude:FBt,latitude2:BBt,longitude2:jBt,theta:UBt,theta2:zBt,radius:VBt,radius2:HBt,...VQ}=jQ,MPt=_t(VQ),HQ={x:1,y:1},eg=_t(HQ);function js(e){return Kt(HQ,e)}const qQ={theta:1,radius:1},FPt=_t(qQ);function s5(e){return e==="width"?Xi:Xo}const $Ae={xOffset:1,yOffset:1};function TR(e){return Kt($Ae,e)}const BPt={time:1};function CB(e){return e in BPt}const{text:qBt,tooltip:WBt,href:GBt,url:YBt,description:KBt,detail:XBt,key:QBt,order:JBt,...LAe}=VQ,jPt=_t(LAe);function UPt(e){return Kt(VQ,e)}function zPt(e){switch(e){case Bl:case em:case tm:case J0:case jl:case Z0:case P1:case D1:return!0;case I1:case R1:case $x:case k1:return!1}}const MAe={...HQ,...qQ,...$Ae,...LAe},WQ=_t(MAe);function rm(e){return Kt(MAe,e)}function VPt(e,t){return qPt(e)[t]}const FAe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:ZBt,...HPt}=FAe;function qPt(e){switch(e){case Bl:case em:case tm:case i5:case ER:case t5:case Yb:case n5:case dT:case Z0:case I1:case R1:case P1:case e5:case y0:case v0:return FAe;case Xi:case Xo:case A1:case TS:case fh:case dh:case k1:return HPt;case lh:case Zp:case hh:case Nf:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case J0:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case D1:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case jl:return{point:"always",geoshape:"always"};case _R:return{text:"always"};case $x:return{point:"always",square:"always",text:"always"};case r5:return{image:"always"};case Vf:return{text:"always",arc:"always"};case ch:return{text:"always",arc:"always"};case Q0:case X0:return{arc:"always"}}}function AB(e){switch(e){case Xi:case Xo:case Vf:case ch:case A1:case TS:case J0:case $x:case P1:case Z0:case I1:case R1:case k1:case lh:case Zp:case Q0:case X0:return;case e5:case y0:case v0:case jl:case D1:case _R:case Yb:case n5:case r5:case i5:return"discrete";case Bl:case em:case tm:return"flexible";case fh:case dh:case hh:case Nf:case ER:case t5:case dT:return}}const WPt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},GPt={count:1,min:1,max:1};function B0(e){return Ct(e,"argmin")}function N1(e){return Ct(e,"argmax")}function GQ(e){return Ht(e)&&Kt(WPt,e)}const YPt=new Set(["count","valid","missing","distinct"]);function o5(e){return Ht(e)&&YPt.has(e)}function KPt(e){return Ht(e)&&ar(["min","max"],e)}const XPt=new Set(["count","sum","distinct","valid","missing"]),QPt=new Set(["mean","average","median","q1","q3","min","max"]);function BAe(e){return T1(e)&&(e=v5(e,void 0)),"bin"+_t(e).map(t=>a5(e[t])?Yi(`_${t}_${e1(e[t])}`):Yi(`_${t}_${e[t]}`)).join("")}function Pi(e){return e===!0||Mx(e)&&!e.binned}function ha(e){return e==="binned"||Mx(e)&&e.binned===!0}function Mx(e){return Ut(e)}function a5(e){return Ct(e,"param")}function Lle(e){switch(e){case y0:case v0:case J0:case Bl:case em:case tm:case P1:case Z0:case I1:case R1:case jl:return 6;case D1:return 4;default:return 10}}function SR(e){return Ct(e,"expr")}function pa(e,{level:t}={level:0}){const n=_t(e||{}),r={};for(const i of n)r[i]=t===0?xc(e[i]):pa(e[i],{level:t-1});return r}function jAe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,y={...g,...a?{fill:a}:{}},x={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},b={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=lT(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:y,subtitleMarkConfig:_,nonMarkTitleProperties:x,subtitle:b}}function Jg(e){return Ht(e)||at(e)&&Ht(e[0])}function cn(e){return Ct(e,"signal")}function Fx(e){return Ct(e,"step")}function JPt(e){return at(e)?!1:Ct(e,"fields")&&!Ct(e,"data")}function ZPt(e){return at(e)?!1:Ct(e,"fields")&&Ct(e,"data")}function a0(e){return at(e)?!1:Ct(e,"field")&&Ct(e,"data")}const eDt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},tDt=_t(eDt),nDt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Xz=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function UAe(e){const t=at(e.condition)?e.condition.map(Mle):Mle(e.condition);return{...xc(e),condition:t}}function xc(e){if(SR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Mle(e){if(SR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function ji(e){if(SR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return cn(e)?e:e!==void 0?{value:e}:void 0}function rDt(e){return cn(e)?e.signal:Ot(e)}function Fle(e){return cn(e)?e.signal:Ot(e.value)}function Od(e){return cn(e)?e.signal:e==null?null:Ot(e)}function iDt(e,t,n){for(const r of n){const i=Lp(r,t.markDef,t.config);i!==void 0&&(e[r]=ji(i))}return e}function zAe(e){return[].concat(e.type,e.style??[])}function fi(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&Ct(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Lp(e,t,n,r)}function Lp(e,t,n,{vgChannel:r}={}){const i=Qz(e,t,n.style);return Bs(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function Qz(e,t,n){return VAe(e,zAe(t),n)}function VAe(e,t,n){t=Vt(t);let r;for(const i of t){const s=n[i];Ct(s,e)&&(r=s[e])}return r}function HAe(e,t){return Vt(e).reduce((n,r)=>(n.field.push(jt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function qAe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Cc(i,r))return;n.push(r)}),n}function WAe(e,t){return Cc(e,t)||!t?e:e?[...Vt(e),...Vt(t)].join(", "):t}function GAe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Jg(n)||cn(n))&&(Jg(r)||cn(r)))return{explicit:e.explicit,value:WAe(n,r)};if(Jg(n)||cn(n))return{explicit:e.explicit,value:n};if(Jg(r)||cn(r))return{explicit:e.explicit,value:r};if(!Jg(n)&&!cn(n)&&!Jg(r)&&!cn(r))return{explicit:e.explicit,value:qAe(n,r)};throw new Error("It should never reach here")}function YQ(e){return`Invalid specification ${hi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const sDt='Autosize "fit" only works for single views and layered views.';function Ble(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function jle(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Ule(e){return e?`Dropping "fit-${e}" because spec has discrete ${Ul(e)}.`:'Dropping "fit" because spec has discrete size.'}function KQ(e){return`Unknown field for ${e}. Cannot calculate view size.`}function zle(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function oDt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function aDt(e){return`The "nearest" transform is not supported for ${e} marks.`}function YAe(e){return`Selection not supported for ${e} yet.`}function uDt(e){return`Cannot find a selection named "${e}".`}const lDt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",cDt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",fDt="Legend bindings are only supported for selections over an individual field or encoding channel.";function dDt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function hDt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const pDt="The same selection must be used to override scale domains in a layered view.",mDt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function gDt(e){return`Unknown repeated value "${e}".`}function Vle(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const yDt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",XQ="Animation involving facet, layer, or concat is currently unsupported.";function vDt(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Ot(e)}.`}function bDt(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${Ot(t)} encoding found for selection ${Ot(n.param)}. Using "field": ${Ot(r)}.`}const xDt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function wDt(e){return`Unrecognized parse "${e}".`}function Hle(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const _Dt="Attempt to add the same child twice.";function EDt(e){return`Ignoring an invalid transform: ${hi(e)}.`}const TDt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function qle(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function SDt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${hi(t)} is overridden by a child projection ${hi(n)}.`}const CDt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function ADt(e){return`${e}Offset dropped because ${e} is continuous`}function kDt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${hi(n)}}.`}function KAe(e){return`Invalid field type "${e}".`}function IDt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function RDt(e){return`Invalid aggregation operator "${e}".`}function XAe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function PDt(e){return`Position range does not support relative band size for ${e}.`}function Jz(e,t){return`Dropping ${hi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const DDt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function u5(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function NDt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function ODt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function $Dt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function LDt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function kB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function MDt(e){return`The ${e} for range marks cannot be an expression`}function FDt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function BDt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function jDt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function UDt(e){return`Cannot use the relative band size with ${e} scale.`}function zDt(e){return`Using unaggregated domain with raw field has no effect (${hi(e)}).`}function VDt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function HDt(e){return`Unaggregated domain is currently unsupported for log scale (${hi(e)}).`}function qDt(e){return`Cannot apply size to non-oriented mark "${e}".`}function WDt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function GDt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function QAe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function JAe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function YDt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${hi(n)} and ${hi(r)}). Using ${hi(n)}.`}function KDt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${hi(n)} and ${hi(r)}). Using the union of the two domains.`}function XDt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function QDt(e){return`Dropping sort property ${hi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Wle="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",JDt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",ZDt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",eNt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function tNt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function nNt(e){return`Stack is applied to a non-linear scale (${e}).`}function rNt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function q6(e,t){return`Invalid ${e}: ${hi(t)}.`}function iNt(e){return`Dropping day from datetime ${hi(e)} as day cannot be combined with other units.`}function sNt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function oNt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function aNt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Gle(e){return`1D error band does not support ${e}.`}function ZAe(e){return`Channel ${e} is required for "binned" bin.`}function uNt(e){return`Channel ${e} should not be used with "binned" bin.`}function lNt(e){return`Domain for ${e} is required for threshold scale.`}const eke=AY(CY);let Kb=eke;function cNt(e){return Kb=e,Kb}function fNt(){return Kb=eke,Kb}function QQ(...e){Kb.error(...e)}function It(...e){Kb.warn(...e)}function dNt(...e){Kb.debug(...e)}function Bx(e){if(e&&Ut(e)){for(const t of ZQ)if(Ct(e,t))return!0}return!1}const tke=["january","february","march","april","may","june","july","august","september","october","november","december"],hNt=tke.map(e=>e.substr(0,3)),nke=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],pNt=nke.map(e=>e.substr(0,3));function mNt(e){if(ZM(e)&&(e=+e),Vr(e))return e>4&&It(q6("quarter",e)),e-1;throw new Error(q6("quarter",e))}function gNt(e){if(ZM(e)&&(e=+e),Vr(e))return e-1;{const t=e.toLowerCase(),n=tke.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=hNt.indexOf(r);if(i!==-1)return i;throw new Error(q6("month",e))}}function yNt(e){if(ZM(e)&&(e=+e),Vr(e))return e%7;{const t=e.toLowerCase(),n=nke.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=pNt.indexOf(r);if(i!==-1)return i;throw new Error(q6("day",e))}}function JQ(e,t){const n=[];if(t&&e.day!==void 0&&_t(e).length>1&&(It(iNt(e)),e=Dn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?gNt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?mNt(e.quarter):e.quarter;n.push(Vr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?yNt(e.day):e.day;n.push(Vr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Xb(e){const n=JQ(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function vNt(e){const n=JQ(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function bNt(e){const t=JQ(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const rke={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},ZQ=_t(rke);function xNt(e){return Kt(rke,e)}function jx(e){return Ut(e)?e.binned:ike(e)}function ike(e){return e&&e.startsWith("binned")}function eJ(e){return e.startsWith("utc")}function wNt(e){return e.substring(3)}const _Nt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function l5(e){return ZQ.filter(t=>oke(e,t))}function ske(e){const t=l5(e);return t[t.length-1]}function oke(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function ENt(e,t,{end:n}={end:!1}){const r=FQ(t),i=eJ(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of ZQ)oke(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),vNt(a)}function ake(e){if(!e)return;const t=l5(e);return`timeUnitSpecifier(${hi(t)}, ${hi(_Nt)})`}function TNt(e,t,n){if(!e)return;const r=ake(e);return`${n||eJ(e)?"utc":"time"}Format(${t}, ${r})`}function Ho(e){if(!e)return;let t;return Ht(e)?ike(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ut(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),eJ(t.unit)&&(t.utc=!0,t.unit=wNt(t.unit)),t}function SNt(e){const{utc:t,...n}=Ho(e);return n.unit?(t?"utc":"")+_t(n).map(r=>Yi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+_t(n).map(r=>Yi(`_${r}_${n[r]}`)).join("")}function uke(e,t=n=>n){const n=Ho(e),r=ske(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=lke(r,n.step),a={...i,[o]:+i[o]+s};return`${t(Xb(a))} - ${t(Xb(i))}`}}const CNt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function ANt(e){return Kt(CNt,e)}function lke(e,t=1){if(ANt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function kNt(e){return Ct(e,"param")}function tJ(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function nJ(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function rJ(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function iJ(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function sJ(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function oJ(e){if(e!=null&&e.field){if(at(e.range)&&e.range.length===2)return!0;if(cn(e.range))return!0}return!1}function aJ(e){return!!(e!=null&&e.field)&&(at(e.oneOf)||at(e.in))}function INt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function cke(e){return aJ(e)||tJ(e)||oJ(e)||nJ(e)||iJ(e)||rJ(e)||sJ(e)}function jh(e,t){return b5(e,{timeUnit:t,wrapTime:!0})}function RNt(e,t){return e.map(n=>jh(n,t))}function fke(e,t=!0){const{field:n}=e,r=Ho(e.timeUnit),{unit:i,binned:s}=r||{},o=jt(e,{expr:"datum"}),a=i?`time(${s?o:ENt(i,n)})`:o;if(tJ(e))return`${a}===${jh(e.equal,i)}`;if(nJ(e)){const u=e.lt;return`${a}<${jh(u,i)}`}else if(iJ(e)){const u=e.gt;return`${a}>${jh(u,i)}`}else if(rJ(e)){const u=e.lte;return`${a}<=${jh(u,i)}`}else if(sJ(e)){const u=e.gte;return`${a}>=${jh(u,i)}`}else{if(aJ(e))return`indexof([${RNt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(INt(e))return c5(a,e.valid);if(oJ(e)){const{range:u}=pa(e),l=cn(u)?{signal:`${u.signal}[0]`}:u[0],c=cn(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+jh(l,i)+", "+jh(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${jh(l,i)}`),c!==null&&f.push(`${a} <= ${jh(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${hi(e)}`)}function c5(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function PNt(e){return cke(e)&&e.timeUnit?{...e,timeUnit:Ho(e.timeUnit)}:e}const CR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function DNt(e){return e==="quantitative"||e==="temporal"}function dke(e){return e==="ordinal"||e==="nominal"}const Qb=CR.quantitative,uJ=CR.ordinal,hT=CR.temporal,lJ=CR.nominal,SS=CR.geojson;function NNt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Qb:return"quantitative";case"t":case hT:return"temporal";case"o":case uJ:return"ordinal";case"n":case lJ:return"nominal";case SS:return"geojson"}}const ma={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Zz={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function ONt(e,t){const n=Zz[e],r=Zz[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const $Nt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Yle(e){return $Nt[e]}const hke=new Set(["linear","log","pow","sqrt","symlog"]),pke=new Set([...hke,"time","utc"]);function mke(e){return hke.has(e)}const gke=new Set(["quantile","quantize","threshold"]),LNt=new Set([...pke,...gke,"sequential","identity"]),MNt=new Set(["ordinal","bin-ordinal","point","band"]);function Go(e){return MNt.has(e)}function Qd(e){return LNt.has(e)}function op(e){return pke.has(e)}function pT(e){return gke.has(e)}const FNt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function BNt(e){return!Ht(e)&&Ct(e,"name")}function yke(e){return Ct(e,"param")}function jNt(e){return Ct(e,"unionWith")}function UNt(e){return Ut(e)&&"field"in e}const zNt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:ejt,domain:tjt,range:njt,rangeMax:rjt,rangeMin:ijt,scheme:sjt,...VNt}=zNt,HNt=_t(VNt);function eV(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return op(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return op(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return op(e);case"nice":return op(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Qd(e)&&!ar(["log","time","utc","threshold","quantile"],e)}}function vke(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return vE(e)?void 0:jDt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function qNt(e,t){return ar([uJ,lJ],t)?e===void 0||Go(e):t===hT?ar([ma.TIME,ma.UTC,void 0],e):t===Qb?mke(e)||pT(e)||e===void 0:!0}function WNt(e,t,n=!1){if(!rm(e))return!1;switch(e){case Xi:case Xo:case A1:case TS:case Vf:case ch:return op(t)||t==="band"?!0:t==="point"?!n:!1;case k1:return ar(["linear","band"],t);case J0:case P1:case Z0:case I1:case R1:case $x:return op(t)||pT(t)||ar(["band","point","ordinal"],t);case Bl:case em:case tm:return t!=="band";case D1:case jl:return t==="ordinal"||pT(t)}}function GNt(e){return Ut(e)&&"value"in e}const Gu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},bke=Gu.arc,f5=Gu.area,d5=Gu.bar,YNt=Gu.image,h5=Gu.line,p5=Gu.point,KNt=Gu.rect,W6=Gu.rule,xke=Gu.text,cJ=Gu.tick,XNt=Gu.trail,fJ=Gu.circle,dJ=Gu.square,wke=Gu.geoshape;function O1(e){return["line","area","trail"].includes(e)}function Jk(e){return["rect","bar","image","arc","tick"].includes(e)}const QNt=new Set(_t(Gu));function Mp(e){return Ct(e,"type")}const JNt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],ZNt=["fill","fillOpacity"],e3t=[...JNt,...ZNt],t3t={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Kle=_t(t3t),IB=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],n3t={area:["line","point"],bar:IB,rect:IB,line:["point"],tick:["bandSize","thickness",...IB]},r3t={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},i3t={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},_ke=_t(i3t);function Jb(e){return Ct(e,"band")}const s3t={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},o3t=5,hJ={binSpacing:0,continuousBandSize:o3t,minBandSize:.25,timeUnitBandPosition:.5},a3t={...hJ,binSpacing:1},u3t={...hJ,thickness:1};function l3t(e){return Mp(e)?e.type:e}function Eke(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function pJ({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!Qd(r)||i)return"always-valid";const s=Eke(fi("invalid",e,t),{isPath:O1(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":s}function c3t(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function Tke({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function Ske({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=Zd(t),u=o5(a==null?void 0:a.aggregate),l=pJ({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:u});if(a&&l==="show"){const f=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:c5(jt(a,{expr:"datum"}),!1),...f3t(f,n,r)}}}function f3t(e,t,n){if(GNt(e)){const{value:r}=e;return cn(r)?{signal:r.signal}:{value:r}}return Tke({scale:t,scaleName:n,mode:"zeroOrMin"})}function mJ(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=Lx(t),u=gJ(e),l=Ske({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return l!==void 0?[l,u]:u}function d3t(e){const{datum:t}=e;return Bx(t)?Xb(t):`${hi(t)}`}function _b(e,t,n,r){const i={};if(t&&(i.scale=t),im(e)){const{datum:s}=e;Bx(s)?i.signal=Xb(s):cn(s)?i.signal=s.signal:SR(s)?i.signal=s.expr:i.value=s}else i.field=jt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function G6({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!cn(o)&&0<o&&o<1?"datum":void 0,u=jt(t,{expr:a,suffix:i}),l=n!==void 0?jt(n,{expr:a}):jt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=cn(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function h3t({scaleName:e,fieldDef:t}){const n=jt(t,{expr:"datum"}),r=jt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function gJ({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Ln(t)){const f=o==null?void 0:o.get("type");if(Hu(t)){c??(c=n1({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Pi(d)||c&&h&&p===hT)return a!=null&&a.impute?_b(t,s,{binSuffix:"mid"},{offset:u}):c&&!Go(f)?G6({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):_b(t,s,PR(t,e)?{binSuffix:"range"}:{},{offset:u});if(ha(d)){if(Pt(n))return G6({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});It(ZAe(e===Xi?lh:Zp))}}return _b(t,s,Go(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Jd(t)){const f=t.value,d=u?{offset:u}:{};return{...VA(e,f),...d}}}return Gn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function VA(e,t){return ar(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:ar(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:ji(t)}function Zb(e){return e&&e!=="number"&&e!=="time"}function Cke(e,t,n){return`${e}(${t}${n?`, ${hi(n)}`:""})`}const p3t=" – ";function yJ({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(Zb(n))return $d({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=Ake(e,r,i),a=mT(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return $d({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return $d({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Pt(e)&&e.timeUnit===void 0)return $d({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(yT(e)){const c=g3t({field:o,timeUnit:Pt(e)?(u=Ho(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Ux(e)&&((l=e.scale)==null?void 0:l.type)===ma.UTC});return c?{signal:c}:void 0}if(t=tV({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Pt(e)&&Pi(e.bin)){const c=jt(e,{expr:r,binSuffix:"end"});return{signal:AR(o,c,t,n,s)}}else return t||mT(e)==="quantitative"?{signal:`${Rke(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function Ake(e,t,n){return Pt(e)?n?`${jt(e,{expr:t,suffix:"end"})}-${jt(e,{expr:t,suffix:"start"})}`:jt(e,{expr:t}):d3t(e)}function $d({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=Ake(e,r,i)),o!=="datum.value"&&Pt(e)&&Pi(e.bin)){const a=jt(e,{expr:r,binSuffix:"end"});return{signal:AR(o,a,t,n,s)}}return{signal:Cke(n,o,t)}}function kke(e,t,n,r,i,s){var o;if(!(Ht(r)&&Zb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&mT(e)==="quantitative"&&(i.normalizedNumberFormatType&&gT(e)&&e.stack==="normalize"||i.numberFormatType))){if(gT(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return tV({type:"quantitative",config:i,normalizeStack:!0});if(yT(e)){const a=Pt(e)?(o=Ho(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:m3t({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return tV({type:t,specifiedFormat:n,config:i})}}function Ike(e,t,n){var r;if(e&&(cn(e)||e==="number"||e==="time"))return e;if(yT(t)&&n!=="time"&&n!=="utc")return Pt(t)&&((r=Ho(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function tV({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Ht(t))return t;if(e===Qb)return r?n.normalizedNumberFormat:n.numberFormat}function m3t({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:ake(t)}:r?void 0:n.timeFormat)}function Rke(e,t){return`format(${e}, "${t||""}")`}function Xle(e,t,n,r){return Zb(n)?Cke(n,e,t):Rke(e,(Ht(t)?t:void 0)??r.numberFormat)}function AR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return AR(e,t,i.numberFormat,i.numberFormatType,i);const s=Xle(e,n,r,i),o=Xle(t,n,r,i);return`${c5(e,!1)} ? "null" : ${s} + "${p3t}" + ${o}`}function g3t({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Ht(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):TNt(t,e,s)}const m5="min",y3t={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Qle(e){return Kt(y3t,e)}function v3t(e){return Ct(e,"encoding")}function b0(e){return e&&(e.op==="count"||Ct(e,"field"))}function Pke(e){return e&&at(e)}function kR(e){return Ct(e,"row")||Ct(e,"column")}function vJ(e){return Ct(e,"header")}function g5(e){return Ct(e,"facet")}function b3t(e){return Ct(e,"param")}function x3t(e){return!Ht(e)&&Ct(e,"repeat")}function Jle(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function bJ(e){return Ct(e,"sort")}function n1({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Ln(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Pt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Lp("timeUnitBandPosition",n,r);if(Pi(s))return .5}}function Dke({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Ul(e),u=fi(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Pt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Lp("timeUnitBandSize",r,i)};if(Pi(h)&&!Go(s))return{band:1}}if(Jk(r.type))return s?Go(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function Nke(e,t,n,r){return Pi(e.bin)||e.timeUnit&&Hu(e)&&e.type==="temporal"?n1({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Oke(e){return Ct(e,"sort")&&!Ct(e,"field")}function IR(e){return Ct(e,"condition")}function y5(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&Pt(t)}function RR(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&Ln(t)}function w3t(e){const t=e==null?void 0:e.condition;return!!t&&(at(t)||Jd(t))}function Pt(e){return Ct(e,"field")||(e==null?void 0:e.aggregate)==="count"}function mT(e){return e==null?void 0:e.type}function im(e){return Ct(e,"datum")}function gy(e){return Hu(e)&&!K6(e)||Y6(e)}function Zle(e){return Hu(e)&&e.type==="quantitative"&&!e.bin||Y6(e)}function Y6(e){return im(e)&&Vr(e.datum)}function Ln(e){return Pt(e)||im(e)}function Hu(e){return e&&(Ct(e,"field")||e.aggregate==="count")&&Ct(e,"type")}function Jd(e){return Ct(e,"value")}function Ux(e){return Ct(e,"scale")||Ct(e,"sort")}function gT(e){return Ct(e,"axis")||Ct(e,"stack")||Ct(e,"impute")}function $ke(e){return Ct(e,"legend")}function Lke(e){return Ct(e,"format")||Ct(e,"formatType")}function _3t(e){return Nl(e,["legend","axis","header","scale"])}function E3t(e){return Ct(e,"op")}function jt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(S3t(e))n=SAe("count");else{let o;if(!t.nofn)if(E3t(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Pi(a)?(o=BAe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?N1(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):B0(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!jx(l)&&(o=SNt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?ES(n):t.expr?_Ae(n,t.expr)+s:Df(n)+s}function K6(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Pt(e)&&!!e.bin;case"temporal":return!1}throw new Error(KAe(e.type))}function T3t(e){var t;return Ux(e)&&pT((t=e.scale)==null?void 0:t.type)}function S3t(e){return e.aggregate==="count"}function C3t(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Pi(r))return`${n} (binned)`;if(i&&!jx(i)){const a=(o=Ho(i))==null?void 0:o.unit;if(a)return`${n} (${l5(a).join("-")})`}else if(s)return N1(s)?`${n} for max ${s.argmax}`:B0(s)?`${n} for min ${s.argmin}`:`${wR(s)} of ${n}`;return n}function A3t(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(N1(t))return`${i} for argmax(${t.argmax})`;if(B0(t))return`${i} for argmin(${t.argmin})`;const s=r&&!jx(r)?Ho(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Pi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const Mke=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return A3t(e);default:return C3t(e,t)}};let Fke=Mke;function Bke(e){Fke=e}function k3t(){Bke(Mke)}function bE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=xJ(e))==null?void 0:a.title;if(!Pt(e))return i??e.title;const s=e,o=r?wJ(s,t):void 0;return n?Bs(i,s.title,o):i??s.title??o}function xJ(e){if(gT(e)&&e.axis)return e.axis;if($ke(e)&&e.legend)return e.legend;if(vJ(e)&&e.header)return e.header}function wJ(e,t){return Fke(e,t)}function X6(e){if(Lke(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=xJ(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function I3t(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(bJ(e)&&at(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!N1(n)&&!B0(n))return"quantitative";if(Ux(e)&&((s=e.scale)!=null&&s.type))switch(Zz[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Zd(e){if(Pt(e))return e;if(y5(e))return e.condition}function mo(e){if(Ln(e))return e;if(RR(e))return e.condition}function jke(e,t,n,r={}){if(Ht(e)||Vr(e)||T1(e)){const i=Ht(e)?"string":Vr(e)?"number":"boolean";return It(kDt(t,i,e)),{value:e}}return Ln(e)?Q6(e,t,n,r):RR(e)?{...e,condition:Q6(e.condition,t,n,r)}:e}function Q6(e,t,n,r){if(Lke(e)){const{format:i,formatType:s,...o}=e;if(Zb(s)&&!n.customFormatTypes)return It(qle(t)),Q6(o,t,n,r)}else{const i=gT(e)?"axis":$ke(e)?"legend":vJ(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(Zb(o)&&!n.customFormatTypes)return It(qle(t)),Q6({...e,[i]:a},t,n,r)}}return Pt(e)?_J(e,t,r):R3t(e)}function R3t(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Vr(n)?"quantitative":Ht(n)?"nominal":Bx(n)?"temporal":void 0,{...e,type:t}}function _J(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!GQ(r)&&!N1(r)&&!B0(r)&&(It(RDt(r)),delete a.aggregate),i&&(a.timeUnit=Ho(i)),o&&(a.field=`${o}`),Pi(s)&&(a.bin=v5(s,t)),ha(s)&&!js(t)&&It(uNt(t)),Hu(a)){const{type:u}=a,l=NNt(u);u!==l&&(a.type=l),u!=="quantitative"&&o5(r)&&(It(IDt(u,r)),a.type="quantitative")}else if(!NAe(t)){const u=I3t(a,t);a.type=u}if(Hu(a)){const{compatible:u,warning:l}=P3t(a,t)||{};u===!1&&It(l)}if(bJ(a)&&Ht(a.sort)){const{sort:u}=a;if(Qle(u))return{...a,sort:{encoding:u}};const l=u.substring(1);if(u.charAt(0)==="-"&&Qle(l))return{...a,sort:{encoding:l,order:"descending"}}}if(vJ(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function v5(e,t){return T1(e)?{maxbins:Lle(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Lle(t)}:e}const __={compatible:!0};function P3t(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case y0:case v0:case e5:return K6(e)?__:{compatible:!1,warning:ODt(t)};case Xi:case Xo:case A1:case TS:case Bl:case em:case tm:case _R:case ER:case t5:case Yb:case n5:case r5:case $x:case Vf:case ch:case i5:return __;case dh:case Nf:case fh:case hh:return n!==Qb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:__;case Z0:case I1:case R1:case P1:case J0:case Q0:case X0:case lh:case Zp:case k1:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:__;case jl:case D1:return!K6(e)&&!T3t(e)?{compatible:!1,warning:$Dt(t)}:__;case dT:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:__}}function yT(e){const{formatType:t}=X6(e);return t==="time"||!t&&D3t(e)}function D3t(e){return e&&(e.type==="temporal"||Pt(e)&&!!e.timeUnit)}function b5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Ho(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return SR(e)?a=e.expr:cn(e)?a=e.signal:Bx(e)?(o=!0,a=Xb(e)):(Ht(e)||Vr(e))&&o&&(a=`datetime(${hi(e)})`,xNt(s)&&(Vr(e)&&e<1e4||Ht(e)&&isNaN(Date.parse(e)))&&(a=Xb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:hi(e)}function Uke(e,t){const{type:n}=e;return t.map(r=>{const i=Pt(e)&&!jx(e.timeUnit)?e.timeUnit:void 0,s=b5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function PR(e,t){return Pi(e.bin)?rm(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const ece={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function DR(e){return e==null?void 0:e.condition}const zke=["domain","grid","labels","ticks","title"],N3t={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Vke={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},O3t={...Vke,style:1,labelExpr:1,encoding:1};function tce(e){return Kt(O3t,e)}const $3t={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Hke=_t($3t);function tg(e){return Ct(e,"mark")}class x5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return tg(t)?l3t(t.mark)===this.name:!1}}function Eb(e,t){const n=e&&e[t];return n?at(n)?cT(n,r=>!!r.field):Pt(n)||y5(n):!1}function qke(e,t){const n=e&&e[t];return n?at(n)?cT(n,r=>!!r.field):Pt(n)||im(n)||RR(n):!1}function Wke(e,t){if(js(t)){const n=e[t];if((Pt(n)||im(n))&&(dke(n.type)||Pt(n)&&n.timeUnit)){const r=zQ(t);return qke(e,r)}}return!1}function Gke(e){return cT(RPt,t=>{if(Eb(e,t)){const n=e[t];if(at(n))return cT(n,r=>!!r.aggregate);{const r=Zd(n);return r&&!!r.aggregate}}return!1})}function Yke(e,t){const n=[],r=[],i=[],s=[],o={};return EJ(e,(a,u)=>{if(Pt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=xJ(a),g=p==null?void 0:p.title;let y=jt(a,{forAs:!0});const x={...g?[]:{title:bE(a,t,{allowDisabling:!0})},...h,field:y};if(c){let b;if(N1(c)?(b="argmax",y=jt({op:"argmax",field:c.argmax},{forAs:!0}),x.field=`${y}.${l}`):B0(c)?(b="argmin",y=jt({op:"argmin",field:c.argmin},{forAs:!0}),x.field=`${y}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const _={op:b,as:y};l&&(_.field=l),s.push(_)}}else if(n.push(y),Hu(a)&&Pi(f)){if(r.push({bin:f,field:l,as:y}),n.push(jt(a,{binSuffix:"end"})),PR(a,u)&&n.push(jt(a,{binSuffix:"range"})),js(u)){const b={field:`${y}_end`};o[`${u}2`]=b}x.bin="binned",NAe(u)||(x.type=Qb)}else if(d&&!jx(d)){i.push({timeUnit:d,field:l,as:y});const b=Hu(a)&&a.type!==hT&&"time";b&&(u===_R||u===Yb?x.formatType=b:UPt(u)?x.legend={formatType:b,...x.legend}:js(u)&&(x.axis={formatType:b,...x.axis}))}o[u]=x}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function L3t(e,t,n){const r=VPt(t,n);if(r){if(r==="binned"){const i=e[t===lh?Xi:Xo];return!!(Pt(i)&&Pt(e[t])&&ha(i.bin))}}else return!1;return!0}function M3t(e,t,n,r){const i={};for(const s of _t(e))DAe(s)||It(NDt(s));for(let s of LPt){if(!e[s])continue;const o=e[s];if(TR(s)){const a=$Pt(s),u=i[a];if(Pt(u)&&DNt(u.type)&&Pt(o)&&!u.timeUnit){It(ADt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(It(CDt),s=Vf),!L3t(e,s,t)){It(u5(s,t));continue}if(s===J0&&t==="line"){const a=Zd(e[s]);if(a!=null&&a.aggregate){It(DDt);continue}}if(s===Bl&&(n?"fill"in e:"stroke"in e)){It(XAe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===ER||s===dT&&!at(o)&&!Jd(o)||s===Yb&&at(o)){if(o){if(s===dT){const a=e[s];if(Oke(a)){i[s]=a;continue}}i[s]=Vt(o).reduce((a,u)=>(Pt(u)?a.push(_J(u,s)):It(Jz(u,s)),a),[])}}else{if(s===Yb&&o===null)i[s]=null;else if(!Pt(o)&&!im(o)&&!Jd(o)&&!IR(o)&&!cn(o)){It(Jz(o,s));continue}i[s]=jke(o,s,r)}}return i}function w5(e,t){const n={};for(const r of _t(e)){const i=jke(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function F3t(e){const t=[];for(const n of _t(e))if(Eb(e,n)){const r=e[n],i=Vt(r);for(const s of i)Pt(s)?t.push(s):y5(s)&&t.push(s.condition)}return t}function EJ(e,t,n){if(e)for(const r of _t(e)){const i=e[r];if(at(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function B3t(e,t,n,r){return e?_t(e).reduce((i,s)=>{const o=e[s];return at(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function Kke(e,t){return _t(t).reduce((n,r)=>{switch(r){case Xi:case Xo:case n5:case i5:case r5:case lh:case Zp:case A1:case TS:case Vf:case Q0:case ch:case X0:case k1:case fh:case dh:case hh:case Nf:case _R:case jl:case $x:case Yb:return n;case dT:if(e==="line"||e==="trail")return n;case ER:case t5:{const i=t[r];if(at(i)||Pt(i))for(const s of Vt(i))s.aggregate||n.push(jt(s,{}));return n}case J0:if(e==="trail")return n;case Bl:case em:case tm:case Z0:case I1:case R1:case D1:case P1:{const i=Zd(t[r]);return i&&!i.aggregate&&n.push(jt(i,{})),n}}},[])}function j3t(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(at(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return at(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function nV(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${TJ(t)}`:"";return{field:o+t.field,type:t.type,title:cn(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=F3t(n).map(_3t);return{tooltip:[...i,...sp(s,gr)]}}function TJ(e){const{title:t,field:n}=e;return Bs(t,n)}function SJ(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=TJ(n);return Xke(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Ht(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function Xke(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Mp(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...T1(e[t])?{}:e[t]}}]:[]}function Qke(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:GD(s,n),continuousAxisChannelDef2:GD(o,n),continuousAxisChannelDefError:GD(a,n),continuousAxisChannelDefError2:GD(u,n),continuousAxis:i}}function GD(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&It(aNt(n,t)),r}else return e}function Jke(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Mp(n)&&n.orient)return n.orient;if(gy(i)){if(gy(s)){const o=Pt(i)&&i.aggregate,a=Pt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return yT(s)&&!yT(i)?"horizontal":"vertical"}return"horizontal"}else{if(gy(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const J6="boxplot",U3t=["box","median","outliers","rule","ticks"],z3t=new x5(J6,eIe);function Zke(e){return Vr(e)?"tukey":e}function eIe(e,{config:t}){e={...e,encoding:w5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Mp(n)?n:{type:n};i&&It(YAe("boxplot"));const u=a.extent??t.boxplot.extent,l=fi("size",a,t),c=a.invalid,f=Zke(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:y,groupby:x,aggregate:b,encodingWithoutContinuousAxis:_,ticksOrient:E,boxOrient:T,customTooltipWithoutAggregatedField:k}=V3t(e,u,t),I=ES(g.field),{color:R,size:D,...L}=_,M=et=>SJ(a,y,g,et,t.boxplot),z=M(L),F=M(_),H=(Ut(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",Q=M({...L,...D?{size:D}:{},color:{condition:{test:`${ii(`lower_box_${g.field}`)} >= ${ii(`upper_box_${g.field}`)}`,...R||{value:H}}}}),J=nV([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,_),ne={type:"tick",color:"black",opacity:1,orient:E,invalid:c,aria:!1},Z=f==="min-max"?J:nV([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,_),ie=[...z({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Z}),...z({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Z}),...z({partName:"ticks",mark:ne,positionPrefix:"lower_whisker",extraEncoding:Z}),...z({partName:"ticks",mark:ne,positionPrefix:"upper_whisker",extraEncoding:Z})],q=[...f!=="tukey"?ie:[],...F({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:T,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:J}),...Q({partName:"median",mark:{type:"tick",invalid:c,...Ut(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:J})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:q};const U=ii(`lower_box_${g.field}`),X=ii(`upper_box_${g.field}`),V=`(${X} - ${U})`,K=`${U} - ${u} * ${V}`,ee=`${X} + ${u} * ${V}`,fe=ii(g.field),Ee={joinaggregate:tIe(g.field),groupby:x},ye={transform:[{filter:`(${K} <= ${fe}) && (${fe} <= ${ee})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${I}`},{op:"max",field:g.field,as:`upper_whisker_${I}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${I}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${I}`},...b],groupby:x}],layer:ie},{tooltip:_e,...De}=L,{scale:me,axis:de}=g,$e=TJ(g),Pe=Nl(de,["title"]),Ze=Xke(a,"outliers",t.boxplot,{transform:[{filter:`(${fe} < ${K}) || (${fe} > ${ee})`}],mark:"point",encoding:{[y]:{field:g.field,type:g.type,...$e!==void 0?{title:$e}:{},...me!==void 0?{scale:me}:{},...di(Pe)?{}:{axis:Pe}},...De,...R?{color:R}:{},...k?{tooltip:k}:{}}})[0];let it;const Ge=[...d,...h,Ee];return Ze?it={transform:Ge,layer:[Ze,ye]}:(it=ye,it.transform.unshift(...Ge)),{...o,layer:[it,{transform:p,layer:q}]}}function tIe(e){const t=ES(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function V3t(e,t,n){const r=Jke(e,J6),{continuousAxisChannelDef:i,continuousAxis:s}=Qke(e,r,J6),o=i.field,a=ES(o),u=Zke(t),l=[...tIe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`${ii(`upper_box_${a}`)} - ${ii(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${ii(`upper_box_${a}`)} + ${ii(`iqr_${a}`)} * ${t}, ${ii(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${ii(`lower_box_${a}`)} - ${ii(`iqr_${a}`)} * ${t}, ${ii(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=j3t(d),{bins:g,timeUnits:y,aggregate:x,groupby:b,encoding:_}=Yke(p,n),E=r==="vertical"?"horizontal":"vertical",T=r,k=[...g,...y,{aggregate:[...x,...l],groupby:b},...c];return{bins:g,timeUnits:y,transform:k,groupby:b,aggregate:x,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:_,ticksOrient:E,boxOrient:T,customTooltipWithoutAggregatedField:h}}const CJ="errorbar",H3t=["ticks","rule"],q3t=new x5(CJ,nIe);function nIe(e,{config:t}){e={...e,encoding:w5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=rIe(e,CJ,t);delete s.size;const c=SJ(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function W3t(e,t){const{encoding:n}=e;if(G3t(n))return{orient:Jke(e,t),inputType:"raw"};const r=Y3t(n),i=K3t(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Ln(a)&&Ln(u))throw new Error(`${t} cannot have both x2 and y2`);if(Ln(a)){if(gy(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Ln(u)){if(gy(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Ln(u)&&!Ln(a))throw new Error(`${t} cannot have xError2 without xError`);if(Ln(c)&&!Ln(l))throw new Error(`${t} cannot have yError2 without yError`);if(Ln(a)&&Ln(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ln(a)){if(gy(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ln(l)){if(gy(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function G3t(e){return(Ln(e.x)||Ln(e.y))&&!Ln(e.x2)&&!Ln(e.y2)&&!Ln(e.xError)&&!Ln(e.xError2)&&!Ln(e.yError)&&!Ln(e.yError2)}function Y3t(e){return Ln(e.x2)||Ln(e.y2)}function K3t(e){return Ln(e.xError)||Ln(e.xError2)||Ln(e.yError)||Ln(e.yError2)}function rIe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Mp(r)?r:{type:r};s&&It(YAe(t));const{orient:l,inputType:c}=W3t(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=Qke(e,l,t),{errorBarSpecificAggregate:y,postAggregateCalculates:x,tooltipSummary:b,tooltipTitleWithFieldName:_}=X3t(u,f,d,h,p,c,t,n),{[g]:E,[g==="x"?"x2":"y2"]:T,[g==="x"?"xError":"yError"]:k,[g==="x"?"xError2":"yError2"]:I,...R}=i,{bins:D,timeUnits:L,aggregate:M,groupby:z,encoding:F}=Yke(R,n),H=[...M,...y],Q=c!=="raw"?[]:z,J=nV(b,f,F,_);return{transform:[...a.transform??[],...D,...L,...H.length===0?[]:[{aggregate:H,groupby:Q}],...x],groupby:Q,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:F,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:J}}function X3t(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&It(oNt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`${ii(`center_${c}`)} + ${ii(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${ii(`center_${c}`)} - ${ii(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:wR(h)},{fieldPrefix:"upper_",titlePrefix:nce(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:nce(h,p,"-")}],d=!0;else{let g,y,x;p==="ci"?(g="mean",y="ci0",x="ci1"):(g="median",y="q1",x="q3"),u=[{op:y,field:c,as:`lower_${c}`},{op:x,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:bE({field:c,aggregate:x,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:bE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:bE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&It(sNt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:ii(n.field),as:`upper_${c}`},{calculate:ii(c),as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`${ii(c)} + ${ii(r.field)}`,as:`upper_${c}`}],i?l.push({calculate:`${ii(c)} + ${ii(i.field)}`,as:`lower_${c}`}):l.push({calculate:`${ii(c)} - ${ii(r.field)}`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Gb(Gb(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function nce(e,t,n){return`${wR(e)} ${n} ${t}`}const AJ="errorband",Q3t=["band","borders"],J3t=new x5(AJ,iIe);function iIe(e,{config:t}){e={...e,encoding:w5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=rIe(e,AJ,t),l=o,c=SJ(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?It(Gle("interpolate")):l.tension&&It(Gle("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const sIe={};function kJ(e,t,n){const r=new x5(e,t);sIe[e]={normalizer:r,parts:n}}function Z3t(){return _t(sIe)}kJ(J6,eIe,U3t);kJ(CJ,nIe,H3t);kJ(AJ,iIe,Q3t);const eOt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],oIe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},aIe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},tOt=_t(oIe),nOt=_t(aIe),rOt={header:1,headerRow:1,headerColumn:1,headerFacet:1},uIe=_t(rOt),lIe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],iOt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},sOt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},eh="_vgsid_",oOt={point:{on:"click",fields:[eh],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function IJ(e){return e==="legend"||!!(e!=null&&e.legend)}function RB(e){return IJ(e)&&Ut(e)}function RJ(e){return!!(e!=null&&e.select)}function cIe(e){const t=[];for(const n of e||[]){if(RJ(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function aOt(e){return _5(e)||DJ(e)||PJ(e)}function PJ(e){return Ct(e,"concat")}function _5(e){return Ct(e,"vconcat")}function DJ(e){return Ct(e,"hconcat")}function fIe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Fp(e){return Ct(e,"step")}function rce(e){return Ct(e,"view")||Ct(e,"width")||Ct(e,"height")}const ice=20,uOt={align:1,bounds:1,center:1,columns:1,spacing:1},lOt=_t(uOt);function cOt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(g5(e)&&!kR(e.facet)||PJ(e))&&(i.columns=o),_5(e)&&(i.columns=1);for(const a of lOt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Vr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function rV(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function iV(e,t){const n=Z6(e,t);return Fp(n)?n.step:dIe}function Z6(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Bs(n,{step:e.step})}const dIe=20,fOt={continuousWidth:200,continuousHeight:200,step:dIe},dOt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:fOt,mark:r3t,arc:{},area:{},bar:a3t,circle:{},geoshape:{},image:{},line:{},point:{},rect:hJ,rule:{color:"black"},square:{},text:{color:"black"},tick:u3t,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:FNt,projection:{},legend:iOt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:oOt,style:{},title:{},facet:{spacing:ice},concat:{spacing:ice},normalizedNumberFormat:".0%"},Fm=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],sce={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},oce={blue:Fm[0],orange:Fm[1],red:Fm[2],teal:Fm[3],green:Fm[4],yellow:Fm[5],purple:Fm[6],pink:Fm[7],brown:Fm[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function hOt(e={}){return{signals:[{name:"color",value:Ut(e)?{...oce,...e}:oce}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function pOt(e){return{signals:[{name:"fontSize",value:Ut(e)?{...sce,...e}:sce}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function mOt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function hIe(e){const t=_t(e||{}),n={};for(const r of t){const i=e[r];n[r]=DR(i)?UAe(i):xc(i)}return n}function gOt(e){const t=_t(e),n={};for(const r of t)n[r]=hIe(e[r]);return n}const yOt=[..._ke,...Hke,...uIe,"background","padding","legend","lineBreak","scale","style","title","view"];function pIe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=dS({},Dn(dOt),n?mOt(n):{},t?hOt(t):{},r?pOt(r):{},s||{});i&&hS(o,"selection",i,!0);const a=Nl(o,yOt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=xc(o[u]));for(const u of _ke)o[u]&&(a[u]=pa(o[u]));for(const u of Hke)o[u]&&(a[u]=hIe(o[u]));for(const u of uIe)o[u]&&(a[u]=pa(o[u]));if(o.legend&&(a.legend=pa(o.legend)),o.scale){const{invalid:u,...l}=o.scale,c=pa(u,{level:1});a.scale={...pa(l),..._t(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=gOt(o.style)),o.title&&(a.title=pa(o.title)),o.view&&(a.view=pa(o.view)),a}const vOt=new Set(["view",...QNt]),bOt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],xOt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...n3t};function wOt(e){e=Dn(e);for(const t of bOt)delete e[t];if(e.axis)for(const t in e.axis)DR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of eOt)delete e.legend[t];if(e.mark){for(const t of Kle)delete e.mark[t];e.mark.tooltip&&Ut(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(cIe(e.params)),delete e.params);for(const t of vOt){for(const r of Kle)delete e[t][r];const n=xOt[t];if(n)for(const r of n)delete e[t][r];EOt(e,t)}for(const t of Z3t())delete e[t];_Ot(e);for(const t in e)Ut(e[t])&&di(e[t])&&delete e[t];return di(e)?void 0:e}function _Ot(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=jAe(e.title);di(t)||(e.style["group-title"]={...e.style["group-title"],...t}),di(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),di(r)?delete e.title:e.title=r}function EOt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};di(s)||(e.style[n??t]=s),delete e[t]}function E5(e){return Ct(e,"layer")}function TOt(e){return Ct(e,"repeat")}function SOt(e){return!at(e.repeat)&&Ct(e.repeat,"layer")}class NJ{map(t,n){return g5(t)?this.mapFacet(t,n):TOt(t)?this.mapRepeat(t,n):DJ(t)?this.mapHConcat(t,n):_5(t)?this.mapVConcat(t,n):PJ(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(E5(t))return this.mapLayer(t,n);if(tg(t))return this.mapUnit(t,n);throw new Error(YQ(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const COt={zero:1,center:1,normalize:1};function AOt(e){return Kt(COt,e)}const kOt=new Set([bke,d5,f5,W6,p5,fJ,dJ,h5,xke,cJ]),IOt=new Set([d5,f5,bke]);function E_(e){return Pt(e)&&mT(e)==="quantitative"&&!e.bin}function ace(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Pt(o)&&Pt(a))if(E_(o)&&E_(a)){if(o.stack)return t;if(a.stack)return i;const u=Pt(o)&&!!o.aggregate,l=Pt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(E_(o))return t;if(E_(a))return i}else{if(E_(o))return s&&n==="vertical"?void 0:t;if(E_(a))return s&&n==="horizontal"?void 0:i}}function ROt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function mIe(e,t){var g,y;const n=Mp(e)?e:{type:e},r=n.type;if(!kOt.has(r))return null;const i=ace(t,"x",n)||ace(t,"theta",n);if(!i)return null;const s=t[i],o=Pt(s)?jt(s,{}):void 0,a=ROt(i),u=[],l=new Set;if(t[a]){const x=t[a],b=Pt(x)?jt(x,{}):void 0;b&&b!==o&&(u.push(a),l.add(b))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Pt(f)?jt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=MPt.reduce((x,b)=>{if(b!=="tooltip"&&Eb(t,b)){const _=t[b];for(const E of Vt(_)){const T=Zd(E);if(T.aggregate)continue;const k=jt(T,{});(!k||!l.has(k))&&x.push({channel:b,fieldDef:T})}}return x},[]);let p;return s.stack!==void 0?T1(s.stack)?p=s.stack?"zero":null:p=s.stack:IOt.has(r)&&(p="zero"),!p||!AOt(p)||Gke(t)&&h.length===0?null:((g=s==null?void 0:s.scale)!=null&&g.type&&((y=s==null?void 0:s.scale)==null?void 0:y.type)!==ma.LINEAR&&s!=null&&s.stack&&It(nNt(s.scale.type)),Ln(t[nm(i)])?(s.stack!==void 0&&It(tNt(i)),null):(Pt(s)&&s.aggregate&&!XPt.has(s.aggregate)&&It(rNt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:O1(r),stackBy:h,offset:p}))}function gIe(e,t,n){const r=pa(e),i=fi("orient",r,n);if(r.orient=OOt(r.type,t,i),i!==void 0&&i!==r.orient&&It(BDt(r.orient,i)),r.type==="bar"&&r.orient){const u=fi("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:s3t[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=fi("opacity",r,n),o=fi("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=DOt(r.type,t)),fi("cursor",r,n)===void 0&&(r.cursor=POt(r,t,n)),r}function POt(e,t,n){return t.href||e.href||fi("href",e,n)?"pointer":e.cursor}function DOt(e,t){if(ar([p5,cJ,fJ,dJ],e)&&!Gke(t))return .7}function NOt(e,t,{graticule:n}){if(n)return!1;const r=Lp("filled",e,t),i=e.type;return Bs(r,i!==p5&&i!==h5&&i!==W6)}function OOt(e,t,n){switch(e){case p5:case fJ:case dJ:case xke:case KNt:case YNt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case d5:if(Pt(r)&&(ha(r.bin)||Pt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Pt(i)&&(ha(i.bin)||Pt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Pt(r)&&r.type===Qb&&!Pi(r.bin)||Y6(r))&&Pt(i)&&ha(i.bin)?"horizontal":"vertical";if(!o)return(Pt(i)&&i.type===Qb&&!Pi(i.bin)||Y6(i))&&Pt(r)&&ha(r.bin)?"vertical":"horizontal"}case W6:if(s&&!(Pt(r)&&ha(r.bin))&&o&&!(Pt(i)&&ha(i.bin)))return;case f5:if(o)return Pt(i)&&ha(i.bin)?"horizontal":"vertical";if(s)return Pt(r)&&ha(r.bin)?"vertical":"horizontal";if(e===W6){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case h5:case cJ:{const a=Zle(r),u=Zle(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Hu(r)&&r.type===hT,c=Hu(i)&&i.type===hT;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function $Ot(e){const{point:t,line:n,...r}=e;return _t(r).length>1?r:r.type}function LOt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Nl(e[t],["point","line"])});return e}function PB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ut(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ut(t.point)?t.point:{}:void 0}function uce(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class MOt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(tg(t)){const{mark:r,encoding:i}=t,s=Mp(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!PB(s,n[s.type],i);case"area":return!!PB(s,n[s.type],i)||!!uce(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=w5(l,i),d=Mp(a)?a:{type:a},h=PB(d,i[d.type],f),p=d.type==="area"&&uce(d,i[d.type]),g=[{name:u,...s?{params:s}:{},mark:$Ot({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Nl(f,["shape"])}],y=mIe(gIe(d,f,i),f);let x=f;if(y){const{fieldChannel:b,offset:_}=y;x={...f,[b]:{...f[b],..._?{stack:_}:{}}}}return x=Nl(x,["y2","x2"]),p&&g.push({...o?{projection:o}:{},mark:{type:"line",...lT(d,["clip","interpolate","tension","tooltip"]),...p},encoding:x}),h&&g.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...lT(d,["clip","tooltip"]),...h},encoding:x}),r({...c,layer:g},{...n,config:LOt(i)})}}function FOt(e,t){return t?kR(e)?vIe(e,t):yIe(e,t):e}function DB(e,t){return t?vIe(e,t):e}function sV(e,t,n){const r=t[e];if(x3t(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};It(gDt(r.repeat));return}return t}function yIe(e,t){if(e=sV("field",e,t),e!==void 0){if(e===null)return null;if(bJ(e)&&b0(e.sort)){const n=sV("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function lce(e,t){if(Pt(e))return yIe(e,t);{const n=sV("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function cce(e,t){if(Ln(e)){const n=lce(e,t);if(n)return n;if(IR(e))return{condition:e.condition}}else{if(RR(e)){const n=lce(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function vIe(e,t){const n={};for(const r in e)if(Ct(e,r)){const i=e[r];if(at(i))n[r]=i.map(s=>cce(s,t)).filter(s=>s);else{const s=cce(i,t);s!==void 0&&(n[r]=s)}}return n}class BOt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(tg(t)){const{encoding:n,mark:r}=t;if(r==="line"||Mp(r)&&r.type==="line")for(const i of OPt){const s=Lx(i),o=n[s];if(n[i]&&(Pt(o)&&!ha(o.bin)||im(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return It(FDt(!!i.x2,!!i.y2)),r({...t,mark:Ut(s)?{...s,type:"rule"}:"rule"},n)}}class jOt extends NJ{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[z3t,q3t,J3t,new MOt,new BOt]}map(t,n){if(tg(t)){const r=Eb(t.encoding,y0),i=Eb(t.encoding,v0),s=Eb(t.encoding,e5);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=DB(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return SOt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Yi(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!at(r)&&t.columns&&(t=Nl(t,["columns"]),It(Vle("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!at(r)&&r.row||[u?u.row:null],f=!at(r)&&r.column||[u?u.column:null],d=at(r)&&r||[u?u.repeat:null];for(const p of d)for(const g of c)for(const y of f){const x={repeat:p,row:g,column:y,layer:u.layer},b=(i.name?`${i.name}_`:"")+l+"child__"+(at(r)?`${Yi(p)}`:(r.row?`row_${Yi(g)}`:"")+(r.column?`column_${Yi(y)}`:"")),_=this.map(i,{...n,repeater:x,repeaterPrefix:b});_.name=b,a.push(Nl(_,["data"]))}const h=at(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return kR(r)&&t.columns&&(t=Nl(t,["columns"]),It(Vle("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=dce({parentProjection:o,projection:i}),l=fce({parentEncoding:s,encoding:DB(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:g,layout:y}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),x=DB(o,n.repeater);return this.mapFacet({...p,...y,facet:g,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:x,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&It(LDt([...r?[y0]:[],...i?[v0]:[]]));const o={},a={};for(const u of[y0,v0]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const g of["align","center","spacing"])l[g]!==void 0&&(a[g]??(a[g]={}),a[g][u]=l[g])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:FOt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:fce({parentEncoding:n,encoding:s,layer:!0}),parentProjection:dce({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function fce({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([..._t(e),..._t(t)]);for(const s of i){const o=t[s],a=e[s];if(Ln(o)){const u={...a,...o};r[s]=u}else RR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Jd(a)||cn(a)||Ln(a)||at(a))&&(r[s]=a)}}else r=t;return!r||di(r)?void 0:r}function dce(e){const{parentProjection:t,projection:n}=e;return t&&n&&It(SDt({parentProjection:t,projection:n})),n??t}function OJ(e){return Ct(e,"filter")}function UOt(e){return Ct(e,"stop")}function bIe(e){return Ct(e,"lookup")}function zOt(e){return Ct(e,"data")}function VOt(e){return Ct(e,"param")}function HOt(e){return Ct(e,"pivot")}function qOt(e){return Ct(e,"density")}function WOt(e){return Ct(e,"quantile")}function GOt(e){return Ct(e,"regression")}function YOt(e){return Ct(e,"loess")}function KOt(e){return Ct(e,"sample")}function XOt(e){return Ct(e,"window")}function QOt(e){return Ct(e,"joinaggregate")}function JOt(e){return Ct(e,"flatten")}function ZOt(e){return Ct(e,"calculate")}function xIe(e){return Ct(e,"bin")}function e4t(e){return Ct(e,"impute")}function t4t(e){return Ct(e,"timeUnit")}function n4t(e){return Ct(e,"aggregate")}function r4t(e){return Ct(e,"stack")}function i4t(e){return Ct(e,"fold")}function s4t(e){return Ct(e,"extent")&&!Ct(e,"density")&&!Ct(e,"regression")}function o4t(e){return e.map(t=>OJ(t)?{filter:yE(t.filter,PNt)}:t)}class a4t extends NJ{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=hce(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=hce(t,n),t.encoding){const r={};for(const[i,s]of e1(t.encoding))r[i]=wIe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:e1(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Ta(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function hce(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(OJ(s))return{filter:oV(s,t)};if(xIe(s)&&Mx(s.bin))return{...s,bin:_Ie(s.bin)};if(bIe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function wIe(e,t){var r,i;const n=Dn(e);if(Pt(n)&&Mx(n.bin)&&(n.bin=_Ie(n.bin)),Ux(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(IR(n))if(at(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:oV(s,t)}});else{const{selection:s,param:o,test:a,...u}=wIe(n.condition,t);n.condition=o?n.condition:{...u,test:oV(n.condition,t)}}return n}function _Ie(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function oV(e,t){const n=r=>yE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):yE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class aV extends NJ{map(t,n){const r=n.selections??[];if(t.params&&!tg(t)){const i=[];for(const s of t.params)RJ(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Ht(a)&&(a===t.name||i.includes(a))||at(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=aV.prototype[e];aV.prototype[e]=function(n,r){return t.call(this,n,u4t(n,r))}}function u4t(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function EIe(e,t){t===void 0&&(t=pIe(e.config));const n=d4t(e,t),{width:r,height:i}=e,s=h4t(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const l4t=new jOt,c4t=new a4t,f4t=new aV;function d4t(e,t={}){const n={config:t};return f4t.map(l4t.map(c4t.map(e,n),n),n)}function pce(e){return Ht(e)?{type:e}:e??{}}function h4t(e,t,n){let{width:r,height:i}=t;const s=tg(e)||E5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(It(Ble("width")),r=void 0),i=="container"&&(It(Ble("height")),i=void 0));const a={type:"pad",...o,...n?pce(n.autosize):{},...pce(e.autosize)};if(a.type==="fit"&&!s&&(It(sDt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&It(jle("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&It(jle("height")),!Cc(a,{type:"pad"}))return a}function p4t(e){return["fit","fit-x","fit-y"].includes(e)}function m4t(e){return e?`fit-${s5(e)}`:"fit"}const g4t=["background","padding"];function mce(e,t){const n={};for(const r of g4t)e&&e[r]!==void 0&&(n[r]=xc(e[r]));return t&&(n.params=e.params),n}class ng{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ng(Dn(this.explicit),Dn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Bs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of _t(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Wh(e){return{explicit:!0,value:e}}function gc(e){return{explicit:!1,value:e}}function TIe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:T5(t,n,r,i)}}function T5(e,t,n,r){return e.explicit&&t.explicit&&It(YDt(n,r,e.value,t.value)),e}function r1(e,t,n,r,i=T5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Cc(e.value,t.value)?e:i(e,t,n,r)}class y4t extends ng{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function vT(e){return Ct(e,"url")}function Zk(e){return Ct(e,"values")}function SIe(e){return Ct(e,"name")&&!vT(e)&&!Zk(e)&&!Iy(e)}function Iy(e){return e&&(CIe(e)||AIe(e)||$J(e))}function CIe(e){return Ct(e,"sequence")}function AIe(e){return Ct(e,"sphere")}function $J(e){return Ct(e,"graticule")}var rs;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(rs||(rs={}));function kIe({invalid:e,isPath:t}){switch(Eke(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function v4t(e){const{marks:t,scales:n}=kIe(e);return t===n?rs.Main:n==="include-invalid-values"?rs.PreFilterInvalid:rs.PostFilterInvalid}class ai{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){It(_Dt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Ol extends ai{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${TAe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function NB(e){return e.as!==void 0}function gce(e){return`${e}_end`}class bp extends ai{clone(){return new bp(null,Dn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(jx(u)){if(ts(n)){const{mark:c,markDef:f,config:d}=n,h=n1({fieldDef:s,markDef:f,config:d});(Jk(c)||h)&&(l={timeUnit:Ho(u),field:a})}}else l={as:jt(s,{forAs:!0}),field:a,timeUnit:u};if(ts(n)){const{mark:c,markDef:f,config:d}=n,h=n1({fieldDef:s,markDef:f,config:d});Jk(c)&&js(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[gr(l)]=l)}return i},{});return di(r)?null:new bp(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Ho(r),o={...i,timeUnit:s};return new bp(t,{[gr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of e1(this.timeUnits)){const s=NB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Ta(this.timeUnits).map(t=>NB(t)?t.as:gce(t.field)))}dependentFields(){return new Set(Ta(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${gr(this.timeUnits)}`}assemble(){const t=[];for(const n of Ta(this.timeUnits)){const{rectBandPosition:r}=n,i=Ho(n.timeUnit);if(NB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Df(s),type:"timeunit",...a?{units:l5(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...yce(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=IIe({timeUnit:i,field:o}),u=gce(o);t.push({type:"formula",expr:a,as:u}),t.push(...yce([o,u],r,i))}}return t}}const S5="offsetted_rect_start",C5="offsetted_rect_end";function IIe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=ske(r),{part:o,step:a}=lke(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${ii(t)}, ${n?-a:a})`}function yce([e,t],n,r){if(n!==void 0&&n!==.5){const i=ii(e),s=ii(t);return[{type:"formula",expr:vce([IIe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${S5}`},{type:"formula",expr:vce([i,s],n+.5),as:`${e}_${C5}`}]}return[]}function vce([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const NR="_tuple_fields";class b4t{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const x4t={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new b4t),s={},o={},a=new Set,u=(p,g)=>{const y=g==="visual"?p.channel:p.field;let x=Yi(`${r}_${y}`);for(let b=1;a.has(x);b++)x=Yi(`${r}_${y}_${b}`);return a.add(x),{[g]:x}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Vt(n.value):null;let{fields:d,encodings:h}=Ut(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(Ut(p))for(const g of _t(p))NPt(g)?(h||(h=[])).push(g):l==="interval"?(It(mDt),h=c.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let y=g.field;if(g.aggregate){It(oDt(p,g.aggregate));continue}else if(!y){It(zle(p));continue}if(g.timeUnit&&!jx(g.timeUnit)){y=e.vgField(p);const x={timeUnit:g.timeUnit,as:y,field:g.field};o[gr(x)]=x}if(!s[y]){const x=l==="interval"&&rm(p)&&Qd(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",b={field:y,channel:p,type:x,index:i.items.length};b.signals={...u(b,"data"),...u(b,"visual")},i.items.push(s[y]=b),i.hasField[y]=s[y],i.hasSelectionId=i.hasSelectionId||y===eh,RAe(p)?(b.geoChannel=p,b.channel=IAe(p),i.hasChannel[b.channel]=s[y]):i.hasChannel[p]=s[y]}}else It(zle(p))}for(const p of d??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...u(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===eh}f&&(t.init=f.map(p=>i.items.map(g=>Ut(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),di(o)||(i.timeUnit=new bp(null,o))},signals:(e,t,n)=>{const r=t.name+NR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(NIe)})}},RIe="_curr",CO="anim_value",j_="anim_clock",uV="eased_anim_clock",PIe="min_extent",DIe="max_range_extent",OB="last_tick_at",$B="is_playing",w4t=1/60*1e3,_4t=(e,t)=>[{name:uV,update:j_},{name:`${e}_domain`,init:`domain('${t}')`},{name:PIe,init:`extent(${e}_domain)[0]`},{name:DIe,init:`extent(range('${t}'))[1]`},{name:CO,update:`invert('${t}', ${uV})`}],E4t={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(xp(t)&&(n=n.concat([{name:j_,init:"0",on:[{events:{type:"timer",throttle:w4t},update:`${$B} ? (${j_} + (now() - ${OB}) > ${DIe} ? 0 : ${j_} + (now() - ${OB})) : ${j_}`}]},{name:OB,init:"now()",on:[{events:[{signal:j_},{signal:$B}],update:"now()"}]},{name:$B,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+NR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Ta(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+xE):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Tb(e)}, `;if(t.project.hasSelectionId)l+=`${eh}: ${o}[${Ot(eh)}]`;else if(xp(t))l+=`fields: ${i}, values: [${CO} ? ${CO} : ${PIe}]`;else{const c=s.items.map(f=>{const d=e.fieldDef(f.channel);return d!=null&&d.bin?`[${o}[${Ot(e.vgField(f.channel,{}))}], ${o}[${Ot(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${o}[${Ot(f.field)}]`}).join(", ");l+=`fields: ${i}, values: [${c}]`}if(xp(t))return n.concat(_4t(t.name,e.scaleName(k1)),[{name:r+U0,on:[{events:[{signal:uV},{signal:CO}],update:`{${l}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+U0,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}}};function NIe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Df(i.field),i}function ex(e,t=!0,n=lu){if(at(e)){const r=e.map(i=>ex(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Bx(e))return n(t?Xb(e):bNt(e));return t?n(hi(e)):e}function T4t(e,t){for(const n of Ta(e.component.selection??{})){const r=n.name;let i=`${r}${U0}, ${n.resolve==="global"?"true":`{unit: ${Tb(e)}}`}`;for(const s of k5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+Q4t,on:[{events:{signal:n.name+U0},update:`modify(${Ot(n.name+tx)}, ${i})`}]})}return LJ(t)}function S4t(e,t){if(e.component.selection&&_t(e.component.selection).length){const n=Ot(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:C1("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return LJ(t)}function C4t(e,t){let n=!1;for(const r of Ta(e.component.selection??{})){const i=r.name,s=Ot(i+tx);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${XIe}(${s}, ${Ot(a)}${u}`})}n=!0;for(const a of k5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),LJ(t)}function A4t(e,t){const n=[],r=[],i=Tb(e,{escape:!1});for(const s of Ta(e.component.selection??{})){const o={name:s.name+tx};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:eh}}]),s.init){const u=s.project.items.map(NIe);o.values=s.project.hasSelectionId?s.init.map(l=>({unit:i,[eh]:ex(l,!1)[0]})):s.init.map(l=>({unit:i,fields:u,values:ex(l,!1)}))}if([...n,...t].filter(u=>u.name===s.name+tx).length||n.push(o),xp(s)&&t.length){const u=e.lookupDataSource(e.getDataName(rs.Main)),l=t.find(f=>f.name===u),c=l.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){l.transform=l.transform.filter(d=>d!==c);const f={name:l.name+RIe,source:l.name,transform:[c]};r.push(f)}}}return n.concat(t,r)}function OIe(e,t){for(const n of Ta(e.component.selection??{}))for(const r of k5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function k4t(e,t){for(const n of e.children)ts(n)&&(t=OIe(n,t));return t}function I4t(e,t,n,r){const i=tRe(e,t.param,t);return{signal:Qd(n.get("type"))&&at(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function LJ(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const x0={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!rm(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&It(cDt),!s||!Qd(o)){It(lDt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||cV(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(XIe))i.update=`{${r.map(o=>`${Ot(Df(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Ot(Df(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!cV(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function lV(e,t){return`domain(${Ot(e.scaleName(t))})`}function cV(e){return e.parent&&RS(e.parent)&&(!e.parent.parent||cV(e.parent.parent))}const xE="_brush",$Ie="_scale_trigger",gC="geo_interval_init_tick",LIe="_init",R4t="_center",P4t={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Ut(n.select)?n.select:{}};i.fields=[eh],i.encodings||(i.encodings=n.value?_t(n.value):[dh,fh]),n.select={type:"interval",...i}}if(t.translate&&!x0.defined(t)){const i=`!event.item || event.item.mark.name !== ${Ot(t.name+xE)}`;for(const s of t.events){if(!s.between){It(`${s} is not an ordered event stream for interval selections.`);continue}const o=Vt((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+U0,s=Ta(t.project.hasChannel).filter(a=>a.channel===Xi||a.channel===Xo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(D4t(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Ot(e.projectionName()),u=e.projectionName()+R4t,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,g=T=>e.getSizeSignalRef(T).signal,y=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;o&&(n.unshift({name:r+LIe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(k=>k.name===u)||n.unshift({name:u,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const x=`intersect(${y}, {markname: ${Ot(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${Tb(e)}}`,_=`vlSelectionTuples(${x}, ${b})`,E=s.map(T=>T.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...o?[{signal:gC}]:[]],update:_}]})}else{if(!x0.defined(t)){const l=r+$Ie,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,g=Ot(e.scaleName(d)),y=e.getScaleComponent(d).get("type"),x=Qd(y)?"+":"";return`(!isArray(${h}) || (${x}invert(${g}, ${p})[0] === ${x}${h}[0] && ${x}invert(${g}, ${p})[1] === ${x}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${Tb(e)}, fields: ${r+NR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${ex(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(ts(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===gC).length||n.unshift({name:gC,value:null,on:[{events:"timer{1}",update:`${gC} === null ? {} : ${gC}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Ot(t.name+tx)})`;if(x0.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const y of _t(l))l[y]=[{test:`${u}.length && ${u}[0].unit === ${Tb(e)}`,...l[y]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=_t(h).reduce((y,x)=>(y[x]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[x]},{value:null}],y),{}),g=d??(t.translate?"move":null);return[{name:`${r+xE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+xE,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function D4t(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Ot(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Xi?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=x0.defined(t),p=e.getScaleComponent(s),g=p?p.get("type"):void 0,y=r?{init:ex(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+$Ie},update:Qd(g)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...y,on:f},{name:d,...r?{init:ex(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Xi?0:1,h=t.name+LIe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}function CS({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=IR(t)&&t.condition;let o=[];s&&(o=Vt(s).map(l=>{const c=i(l);if(b3t(l)){const{param:f,empty:d}=l;return{test:eRe(e,{param:f,empty:d}),...c}}else return{test:n$(e,l.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function MJ(e,t="text"){const n=e.encoding[t];return CS({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>A5(r,e.config),invalidValueRef:void 0})}function A5(e,t,n="datum"){if(e){if(Jd(e))return ji(e.value);if(Ln(e)){const{format:r,formatType:i}=X6(e);return yJ({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function MIe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(at(o))return{tooltip:bce({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return CS({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const c=A5(l,i,a);if(c)return c;if(l===null)return;let f=fi("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),Ht(f))return{value:f};if(Ut(f))return cn(f)?f:f.content==="encoding"?bce(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function FIe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Lx(f),h=Hu(c)?c:{...c,type:e[d].type},p=h.title||wJ(h,i),g=Vt(p).join(", ").replaceAll(/"/g,'\\"');let y;if(js(f)){const x=f==="x"?"x2":"y2",b=Zd(e[x]);if(ha(h.bin)&&b){const _=jt(h,{expr:o}),E=jt(b,{expr:o}),{format:T,formatType:k}=X6(h);y=AR(_,E,T,k,i),s.add(x)}}if((js(f)||f===Vf||f===ch)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:x,formatType:b}=X6(h);y=yJ({fieldOrDatumDef:h,format:x,formatType:b,expr:o,config:i,normalizeStack:!0}).signal}y??(y=A5(h,i,o).signal),a.push({channel:f,key:g,value:y})}EJ(e,(c,f)=>{Pt(c)?u(c,f):y5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s.has(c)&&!l[f]&&(l[f]=d);return l}function bce(e,t,n,{reactiveGeom:r}={}){const i=FIe(e,t,n,{reactiveGeom:r}),s=e1(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function N4t(e){const{markDef:t,config:n}=e,r=fi("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...O4t(e),...$4t(e)}}function O4t(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=fi("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Kt(nDt,t)?{}:{ariaRoleDescription:{value:t}}}function $4t(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return CS({model:e,channelDef:s,vgChannel:"description",mainRefFn:u=>A5(u,e.config),invalidValueRef:void 0});const o=fi("description",n,r);if(o!=null)return{description:ji(o)};if(r.aria===!1)return{};const a=FIe(t,i,r);if(!di(a))return{description:{signal:e1(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function va(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;const l=i[e];a===void 0&&(u??(u=fi(e,r,s,{vgChannel:o,ignoreVgConfig:!IR(l)})),u!==void 0&&(a=ji(u)));const c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=Ske({...c,scaleChannel:e,channelDef:l});return CS({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:f,mainRefFn:h=>gJ({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function BIe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??fi("filled",n,i),a=ar(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=fi(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=fi(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:ji(u)}:{},...l?{stroke:ji(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&It(XAe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...va("color",e,{vgChannel:c,defaultValue:o?u:l}),...va("fill",e,{defaultValue:r.fill?u:void 0}),...va("stroke",e,{defaultValue:r.stroke?l:void 0})}}function L4t(e){const{encoding:t,mark:n}=e,r=t.order;return!O1(n)&&Jd(r)?CS({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>ji(i.value),invalidValueRef:void 0}):{}}function bT({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:gJ({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:ji(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Fu(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[nm(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=bT({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=FJ({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!u&&js(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:M4t({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function M4t(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Ln(n)&&i&&t===i.fieldChannel){if(Pt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return G6({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return _b(n,r,{suffix:"end"},{offset:s})}return mJ(e)}function FJ({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Lx(n),u=t1(n),l=fi(n,s,o,{vgChannel:u});if(l!==void 0)return VA(n,l);switch(t){case"zeroOrMin":return xce({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return xce({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[Ul(n)],mult:.5}}}}function xce({mainChannel:e,config:t,...n}){const r=Tke(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const F4t={left:"x",center:"xc",right:"x2"},B4t={top:"y",middle:"yc",bottom:"y2"};function jIe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return t1(e);const i=e==="x"?"align":"baseline",s=fi(i,t,n);let o;return cn(s)?(It(MDt(i)),o=void 0):o=s,e==="x"?F4t[o||(r==="top"?"left":"center")]:B4t[o||r]}function e$(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?UIe(e,t,{defaultPos:n,defaultPos2:r}):Fu(e,t,{defaultPos:n})}function UIe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=nm(e),a=Ul(e),u=j4t(t,r,o),l=u[a]?jIe(e,i,s):t1(e);return{...Fu(e,t,{defaultPos:n,vgChannel:l}),...u}}function j4t(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Lx(n),l=Ul(n),c=t1(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?bT({channel:n,markDef:s,encoding:r,model:e}):bT({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const y=Ul(n),x=e.markDef[y];return x!=null?{[y]:{value:x}}:{[c]:{field:e.getName(n)}}}const g=U4t({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:YD(n,s)||YD(n,{[n]:Qz(n,s,a.style),[l]:Qz(l,s,a.style)})||YD(n,a[i])||YD(n,a.mark)||{[c]:FJ({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function U4t({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Ln(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?_b(t,s,{suffix:"start"},{offset:u}):mJ({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function YD(e,t){const n=Ul(e),r=t1(e);if(t[r]!==void 0)return{[r]:VA(e,t[r])};if(t[e]!==void 0)return{[r]:VA(e,t[e])};if(t[n]){const i=t[n];if(Jb(i))It(PDt(n));else return{[n]:VA(e,i)}}}function j0(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=nm(t),a=Ul(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??fi("size",i,n,{vgChannel:a}),p=OAe(t),g=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||s==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return Pt(u)&&(Pi(u.bin)||ha(u.bin)||u.timeUnit&&!l)&&!(h&&!Jb(h))&&!r[p]&&!Go(f)?H4t({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Ln(u)&&Go(f)||g)&&!l?V4t(u,t,e):UIe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function z4t(e,t,n,r,i,s,o){if(Jb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Lp("minBandSize",{type:o},r);return{signal:c?`max(${Od(c)}, ${l})`:l}}else i.band!==1&&(It(UDt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(cn(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Fx(u)&&Vr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=Bs(u,o==="tick"?f:o==="bar"?l:c);if(cn(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Vr(d))return{signal:`${1-d} * ${e}`}}return{value:iV(r.view,e)-2}}function V4t(e,t,n){var D,L;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Ul(t),f=nm(t),d=OAe(t),h=n.scaleName(d),p=n.getScaleComponent(zQ(t)),g=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let y;(i.size||r.size)&&(g?y=va("size",n,{vgChannel:c,defaultRef:ji(r.size)}):It(qDt(r.type)));const x=!!y,b=Dke({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(D=l||p)==null?void 0:D.get("type"),useVlSizeChannel:g});y=y||{[c]:z4t(c,h||u,p||l,s,b,!!e,r.type)};const _=((L=l||p)==null?void 0:L.get("type"))==="band"&&Jb(b)&&!x?"top":"middle",E=jIe(t,r,s,_),T=E==="xc"||E==="yc",{offset:k,offsetType:I}=bT({channel:t,markDef:r,encoding:i,model:n,bandPosition:T?.5:0}),R=mJ({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:k,defaultRef:FJ({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:T?I==="encoding"?0:.5:cn(b)?{signal:`(1-${b})/2`}:Jb(b)?(1-b.band)/2:0});if(c)return{[E]:R,...y};{const M=t1(f),z=y[c],F=k?{...z,offset:k}:z;return{[E]:R,[M]:at(R)?[R[0],{...R[1],offset:F}]:{...R,offset:F}}}}function wce(e,t,n,r,i,s,o){if(kAe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(cn(n)||cn(i)||cn(r)||s){const l=Od(n),c=Od(i),f=Od(r),d=Od(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,g=f?`${f} + `:"",y=l?`(${l} ? -1 : 1) * `:"",x=c?`(${c} + ${p})`:p;return{signal:g+y+x}}else return i=i||0,r+(n?-i-u:+i+u)}function H4t({fieldDef:e,fieldDef2:t,channel:n,model:r}){var L;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=Dke({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(L=r.component.axes[n])==null?void 0:L[0],h=(d==null?void 0:d.get("translate"))??.5,p=js(n)?fi("binSpacing",s,i)??0:0,g=nm(n),y=t1(n),x=t1(g),b=Lp("minBandSize",s,i),{offset:_}=bT({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:E}=bT({channel:g,markDef:s,encoding:o,model:r,bandPosition:0}),T=h3t({fieldDef:e,scaleName:u}),k=wce(n,p,c,h,_,b,T),I=wce(g,p,c,h,E??_,b,T),R=cn(f)?{signal:`(1-${f.signal})/2`}:Jb(f)?(1-f.band)/2:.5,D=n1({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Pi(e.bin)||e.timeUnit){const M=e.timeUnit&&D!==.5;return{[x]:_ce({fieldDef:e,scaleName:u,bandPosition:R,offset:I,useRectOffsetField:M}),[y]:_ce({fieldDef:e,scaleName:u,bandPosition:cn(R)?{signal:`1-${R.signal}`}:1-R,offset:k,useRectOffsetField:M})}}else if(ha(e.bin)){const M=_b(e,u,{},{offset:I});if(Pt(t))return{[x]:M,[y]:_b(t,u,{},{offset:k})};if(Mx(e.bin)&&e.bin.step)return{[x]:M,[y]:{signal:`scale("${u}", ${jt(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}It(ZAe(g))}function _ce({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return G6({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:S5,endSuffix:C5}:{}})}const q4t=new Set(["aria","width","height"]);function Hf(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?BIe(e):{};return{...W4t(e.markDef,t),...Ece("fill",n),...Ece("stroke",r),...va("opacity",e),...va("fillOpacity",e),...va("strokeOpacity",e),...va("strokeWidth",e),...va("strokeDash",e),...L4t(e),...MIe(e),...MJ(e,"href"),...N4t(e)}}function Ece(e,t){return t?{[e]:t}:{}}function W4t(e,t){return tDt.reduce((n,r)=>(!q4t.has(r)&&Ct(e,r)&&t[r]!=="ignore"&&(n[r]=ji(e[r])),n),{})}function BJ(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var l;let o;if(!rm(s)||!(o=e.getScaleType(s)))return;const a=o5(i.aggregate),u=pJ({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(c3t(u)){const c=e.vgField(s,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>c5(s,!0)).join(" && ")}}}function Tce(e,t){if(t!==void 0)return{[e]:ji(t)}}const LB="voronoi",zIe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(LB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(O1(s))return It(aDt(s)),n;const o={name:e.getName(LB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...MIe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.includes(LB)&&(u=!0)}),u||n.splice(a+1,0,o),n}},VIe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!IJ(e.bind),parse:(e,t,n)=>QIe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=zIe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Yi(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:ex(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Ot(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(l=>l.name===r+U0),o=r+NR,a=i.items.map(l=>Yi(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},t$="_toggle",HIe={defined:e=>e.type==="point"&&!xp(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+t$,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+U0,r=t.name+t$;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Tb(e)}}, `)+`${r} ? ${n} : null`}},G4t={defined:e=>e.clear!==void 0&&e.clear!==!1&&!xp(e),parse:(e,t)=>{t.clear&&(t.clear=Ht(t.clear)?C1(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(VIe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Yi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+U0);r(i,"null"),HIe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+t$),r(i,"false"))}return n}},qIe={defined:e=>{const t=e.resolve==="global"&&e.bind&&IJ(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==eh;return t&&!n&&It(fDt),t&&n},parse:(e,t,n)=>{const r=Dn(n);if(r.select=Ht(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},QIe(t,r),Ut(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Vt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=RB(t.bind)?t.bind.legend:"click",s=Ht(i)?C1(i,"view"):Vt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=RB(t.bind)&&t.bind.legend,s=o=>a=>{const u=Dn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Yi(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+U0),o=r+NR,a=i.items.filter(d=>d.hasLegend).map(d=>Yi(`${r}_${Yi(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+t$),f=RB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Y4t(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Ta(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&qIe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const WIe="_translate_anchor",GIe="_translate_delta",K4t={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=x0.defined(t),s=r+WIe,{x:o,y:a}=t.project.hasChannel;let u=C1(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+xE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?lV(e,Xi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?lV(e,Xo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+GIe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Sce(e,t,o,"width",n),a!==void 0&&Sce(e,t,a,"height",n),n}};function Sce(e,t,n,r,i){const s=t.name,o=s+WIe,a=s+GIe,u=n.channel,l=x0.defined(t),c=i.find(T=>T.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),g=l?u===Xi?p?"":"-":p?"-":"":"",y=`${o}.extent_${u}`,x=`${g}${a}.${u} / ${l?`${f}`:`span(${y})`}`,b=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",E=`${b}(${y}, ${x}${_})`;c.on.push({events:{signal:a},update:l?E:`clampRange(${E}, 0, ${f})`})}const YIe="_zoom_anchor",KIe="_zoom_delta",X4t={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=x0.defined(t),s=r+KIe,{x:o,y:a}=t.project.hasChannel,u=Ot(e.scaleName(Xi)),l=Ot(e.scaleName(Xo));let c=C1(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+xE,f))),n.push({name:r+YIe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Cce(e,t,o,"width",n),a!==void 0&&Cce(e,t,a,"height",n),n}};function Cce(e,t,n,r,i){const s=t.name,o=n.channel,a=x0.defined(t),u=i.find(b=>b.name===n.signals[a?"data":"visual"]),l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?lV(e,o):u.name,h=s+KIe,p=`${s}${YIe}.${o}`,g=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",y=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",x=`${g}(${d}, ${p}, ${h}${y})`;u.on.push({events:{signal:h},update:a?x:`clampRange(${x}, 0, ${l})`})}const tx="_store",U0="_tuple",Q4t="_modify",XIe="vlSelectionResolve",k5=[E4t,P4t,x4t,HIe,VIe,x0,qIe,G4t,K4t,X4t,zIe];function J4t(e){let t=e.parent;for(;t&&!Dc(t);)t=t.parent;return t}function Tb(e,{escape:t}={escape:!0}){let n=t?Ot(e.name):e.name;const r=J4t(e);if(r){const{facet:i}=r;for(const s of Ef)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Ot(r.vgField(s))}])`)}return n}function jJ(e){return Ta(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function QIe(e,t){(Ht(t.select)||!t.select.on)&&delete e.events,(Ht(t.select)||!t.select.clear)&&delete e.clear,(Ht(t.select)||!t.select.toggle)&&delete e.toggle}function xp(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function fV(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...fV(e.object)),t.push(...fV(e.property))),t)}function JIe(e){return e.object.type==="MemberExpression"?JIe(e.object):e.object.name==="datum"}function ZIe(e){const t=iQ(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&JIe(r)&&n.add(fV(r).slice(1).join("."))}),n}class AS extends ai{clone(){return new AS(null,this.model,Dn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=n$(this.model,this.filter,this),this._dependentFields=ZIe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Z4t(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const o=Yi(s.name),a=s.select,u=Ht(a)?a:a.type,l=Ut(a)?Dn(a):{type:u},c=r[u];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l.mark={...c.mark,...l.mark}),(l[h]===void 0||l[h]===!0)&&(l[h]=Dn(c[h]??l[h])));const f=n[o]={...l,name:o,type:u,init:s.value,bind:s.bind,events:Ht(l.on)?C1(l.on,"scope"):Vt(Dn(l.on))};if(xp(f)&&(i++,i>1)){delete n[o];continue}const d=Dn(s);for(const h of k5)h.defined(f)&&h.parse&&h.parse(e,f,d)}return i>1&&It(yDt),n}function eRe(e,t,n,r="datum"){const i=Ht(t)?t:t.param,s=Yi(i),o=Ot(s+tx);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Ot(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function tRe(e,t,n){const r=Yi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&It(vDt(s));else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,It(bDt(a,i,n,s))):s=a[0].field}return`${o.name}[${Ot(Df(s))}]`}function e6t(e,t){for(const[n,r]of e1(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Ol(new AS(t,e,{param:n}),i,rs.Lookup,e.component.data.outputNodeRefCounts)}}function n$(e,t,n){return zA(t,r=>Ht(r)?r:kNt(r)?eRe(e,r,n):fke(r))}function t6t(e,t){if(e)return at(e)&&!Jg(e)?e.map(n=>wJ(n,t)).join(", "):e}function MB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function uA(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=h,g=N3t[p],y=c[p];if(g&&g!==t&&g!=="both")delete c[p];else if(DR(y)){const{condition:x,...b}=y,_=Vt(x),E=ece[p];if(E){const{vgProp:T,part:k}=E,I=[..._.map(R=>{const{test:D,...L}=R;return{test:n$(null,D),...L}}),b];MB(c,k,T,I),delete c[p]}else if(E===null){const T={signal:_.map(k=>{const{test:I,...R}=k;return`${n$(null,I)} ? ${Fle(R)} : `}).join("")+Fle(b)};c[p]=T}}else if(cn(y)){const x=ece[p];if(x){const{vgProp:b,part:_}=x;MB(c,_,b,y),delete c[p]}}ar(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},di(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Bs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&cn(c.encode.labels.update.text)&&(p=Gb(a,"datum.label",c.encode.labels.update.text.signal)),MB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of zke)e.hasAxisPart(p)||delete c.encode[p];di(c.encode)&&delete c.encode}const h=t6t(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Bs(l,0)}}}}function nRe(e){const{axes:t}=e.component,n=[];for(const r of eg)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function n6t(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>uA(i,"grid",t)),...r.map(i=>uA(i,"grid",t)),...n.map(i=>uA(i,"main",t)),...r.map(i=>uA(i,"main",t))].filter(i=>i)}function Ace(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([..._t(o),..._t(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Od(o[c])} : ${Od(a[c])}`};return l}return t[i]})])}function r6t(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:mke(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=cn(n)?"axisOrient":`axis${wR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Ace(a,r,e,n),vgAxisConfig:Ace(u,r,e,n),axisConfigStyle:i6t([...u,...a],r)}}function i6t(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Vt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function dV(e,t,n,r={}){var s;const i=VAe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const kce={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??s6t(n,e),gridScale:({model:e,channel:t})=>o6t(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||iRe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||rRe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??u6t(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??l6t(t.type,n,Pt(t)&&!!t.timeUnit,Pt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??f6t({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:d6t,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=sRe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return qAe(i?[Jle(i)]:[],Pt(o)?[Jle(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>h6t(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??p6t(n,t)};function s6t(e,t){return!Go(e)&&Pt(t)&&!Pi(t==null?void 0:t.bin)&&!ha(t==null?void 0:t.bin)}function o6t(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function a6t(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return cn(s)?s:Qk(s);{const{configValue:o}=dV("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?Qk(o):n===Xi&&ar([lJ,uJ],e.type)&&!(Pt(e)&&e.timeUnit)?270:void 0}}function hV(e){return`(((${e.signal} % 360) + 360) % 360)`}function rRe(e,t,n,r){if(e!==void 0)if(n==="x"){if(cn(e)){const i=hV(e),s=cn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(cn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(cn(e)){const i=hV(e),s=cn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(cn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function iRe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(cn(e)){const o=hV(e),a=cn(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(cn(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function u6t(e,t){if(t==="x"&&ar(["quantitative","temporal"],e))return!0}function l6t(e,t,n,r){if(n&&!Ut(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function c6t(e){return e==="x"?"bottom":"left"}function f6t({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Go(t)&&t!=="log"){if(Pt(e)){if(Pi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&ar(["month","hours","day","quarter"],(i=Ho(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function d6t({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Pt(t)){const{timeUnit:n}=t;if(n){const r=uke(n);if(r)return{signal:r}}}}function sRe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return WAe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function h6t(e,t){const n=e.values;if(at(n))return Uke(t,n);if(cn(n))return n}function p6t(e,t){return e==="rect"&&K6(t)?1:0}class xT extends ai{clone(){return new xT(null,Dn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=ZIe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Ux(r)&&Pke(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${fke({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new xT(t,{calculate:u,as:wT(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${gr(this.transform)}`}}function wT(e,t,n){return jt(e,{prefix:t,suffix:"sort_index",...n})}function I5(e,t){return ar(["top","bottom"],t)?"column":ar(["left","right"],t)||e==="row"?"row":"column"}function _T(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Bs((t||{})[e],i[e],n.header[e])}function R5(e,t,n,r){const i={};for(const s of e){const o=_T(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const UJ=["row","column"],zJ=["header","footer"];function m6t(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=R5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=I5(t,a),l=Qk(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...aRe(l,u),...oRe(u,l,s),...uRe(r,i,t,tOt,oIe)}}}function oRe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=iRe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function aRe(e,t){const n=rRe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function g6t(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of zJ)if(n[i])for(const s of n[i]){const o=v6t(e,t,i,n,s);o!=null&&r.push(o)}return r}function y6t(e,t){const{sort:n}=e;return b0(n)?{field:jt(n,{expr:"datum"}),order:n.order??"ascending"}:at(n)?{field:wT(e,t,{expr:"datum"}),order:"ascending"}:{field:jt(e,{expr:"datum"}),order:n??"ascending"}}function pV(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=R5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=yJ({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=I5(t,a);return{text:{signal:u?Gb(Gb(u,"datum.label",l),"datum.value",jt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...aRe(s,c),...oRe(c,s,o),...uRe(n,e,t,nOt,aIe)}}function v6t(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=R5(["labelOrient"],o.header,a,t);(t==="row"&&!ar(["top","bottom"],f)||t==="column"&&!ar(["left","right"],f))&&(s=pV(o,t,a))}const u=Dc(e)&&!kR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:y6t(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const b6t={column:{start:0,end:1},row:{start:1,end:0}};function x6t(e,t){return b6t[t][e]}function w6t(e,t){const n={};for(const r of Ef){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=R5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=I5(r,o),u=x6t(s,a);u!==void 0&&(n[a]=u)}}return di(n)?void 0:n}function uRe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=_T(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function VJ(e){return[...KD(e,"width"),...KD(e,"height"),...KD(e,"childWidth"),...KD(e,"childHeight")]}function KD(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Go(o)&&Fx(a)){const u=e.scaleName(n);return Dc(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Ice(u,a)]:[Ice(u,a),{name:i,update:lRe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=rV(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Ice(e,t){const n=`${e}_step`;return cn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function lRe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Bs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Od(o)}, ${Od(s)}) * ${e}_step`}function cRe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function fRe(e,t){return _t(e).reduce((n,r)=>({...n,...CS({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>ji(i.value),invalidValueRef:void 0})}),{})}function dRe(e,t){if(Dc(t))return e==="theta"?"independent":"shared";if(RS(t))return"shared";if(XJ(t))return js(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function HJ(e,t){const n=e.scale[t],r=js(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&It(XDt(t)),"independent"):e[r][t]||"shared"}const _6t={...sOt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},hRe=_t(_6t);class E6t extends ng{}const Rce={symbols:T6t,gradient:S6t,labels:C6t,entries:A6t};function T6t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...iDt({},n,e3t),...BIe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,g=d===void 0?pRe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Bl)delete f.fill;else if(Ct(f.fill,"field"))h?delete f.fill:(f.fill=ji(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=ji(g??1));else if(at(f.fill)){const y=mV(a.fill??a.color)??o.fill??(c&&o.color);y&&(f.fill=ji(y))}}if(f.stroke){if(r==="stroke"||!c&&r===Bl)delete f.stroke;else if(Ct(f.stroke,"field")||p)delete f.stroke;else if(at(f.stroke)){const y=Bs(mV(a.stroke||a.color),o.stroke,c?o.color:void 0);y&&(f.stroke={value:y})}}if(r!==Z0){const y=Pt(t)&&gRe(n,i,t);y?f.opacity=[{test:y,...ji(g??1)},ji(u.legend.unselectedOpacity)]:g&&(f.opacity=ji(g))}return f={...f,...e},di(f)?void 0:f}function S6t(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?pRe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=ji(l)),a={...a,...e},di(a)?void 0:a}function C6t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Pt(t)?gRe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;Zb(c)?f=$d({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=$d({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Pt(t)&&t.timeUnit===void 0&&(f=$d({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return di(d)?void 0:d}function A6t(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function pRe(e){return mRe(e,(t,n)=>Math.max(t,n.value))}function mV(e){return mRe(e,(t,n)=>Bs(t,n.value))}function mRe(e,t){if(w3t(e))return Vt(e.condition).reduce(t,e.value);if(Jd(e))return e.value}function gRe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Ot(n.field);return r.map(s=>`(!length(data(${Ot(Yi(s)+tx)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Pce={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return kke(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Ike(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??O6t(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??$6t(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??I6t(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>bE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(vE(n)&&op(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>k6t(t,e)};function k6t(e,t){const n=e.values;if(at(n))return Uke(t,n);if(cn(n))return n}function I6t(e,t,n,r){if(t!=="shape"){const i=mV(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function R6t(e){const{legend:t}=e;return Bs(t.type,P6t(e))}function P6t({channel:e,timeUnit:t,scaleType:n}){if(vE(e)){if(ar(["quarter","month","day"],t))return"symbol";if(op(n))return"gradient"}return"symbol"}function D6t({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??N6t(n,t)}function N6t(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function O6t({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(op(i))return n==="horizontal"?r==="top"||r==="bottom"?Dce(t,"width",o,s):o:Dce(t,"height",u,a)}function Dce(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function $6t(e){if(ar(["quantile","threshold","log","symlog"],e))return"greedy"}function yRe(e){const t=ts(e)?L6t(e):j6t(e);return e.component.legends=t,t}function L6t(e){const{encoding:t}=e,n={};for(const r of[Bl,...lIe]){const i=mo(t[r]);!i||!e.getScaleComponent(r)||r===jl&&Pt(i)&&i.type===SS||(n[r]=B6t(e,r))}return n}function M6t(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function F6t(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function B6t(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new E6t({},M6t(e,t));Y4t(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=mo(i[t]),f=Pt(c)?(E=Ho(c.timeUnit))==null?void 0:E.unit:void 0,d=n.orient||s.legend.orient||"right",h=R6t({legend:n,channel:t,timeUnit:f,scaleType:l}),p=D6t({legend:n,legendType:h,orient:d,legendConfig:o}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const T of hRe){if(h==="gradient"&&T.startsWith("symbol")||h==="symbol"&&T.startsWith("gradient"))continue;const k=T in Pce?Pce[T](g):n[T];if(k!==void 0){const I=F6t(k,T,n,e.fieldDef(t));(I||s.legend[T]===void 0)&&a.set(T,k,I)}}const y=(n==null?void 0:n.encoding)??{},x=a.get("selections"),b={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const T of["labels","legend","title","symbols","gradient","entries"]){const k=fRe(y[T]??{},e),I=T in Rce?Rce[T](k,_):k;I!==void 0&&!di(I)&&(b[T]={...x!=null&&x.length&&Pt(c)?{name:`${Yi(c.field)}_legend_${T}`}:{},...x!=null&&x.length?{interactive:!!x}:{},update:I})}return di(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function j6t(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){yRe(r);for(const i of _t(r.component.legends))n.legend[i]=HJ(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=vRe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of _t(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function vRe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of hRe){const c=r1(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return U6t(f,d);case"title":return GAe(f,d);case"type":return i=!0,gc("symbol")}return T5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&H6(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&H6(e.explicit,["encode","gradient"])),e}function U6t(e,t){return t.value==="circle"?t:e}function z6t(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function bRe(e){const t=e.component.legends,n={};for(const i of _t(t)){const s=e.getScaleComponent(i),o=hi(s.get("domains"));if(n[o])for(const a of n[o])vRe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Ta(n).flat().map(i=>V6t(i,e.config)).filter(i=>i!==void 0)}function V6t(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of lIe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&cn(s.encode.labels.update.text)&&(l=Gb(r,"datum.label",s.encode.labels.update.text.signal)),z6t(s,"labels","text",{signal:l})}return s}}function H6t(e){return RS(e)||XJ(e)?q6t(e):xRe(e)}function q6t(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),xRe(e))}function xRe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=cn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return ar(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const W6t=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class wRe extends ng{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function _Re(e){e.component.projection=ts(e)?G6t(e):X6t(e)}function G6t(e){if(e.hasProjection){const t=pa(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Y6t(e):void 0,s=new wRe(e.projectionName(!0),{...pa(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Y6t(e){const t=[],{encoding:n}=e;for(const r of[[dh,fh],[Nf,hh]])(mo(n[r[0]])||mo(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(jl)&&e.typedFieldDef(jl).type===SS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(rs.Main)),t}function K6t(e,t){const n=$Q(W6t,i=>!!(!Kt(e.explicit,i)&&!Kt(t.explicit,i)||Kt(e.explicit,i)&&Kt(t.explicit,i)&&Cc(e.get(i),t.get(i))));if(Cc(e.size,t.size)){if(n)return e;if(Cc(e.explicit,{}))return t;if(Cc(t.explicit,{}))return e}return null}function X6t(e){if(e.children.length===0)return;let t;for(const r of e.children)_Re(r);const n=$Q(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=K6t(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new wRe(r,t.specifiedProjection,t.size,Dn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Q6t(e,t,n,r){if(PR(t,n)){const i=ts(e)?e.axis(n)??e.legend(n)??{}:{},s=jt(t,{expr:"datum"}),o=jt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:jt(t,{binSuffix:"range",forAs:!0}),formula:AR(s,o,i.format,i.formatType,r)}}return{}}function ERe(e,t){return`${BAe(e)}_${t}`}function J6t(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function qJ(e,t,n){const r=v5(n,void 0)??{},i=ERe(r,t);return e.getName(`${i}_bins`)}function Z6t(e){return"as"in e}function Nce(e,t,n){let r,i;Z6t(e)?r=Ht(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[jt(e,{forAs:!0}),jt(e,{binSuffix:"end",forAs:!0})];const s={...v5(t,void 0)},o=ERe(s,e.field),{signal:a,extentSignal:u}=J6t(n,o);if(a5(s.extent)){const c=s.extent;i=tRe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class wp extends ai{clone(){return new wp(null,Dn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Hu(s)&&Pi(s.bin)){const{key:a,binComponent:u}=Nce(s,s.bin,n);i[a]={...u,...i[a],...Q6t(n,s,o,n.config)}}return i},{});return di(r)?null:new wp(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Nce(n,n.bin,r);return new wp(t,{[i]:s})}merge(t,n){for(const r of _t(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=sp([...this.bins[r].as,...t.bins[r].as],gr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Ta(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ta(this.bins).map(t=>t.field))}hash(){return`Bin ${gr(this.bins)}`}assemble(){return Ta(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Df(t.field),as:r,signal:t.signal,...a5(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Df(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:jt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function e$t(e,t,n,r){var s;const i=ts(r)?r.encoding[nm(t)]:void 0;if(Hu(n)&&ts(r)&&Nke(n,i,r.markDef,r.config)){e.add(jt(n,{})),e.add(jt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=n1({fieldDef:n,markDef:a,config:u});Jk(o)&&l!==.5&&js(t)&&(e.add(jt(n,{suffix:S5})),e.add(jt(n,{suffix:C5}))),n.bin&&PR(n,t)&&e.add(jt(n,{binSuffix:"range"}))}else if(RAe(t)){const o=IAe(t);e.add(r.getName(o))}else e.add(jt(n));return Ux(n)&&UNt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function t$t(e,t){for(const n of _t(t)){const r=t[n];for(const i of _t(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class zd extends ai{clone(){return new zd(null,new Set(this.dimensions),Dn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([jt(o,{forAs:!0})]);else{if(B0(u)||N1(u)){const c=B0(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([jt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([jt(o,{forAs:!0})]);rm(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([jt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([jt({field:l,aggregate:"max"},{forAs:!0})]))}else e$t(s,a,o,n)}),s.size+_t(i).length===0)?null:new zd(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:u,as:l}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([l||jt(o,{forAs:!0})])):(s[u]??(s[u]={}),(r=s[u])[a]??(r[a]=new Set),s[u][a].add(l||jt(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+_t(s).length===0?null:new zd(t,i,s)}merge(t){return wAe(this.dimensions,t.dimensions)?(t$t(this.measures,t.measures),!0):(dNt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,..._t(this.measures)])}producedFields(){const t=new Set;for(const n of _t(this.measures))for(const r of _t(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${gr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of _t(this.measures))for(const o of _t(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Df(s));return{type:"aggregate",groupby:[...this.dimensions].map(Df),ops:t,fields:n,as:r}}}class kS extends ai{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Ef){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[jt(o),...Pi(a)?[jt(o,{binSuffix:"end"})]:[]],...b0(u)?{sortField:u}:at(u)?{sortIndexField:wT(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Ef)this[n]&&(t+=` ${n.charAt(0)}:${gr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Ef)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Ef)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of eg){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Go(i)&&Fx(s)){const o=P5(this.childModel,n),a=KJ(o);a?t[n]=a:It(KQ(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=m5,field:f}=u;s.push(f),o.push(c),a.push(jt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of UJ){for(const c of zJ){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[v0,y0])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Oce(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function n$t(e,t){const n=FQ(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Oce(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Oce(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return It(wDt(t)),null}function r$t(e){const t={};return SO(e.filter,n=>{if(cke(n)){let r=null;tJ(n)?r=xc(n.equal):rJ(n)?r=xc(n.lte):nJ(n)?r=xc(n.lt):iJ(n)?r=xc(n.gt):sJ(n)?r=xc(n.gte):oJ(n)?r=n.range[0]:aJ(n)&&(r=(n.oneOf??n.in)[0]),r&&(Bx(r)?t[n.field]="date":Vr(r)?t[n.field]="number":Ht(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function i$t(e){const t={};function n(r){yT(r)?t[r.field]="date":r.type==="quantitative"&&KPt(r.aggregate)?t[r.field]="number":fT(r.field)>1?r.field in t||(t[r.field]="flatten"):Ux(r)&&b0(r.sort)&&fT(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((ts(e)||Dc(e))&&e.forEachFieldDef((r,i)=>{if(Hu(r))n(r);else{const s=Lx(i),o=e.fieldDef(s);n({...r,type:o.type})}}),ts(e)){const{mark:r,markDef:i,encoding:s}=e;if(O1(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Pt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function s$t(e){const t={};if(ts(e)&&e.component.selection)for(const n of _t(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&fT(i.field)>1&&(t[i.field]="flatten")}return t}class nu extends ai{clone(){return new nu(null,Dn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${gr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!Iy(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of _t(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:It(Hle(a,r[a],u.value)))}for(const a of _t(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:It(Hle(a,n[a],u)))}const s=new ng(n,r);i.copyAll(s);const o={};for(const a of _t(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return _t(o).length===0||i.parseNothing?null:new nu(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of _t(this._parse)){const r=this._parse[n];fT(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(_t(this._parse))}dependentFields(){return new Set(_t(this._parse))}assembleTransforms(t=!1){return _t(this._parse).filter(n=>t?fT(n)>1:!0).map(n=>{const r=n$t(n,this._parse[n]);return r?{type:"formula",expr:r,as:ES(n)}:null}).filter(n=>n!==null)}}class i1 extends ai{clone(){return new i1(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([eh])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:eh}}}class OR extends ai{clone(){return new OR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${gr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class $R extends ai{clone(){return new $R(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${gr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class nx extends ai{constructor(t){super(null),t??(t={name:"source"});let n;if(Iy(t)||(n=t.format?{...Nl(t.format,["parse"])}:{}),Zk(t))this._data={values:t.values};else if(vT(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];ar(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else AIe(t)?this._data={values:[{type:"Sphere"}]}:(SIe(t)||Iy(t))&&(this._data={});this._generator=Iy(t),t.name&&(this._name=t.name),n&&!di(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var $ce=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},o$t=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},lA;function WJ(e){return e instanceof nx||e instanceof OR||e instanceof $R}class GJ{constructor(){lA.set(this,void 0),$ce(this,lA,!1,"f")}setModified(){$ce(this,lA,!0,"f")}get modifiedFlag(){return o$t(this,lA,"f")}}lA=new WeakMap;class zx extends GJ{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class YJ extends GJ{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class a$t extends YJ{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of _t(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class u$t extends YJ{constructor(t){super(),this.requiresSelectionId=t&&jJ(t)}run(t){t instanceof i1&&(this.requiresSelectionId&&(WJ(t.parent)||t.parent instanceof zd||t.parent instanceof nu)||(this.setModified(),t.remove()))}}class l$t extends GJ{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof bp&&(r=t.producedFields(),LQ(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class c$t extends YJ{constructor(){super()}run(t){t instanceof Ol&&!t.isRequired()&&(this.setModified(),t.remove())}}class f$t extends zx{run(t){if(!WJ(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof nu)if(t instanceof nu)this.setModified(),t.merge(n);else{if(MQ(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class d$t extends zx{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof nu);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of _t(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!di(i)){this.setModified();const o=new nu(t,i);for(const a of n){if(a instanceof nu)for(const u of _t(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof nu&&_t(a.parse).length===0&&a.remove()}}}}}class h$t extends zx{run(t){t instanceof Ol||t.numChildren()>0||t instanceof kS||t instanceof nx||(this.setModified(),t.remove())}}class p$t extends zx{run(t){const n=t.children.filter(i=>i instanceof bp),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class m$t extends zx{run(t){const n=t.children.filter(i=>i instanceof zd),r={};for(const i of n){const s=gr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of _t(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class g$t extends zx{constructor(t){super(),this.model=t}run(t){const n=!(WJ(t)||t instanceof AS||t instanceof nu||t instanceof i1),r=[],i=[];for(const s of t.children)s instanceof wp&&(n&&!MQ(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof wp?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class y$t extends zx{run(t){const n=[...t.children];if(!cT(n,o=>o instanceof Ol)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Ol){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Ol)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class Vx extends ai{clone(){return new Vx(null,Dn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=sp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??jt(t)}hash(){return`JoinAggregateTransform ${gr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class ET extends ai{clone(){return new ET(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=rm(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,g=pJ({scaleChannel:f,markDef:s,config:i,scaleType:h,isCountAggregate:o5(p)});g!=="show"&&g!=="always-valid"&&(l[c.field]=c)}return l},{});return _t(u).length?new ET(t,u):null}dependentFields(){return new Set(_t(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${gr(this.filter)}`}assemble(){const t=_t(this.filter).reduce((n,r)=>{const i=this.filter[r],s=jt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${gV(s)}))`):i.type==="quantitative"&&n.push(gV(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function gV(e){return`isValid(${e}) && isFinite(+${e})`}function v$t(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=jt(r);return i&&t.push(i),t},[])}function b$t(e){return at(e)&&e.every(t=>Ht(t))&&e.length>1}class w0 extends ai{clone(){return new w0(null,Dn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Bs(f.order,"ascending"));const l={field:a,order:u};let c;return b$t(s)?c=s:Ht(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new w0(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Zd(p)}).filter(h=>!!h),c=v$t(n),f=n.encoding.order;let d;if(at(f)||Pt(f))d=HAe(f);else{const h=Oke(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new w0(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${gr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[jt(i,{binSuffix:"mid"})]:[jt(i,{}),jt(i,{binSuffix:"end"})]:[jt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=jt(c,{expr:"datum"}),p=jt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${gV(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:jt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:jt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class IS extends ai{clone(){return new IS(null,Dn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=sp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??jt(t)}hash(){return`WindowTransform ${gr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>GQ(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function x$t(e){function t(n){if(!(n instanceof kS)){const r=n.clone();if(r instanceof Ol){const i=vV+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof zd||r instanceof w0||r instanceof IS||r instanceof Vx)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function yV(e){if(e instanceof kS)if(e.numChildren()===1&&!(e.children[0]instanceof Ol)){const t=e.children[0];(t instanceof zd||t instanceof w0||t instanceof IS||t instanceof Vx)&&t.addDimensions(e.fields),t.swapWithParent(),yV(e)}else{const t=e.model.component.data.main;TRe(t);const n=x$t(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(yV)}function TRe(e){if(e instanceof Ol&&e.type===rs.Main&&e.numChildren()===1){const t=e.children[0];t instanceof kS||(t.swapWithParent(),TRe(e))}}const vV="scale_",XD=5;function bV(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!bV(t.children))return!1}return!0}function md(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Lce(e,t,n){let r=e.sources,i=!1;return i=md(new c$t,r)||i,i=md(new u$t(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=md(new h$t,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=md(new f$t,r)||i,i=md(new g$t(t),r)||i,i=md(new l$t,r)||i,i=md(new d$t,r)||i,i=md(new m$t,r)||i,i=md(new p$t,r)||i,i=md(new a$t,r)||i,i=md(new y$t,r)||i),e.sources=r,i}function w$t(e,t){bV(e.sources);let n=0,r=0;for(let i=0;i<XD&&Lce(e,t,!0);i++)n++;e.sources.map(yV);for(let i=0;i<XD&&Lce(e,t,!1);i++)r++;bV(e.sources),Math.max(n,r)===XD&&It(`Maximum optimization runs(${XD}) reached.`)}class Mo{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Mo(()=>t(n))}}function SRe(e){ts(e)?_$t(e):E$t(e)}function _$t(e){const t=e.component.scales;for(const n of _t(t)){const r=S$t(e,n);if(t[n].setWithExplicit("domains",r),A$t(e,n),e.component.data.isFaceted){let s=e;for(;!Dc(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)a0(a)&&(a.data=vV+a.data.replace(vV,""))}}}function E$t(e){for(const n of e.children)SRe(n);const t=e.component.scales;for(const n of _t(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=r1(r,o.getWithExplicit("domains"),"domains","scale",xV);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&It(pDt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function T$t(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Mce(t,n);if(!i){It(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Mce(t,n);if(i)return"unaggregated"}return e}function S$t(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=T$t(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&mo(r.x2)?mo(r.x)?r1(Wg(n,i,e,"x"),Wg(n,i,e,"x2"),"domain","scale",xV):Wg(n,i,e,"x2"):t==="y"&&mo(r.y2)?mo(r.y)?r1(Wg(n,i,e,"y"),Wg(n,i,e,"y2"),"domain","scale",xV):Wg(n,i,e,"y2"):Wg(n,i,e,t)}function C$t(e,t,n){return e.map(r=>({signal:`{data: ${b5(r,{timeUnit:n,type:t})}}`}))}function FB(e,t,n){var i;const r=(i=Ho(n))==null?void 0:i.unit;return t==="temporal"||r?C$t(e,t,r):[e]}function Wg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=mo(i[r]),{type:c}=l,f=l.timeUnit,d=v4t({invalid:Lp("invalid",s,a),isPath:O1(o)});if(jNt(t)){const g=Wg(e,void 0,n,r),y=FB(t.unionWith,c,f);return Wh([...y,...g.value])}else{if(cn(t))return Wh([t]);if(t&&t!=="unaggregated"&&!yke(t))return Wh(FB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return gc([[0,1]]);const g=n.requestDataName(d);return gc([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const h=rm(r)&&Pt(l)?k$t(n,r,e):void 0;if(im(l)){const g=FB([l.datum],c,f);return gc(g)}const p=l;if(t==="unaggregated"){const{field:g}=l;return gc([{data:n.requestDataName(d),field:jt({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:jt({field:g,aggregate:"max"})}])}else if(Pi(p.bin)){if(Go(e))return gc(e==="bin-ordinal"?[]:[{data:Xk(h)?n.requestDataName(d):n.requestDataName(rs.Raw),field:n.vgField(r,PR(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!Ut(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:g}=p;if(Pi(g)){const y=qJ(n,p.field,g);return gc([new Mo(()=>{const x=n.getSignalName(y);return`[${x}.start, ${x}.stop]`})])}else return gc([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&ar(["time","utc"],e)){const g=i[nm(r)];if(Nke(p,g,s,a)){const y=n.requestDataName(d),x=n1({fieldDef:p,fieldDef2:g,markDef:s,config:a}),b=Jk(o)&&x!==.5&&js(r);return gc([{data:y,field:n.vgField(r,b?{suffix:S5}:{})},{data:y,field:n.vgField(r,{suffix:b?C5:"end"})}])}}return gc(h?[{data:Xk(h)?n.requestDataName(d):n.requestDataName(rs.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function BB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":m5),...r?{field:Df(r)}:{},...i?{order:i}:{}}}function A$t(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=yke(r)?r:void 0,o=Mx(i)&&a5(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function k$t(e,t,n){if(!Go(n))return;const r=e.fieldDef(t),i=r.sort;if(Pke(i))return{op:"min",field:wT(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(b0(i)){const a=s&&!o.has(i.field);return BB(i,a)}else if(v3t(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(B0(c)||N1(c))return BB({field:jt(l),order:u},d);if(GQ(c)||!c)return BB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(ar(["ascending",void 0],i))return!0}}function Mce(e,t){const{aggregate:n,type:r}=e;return n?Ht(n)&&!QPt.has(n)?{valid:!1,reason:VDt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:HDt(e)}:{valid:!0}:{valid:!1,reason:zDt(e)}}function xV(e,t,n,r){return e.explicit&&t.explicit&&It(KDt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function I$t(e){const t=sp(e.map(o=>{if(a0(o)){const{sort:a,...u}=o;return u}return o}),gr),n=sp(e.map(o=>{if(a0(o)){const a=o.sort;return a!==void 0&&!Xk(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),gr);if(t.length===0)return;if(t.length===1){const o=e[0];if(a0(o)&&n.length>0){let a=n[0];if(n.length>1){It(Wle);const u=n.filter(l=>Ut(l)&&"op"in l&&l.op!=="min");n.every(l=>Ut(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(Ut(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=sp(n.map(o=>Xk(o)||!("op"in o)||Ht(o.op)&&Kt(GPt,o.op)?o:(It(QDt(o)),!0)),gr);let i;r.length===1?i=r[0]:r.length>1&&(It(Wle),i=!0);const s=sp(e.map(o=>a0(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function KJ(e){if(a0(e)&&Ht(e.field))return e.field;if(JPt(e)){let t;for(const n of e.fields)if(a0(n)&&Ht(n.field)){if(!t)t=n.field;else if(t!==n.field)return It(JDt),t}return It(ZDt),t}else if(ZPt(e)){It(eNt);const t=e.fields[0];return Ht(t)?t:void 0}}function P5(e,t){const r=e.component.scales[t].get("domains").map(i=>(a0(i)&&(i.data=e.lookupDataSource(i.data)),i));return I$t(r)}function CRe(e){return RS(e)||XJ(e)?e.children.reduce((t,n)=>t.concat(CRe(n)),Fce(e)):Fce(e)}function Fce(e){return _t(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=R$t(i.range,s,n,e),h=P5(e,n),p=a?I4t(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function R$t(e,t,n,r){if(js(n)){if(Fx(e))return{step:{signal:`${t}_step`}}}else if(Ut(e)&&a0(e))return{...e,data:r.lookupDataSource(e.data)};return e}class ARe extends ng{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(ar([ma.LOG,ma.TIME,ma.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&ar([ma.LINEAR,ma.SQRT,ma.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(at(a)){const u=a[0],l=a[a.length-1];if(Vr(u)&&Vr(l))if(u<=0&&l>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const P$t=["range","scheme"];function D$t(e){const t=e.component.scales;for(const n of WQ){const r=t[n];if(!r)continue;const i=N$t(n,e);r.setWithExplicit("range",i)}}function Bce(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Ul(t),o=e.getName(s);if(Ut(r)&&r.binned&&r.step!==void 0)return new Mo(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Pi(r)){const a=qJ(e,i,r);return new Mo(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function N$t(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of P$t)if(n[f]!==void 0){const d=eV(s,f),h=vke(e,f);if(!d)It(QAe(s,f,e));else if(h)It(h);else switch(f){case"range":{const p=n.range;if(at(p)){if(js(e))return Wh(p.map(g=>{if(g==="width"||g==="height"){const y=t.getName(g),x=t.getSignalName.bind(t);return Mo.fromName(x,y)}return g}))}else if(Ut(p))return Wh({data:t.requestDataName(rs.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Wh(p)}case"scheme":return Wh(O$t(n[f]))}}const o=e===Xi||e==="xOffset"?"width":"height",a=r[o];if(Fp(a)){if(js(e))if(Go(s)){const f=IRe(a,t,e);if(f)return Wh({step:f})}else It(JAe(o));else if(TR(e)){const f=e===A1?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=RRe(a,s);if(p)return Wh(p)}}}const{rangeMin:u,rangeMax:l}=n,c=$$t(e,t);return(u!==void 0||l!==void 0)&&eV(s,"rangeMin")&&at(c)&&c.length===2?Wh([u??c[0],l??c[1]]):gc(c)}function O$t(e){return BNt(e)?{scheme:e.name,...Nl(e,["name"])}:{scheme:e}}function kRe(e,t,n,{center:r}={}){const i=Ul(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Xo&&Qd(n)?r?[Mo.fromName(a=>`${o(a)}/2`,s),Mo.fromName(a=>`-${o(a)}/2`,s)]:[Mo.fromName(o,s),0]:r?[Mo.fromName(a=>`-${o(a)}/2`,s),Mo.fromName(a=>`${o(a)}/2`,s)]:[0,Mo.fromName(o,s)]}function $$t(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=mo(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Xi:case Xo:{if(ar(["point","band"],u)){const f=PRe(e,n,r.view);if(Fp(f))return{step:IRe(f,t,e)}}return kRe(e,t,u)}case A1:case TS:return L$t(e,t,u);case J0:{const f=B$t(i,r),d=j$t(i,n,t,r);return pT(u)?F$t(f,d,M$t(u,r,l,e)):[f,d]}case Vf:return[0,Math.PI*2];case $x:return[0,360];case ch:return[0,new Mo(()=>{const f=t.getSignalName(Dc(t.parent)?"child_width":"width"),d=t.getSignalName(Dc(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case k1:return{step:1e3/r.scale.framesPerSecond};case P1:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case D1:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case jl:return"symbol";case Bl:case em:case tm:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Z0:case I1:case R1:return[r.scale.minOpacity,r.scale.maxOpacity]}}function IRe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=zQ(n),o=r[s];if(fIe({step:e,offsetIsDiscrete:Ln(o)&&dke(o.type)})==="offset"&&qke(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${rDt(f)})`}}else return e.step}function RRe(e,t){if(fIe({step:e,offsetIsDiscrete:Go(t)})==="offset")return{step:e.step}}function L$t(e,t,n){const r=e===A1?"x":"y",i=t.getScaleComponent(r);if(!i)return kRe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=PRe(r,t.size,t.config.view);if(Fp(l)){const c=RRe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Pt(l)&&l.timeUnit){const c=uke(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=n1({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=cn(f)?`${f.signal}/2`+h:`${f/2+d}`,g=cn(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${g} * (${c})`}]}return[0,{signal:c}]}return bAe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function PRe(e,t,n){const r=e===Xi?"width":"height",i=t[r];return i||Z6(n,r)}function M$t(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&at(n)?n.length+1:(It(lNt(r)),3)}}function F$t(e,t,n){const r=()=>{const i=Od(t),s=Od(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return cn(t)?new Mo(r):{signal:r()}}function B$t(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(u5("size",e))}const jce=.95;function j$t(e,t,n,r){const i={x:Bce(n,"x"),y:Bce(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Uce(t,i,r.view);return Vr(s)?s-1:new Mo(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Uce(t,i,r.view);return Vr(s)?Math.pow(jce*s,2):new Mo(()=>`pow(${jce} * ${s.signal}, 2)`)}}throw new Error(u5("size",e))}function Uce(e,t,n){const r=Fp(e.width)?e.width.step:iV(n,"width"),i=Fp(e.height)?e.height.step:iV(n,"height");return t.x||t.y?new Mo(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function DRe(e,t){ts(e)?U$t(e,t):ORe(e,t)}function U$t(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of _t(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=mo(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),y=eV(h,t),x=vke(a,t);if(d!==void 0&&(y?x&&It(x):It(QAe(h,t,a))),y&&x===void 0)if(d!==void 0){const b=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":Bx(u[t])||_==="temporal"||b?l.set(t,{signal:b5(u[t],{type:_,timeUnit:b})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const b=Ct(zce,t)?zce[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:Wke(i,a),hasSecondaryRangeChannel:!!i[nm(a)]}):r.scale[t];b!==void 0&&l.set(t,b,!1)}}}const zce={bins:({model:e,fieldOrDatumDef:t})=>Pt(t)?z$t(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>V$t(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>H$t(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>q$t(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>W$t(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>G$t(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Pt(e)?e.sort:void 0;return Y$t(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>K$t(e,t,n,r,i,s.scale,o)};function NRe(e){ts(e)?D$t(e):ORe(e,"range")}function ORe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?NRe(r):DRe(r,t);for(const r of _t(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=r1(i,a,t,"scale",TIe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function z$t(e,t){const n=t.bin;if(Pi(n)){const r=qJ(e,t.field,n);return new Mo(()=>e.getSignalName(r))}else if(ha(n)&&Mx(n)&&n.step!==void 0)return{step:n.step}}function V$t(e,t){if(ar([Bl,em,tm],e)&&t!=="nominal")return"hcl"}function H$t(e,t,n,r,i,s){var o;if(!((o=Zd(s))!=null&&o.bin||at(n)||i!=null||r!=null||ar([ma.TIME,ma.UTC],e)))return js(t)?!0:void 0}function q$t(e,t,n,r,i,s){if(js(e)){if(op(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Pt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===ma.POINT)return n.pointPadding}}function W$t(e,t,n,r,i,s=!1){if(e===void 0){if(js(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=i;return s?c:Bs(o,n==="bar"?a:n==="tick"?l:u)}else if(TR(t)&&r===ma.BAND)return i.offsetBandPaddingInner}}function G$t(e,t,n,r,i,s=!1){if(e===void 0){if(js(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===ma.BAND)return Bs(o,cn(r)?{signal:`${r.signal}/2`}:r/2)}else if(TR(t)){if(n===ma.POINT)return .5;if(n===ma.BAND)return i.offsetBandPaddingOuter}}}function Y$t(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Qd(e)&&t==="descending"?cn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Qd(e)&&t==="descending")return!0}function K$t(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Qd(i)){if(at(n)){const u=n[0],l=n[n.length-1];if(Vr(u)&&u<=0&&Vr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!pT(i))return!0;if(!(Pt(t)&&t.bin)&&ar([...eg,...FPt],e)){const{orient:u,type:l}=r;return ar(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:ar(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function X$t(e,t,n,r,i=!1){const s=Q$t(t,n,r,i),{type:o}=e;return rm(t)?o!==void 0?WNt(t,o)?Pt(n)&&!qNt(o,n.type)?(It(GDt(o,s)),s):o:(It(WDt(t,o,s)),s):s:null}function Q$t(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(vE(e)||AB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&It(kB(e,"ordinal")),"ordinal";if(CB(e))return"band";if(js(e)||TR(e)){if(ar(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in qQ)return"band";const s=n[Ul(e)];return Jb(s)||gT(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return vE(e)?"time":AB(e)==="discrete"?(It(kB(e,"temporal")),"ordinal"):Pt(t)&&t.timeUnit&&Ho(t.timeUnit).utc?"utc":CB(e)?"band":"time";case"quantitative":return vE(e)?Pt(t)&&Pi(t.bin)?"bin-ordinal":"linear":AB(e)==="discrete"?(It(kB(e,"quantitative")),"ordinal"):CB(e)?"band":"linear";case"geojson":return}throw new Error(KAe(t.type))}function J$t(e,{ignoreRange:t}={}){$Re(e),SRe(e);for(const n of HNt)DRe(e,n);t||NRe(e)}function $Re(e){ts(e)?e.component.scales=Z$t(e):e.component.scales=tLt(e)}function Z$t(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of WQ){const o=mo(t[s]);if(o&&n===wke&&s===jl&&o.type===SS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=Wke(t,s),l=X$t(a,s,o,r,u);i[s]=new ARe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const eLt=TIe((e,t)=>Yle(e)-Yle(t));function tLt(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){$Re(s);for(const o of _t(s.component.scales))if((t=i.scale)[o]??(t[o]=dRe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?ONt(a.value,u.value)?r[o]=r1(a,u,"type","scale",eLt):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of _t(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new ARe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class jB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function ts(e){return(e==null?void 0:e.type)==="unit"}function Dc(e){return(e==null?void 0:e.type)==="facet"}function XJ(e){return(e==null?void 0:e.type)==="concat"}function RS(e){return(e==null?void 0:e.type)==="layer"}class QJ{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=pa(a),this.name=t.name??i,this.title=Jg(t.title)?{text:t.title}:t.title?pa(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new jB,this.projectionNameMap=r?r.projectionNameMap:new jB,this.signalNameMap=r?r.signalNameMap:new jB,this.data=t.data,this.description=t.description,this.transforms=o4t(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:cOt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:g5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new ng,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?Dn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){J$t(this)}parseProjection(){_Re(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){yRe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of _t(r)){const o=r[s];o!==void 0&&(i[s]=ji(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=ji(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:di(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=w6t(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Ef)t[r].title&&n.push(m6t(this,r));for(const r of UJ)n=n.concat(g6t(this,r));return n}assembleAxes(){return n6t(this.component.axes,this.config)}assembleLegends(){return bRe(this)}assembleProjections(){return H6t(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...jAe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return ar(["unit","layer"],this.type)?ar(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),di(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Dc(this.parent)?CRe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Yi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(rs[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Dc(this.parent)){const n=cRe(t),r=s5(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Go(s)&&Fx(o)){const a=i.get("name"),u=P5(this,r),l=KJ(u);if(l){const c=jt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:lRe(a,i,c)}}else return It(KQ(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(DAe(t)&&rm(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(uDt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class LRe extends QJ{vgField(t,n={}){const r=this.fieldDef(t);if(r)return jt(r,n)}reduceFieldDef(t,n){return B3t(this.getMapping(),(r,i,s)=>{const o=Zd(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){EJ(this.getMapping(),(r,i)=>{const s=Zd(r);s&&t(s,i)},n)}}class D5 extends ai{clone(){return new D5(null,Dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${gr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class N5 extends ai{clone(){return new N5(null,Dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Dn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${gr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class O5 extends ai{clone(){return new O5(this.parent,Dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Dn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${gr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class $5 extends ai{clone(){return new $5(null,Dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${gr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class wE extends ai{clone(){return new wE(null,Dn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[dh,fh],[Nf,hh]]){const s=i.map(o=>{const a=mo(n.encoding[o]);return Pt(a)?a.field:im(a)?{expr:`${a.datum}`}:Jd(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new wE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(jl)){const i=n.typedFieldDef(jl);i.type===SS&&(t=new wE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Ht);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${gr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class eI extends ai{clone(){return new eI(null,this.projection,Dn(this.fields),Dn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[dh,fh],[Nf,hh]]){const i=r.map(o=>{const a=mo(n.encoding[o]);return Pt(a)?a.field:im(a)?{expr:`${a.datum}`}:Jd(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Nf?"2":"";(i[0]||i[1])&&(t=new eI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Ht))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${gr(this.fields)} ${gr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Sb extends ai{clone(){return new Sb(null,Dn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Sb(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Pt(i)&&Pt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=Kke(n.mark,r);return new Sb(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${gr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:UOt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class L5 extends ai{clone(){return new L5(null,Dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${gr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class tI extends ai{clone(){return new tI(null,Dn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(zOt(o)){let u=BRe(o.data,s);u||(u=new nx(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Ol(u,l,rs.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(VOt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Yi(u),u)}catch{throw new Error(dDt(u))}if(a=l.materialized,!a)throw new Error(hDt(u))}return new tI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Vt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${gr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Vt(this.transform.as)}:{}};else{let n=this.transform.as;Ht(n)||(It(TDt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class M5 extends ai{clone(){return new M5(null,Dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${gr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class F5 extends ai{clone(){return new F5(null,Dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${gr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class B5 extends ai{clone(){return new B5(null,Dn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=sp((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${gr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class j5 extends ai{clone(){return new j5(null,Dn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${gr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function MRe(e){let t=0;function n(r,i){if(r instanceof nx&&!r.isGenerator&&!vT(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof nu&&(r.parent instanceof nx&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof kS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof OR||r instanceof $R||r instanceof ET||r instanceof AS||r instanceof xT||r instanceof eI||r instanceof zd||r instanceof tI||r instanceof IS||r instanceof Vx||r instanceof $5||r instanceof O5||r instanceof D5||r instanceof L5||r instanceof M5||r instanceof F5||r instanceof i1||r instanceof j5||r instanceof B5||r instanceof N5)&&i.transform.push(r.assemble()),(r instanceof wp||r instanceof bp||r instanceof Sb||r instanceof w0||r instanceof wE)&&i.transform.push(...r.assemble()),r instanceof Ol&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Ol?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Ol&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function nLt(e){const t=[],n=MRe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function rLt(e,t){const n=[],r=MRe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function iLt(e){return e==="top"||e==="left"||cn(e)?"header":"footer"}function sLt(e){for(const t of Ef)oLt(e,t);Vce(e,"x"),Vce(e,"y")}function oLt(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=_T("title",null,r,t);let l=bE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=at(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=_T("labelOrient",a.header,r,t),f=a.header!==null?Bs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=ar(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[FRe(e,t,f)]}}}function FRe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Vce(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=HJ(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=iLt(a.get("orient"));o[u]??(o[u]=[FRe(e,s,!1)]);const l=uA(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function aLt(e){JJ(e),r$(e,"width"),r$(e,"height")}function uLt(e){JJ(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";r$(e,t),r$(e,n)}function JJ(e){for(const t of e.children)t.parseLayoutSize()}function r$(e,t){const n=cRe(t),r=s5(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??dRe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=r1(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function lLt(e){const{size:t,component:n}=e;for(const r of eg){const i=Ul(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Fp(s)?"step":s,!0)}else{const s=cLt(e,i);n.layoutSize.set(i,s,!1)}}}function cLt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Go(s)){const a=Z6(r.view,t);return Fx(o)||Fp(a)?"step":a}else return rV(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return rV(r.view,t);{const s=Z6(r.view,t);return Fp(s)?s.step:s}}}function wV(e,t,n){return jt(t,{suffix:`by_${jt(e)}`,...n})}class HA extends LRe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=rZ(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!kR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=_t(t),r={};for(const i of n){if(![y0,v0].includes(i)){It(u5(i,"facet"));break}const s=t[i];if(s.field===void 0){It(Jz(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=_J(t,n);return r.header?r.header=pa(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return Ct(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=U5(this),this.child.parseData()}parseLayoutSize(){JJ(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>xp(t))&&QQ(XQ)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),sLt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Ef)for(const r of zJ){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=_T("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=I5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof HA))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof HA?{...this.channelHasField("column")?{encode:{update:{columns:{field:jt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof HA){if(this.child.channelHasField("column")){const i=jt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of eg){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Go(o)&&Fx(a)){const u=P5(this.child,i),l=KJ(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):It(KQ(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Ef){const f=this.facet[c];if(f){u.push(jt(f));const{bin:d,sort:h}=f;if(Pi(d)&&u.push(jt(f,{binSuffix:"end"})),b0(h)){const{field:p,op:g=m5}=h,y=wV(f,h);r&&i?(s.push(y),o.push("max"),a.push(y)):(s.push(p),o.push(g),a.push(y))}else if(at(h)){const p=wT(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?b0(r.sort)?[wV(r,r.sort,{expr:"datum"})]:at(r.sort)?[wT(r,t,{expr:"datum"})]:[jt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(b0(i)?i.order:!at(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return pV(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of UJ)if(t[s]){const o=_T("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return pV(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=nLt(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Ef.map(u=>this.facetSortFields(u)).flat(),order:Ef.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(S4t(this,[]))}]}getMapping(){return this.facet}}function fLt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(b0(s.sort)){const{field:o,op:a=m5}=s.sort;e=i=new Vx(e,{joinaggregate:[{op:a,field:o,as:wV(s,s.sort,{forAs:!0})}],groupby:[jt(s)]})}return i}return null}function BRe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(Zk(e)&&Zk(a)){if(Cc(e.values,a.values))return o}else if(vT(e)&&vT(a)){if(e.url===a.url)return o}else if(SIe(e)&&e.name===o.dataName)return o}}return null}function dLt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new nx({values:[]});return t.push(r),r}const n=BRe(e.data,t);if(n)return Iy(e.data)||(n.data.format=xAe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new nx(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function hLt(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(ZOt(i))o=e=new xT(e,i),s="derived";else if(OJ(i)){const a=r$t(i);o=e=nu.makeWithAncestors(e,{},a,n)??e,e=new AS(e,t,i.filter)}else if(xIe(i))o=e=wp.makeFromTransform(e,i,t),s="number";else if(t4t(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new nu(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=bp.makeFromTransform(e,i);else if(n4t(i))o=e=zd.makeFromTransform(e,i),s="number",jJ(t)&&(e=new i1(e));else if(bIe(i))o=e=tI.make(e,t,i,r++),s="derived";else if(XOt(i))o=e=new IS(e,i),s="number";else if(QOt(i))o=e=new Vx(e,i),s="number";else if(r4t(i))o=e=w0.makeFromTransform(e,i),s="derived";else if(i4t(i))o=e=new $5(e,i),s="derived";else if(s4t(i))o=e=new N5(e,i),s="derived";else if(JOt(i))o=e=new O5(e,i),s="derived";else if(HOt(i))o=e=new B5(e,i),s="derived";else if(KOt(i))e=new j5(e,i);else if(e4t(i))o=e=Sb.makeFromTransform(e,i),s="derived";else if(qOt(i))o=e=new D5(e,i),s="derived";else if(WOt(i))o=e=new M5(e,i),s="derived";else if(GOt(i))o=e=new F5(e,i),s="derived";else if(YOt(i))o=e=new L5(e,i),s="derived";else{It(EDt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function U5(e){var y;let t=dLt(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(Iy(i)||vT(i)||Zk(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new y4t;Iy(i)?(CIe(i)?t=new $R(t,i.sequence):$J(i)&&(t=new OR(t,i.graticule)),o.parseNothing=!0):((y=i==null?void 0:i.format)==null?void 0:y.parse)===null&&(o.parseNothing=!0),t=nu.makeExplicit(t,e,o)??t,t=new i1(t);const a=e.parent&&RS(e.parent);(ts(e)||Dc(e))&&a&&(t=wp.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=hLt(t,e,o));const u=s$t(e),l=i$t(e);t=nu.makeWithAncestors(t,{},{...u,...l},o)??t,ts(e)&&(t=wE.parseAll(t,e),t=eI.parseAll(t,e)),(ts(e)||Dc(e))&&(a||(t=wp.makeFromEncoding(t,e)??t),t=bp.makeFromEncoding(t,e)??t,t=xT.parseAllForSortIndex(t,e));const c=t=QD(rs.Raw,e,t);if(ts(e)){const x=zd.makeFromEncoding(t,e);x&&(t=x,jJ(e)&&(t=new i1(t))),t=Sb.makeFromEncoding(t,e)??t,t=w0.makeFromEncoding(t,e)??t}let f,d;if(ts(e)){const{markDef:x,mark:b,config:_}=e,E=fi("invalid",x,_),{marks:T,scales:k}=d=kIe({invalid:E,isPath:O1(b)});T!==k&&k==="include-invalid-values"&&(f=t=QD(rs.PreFilterInvalid,e,t)),T==="exclude-invalid-values"&&(t=ET.make(t,e,d)??t)}const h=t=QD(rs.Main,e,t);let p;if(ts(e)&&d){const{marks:x,scales:b}=d;x==="include-invalid-values"&&b==="exclude-invalid-values"&&(t=ET.make(t,e,d)??t,p=t=QD(rs.PostFilterInvalid,e,t))}ts(e)&&e6t(e,h);let g=null;if(Dc(e)){const x=e.getName("facet");t=fLt(t,e.facet)??t,g=new kS(t,e,x,h.getSource()),n[x]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:g,ancestorParse:o,preFilterInvalid:f,postFilterInvalid:p}}function QD(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Ol(n,s,e,i);return r[s]=o,o}class pLt extends QJ{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&It(xDt),this.children=this.getChildren(t).map((l,c)=>rZ(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=U5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of _t(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>xp(t))&&QQ(XQ)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return _5(t)?t.vconcat:DJ(t)?t.hconcat:t.concat}parseLayoutSize(){uLt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=VJ(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function mLt(e){return e===!1||e===null}const gLt={disable:1,gridScale:1,scale:1,...Vke,labelExpr:1,encode:1},jRe=_t(gLt);class ZJ extends ng{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new ZJ(Dn(this.explicit),Dn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!mLt(this.get(t))}hasOrientSignalRef(){return cn(this.explicit.orient)}}function yLt(e,t,n){const{encoding:r,config:i}=e,s=mo(r[t])??mo(r[nm(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(Zb(u))return{text:$d({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(mT(s)==="quantitative"){if(gT(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:$d({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:$d({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(mT(s)==="temporal"&&i.timeFormatType&&Pt(s)&&!s.timeUnit)return{text:$d({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function vLt(e){return eg.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[SLt(n,e)]),t),{})}const bLt={bottom:"top",top:"bottom",left:"right",right:"left"};function xLt(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of _t(i.component.axes))n.axis[s]=HJ(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=wLt(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of eg){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!cn(a)){if(r[a]>0&&!u){const l=bLt[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function wLt(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=_Lt(i,s)}}}else return t.map(n=>n.clone());return e}function _Lt(e,t){for(const n of jRe){const r=r1(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return GAe(i,s);case"gridScale":return{explicit:i.explicit,value:Bs(i.value,s.value)}}return T5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function ELt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(cn(n.labelAngle)?n.labelAngle:Qk(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===sRe(r,i))return!0}return e===n[t]}const TLt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function SLt(e,t){var x,b;let n=t.axis(e);const r=new ZJ,i=mo(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((x=o[e==="x"?"axisX":"axisY"])==null?void 0:x.orient)||((b=o.axis)==null?void 0:b.orient)||c6t(e),u=t.getScaleComponent(e).get("type"),l=r6t(e,u,a,t.config),c=n!==void 0?!n:dV("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=a6t(i,n,e,o.style,l),d=Ike(n.formatType,i,u),h=kke(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of jRe){const E=_ in kce?kce[_](p):tce(_)?n[_]:void 0,T=E!==void 0,k=ELt(E,_,n,t,e);if(T&&k)r.set(_,E,k);else{const{configValue:I=void 0,configFrom:R=void 0}=tce(_)&&_!=="values"?dV(_,o.style,n.style,l):{},D=I!==void 0;T&&!D?r.set(_,E,k):(R!=="vgAxisConfig"||TLt.has(_)&&D||DR(I)||cn(I))&&r.set(_,I,!1)}}const g=n.encoding??{},y=zke.reduce((_,E)=>{if(!r.hasAxisPart(E))return _;const T=fRe(g[E]??{},t),k=E==="labels"?yLt(t,e,T):T;return k!==void 0&&!di(k)&&(_[E]={update:k}),_},{});return di(y)||r.set("encode",y,!!n.encoding||n.labelAngle!==void 0),r}function CLt({encoding:e,size:t}){for(const n of eg){const r=Ul(n);Fp(t[r])&&gy(e[n])&&(delete t[r],It(JAe(r)))}return t}const ALt={vgMark:"arc",encodeEntry:e=>({...Hf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Fu("x",e,{defaultPos:"mid"}),...Fu("y",e,{defaultPos:"mid"}),...j0(e,"radius"),...j0(e,"theta")})},kLt={vgMark:"area",encodeEntry:e=>({...Hf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...e$("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...e$("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...BJ(e)})},ILt={vgMark:"rect",encodeEntry:e=>({...Hf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...j0(e,"x"),...j0(e,"y")})},RLt={vgMark:"shape",encodeEntry:e=>({...Hf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Pt(n)&&n.type===SS?{field:jt(n,{expr:"datum"})}:{}}]}},PLt={vgMark:"image",encodeEntry:e=>({...Hf(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...j0(e,"x"),...j0(e,"y"),...MJ(e,"url")})},DLt={vgMark:"line",encodeEntry:e=>({...Hf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Fu("x",e,{defaultPos:"mid"}),...Fu("y",e,{defaultPos:"mid"}),...va("size",e,{vgChannel:"strokeWidth"}),...BJ(e)})},NLt={vgMark:"trail",encodeEntry:e=>({...Hf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Fu("x",e,{defaultPos:"mid"}),...Fu("y",e,{defaultPos:"mid"}),...va("size",e),...BJ(e)})};function eZ(e,t){const{config:n}=e;return{...Hf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Fu("x",e,{defaultPos:"mid"}),...Fu("y",e,{defaultPos:"mid"}),...va("size",e),...va("angle",e),...OLt(e,n,t)}}function OLt(e,t,n){return n?{shape:{value:n}}:va("shape",e)}const $Lt={vgMark:"symbol",encodeEntry:e=>eZ(e)},LLt={vgMark:"symbol",encodeEntry:e=>eZ(e,"circle")},MLt={vgMark:"symbol",encodeEntry:e=>eZ(e,"square")},FLt={vgMark:"rect",encodeEntry:e=>({...Hf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...j0(e,"x"),...j0(e,"y")})},BLt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Hf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...e$("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...e$("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...va("size",e,{vgChannel:"strokeWidth"})}}},jLt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Hf(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Fu("x",e,{defaultPos:"mid"}),...Fu("y",e,{defaultPos:"mid"}),...MJ(e),...va("size",e,{vgChannel:"fontSize"}),...va("angle",e),...Tce("align",ULt(e.markDef,n,t)),...Tce("baseline",zLt(e.markDef,n,t)),...Fu("radius",e,{defaultPos:null}),...Fu("theta",e,{defaultPos:null})}}};function ULt(e,t,n){if(fi("align",e,n)===void 0)return"center"}function zLt(e,t,n){if(fi("baseline",e,n)===void 0)return"middle"}const VLt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...Hf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...j0(e,i),...Fu(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:ji(fi("thickness",n,t))}}},JD={arc:ALt,area:kLt,bar:ILt,circle:LLt,geoshape:RLt,image:PLt,line:DLt,point:$Lt,rect:FLt,rule:BLt,square:MLt,text:jLt,tick:VLt,trail:NLt};function HLt(e){if(ar([h5,f5,XNt],e.mark)){const t=Kke(e.mark,e.encoding);if(t.length>0)return qLt(e,t)}else if(e.mark===d5){const t=Xz.some(n=>fi(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return WLt(e)}return tZ(e)}const Hce="faceted_path_";function qLt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Hce+e.requestDataName(rs.Main),data:e.requestDataName(rs.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:tZ(e,{fromPrefix:Hce})}]}const qce="stack_group_";function WLt(e){var l;const[t]=tZ(e,{fromPrefix:qce}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...lT(t.encode.update,["y","yc","y2","height",...Xz]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Nl(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...lT(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Nl(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of Xz){const f=Lp(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=ji(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=jt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(jt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Lp(f,e.markDef,e.config);return d!==void 0?{...c,[f]:ji(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(rs.Main),name:qce+e.requestDataName(rs.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function GLt(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!at(o)&&Jd(o)&&Yz(o.value)||!o&&Yz(fi("order",i,s)))){if((at(o)||Pt(o))&&!n)return HAe(o,{expr:"datum"});if(O1(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(Pt(u))return{field:a}}}}function tZ(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Bs(r.clip,YLt(e),KLt(e)),a=zAe(r),u=i.key,l=GLt(e),c=XLt(e),f=fi("aria",r,s),d=JD[n].postEncodingTransform?JD[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:JD[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(rs.Main)},encode:{update:JD[n].encodeEntry(e)},...d?{transform:d}:{}}]}function YLt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function KLt(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function XLt(e){if(!e.component.selection)return null;const t=_t(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=_t(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class URe extends LRe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,rce(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=l=>{var c,f,d;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data),"time"in this.encoding&&(l.from.data=l.from.data+RIe)),(d=(f=l.from)==null?void 0:f.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l};const o=Mp(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=NOt(o,s,{graticule:t.data&&$J(t.data)}));const u=this.encoding=M3t(t.encoding||{},a,o.filled,s);this.markDef=gIe(o,u,s),this.size=CLt({encoding:u,size:rce(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=mIe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>RJ(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===wke,r=t&&IPt.some(i=>Ln(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return WQ.reduce((r,i)=>{const s=mo(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=pa(t);return at(n)&&(i.domain=n.map(xc)),at(r)&&(i.range=r.map(xc)),i}initAxes(t){return eg.reduce((n,r)=>{const i=t[r];if(Ln(i)||r===Xi&&Ln(t.x2)||r===Xo&&Ln(t.y2)){const s=Ln(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=_t(t),r={};for(const i of n){const s=t[i];r[i]=DR(s)?UAe(s):xc(s)}return r}initLegends(t){return jPt.reduce((n,r)=>{const i=mo(t[r]);if(i&&zPt(r)){const s=i.legend;n[r]=s&&pa(s)}return n},{})}parseData(){this.component.data=U5(this)}parseLayoutSize(){lLt(this)}parseSelections(){this.component.selection=Z4t(this,this.selection)}parseMarkGroup(){this.component.mark=HLt(this)}parseAxesAndHeaders(){this.component.axes=vLt(this)}assembleSelectionTopLevelSignals(t){return C4t(this,t)}assembleSignals(){return[...nRe(this),...T4t(this,[])]}assembleSelectionData(t){return A4t(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return VJ(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!RS(this.parent))&&(t=OIe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Eb(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Zd(n)}typedFieldDef(t){const n=this.fieldDef(t);return Hu(n)?n:null}}class nZ extends QJ{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(E5(a))return new nZ(a,this,this.getName(`layer_${u}`),o,s);if(tg(a))return new URe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(YQ(a))})}parseData(){this.component.data=U5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){aLt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of _t(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>xp(t))&&QQ(XQ)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){xLt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),nRe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),VJ(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Vt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return k4t(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),bRe(this))}}function rZ(e,t,n,r,i){if(g5(e))return new HA(e,t,n,i);if(E5(e))return new nZ(e,t,n,r,i);if(tg(e))return new URe(e,t,n,r,i);if(aOt(e))return new pLt(e,t,n,i);throw new Error(YQ(e))}function QLt(e,t={}){t.logger&&cNt(t.logger),t.fieldTitle&&Bke(t.fieldTitle);try{const n=pIe(dS(t.config,e.config)),r=EIe(e,n),i=rZ(r,null,"",void 0,n);return i.parse(),w$t(i.component.data,i),{spec:ZLt(i,JLt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&fNt(),t.fieldTitle&&k3t()}}function JLt(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Ht(t)&&(t={type:t}),i&&s&&p4t(t.type)){if(i==="step"&&s==="step")It(Ule()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";It(Ule(s5(o)));const a=o==="width"?"height":"width";t.type=m4t(a)}}return{..._t(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...mce(n,!1),...mce(e,!0)}}function ZLt(e,t,n={},r){const i=e.config?wOt(e.config):void 0,s=rLt(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),u=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...u?{title:u}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...cIe(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const eMt=EPt.version,tMt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:fT,accessPathWithDatum:FQ,accessWithDatumToUnescapedPath:ii,compile:QLt,contains:ar,deepEqual:Cc,deleteNestedProperty:H6,duplicate:Dn,entries:e1,every:$Q,fieldIntersection:MQ,flatAccessWithDatum:_Ae,getFirstDefined:Bs,hasIntersection:LQ,hasProperty:Ct,hash:gr,internalField:SAe,isBoolean:Xk,isEmpty:di,isEqual:SPt,isInternalField:CAe,isNullOrFalse:Yz,isNumeric:ZM,keys:_t,logicalExpr:zA,mergeDeep:xAe,never:bAe,normalize:EIe,normalizeAngle:Qk,omit:Nl,pick:lT,prefixGenerator:Kz,removePathFromField:ES,replaceAll:Gb,replacePathInField:Df,resetIdCounter:APt,setEqual:wAe,some:cT,stringify:hi,titleCase:wR,unique:sp,uniqueId:TAe,vals:Ta,varName:Yi,version:eMt},Symbol.toStringTag,{value:"Module"}));function zRe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var nMt="vega-themes",rMt="2.15.0",iMt="Themes for stylized Vega and Vega-Lite visualizations.",sMt=["vega","vega-lite","themes","style"],oMt="BSD-3-Clause",aMt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},uMt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],lMt="build/vega-themes.js",iZ="build/vega-themes.module.js",cMt="build/vega-themes.min.js",fMt="build/vega-themes.min.js",dMt="build/vega-themes.module.d.ts",hMt={type:"git",url:"https://github.com/vega/vega-themes.git"},pMt=["src","build"],mMt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},gMt={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},yMt={vega:"*","vega-lite":"*"},vMt={},bMt={name:nMt,version:rMt,description:iMt,keywords:sMt,license:oMt,author:aMt,contributors:uMt,main:lMt,module:iZ,unpkg:cMt,jsdelivr:fMt,types:dMt,repository:hMt,files:pMt,scripts:mMt,devDependencies:gMt,peerDependencies:yMt,dependencies:vMt};const T_="#fff",Wce="#888",xMt={background:"#333",view:{stroke:Wce},title:{color:T_,subtitleColor:T_},style:{"guide-label":{fill:T_},"guide-title":{fill:T_}},axis:{domainColor:T_,gridColor:Wce,tickColor:T_}},Cv="#4572a7",wMt={background:"#fff",arc:{fill:Cv},area:{fill:Cv},line:{stroke:Cv,strokeWidth:2},path:{stroke:Cv},rect:{fill:Cv},shape:{stroke:Cv},symbol:{fill:Cv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Av="#30a2da",UB="#cbcbcb",_Mt="#999",EMt="#333",Gce="#f0f0f0",Yce="#333",TMt={arc:{fill:Av},area:{fill:Av},axis:{domainColor:UB,grid:!0,gridColor:UB,gridWidth:1,labelColor:_Mt,labelFontSize:10,titleColor:EMt,tickColor:UB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Gce,group:{fill:Gce},legend:{labelColor:Yce,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Yce,titleFontSize:14,titlePadding:10},line:{stroke:Av,strokeWidth:2},path:{stroke:Av,strokeWidth:.5},rect:{fill:Av},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Av},bar:{binSpacing:2,fill:Av,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},kv="#000",SMt={group:{fill:"#e5e5e5"},arc:{fill:kv},area:{fill:kv},line:{stroke:kv},path:{stroke:kv},rect:{fill:kv},shape:{stroke:kv},symbol:{fill:kv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},CMt=22,AMt="normal",Kce="Benton Gothic, sans-serif",Xce=11.5,kMt="normal",Iv="#82c6df",zB="Benton Gothic Bold, sans-serif",Qce="normal",Jce=13,yC={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},IMt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:zB,fontSize:CMt,fontWeight:AMt},arc:{fill:Iv},area:{fill:Iv},line:{stroke:Iv,strokeWidth:2},path:{stroke:Iv},rect:{fill:Iv},shape:{stroke:Iv},symbol:{fill:Iv,size:30},axis:{labelFont:Kce,labelFontSize:Xce,labelFontWeight:kMt,titleFont:zB,titleFontSize:Jce,titleFontWeight:Qce},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Kce,labelFontSize:Xce,symbolType:"square",titleFont:zB,titleFontSize:Jce,titleFontWeight:Qce},range:{category:yC["category-6"],diverging:yC["fireandice-6"],heatmap:yC["fire-7"],ordinal:yC["fire-7"],ramp:yC["fire-7"]}},Rv="#ab5787",ZD="#979797",RMt={background:"#f9f9f9",arc:{fill:Rv},area:{fill:Rv},line:{stroke:Rv},path:{stroke:Rv},rect:{fill:Rv},shape:{stroke:Rv},symbol:{fill:Rv,size:30},axis:{domainColor:ZD,domainWidth:.5,gridWidth:.2,labelColor:ZD,tickColor:ZD,tickWidth:.2,titleColor:ZD},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Pv="#3e5c69",PMt={background:"#fff",arc:{fill:Pv},area:{fill:Pv},line:{stroke:Pv},path:{stroke:Pv},rect:{fill:Pv},shape:{stroke:Pv},symbol:{fill:Pv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},pf="#1696d2",Zce="#000000",DMt="#FFFFFF",eN="Lato",VB="Lato",NMt="Lato",OMt="#DEDDDD",$Mt=18,vC={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},LMt={background:DMt,title:{anchor:"start",fontSize:$Mt,font:eN},axisX:{domain:!0,domainColor:Zce,domainWidth:1,grid:!1,labelFontSize:12,labelFont:VB,labelAngle:0,tickColor:Zce,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:eN},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:OMt,gridWidth:1,labelFontSize:12,labelFont:VB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:eN,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:VB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:eN,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:vC["six-groups-cat-1"],diverging:vC["diverging-colors"],heatmap:vC["diverging-colors"],ordinal:vC["six-groups-seq"],ramp:vC["shades-blue"]},area:{fill:pf},rect:{fill:pf},line:{color:pf,stroke:pf,strokeWidth:5},trail:{color:pf,stroke:pf,strokeWidth:0,size:1},path:{stroke:pf,strokeWidth:.5},point:{filled:!0},text:{font:NMt,color:pf,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:pf,stroke:null}},arc:{fill:pf},shape:{stroke:pf},symbol:{fill:pf,size:30}},Dv="#3366CC",efe="#ccc",tN="Arial, sans-serif",MMt={arc:{fill:Dv},area:{fill:Dv},path:{stroke:Dv},rect:{fill:Dv},shape:{stroke:Dv},symbol:{stroke:Dv},circle:{fill:Dv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:tN,fontSize:12},"guide-title":{font:tN,fontSize:12},"group-title":{font:tN,fontSize:12}},title:{font:tN,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:efe,tickColor:efe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},sZ=e=>e*(1/3+1),tfe=sZ(9),nfe=sZ(10),rfe=sZ(12),bC="Segoe UI",ife="wf_standard-font, helvetica, arial, sans-serif",sfe="#252423",xC="#605E5C",ofe="transparent",FMt="#C8C6C4",vd="#118DFF",BMt="#12239E",jMt="#E66C37",UMt="#6B007B",zMt="#E044A7",VMt="#744EC2",HMt="#D9B300",qMt="#D64550",VRe=vd,HRe="#DEEFFF",afe=[HRe,VRe],WMt=[HRe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",VRe],GMt={view:{stroke:ofe},background:ofe,font:bC,header:{titleFont:ife,titleFontSize:rfe,titleColor:sfe,labelFont:bC,labelFontSize:nfe,labelColor:xC},axis:{ticks:!1,grid:!1,domain:!1,labelColor:xC,labelFontSize:tfe,titleFont:ife,titleColor:sfe,titleFontSize:rfe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:FMt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:vd},line:{stroke:vd,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:bC,fontSize:tfe,fill:xC},arc:{fill:vd},area:{fill:vd,line:!0,opacity:.6},path:{stroke:vd},rect:{fill:vd},point:{fill:vd,filled:!0,size:75},shape:{stroke:vd},symbol:{fill:vd,strokeWidth:1.5,size:50},legend:{titleFont:bC,titleFontWeight:"bold",titleColor:xC,labelFont:bC,labelFontSize:nfe,labelColor:xC,symbolType:"circle",symbolSize:75},range:{category:[vd,BMt,jMt,UMt,zMt,VMt,HMt,qMt],diverging:afe,heatmap:afe,ordinal:WMt}},HB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',YMt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',qB=400,nN={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},KMt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],XMt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function z5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=nN.gridBg[e],i=nN.textPrimary[e],s=nN.textSecondary[e],o=n==="dark"?KMt:XMt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:HB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:YMt,labelFontWeight:qB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:nN.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:HB,fill:s,fontWeight:qB},"guide-title":{font:HB,fill:s,fontWeight:qB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const QMt=z5({theme:"white",background:"#ffffff"}),JMt=z5({theme:"g10",background:"#f4f4f4"}),ZMt=z5({theme:"g90",background:"#262626"}),e5t=z5({theme:"g100",background:"#161616"}),t5t=bMt.version,n5t=Object.freeze(Object.defineProperty({__proto__:null,carbong10:JMt,carbong100:e5t,carbong90:ZMt,carbonwhite:QMt,dark:xMt,excel:wMt,fivethirtyeight:TMt,ggplot2:SMt,googlecharts:MMt,latimes:IMt,powerbi:GMt,quartz:RMt,urbaninstitute:LMt,version:t5t,vox:PMt},Symbol.toStringTag,{value:"Module"}));function r5t(e,t,n,r){if(at(e))return`[${e.map(i=>t(Ht(i)?i:ufe(i,n))).join(", ")}]`;if(Ut(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(Ut(c)&&(c=ufe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function i5t(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function ufe(e,t){return JSON.stringify(e,i5t(t))}var s5t=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const qRe="vg-tooltip-element",o5t={offsetX:10,offsetY:10,id:qRe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:a5t,maxDepth:2,formatTooltip:r5t,baseURL:""};function a5t(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function u5t(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return s5t.toString().replace(qRe,e)}function l5t(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class c5t{constructor(t){this.options={...o5t,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=u5t(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=l5t(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var WB={};function f5t(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var GB,lfe;function d5t(){return lfe||(lfe=1,GB=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),GB}var h5t=qr;qr.Node=rx;qr.create=qr;function qr(e){var t=this;if(t instanceof qr||(t=new qr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}qr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};qr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};qr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};qr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)m5t(this,arguments[e]);return this.length};qr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)g5t(this,arguments[e]);return this.length};qr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};qr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};qr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};qr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};qr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};qr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};qr.prototype.map=function(e,t){t=t||this;for(var n=new qr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};qr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new qr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};qr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};qr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};qr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};qr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};qr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new qr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};qr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new qr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};qr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=p5t(this,i,n[r]);return s};qr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function p5t(e,t,n){var r=t===e.head?new rx(n,null,t,e):new rx(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function m5t(e,t){e.tail=new rx(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function g5t(e,t){e.head=new rx(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function rx(e,t,n,r){if(!(this instanceof rx))return new rx(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{d5t()(qr)}catch{}const y5t=h5t,eb=Symbol("max"),Gm=Symbol("length"),S_=Symbol("lengthCalculator"),qA=Symbol("allowStale"),cb=Symbol("maxAge"),Hm=Symbol("dispose"),cfe=Symbol("noDisposeOnSet"),$o=Symbol("lruList"),bd=Symbol("cache"),WRe=Symbol("updateAgeOnGet"),YB=()=>1;class v5t{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[eb]=t.max||1/0;const n=t.length||YB;if(this[S_]=typeof n!="function"?YB:n,this[qA]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[cb]=t.maxAge||0,this[Hm]=t.dispose,this[cfe]=t.noDisposeOnSet||!1,this[WRe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[eb]=t||1/0,wC(this)}get max(){return this[eb]}set allowStale(t){this[qA]=!!t}get allowStale(){return this[qA]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[cb]=t,wC(this)}get maxAge(){return this[cb]}set lengthCalculator(t){typeof t!="function"&&(t=YB),t!==this[S_]&&(this[S_]=t,this[Gm]=0,this[$o].forEach(n=>{n.length=this[S_](n.value,n.key),this[Gm]+=n.length})),wC(this)}get lengthCalculator(){return this[S_]}get length(){return this[Gm]}get itemCount(){return this[$o].length}rforEach(t,n){n=n||this;for(let r=this[$o].tail;r!==null;){const i=r.prev;ffe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[$o].head;r!==null;){const i=r.next;ffe(this,t,r,n),r=i}}keys(){return this[$o].toArray().map(t=>t.key)}values(){return this[$o].toArray().map(t=>t.value)}reset(){this[Hm]&&this[$o]&&this[$o].length&&this[$o].forEach(t=>this[Hm](t.key,t.value)),this[bd]=new Map,this[$o]=new y5t,this[Gm]=0}dump(){return this[$o].map(t=>i$(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[$o]}set(t,n,r){if(r=r||this[cb],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[S_](n,t);if(this[bd].has(t)){if(s>this[eb])return _E(this,this[bd].get(t)),!1;const u=this[bd].get(t).value;return this[Hm]&&(this[cfe]||this[Hm](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Gm]+=s-u.length,u.length=s,this.get(t),wC(this),!0}const o=new b5t(t,n,s,i,r);return o.length>this[eb]?(this[Hm]&&this[Hm](t,n),!1):(this[Gm]+=o.length,this[$o].unshift(o),this[bd].set(t,this[$o].head),wC(this),!0)}has(t){if(!this[bd].has(t))return!1;const n=this[bd].get(t).value;return!i$(this,n)}get(t){return KB(this,t,!0)}peek(t){return KB(this,t,!1)}pop(){const t=this[$o].tail;return t?(_E(this,t),t.value):null}del(t){_E(this,this[bd].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[bd].forEach((t,n)=>KB(this,n,!1))}}const KB=(e,t,n)=>{const r=e[bd].get(t);if(r){const i=r.value;if(i$(e,i)){if(_E(e,r),!e[qA])return}else n&&(e[WRe]&&(r.value.now=Date.now()),e[$o].unshiftNode(r));return i.value}},i$=(e,t)=>{if(!t||!t.maxAge&&!e[cb])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[cb]&&n>e[cb]},wC=e=>{if(e[Gm]>e[eb])for(let t=e[$o].tail;e[Gm]>e[eb]&&t!==null;){const n=t.prev;_E(e,t),t=n}},_E=(e,t)=>{if(t){const n=t.value;e[Hm]&&e[Hm](n.key,n.value),e[Gm]-=n.length,e[bd].delete(n.key),e[$o].removeNode(t)}};class b5t{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const ffe=(e,t,n,r)=>{let i=n.value;i$(e,i)&&(_E(e,n),e[qA]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var x5t=v5t;const w5t=Object.freeze({loose:!0}),_5t=Object.freeze({}),E5t=e=>e?typeof e!="object"?w5t:e:_5t;var oZ=E5t,_V={exports:{}};const T5t="2.0.0",GRe=256,S5t=Number.MAX_SAFE_INTEGER||9007199254740991,C5t=16,A5t=GRe-6,k5t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var aZ={MAX_LENGTH:GRe,MAX_SAFE_COMPONENT_LENGTH:C5t,MAX_SAFE_BUILD_LENGTH:A5t,MAX_SAFE_INTEGER:S5t,RELEASE_TYPES:k5t,SEMVER_SPEC_VERSION:T5t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const I5t=typeof process=="object"&&WB&&WB.NODE_DEBUG&&/\bsemver\b/i.test(WB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var V5=I5t;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=aZ,s=V5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=g=>{for(const[y,x]of d)g=g.split(`${y}*`).join(`${y}{0,${x}}`).split(`${y}+`).join(`${y}{1,${x}}`);return g},p=(g,y,x)=>{const b=h(y),_=c++;s(g,_,y),l[g]=_,u[_]=y,o[_]=new RegExp(y,x?"g":void 0),a[_]=new RegExp(b,x?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(_V,_V.exports);var uZ=_V.exports;const dfe=/^[0-9]+$/,YRe=(e,t)=>{const n=dfe.test(e),r=dfe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},R5t=(e,t)=>YRe(t,e);var P5t={compareIdentifiers:YRe,rcompareIdentifiers:R5t};const rN=V5,{MAX_LENGTH:hfe,MAX_SAFE_INTEGER:iN}=aZ,{safeRe:pfe,t:mfe}=uZ,D5t=oZ,{compareIdentifiers:C_}=P5t;let N5t=class Uh{constructor(t,n){if(n=D5t(n),t instanceof Uh){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>hfe)throw new TypeError(`version is longer than ${hfe} characters`);rN("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?pfe[mfe.LOOSE]:pfe[mfe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>iN||this.major<0)throw new TypeError("Invalid major version");if(this.minor>iN||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>iN||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<iN)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(rN("SemVer.compare",this.version,this.options,t),!(t instanceof Uh)){if(typeof t=="string"&&t===this.version)return 0;t=new Uh(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Uh||(t=new Uh(t,this.options)),C_(this.major,t.major)||C_(this.minor,t.minor)||C_(this.patch,t.patch)}comparePre(t){if(t instanceof Uh||(t=new Uh(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(rN("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return C_(r,i)}while(++n)}compareBuild(t){t instanceof Uh||(t=new Uh(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(rN("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return C_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),C_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var lZ=N5t;const gfe=lZ,O5t=(e,t,n)=>new gfe(e,n).compare(new gfe(t,n));var PS=O5t;const $5t=PS,L5t=(e,t,n)=>$5t(e,t,n)===0;var M5t=L5t;const F5t=PS,B5t=(e,t,n)=>F5t(e,t,n)!==0;var j5t=B5t;const U5t=PS,z5t=(e,t,n)=>U5t(e,t,n)>0;var V5t=z5t;const H5t=PS,q5t=(e,t,n)=>H5t(e,t,n)>=0;var W5t=q5t;const G5t=PS,Y5t=(e,t,n)=>G5t(e,t,n)<0;var K5t=Y5t;const X5t=PS,Q5t=(e,t,n)=>X5t(e,t,n)<=0;var J5t=Q5t;const Z5t=M5t,eFt=j5t,tFt=V5t,nFt=W5t,rFt=K5t,iFt=J5t,sFt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Z5t(e,n,r);case"!=":return eFt(e,n,r);case">":return tFt(e,n,r);case">=":return nFt(e,n,r);case"<":return rFt(e,n,r);case"<=":return iFt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var oFt=sFt,XB,yfe;function aFt(){if(yfe)return XB;yfe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}XB=t;const n=oZ,{safeRe:r,t:i}=uZ,s=oFt,o=V5,a=lZ,u=KRe();return XB}var QB,vfe;function KRe(){if(vfe)return QB;vfe=1;class e{constructor(H,Q){if(Q=r(Q),H instanceof e)return H.loose===!!Q.loose&&H.includePrerelease===!!Q.includePrerelease?H:new e(H.raw,Q);if(H instanceof i)return this.raw=H.value,this.set=[[H]],this.format(),this;if(this.options=Q,this.loose=!!Q.loose,this.includePrerelease=!!Q.includePrerelease,this.raw=H.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(J=>this.parseRange(J.trim())).filter(J=>J.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const J=this.set[0];if(this.set=this.set.filter(ne=>!p(ne[0])),this.set.length===0)this.set=[J];else if(this.set.length>1){for(const ne of this.set)if(ne.length===1&&g(ne[0])){this.set=[ne];break}}}this.format()}format(){return this.range=this.set.map(H=>H.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(H){const J=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+H,ne=n.get(J);if(ne)return ne;const Z=this.options.loose,ie=Z?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];H=H.replace(ie,M(this.options.includePrerelease)),s("hyphen replace",H),H=H.replace(a[u.COMPARATORTRIM],l),s("comparator trim",H),H=H.replace(a[u.TILDETRIM],c),s("tilde trim",H),H=H.replace(a[u.CARETTRIM],f),s("caret trim",H);let q=H.split(" ").map(K=>x(K,this.options)).join(" ").split(/\s+/).map(K=>L(K,this.options));Z&&(q=q.filter(K=>(s("loose invalid filter",K,this.options),!!K.match(a[u.COMPARATORLOOSE])))),s("range list",q);const U=new Map,X=q.map(K=>new i(K,this.options));for(const K of X){if(p(K))return[K];U.set(K.value,K)}U.size>1&&U.has("")&&U.delete("");const V=[...U.values()];return n.set(J,V),V}intersects(H,Q){if(!(H instanceof e))throw new TypeError("a Range is required");return this.set.some(J=>y(J,Q)&&H.set.some(ne=>y(ne,Q)&&J.every(Z=>ne.every(ie=>Z.intersects(ie,Q)))))}test(H){if(!H)return!1;if(typeof H=="string")try{H=new o(H,this.options)}catch{return!1}for(let Q=0;Q<this.set.length;Q++)if(z(this.set[Q],H,this.options))return!0;return!1}}QB=e;const t=x5t,n=new t({max:1e3}),r=oZ,i=aFt(),s=V5,o=lZ,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=uZ,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=aZ,p=F=>F.value==="<0.0.0-0",g=F=>F.value==="",y=(F,H)=>{let Q=!0;const J=F.slice();let ne=J.pop();for(;Q&&J.length;)Q=J.every(Z=>ne.intersects(Z,H)),ne=J.pop();return Q},x=(F,H)=>(s("comp",F,H),F=T(F,H),s("caret",F),F=_(F,H),s("tildes",F),F=I(F,H),s("xrange",F),F=D(F,H),s("stars",F),F),b=F=>!F||F.toLowerCase()==="x"||F==="*",_=(F,H)=>F.trim().split(/\s+/).map(Q=>E(Q,H)).join(" "),E=(F,H)=>{const Q=H.loose?a[u.TILDELOOSE]:a[u.TILDE];return F.replace(Q,(J,ne,Z,ie,q)=>{s("tilde",F,J,ne,Z,ie,q);let U;return b(ne)?U="":b(Z)?U=`>=${ne}.0.0 <${+ne+1}.0.0-0`:b(ie)?U=`>=${ne}.${Z}.0 <${ne}.${+Z+1}.0-0`:q?(s("replaceTilde pr",q),U=`>=${ne}.${Z}.${ie}-${q} <${ne}.${+Z+1}.0-0`):U=`>=${ne}.${Z}.${ie} <${ne}.${+Z+1}.0-0`,s("tilde return",U),U})},T=(F,H)=>F.trim().split(/\s+/).map(Q=>k(Q,H)).join(" "),k=(F,H)=>{s("caret",F,H);const Q=H.loose?a[u.CARETLOOSE]:a[u.CARET],J=H.includePrerelease?"-0":"";return F.replace(Q,(ne,Z,ie,q,U)=>{s("caret",F,ne,Z,ie,q,U);let X;return b(Z)?X="":b(ie)?X=`>=${Z}.0.0${J} <${+Z+1}.0.0-0`:b(q)?Z==="0"?X=`>=${Z}.${ie}.0${J} <${Z}.${+ie+1}.0-0`:X=`>=${Z}.${ie}.0${J} <${+Z+1}.0.0-0`:U?(s("replaceCaret pr",U),Z==="0"?ie==="0"?X=`>=${Z}.${ie}.${q}-${U} <${Z}.${ie}.${+q+1}-0`:X=`>=${Z}.${ie}.${q}-${U} <${Z}.${+ie+1}.0-0`:X=`>=${Z}.${ie}.${q}-${U} <${+Z+1}.0.0-0`):(s("no pr"),Z==="0"?ie==="0"?X=`>=${Z}.${ie}.${q}${J} <${Z}.${ie}.${+q+1}-0`:X=`>=${Z}.${ie}.${q}${J} <${Z}.${+ie+1}.0-0`:X=`>=${Z}.${ie}.${q} <${+Z+1}.0.0-0`),s("caret return",X),X})},I=(F,H)=>(s("replaceXRanges",F,H),F.split(/\s+/).map(Q=>R(Q,H)).join(" ")),R=(F,H)=>{F=F.trim();const Q=H.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return F.replace(Q,(J,ne,Z,ie,q,U)=>{s("xRange",F,J,ne,Z,ie,q,U);const X=b(Z),V=X||b(ie),K=V||b(q),ee=K;return ne==="="&&ee&&(ne=""),U=H.includePrerelease?"-0":"",X?ne===">"||ne==="<"?J="<0.0.0-0":J="*":ne&&ee?(V&&(ie=0),q=0,ne===">"?(ne=">=",V?(Z=+Z+1,ie=0,q=0):(ie=+ie+1,q=0)):ne==="<="&&(ne="<",V?Z=+Z+1:ie=+ie+1),ne==="<"&&(U="-0"),J=`${ne+Z}.${ie}.${q}${U}`):V?J=`>=${Z}.0.0${U} <${+Z+1}.0.0-0`:K&&(J=`>=${Z}.${ie}.0${U} <${Z}.${+ie+1}.0-0`),s("xRange return",J),J})},D=(F,H)=>(s("replaceStars",F,H),F.trim().replace(a[u.STAR],"")),L=(F,H)=>(s("replaceGTE0",F,H),F.trim().replace(a[H.includePrerelease?u.GTE0PRE:u.GTE0],"")),M=F=>(H,Q,J,ne,Z,ie,q,U,X,V,K,ee,fe)=>(b(J)?Q="":b(ne)?Q=`>=${J}.0.0${F?"-0":""}`:b(Z)?Q=`>=${J}.${ne}.0${F?"-0":""}`:ie?Q=`>=${Q}`:Q=`>=${Q}${F?"-0":""}`,b(X)?U="":b(V)?U=`<${+X+1}.0.0-0`:b(K)?U=`<${X}.${+V+1}.0-0`:ee?U=`<=${X}.${V}.${K}-${ee}`:F?U=`<${X}.${V}.${+K+1}-0`:U=`<=${U}`,`${Q} ${U}`.trim()),z=(F,H,Q)=>{for(let J=0;J<F.length;J++)if(!F[J].test(H))return!1;if(H.prerelease.length&&!Q.includePrerelease){for(let J=0;J<F.length;J++)if(s(F[J].semver),F[J].semver!==i.ANY&&F[J].semver.prerelease.length>0){const ne=F[J].semver;if(ne.major===H.major&&ne.minor===H.minor&&ne.patch===H.patch)return!0}return!1}return!0};return QB}const uFt=KRe(),lFt=(e,t,n)=>{try{t=new uFt(t,n)}catch{return!1}return t.test(e)};var cFt=lFt,XRe=f5t(cFt);function fFt(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var dFt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function QRe(e,...t){for(const n of t)hFt(e,n);return e}function hFt(e,t){for(const n of Object.keys(t))hS(e,n,t[n],!0)}const xd=VRt;let nI=tMt;const sN=typeof window<"u"?window:void 0;var the;nI===void 0&&((the=sN==null?void 0:sN.vl)!=null&&the.compile)&&(nI=sN.vl);const pFt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},mFt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},cA={vega:"Vega","vega-lite":"Vega-Lite"},s$={vega:xd.version,"vega-lite":nI?nI.version:"not available"},gFt={vega:e=>e,"vega-lite":(e,t)=>nI.compile(e,{config:t}).spec},yFt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,vFt="chart-wrapper";function bFt(e){return typeof e=="function"}function bfe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${cA[r]} JSON Source`}function xFt(e,t){if(e.$schema){const n=zRe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${cA[n.library]}, but mode argument sets ${cA[t]??t}.`);const r=n.library;return XRe(s$[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${cA[r]} ${n.version}, but the current version of ${cA[r]} is v${s$[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function JRe(e){return!!(e&&"load"in e)}function xfe(e){return JRe(e)?e:xd.loader(e)}function wFt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Ht(t.defaultStyle)&&(t.defaultStyle=!1),t}async function _Ft(e,t,n={}){let r,i;Ht(t)?(i=xfe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=wFt(r),o=s.loader;(!i||o)&&(i=xfe(n.loader??o));const a=await wfe(s,i),u=await wfe(n,i),l={...QRe(u,a),config:dS(u.config??{},a.config??{})};return await TFt(e,r,l,i)}async function wfe(e,t){const n=Ht(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Ht(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function EFt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function TFt(e,t,n={},r){const i=n.theme?dS(n5t[n.theme],n.config??{}):n.config,s=T1(n.actions)?n.actions:QRe({},pFt,n.actions??{}),o={...mFt,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??xd.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const T="vega-embed-style",{root:k,rootContainer:I}=EFt(c);if(!k.getElementById(T)){const R=document.createElement("style");R.id=T,R.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?dFt.toString():n.defaultStyle,I.appendChild(R)}}const f=xFt(t,n.mode);let d=gFt[f](t,i);if(f==="vega-lite"&&d.$schema){const T=zRe(d.$schema);XRe(s$.vega,`^${T.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${T.version}, but current version is v${s$.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const T=document.createElement("div");T.classList.add(vFt),c.appendChild(T),h=T}const p=n.patch;if(p&&(d=p instanceof Function?p(d):iM(d,p,!0,!1).newDocument),n.formatLocale&&xd.formatLocale(n.formatLocale),n.timeFormatLocale&&xd.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const T in n.expressionFunctions){const k=n.expressionFunctions[T];"fn"in k?xd.expressionFunction(T,k.fn,k.visitor):k instanceof Function&&xd.expressionFunction(T,k)}const{ast:g}=n,y=xd.parse(d,f==="vega-lite"?{}:i,{ast:g}),x=new(n.viewClass||xd.View)(y,{loader:r,logLevel:u,renderer:a,...g?{expr:xd.expressionInterpreter??n.expr??ZRt}:{}});if(x.addSignalListener("autosize",(T,k)=>{const{type:I}=k;I=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):I=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):I=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:T,tooltip:k}=n,I=T&&!JRe(T)?T==null?void 0:T.baseURL:void 0,R=bFt(k)?k:new c5t({baseURL:I,...k===!0?{}:k}).call;x.tooltip(R)}let{hover:b}=n;if(b===void 0&&(b=f==="vega"),b){const{hoverSet:T,updateSet:k}=typeof b=="boolean"?{}:b;x.hover(T,k)}n&&(n.width!=null&&x.width(n.width),n.height!=null&&x.height(n.height),n.padding!=null&&x.padding(n.padding)),await x.initialize(h,n.bind).runAsync();let _;if(s!==!1){let T=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const I=document.createElement("details");I.title=o.CLICK_TO_VIEW_ACTIONS,c.append(I),T=I;const R=document.createElement("summary");R.innerHTML=yFt,I.append(R),_=D=>{I.contains(D.target)||I.removeAttribute("open")},document.addEventListener("click",_)}const k=document.createElement("div");if(T.append(k),k.classList.add("vega-actions"),s===!0||s.export!==!1){for(const I of["svg","png"])if(s===!0||s.export===!0||s.export[I]){const R=o[`${I.toUpperCase()}_ACTION`],D=document.createElement("a"),L=Ut(n.scaleFactor)?n.scaleFactor[I]:n.scaleFactor;D.text=R,D.href="#",D.target="_blank",D.download=`${l}.${I}`,D.addEventListener("mousedown",async function(M){M.preventDefault();const z=await x.toImageURL(I,L);this.href=z}),k.append(D)}}if(s===!0||s.source!==!1){const I=document.createElement("a");I.text=o.SOURCE_ACTION,I.href="#",I.addEventListener("click",function(R){bfe(Y9(t),n.sourceHeader??"",n.sourceFooter??"",f),R.preventDefault()}),k.append(I)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const I=document.createElement("a");I.text=o.COMPILED_ACTION,I.href="#",I.addEventListener("click",function(R){bfe(Y9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),R.preventDefault()}),k.append(I)}if(s===!0||s.editor!==!1){const I=n.editorUrl??"https://vega.github.io/editor/",R=document.createElement("a");R.text=o.EDITOR_ACTION,R.href="#",R.addEventListener("click",function(D){fFt(window,I,{config:i,mode:f,renderer:a,spec:Y9(t)}),D.preventDefault()}),k.append(R)}}function E(){_&&document.removeEventListener("click",_),x.finalize()}return{view:x,spec:t,vgSpec:d,finalize:E,embedOptions:n}}function SFt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function CFt(e,t,n){n&&(SFt(n)?n(e.data(t)):e.change(t,xd.changeset().remove(()=>!0).insert(n)))}function AFt(e,t){Object.keys(t).forEach(n=>{CFt(e,n,t[n])})}function ZRe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const ePe=()=>{};function JB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function kFt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=ZRe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!LC(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function _fe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function ZB(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function fA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class tPe extends Mr.PureComponent{constructor(){super(...arguments),fA(this,"containerRef",Mr.createRef()),fA(this,"resultPromise",void 0),fA(this,"handleError",t=>{const{onError:n=ePe}=this.props;n(t,this.containerRef.current),console.warn(t)}),fA(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=ZRe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=kFt(ZB(this.props),ZB(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!HU(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&_fe(a,s),i&&JB(a,i)),a.run()})}else HU(i,s)||this.modifyView(o=>{s&&_fe(o,s),i&&JB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=ZB(this.props);this.resultPromise=_Ft(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;JB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Mr.createElement("div",{ref:this.containerRef,className:t,style:n})}}fA(tPe,"propTypes",{className:ite.string,onError:ite.func});function EV(){return EV=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EV.apply(this,arguments)}function TV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const IFt={};class cZ extends Mr.PureComponent{constructor(){super(...arguments),TV(this,"vegaEmbed",Mr.createRef()),TV(this,"handleNewView",t=>{this.update();const{onNewView:n=ePe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){HU(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{AFt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Mr.createElement(tPe,EV({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}TV(cZ,"defaultProps",{data:IFt});function SV(){return SV=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SV.apply(this,arguments)}function Efe(e){return Mr.createElement(cZ,SV({},e,{mode:"vega-lite"}))}function RFt({currentConfig:e,provState:t}){const n=Uf(),r=ih(),i=hu(),[s,o]=O.useState(null),[a,u]=O.useState(!0),{updateResponseBlockValidation:l,setreactiveAnswers:c}=Ca(),[f,d]=O.useState(),{actions:h,trrack:p}=O.useMemo(()=>{const _=XI.create(),E=_.register("signal",(k,I)=>(k.event=I,k)),T=wY({registry:_,initialState:{event:{}}});return{actions:{signalAction:E},trrack:T}},[]),g=O.useCallback(({status:_,provenanceGraph:E,answers:T})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:_,values:T,provenanceGraph:E})),i(c(T))},[r,n,i,c,l]),y=O.useCallback((_,E)=>{p.apply(_,h.signalAction({key:_,value:E}))},[h,p]),x=O.useCallback((_,E)=>{const{responseId:T,response:k}=E;g({status:!0,provenanceGraph:p.graph.backend,answers:{[T]:k}})},[g,p.graph.backend]),b=O.useMemo(()=>{var E;const _=(E=s==null?void 0:s.config)==null?void 0:E.signals;return _?_.reduce((T,k)=>(k.name==="revisitAnswer"?T[k.name]=x:T[k.name]=y,T),{}):{}},[x,y,s]);return O.useEffect(()=>{async function _(){u(!0);let E;"path"in e?E=await Ust(e.path):E=e.config,E!==void 0&&o(E),u(!1)}e&&_()},[e]),O.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?S.jsx("div",{children:"Loading..."}):"path"in e&&!s?S.jsx(jy,{path:e.path}):s?S.jsx(cZ,{spec:structuredClone(s),signalListeners:b,onNewView:_=>d(_)}):S.jsx("div",{children:"Failed to load vega config"})}function PFt(){const e=N0(),t=Uf(),n=ih()||"Notfound",r=e.components[n],{storageEngine:i}=_s(),s=O.useRef(null),[o,a]=O.useState(null),{setIsRecording:u}=Ca(),l=Ur(D=>D.analysisProvState),c=rS(),f=hG(),d=Ur(D=>D.sequence),[h]=G0(),p=Ur(D=>D.participantId),g=O.useMemo(()=>h.get("participantId"),[h]);N_e();const y=hu(),{setAlertModal:x}=Ca();O.useEffect(()=>{(i==null?void 0:i.getEngine())!=="firebase"&&y(x({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[x,i,y]),O.useEffect(()=>{!e||!e.uiConfig.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(D=>{var L;D.stop(),(L=s.current)==null||L.stream.removeTrack(D)}),s.current.stream.getAudioTracks().forEach(D=>{var L;D.stop(),(L=s.current)==null||L.stream.removeTrack(D)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),y(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(D=>{const L=new MediaRecorder(D);s.current=L,s.current.start(),y(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[b,_]=O.useState([]),E=O.useRef([]);O.useEffect(()=>{async function D(){var z;const M=((z=aG(d,t))==null?void 0:z.map(F=>F.currentBlock.id).filter(F=>F!==void 0))||[];_(M)}async function L(){const M=E.current;JSON.stringify(M)!==JSON.stringify(b)&&b.length>0&&i&&await i.addParticipantTags(b),E.current=b}D().then(L)},[t,i,d]);const T=O.useMemo(()=>{var D;return n!=="end"&&!n.startsWith("__")&&cS(r)&&e.baseComponents?dG({},(D=e.baseComponents)==null?void 0:D[r.baseComponent],r):r},[r,e]);if(n==="end")return S.jsx(Pgt,{});if(n==="__trainingFailed")return S.jsx(Dgt,{});if(n==="__timedOut")return S.jsx(Ngt,{});if(n==="Notfound")return S.jsx(jy,{email:e.uiConfig.contactEmail});if(g&&p!==g)return S.jsx(T0,{style:{height:"80vh"},children:S.jsx(Up,{})});const k=T.instruction||"",{instructionLocation:I}=T,R=e.uiConfig.sidebar&&(I==="sidebar"||I===void 0);return S.jsxs(S.Fragment,{children:[I==="aboveStimulus"&&S.jsx(au,{text:k}),S.jsx(p4,{status:f,config:T,location:"aboveStimulus"},`${t}-above-response-block`),S.jsxs(O.Suspense,{fallback:S.jsx("div",{children:"Loading..."}),children:[T.type==="markdown"&&S.jsx(xgt,{currentConfig:T}),T.type==="website"&&S.jsx(jst,{currentConfig:T}),T.type==="image"&&S.jsx(Vst,{currentConfig:T}),T.type==="react-component"&&S.jsx(bgt,{currentConfig:T,provState:l}),T.type==="vega"&&S.jsx(RFt,{currentConfig:T,provState:l})]},`${t}-stimulus`),(I==="belowStimulus"||I===void 0&&!R)&&S.jsx(au,{text:k}),S.jsx(p4,{status:f,config:T,location:"belowStimulus"},`${t}-below-response-block`)]})}function nPe(e){const[t]=G0();return S.jsx(Sq,{...e,to:{pathname:e.to,search:t.toString()}})}var ej,Tfe;function DFt(){if(Tfe)return ej;Tfe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,u=typeof ho=="object"&&ho&&ho.Object===Object&&ho,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),f=Object.prototype,d=f.toString,h=Math.max,p=Math.min,g=function(){return c.Date.now()};function y(T,k,I){var R,D,L,M,z,F,H=0,Q=!1,J=!1,ne=!0;if(typeof T!="function")throw new TypeError(e);k=E(k)||0,x(I)&&(Q=!!I.leading,J="maxWait"in I,L=J?h(E(I.maxWait)||0,k):L,ne="trailing"in I?!!I.trailing:ne);function Z(Ee){var ye=R,_e=D;return R=D=void 0,H=Ee,M=T.apply(_e,ye),M}function ie(Ee){return H=Ee,z=setTimeout(X,k),Q?Z(Ee):M}function q(Ee){var ye=Ee-F,_e=Ee-H,De=k-ye;return J?p(De,L-_e):De}function U(Ee){var ye=Ee-F,_e=Ee-H;return F===void 0||ye>=k||ye<0||J&&_e>=L}function X(){var Ee=g();if(U(Ee))return V(Ee);z=setTimeout(X,q(Ee))}function V(Ee){return z=void 0,ne&&R?Z(Ee):(R=D=void 0,M)}function K(){z!==void 0&&clearTimeout(z),H=0,R=F=D=z=void 0}function ee(){return z===void 0?M:V(g())}function fe(){var Ee=g(),ye=U(Ee);if(R=arguments,D=this,F=Ee,ye){if(z===void 0)return ie(F);if(J)return z=setTimeout(X,k),Z(F)}return z===void 0&&(z=setTimeout(X,k)),M}return fe.cancel=K,fe.flush=ee,fe}function x(T){var k=typeof T;return!!T&&(k=="object"||k=="function")}function b(T){return!!T&&typeof T=="object"}function _(T){return typeof T=="symbol"||b(T)&&d.call(T)==n}function E(T){if(typeof T=="number")return T;if(_(T))return t;if(x(T)){var k=typeof T.valueOf=="function"?T.valueOf():T;T=x(k)?k+"":k}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var I=s.test(T);return I||o.test(T)?a(T.slice(2),I?2:8):i.test(T)?t:+T}return ej=y,ej}var NFt=DFt();const Bm=qc(NFt);function rPe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=rPe(o,t,n,r),r.includes(o.orderPath))break}return i}function iPe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=iPe(s,r)}}),n}function OFt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function $Ft({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Tx(),c=nh(),f=Uf(),[d,{close:h,open:p}]=PV(!1),g=e in o.components&&o.components[e],y=a&&a.components.slice(r).includes(e)?rPe(n,e,r,a.orderPath):-1,{trialId:x}=Sp(),[b]=G0(),_=O.useMemo(()=>b.get("participantId"),[b]),E=x===e,T=s?f===y:f===`reviewer-${e}`,k=u?E:T,I=O.useCallback(()=>c(x?`./../${e}`:`./${e}`),[c,e,x]),D=u?I:()=>c(s?_?`/${l}/${Cd(y)}?participantId=${_}`:`/${l}/${Cd(y)}`:`/${l}/reviewer-${e}`),L=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,M=e.includes("$")&&L&&e.includes(L)?e.split(L).at(-1):e;return S.jsxs(_a,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[S.jsx(_a.Target,{children:S.jsx(Le,{onMouseEnter:p,onMouseLeave:h,children:S.jsx(L$,{active:k,style:{lineHeight:"32px",height:"32px"},label:S.jsxs(Le,{children:[i&&S.jsx(gje,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==M&&S.jsx(Rje,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),S.jsx(bt,{size:"sm",span:k,fw:k?"700":void 0,display:"inline",children:M})]}),onClick:D,disabled:t})})}),g&&(g.description||g.meta)&&S.jsx(_a.Dropdown,{onMouseLeave:h,children:S.jsxs(Le,{children:[g.description&&S.jsxs(Le,{children:[S.jsx(bt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),S.jsx(bt,{fw:400,component:"span",children:g.description})]}),g.meta&&S.jsxs(Le,{children:[S.jsx(bt,{fw:"900",component:"span",children:"Task Meta: "}),S.jsx(bt,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(g.meta,null,2)}`})]})]})})]})}function o$({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=h0(e.components);return n&&r&&(o=OFt(h0(e.components),h0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),S.jsx(S.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return S.jsx($Ft,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?Gd(c).length-iPe(u,c):0,d=Gd(u);return S.jsx(L$,{label:S.jsxs(Le,{style:{opacity:f>0?1:.5},children:[S.jsx(bt,{size:"sm",display:"inline",fw:700,children:u.id?u.id:u.order}),u.order==="random"||u.order==="latinSquare"?S.jsx(Mi,{label:u.order,position:"right",withArrow:!0,children:S.jsx(pje,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&S.jsxs(Ld,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&S.jsx(Ld,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(g=>g.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:S.jsx(Le,{style:{borderLeft:"1px solid #e9ecef"},children:S.jsx(o$,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function sPe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Sfe({text:e}){return S.jsx(Mi,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:S.jsx(Rq,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function LFt(){const e=Ur(h=>h.sequence),t=Ur(h=>h.metadata),{toggleStudyBrowser:n}=Ca(),r=N0(),i=hu(),s=Tx(),o=_q(`/${s}`),{storageEngine:a}=_s(),u=rS(),l=O.useMemo(()=>{let h=h0(r.sequence);return h=uG(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=O.useState("participant"),d=O.useMemo(()=>c==="allTrials"||u,[c,u]);return S.jsxs(ci.Aside,{p:"0",children:[S.jsx(ci.Section,{p:"md",children:S.jsxs(sn,{direction:"row",justify:"space-between",children:[S.jsx(bt,{size:"md",fw:700,pt:3,children:"Study Browser"}),S.jsx(Mi,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:S.jsx(hn,{variant:"light",leftSection:S.jsx(Pq,{size:14}),onClick:()=>sPe(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),S.jsx(d1,{onClick:()=>i(n()),mt:1})]})}),S.jsx(ci.Section,{grow:!0,component:_0,p:"md",children:S.jsxs(wr,{value:c,onChange:f,children:[S.jsx(Le,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:S.jsxs(wr.List,{grow:!0,children:[S.jsxs(wr.Tab,{value:"participant",children:["Participant View",S.jsx(Sfe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),S.jsxs(wr.Tab,{value:"allTrials",disabled:u,children:["All Trials View",S.jsx(Sfe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),S.jsx(wr.Panel,{value:"participant",children:S.jsx(o$,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),S.jsx(wr.Panel,{value:"allTrials",children:S.jsx(o$,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}const MFt=O.createContext(null);function Za(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let LR=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const oN={decode:function(e,t){return Za(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function oPe(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(oPe(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function Cfe(e,t,n){const r=oPe(e,t||{});return n==null||n.appendChild(r),r}var FFt=Object.freeze({__proto__:null,createElement:Cfe,default:Cfe});const BFt={fetchBlob:function(e,t,n){return Za(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){Za(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>Za(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>Za(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class jFt extends LR{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return Za(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class TT extends LR{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const g=Date.now(),y=T=>{if(T.preventDefault(),T.stopPropagation(),u&&Date.now()-g<a)return;const k=T.clientX,I=T.clientY,R=k-d,D=I-h;if(p||Math.abs(R)>s||Math.abs(D)>s){const L=t.getBoundingClientRect(),{left:M,top:z}=L;p||(r==null||r(d-M,h-z),p=!0),n(R,D,k-M,I-z),d=k,h=I}},x=T=>{if(p){const k=T.clientX,I=T.clientY,R=t.getBoundingClientRect(),{left:D,top:L}=R;i==null||i(k-D,I-L)}l()},b=T=>{T.relatedTarget&&T.relatedTarget!==document.documentElement||x(T)},_=T=>{p&&(T.stopPropagation(),T.preventDefault())},E=T=>{p&&T.preventDefault()};document.addEventListener("pointermove",y),document.addEventListener("pointerup",x),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",_,{capture:!0}),l=()=>{document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",x),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",E),setTimeout(()=>{document.removeEventListener("click",_,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,g=u/(d+h)/a,y=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let x=0,b=0,_=0;for(let E=0;E<=a;E++){const T=Math.round(E*g);if(T>x){const R=Math.round(b*c*i),D=R+Math.round(_*c*i)||1;let L=c-R;n.barAlign==="top"?L=0:n.barAlign==="bottom"&&(L=l-D),r[y](x*(d+h),L,d,D,p),x=T,b=0,_=0}const k=Math.abs(s[E]||0),I=Math.abs(o[E]||0);k>b&&(b=k),I>_&&(_=I)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const g=Math.round(p*f);if(g>d){const x=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,x),d=g,h=0}const y=Math.abs(a[p]||0);y>h&&(h=y)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(TT.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const y=n.barWidth||.5,x=y+(n.barGap||y/2);c%x!=0&&(c=Math.floor(c/x)*x)}const d=y=>{if(y<0||y>=h||f[y])return;f[y]=!0;const x=y*c,b=Math.min(l-x,c);if(b<=0)return;const _=t.map(E=>{const T=Math.floor(x/l*E.length),k=Math.floor((x+b)/l*E.length);return E.slice(T,k)});this.renderSingleCanvas(_,n,b,i,x,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let y=0;y<h;y++)d(y);return}const p=this.scrollContainer.scrollLeft/l,g=Math.floor(p*h);if(d(g-1),d(g),d(g+1),h>1){const y=this.on("scroll",()=>{const{scrollLeft:x}=this.scrollContainer,b=Math.floor(x/l*h);Object.keys(f).length>TT.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(b-1),d(b),d(b+1)});this.unsubscribeOnScroll.push(y)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return Za(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return Za(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}}TT.MAX_CANVAS_WIDTH=8e3,TT.MAX_NODES=10;class UFt extends LR{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Afe extends LR{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Za(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Za(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return Za(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const zFt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class rI extends jFt{static create(t){return new rI(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Afe:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},zFt,t),this.timer=new UFt;const r=n?void 0:this.getMediaElement();this.renderer=new TT(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=oN.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=oN.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return Za(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=c=>this.emit("loading",c);n=yield BFt.fetchBlob(t,u,a);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof Afe&&(a.duration=o)}if(r)this.decodedData=oN.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield oN.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return Za(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return Za(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return Za(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Za(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}rI.BasePlugin=class extends LR{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},rI.dom=FFt;function VFt(e){return rI.create(e)}function HFt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const kfe=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),qFt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:kfe(i),enabled:kfe(s)}};function Ife(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=HFt(i)}return n}function WFt({container:e,plugins:t=[],onMount:n,...r}){const i=O.useRef(!1),[s,o]=O.useState({}),a=O.useRef([]),[u,l]=O.useState(null);return O.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=Ife(s,t);a.current=Object.keys(f);const d=VFt({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),O.useEffect(()=>{if(u){const c=Ife(s,t),{disabled:f,enabled:d}=qFt(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function aPe({children:e,plugins:t=[],onMount:n,...r}){const i=WFt({plugins:t,onMount:n,...r});return Mr.createElement(MFt.Provider,{value:i},e)}const uPe=({id:e="waveform",children:t})=>Mr.createElement("div",{id:e},t);function tj(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}class lPe{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}class GFt extends lPe{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}}class YFt extends lPe{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const KFt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class fZ extends GFt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new YFt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new fZ(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),g=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),y=new Float32Array(p);if(this.dataWindow){const x=Math.max(0,p-this.dataWindow.length);y.set(this.dataWindow.slice(-g+o),x)}y.set(a,p-o),this.dataWindow=y}else if(this.options.continuousWaveform){if(!this.dataWindow){const g=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(g)}let p=0;for(let g=0;g<o;g++){const y=Math.abs(a[g]);y>p&&(p=y)}if(u+1>this.dataWindow.length){const g=new Float32Array(2*this.dataWindow.length);g.set(this.dataWindow,0),this.dataWindow=g}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(g=>{console.error("Error rendering real-time recording data:",g)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return tj(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return tj(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||KFt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return tj(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function XFt({width:e=70,height:t=36}){const n=O.useRef(null),r=O.useRef(null),[i,s]=O.useState(!1);O.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(fZ.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,navigator.userAgent.includes("Firefox")||a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=O.useCallback(a=>{n.current=a,s(!0)},[]);return S.jsx(Le,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:S.jsx(aPe,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:S.jsx(uPe,{id:"waveform",height:t})})})}function QFt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=Ur(R=>R.config),r=Ur(R=>R.metadata),i=lG(),s=hu(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=Ca(),{storageEngine:l}=_s(),c=ih(),f=Uf(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,g]=O.useState(!1),y=n==null?void 0:n.uiConfig.logoPath,x=n==null?void 0:n.uiConfig.withProgressBar,b=Tx(),_=_q(`/${b}`),E=O.useRef(null),[T,k]=O.useState(!1),I=Ur(R=>R.isRecording);return O.useEffect(()=>{const R=E.current;R&&k(R.scrollWidth>R.offsetWidth)},[n]),S.jsx(ci.Header,{p:"md",children:S.jsxs(tp,{mt:-7,align:"center",children:[S.jsx(tp.Col,{span:4,children:S.jsxs(sn,{align:"center",children:[S.jsx(p1,{w:40,src:`${Wo}${y}`,alt:"Study Logo"}),S.jsx(kc,{w:"md"}),S.jsx(vs,{ref:E,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:T?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),S.jsx(tp.Col,{span:4,children:x&&S.jsx(MT,{radius:"md",size:"lg",value:h})}),S.jsx(tp.Col,{span:4,children:S.jsxs(is,{wrap:"nowrap",justify:"right",children:[I?S.jsxs(is,{ml:"xl",gap:20,wrap:"nowrap",children:[S.jsx(bt,{color:"red",children:"Recording audio"}),S.jsx(XFt,{})]}):null,!t&&S.jsx(Mi,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, we’re not collecting any data.",children:S.jsx(Ld,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&S.jsx(hn,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),S.jsxs(Ru,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:g,children:[S.jsx(Ru.Target,{children:S.jsx(f1,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:S.jsx(Eje,{})})}),S.jsxs(Ru.Dropdown,{children:[e&&S.jsx(Ru.Item,{leftSection:S.jsx($je,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),S.jsx(Ru.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:S.jsx(kje,{size:14}),children:"Contact"}),e&&S.jsx(Ru.Item,{leftSection:S.jsx(Pq,{size:14}),onClick:()=>sPe(l,n,r,_),children:"Next Participant"}),e&&S.jsx(Ru.Item,{leftSection:S.jsx(v0e,{size:14}),component:"a",href:`${Wo}analysis/stats/${b}`,children:"Analyze & Manage"})]})]})]})})]})})}function cPe(e,t){var n;return cS(e)&&t.baseComponents?dG({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function JFt(){var u;const e=(u=N0())==null?void 0:u.uiConfig.sidebar,t=N0(),n=ih(),r=t.components[n],i=O.useMemo(()=>r?cPe(r,t):null,[r,t]),s=hG(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?S.jsxs(ci.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&S.jsxs(ci.Section,{bg:"gray.3",p:"md",children:[S.jsx(bt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),S.jsx(au,{text:o})]}),S.jsx(ci.Section,{p:"md",children:S.jsx(p4,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):S.jsx(ci.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:S.jsx(p4,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function ZFt(){const e=Ur(u=>u.showHelpText),t=Ur(u=>u.config),n=hu(),{toggleShowHelpText:r}=Ca(),[i,s]=O.useState(""),[o,a]=O.useState(!0);return O.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await mG(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),S.jsx(ns,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?S.jsx(au,{text:i}):S.jsx(jy,{path:t.uiConfig.helpTextPath})})}function e8t(){const e=Ur(o=>o.alertModal),{setAlertModal:t}=Ca(),n=hu(),[r,i]=O.useState(e.show),s=O.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return O.useEffect(()=>i(e.show),[e.show]),S.jsx(ns,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:S.jsxs(l0,{color:"red",radius:"xs",title:"Alert",icon:S.jsx(hje,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[S.jsx(bt,{my:"md",children:e.message}),S.jsx(is,{w:"100%",justify:"end",children:S.jsx(hn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const Rfe=15,Pfe=3;function t8t({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){const o=["var(--mantine-color-yellow-8)","var(--mantine-color-green-8)","var(--mantine-color-indigo-8)","var(--mantine-color-violet-8)","var(--mantine-color-cyan-8)","var(--mantine-color-orange-3)","var(--mantine-color-lime-3)","var(--mantine-color-teal-3)","var(--mantine-color-pink-3)"],a=new Map;if(a.set("Root","var(--mantine-color-grape-3)"),t.provenanceGraph){let u=0;Object.entries(t.provenanceGraph.nodes).forEach(l=>{const[,c]=l;a.has(c.label)||(a.set(c.label,o[u]),u=(u+1)%o.length)})}return S.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(u=>{const[l,c]=u;return S.jsx("g",{onClick:()=>i(l,c.createdOn,s),children:S.jsx("rect",{fill:l===r?"#e15759":a.get(c.label),x:e(c.createdOn)-Pfe/2,y:n/2-Rfe/2,width:Pfe,height:Rfe})},l)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?S.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null,S.jsx(hH,{position:{bottom:10,left:10},children:S.jsxs(_a,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[S.jsx(_a.Target,{children:S.jsx(hn,{children:"Show Legend"})}),S.jsx(_a.Dropdown,{children:S.jsx(qd,{children:Array.from(a.keys()).map(u=>S.jsxs(is,{children:[S.jsx(BH,{color:a.get(u)}),S.jsx("span",{children:u})]},u))})})]})})]})}const Dfe={left:5,top:0,right:5,bottom:0};function n8t({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=O.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=O.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=O.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return S.jsx(t8t,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return S.jsxs("svg",{style:{width:n,height:r},children:[S.jsx("line",{stroke:"black",strokeWidth:1,x1:Dfe.left,x2:n+Dfe.left,y1:r/2,y2:r/2}),c]})}function r8t(e){const t=O.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return O.useLayoutEffect(()=>{t.current=e}),O.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function i8t({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=O.useRef(0),u=O.useRef(Date.now()),[l,c]=O.useState(0);O.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=r8t(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});O.useEffect(()=>{i&&a.current>=r&&(n(o,0),u.current=Date.now()-a.current,a.current=0)},[o,i,r,n]),O.useEffect(()=>{let h=null;return i&&a.current<r&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[r,f,i]);const d=O.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return S.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:S.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function CV(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const nj={left:0,top:0,right:0,bottom:0};function s8t(e,t){return t?t.getParticipantData(e):null}function o8t({setTimeString:e}){const[t]=G0(),n=O.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=_s(),i=Ur(X=>X.analysisIsPlaying),s=Ur(X=>X.analysisHasAudio),o=Ur(X=>X.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l,setAnalysisIsPlaying:c}=Ca(),f=hu(),d=ih(),h=Uf();O.useEffect(()=>{f(a(null))},[h,a,f]);const[p,{width:g}]=sI(),[y,x]=O.useState(0),[b,_]=O.useState(null),[E,T]=O.useState(0),{value:k,status:I}=h6(s8t,[n,r]),[R,D]=kOe(0,100),L=O.useRef(null),[M,z]=O.useState(!0),F=O.useRef(null),H=O.useMemo(()=>`${d}_${h}`,[d,h]);O.useEffect(()=>{f(c(!1))},[n,d,h,f,c]),O.useEffect(()=>{var X;if(H&&k&&((X=k.answers[H])!=null&&X.provenanceGraph)){const V=XI.create(),K=wY({registry:V,initialState:{}});k.answers[H].provenanceGraph&&(K.importObject(h0(k.answers[H].provenanceGraph)),f(l(!0)),F.current=K)}else f(l(!1))},[k,H,f,l]);const Q=O.useCallback(X=>{var V;X&&(H&&k&&F.current&&(f(a(F.current.getState((V=k.answers[H].provenanceGraph)==null?void 0:V.nodes[X]))),F.current.to(X)),_(X))},[k,a,f,H]);O.useEffect(()=>{var K;if(!H||!k||!F.current||!((K=k.answers[H])!=null&&K.provenanceGraph))return;const X=k.answers[H].provenanceGraph;if(!X)return;if(!b||!X.nodes[b]){Q(X.root);return}let V=X.nodes[b];for(;;)if(R<V.createdOn){if(D0t(V))break;{const ee=V.parent;V=X.nodes[ee]}}else if(V.children.length>0){const ee=V.children[0];if(R>X.nodes[ee].createdOn)V=X.nodes[ee];else break}else break;V.id!==b&&Q(V.id)},[Q,b,k,n,R,H]);const J=O.useMemo(()=>(k==null?void 0:k.answers[H].startTime)||0,[k,H]);O.useEffect(()=>{E===0?e(""):R!==0&&e(`${CV(R-J)} / ${CV(E*1e3)}`)},[H,k,R,e,J,E]),O.useEffect(()=>{if(!s&&o&&k){const X=k.answers[H].endTime-k.answers[H].startTime;T(X>-1?X/1e3:0)}},[s,o,H,k]);const ne=rS(),Z=O.useRef(null),ie=O.useCallback(async X=>{if(Z.current=X,X&&k&&ne&&H&&r)try{const V=await r.getAudio(H,n);await X.load(V),z(!1),f(u(!0)),T(X.getDuration()),x(X.getWidth()),X.seekTo(0),X.on("redrawcomplete",()=>x(X.getWidth()))}catch(V){throw f(u(!1)),new Error(V)}else f(u(!1)),T(0)},[k,ne,H,r,n,f,u]),q=O.useCallback((X,V)=>{if(X>E*1e3+J){f(c(!1)),D(X);return}D(X),Z.current&&V!==void 0&&setTimeout(()=>{var K;(K=Z.current)==null||K.seekTo(V)})},[c,D,J,f,E]);O.useEffect(()=>{Z.current&&(i?Z.current.play():Z.current.pause())},[Z,i,E,J,D]);const U=O.useMemo(()=>{var K,ee;if(!k||!((K=k.answers[H])!=null&&K.startTime)||!((ee=k.answers[H])!=null&&ee.endTime))return null;const X=E>0?k.answers[H].startTime+E*1e3:k.answers[H].endTime;return HL([nj.left,g+nj.left+nj.right]).domain([k.answers[H].startTime,X]).clamp(!0)},[k,H,g,E]);return O.useEffect(()=>{ie(Z.current)},[q,ie,k,n,Z]),S.jsx(is,{wrap:"nowrap",gap:10,mx:10,children:S.jsxs(qd,{ref:p,style:{width:"100%"},gap:0,children:[S.jsx(T0,{}),k!==null&&H?S.jsxs(Le,{ref:L,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[S.jsx(aPe,{onMount:ie,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:S.jsx(uPe,{id:"waveform",height:50})}),M?S.jsx(Up,{}):null]}):null,I==="success"&&k&&U&&H&&k.answers[H].provenanceGraph?S.jsx(n8t,{xScale:U,trialName:H,setPlayTime:q,currentNode:b,setCurrentNode:Q,participantData:k,width:y||g,height:25}):null,U&&k&&(s||o)?S.jsx(i8t,{duration:E*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:J,width:g,xScale:U,updateTimer:q}):null]})})}function a8t(e,t){return t?t.getParticipantData(e):null}function u8t(e){return e?e.getAllParticipantsData():null}function l8t(){const[e]=G0(),t=O.useMemo(()=>e.get("participantId")||void 0,[e]),n=ih(),r=Uf(),i=nh(),{setAnalysisIsPlaying:s}=Ca(),o=hu(),a=Ur(x=>x.analysisIsPlaying),{storageEngine:u}=_s(),{value:l,status:c}=h6(a8t,[t,u]),{value:f}=h6(u8t,[u]),[d,h]=O.useMemo(()=>{if(f&&l&&t&&n){const x=f.filter(T=>T.participantConfigHash===l.participantConfigHash),b=x.findIndex(T=>T.participantId===t),_=b<x.length-1?x[b+1]:x[0],E=b>0?x[b-1]:x[x.length-1];return[[_.participantId,Gd(_.sequence).indexOf(n)],[E.participantId,Gd(E.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=O.useMemo(()=>{const x={};return f==null||f.forEach(b=>{x[b.participantConfigHash]||(x[b.participantConfigHash]=new Set),x[b.participantConfigHash].add(b.participantId)}),Object.keys(x).sort((b,_)=>b===(l==null?void 0:l.participantConfigHash)?-1:_===(l==null?void 0:l.participantConfigHash)?1:0).map(b=>({group:`Config version: ${b}`,items:[...x[b]].map(_=>({value:_,label:_,disabled:b!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[g,y]=O.useState("");return S.jsx(ci.Footer,{zIndex:101,withBorder:!1,children:S.jsxs(Le,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[S.jsx(Oc,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),S.jsx(o8t,{setTimeString:y}),S.jsx(T0,{children:S.jsxs(is,{gap:"xs",style:{height:"50px"},children:[S.jsx(bt,{size:"sm",ff:"monospace",children:g}),S.jsx(f1,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?S.jsx(Uje,{}):S.jsx(zje,{})}),S.jsx(bt,{mx:"0",children:"Participant:"}),S.jsx(FT,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:x=>{i(`./../${Cd(0)}?participantId=${x}`)},data:p}),S.jsx(hn,{onClick:()=>i(`../${Cd(+r-1)}?participantId=${t}`,{relative:"path"}),children:S.jsx(mte,{})}),S.jsx(hn,{onClick:()=>i(`../${Cd(+r+1)}?participantId=${t}`,{relative:"path"}),children:S.jsx(gte,{})}),S.jsxs(hn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${Cd(h[1])}?participantId=${h[0]}`),children:[S.jsx(mte,{}),S.jsx(yte,{})]}),S.jsxs(hn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${Cd(d[1])}?participantId=${d[0]}`),children:[S.jsx(yte,{}),S.jsx(gte,{})]})]})})]})})}function c8t(){const e=O.useRef([]),t=N0(),n=t.uiConfig.windowEventDebounceTime??100,r=Ur(d=>d.showStudyBrowser),i=Ur(d=>d.analysisHasAudio),s=Ur(d=>d.analysisHasProvenance),o=Ur(d=>d.modes);O.useEffect(()=>{const d=Bm(T=>{e.current.push([Date.now(),"focus",T.target instanceof HTMLElement?T.target.tagName:""])},n,{maxWait:n}),h=Bm(T=>{e.current.push([Date.now(),"input",T.data??""])},n,{maxWait:n}),p=Bm(T=>{e.current.push([Date.now(),"keypress",T.key])},n,{maxWait:n}),g=Bm(T=>{e.current.push([Date.now(),"mousedown",[T.clientX,T.clientY]])},n,{maxWait:n}),y=Bm(T=>{e.current.push([Date.now(),"mouseup",[T.clientX,T.clientY]])},n,{maxWait:n}),x=Bm(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),b=Bm(T=>{e.current.push([Date.now(),"mousemove",[T.clientX,T.clientY]])},n,{maxWait:n}),_=Bm(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),E=Bm(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",g),window.addEventListener("mouseup",y),window.addEventListener("resize",x),window.addEventListener("mousemove",b),window.addEventListener("scroll",_),document.addEventListener("visibilitychange",E),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",g),window.addEventListener("mouseup",y),window.removeEventListener("resize",x),window.removeEventListener("mousemove",b),window.removeEventListener("scroll",_),document.removeEventListener("visibilitychange",E)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=O.useMemo(()=>o,[o]),c=O.useMemo(()=>u&&r,[u,r]),f=rS();return S.jsx(lbe.Provider,{value:e,children:S.jsxs(ci,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[S.jsx(JFt,{}),S.jsx(LFt,{}),S.jsx(QFt,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),S.jsx(ZFt,{}),S.jsx(e8t,{}),S.jsx(ci.Main,{children:S.jsx(_Be,{})}),f&&S.jsx(l8t,{})]})})}function f8t(e,t=!1){return typeof e=="number"?Nfe(e,t):Nfe(e.length,t).map(r=>r.map(i=>e[i]))}function Nfe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function fPe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=fPe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function d8t(e,t){const n=h0(e);return fPe(n,t,"root")}function dPe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&dPe(s,t,i,o)})}function h8t(e){const t=[];return dPe(e,t,"",0),t}function Ofe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return f8t(i.sort(()=>.5-Math.random()),!0)}function $fe(e){const n=h8t(e.sequence).map(s=>({[s]:Ofe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=d8t(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Ofe(e,o))})}),i}var aN={exports:{}},rj={},jm={},Nv={},ij={},sj={},oj={},Lfe;function a$(){return Lfe||(Lfe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((_,E)=>`${_}${E}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((_,E)=>(E instanceof n&&(_[E.str]=(_[E.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(x,...b){const _=[x[0]];let E=0;for(;E<b.length;)a(_,b[E]),_.push(x[++E]);return new r(_)}e._=i;const s=new r("+");function o(x,...b){const _=[h(x[0])];let E=0;for(;E<b.length;)_.push(s),a(_,b[E]),_.push(s,h(x[++E]));return u(_),new r(_)}e.str=o;function a(x,b){b instanceof r?x.push(...b._items):b instanceof n?x.push(b):x.push(f(b))}e.addCodeArg=a;function u(x){let b=1;for(;b<x.length-1;){if(x[b]===s){const _=l(x[b-1],x[b+1]);if(_!==void 0){x.splice(b-1,3,_);continue}x[b++]="+"}b++}}function l(x,b){if(b==='""')return x;if(x==='""')return b;if(typeof x=="string")return b instanceof n||x[x.length-1]!=='"'?void 0:typeof b!="string"?`${x.slice(0,-1)}${b}"`:b[0]==='"'?x.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(x instanceof n))return`"${x}${b.slice(1)}`}function c(x,b){return b.emptyStr()?x:x.emptyStr()?b:o`${x}${b}`}e.strConcat=c;function f(x){return typeof x=="number"||typeof x=="boolean"||x===null?x:h(Array.isArray(x)?x.join(","):x)}function d(x){return new r(h(x))}e.stringify=d;function h(x){return JSON.stringify(x).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(x){return typeof x=="string"&&e.IDENTIFIER.test(x)?new r(`.${x}`):i`[${x}]`}e.getProperty=p;function g(x){if(typeof x=="string"&&e.IDENTIFIER.test(x))return new r(`${x}`);throw new Error(`CodeGen: invalid export name: ${x}, use explicit $id name mapping`)}e.getEsmExportName=g;function y(x){return new r(x.toString())}e.regexpCode=y}(oj)),oj}var aj={},Mfe;function Ffe(){return Mfe||(Mfe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=a$();class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let g=this._values[h];if(g){const b=g.get(p);if(b)return b}else g=this._values[h]=new Map;g.set(p,d);const y=this._scope[h]||(this._scope[h]=[]),x=y.length;return y[x]=c.ref,d.setValue(c,{property:h,itemIndex:x}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const g=l[p];if(!g)continue;const y=f[p]=f[p]||new Map;g.forEach(x=>{if(y.has(x))return;y.set(x,r.Started);let b=c(x);if(b){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${x} = ${b};${this.opts._n}`}else if(b=d==null?void 0:d(x))h=(0,t._)`${h}${b}${this.opts._n}`;else throw new n(x);y.set(x,r.Completed)})}return h}}e.ValueScope=a}(aj)),aj}var Bfe;function fr(){return Bfe||(Bfe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=a$(),n=Ffe();var r=a$();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Ffe();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(K,ee){return this}}class o extends s{constructor(K,ee,fe){super(),this.varKind=K,this.name=ee,this.rhs=fe}render({es5:K,_n:ee}){const fe=K?n.varKinds.var:this.varKind,Ee=this.rhs===void 0?"":` = ${this.rhs}`;return`${fe} ${this.name}${Ee};`+ee}optimizeNames(K,ee){if(K[this.name.str])return this.rhs&&(this.rhs=H(this.rhs,K,ee)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(K,ee,fe){super(),this.lhs=K,this.rhs=ee,this.sideEffects=fe}render({_n:K}){return`${this.lhs} = ${this.rhs};`+K}optimizeNames(K,ee){if(!(this.lhs instanceof t.Name&&!K[this.lhs.str]&&!this.sideEffects))return this.rhs=H(this.rhs,K,ee),this}get names(){const K=this.lhs instanceof t.Name?{}:{...this.lhs.names};return F(K,this.rhs)}}class u extends a{constructor(K,ee,fe,Ee){super(K,fe,Ee),this.op=ee}render({_n:K}){return`${this.lhs} ${this.op}= ${this.rhs};`+K}}class l extends s{constructor(K){super(),this.label=K,this.names={}}render({_n:K}){return`${this.label}:`+K}}class c extends s{constructor(K){super(),this.label=K,this.names={}}render({_n:K}){return`break${this.label?` ${this.label}`:""};`+K}}class f extends s{constructor(K){super(),this.error=K}render({_n:K}){return`throw ${this.error};`+K}get names(){return this.error.names}}class d extends s{constructor(K){super(),this.code=K}render({_n:K}){return`${this.code};`+K}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(K,ee){return this.code=H(this.code,K,ee),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(K=[]){super(),this.nodes=K}render(K){return this.nodes.reduce((ee,fe)=>ee+fe.render(K),"")}optimizeNodes(){const{nodes:K}=this;let ee=K.length;for(;ee--;){const fe=K[ee].optimizeNodes();Array.isArray(fe)?K.splice(ee,1,...fe):fe?K[ee]=fe:K.splice(ee,1)}return K.length>0?this:void 0}optimizeNames(K,ee){const{nodes:fe}=this;let Ee=fe.length;for(;Ee--;){const ye=fe[Ee];ye.optimizeNames(K,ee)||(Q(K,ye.names),fe.splice(Ee,1))}return fe.length>0?this:void 0}get names(){return this.nodes.reduce((K,ee)=>z(K,ee.names),{})}}class p extends h{render(K){return"{"+K._n+super.render(K)+"}"+K._n}}class g extends h{}class y extends p{}y.kind="else";class x extends p{constructor(K,ee){super(ee),this.condition=K}render(K){let ee=`if(${this.condition})`+super.render(K);return this.else&&(ee+="else "+this.else.render(K)),ee}optimizeNodes(){super.optimizeNodes();const K=this.condition;if(K===!0)return this.nodes;let ee=this.else;if(ee){const fe=ee.optimizeNodes();ee=this.else=Array.isArray(fe)?new y(fe):fe}if(ee)return K===!1?ee instanceof x?ee:ee.nodes:this.nodes.length?this:new x(J(K),ee instanceof x?[ee]:ee.nodes);if(!(K===!1||!this.nodes.length))return this}optimizeNames(K,ee){var fe;if(this.else=(fe=this.else)===null||fe===void 0?void 0:fe.optimizeNames(K,ee),!!(super.optimizeNames(K,ee)||this.else))return this.condition=H(this.condition,K,ee),this}get names(){const K=super.names;return F(K,this.condition),this.else&&z(K,this.else.names),K}}x.kind="if";class b extends p{}b.kind="for";class _ extends b{constructor(K){super(),this.iteration=K}render(K){return`for(${this.iteration})`+super.render(K)}optimizeNames(K,ee){if(super.optimizeNames(K,ee))return this.iteration=H(this.iteration,K,ee),this}get names(){return z(super.names,this.iteration.names)}}class E extends b{constructor(K,ee,fe,Ee){super(),this.varKind=K,this.name=ee,this.from=fe,this.to=Ee}render(K){const ee=K.es5?n.varKinds.var:this.varKind,{name:fe,from:Ee,to:ye}=this;return`for(${ee} ${fe}=${Ee}; ${fe}<${ye}; ${fe}++)`+super.render(K)}get names(){const K=F(super.names,this.from);return F(K,this.to)}}class T extends b{constructor(K,ee,fe,Ee){super(),this.loop=K,this.varKind=ee,this.name=fe,this.iterable=Ee}render(K){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(K)}optimizeNames(K,ee){if(super.optimizeNames(K,ee))return this.iterable=H(this.iterable,K,ee),this}get names(){return z(super.names,this.iterable.names)}}class k extends p{constructor(K,ee,fe){super(),this.name=K,this.args=ee,this.async=fe}render(K){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(K)}}k.kind="func";class I extends h{render(K){return"return "+super.render(K)}}I.kind="return";class R extends p{render(K){let ee="try"+super.render(K);return this.catch&&(ee+=this.catch.render(K)),this.finally&&(ee+=this.finally.render(K)),ee}optimizeNodes(){var K,ee;return super.optimizeNodes(),(K=this.catch)===null||K===void 0||K.optimizeNodes(),(ee=this.finally)===null||ee===void 0||ee.optimizeNodes(),this}optimizeNames(K,ee){var fe,Ee;return super.optimizeNames(K,ee),(fe=this.catch)===null||fe===void 0||fe.optimizeNames(K,ee),(Ee=this.finally)===null||Ee===void 0||Ee.optimizeNames(K,ee),this}get names(){const K=super.names;return this.catch&&z(K,this.catch.names),this.finally&&z(K,this.finally.names),K}}class D extends p{constructor(K){super(),this.error=K}render(K){return`catch(${this.error})`+super.render(K)}}D.kind="catch";class L extends p{render(K){return"finally"+super.render(K)}}L.kind="finally";class M{constructor(K,ee={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...ee,_n:ee.lines?`
`:""},this._extScope=K,this._scope=new n.Scope({parent:K}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(K){return this._scope.name(K)}scopeName(K){return this._extScope.name(K)}scopeValue(K,ee){const fe=this._extScope.value(K,ee);return(this._values[fe.prefix]||(this._values[fe.prefix]=new Set)).add(fe),fe}getScopeValue(K,ee){return this._extScope.getValue(K,ee)}scopeRefs(K){return this._extScope.scopeRefs(K,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(K,ee,fe,Ee){const ye=this._scope.toName(ee);return fe!==void 0&&Ee&&(this._constants[ye.str]=fe),this._leafNode(new o(K,ye,fe)),ye}const(K,ee,fe){return this._def(n.varKinds.const,K,ee,fe)}let(K,ee,fe){return this._def(n.varKinds.let,K,ee,fe)}var(K,ee,fe){return this._def(n.varKinds.var,K,ee,fe)}assign(K,ee,fe){return this._leafNode(new a(K,ee,fe))}add(K,ee){return this._leafNode(new u(K,e.operators.ADD,ee))}code(K){return typeof K=="function"?K():K!==t.nil&&this._leafNode(new d(K)),this}object(...K){const ee=["{"];for(const[fe,Ee]of K)ee.length>1&&ee.push(","),ee.push(fe),(fe!==Ee||this.opts.es5)&&(ee.push(":"),(0,t.addCodeArg)(ee,Ee));return ee.push("}"),new t._Code(ee)}if(K,ee,fe){if(this._blockNode(new x(K)),ee&&fe)this.code(ee).else().code(fe).endIf();else if(ee)this.code(ee).endIf();else if(fe)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(K){return this._elseNode(new x(K))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(x,y)}_for(K,ee){return this._blockNode(K),ee&&this.code(ee).endFor(),this}for(K,ee){return this._for(new _(K),ee)}forRange(K,ee,fe,Ee,ye=this.opts.es5?n.varKinds.var:n.varKinds.let){const _e=this._scope.toName(K);return this._for(new E(ye,_e,ee,fe),()=>Ee(_e))}forOf(K,ee,fe,Ee=n.varKinds.const){const ye=this._scope.toName(K);if(this.opts.es5){const _e=ee instanceof t.Name?ee:this.var("_arr",ee);return this.forRange("_i",0,(0,t._)`${_e}.length`,De=>{this.var(ye,(0,t._)`${_e}[${De}]`),fe(ye)})}return this._for(new T("of",Ee,ye,ee),()=>fe(ye))}forIn(K,ee,fe,Ee=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(K,(0,t._)`Object.keys(${ee})`,fe);const ye=this._scope.toName(K);return this._for(new T("in",Ee,ye,ee),()=>fe(ye))}endFor(){return this._endBlockNode(b)}label(K){return this._leafNode(new l(K))}break(K){return this._leafNode(new c(K))}return(K){const ee=new I;if(this._blockNode(ee),this.code(K),ee.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(I)}try(K,ee,fe){if(!ee&&!fe)throw new Error('CodeGen: "try" without "catch" and "finally"');const Ee=new R;if(this._blockNode(Ee),this.code(K),ee){const ye=this.name("e");this._currNode=Ee.catch=new D(ye),ee(ye)}return fe&&(this._currNode=Ee.finally=new L,this.code(fe)),this._endBlockNode(D,L)}throw(K){return this._leafNode(new f(K))}block(K,ee){return this._blockStarts.push(this._nodes.length),K&&this.code(K).endBlock(ee),this}endBlock(K){const ee=this._blockStarts.pop();if(ee===void 0)throw new Error("CodeGen: not in self-balancing block");const fe=this._nodes.length-ee;if(fe<0||K!==void 0&&fe!==K)throw new Error(`CodeGen: wrong number of nodes: ${fe} vs ${K} expected`);return this._nodes.length=ee,this}func(K,ee=t.nil,fe,Ee){return this._blockNode(new k(K,ee,fe)),Ee&&this.code(Ee).endFunc(),this}endFunc(){return this._endBlockNode(k)}optimize(K=1){for(;K-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(K){return this._currNode.nodes.push(K),this}_blockNode(K){this._currNode.nodes.push(K),this._nodes.push(K)}_endBlockNode(K,ee){const fe=this._currNode;if(fe instanceof K||ee&&fe instanceof ee)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${ee?`${K.kind}/${ee.kind}`:K.kind}"`)}_elseNode(K){const ee=this._currNode;if(!(ee instanceof x))throw new Error('CodeGen: "else" without "if"');return this._currNode=ee.else=K,this}get _root(){return this._nodes[0]}get _currNode(){const K=this._nodes;return K[K.length-1]}set _currNode(K){const ee=this._nodes;ee[ee.length-1]=K}}e.CodeGen=M;function z(V,K){for(const ee in K)V[ee]=(V[ee]||0)+(K[ee]||0);return V}function F(V,K){return K instanceof t._CodeOrName?z(V,K.names):V}function H(V,K,ee){if(V instanceof t.Name)return fe(V);if(!Ee(V))return V;return new t._Code(V._items.reduce((ye,_e)=>(_e instanceof t.Name&&(_e=fe(_e)),_e instanceof t._Code?ye.push(..._e._items):ye.push(_e),ye),[]));function fe(ye){const _e=ee[ye.str];return _e===void 0||K[ye.str]!==1?ye:(delete K[ye.str],_e)}function Ee(ye){return ye instanceof t._Code&&ye._items.some(_e=>_e instanceof t.Name&&K[_e.str]===1&&ee[_e.str]!==void 0)}}function Q(V,K){for(const ee in K)V[ee]=(V[ee]||0)-(K[ee]||0)}function J(V){return typeof V=="boolean"||typeof V=="number"||V===null?!V:(0,t._)`!${X(V)}`}e.not=J;const ne=U(e.operators.AND);function Z(...V){return V.reduce(ne)}e.and=Z;const ie=U(e.operators.OR);function q(...V){return V.reduce(ie)}e.or=q;function U(V){return(K,ee)=>K===t.nil?ee:ee===t.nil?K:(0,t._)`${X(K)} ${V} ${X(ee)}`}function X(V){return V instanceof t.Name?V:(0,t._)`(${V})`}}(sj)),sj}var tr={},jfe;function Wr(){if(jfe)return tr;jfe=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.checkStrictMode=tr.getErrorPath=tr.Type=tr.useFunc=tr.setEvaluated=tr.evaluatedPropsToName=tr.mergeEvaluated=tr.eachItem=tr.unescapeJsonPointer=tr.escapeJsonPointer=tr.escapeFragment=tr.unescapeFragment=tr.schemaRefOrVal=tr.schemaHasRulesButRef=tr.schemaHasRules=tr.checkUnknownRules=tr.alwaysValidSchema=tr.toHash=void 0;const e=fr(),t=a$();function n(T){const k={};for(const I of T)k[I]=!0;return k}tr.toHash=n;function r(T,k){return typeof k=="boolean"?k:Object.keys(k).length===0?!0:(i(T,k),!s(k,T.self.RULES.all))}tr.alwaysValidSchema=r;function i(T,k=T.schema){const{opts:I,self:R}=T;if(!I.strictSchema||typeof k=="boolean")return;const D=R.RULES.keywords;for(const L in k)D[L]||E(T,`unknown keyword: "${L}"`)}tr.checkUnknownRules=i;function s(T,k){if(typeof T=="boolean")return!T;for(const I in T)if(k[I])return!0;return!1}tr.schemaHasRules=s;function o(T,k){if(typeof T=="boolean")return!T;for(const I in T)if(I!=="$ref"&&k.all[I])return!0;return!1}tr.schemaHasRulesButRef=o;function a({topSchemaRef:T,schemaPath:k},I,R,D){if(!D){if(typeof I=="number"||typeof I=="boolean")return I;if(typeof I=="string")return(0,e._)`${I}`}return(0,e._)`${T}${k}${(0,e.getProperty)(R)}`}tr.schemaRefOrVal=a;function u(T){return f(decodeURIComponent(T))}tr.unescapeFragment=u;function l(T){return encodeURIComponent(c(T))}tr.escapeFragment=l;function c(T){return typeof T=="number"?`${T}`:T.replace(/~/g,"~0").replace(/\//g,"~1")}tr.escapeJsonPointer=c;function f(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}tr.unescapeJsonPointer=f;function d(T,k){if(Array.isArray(T))for(const I of T)k(I);else k(T)}tr.eachItem=d;function h({mergeNames:T,mergeToName:k,mergeValues:I,resultToName:R}){return(D,L,M,z)=>{const F=M===void 0?L:M instanceof e.Name?(L instanceof e.Name?T(D,L,M):k(D,L,M),M):L instanceof e.Name?(k(D,M,L),L):I(L,M);return z===e.Name&&!(F instanceof e.Name)?R(D,F):F}}tr.mergeEvaluated={props:h({mergeNames:(T,k,I)=>T.if((0,e._)`${I} !== true && ${k} !== undefined`,()=>{T.if((0,e._)`${k} === true`,()=>T.assign(I,!0),()=>T.assign(I,(0,e._)`${I} || {}`).code((0,e._)`Object.assign(${I}, ${k})`))}),mergeToName:(T,k,I)=>T.if((0,e._)`${I} !== true`,()=>{k===!0?T.assign(I,!0):(T.assign(I,(0,e._)`${I} || {}`),g(T,I,k))}),mergeValues:(T,k)=>T===!0?!0:{...T,...k},resultToName:p}),items:h({mergeNames:(T,k,I)=>T.if((0,e._)`${I} !== true && ${k} !== undefined`,()=>T.assign(I,(0,e._)`${k} === true ? true : ${I} > ${k} ? ${I} : ${k}`)),mergeToName:(T,k,I)=>T.if((0,e._)`${I} !== true`,()=>T.assign(I,k===!0?!0:(0,e._)`${I} > ${k} ? ${I} : ${k}`)),mergeValues:(T,k)=>T===!0?!0:Math.max(T,k),resultToName:(T,k)=>T.var("items",k)})};function p(T,k){if(k===!0)return T.var("props",!0);const I=T.var("props",(0,e._)`{}`);return k!==void 0&&g(T,I,k),I}tr.evaluatedPropsToName=p;function g(T,k,I){Object.keys(I).forEach(R=>T.assign((0,e._)`${k}${(0,e.getProperty)(R)}`,!0))}tr.setEvaluated=g;const y={};function x(T,k){return T.scopeValue("func",{ref:k,code:y[k.code]||(y[k.code]=new t._Code(k.code))})}tr.useFunc=x;var b;(function(T){T[T.Num=0]="Num",T[T.Str=1]="Str"})(b||(tr.Type=b={}));function _(T,k,I){if(T instanceof e.Name){const R=k===b.Num;return I?R?(0,e._)`"[" + ${T} + "]"`:(0,e._)`"['" + ${T} + "']"`:R?(0,e._)`"/" + ${T}`:(0,e._)`"/" + ${T}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return I?(0,e.getProperty)(T).toString():"/"+c(T)}tr.getErrorPath=_;function E(T,k,I=T.opts.strictSchema){if(I){if(k=`strict mode: ${k}`,I===!0)throw new Error(k);T.self.logger.warn(k)}}return tr.checkStrictMode=E,tr}var uN={},Ufe;function $1(){if(Ufe)return uN;Ufe=1,Object.defineProperty(uN,"__esModule",{value:!0});const e=fr(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return uN.default=t,uN}var zfe;function H5(){return zfe||(zfe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=fr(),n=Wr(),r=$1();e.keywordError={message:({keyword:y})=>(0,t.str)`must pass "${y}" keyword validation`},e.keyword$DataError={message:({keyword:y,schemaType:x})=>x?(0,t.str)`"${y}" keyword must be ${x} ($data)`:(0,t.str)`"${y}" keyword is invalid ($data)`};function i(y,x=e.keywordError,b,_){const{it:E}=y,{gen:T,compositeRule:k,allErrors:I}=E,R=f(y,x,b);_??(k||I)?u(T,R):l(E,(0,t._)`[${R}]`)}e.reportError=i;function s(y,x=e.keywordError,b){const{it:_}=y,{gen:E,compositeRule:T,allErrors:k}=_,I=f(y,x,b);u(E,I),T||k||l(_,r.default.vErrors)}e.reportExtraError=s;function o(y,x){y.assign(r.default.errors,x),y.if((0,t._)`${r.default.vErrors} !== null`,()=>y.if(x,()=>y.assign((0,t._)`${r.default.vErrors}.length`,x),()=>y.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:y,keyword:x,schemaValue:b,data:_,errsCount:E,it:T}){if(E===void 0)throw new Error("ajv implementation error");const k=y.name("err");y.forRange("i",E,r.default.errors,I=>{y.const(k,(0,t._)`${r.default.vErrors}[${I}]`),y.if((0,t._)`${k}.instancePath === undefined`,()=>y.assign((0,t._)`${k}.instancePath`,(0,t.strConcat)(r.default.instancePath,T.errorPath))),y.assign((0,t._)`${k}.schemaPath`,(0,t.str)`${T.errSchemaPath}/${x}`),T.opts.verbose&&(y.assign((0,t._)`${k}.schema`,b),y.assign((0,t._)`${k}.data`,_))})}e.extendErrors=a;function u(y,x){const b=y.const("err",x);y.if((0,t._)`${r.default.vErrors} === null`,()=>y.assign(r.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${r.default.vErrors}.push(${b})`),y.code((0,t._)`${r.default.errors}++`)}function l(y,x){const{gen:b,validateName:_,schemaEnv:E}=y;E.$async?b.throw((0,t._)`new ${y.ValidationError}(${x})`):(b.assign((0,t._)`${_}.errors`,x),b.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(y,x,b){const{createErrors:_}=y.it;return _===!1?(0,t._)`{}`:d(y,x,b)}function d(y,x,b={}){const{gen:_,it:E}=y,T=[h(E,b),p(y,b)];return g(y,x,T),_.object(...T)}function h({errorPath:y},{instancePath:x}){const b=x?(0,t.str)`${y}${(0,n.getErrorPath)(x,n.Type.Str)}`:y;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,b)]}function p({keyword:y,it:{errSchemaPath:x}},{schemaPath:b,parentSchema:_}){let E=_?x:(0,t.str)`${x}/${y}`;return b&&(E=(0,t.str)`${E}${(0,n.getErrorPath)(b,n.Type.Str)}`),[c.schemaPath,E]}function g(y,{params:x,message:b},_){const{keyword:E,data:T,schemaValue:k,it:I}=y,{opts:R,propertyName:D,topSchemaRef:L,schemaPath:M}=I;_.push([c.keyword,E],[c.params,typeof x=="function"?x(y):x||(0,t._)`{}`]),R.messages&&_.push([c.message,typeof b=="function"?b(y):b]),R.verbose&&_.push([c.schema,k],[c.parentSchema,(0,t._)`${L}${M}`],[r.default.data,T]),D&&_.push([c.propertyName,D])}}(ij)),ij}var Vfe;function p8t(){if(Vfe)return Nv;Vfe=1,Object.defineProperty(Nv,"__esModule",{value:!0}),Nv.boolOrEmptySchema=Nv.topBoolOrEmptySchema=void 0;const e=H5(),t=fr(),n=$1(),r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?o(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}Nv.topBoolOrEmptySchema=i;function s(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),o(a)):l.var(u,!0)}Nv.boolOrEmptySchema=s;function o(a,u){const{gen:l,data:c}=a,f={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(f,r,void 0,u)}return Nv}var ua={},Ov={},Hfe;function hPe(){if(Hfe)return Ov;Hfe=1,Object.defineProperty(Ov,"__esModule",{value:!0}),Ov.getRules=Ov.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}Ov.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return Ov.getRules=r,Ov}var Um={},qfe;function pPe(){if(qfe)return Um;qfe=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.shouldUseRule=Um.shouldUseGroup=Um.schemaHasRulesForType=void 0;function e({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&t(r,o)}Um.schemaHasRulesForType=e;function t(r,i){return i.rules.some(s=>n(r,s))}Um.shouldUseGroup=t;function n(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return Um.shouldUseRule=n,Um}var Wfe;function u$(){if(Wfe)return ua;Wfe=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.reportTypeError=ua.checkDataTypes=ua.checkDataType=ua.coerceAndCheckDataType=ua.getJSONTypes=ua.getSchemaTypes=ua.DataType=void 0;const e=hPe(),t=pPe(),n=H5(),r=fr(),i=Wr();var s;(function(b){b[b.Correct=0]="Correct",b[b.Wrong=1]="Wrong"})(s||(ua.DataType=s={}));function o(b){const _=a(b.type);if(_.includes("null")){if(b.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!_.length&&b.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');b.nullable===!0&&_.push("null")}return _}ua.getSchemaTypes=o;function a(b){const _=Array.isArray(b)?b:b?[b]:[];if(_.every(e.isJSONType))return _;throw new Error("type must be JSONType or JSONType[]: "+_.join(","))}ua.getJSONTypes=a;function u(b,_){const{gen:E,data:T,opts:k}=b,I=c(_,k.coerceTypes),R=_.length>0&&!(I.length===0&&_.length===1&&(0,t.schemaHasRulesForType)(b,_[0]));if(R){const D=p(_,T,k.strictNumbers,s.Wrong);E.if(D,()=>{I.length?f(b,_,I):y(b)})}return R}ua.coerceAndCheckDataType=u;const l=new Set(["string","number","integer","boolean","null"]);function c(b,_){return _?b.filter(E=>l.has(E)||_==="array"&&E==="array"):[]}function f(b,_,E){const{gen:T,data:k,opts:I}=b,R=T.let("dataType",(0,r._)`typeof ${k}`),D=T.let("coerced",(0,r._)`undefined`);I.coerceTypes==="array"&&T.if((0,r._)`${R} == 'object' && Array.isArray(${k}) && ${k}.length == 1`,()=>T.assign(k,(0,r._)`${k}[0]`).assign(R,(0,r._)`typeof ${k}`).if(p(_,k,I.strictNumbers),()=>T.assign(D,k))),T.if((0,r._)`${D} !== undefined`);for(const M of E)(l.has(M)||M==="array"&&I.coerceTypes==="array")&&L(M);T.else(),y(b),T.endIf(),T.if((0,r._)`${D} !== undefined`,()=>{T.assign(k,D),d(b,D)});function L(M){switch(M){case"string":T.elseIf((0,r._)`${R} == "number" || ${R} == "boolean"`).assign(D,(0,r._)`"" + ${k}`).elseIf((0,r._)`${k} === null`).assign(D,(0,r._)`""`);return;case"number":T.elseIf((0,r._)`${R} == "boolean" || ${k} === null
              || (${R} == "string" && ${k} && ${k} == +${k})`).assign(D,(0,r._)`+${k}`);return;case"integer":T.elseIf((0,r._)`${R} === "boolean" || ${k} === null
              || (${R} === "string" && ${k} && ${k} == +${k} && !(${k} % 1))`).assign(D,(0,r._)`+${k}`);return;case"boolean":T.elseIf((0,r._)`${k} === "false" || ${k} === 0 || ${k} === null`).assign(D,!1).elseIf((0,r._)`${k} === "true" || ${k} === 1`).assign(D,!0);return;case"null":T.elseIf((0,r._)`${k} === "" || ${k} === 0 || ${k} === false`),T.assign(D,null);return;case"array":T.elseIf((0,r._)`${R} === "string" || ${R} === "number"
              || ${R} === "boolean" || ${k} === null`).assign(D,(0,r._)`[${k}]`)}}}function d({gen:b,parentData:_,parentDataProperty:E},T){b.if((0,r._)`${_} !== undefined`,()=>b.assign((0,r._)`${_}[${E}]`,T))}function h(b,_,E,T=s.Correct){const k=T===s.Correct?r.operators.EQ:r.operators.NEQ;let I;switch(b){case"null":return(0,r._)`${_} ${k} null`;case"array":I=(0,r._)`Array.isArray(${_})`;break;case"object":I=(0,r._)`${_} && typeof ${_} == "object" && !Array.isArray(${_})`;break;case"integer":I=R((0,r._)`!(${_} % 1) && !isNaN(${_})`);break;case"number":I=R();break;default:return(0,r._)`typeof ${_} ${k} ${b}`}return T===s.Correct?I:(0,r.not)(I);function R(D=r.nil){return(0,r.and)((0,r._)`typeof ${_} == "number"`,D,E?(0,r._)`isFinite(${_})`:r.nil)}}ua.checkDataType=h;function p(b,_,E,T){if(b.length===1)return h(b[0],_,E,T);let k;const I=(0,i.toHash)(b);if(I.array&&I.object){const R=(0,r._)`typeof ${_} != "object"`;k=I.null?R:(0,r._)`!${_} || ${R}`,delete I.null,delete I.array,delete I.object}else k=r.nil;I.number&&delete I.integer;for(const R in I)k=(0,r.and)(k,h(R,_,E,T));return k}ua.checkDataTypes=p;const g={message:({schema:b})=>`must be ${b}`,params:({schema:b,schemaValue:_})=>typeof b=="string"?(0,r._)`{type: ${b}}`:(0,r._)`{type: ${_}}`};function y(b){const _=x(b);(0,n.reportError)(_,g)}ua.reportTypeError=y;function x(b){const{gen:_,data:E,schema:T}=b,k=(0,i.schemaRefOrVal)(b,T,"type");return{gen:_,keyword:"type",data:E,schema:T.type,schemaCode:k,schemaValue:k,parentSchema:T,params:{},it:b}}return ua}var _C={},Gfe;function m8t(){if(Gfe)return _C;Gfe=1,Object.defineProperty(_C,"__esModule",{value:!0}),_C.assignDefaults=void 0;const e=fr(),t=Wr();function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const u in o)r(i,u,o[u].default);else s==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}_C.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(o===void 0)return;const f=(0,e._)`${l}${(0,e.getProperty)(s)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${f}`);return}let d=(0,e._)`${f} === undefined`;c.useDefaults==="empty"&&(d=(0,e._)`${d} || ${f} === null || ${f} === ""`),a.if(d,(0,e._)`${f} = ${(0,e.stringify)(o)}`)}return _C}var gd={},ri={},Yfe;function ph(){if(Yfe)return ri;Yfe=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.validateUnion=ri.validateArray=ri.usePattern=ri.callValidateCode=ri.schemaProperties=ri.allSchemaProperties=ri.noPropertyInData=ri.propertyInData=ri.isOwnProperty=ri.hasPropFunc=ri.reportMissingProp=ri.checkMissingProp=ri.checkReportMissingProp=void 0;const e=fr(),t=Wr(),n=$1(),r=Wr();function i(b,_){const{gen:E,data:T,it:k}=b;E.if(c(E,T,_,k.opts.ownProperties),()=>{b.setParams({missingProperty:(0,e._)`${_}`},!0),b.error()})}ri.checkReportMissingProp=i;function s({gen:b,data:_,it:{opts:E}},T,k){return(0,e.or)(...T.map(I=>(0,e.and)(c(b,_,I,E.ownProperties),(0,e._)`${k} = ${I}`)))}ri.checkMissingProp=s;function o(b,_){b.setParams({missingProperty:_},!0),b.error()}ri.reportMissingProp=o;function a(b){return b.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}ri.hasPropFunc=a;function u(b,_,E){return(0,e._)`${a(b)}.call(${_}, ${E})`}ri.isOwnProperty=u;function l(b,_,E,T){const k=(0,e._)`${_}${(0,e.getProperty)(E)} !== undefined`;return T?(0,e._)`${k} && ${u(b,_,E)}`:k}ri.propertyInData=l;function c(b,_,E,T){const k=(0,e._)`${_}${(0,e.getProperty)(E)} === undefined`;return T?(0,e.or)(k,(0,e.not)(u(b,_,E))):k}ri.noPropertyInData=c;function f(b){return b?Object.keys(b).filter(_=>_!=="__proto__"):[]}ri.allSchemaProperties=f;function d(b,_){return f(_).filter(E=>!(0,t.alwaysValidSchema)(b,_[E]))}ri.schemaProperties=d;function h({schemaCode:b,data:_,it:{gen:E,topSchemaRef:T,schemaPath:k,errorPath:I},it:R},D,L,M){const z=M?(0,e._)`${b}, ${_}, ${T}${k}`:_,F=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,I)],[n.default.parentData,R.parentData],[n.default.parentDataProperty,R.parentDataProperty],[n.default.rootData,n.default.rootData]];R.opts.dynamicRef&&F.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const H=(0,e._)`${z}, ${E.object(...F)}`;return L!==e.nil?(0,e._)`${D}.call(${L}, ${H})`:(0,e._)`${D}(${H})`}ri.callValidateCode=h;const p=(0,e._)`new RegExp`;function g({gen:b,it:{opts:_}},E){const T=_.unicodeRegExp?"u":"",{regExp:k}=_.code,I=k(E,T);return b.scopeValue("pattern",{key:I.toString(),ref:I,code:(0,e._)`${k.code==="new RegExp"?p:(0,r.useFunc)(b,k)}(${E}, ${T})`})}ri.usePattern=g;function y(b){const{gen:_,data:E,keyword:T,it:k}=b,I=_.name("valid");if(k.allErrors){const D=_.let("valid",!0);return R(()=>_.assign(D,!1)),D}return _.var(I,!0),R(()=>_.break()),I;function R(D){const L=_.const("len",(0,e._)`${E}.length`);_.forRange("i",0,L,M=>{b.subschema({keyword:T,dataProp:M,dataPropType:t.Type.Num},I),_.if((0,e.not)(I),D)})}}ri.validateArray=y;function x(b){const{gen:_,schema:E,keyword:T,it:k}=b;if(!Array.isArray(E))throw new Error("ajv implementation error");if(E.some(L=>(0,t.alwaysValidSchema)(k,L))&&!k.opts.unevaluated)return;const R=_.let("valid",!1),D=_.name("_valid");_.block(()=>E.forEach((L,M)=>{const z=b.subschema({keyword:T,schemaProp:M,compositeRule:!0},D);_.assign(R,(0,e._)`${R} || ${D}`),b.mergeValidEvaluated(z,D)||_.if((0,e.not)(R))})),b.result(R,()=>b.reset(),()=>b.error(!0))}return ri.validateUnion=x,ri}var Kfe;function g8t(){if(Kfe)return gd;Kfe=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.validateKeywordUsage=gd.validSchemaType=gd.funcKeywordCode=gd.macroKeywordCode=void 0;const e=fr(),t=$1(),n=ph(),r=H5();function i(d,h){const{gen:p,keyword:g,schema:y,parentSchema:x,it:b}=d,_=h.macro.call(b.self,y,x,b),E=l(p,g,_);b.opts.validateSchema!==!1&&b.self.validateSchema(_,!0);const T=p.name("valid");d.subschema({schema:_,schemaPath:e.nil,errSchemaPath:`${b.errSchemaPath}/${g}`,topSchemaRef:E,compositeRule:!0},T),d.pass(T,()=>d.error(!0))}gd.macroKeywordCode=i;function s(d,h){var p;const{gen:g,keyword:y,schema:x,parentSchema:b,$data:_,it:E}=d;u(E,h);const T=!_&&h.compile?h.compile.call(E.self,x,b,E):h.validate,k=l(g,y,T),I=g.let("valid");d.block$data(I,R),d.ok((p=h.valid)!==null&&p!==void 0?p:I);function R(){if(h.errors===!1)M(),h.modifying&&o(d),z(()=>d.error());else{const F=h.async?D():L();h.modifying&&o(d),z(()=>a(d,F))}}function D(){const F=g.let("ruleErrs",null);return g.try(()=>M((0,e._)`await `),H=>g.assign(I,!1).if((0,e._)`${H} instanceof ${E.ValidationError}`,()=>g.assign(F,(0,e._)`${H}.errors`),()=>g.throw(H))),F}function L(){const F=(0,e._)`${k}.errors`;return g.assign(F,null),M(e.nil),F}function M(F=h.async?(0,e._)`await `:e.nil){const H=E.opts.passContext?t.default.this:t.default.self,Q=!("compile"in h&&!_||h.schema===!1);g.assign(I,(0,e._)`${F}${(0,n.callValidateCode)(d,k,H,Q)}`,h.modifying)}function z(F){var H;g.if((0,e.not)((H=h.valid)!==null&&H!==void 0?H:I),F)}}gd.funcKeywordCode=s;function o(d){const{gen:h,data:p,it:g}=d;h.if(g.parentData,()=>h.assign(p,(0,e._)`${g.parentData}[${g.parentDataProperty}]`))}function a(d,h){const{gen:p}=d;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(d)},()=>d.error())}function u({schemaEnv:d},h){if(h.async&&!d.$async)throw new Error("async keyword in sync schema")}function l(d,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return d.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(d,h,p=!1){return!h.length||h.some(g=>g==="array"?Array.isArray(d):g==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==g||p&&typeof d>"u")}gd.validSchemaType=c;function f({schema:d,opts:h,self:p,errSchemaPath:g},y,x){if(Array.isArray(y.keyword)?!y.keyword.includes(x):y.keyword!==x)throw new Error("ajv implementation error");const b=y.dependencies;if(b!=null&&b.some(_=>!Object.prototype.hasOwnProperty.call(d,_)))throw new Error(`parent schema must have dependencies of ${x}: ${b.join(",")}`);if(y.validateSchema&&!y.validateSchema(d[x])){const E=`keyword "${x}" value is invalid at path "${g}": `+p.errorsText(y.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(E);else throw new Error(E)}}return gd.validateKeywordUsage=f,gd}var zm={},Xfe;function y8t(){if(Xfe)return zm;Xfe=1,Object.defineProperty(zm,"__esModule",{value:!0}),zm.extendSubschemaMode=zm.extendSubschemaData=zm.getSubschema=void 0;const e=fr(),t=Wr();function n(s,{keyword:o,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:f}){if(o!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const d=s.schema[o];return a===void 0?{schema:d,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:d[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:f,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}zm.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:f}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=o;if(a!==void 0){const{errorPath:p,dataPathArr:g,opts:y}=o,x=d.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(x),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,u,y.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...g,s.parentDataProperty]}if(l!==void 0){const p=l instanceof e.Name?l:d.let("data",l,!0);h(p),f!==void 0&&(s.propertyName=f)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}zm.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(s.compositeRule=u),l!==void 0&&(s.createErrors=l),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return zm.extendSubschemaMode=i,zm}var ku={},uj={exports:{}},Qfe;function v8t(){if(Qfe)return uj.exports;Qfe=1;var e=uj.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(i,o,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,s,o,a,u,l,c,f,d){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,u,l,c,f,d);for(var h in o){var p=o[h];if(Array.isArray(p)){if(h in e.arrayKeywords)for(var g=0;g<p.length;g++)t(r,i,s,p[g],a+"/"+h+"/"+g,u,a,h,o,g)}else if(h in e.propsKeywords){if(p&&typeof p=="object")for(var y in p)t(r,i,s,p[y],a+"/"+h+"/"+n(y),u,a,h,o,y)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,s,p,a+"/"+h,u,a,h,o)}s(o,a,u,l,c,f,d)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return uj.exports}var Jfe;function q5(){if(Jfe)return ku;Jfe=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.getSchemaRefs=ku.resolveUrl=ku.normalizeId=ku._getFullPath=ku.getFullPath=ku.inlineRef=void 0;const e=Wr(),t=pG(),n=v8t(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(g,y=!0){return typeof g=="boolean"?!0:y===!0?!o(g):y?a(g)<=y:!1}ku.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(g){for(const y in g){if(s.has(y))return!0;const x=g[y];if(Array.isArray(x)&&x.some(o)||typeof x=="object"&&o(x))return!0}return!1}function a(g){let y=0;for(const x in g){if(x==="$ref")return 1/0;if(y++,!r.has(x)&&(typeof g[x]=="object"&&(0,e.eachItem)(g[x],b=>y+=a(b)),y===1/0))return 1/0}return y}function u(g,y="",x){x!==!1&&(y=f(y));const b=g.parse(y);return l(g,b)}ku.getFullPath=u;function l(g,y){return g.serialize(y).split("#")[0]+"#"}ku._getFullPath=l;const c=/#\/?$/;function f(g){return g?g.replace(c,""):""}ku.normalizeId=f;function d(g,y,x){return x=f(x),g.resolve(y,x)}ku.resolveUrl=d;const h=/^[a-z_][-a-z0-9._]*$/i;function p(g,y){if(typeof g=="boolean")return{};const{schemaId:x,uriResolver:b}=this.opts,_=f(g[x]||y),E={"":_},T=u(b,_,!1),k={},I=new Set;return n(g,{allKeys:!0},(L,M,z,F)=>{if(F===void 0)return;const H=T+M;let Q=E[F];typeof L[x]=="string"&&(Q=J.call(this,L[x])),ne.call(this,L.$anchor),ne.call(this,L.$dynamicAnchor),E[M]=Q;function J(Z){const ie=this.opts.uriResolver.resolve;if(Z=f(Q?ie(Q,Z):Z),I.has(Z))throw D(Z);I.add(Z);let q=this.refs[Z];return typeof q=="string"&&(q=this.refs[q]),typeof q=="object"?R(L,q.schema,Z):Z!==f(H)&&(Z[0]==="#"?(R(L,k[Z],Z),k[Z]=L):this.refs[Z]=H),Z}function ne(Z){if(typeof Z=="string"){if(!h.test(Z))throw new Error(`invalid anchor "${Z}"`);J.call(this,`#${Z}`)}}}),k;function R(L,M,z){if(M!==void 0&&!t(L,M))throw D(z)}function D(L){return new Error(`reference "${L}" resolves to more than one schema`)}}return ku.getSchemaRefs=p,ku}var Zfe;function W5(){if(Zfe)return jm;Zfe=1,Object.defineProperty(jm,"__esModule",{value:!0}),jm.getData=jm.KeywordCxt=jm.validateFunctionCode=void 0;const e=p8t(),t=u$(),n=pPe(),r=u$(),i=m8t(),s=g8t(),o=y8t(),a=fr(),u=$1(),l=q5(),c=Wr(),f=H5();function d(me){if(T(me)&&(I(me),E(me))){y(me);return}h(me,()=>(0,e.topBoolOrEmptySchema)(me))}jm.validateFunctionCode=d;function h({gen:me,validateName:de,schema:$e,schemaEnv:Pe,opts:Ze},it){Ze.code.es5?me.func(de,(0,a._)`${u.default.data}, ${u.default.valCxt}`,Pe.$async,()=>{me.code((0,a._)`"use strict"; ${b($e,Ze)}`),g(me,Ze),me.code(it)}):me.func(de,(0,a._)`${u.default.data}, ${p(Ze)}`,Pe.$async,()=>me.code(b($e,Ze)).code(it))}function p(me){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${me.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function g(me,de){me.if(u.default.valCxt,()=>{me.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),me.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),me.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),me.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),de.dynamicRef&&me.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{me.var(u.default.instancePath,(0,a._)`""`),me.var(u.default.parentData,(0,a._)`undefined`),me.var(u.default.parentDataProperty,(0,a._)`undefined`),me.var(u.default.rootData,u.default.data),de.dynamicRef&&me.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function y(me){const{schema:de,opts:$e,gen:Pe}=me;h(me,()=>{$e.$comment&&de.$comment&&F(me),L(me),Pe.let(u.default.vErrors,null),Pe.let(u.default.errors,0),$e.unevaluated&&x(me),R(me),H(me)})}function x(me){const{gen:de,validateName:$e}=me;me.evaluated=de.const("evaluated",(0,a._)`${$e}.evaluated`),de.if((0,a._)`${me.evaluated}.dynamicProps`,()=>de.assign((0,a._)`${me.evaluated}.props`,(0,a._)`undefined`)),de.if((0,a._)`${me.evaluated}.dynamicItems`,()=>de.assign((0,a._)`${me.evaluated}.items`,(0,a._)`undefined`))}function b(me,de){const $e=typeof me=="object"&&me[de.schemaId];return $e&&(de.code.source||de.code.process)?(0,a._)`/*# sourceURL=${$e} */`:a.nil}function _(me,de){if(T(me)&&(I(me),E(me))){k(me,de);return}(0,e.boolOrEmptySchema)(me,de)}function E({schema:me,self:de}){if(typeof me=="boolean")return!me;for(const $e in me)if(de.RULES.all[$e])return!0;return!1}function T(me){return typeof me.schema!="boolean"}function k(me,de){const{schema:$e,gen:Pe,opts:Ze}=me;Ze.$comment&&$e.$comment&&F(me),M(me),z(me);const it=Pe.const("_errs",u.default.errors);R(me,it),Pe.var(de,(0,a._)`${it} === ${u.default.errors}`)}function I(me){(0,c.checkUnknownRules)(me),D(me)}function R(me,de){if(me.opts.jtd)return J(me,[],!1,de);const $e=(0,t.getSchemaTypes)(me.schema),Pe=(0,t.coerceAndCheckDataType)(me,$e);J(me,$e,!Pe,de)}function D(me){const{schema:de,errSchemaPath:$e,opts:Pe,self:Ze}=me;de.$ref&&Pe.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(de,Ze.RULES)&&Ze.logger.warn(`$ref: keywords ignored in schema at path "${$e}"`)}function L(me){const{schema:de,opts:$e}=me;de.default!==void 0&&$e.useDefaults&&$e.strictSchema&&(0,c.checkStrictMode)(me,"default is ignored in the schema root")}function M(me){const de=me.schema[me.opts.schemaId];de&&(me.baseId=(0,l.resolveUrl)(me.opts.uriResolver,me.baseId,de))}function z(me){if(me.schema.$async&&!me.schemaEnv.$async)throw new Error("async schema in sync schema")}function F({gen:me,schemaEnv:de,schema:$e,errSchemaPath:Pe,opts:Ze}){const it=$e.$comment;if(Ze.$comment===!0)me.code((0,a._)`${u.default.self}.logger.log(${it})`);else if(typeof Ze.$comment=="function"){const Ge=(0,a.str)`${Pe}/$comment`,et=me.scopeValue("root",{ref:de.root});me.code((0,a._)`${u.default.self}.opts.$comment(${it}, ${Ge}, ${et}.schema)`)}}function H(me){const{gen:de,schemaEnv:$e,validateName:Pe,ValidationError:Ze,opts:it}=me;$e.$async?de.if((0,a._)`${u.default.errors} === 0`,()=>de.return(u.default.data),()=>de.throw((0,a._)`new ${Ze}(${u.default.vErrors})`)):(de.assign((0,a._)`${Pe}.errors`,u.default.vErrors),it.unevaluated&&Q(me),de.return((0,a._)`${u.default.errors} === 0`))}function Q({gen:me,evaluated:de,props:$e,items:Pe}){$e instanceof a.Name&&me.assign((0,a._)`${de}.props`,$e),Pe instanceof a.Name&&me.assign((0,a._)`${de}.items`,Pe)}function J(me,de,$e,Pe){const{gen:Ze,schema:it,data:Ge,allErrors:et,opts:ut,self:Tt}=me,{RULES:xt}=Tt;if(it.$ref&&(ut.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(it,xt))){Ze.block(()=>Ee(me,"$ref",xt.all.$ref.definition));return}ut.jtd||Z(me,de),Ze.block(()=>{for(const Ue of xt.rules)Dt(Ue);Dt(xt.post)});function Dt(Ue){(0,n.shouldUseGroup)(it,Ue)&&(Ue.type?(Ze.if((0,r.checkDataType)(Ue.type,Ge,ut.strictNumbers)),ne(me,Ue),de.length===1&&de[0]===Ue.type&&$e&&(Ze.else(),(0,r.reportTypeError)(me)),Ze.endIf()):ne(me,Ue),et||Ze.if((0,a._)`${u.default.errors} === ${Pe||0}`))}}function ne(me,de){const{gen:$e,schema:Pe,opts:{useDefaults:Ze}}=me;Ze&&(0,i.assignDefaults)(me,de.type),$e.block(()=>{for(const it of de.rules)(0,n.shouldUseRule)(Pe,it)&&Ee(me,it.keyword,it.definition,de.type)})}function Z(me,de){me.schemaEnv.meta||!me.opts.strictTypes||(ie(me,de),me.opts.allowUnionTypes||q(me,de),U(me,me.dataTypes))}function ie(me,de){if(de.length){if(!me.dataTypes.length){me.dataTypes=de;return}de.forEach($e=>{V(me.dataTypes,$e)||ee(me,`type "${$e}" not allowed by context "${me.dataTypes.join(",")}"`)}),K(me,de)}}function q(me,de){de.length>1&&!(de.length===2&&de.includes("null"))&&ee(me,"use allowUnionTypes to allow union type keyword")}function U(me,de){const $e=me.self.RULES.all;for(const Pe in $e){const Ze=$e[Pe];if(typeof Ze=="object"&&(0,n.shouldUseRule)(me.schema,Ze)){const{type:it}=Ze.definition;it.length&&!it.some(Ge=>X(de,Ge))&&ee(me,`missing type "${it.join(",")}" for keyword "${Pe}"`)}}}function X(me,de){return me.includes(de)||de==="number"&&me.includes("integer")}function V(me,de){return me.includes(de)||de==="integer"&&me.includes("number")}function K(me,de){const $e=[];for(const Pe of me.dataTypes)V(de,Pe)?$e.push(Pe):de.includes("integer")&&Pe==="number"&&$e.push("integer");me.dataTypes=$e}function ee(me,de){const $e=me.schemaEnv.baseId+me.errSchemaPath;de+=` at "${$e}" (strictTypes)`,(0,c.checkStrictMode)(me,de,me.opts.strictTypes)}class fe{constructor(de,$e,Pe){if((0,s.validateKeywordUsage)(de,$e,Pe),this.gen=de.gen,this.allErrors=de.allErrors,this.keyword=Pe,this.data=de.data,this.schema=de.schema[Pe],this.$data=$e.$data&&de.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(de,this.schema,Pe,this.$data),this.schemaType=$e.schemaType,this.parentSchema=de.schema,this.params={},this.it=de,this.def=$e,this.$data)this.schemaCode=de.gen.const("vSchema",De(this.$data,de));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,$e.schemaType,$e.allowUndefined))throw new Error(`${Pe} value must be ${JSON.stringify($e.schemaType)}`);("code"in $e?$e.trackErrors:$e.errors!==!1)&&(this.errsCount=de.gen.const("_errs",u.default.errors))}result(de,$e,Pe){this.failResult((0,a.not)(de),$e,Pe)}failResult(de,$e,Pe){this.gen.if(de),Pe?Pe():this.error(),$e?(this.gen.else(),$e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(de,$e){this.failResult((0,a.not)(de),void 0,$e)}fail(de){if(de===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(de),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(de){if(!this.$data)return this.fail(de);const{schemaCode:$e}=this;this.fail((0,a._)`${$e} !== undefined && (${(0,a.or)(this.invalid$data(),de)})`)}error(de,$e,Pe){if($e){this.setParams($e),this._error(de,Pe),this.setParams({});return}this._error(de,Pe)}_error(de,$e){(de?f.reportExtraError:f.reportError)(this,this.def.error,$e)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(de){this.allErrors||this.gen.if(de)}setParams(de,$e){$e?Object.assign(this.params,de):this.params=de}block$data(de,$e,Pe=a.nil){this.gen.block(()=>{this.check$data(de,Pe),$e()})}check$data(de=a.nil,$e=a.nil){if(!this.$data)return;const{gen:Pe,schemaCode:Ze,schemaType:it,def:Ge}=this;Pe.if((0,a.or)((0,a._)`${Ze} === undefined`,$e)),de!==a.nil&&Pe.assign(de,!0),(it.length||Ge.validateSchema)&&(Pe.elseIf(this.invalid$data()),this.$dataError(),de!==a.nil&&Pe.assign(de,!1)),Pe.else()}invalid$data(){const{gen:de,schemaCode:$e,schemaType:Pe,def:Ze,it}=this;return(0,a.or)(Ge(),et());function Ge(){if(Pe.length){if(!($e instanceof a.Name))throw new Error("ajv implementation error");const ut=Array.isArray(Pe)?Pe:[Pe];return(0,a._)`${(0,r.checkDataTypes)(ut,$e,it.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function et(){if(Ze.validateSchema){const ut=de.scopeValue("validate$data",{ref:Ze.validateSchema});return(0,a._)`!${ut}(${$e})`}return a.nil}}subschema(de,$e){const Pe=(0,o.getSubschema)(this.it,de);(0,o.extendSubschemaData)(Pe,this.it,de),(0,o.extendSubschemaMode)(Pe,de);const Ze={...this.it,...Pe,items:void 0,props:void 0};return _(Ze,$e),Ze}mergeEvaluated(de,$e){const{it:Pe,gen:Ze}=this;Pe.opts.unevaluated&&(Pe.props!==!0&&de.props!==void 0&&(Pe.props=c.mergeEvaluated.props(Ze,de.props,Pe.props,$e)),Pe.items!==!0&&de.items!==void 0&&(Pe.items=c.mergeEvaluated.items(Ze,de.items,Pe.items,$e)))}mergeValidEvaluated(de,$e){const{it:Pe,gen:Ze}=this;if(Pe.opts.unevaluated&&(Pe.props!==!0||Pe.items!==!0))return Ze.if($e,()=>this.mergeEvaluated(de,a.Name)),!0}}jm.KeywordCxt=fe;function Ee(me,de,$e,Pe){const Ze=new fe(me,$e,de);"code"in $e?$e.code(Ze,Pe):Ze.$data&&$e.validate?(0,s.funcKeywordCode)(Ze,$e):"macro"in $e?(0,s.macroKeywordCode)(Ze,$e):($e.compile||$e.validate)&&(0,s.funcKeywordCode)(Ze,$e)}const ye=/^\/(?:[^~]|~0|~1)*$/,_e=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function De(me,{dataLevel:de,dataNames:$e,dataPathArr:Pe}){let Ze,it;if(me==="")return u.default.rootData;if(me[0]==="/"){if(!ye.test(me))throw new Error(`Invalid JSON-pointer: ${me}`);Ze=me,it=u.default.rootData}else{const Tt=_e.exec(me);if(!Tt)throw new Error(`Invalid JSON-pointer: ${me}`);const xt=+Tt[1];if(Ze=Tt[2],Ze==="#"){if(xt>=de)throw new Error(ut("property/index",xt));return Pe[de-xt]}if(xt>de)throw new Error(ut("data",xt));if(it=$e[de-xt],!Ze)return it}let Ge=it;const et=Ze.split("/");for(const Tt of et)Tt&&(it=(0,a._)`${it}${(0,a.getProperty)((0,c.unescapeJsonPointer)(Tt))}`,Ge=(0,a._)`${Ge} && ${it}`);return Ge;function ut(Tt,xt){return`Cannot access ${Tt} ${xt} levels up, current level is ${de}`}}return jm.getData=De,jm}var lN={},ede;function dZ(){if(ede)return lN;ede=1,Object.defineProperty(lN,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return lN.default=e,lN}var cN={},tde;function G5(){if(tde)return cN;tde=1,Object.defineProperty(cN,"__esModule",{value:!0});const e=q5();class t extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return cN.default=t,cN}var pc={},nde;function hZ(){if(nde)return pc;nde=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.resolveSchema=pc.getCompilingSchema=pc.resolveRef=pc.compileSchema=pc.SchemaEnv=void 0;const e=fr(),t=dZ(),n=$1(),r=q5(),i=Wr(),s=W5();class o{constructor(x){var b;this.refs={},this.dynamicAnchors={};let _;typeof x.schema=="object"&&(_=x.schema),this.schema=x.schema,this.schemaId=x.schemaId,this.root=x.root||this,this.baseId=(b=x.baseId)!==null&&b!==void 0?b:(0,r.normalizeId)(_==null?void 0:_[x.schemaId||"$id"]),this.schemaPath=x.schemaPath,this.localRefs=x.localRefs,this.meta=x.meta,this.$async=_==null?void 0:_.$async,this.refs={}}}pc.SchemaEnv=o;function a(y){const x=c.call(this,y);if(x)return x;const b=(0,r.getFullPath)(this.opts.uriResolver,y.root.baseId),{es5:_,lines:E}=this.opts.code,{ownProperties:T}=this.opts,k=new e.CodeGen(this.scope,{es5:_,lines:E,ownProperties:T});let I;y.$async&&(I=k.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const R=k.scopeName("validate");y.validateName=R;const D={gen:k,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:k.scopeValue("schema",this.opts.code.source===!0?{ref:y.schema,code:(0,e.stringify)(y.schema)}:{ref:y.schema}),validateName:R,ValidationError:I,schema:y.schema,schemaEnv:y,rootId:b,baseId:y.baseId||b,schemaPath:e.nil,errSchemaPath:y.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let L;try{this._compilations.add(y),(0,s.validateFunctionCode)(D),k.optimize(this.opts.code.optimize);const M=k.toString();L=`${k.scopeRefs(n.default.scope)}return ${M}`,this.opts.code.process&&(L=this.opts.code.process(L,y));const F=new Function(`${n.default.self}`,`${n.default.scope}`,L)(this,this.scope.get());if(this.scope.value(R,{ref:F}),F.errors=null,F.schema=y.schema,F.schemaEnv=y,y.$async&&(F.$async=!0),this.opts.code.source===!0&&(F.source={validateName:R,validateCode:M,scopeValues:k._values}),this.opts.unevaluated){const{props:H,items:Q}=D;F.evaluated={props:H instanceof e.Name?void 0:H,items:Q instanceof e.Name?void 0:Q,dynamicProps:H instanceof e.Name,dynamicItems:Q instanceof e.Name},F.source&&(F.source.evaluated=(0,e.stringify)(F.evaluated))}return y.validate=F,y}catch(M){throw delete y.validate,delete y.validateName,L&&this.logger.error("Error compiling schema, function code:",L),M}finally{this._compilations.delete(y)}}pc.compileSchema=a;function u(y,x,b){var _;b=(0,r.resolveUrl)(this.opts.uriResolver,x,b);const E=y.refs[b];if(E)return E;let T=d.call(this,y,b);if(T===void 0){const k=(_=y.localRefs)===null||_===void 0?void 0:_[b],{schemaId:I}=this.opts;k&&(T=new o({schema:k,schemaId:I,root:y,baseId:x}))}if(T!==void 0)return y.refs[b]=l.call(this,T)}pc.resolveRef=u;function l(y){return(0,r.inlineRef)(y.schema,this.opts.inlineRefs)?y.schema:y.validate?y:a.call(this,y)}function c(y){for(const x of this._compilations)if(f(x,y))return x}pc.getCompilingSchema=c;function f(y,x){return y.schema===x.schema&&y.root===x.root&&y.baseId===x.baseId}function d(y,x){let b;for(;typeof(b=this.refs[x])=="string";)x=b;return b||this.schemas[x]||h.call(this,y,x)}function h(y,x){const b=this.opts.uriResolver.parse(x),_=(0,r._getFullPath)(this.opts.uriResolver,b);let E=(0,r.getFullPath)(this.opts.uriResolver,y.baseId,void 0);if(Object.keys(y.schema).length>0&&_===E)return g.call(this,b,y);const T=(0,r.normalizeId)(_),k=this.refs[T]||this.schemas[T];if(typeof k=="string"){const I=h.call(this,y,k);return typeof(I==null?void 0:I.schema)!="object"?void 0:g.call(this,b,I)}if(typeof(k==null?void 0:k.schema)=="object"){if(k.validate||a.call(this,k),T===(0,r.normalizeId)(x)){const{schema:I}=k,{schemaId:R}=this.opts,D=I[R];return D&&(E=(0,r.resolveUrl)(this.opts.uriResolver,E,D)),new o({schema:I,schemaId:R,root:y,baseId:E})}return g.call(this,b,k)}}pc.resolveSchema=h;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function g(y,{baseId:x,schema:b,root:_}){var E;if(((E=y.fragment)===null||E===void 0?void 0:E[0])!=="/")return;for(const I of y.fragment.slice(1).split("/")){if(typeof b=="boolean")return;const R=b[(0,i.unescapeFragment)(I)];if(R===void 0)return;b=R;const D=typeof b=="object"&&b[this.opts.schemaId];!p.has(I)&&D&&(x=(0,r.resolveUrl)(this.opts.uriResolver,x,D))}let T;if(typeof b!="boolean"&&b.$ref&&!(0,i.schemaHasRulesButRef)(b,this.RULES)){const I=(0,r.resolveUrl)(this.opts.uriResolver,x,b.$ref);T=h.call(this,_,I)}const{schemaId:k}=this.opts;if(T=T||new o({schema:b,schemaId:k,root:_,baseId:x}),T.schema!==T.root.schema)return T}return pc}const b8t="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",x8t="Meta-schema for $data reference (JSON AnySchema extension proposal)",w8t="object",_8t=["$data"],E8t={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},T8t=!1,S8t={$id:b8t,description:x8t,type:w8t,required:_8t,properties:E8t,additionalProperties:T8t};var fN={},EC={exports:{}},lj,rde;function C8t(){return rde||(rde=1,lj={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),lj}var cj,ide;function A8t(){if(ide)return cj;ide=1;const{HEX:e}=C8t(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(g){if(a(g,".")<3)return{host:g,isIPV4:!1};const y=g.match(t)||[],[x]=y;return x?{host:o(x,"."),isIPV4:!0}:{host:g,isIPV4:!1}}function r(g,y=!1){let x="",b=!0;for(const _ of g){if(e[_]===void 0)return;_!=="0"&&b===!0&&(b=!1),b||(x+=_)}return y&&x.length===0&&(x="0"),x}function i(g){let y=0;const x={error:!1,address:"",zone:""},b=[],_=[];let E=!1,T=!1,k=!1;function I(){if(_.length){if(E===!1){const R=r(_);if(R!==void 0)b.push(R);else return x.error=!0,!1}_.length=0}return!0}for(let R=0;R<g.length;R++){const D=g[R];if(!(D==="["||D==="]"))if(D===":"){if(T===!0&&(k=!0),!I())break;if(y++,b.push(":"),y>7){x.error=!0;break}R-1>=0&&g[R-1]===":"&&(T=!0);continue}else if(D==="%"){if(!I())break;E=!0}else{_.push(D);continue}}return _.length&&(E?x.zone=_.join(""):k?b.push(_.join("")):b.push(r(_))),x.address=b.join(""),x}function s(g){if(a(g,":")<2)return{host:g,isIPV6:!1};const y=i(g);if(y.error)return{host:g,isIPV6:!1};{let x=y.address,b=y.address;return y.zone&&(x+="%"+y.zone,b+="%25"+y.zone),{host:x,escapedHost:b,isIPV6:!0}}}function o(g,y){let x="",b=!0;const _=g.length;for(let E=0;E<_;E++){const T=g[E];T==="0"&&b?(E+1<=_&&g[E+1]===y||E+1===_)&&(x+=T,b=!1):(T===y?b=!0:b=!1,x+=T)}return x}function a(g,y){let x=0;for(let b=0;b<g.length;b++)g[b]===y&&x++;return x}const u=/^\.\.?\//u,l=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,f=/^\/?(?:.|\n)*?(?=\/|$)/u;function d(g){const y=[];for(;g.length;)if(g.match(u))g=g.replace(u,"");else if(g.match(l))g=g.replace(l,"/");else if(g.match(c))g=g.replace(c,"/"),y.pop();else if(g==="."||g==="..")g="";else{const x=g.match(f);if(x){const b=x[0];g=g.slice(b.length),y.push(b)}else throw new Error("Unexpected dot segment condition")}return y.join("")}function h(g,y){const x=y!==!0?escape:unescape;return g.scheme!==void 0&&(g.scheme=x(g.scheme)),g.userinfo!==void 0&&(g.userinfo=x(g.userinfo)),g.host!==void 0&&(g.host=x(g.host)),g.path!==void 0&&(g.path=x(g.path)),g.query!==void 0&&(g.query=x(g.query)),g.fragment!==void 0&&(g.fragment=x(g.fragment)),g}function p(g){const y=[];if(g.userinfo!==void 0&&(y.push(g.userinfo),y.push("@")),g.host!==void 0){let x=unescape(g.host);const b=n(x);if(b.isIPV4)x=b.host;else{const _=s(b.host);_.isIPV6===!0?x=`[${_.escapedHost}]`:x=g.host}y.push(x)}return(typeof g.port=="number"||typeof g.port=="string")&&(y.push(":"),y.push(String(g.port))),y.length?y.join(""):void 0}return cj={recomposeAuthority:p,normalizeComponentEncoding:h,removeDotSegments:d,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},cj}var fj,sde;function k8t(){if(sde)return fj;sde=1;const e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(b){return typeof b.secure=="boolean"?b.secure:String(b.scheme).toLowerCase()==="wss"}function r(b){return b.host||(b.error=b.error||"HTTP URIs must have a host."),b}function i(b){const _=String(b.scheme).toLowerCase()==="https";return(b.port===(_?443:80)||b.port==="")&&(b.port=void 0),b.path||(b.path="/"),b}function s(b){return b.secure=n(b),b.resourceName=(b.path||"/")+(b.query?"?"+b.query:""),b.path=void 0,b.query=void 0,b}function o(b){if((b.port===(n(b)?443:80)||b.port==="")&&(b.port=void 0),typeof b.secure=="boolean"&&(b.scheme=b.secure?"wss":"ws",b.secure=void 0),b.resourceName){const[_,E]=b.resourceName.split("?");b.path=_&&_!=="/"?_:void 0,b.query=E,b.resourceName=void 0}return b.fragment=void 0,b}function a(b,_){if(!b.path)return b.error="URN can not be parsed",b;const E=b.path.match(t);if(E){const T=_.scheme||b.scheme||"urn";b.nid=E[1].toLowerCase(),b.nss=E[2];const k=`${T}:${_.nid||b.nid}`,I=x[k];b.path=void 0,I&&(b=I.parse(b,_))}else b.error=b.error||"URN can not be parsed.";return b}function u(b,_){const E=_.scheme||b.scheme||"urn",T=b.nid.toLowerCase(),k=`${E}:${_.nid||T}`,I=x[k];I&&(b=I.serialize(b,_));const R=b,D=b.nss;return R.path=`${T||_.nid}:${D}`,_.skipEscape=!0,R}function l(b,_){const E=b;return E.uuid=E.nss,E.nss=void 0,!_.tolerant&&(!E.uuid||!e.test(E.uuid))&&(E.error=E.error||"UUID is not valid."),E}function c(b){const _=b;return _.nss=(b.uuid||"").toLowerCase(),_}const f={scheme:"http",domainHost:!0,parse:r,serialize:i},d={scheme:"https",domainHost:f.domainHost,parse:r,serialize:i},h={scheme:"ws",domainHost:!0,parse:s,serialize:o},p={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},x={http:f,https:d,ws:h,wss:p,urn:{scheme:"urn",parse:a,serialize:u,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:l,serialize:c,skipNormalize:!0}};return fj=x,fj}var ode;function I8t(){if(ode)return EC.exports;ode=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:i}=A8t(),s=k8t();function o(y,x){return typeof y=="string"?y=c(p(y,x),x):typeof y=="object"&&(y=p(c(y,x),x)),y}function a(y,x,b){const _=Object.assign({scheme:"null"},b),E=u(p(y,_),p(x,_),_,!0);return c(E,{..._,skipEscape:!0})}function u(y,x,b,_){const E={};return _||(y=p(c(y,b),b),x=p(c(x,b),b)),b=b||{},!b.tolerant&&x.scheme?(E.scheme=x.scheme,E.userinfo=x.userinfo,E.host=x.host,E.port=x.port,E.path=n(x.path||""),E.query=x.query):(x.userinfo!==void 0||x.host!==void 0||x.port!==void 0?(E.userinfo=x.userinfo,E.host=x.host,E.port=x.port,E.path=n(x.path||""),E.query=x.query):(x.path?(x.path.charAt(0)==="/"?E.path=n(x.path):((y.userinfo!==void 0||y.host!==void 0||y.port!==void 0)&&!y.path?E.path="/"+x.path:y.path?E.path=y.path.slice(0,y.path.lastIndexOf("/")+1)+x.path:E.path=x.path,E.path=n(E.path)),E.query=x.query):(E.path=y.path,x.query!==void 0?E.query=x.query:E.query=y.query),E.userinfo=y.userinfo,E.host=y.host,E.port=y.port),E.scheme=y.scheme),E.fragment=x.fragment,E}function l(y,x,b){return typeof y=="string"?(y=unescape(y),y=c(i(p(y,b),!0),{...b,skipEscape:!0})):typeof y=="object"&&(y=c(i(y,!0),{...b,skipEscape:!0})),typeof x=="string"?(x=unescape(x),x=c(i(p(x,b),!0),{...b,skipEscape:!0})):typeof x=="object"&&(x=c(i(x,!0),{...b,skipEscape:!0})),y.toLowerCase()===x.toLowerCase()}function c(y,x){const b={host:y.host,scheme:y.scheme,userinfo:y.userinfo,port:y.port,path:y.path,query:y.query,nid:y.nid,nss:y.nss,uuid:y.uuid,fragment:y.fragment,reference:y.reference,resourceName:y.resourceName,secure:y.secure,error:""},_=Object.assign({},x),E=[],T=s[(_.scheme||b.scheme||"").toLowerCase()];T&&T.serialize&&T.serialize(b,_),b.path!==void 0&&(_.skipEscape?b.path=unescape(b.path):(b.path=escape(b.path),b.scheme!==void 0&&(b.path=b.path.split("%3A").join(":")))),_.reference!=="suffix"&&b.scheme&&E.push(b.scheme,":");const k=r(b);if(k!==void 0&&(_.reference!=="suffix"&&E.push("//"),E.push(k),b.path&&b.path.charAt(0)!=="/"&&E.push("/")),b.path!==void 0){let I=b.path;!_.absolutePath&&(!T||!T.absolutePath)&&(I=n(I)),k===void 0&&(I=I.replace(/^\/\//u,"/%2F")),E.push(I)}return b.query!==void 0&&E.push("?",b.query),b.fragment!==void 0&&E.push("#",b.fragment),E.join("")}const f=Array.from({length:127},(y,x)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(x)));function d(y){let x=0;for(let b=0,_=y.length;b<_;++b)if(x=y.charCodeAt(b),x>126||f[x])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p(y,x){const b=Object.assign({},x),_={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},E=y.indexOf("%")!==-1;let T=!1;b.reference==="suffix"&&(y=(b.scheme?b.scheme+":":"")+"//"+y);const k=y.match(h);if(k){if(_.scheme=k[1],_.userinfo=k[3],_.host=k[4],_.port=parseInt(k[5],10),_.path=k[6]||"",_.query=k[7],_.fragment=k[8],isNaN(_.port)&&(_.port=k[5]),_.host){const R=t(_.host);if(R.isIPV4===!1){const D=e(R.host);_.host=D.host.toLowerCase(),T=D.isIPV6}else _.host=R.host,T=!0}_.scheme===void 0&&_.userinfo===void 0&&_.host===void 0&&_.port===void 0&&!_.path&&_.query===void 0?_.reference="same-document":_.scheme===void 0?_.reference="relative":_.fragment===void 0?_.reference="absolute":_.reference="uri",b.reference&&b.reference!=="suffix"&&b.reference!==_.reference&&(_.error=_.error||"URI is not a "+b.reference+" reference.");const I=s[(b.scheme||_.scheme||"").toLowerCase()];if(!b.unicodeSupport&&(!I||!I.unicodeSupport)&&_.host&&(b.domainHost||I&&I.domainHost)&&T===!1&&d(_.host))try{_.host=URL.domainToASCII(_.host.toLowerCase())}catch(R){_.error=_.error||"Host's domain name can not be converted to ASCII: "+R}(!I||I&&!I.skipNormalize)&&(E&&_.scheme!==void 0&&(_.scheme=unescape(_.scheme)),E&&_.host!==void 0&&(_.host=unescape(_.host)),_.path&&_.path.length&&(_.path=escape(unescape(_.path))),_.fragment&&_.fragment.length&&(_.fragment=encodeURI(decodeURIComponent(_.fragment)))),I&&I.parse&&I.parse(_,b)}else _.error=_.error||"URI can not be parsed.";return _}const g={SCHEMES:s,normalize:o,resolve:a,resolveComponents:u,equal:l,serialize:c,parse:p};return EC.exports=g,EC.exports.default=g,EC.exports.fastUri=g,EC.exports}var ade;function R8t(){if(ade)return fN;ade=1,Object.defineProperty(fN,"__esModule",{value:!0});const e=I8t();return e.code='require("ajv/dist/runtime/uri").default',fN.default=e,fN}var ude;function P8t(){return ude||(ude=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=W5();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=fr();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=dZ(),i=G5(),s=hPe(),o=hZ(),a=fr(),u=q5(),l=u$(),c=Wr(),f=S8t,d=R8t(),h=(q,U)=>new RegExp(q,U);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],g=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},x={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function _(q){var U,X,V,K,ee,fe,Ee,ye,_e,De,me,de,$e,Pe,Ze,it,Ge,et,ut,Tt,xt,Dt,Ue,Ft,tn;const Re=q.strict,Ve=(U=q.code)===null||U===void 0?void 0:U.optimize,yt=Ve===!0||Ve===void 0?1:Ve||0,$t=(V=(X=q.code)===null||X===void 0?void 0:X.regExp)!==null&&V!==void 0?V:h,Bt=(K=q.uriResolver)!==null&&K!==void 0?K:d.default;return{strictSchema:(fe=(ee=q.strictSchema)!==null&&ee!==void 0?ee:Re)!==null&&fe!==void 0?fe:!0,strictNumbers:(ye=(Ee=q.strictNumbers)!==null&&Ee!==void 0?Ee:Re)!==null&&ye!==void 0?ye:!0,strictTypes:(De=(_e=q.strictTypes)!==null&&_e!==void 0?_e:Re)!==null&&De!==void 0?De:"log",strictTuples:(de=(me=q.strictTuples)!==null&&me!==void 0?me:Re)!==null&&de!==void 0?de:"log",strictRequired:(Pe=($e=q.strictRequired)!==null&&$e!==void 0?$e:Re)!==null&&Pe!==void 0?Pe:!1,code:q.code?{...q.code,optimize:yt,regExp:$t}:{optimize:yt,regExp:$t},loopRequired:(Ze=q.loopRequired)!==null&&Ze!==void 0?Ze:b,loopEnum:(it=q.loopEnum)!==null&&it!==void 0?it:b,meta:(Ge=q.meta)!==null&&Ge!==void 0?Ge:!0,messages:(et=q.messages)!==null&&et!==void 0?et:!0,inlineRefs:(ut=q.inlineRefs)!==null&&ut!==void 0?ut:!0,schemaId:(Tt=q.schemaId)!==null&&Tt!==void 0?Tt:"$id",addUsedSchema:(xt=q.addUsedSchema)!==null&&xt!==void 0?xt:!0,validateSchema:(Dt=q.validateSchema)!==null&&Dt!==void 0?Dt:!0,validateFormats:(Ue=q.validateFormats)!==null&&Ue!==void 0?Ue:!0,unicodeRegExp:(Ft=q.unicodeRegExp)!==null&&Ft!==void 0?Ft:!0,int32range:(tn=q.int32range)!==null&&tn!==void 0?tn:!0,uriResolver:Bt}}class E{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,..._(U)};const{es5:X,lines:V}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:g,es5:X,lines:V}),this.logger=z(U.logger);const K=U.validateFormats;U.validateFormats=!1,this.RULES=(0,s.getRules)(),T.call(this,y,U,"NOT SUPPORTED"),T.call(this,x,U,"DEPRECATED","warn"),this._metaOpts=L.call(this),U.formats&&R.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&D.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),I.call(this),U.validateFormats=K}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:X,schemaId:V}=this.opts;let K=f;V==="id"&&(K={...f},K.id=K.$id,delete K.$id),X&&U&&this.addMetaSchema(K,K[V],!1)}defaultMeta(){const{meta:U,schemaId:X}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[X]||U:void 0}validate(U,X){let V;if(typeof U=="string"){if(V=this.getSchema(U),!V)throw new Error(`no schema with key or ref "${U}"`)}else V=this.compile(U);const K=V(X);return"$async"in V||(this.errors=V.errors),K}compile(U,X){const V=this._addSchema(U,X);return V.validate||this._compileSchemaEnv(V)}compileAsync(U,X){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:V}=this.opts;return K.call(this,U,X);async function K(De,me){await ee.call(this,De.$schema);const de=this._addSchema(De,me);return de.validate||fe.call(this,de)}async function ee(De){De&&!this.getSchema(De)&&await K.call(this,{$ref:De},!0)}async function fe(De){try{return this._compileSchemaEnv(De)}catch(me){if(!(me instanceof i.default))throw me;return Ee.call(this,me),await ye.call(this,me.missingSchema),fe.call(this,De)}}function Ee({missingSchema:De,missingRef:me}){if(this.refs[De])throw new Error(`AnySchema ${De} is loaded but ${me} cannot be resolved`)}async function ye(De){const me=await _e.call(this,De);this.refs[De]||await ee.call(this,me.$schema),this.refs[De]||this.addSchema(me,De,X)}async function _e(De){const me=this._loading[De];if(me)return me;try{return await(this._loading[De]=V(De))}finally{delete this._loading[De]}}}addSchema(U,X,V,K=this.opts.validateSchema){if(Array.isArray(U)){for(const fe of U)this.addSchema(fe,void 0,V,K);return this}let ee;if(typeof U=="object"){const{schemaId:fe}=this.opts;if(ee=U[fe],ee!==void 0&&typeof ee!="string")throw new Error(`schema ${fe} must be string`)}return X=(0,u.normalizeId)(X||ee),this._checkUnique(X),this.schemas[X]=this._addSchema(U,V,X,K,!0),this}addMetaSchema(U,X,V=this.opts.validateSchema){return this.addSchema(U,X,!0,V),this}validateSchema(U,X){if(typeof U=="boolean")return!0;let V;if(V=U.$schema,V!==void 0&&typeof V!="string")throw new Error("$schema must be a string");if(V=V||this.opts.defaultMeta||this.defaultMeta(),!V)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const K=this.validate(V,U);if(!K&&X){const ee="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(ee);else throw new Error(ee)}return K}getSchema(U){let X;for(;typeof(X=k.call(this,U))=="string";)U=X;if(X===void 0){const{schemaId:V}=this.opts,K=new o.SchemaEnv({schema:{},schemaId:V});if(X=o.resolveSchema.call(this,K,U),!X)return;this.refs[U]=X}return X.validate||this._compileSchemaEnv(X)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const X=k.call(this,U);return typeof X=="object"&&this._cache.delete(X.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const X=U;this._cache.delete(X);let V=U[this.opts.schemaId];return V&&(V=(0,u.normalizeId)(V),delete this.schemas[V],delete this.refs[V]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const X of U)this.addKeyword(X);return this}addKeyword(U,X){let V;if(typeof U=="string")V=U,typeof X=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),X.keyword=V);else if(typeof U=="object"&&X===void 0){if(X=U,V=X.keyword,Array.isArray(V)&&!V.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(H.call(this,V,X),!X)return(0,c.eachItem)(V,ee=>Q.call(this,ee)),this;ne.call(this,X);const K={...X,type:(0,l.getJSONTypes)(X.type),schemaType:(0,l.getJSONTypes)(X.schemaType)};return(0,c.eachItem)(V,K.type.length===0?ee=>Q.call(this,ee,K):ee=>K.type.forEach(fe=>Q.call(this,ee,K,fe))),this}getKeyword(U){const X=this.RULES.all[U];return typeof X=="object"?X.definition:!!X}removeKeyword(U){const{RULES:X}=this;delete X.keywords[U],delete X.all[U];for(const V of X.rules){const K=V.rules.findIndex(ee=>ee.keyword===U);K>=0&&V.rules.splice(K,1)}return this}addFormat(U,X){return typeof X=="string"&&(X=new RegExp(X)),this.formats[U]=X,this}errorsText(U=this.errors,{separator:X=", ",dataVar:V="data"}={}){return!U||U.length===0?"No errors":U.map(K=>`${V}${K.instancePath} ${K.message}`).reduce((K,ee)=>K+X+ee)}$dataMetaSchema(U,X){const V=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const K of X){const ee=K.split("/").slice(1);let fe=U;for(const Ee of ee)fe=fe[Ee];for(const Ee in V){const ye=V[Ee];if(typeof ye!="object")continue;const{$data:_e}=ye.definition,De=fe[Ee];_e&&De&&(fe[Ee]=ie(De))}}return U}_removeAllSchemas(U,X){for(const V in U){const K=U[V];(!X||X.test(V))&&(typeof K=="string"?delete U[V]:K&&!K.meta&&(this._cache.delete(K.schema),delete U[V]))}}_addSchema(U,X,V,K=this.opts.validateSchema,ee=this.opts.addUsedSchema){let fe;const{schemaId:Ee}=this.opts;if(typeof U=="object")fe=U[Ee];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let ye=this._cache.get(U);if(ye!==void 0)return ye;V=(0,u.normalizeId)(fe||V);const _e=u.getSchemaRefs.call(this,U,V);return ye=new o.SchemaEnv({schema:U,schemaId:Ee,meta:X,baseId:V,localRefs:_e}),this._cache.set(ye.schema,ye),ee&&!V.startsWith("#")&&(V&&this._checkUnique(V),this.refs[V]=ye),K&&this.validateSchema(U,!0),ye}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):o.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const X=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,U)}finally{this.opts=X}}}E.ValidationError=r.default,E.MissingRefError=i.default,e.default=E;function T(q,U,X,V="error"){for(const K in q){const ee=K;ee in U&&this.logger[V](`${X}: option ${K}. ${q[ee]}`)}}function k(q){return q=(0,u.normalizeId)(q),this.schemas[q]||this.refs[q]}function I(){const q=this.opts.schemas;if(q)if(Array.isArray(q))this.addSchema(q);else for(const U in q)this.addSchema(q[U],U)}function R(){for(const q in this.opts.formats){const U=this.opts.formats[q];U&&this.addFormat(q,U)}}function D(q){if(Array.isArray(q)){this.addVocabulary(q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in q){const X=q[U];X.keyword||(X.keyword=U),this.addKeyword(X)}}function L(){const q={...this.opts};for(const U of p)delete q[U];return q}const M={log(){},warn(){},error(){}};function z(q){if(q===!1)return M;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}const F=/^[a-z_$][a-z0-9_$:-]*$/i;function H(q,U){const{RULES:X}=this;if((0,c.eachItem)(q,V=>{if(X.keywords[V])throw new Error(`Keyword ${V} is already defined`);if(!F.test(V))throw new Error(`Keyword ${V} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function Q(q,U,X){var V;const K=U==null?void 0:U.post;if(X&&K)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:ee}=this;let fe=K?ee.post:ee.rules.find(({type:ye})=>ye===X);if(fe||(fe={type:X,rules:[]},ee.rules.push(fe)),ee.keywords[q]=!0,!U)return;const Ee={keyword:q,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?J.call(this,fe,Ee,U.before):fe.rules.push(Ee),ee.all[q]=Ee,(V=U.implements)===null||V===void 0||V.forEach(ye=>this.addKeyword(ye))}function J(q,U,X){const V=q.rules.findIndex(K=>K.keyword===X);V>=0?q.rules.splice(V,0,U):(q.rules.push(U),this.logger.warn(`rule ${X} is not defined`))}function ne(q){let{metaSchema:U}=q;U!==void 0&&(q.$data&&this.opts.$data&&(U=ie(U)),q.validateSchema=this.compile(U,!0))}const Z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ie(q){return{anyOf:[q,Z]}}}(rj)),rj}var dN={},hN={},pN={},lde;function D8t(){if(lde)return pN;lde=1,Object.defineProperty(pN,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return pN.default=e,pN}var Ug={},cde;function N8t(){if(cde)return Ug;cde=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.callRef=Ug.getValidate=void 0;const e=G5(),t=ph(),n=fr(),r=$1(),i=hZ(),s=Wr(),o={keyword:"$ref",schemaType:"string",code(l){const{gen:c,schema:f,it:d}=l,{baseId:h,schemaEnv:p,validateName:g,opts:y,self:x}=d,{root:b}=p;if((f==="#"||f==="#/")&&h===b.baseId)return E();const _=i.resolveRef.call(x,b,h,f);if(_===void 0)throw new e.default(d.opts.uriResolver,h,f);if(_ instanceof i.SchemaEnv)return T(_);return k(_);function E(){if(p===b)return u(l,g,p,p.$async);const I=c.scopeValue("root",{ref:b});return u(l,(0,n._)`${I}.validate`,b,b.$async)}function T(I){const R=a(l,I);u(l,R,I,I.$async)}function k(I){const R=c.scopeValue("schema",y.code.source===!0?{ref:I,code:(0,n.stringify)(I)}:{ref:I}),D=c.name("valid"),L=l.subschema({schema:I,dataTypes:[],schemaPath:n.nil,topSchemaRef:R,errSchemaPath:f},D);l.mergeEvaluated(L),l.ok(D)}}};function a(l,c){const{gen:f}=l;return c.validate?f.scopeValue("validate",{ref:c.validate}):(0,n._)`${f.scopeValue("wrapper",{ref:c})}.validate`}Ug.getValidate=a;function u(l,c,f,d){const{gen:h,it:p}=l,{allErrors:g,schemaEnv:y,opts:x}=p,b=x.passContext?r.default.this:n.nil;d?_():E();function _(){if(!y.$async)throw new Error("async schema referenced by sync schema");const I=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(l,c,b)}`),k(c),g||h.assign(I,!0)},R=>{h.if((0,n._)`!(${R} instanceof ${p.ValidationError})`,()=>h.throw(R)),T(R),g||h.assign(I,!1)}),l.ok(I)}function E(){l.result((0,t.callValidateCode)(l,c,b),()=>k(c),()=>T(c))}function T(I){const R=(0,n._)`${I}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${R} : ${r.default.vErrors}.concat(${R})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function k(I){var R;if(!p.opts.unevaluated)return;const D=(R=f==null?void 0:f.validate)===null||R===void 0?void 0:R.evaluated;if(p.props!==!0)if(D&&!D.dynamicProps)D.props!==void 0&&(p.props=s.mergeEvaluated.props(h,D.props,p.props));else{const L=h.var("props",(0,n._)`${I}.evaluated.props`);p.props=s.mergeEvaluated.props(h,L,p.props,n.Name)}if(p.items!==!0)if(D&&!D.dynamicItems)D.items!==void 0&&(p.items=s.mergeEvaluated.items(h,D.items,p.items));else{const L=h.var("items",(0,n._)`${I}.evaluated.items`);p.items=s.mergeEvaluated.items(h,L,p.items,n.Name)}}}return Ug.callRef=u,Ug.default=o,Ug}var fde;function O8t(){if(fde)return hN;fde=1,Object.defineProperty(hN,"__esModule",{value:!0});const e=D8t(),t=N8t(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return hN.default=n,hN}var mN={},gN={},dde;function $8t(){if(dde)return gN;dde=1,Object.defineProperty(gN,"__esModule",{value:!0});const e=fr(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${n[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:u}=s;s.fail$data((0,e._)`${a} ${n[o].fail} ${u} || isNaN(${a})`)}};return gN.default=i,gN}var yN={},hde;function L8t(){if(hde)return yN;hde=1,Object.defineProperty(yN,"__esModule",{value:!0});const e=fr(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,u=a.opts.multipleOfPrecision,l=i.let("res"),c=u?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${u}`:(0,e._)`${l} !== parseInt(${l})`;r.fail$data((0,e._)`(${o} === 0 || (${l} = ${s}/${o}, ${c}))`)}};return yN.default=n,yN}var vN={},bN={},pde;function M8t(){if(pde)return bN;pde=1,Object.defineProperty(bN,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,s;for(;i<n;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<n&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}return bN.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',bN}var mde;function F8t(){if(mde)return vN;mde=1,Object.defineProperty(vN,"__esModule",{value:!0});const e=fr(),t=Wr(),n=M8t(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:u,it:l}=s,c=o==="maxLength"?e.operators.GT:e.operators.LT,f=l.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${f} ${c} ${u}`)}};return vN.default=i,vN}var xN={},gde;function B8t(){if(gde)return xN;gde=1,Object.defineProperty(xN,"__esModule",{value:!0});const e=ph(),t=fr(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:u,it:l}=i,c=l.opts.unicodeRegExp?"u":"",f=o?(0,t._)`(new RegExp(${u}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${f}.test(${s})`)}};return xN.default=r,xN}var wN={},yde;function j8t(){if(yde)return wN;yde=1,Object.defineProperty(wN,"__esModule",{value:!0});const e=fr(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return wN.default=n,wN}var _N={},vde;function U8t(){if(vde)return _N;vde=1,Object.defineProperty(_N,"__esModule",{value:!0});const e=ph(),t=fr(),n=Wr(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:u,data:l,$data:c,it:f}=s,{opts:d}=f;if(!c&&a.length===0)return;const h=a.length>=d.loopRequired;if(f.allErrors?p():g(),d.strictRequired){const b=s.parentSchema.properties,{definedProperties:_}=s.it;for(const E of a)if((b==null?void 0:b[E])===void 0&&!_.has(E)){const T=f.schemaEnv.baseId+f.errSchemaPath,k=`required property "${E}" is not defined at "${T}" (strictRequired)`;(0,n.checkStrictMode)(f,k,f.opts.strictRequired)}}function p(){if(h||c)s.block$data(t.nil,y);else for(const b of a)(0,e.checkReportMissingProp)(s,b)}function g(){const b=o.let("missing");if(h||c){const _=o.let("valid",!0);s.block$data(_,()=>x(b,_)),s.ok(_)}else o.if((0,e.checkMissingProp)(s,a,b)),(0,e.reportMissingProp)(s,b),o.else()}function y(){o.forOf("prop",u,b=>{s.setParams({missingProperty:b}),o.if((0,e.noPropertyInData)(o,l,b,d.ownProperties),()=>s.error())})}function x(b,_){s.setParams({missingProperty:b}),o.forOf(b,u,()=>{o.assign(_,(0,e.propertyInData)(o,l,b,d.ownProperties)),o.if((0,t.not)(_),()=>{s.error(),o.break()})},t.nil)}}};return _N.default=i,_N}var EN={},bde;function z8t(){if(bde)return EN;bde=1,Object.defineProperty(EN,"__esModule",{value:!0});const e=fr(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return EN.default=n,EN}var TN={},SN={},xde;function pZ(){if(xde)return SN;xde=1,Object.defineProperty(SN,"__esModule",{value:!0});const e=pG();return e.code='require("ajv/dist/runtime/equal").default',SN.default=e,SN}var wde;function V8t(){if(wde)return TN;wde=1,Object.defineProperty(TN,"__esModule",{value:!0});const e=u$(),t=fr(),n=Wr(),r=pZ(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:u,$data:l,schema:c,parentSchema:f,schemaCode:d,it:h}=o;if(!l&&!c)return;const p=a.let("valid"),g=f.items?(0,e.getSchemaTypes)(f.items):[];o.block$data(p,y,(0,t._)`${d} === false`),o.ok(p);function y(){const E=a.let("i",(0,t._)`${u}.length`),T=a.let("j");o.setParams({i:E,j:T}),a.assign(p,!0),a.if((0,t._)`${E} > 1`,()=>(x()?b:_)(E,T))}function x(){return g.length>0&&!g.some(E=>E==="object"||E==="array")}function b(E,T){const k=a.name("item"),I=(0,e.checkDataTypes)(g,k,h.opts.strictNumbers,e.DataType.Wrong),R=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${E}--;`,()=>{a.let(k,(0,t._)`${u}[${E}]`),a.if(I,(0,t._)`continue`),g.length>1&&a.if((0,t._)`typeof ${k} == "string"`,(0,t._)`${k} += "_"`),a.if((0,t._)`typeof ${R}[${k}] == "number"`,()=>{a.assign(T,(0,t._)`${R}[${k}]`),o.error(),a.assign(p,!1).break()}).code((0,t._)`${R}[${k}] = ${E}`)})}function _(E,T){const k=(0,n.useFunc)(a,r.default),I=a.name("outer");a.label(I).for((0,t._)`;${E}--;`,()=>a.for((0,t._)`${T} = ${E}; ${T}--;`,()=>a.if((0,t._)`${k}(${u}[${E}], ${u}[${T}])`,()=>{o.error(),a.assign(p,!1).break(I)})))}}};return TN.default=s,TN}var CN={},_de;function H8t(){if(_de)return CN;_de=1,Object.defineProperty(CN,"__esModule",{value:!0});const e=fr(),t=Wr(),n=pZ(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:u,schemaCode:l,schema:c}=s;u||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,n.default)}(${a}, ${l})`):s.fail((0,e._)`${c} !== ${a}`)}};return CN.default=i,CN}var AN={},Ede;function q8t(){if(Ede)return AN;Ede=1,Object.defineProperty(AN,"__esModule",{value:!0});const e=fr(),t=Wr(),n=pZ(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:u,schema:l,schemaCode:c,it:f}=s;if(!u&&l.length===0)throw new Error("enum must have non-empty array");const d=l.length>=f.opts.loopEnum;let h;const p=()=>h??(h=(0,t.useFunc)(o,n.default));let g;if(d||u)g=o.let("valid"),s.block$data(g,y);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const b=o.const("vSchema",c);g=(0,e.or)(...l.map((_,E)=>x(b,E)))}s.pass(g);function y(){o.assign(g,!1),o.forOf("v",c,b=>o.if((0,e._)`${p()}(${a}, ${b})`,()=>o.assign(g,!0).break()))}function x(b,_){const E=l[_];return typeof E=="object"&&E!==null?(0,e._)`${p()}(${a}, ${b}[${_}])`:(0,e._)`${a} === ${E}`}}};return AN.default=i,AN}var Tde;function W8t(){if(Tde)return mN;Tde=1,Object.defineProperty(mN,"__esModule",{value:!0});const e=$8t(),t=L8t(),n=F8t(),r=B8t(),i=j8t(),s=U8t(),o=z8t(),a=V8t(),u=H8t(),l=q8t(),c=[e.default,t.default,n.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,l.default];return mN.default=c,mN}var kN={},A_={},Sde;function mPe(){if(Sde)return A_;Sde=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.validateAdditionalItems=void 0;const e=fr(),t=Wr(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:u}=o;if(!Array.isArray(u)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,u)}};function i(s,o){const{gen:a,schema:u,data:l,keyword:c,it:f}=s;f.items=!0;const d=a.const("len",(0,e._)`${l}.length`);if(u===!1)s.setParams({len:o.length}),s.pass((0,e._)`${d} <= ${o.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(f,u)){const p=a.var("valid",(0,e._)`${d} <= ${o.length}`);a.if((0,e.not)(p),()=>h(p)),s.ok(p)}function h(p){a.forRange("i",o.length,d,g=>{s.subschema({keyword:c,dataProp:g,dataPropType:t.Type.Num},p),f.allErrors||a.if((0,e.not)(p),()=>a.break())})}}return A_.validateAdditionalItems=i,A_.default=r,A_}var IN={},k_={},Cde;function gPe(){if(Cde)return k_;Cde=1,Object.defineProperty(k_,"__esModule",{value:!0}),k_.validateTuple=void 0;const e=fr(),t=Wr(),n=ph(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,n.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:u,parentSchema:l,data:c,keyword:f,it:d}=s;g(l),d.opts.unevaluated&&a.length&&d.items!==!0&&(d.items=t.mergeEvaluated.items(u,a.length,d.items));const h=u.name("valid"),p=u.const("len",(0,e._)`${c}.length`);a.forEach((y,x)=>{(0,t.alwaysValidSchema)(d,y)||(u.if((0,e._)`${p} > ${x}`,()=>s.subschema({keyword:f,schemaProp:x,dataProp:x},h)),s.ok(h))});function g(y){const{opts:x,errSchemaPath:b}=d,_=a.length,E=_===y.minItems&&(_===y.maxItems||y[o]===!1);if(x.strictTuples&&!E){const T=`"${f}" is ${_}-tuple, but minItems or maxItems/${o} are not specified or different at path "${b}"`;(0,t.checkStrictMode)(d,T,x.strictTuples)}}}return k_.validateTuple=i,k_.default=r,k_}var Ade;function G8t(){if(Ade)return IN;Ade=1,Object.defineProperty(IN,"__esModule",{value:!0});const e=gPe(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return IN.default=t,IN}var RN={},kde;function Y8t(){if(kde)return RN;kde=1,Object.defineProperty(RN,"__esModule",{value:!0});const e=fr(),t=Wr(),n=ph(),r=mPe(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:u,it:l}=o,{prefixItems:c}=u;l.items=!0,!(0,t.alwaysValidSchema)(l,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,n.validateArray)(o)))}};return RN.default=s,RN}var PN={},Ide;function K8t(){if(Ide)return PN;Ide=1,Object.defineProperty(PN,"__esModule",{value:!0});const e=fr(),t=Wr(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:u,it:l}=i;let c,f;const{minContains:d,maxContains:h}=a;l.opts.next?(c=d===void 0?1:d,f=h):c=1;const p=s.const("len",(0,e._)`${u}.length`);if(i.setParams({min:c,max:f}),f===void 0&&c===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&c>f){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(l,o)){let _=(0,e._)`${p} >= ${c}`;f!==void 0&&(_=(0,e._)`${_} && ${p} <= ${f}`),i.pass(_);return}l.items=!0;const g=s.name("valid");f===void 0&&c===1?x(g,()=>s.if(g,()=>s.break())):c===0?(s.let(g,!0),f!==void 0&&s.if((0,e._)`${u}.length > 0`,y)):(s.let(g,!1),y()),i.result(g,()=>i.reset());function y(){const _=s.name("_valid"),E=s.let("count",0);x(_,()=>s.if(_,()=>b(E)))}function x(_,E){s.forRange("i",0,p,T=>{i.subschema({keyword:"contains",dataProp:T,dataPropType:t.Type.Num,compositeRule:!0},_),E()})}function b(_){s.code((0,e._)`${_}++`),f===void 0?s.if((0,e._)`${_} >= ${c}`,()=>s.assign(g,!0).break()):(s.if((0,e._)`${_} > ${f}`,()=>s.assign(g,!1).break()),c===1?s.assign(g,!0):s.if((0,e._)`${_} >= ${c}`,()=>s.assign(g,!0)))}}};return PN.default=r,PN}var dj={},Rde;function X8t(){return Rde||(Rde=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=fr(),n=Wr(),r=ph();e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const g=l[p];if(g.length===0)continue;const y=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:g.length,deps:g.join(", ")}),d.allErrors?c.if(y,()=>{for(const x of g)(0,r.checkReportMissingProp)(u,x)}):(c.if((0,t._)`${y} && (${(0,r.checkMissingProp)(u,g,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const g in l)(0,n.alwaysValidSchema)(h,l[g])||(c.if((0,r.propertyInData)(c,f,g,h.opts.ownProperties),()=>{const y=u.subschema({keyword:d,schemaProp:g},p);u.mergeValidEvaluated(y,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i}(dj)),dj}var DN={},Pde;function Q8t(){if(Pde)return DN;Pde=1,Object.defineProperty(DN,"__esModule",{value:!0});const e=fr(),t=Wr(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:u}=i;if((0,t.alwaysValidSchema)(u,o))return;const l=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},l),s.if((0,e.not)(l),()=>{i.error(!0),u.allErrors||s.break()})}),i.ok(l)}};return DN.default=r,DN}var NN={},Dde;function yPe(){if(Dde)return NN;Dde=1,Object.defineProperty(NN,"__esModule",{value:!0});const e=ph(),t=fr(),n=$1(),r=Wr(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:u,parentSchema:l,data:c,errsCount:f,it:d}=o;if(!f)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=d;if(d.props=!0,p.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(d,u))return;const g=(0,e.allSchemaProperties)(l.properties),y=(0,e.allSchemaProperties)(l.patternProperties);x(),o.ok((0,t._)`${f} === ${n.default.errors}`);function x(){a.forIn("key",c,k=>{!g.length&&!y.length?E(k):a.if(b(k),()=>E(k))})}function b(k){let I;if(g.length>8){const R=(0,r.schemaRefOrVal)(d,l.properties,"properties");I=(0,e.isOwnProperty)(a,R,k)}else g.length?I=(0,t.or)(...g.map(R=>(0,t._)`${k} === ${R}`)):I=t.nil;return y.length&&(I=(0,t.or)(I,...y.map(R=>(0,t._)`${(0,e.usePattern)(o,R)}.test(${k})`))),(0,t.not)(I)}function _(k){a.code((0,t._)`delete ${c}[${k}]`)}function E(k){if(p.removeAdditional==="all"||p.removeAdditional&&u===!1){_(k);return}if(u===!1){o.setParams({additionalProperty:k}),o.error(),h||a.break();return}if(typeof u=="object"&&!(0,r.alwaysValidSchema)(d,u)){const I=a.name("valid");p.removeAdditional==="failing"?(T(k,I,!1),a.if((0,t.not)(I),()=>{o.reset(),_(k)})):(T(k,I),h||a.if((0,t.not)(I),()=>a.break()))}}function T(k,I,R){const D={keyword:"additionalProperties",dataProp:k,dataPropType:r.Type.Str};R===!1&&Object.assign(D,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(D,I)}}};return NN.default=s,NN}var ON={},Nde;function J8t(){if(Nde)return ON;Nde=1,Object.defineProperty(ON,"__esModule",{value:!0});const e=W5(),t=ph(),n=Wr(),r=yPe(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:u,data:l,it:c}=s;c.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const f=(0,t.allSchemaProperties)(a);for(const y of f)c.definedProperties.add(y);c.opts.unevaluated&&f.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(f),c.props));const d=f.filter(y=>!(0,n.alwaysValidSchema)(c,a[y]));if(d.length===0)return;const h=o.name("valid");for(const y of d)p(y)?g(y):(o.if((0,t.propertyInData)(o,l,y,c.opts.ownProperties)),g(y),c.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(y),s.ok(h);function p(y){return c.opts.useDefaults&&!c.compositeRule&&a[y].default!==void 0}function g(y){s.subschema({keyword:"properties",schemaProp:y,dataProp:y},h)}}};return ON.default=i,ON}var $N={},Ode;function Z8t(){if(Ode)return $N;Ode=1,Object.defineProperty($N,"__esModule",{value:!0});const e=ph(),t=fr(),n=Wr(),r=Wr(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:u,parentSchema:l,it:c}=s,{opts:f}=c,d=(0,e.allSchemaProperties)(a),h=d.filter(E=>(0,n.alwaysValidSchema)(c,a[E]));if(d.length===0||h.length===d.length&&(!c.opts.unevaluated||c.props===!0))return;const p=f.strictSchema&&!f.allowMatchingProperties&&l.properties,g=o.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:y}=c;x();function x(){for(const E of d)p&&b(E),c.allErrors?_(E):(o.var(g,!0),_(E),o.if(g))}function b(E){for(const T in p)new RegExp(E).test(T)&&(0,n.checkStrictMode)(c,`property ${T} matches pattern ${E} (use allowMatchingProperties)`)}function _(E){o.forIn("key",u,T=>{o.if((0,t._)`${(0,e.usePattern)(s,E)}.test(${T})`,()=>{const k=h.includes(E);k||s.subschema({keyword:"patternProperties",schemaProp:E,dataProp:T,dataPropType:r.Type.Str},g),c.opts.unevaluated&&y!==!0?o.assign((0,t._)`${y}[${T}]`,!0):!k&&!c.allErrors&&o.if((0,t.not)(g),()=>o.break())})})}}};return $N.default=i,$N}var LN={},$de;function e9t(){if($de)return LN;$de=1,Object.defineProperty(LN,"__esModule",{value:!0});const e=Wr(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:s}=n;if((0,e.alwaysValidSchema)(s,i)){n.fail();return}const o=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),n.failResult(o,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return LN.default=t,LN}var MN={},Lde;function t9t(){if(Lde)return MN;Lde=1,Object.defineProperty(MN,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:ph().validateUnion,error:{message:"must match a schema in anyOf"}};return MN.default=t,MN}var FN={},Mde;function n9t(){if(Mde)return FN;Mde=1,Object.defineProperty(FN,"__esModule",{value:!0});const e=fr(),t=Wr(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:u}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(u.opts.discriminator&&a.discriminator)return;const l=o,c=s.let("valid",!1),f=s.let("passing",null),d=s.name("_valid");i.setParams({passing:f}),s.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){l.forEach((p,g)=>{let y;(0,t.alwaysValidSchema)(u,p)?s.var(d,!0):y=i.subschema({keyword:"oneOf",schemaProp:g,compositeRule:!0},d),g>0&&s.if((0,e._)`${d} && ${c}`).assign(c,!1).assign(f,(0,e._)`[${f}, ${g}]`).else(),s.if(d,()=>{s.assign(c,!0),s.assign(f,g),y&&i.mergeEvaluated(y,e.Name)})})}}};return FN.default=r,FN}var BN={},Fde;function r9t(){if(Fde)return BN;Fde=1,Object.defineProperty(BN,"__esModule",{value:!0});const e=Wr(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,u)=>{if((0,e.alwaysValidSchema)(s,a))return;const l=n.subschema({keyword:"allOf",schemaProp:u},o);n.ok(o),n.mergeEvaluated(l)})}};return BN.default=t,BN}var jN={},Bde;function i9t(){if(Bde)return jN;Bde=1,Object.defineProperty(jN,"__esModule",{value:!0});const e=fr(),t=Wr(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:u}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const l=i(u,"then"),c=i(u,"else");if(!l&&!c)return;const f=o.let("valid",!0),d=o.name("_valid");if(h(),s.reset(),l&&c){const g=o.let("ifClause");s.setParams({ifClause:g}),o.if(d,p("then",g),p("else",g))}else l?o.if(d,p("then")):o.if((0,e.not)(d),p("else"));s.pass(f,()=>s.error(!0));function h(){const g=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);s.mergeEvaluated(g)}function p(g,y){return()=>{const x=s.subschema({keyword:g},d);o.assign(f,d),s.mergeValidEvaluated(x,f),y?o.assign(y,(0,e._)`${g}`):s.setParams({ifClause:g})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return jN.default=r,jN}var UN={},jde;function s9t(){if(jde)return UN;jde=1,Object.defineProperty(UN,"__esModule",{value:!0});const e=Wr(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return UN.default=t,UN}var Ude;function o9t(){if(Ude)return kN;Ude=1,Object.defineProperty(kN,"__esModule",{value:!0});const e=mPe(),t=G8t(),n=gPe(),r=Y8t(),i=K8t(),s=X8t(),o=Q8t(),a=yPe(),u=J8t(),l=Z8t(),c=e9t(),f=t9t(),d=n9t(),h=r9t(),p=i9t(),g=s9t();function y(x=!1){const b=[c.default,f.default,d.default,h.default,p.default,g.default,o.default,a.default,s.default,u.default,l.default];return x?b.push(t.default,r.default):b.push(e.default,n.default),b.push(i.default),b}return kN.default=y,kN}var zN={},VN={},zde;function a9t(){if(zde)return VN;zde=1,Object.defineProperty(VN,"__esModule",{value:!0});const e=fr(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:u,schemaCode:l,it:c}=r,{opts:f,errSchemaPath:d,schemaEnv:h,self:p}=c;if(!f.validateFormats)return;a?g():y();function g(){const x=s.scopeValue("formats",{ref:p.formats,code:f.code.formats}),b=s.const("fDef",(0,e._)`${x}[${l}]`),_=s.let("fType"),E=s.let("format");s.if((0,e._)`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>s.assign(_,(0,e._)`${b}.type || "string"`).assign(E,(0,e._)`${b}.validate`),()=>s.assign(_,(0,e._)`"string"`).assign(E,b)),r.fail$data((0,e.or)(T(),k()));function T(){return f.strictSchema===!1?e.nil:(0,e._)`${l} && !${E}`}function k(){const I=h.$async?(0,e._)`(${b}.async ? await ${E}(${o}) : ${E}(${o}))`:(0,e._)`${E}(${o})`,R=(0,e._)`(typeof ${E} == "function" ? ${I} : ${E}.test(${o}))`;return(0,e._)`${E} && ${E} !== true && ${_} === ${i} && !${R}`}}function y(){const x=p.formats[u];if(!x){T();return}if(x===!0)return;const[b,_,E]=k(x);b===i&&r.pass(I());function T(){if(f.strictSchema===!1){p.logger.warn(R());return}throw new Error(R());function R(){return`unknown format "${u}" ignored in schema at path "${d}"`}}function k(R){const D=R instanceof RegExp?(0,e.regexpCode)(R):f.code.formats?(0,e._)`${f.code.formats}${(0,e.getProperty)(u)}`:void 0,L=s.scopeValue("formats",{key:u,ref:R,code:D});return typeof R=="object"&&!(R instanceof RegExp)?[R.type||"string",R.validate,(0,e._)`${L}.validate`]:["string",R,L]}function I(){if(typeof x=="object"&&!(x instanceof RegExp)&&x.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${E}(${o})`}return typeof _=="function"?(0,e._)`${E}(${o})`:(0,e._)`${E}.test(${o})`}}}};return VN.default=n,VN}var Vde;function u9t(){if(Vde)return zN;Vde=1,Object.defineProperty(zN,"__esModule",{value:!0});const t=[a9t().default];return zN.default=t,zN}var $v={},Hde;function l9t(){return Hde||(Hde=1,Object.defineProperty($v,"__esModule",{value:!0}),$v.contentVocabulary=$v.metadataVocabulary=void 0,$v.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],$v.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),$v}var qde;function c9t(){if(qde)return dN;qde=1,Object.defineProperty(dN,"__esModule",{value:!0});const e=O8t(),t=W8t(),n=o9t(),r=u9t(),i=l9t(),s=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return dN.default=s,dN}var HN={},TC={},Wde;function f9t(){if(Wde)return TC;Wde=1,Object.defineProperty(TC,"__esModule",{value:!0}),TC.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(TC.DiscrError=e={})),TC}var Gde;function d9t(){if(Gde)return HN;Gde=1,Object.defineProperty(HN,"__esModule",{value:!0});const e=fr(),t=f9t(),n=hZ(),r=G5(),i=Wr(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:u}})=>a===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:a,tag:u,tagName:l}})=>(0,e._)`{error: ${a}, tag: ${l}, tagValue: ${u}}`},code(a){const{gen:u,data:l,schema:c,parentSchema:f,it:d}=a,{oneOf:h}=f;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const g=u.let("valid",!1),y=u.const("tag",(0,e._)`${l}${(0,e.getProperty)(p)}`);u.if((0,e._)`typeof ${y} == "string"`,()=>x(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:y,tagName:p})),a.ok(g);function x(){const E=_();u.if(!1);for(const T in E)u.elseIf((0,e._)`${y} === ${T}`),u.assign(g,b(E[T]));u.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:y,tagName:p}),u.endIf()}function b(E){const T=u.name("valid"),k=a.subschema({keyword:"oneOf",schemaProp:E},T);return a.mergeEvaluated(k,e.Name),T}function _(){var E;const T={},k=R(f);let I=!0;for(let M=0;M<h.length;M++){let z=h[M];if(z!=null&&z.$ref&&!(0,i.schemaHasRulesButRef)(z,d.self.RULES)){const H=z.$ref;if(z=n.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,H),z instanceof n.SchemaEnv&&(z=z.schema),z===void 0)throw new r.default(d.opts.uriResolver,d.baseId,H)}const F=(E=z==null?void 0:z.properties)===null||E===void 0?void 0:E[p];if(typeof F!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);I=I&&(k||R(z)),D(F,M)}if(!I)throw new Error(`discriminator: "${p}" must be required`);return T;function R({required:M}){return Array.isArray(M)&&M.includes(p)}function D(M,z){if(M.const)L(M.const,z);else if(M.enum)for(const F of M.enum)L(F,z);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function L(M,z){if(typeof M!="string"||M in T)throw new Error(`discriminator: "${p}" values must be unique strings`);T[M]=z}}}};return HN.default=o,HN}const h9t="http://json-schema.org/draft-07/schema#",p9t="http://json-schema.org/draft-07/schema#",m9t="Core schema meta-schema",g9t={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},y9t=["object","boolean"],v9t={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},b9t={$schema:h9t,$id:p9t,title:m9t,definitions:g9t,type:y9t,properties:v9t,default:!0};var Yde;function x9t(){return Yde||(Yde=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=P8t(),r=c9t(),i=d9t(),s=b9t,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=W5();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=fr();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=dZ();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=G5();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(aN,aN.exports)),aN.exports}var w9t=x9t();const mZ=qc(w9t),_9t="#/definitions/StudyConfig",E9t="http://json-schema.org/draft-07/schema#",T9t=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.1/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"importedLibraries":{"description":"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.","items":{"type":"string"},"type":"array"},"sequence":{"$ref":"#/definitions/ComponentBlock","description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"sidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. Defaults to false.","type":"boolean"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.","type":"number"},"participantNameField":{"description":"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response \'prolificId\' from the task \'introduction\' to be the name, this field would be \'introduction.prolificId\'","type":"string"},"recordStudyAudio":{"description":"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.","type":"boolean"},"sidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"timeoutReject":{"description":"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.","type":"boolean"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"}},"required":["contactEmail","logoPath","withProgressBar","sidebar"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),S9t={$ref:_9t,$schema:E9t,definitions:T9t},C9t="#/definitions/GlobalConfig",A9t="http://json-schema.org/draft-07/schema#",k9t={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},I9t={$ref:C9t,$schema:A9t,definitions:k9t},R9t="#/definitions/LibraryConfig",P9t="http://json-schema.org/draft-07/schema#",D9t=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LibraryConfig":{"additionalProperties":false,"description":"LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\\n\\nBelow is the general template that should be followed when constructing a Library configuration file.\\n\\n```js {  \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.1/src/parser/LibraryConfigSchema.json\\",  \\"baseComponents\\": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  \\"components\\": {    // Components here are defined exactly as is in the StudyConfig  },  \\"sequences\\": {   // Sequences here are defined as \\"key\\": \\"value\\" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"description":{"description":"A description of the library.","type":"string"},"doi":{"description":"The DOI of the paper where the content of the library is based on.","type":"string"},"externalLink":{"description":"The external link to the paper/website where the content of the library is based on.","type":"string"},"reference":{"description":"The reference to the paper where the content of the library is based on.","type":"string"},"sequences":{"additionalProperties":{"$ref":"#/definitions/ComponentBlock"},"description":"The order of the components in the study. This might include some randomness.","type":"object"}},"required":["$schema","description","components","sequences"],"type":"object"},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),N9t={$ref:R9t,$schema:P9t,definitions:D9t},vPe=new mZ;vPe.addSchema(N9t);const O9t=vPe.getSchema("#/definitions/LibraryConfig");function bPe(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?bPe(n,t):`$${t}.components.${n}`)}}function xPe(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return xPe(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=bPe(l,a),l}return r})}}function $9t(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;cS(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function L9t(e,t){let n=!1,r;try{r=JSON.parse(e),n=O9t(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function M9t(e){const t=await(await fetch(`${Wo}libraries/${e}/config.json`)).text();return L9t(t,e)}async function F9t(e,t,n){const r=e.map(async s=>{const o=await M9t(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(cS(a)){const u=o_e.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const wPe=new mZ;wPe.addSchema(I9t);const Kde=wPe.getSchema("#/definitions/GlobalConfig"),_Pe=new mZ;_Pe.addSchema(S9t);const Xde=_Pe.getSchema("#/definitions/StudyConfig");function B9t(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function j9t(e){const t=JSON.parse(e),n=Kde(t),r=B9t(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Kde.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function EPe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):EPe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function U9t(e,t){const n=[],r=[];$9t(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;cS(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=nbe(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return EPe(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function gZ(e){let t=!1,n;try{n=JSON.parse(e),t=Xde(n)}catch{t=!1}let r=Xde.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await F9t(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=xPe(n.sequence,o,r);const{errors:a,warnings:u}=U9t(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function z9t(e){const t=await(await fetch(`${Wo}${e}`)).text();return await gZ(t)}async function yZ(e,t){const n=t.configsList.find(r=>S0e(r)===e);if(n){const r=t.configs[n];return await z9t(`${r.path}`)}return null}async function V9t(e){const t={},n=e.configsList.map(async i=>yZ(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function H9t({globalConfig:e}){const t=Tx(),[n,r]=O.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";O.useEffect(()=>{if(t!=="__revisit-widget")return yZ(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=g=>{g.data.type==="revisitWidget/CONFIG"&&gZ(g.data.payload).then(async y=>{r(y);const x=await $fe(y);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:x},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=O.useState([]),[a,u]=O.useState(null),{storageEngine:l}=_s(),[c]=G0(),f=O.useMemo(()=>c.get("participantId"),[c]);O.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await $fe(n));const y=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,x=Object.fromEntries(c.entries()),b=await fetch("https://api.ipify.org?format=json").catch(R=>""),_=b instanceof Response?await b.json():{ip:""},E={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:_.ip},T=await l.initializeParticipantSession(t,x,n,E,f||y),k=await l.getModes(t),I=await jrt(t,n,T.sequence,E,T.answers,k,T.participantId);u(I),o([{element:S.jsx(c8t,{}),children:[{path:"/",element:S.jsx(nPe,{to:Cd(0),replace:!0})},{path:"/:index",element:n.errors.length>0?S.jsxs(S.Fragment,{children:[S.jsx(vs,{order:2,mb:8,children:"Error loading config"}),S.jsx(i3,{issues:n.errors,type:"error"})]}):S.jsx(PFt,{})}]}])}p()},[l,n,t,c,f]);const d=c0e(s);let h=null;return i?s.length===0?h=S.jsx(Oc,{visible:!0}):h=d&&a?S.jsx(obe.Provider,{value:a,children:S.jsx(jnt,{store:a.store,children:d})}):S.jsx(jy,{}):h=S.jsx(jy,{}),h}function AO({studyIds:e}){const t=nh(),{studyId:n}=Sp(),r=Bf(),i=e.map(o=>({value:o,label:o})).sort((o,a)=>o.label.localeCompare(a.label)),s=r.pathname.includes("analysis");return S.jsx(ci.Header,{p:"md",children:S.jsxs(tp,{mt:-7,align:"center",children:[S.jsx(tp.Col,{span:6,children:S.jsxs(sn,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[S.jsx(p1,{w:40,src:`${Wo}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),S.jsx(kc,{w:"md"}),S.jsx(vs,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),S.jsx(tp.Col,{span:6,children:S.jsxs(sn,{justify:"flex-end",direction:"row",children:[s&&S.jsxs(S.Fragment,{children:[S.jsx(FT,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),S.jsx(hn,{component:"a",href:`${Wo}${n}`,target:"_blank",leftSection:S.jsx(x0e,{}),mr:"sm",children:"Go to Study"})]}),S.jsx(_0e,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function TPe({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=PV(!1),[a,u]=O.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;_Y(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return S.jsxs(S.Fragment,{children:[S.jsxs(is,{style:{gap:n},children:[S.jsx(Mi,{label:"Download all participants data as JSON",children:S.jsx(hn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:S.jsx(_je,{})})}),S.jsx(Mi,{label:"Download all participants data as a tidy CSV",children:S.jsx(hn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:S.jsx(E0e,{})})})]}),i&&a.length>0&&S.jsx(Rgt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function q9t({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?S.jsx(bn.Td,{children:S.jsx(qd,{miw:100,children:e.timedOut?S.jsx(bt,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>S.jsxs(Le,{children:[S.jsxs(bt,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?S.jsx(bt,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):S.jsx(bt,{span:!0,children:n})]},`cell-${t}`))})}):S.jsx(bn.Td,{children:"N/A"})}function Qde({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=O_e(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?S.jsxs(bn.Td,{children:[t.toFixed(1)," ","s",n&&S.jsxs(S.Fragment,{children:[S.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):S.jsx(bn.Td,{children:"N/A"})}function W9t(e){const{metaData:t}=e;return S.jsx(bn.Td,{children:S.jsx(cq,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:S.jsxs(qd,{gap:"xs",children:[S.jsxs(Le,{children:["IP:"," ",t.ip]}),S.jsxs(Le,{children:["Language:"," ",t.language]}),S.jsxs(Le,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),S.jsxs(Le,{children:["User Agent:"," ",t.userAgent]})]})})})}function G9t({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=_s(),{studyId:i}=Sp(),{user:s}=nS(),o=async(E,T)=>{if(r&&i)if(s.isAdmin){const k=T===""?"Rejected by admin":T;await r.rejectParticipant(i,E,k),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=O.useState([]),[l,c]=O.useState(!1),[f,d]=O.useState(!1),[h,p]=O.useState(""),g=async()=>{c(!0),d(!1);const E=a.map(async T=>await o(T,h));await Promise.all(E),u([]),await n(),c(!1)};function y(E){E==="all"?a.length===e.length?u([]):u(e.map(T=>T.participantId)):a.includes(E)?u(a.filter(T=>T!==E)):u([...a,E])}const x=sbe(t.sequence),b=[S.jsx(bn.Th,{children:S.jsx(sn,{justify:"center",children:S.jsx(eu,{mb:-4,checked:a.length===e.length,onChange:()=>y("all")})})},"action"),S.jsx(bn.Th,{children:"ID"},"ID"),S.jsx(bn.Th,{children:"Status"},"status"),S.jsx(bn.Th,{children:"Tags"},"tags"),S.jsx(bn.Th,{children:"Meta"},"meta"),...x.flatMap(E=>[S.jsx(bn.Th,{children:E.componentName},`header-${E.componentName}-${E.timesSeenInBlock}`),S.jsxs(bn.Th,{children:[S.jsx("span",{style:{whiteSpace:"nowrap"},children:E.componentName})," ","Duration (clean)"]},`header-${E.componentName}-${E.timesSeenInBlock}-duration`)]),S.jsx(bn.Th,{children:"Total Duration (clean)"},"total-duration")],_=e.map(E=>S.jsxs(bn.Tr,{children:[S.jsx(bn.Td,{children:S.jsx(sn,{justify:"center",children:S.jsx(eu,{mb:-4,checked:a.includes(E.participantId),onChange:()=>y(E.participantId)})})}),S.jsx(bn.Td,{style:{whiteSpace:"nowrap"},children:E.participantId}),S.jsx(bn.Td,{children:S.jsxs(sn,{direction:"column",miw:100,children:[S.jsxs(sn,{direction:"row",align:"center",children:[E.rejected?S.jsx(Mi,{label:"Rejected",children:S.jsx(vI,{size:16,color:"red",style:{marginBottom:-3}})}):E.completed?S.jsx(Mi,{label:"Completed",children:S.jsx(H$,{size:16,color:"teal",style:{marginBottom:-3}})}):S.jsx(Mi,{label:"In Progress",children:S.jsx(w0e,{size:16,color:"orange",style:{marginBottom:-3}})}),!E.completed&&S.jsxs(bt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(E.answers).filter(([T,k])=>k.endTime!==-1&&k.endTime!==void 0).length/(Gd(E.sequence).length-1)*100).toFixed(2),"%"]})]}),E.rejected&&S.jsx(bt,{mt:5,fz:10,children:E.rejected.reason})]})}),S.jsx(bn.Td,{children:S.jsx(sn,{direction:"column",miw:100,children:(E.participantTags||[]).map(T=>S.jsxs(bt,{fz:10,children:["-"," ",T]},`tag-${T}`))})}),E.metadata?S.jsx(W9t,{metaData:E.metadata}):S.jsx(bn.Td,{children:"N/A"}),x.map(T=>{const k=aG(E.sequence,T.orderPath),I=k&&Object.entries(E.answers).sort((R,D)=>{const L=parseInt(R[0].slice(R[0].lastIndexOf("_")+1),10),M=parseInt(D[0].slice(D[0].lastIndexOf("_")+1),10);return L-M}).filter(([R])=>{const D=R.slice(0,R.lastIndexOf("_")),L=parseInt(R.slice(R.lastIndexOf("_")+1),10);return D===T.componentName&&L<=k[0].lastIndex&&L>=k[0].firstIndex});return I!==null&&I.length>=T.timesSeenInBlock+1&&I[T.timesSeenInBlock][1].endTime!==-1?S.jsxs(Mr.Fragment,{children:[S.jsx(q9t,{cellData:I[T.timesSeenInBlock][1]}),S.jsx(Qde,{cellData:I[T.timesSeenInBlock][1]})]},`cellgroup-${E.participantId}-${T.componentName}-${T.timesSeenInBlock}`):S.jsxs(Mr.Fragment,{children:[S.jsx(bn.Td,{children:"N/A"}),S.jsx(bn.Td,{children:"N/A"})]},`cellgroup-${E.participantId}-${T.componentName}-${T.timesSeenInBlock}`)}),S.jsx(Qde,{cellData:{startTime:Math.min(...Object.values(E.answers).filter(T=>T.endTime!==-1&&T.endTime!==void 0).map(T=>T.startTime)),endTime:Math.max(...Object.values(E.answers).filter(T=>T.endTime!==-1&&T.endTime!==void 0).map(T=>T.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(E.answers).flatMap(T=>T.windowEvents),timedOut:!1}},`cell-${E.participantId}-total-duration`)]},E.participantId));return e.length>0?S.jsxs(S.Fragment,{children:[S.jsx(Oc,{visible:l,overlayProps:{blur:2}}),S.jsxs(sn,{justify:"space-between",mb:8,p:8,children:[S.jsx(is,{children:S.jsx(FT,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(E=>E.participantId))],searchable:!0,value:null,leftSection:S.jsx(Lje,{size:14}),onChange:E=>E&&y(E)})}),S.jsxs(is,{children:[S.jsx(TPe,{visibleParticipants:e,studyId:i||""}),S.jsxs(hn,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),S.jsx(sn,{direction:"column",style:{width:"100%",overflow:"auto"},children:S.jsxs(bn,{striped:!0,withTableBorder:!0,children:[S.jsx(bn.Thead,{children:S.jsx(bn.Tr,{children:b})}),S.jsx(bn.Tbody,{children:_})]})}),S.jsxs(ns,{opened:f,onClose:()=>d(!1),title:S.jsxs(bt,{children:["Reject Participants (",a.length,")"]}),children:[S.jsx(Jm,{label:"Please enter the reason for rejection.",onChange:E=>p(E.target.value)}),S.jsxs(sn,{mt:"sm",justify:"right",children:[S.jsx(hn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),S.jsx(hn,{color:"red",onClick:()=>g(),children:"Reject Participants"})]})]})]}):S.jsxs(S.Fragment,{children:[S.jsx(kc,{h:"xl"}),S.jsx(sn,{justify:"center",align:"center",children:S.jsx(bt,{children:"No data available"})})]})}function Y9t({studyId:e,refresh:t}){const[n,r]=O.useState(!1),[i,s]=O.useState(!1),[o,a]=O.useState(!1),[u,l]=O.useState(!1),[c,f]=O.useState(""),[d,h]=O.useState([]),[p,g]=O.useState(""),[y,x]=O.useState(""),[b,_]=O.useState(!1),[E,T]=O.useState(!1),{storageEngine:k}=_s(),I=k,R=O.useCallback(async()=>{T(!0);const q=await I.getSnapshots(e);h(q),T(!1)},[I,e]);O.useEffect(()=>{R()},[R]);const D=async(q,...U)=>{_(!0);const X=await q(...U);X.status==="SUCCESS"?(R(),_(!1),await t(),X.notifications&&X.notifications.forEach(V=>{Ok(V)})):(_(!1),Ok({title:X.error.title,message:X.error.message,color:"red"}))},L=async()=>{await D(I.createSnapshot.bind(I),e,!1)},M=async()=>{g(""),r(!1),await D(I.createSnapshot.bind(I),e,!0)},z=async()=>{a(!1),await D(I.renameSnapshot.bind(I),c,y)},F=async q=>{await D(I.restoreSnapshot.bind(I),e,q)},H=async()=>{g(""),s(!1),await D(I.removeSnapshotOrLive.bind(I),c,!0)},Q=async()=>{g(""),l(!1),await D(I.removeSnapshotOrLive.bind(I),e,!0)},J=()=>hte({title:"Create a Snapshot",children:S.jsx(bt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>L()}),ne=q=>hte({title:"Restore Snapshot",children:S.jsx(bt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>F(q)}),Z=q=>{const U=/-snapshot-(.+)$/,X=q.match(U);return X&&X[1]?X[1].replace("T"," "):null},ie=async q=>{const U=q.slice(q.indexOf("-")+1);return await I.getAllParticipantsDataByStudy(U)};return S.jsxs(S.Fragment,{children:[S.jsx(Oc,{visible:b}),S.jsxs(sn,{justify:"space-between",align:"center",children:[S.jsxs(Le,{style:{width:"70%"},children:[S.jsx(vs,{order:5,children:"Create a Snapshot"}),S.jsxs(bt,{children:["This will create a snapshot of the live"," ",S.jsx(bt,{span:!0,fw:700,children:e})," ","database. It will"," ",S.jsx(bt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),S.jsx(Mi,{label:"Create a snapshot",children:S.jsx(hn,{onClick:J,children:"Snapshot"})})]}),S.jsx(kc,{h:"lg"}),S.jsxs(sn,{justify:"space-between",align:"center",children:[S.jsxs(Le,{style:{width:"70%"},children:[S.jsx(vs,{order:5,children:"Archive Data"}),S.jsxs(bt,{children:["This will create a snapshot of the live"," ",S.jsx(bt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),S.jsx(Mi,{label:"Snapshot and Delete Data",children:S.jsx(hn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),S.jsx(kc,{h:"lg"}),S.jsxs(sn,{justify:"space-between",align:"center",children:[S.jsxs(Le,{style:{width:"70%"},children:[S.jsx(vs,{order:5,children:"Delete Data"}),S.jsxs(bt,{children:["This will delete the live"," ",S.jsx(bt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),S.jsx(Mi,{label:"Delete Data",children:S.jsx(hn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),S.jsx(kc,{h:"xl"}),S.jsxs(sn,{direction:"column",children:[S.jsx(sn,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:S.jsx(vs,{order:5,children:"Snapshots"})}),S.jsxs(Le,{style:{position:"relative"},children:[S.jsx(Oc,{visible:E}),d.length>0?S.jsxs(bn,{children:[S.jsx(bn.Thead,{children:S.jsxs(bn.Tr,{children:[S.jsx(bn.Th,{children:"Snapshot Name"}),S.jsx(bn.Th,{children:"Date Created"}),S.jsx(bn.Th,{children:"Actions"})]})}),S.jsx(bn.Tbody,{children:d.map(q=>S.jsxs(bn.Tr,{children:[S.jsx(bn.Td,{children:q.alternateName}),S.jsx(bn.Td,{children:Z(q.originalName)}),S.jsx(bn.Td,{children:S.jsxs(sn,{children:[S.jsx(Mi,{label:"Rename",children:S.jsx(hn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(q.originalName)},children:S.jsx(Pje,{})})}),S.jsx(Mi,{label:"Restore Snapshot",children:S.jsx(hn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{ne(q.originalName)},children:S.jsx(Oje,{})})}),S.jsx(Mi,{label:"Delete Snapshot",children:S.jsx(hn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(q.originalName)},children:S.jsx(T0e,{})})}),S.jsx(TPe,{visibleParticipants:()=>ie(q.originalName),studyId:e,gap:"10px",fileName:q.alternateName})]})})]},q.originalName))})]}):S.jsx(bt,{children:"No snapshots."})]})]}),S.jsxs(ns,{opened:n,onClose:()=>{r(!1),g("")},title:S.jsx(bt,{children:"Archive Data"}),children:[S.jsx(bt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),S.jsx(Jm,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:q=>g(q.target.value)}),S.jsxs(sn,{mt:"sm",justify:"right",children:[S.jsx(hn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),g("")},children:"Cancel"}),S.jsx(hn,{color:"red",onClick:M,disabled:p!==e,children:"Archive"})]})]}),S.jsxs(ns,{opened:i,onClose:()=>{s(!1),g("")},title:S.jsx(bt,{children:"Delete Snapshot"}),children:[S.jsxs(bt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",S.jsx(bt,{span:!0,fw:700,children:"irreversible"}),"."]}),S.jsx(Jm,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:q=>g(q.target.value)}),S.jsxs(sn,{mt:"sm",justify:"right",children:[S.jsx(hn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),g("")},children:"Cancel"}),S.jsx(hn,{color:"red",onClick:H,disabled:p!==e,children:"Delete"})]})]}),S.jsxs(ns,{opened:o,onClose:()=>{a(!1),x("")},title:S.jsx(bt,{children:"Rename Snapshot"}),children:[S.jsx(Jm,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:q=>x(q.target.value)}),S.jsxs(sn,{mt:"sm",justify:"right",children:[S.jsx(hn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),x("")},children:"Cancel"}),S.jsx(hn,{color:"green",onClick:z,disabled:!y||y.length===0,children:"Rename"})]})]}),S.jsxs(ns,{opened:u,onClose:()=>{l(!1),g("")},title:S.jsx(bt,{children:"Delete Live Data"}),children:[S.jsxs(bt,{mb:"sm",children:["This will permanently delete the live"," ",S.jsx(bt,{span:!0,fw:700,children:e})," ","data. This action is"," ",S.jsx(bt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),S.jsx(Jm,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:q=>g(q.target.value)}),S.jsxs(sn,{mt:"sm",justify:"right",children:[S.jsx(hn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),g("")},children:"Cancel"}),S.jsx(hn,{color:"red",onClick:Q,disabled:p!==e,children:"Delete"})]})]})]})}function K9t({studyId:e}){const{storageEngine:t}=_s(),[n,r]=O.useState(!1),[i,s]=O.useState(!1),[o,a]=O.useState(!1),[u,l]=O.useState(!1);O.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&S.jsxs(qd,{children:[S.jsx(db,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),S.jsx(db,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),S.jsx(db,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function X9t({studyId:e,refresh:t}){const{storageEngine:n}=_s();return S.jsx(S0,{children:S.jsxs(Ka,{multiple:!0,variant:"contained",children:[S.jsxs(Ka.Item,{value:"ReVISit Modes",children:[S.jsx(Ka.Control,{children:S.jsx(vs,{order:5,children:"ReVISit Modes"})}),S.jsx(Ka.Panel,{children:S.jsx(K9t,{studyId:e})})]},"modes"),S.jsxs(Ka.Item,{value:"Data Management",children:[S.jsx(Ka.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:S.jsx(vs,{order:5,children:"Data Management"})}),S.jsx(Ka.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&S.jsx(Y9t,{studyId:e,refresh:t})})]},"dataManagement")]})})}function Q9t({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=PV(!0),[o,a]=sI(),u=O.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=O.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=O.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(g=>Object.entries(g.answers).filter(([y])=>y.slice(0,y.lastIndexOf("_"))===n)).map(g=>g.filter(([y,x])=>x.endTime!==-1).map(([y,x])=>(x.endTime-x.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(y=>y.value)),p=Math.max(...e.options.map(y=>y.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return S.jsxs(CT,{p:"lg",withBorder:!0,ref:o,children:[S.jsxs(sn,{direction:"row",justify:"space-between",onClick:s,children:[S.jsxs(sn,{align:"center",children:[e.type==="metadata"&&S.jsx(wje,{size:20}),e.type==="numerical"&&S.jsx(Ije,{size:20}),(e.type==="shortText"||e.type==="longText")&&S.jsx(vje,{size:20}),e.type==="likert"&&S.jsx(Tje,{size:20}),e.type==="dropdown"&&S.jsx(Mje,{size:20}),e.type==="slider"&&S.jsx(dje,{size:20}),e.type==="radio"&&S.jsx(Nje,{size:20}),e.type==="checkbox"&&S.jsx(Fje,{size:20}),e.type==="reactive"&&S.jsx(Cje,{size:20}),S.jsx(vs,{order:5,ml:4,children:e.id})]}),S.jsx(xje,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),S.jsxs(g$,{in:i,mah:400,children:[S.jsx(Le,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:S.jsx(fx,{})}),S.jsxs(uq,{cols:2,h:360,children:[S.jsx(_0,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="reactive"?S.jsx(Efe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):S.jsxs(sn,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&S.jsx(hA,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&S.jsxs(S.Fragment,{children:[S.jsx(bt,{fw:700,children:"Response Values: "}),u.map((f,d)=>S.jsx(sn,{align:"center",gap:"xs",children:S.jsx(bt,{children:f[e.id]})},d))]})]})}),S.jsx(_0,{mih:200,children:e.type==="metadata"?S.jsx(Efe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):S.jsxs(S.Fragment,{children:[S.jsx(bt,{fw:700,children:"Response Specification: "}),S.jsx(hA,{block:!0,children:JSON.stringify(e,null,2)}),S.jsx("br",{}),l&&S.jsxs(S.Fragment,{children:[S.jsx(bt,{fw:700,children:"Correct Answer: "}),S.jsx(hA,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function J9t({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&cPe(t.components[n],t),i=O.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?S.jsx(sn,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>S.jsx(Q9t,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):S.jsx(sn,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:S.jsx(bt,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function Z9t({studyConfig:e,visibleParticipants:t}){const n=O.useMemo(()=>{let i=h0(e.sequence);return i=uG(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=Sp();return S.jsx(CT,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?S.jsx(sn,{justify:"center",align:"center",pt:"lg",pb:"md",children:S.jsx(bt,{children:"No data available."})}):S.jsxs(sn,{direction:"row",children:[S.jsx(Le,{w:340,children:S.jsx(o$,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),S.jsx(fx,{orientation:"vertical",mx:"md"}),S.jsx(J9t,{participantData:t,studyConfig:e,trialId:r})]})})}function eBt({xScale:e,answer:t,height:n,labelHeight:r=0}){return S.jsx("g",{children:S.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const qN=3,I_=25,WN=25,GN=20,Jde=1,hj=15;function tBt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0,isCorrect:a,hasCorrect:u}){const[l,c]=O.useState(!1),[f,{width:d}]=sI();return S.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{cursor:"pointer"},children:[S.jsx("rect",{opacity:1,fill:l||s?"cornflowerblue":"lightgray",x:e(t.startTime)+Jde,width:e(t.endTime)-e(t.startTime)-Jde*2,y:r-I_,height:I_}),S.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-qN,width:d+qN*2+(u?hj:0),y:r-I_-WN-o,height:GN,fill:"whitesmoke"}),S.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-qN,x2:d+e(t.startTime)+qN+(u?hj:0),y1:r-I_-WN+GN-o,y2:r-I_-WN+GN-o}),S.jsx("foreignObject",{x:e(t.startTime),width:d+(u?hj:0),y:r-I_-WN-o,height:GN,children:S.jsx(T0,{style:{width:"fit-content"},children:S.jsxs(is,{wrap:"nowrap",gap:2,children:[S.jsx(bt,{lineClamp:1,ref:f,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n}),u?a?S.jsx(H$,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):S.jsx(vI,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const Zde=25,nBt=8,pj={left:20,top:0,right:20,bottom:0};function rBt({participantData:e,width:t,height:n,selectedTask:r,studyId:i,studyConfig:s,maxLength:o}){const a=O.useCallback(y=>{const x=y.split("_"),b=+x[x.length-1];window.open(`${Wo}${i}/${Cd(b)}?participantId=${e.participantId}`,"_blank")},[e.participantId,i]),u=O.useMemo(()=>{const y=Object.values(e.answers||{}).filter(_=>_.startTime).map(_=>[_.startTime,_.endTime]).flat(),x=Qst(y);return HL([pj.left,t-pj.left-pj.right]).domain([x[0],o?x[0]+o:x[1]]).clamp(!0)},[o,e.answers,t]),[l,c,f]=O.useMemo(()=>{let y=0;const x=Object.entries(e.answers||{}).filter(T=>!!T[1].startTime).sort((T,k)=>T[1].startTime-k[1].startTime);let b=0,_=0;const E=x.map((T,k)=>{const[I,R]=T,D=k>0?x[k-y-1]:null;D&&D[0].length*(nBt+1)+u(D[1].startTime)>u(R.startTime)?y+=1:y=0;const L=I.split("_"),M=L.slice(0,L.length-1).join("_"),z=s==null?void 0:s.components[M];let F=!0,H=!1;return z&&z.correctAnswer?(z.correctAnswer.forEach(Q=>{const{id:J,answer:ne}=Q;(!z||!z.correctAnswer||R.answer[J]!==ne)&&(F=!1)}),H=!0):H=!1,H&&(_+=1,F&&(b+=1)),{line:S.jsx(eBt,{labelHeight:y*Zde,answer:R,height:n,xScale:u},I),label:S.jsx(Mi,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:S.jsx(qd,{gap:0,children:Object.entries(R.answer).map(Q=>{var ie,q;const[J,ne]=Q,Z=(q=(ie=z==null?void 0:z.correctAnswer)==null?void 0:ie.find(U=>U.id===J))==null?void 0:q.answer;return S.jsx(bt,{children:`${J}: ${ne} ${Z?`[${Z}]`:""}`},J)})}),children:S.jsx("g",{children:S.jsx(tBt,{isCorrect:F,hasCorrect:H,labelHeight:y*Zde,isSelected:r===I,setSelectedTask:a,answer:R,height:n,name:I,xScale:u},I)})})}});return[b,_,E]},[e.answers,u,s==null?void 0:s.components,n,r,a]),d=O.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const y=Object.values(e.answers).filter(x=>x.startTime).sort((x,b)=>x.startTime-b.startTime);return new Date(y[y.length-1].endTime-(y[0]?y[0].startTime:0)).getTime()},[e]),h=O.useMemo(()=>Object.entries(e.answers||{}).sort((x,b)=>x[1].startTime-b[1].startTime).map(x=>{const[b,_]=x,E=[];let T=[-1,-1],k="visible";if(_.windowEvents)for(let I=0;I<_.windowEvents.length;I+=1)_.windowEvents[I][1]==="visibility"&&(_.windowEvents[I][2]==="hidden"&&k==="visible"?(T=[_.windowEvents[I][0],-1],k="hidden"):_.windowEvents[I][2]==="visible"&&k==="hidden"&&(T[1]=_.windowEvents[I][0],E.push(T),T=[-1,-1],k="visible"));return E.map((I,R)=>S.jsx(Mi,{withinPortal:!0,label:"Browsed away",children:S.jsx("rect",{x:u(I[0]),width:u(I[1])-u(I[0]),y:n-5,height:10})},R))}),[u,n,e.answers]),p=O.useMemo(()=>{if(s!=null&&s.uiConfig&&s.uiConfig.participantNameField){const[y,x]=s.uiConfig.participantNameField.split("."),b=Object.keys(e.answers).find(_=>_.startsWith(y));if(b)return`${e.answers[b].answer[x]}`}return null},[e.answers,s]),g=O.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return"";const y=Object.values(e.answers).filter(b=>b.startTime).sort((b,_)=>b.startTime-_.startTime),x=new Date(y[y.length-1].endTime);return e.completed?`${x.toLocaleDateString()} ${x.toLocaleTimeString()}`:""},[e]);return S.jsx(T0,{children:S.jsxs(qd,{gap:15,style:{width:"100%"},children:[S.jsx(fx,{size:"md"}),S.jsxs(is,{justify:"space-between",children:[S.jsxs(is,{justify:"center",children:[e.participantIndex?S.jsx(bt,{children:`P-${e.participantIndex<10?"0":"none"}${e.participantIndex}`}):null,S.jsx(bt,{size:"md",fw:700,children:p||e.participantId}),S.jsx(bt,{size:"md",children:g}),e.completed?null:S.jsx(bt,{size:"xl",c:"red",children:"Not completed"}),S.jsxs(is,{gap:10,children:[S.jsx(Ld,{variant:"light",size:"lg",color:"green",leftSection:S.jsx(H$,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:l}),S.jsx(Ld,{variant:"light",size:"lg",color:"red",leftSection:S.jsx(vI,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:c-l}),S.jsx(Ld,{variant:"light",size:"lg",color:"gray",leftSection:S.jsx(Sje,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:CV(d)})]})]}),S.jsx(hn,{rightSection:S.jsx(b0e,{size:14}),component:"a",href:`${Wo}${i}/${Cd(0)}?participantId=${e.participantId}`,target:"_blank",children:"Go to replay"})]}),e.completed?S.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[f.map(y=>y.line),f.map(y=>y.label),h]}):null]})})}function iBt({visibleParticipants:e,studyConfig:t}){const{studyId:n}=Sp(),[r,{width:i}]=sI(),[s,o]=O.useState(!1),a=O.useMemo(()=>s?Math.max(...e.map(l=>{const c=Math.min(...Object.values(l.answers).map(d=>d.startTime||0)),f=Math.max(...Object.values(l.answers).map(d=>d.endTime||0));return f&&c?f-c:0})):void 0,[s,e]);return S.jsxs(qd,{ref:r,style:{width:"100%"},children:[S.jsx(is,{children:S.jsx(db,{checked:s,label:"Scale by time",onChange:u=>o(u.currentTarget.checked)})}),e.map(u=>S.jsx(rBt,{maxLength:a,studyConfig:t,studyId:n||"",height:200,participantData:u,width:i},u.participantId))]})}function sBt({globalConfig:e}){const{studyId:t}=Sp(),[n,r]=O.useState([]),[i,s]=O.useState(void 0),[o,a]=O.useState(!1),{storageEngine:u}=_s(),l=nh(),{tab:c}=Sp(),{user:f}=nS();O.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const _=async E=>{if(E.data.type==="revisitWidget/CONFIG"&&u){const T=await gZ(E.data.payload);s(T)}};return window.addEventListener("message",_),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",_)}}return yZ(t,e).then(_=>{_&&s(_)}),()=>{}},[t,e,u]);const d=O.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const _=await u.getAllParticipantsData();r(_),a(!1)}},[u,t,i]);O.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=O.useState([]),[g,y,x]=O.useMemo(()=>{const _=n.filter(k=>!k.rejected&&k.completed),E=n.filter(k=>!k.rejected&&!k.completed),T=n.filter(k=>k.rejected);return p([..._,...E,...T]),[_,E,T]},[n]),b=O.useCallback(_=>{const E=[];_.includes("completed")&&E.push(...g),_.includes("inprogress")&&E.push(...y),_.includes("rejected")&&E.push(...x),p(E)},[g,y,x]);return S.jsxs(S.Fragment,{children:[S.jsx(AO,{studyIds:e.configsList}),S.jsx(ci.Main,{children:S.jsxs(S0,{fluid:!0,style:{height:"100%",position:"relative"},children:[S.jsx(Oc,{visible:o}),S.jsxs(sn,{direction:"row",align:"center",justify:"space-between",children:[S.jsx(vs,{order:5,children:t}),S.jsxs(sn,{direction:"row",align:"center",children:[S.jsx(bt,{mt:-2,size:"sm",children:"Participants: "}),S.jsx(eu.Group,{defaultValue:["completed","inprogress","rejected"],onChange:b,mb:"xs",mt:8,ml:"xs",children:S.jsxs(is,{children:[S.jsx(eu,{value:"completed",label:"Completed"}),S.jsx(eu,{value:"inprogress",label:"In Progress"}),S.jsx(eu,{value:"rejected",label:"Rejected"})]})})]})]}),S.jsx(kc,{h:"xs"}),S.jsxs(wr,{variant:"outline",value:c,onChange:_=>l(`/analysis/stats/${t}/${_}`),style:{height:"100%"},children:[S.jsxs(wr.List,{children:[S.jsx(wr.Tab,{value:"table",leftSection:S.jsx(Bje,{size:16}),children:"Table View"}),S.jsx(wr.Tab,{value:"stats",leftSection:S.jsx(bje,{size:16}),children:"Trial Stats"}),S.jsx(wr.Tab,{value:"replay",leftSection:S.jsx(Dje,{size:16}),children:"Participant Replay"}),S.jsx(wr.Tab,{value:"manage",leftSection:S.jsx(_0e,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),S.jsx(wr.Panel,{value:"table",pt:"xs",children:i&&S.jsx(G9t,{visibleParticipants:h,studyConfig:i,refresh:d})}),S.jsx(wr.Panel,{value:"stats",pt:"xs",children:i&&S.jsx(Z9t,{studyConfig:i,visibleParticipants:h})}),S.jsx(wr.Panel,{value:"replay",pt:"xs",children:S.jsx(iBt,{visibleParticipants:h,studyConfig:i})}),S.jsx(wr.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?S.jsx(X9t,{studyId:t,refresh:d}):S.jsx(S0,{mt:20,children:S.jsx(l0,{title:"Unauthorized Access",variant:"light",color:"red",icon:S.jsx(Rq,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function ehe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=nS(),{storageEngine:o}=_s(),[a,u]=O.useState(!1),l=Sp();return O.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?S.jsx(Oc,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?S.jsx(Sq,{to:"/login"}):S.jsx(S.Fragment,{children:e})}async function SPe(e,t){if(e instanceof gf){t(!0);const n=new Km,r=o4();try{await Stt(r,n,Mve)}catch(i){Ok({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function oBt(){const{user:e}=nS(),[t,n]=O.useState(!1),{storageEngine:r}=_s();return O.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&Ok({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?S.jsx(Sq,{to:"/"}):S.jsx(S0,{children:S.jsx(OT,{padding:"lg",children:S.jsxs(sn,{align:"center",direction:"column",justify:"center",children:[S.jsx(p1,{maw:200,mt:50,mb:100,src:`${Wo}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),S.jsxs(S.Fragment,{children:[S.jsx(bt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),S.jsx(hn,{onClick:()=>SPe(r,n),leftSection:S.jsx(jje,{}),variant:"filled",children:"Sign In With Google"})]}),S.jsx(Oc,{visible:t})]})})})}function aBt(){const{user:e,triggerAuth:t,logout:n}=nS(),{storageEngine:r}=_s(),[i,s]=O.useState(!1),[o,a]=O.useState([]),[u,l]=O.useState(!1),[c,f]=O.useState(!1),[d,h]=O.useState(!1),[p,g]=O.useState(!1),[y,x]=O.useState(!1),[b,_]=O.useState(""),[E,T]=O.useState(null),k=fbe({initialValues:{email:""},validate:{email:xst("Invalid email")}});O.useEffect(()=>{(async()=>{if(l(!0),r instanceof gf){const H=await(r==null?void 0:r.getUserManagementData("authentication"));s((H==null?void 0:H.isEnabled)||!1);const Q=await(r==null?void 0:r.getUserManagementData("adminUsers"));Q&&Q.adminUsersList&&a(Q==null?void 0:Q.adminUsersList.map(J=>J.email))}else s(!1);l(!1)})()},[r]);const I=async()=>{if(l(!0),r instanceof gf){const F=await SPe(r,l);F&&F.email?(T({email:F.email,uid:F.uid}),g(!0)):x(!0)}l(!1)},R=async F=>{l(!0),r instanceof gf&&F&&(await r.changeAuth(!0),await r.addAdminUser(F),a([F.email]),s(!0),t()),g(!1),l(!1)},D=async()=>{if(l(!0),r instanceof gf){await r.addAdminUser({email:k.values.email,uid:null});const F=await r.getUserManagementData("adminUsers");a((F==null?void 0:F.adminUsersList.map(H=>H.email))||[])}l(!1),f(!1),k.setValues({email:""})},L=F=>{h(!0),_(F)},M=async()=>{if(l(!0),r instanceof gf){await r.removeAdminUser(b);const F=await r.getUserManagementData("adminUsers");a((F==null?void 0:F.adminUsersList.map(H=>H.email))||[])}h(!1),l(!1)},z=O.useMemo(()=>r instanceof gf,[r]);return S.jsxs(S.Fragment,{children:[S.jsx(S0,{children:S.jsxs(OT,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[S.jsx(vs,{mb:20,order:3,children:"Authentication"}),i?S.jsx(sn,{children:S.jsx(bt,{children:"Authentication is enabled."})}):S.jsxs(sn,{justify:"space-between",children:[S.jsx(Le,{children:S.jsx(bt,{children:"Authentication is currently disabled."})}),S.jsx(Mi,{label:"You can only enable auth when using Firebase",disabled:z,children:S.jsx(hn,{onClick:F=>z?I():F.preventDefault(),color:"green","data-disabled":z?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),i?S.jsxs(sn,{mt:40,direction:"column",children:[S.jsxs(sn,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[S.jsx(vs,{order:6,children:"Enabled Users"}),S.jsx(Pq,{style:{cursor:"pointer"},onClick:()=>f(!0)})]}),o.length>0?o.map(F=>{var H;return S.jsxs(sn,{justify:"space-between",mb:10,children:[S.jsx(bt,{children:F}),F===((H=e.user)==null?void 0:H.email)?S.jsx(bt,{color:"blue",size:"xs",children:"You"}):S.jsx(f1,{variant:"subtle",onClick:()=>L(F),children:S.jsx(T0e,{color:"red"})})]},F)}):null,S.jsx(sn,{direction:"row",justify:"left",children:S.jsx(hn,{onClick:()=>n(),mt:20,children:"Log out"})})]}):null]})}),S.jsx(ns,{opened:c,onClose:()=>f(!1),title:"Add Admin User",children:S.jsxs(Le,{component:"form",onSubmit:k.onSubmit(()=>D()),children:[S.jsx(Jm,{leftSection:S.jsx(mje,{}),placeholder:"User Gmail Account",...k.getInputProps("email")}),S.jsxs(sn,{mt:30,justify:"right",children:[S.jsx(hn,{mr:5,variant:"subtle",color:"red",onClick:()=>f(!1),children:"Cancel"}),S.jsx(hn,{type:"submit",children:"Save"})]})]})}),S.jsxs(ns,{opened:d,size:"large",onClose:()=>h(!1),title:S.jsxs(bt,{fw:700,children:["Remove",b,"?"]}),children:[S.jsxs(bt,{mt:40,children:["Are you sure you want to remove",S.jsx("b",{children:b})," ","as an administrator?"]}),S.jsxs(sn,{mt:40,justify:"right",children:[S.jsx(hn,{mr:5,variant:"subtle",color:"red",onClick:()=>h(!1),children:"Cancel"}),S.jsx(hn,{onClick:()=>M(),children:"Yes, I'm sure."})]})]}),S.jsxs(ns,{opened:p,size:"md",onClose:()=>g(!1),title:S.jsx(bt,{fw:700,children:"Enable Authentication?"}),children:[S.jsxs(bt,{mt:40,children:["User"," ",S.jsx("b",{children:E==null?void 0:E.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),S.jsxs(sn,{mt:40,justify:"right",children:[S.jsx(hn,{mr:5,variant:"subtle",color:"red",onClick:()=>g(!1),children:"Cancel"}),S.jsx(hn,{onClick:()=>R(E),children:"Yes, I'm sure."})]})]}),S.jsxs(ns,{opened:y,size:"md",onClose:()=>x(!1),title:S.jsx(bt,{fw:700,children:"An Error Occurred."}),children:[S.jsxs(bt,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",S.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),S.jsx(sn,{mt:40,justify:"right",children:S.jsx(hn,{mr:5,onClick:()=>x(!1),children:"Okay"})})]}),S.jsx(Oc,{visible:u})]})}class uBt extends Fve{constructor(){super("localStorage");Eu(this,"studyDatabase");Eu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await M_.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await u4(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var h;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await u4(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence(),d={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((h=this.studyDatabase)==null?void 0:h.setItem(this.currentParticipantId,d)),d}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await M_.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=a4();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),{currentRow:i,creationIndex:1e3-n.length}}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=M_.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=a4();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await M_.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await M_.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function lBt(){let e,t=!1;{const n=new gf;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new uBt;await n.connect(),e=n}return e}function SC({title:e}){const t=Bf();return O.useEffect(()=>{document.title=e},[t,e]),null}async function cBt(){const t=await(await fetch(`${Wo}global.json`)).text();return j9t(t)}function fBt(){const[e,t]=O.useState(null),[n,r]=O.useState({});O.useEffect(()=>{async function a(){e&&r(await V9t(e))}a()},[e]),O.useEffect(()=>{e||cBt().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=_s();O.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await lBt();s(u)}a()},[s,i]);const o=async a=>i instanceof gf?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?S.jsx(KBe,{basename:Wo,children:S.jsx(_nt,{children:S.jsx(cje,{children:S.jsxs(TBe,{children:[S.jsx(Fv,{path:"/",element:S.jsxs(S.Fragment,{children:[S.jsx(SC,{title:"ReVISit | Home"}),S.jsxs(ci,{padding:"md",header:{height:70},children:[S.jsx(AO,{studyIds:e.configsList}),S.jsx(Snt,{globalConfig:e,studyConfigs:n})]})]})}),S.jsx(Fv,{path:"/:studyId/*",element:S.jsxs(S.Fragment,{children:[S.jsx(SC,{title:"ReVISit | Study"}),S.jsx(H9t,{globalConfig:e})]})}),S.jsx(Fv,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:S.jsxs(S.Fragment,{children:[S.jsx(SC,{title:"ReVISit | Analysis"}),S.jsx(ehe,{paramToCheck:"studyId",paramCallback:o,children:S.jsx(ci,{padding:"md",header:{height:70},children:S.jsx(sBt,{globalConfig:e})})})]})}),S.jsx(Fv,{path:"/analysis/stats/:studyId",element:S.jsx(nPe,{to:"./table",replace:!0})}),S.jsx(Fv,{path:"/settings",element:S.jsxs(ehe,{children:[S.jsx(SC,{title:"ReVISit | Settings"}),S.jsxs(ci,{padding:"md",header:{height:70},children:[S.jsx(AO,{studyIds:e.configsList}),S.jsx(ci.Main,{children:S.jsx(aBt,{})})]})]})}),S.jsx(Fv,{path:"/login",element:S.jsxs(S.Fragment,{children:[S.jsx(SC,{title:"ReVISit | Login"}),S.jsxs(ci,{padding:"md",header:{height:70},children:[S.jsx(AO,{studyIds:e.configsList}),S.jsx(ci.Main,{children:S.jsx(oBt,{})})]})]})})]})})})}):null}c3e.createRoot(document.getElementById("root")).render(S.jsx(Mr.StrictMode,{children:S.jsx(N9e,{children:S.jsxs(Ehe,{children:[S.jsx(W0,{}),S.jsx(fBt,{})]})})}))});export default dBt();
