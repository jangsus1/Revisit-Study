var C8e=Object.defineProperty;var A8e=(e,t,n)=>t in e?C8e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var k8e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Vc=(e,t,n)=>A8e(e,typeof t!="symbol"?t+"":t,n);var uHt=k8e((vqt,Hee)=>{function R8e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function I8e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Z7={exports:{}},HC={},eF={exports:{}},qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wte;function P8e(){if(wte)return qr;wte=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(W){return W===null||typeof W!="object"?null:(W=f&&W[f]||W["@@iterator"],typeof W=="function"?W:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(W,te,q){this.props=W,this.context=te,this.refs=m,this.updater=q||h}g.prototype.isReactComponent={},g.prototype.setState=function(W,te){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,te,"setState")},g.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function b(){}b.prototype=g.prototype;function y(W,te,q){this.props=W,this.context=te,this.refs=m,this.updater=q||h}var x=y.prototype=new b;x.constructor=y,p(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,C={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(W,te,q){var J,oe={},de=null,ce=null;if(te!=null)for(J in te.ref!==void 0&&(ce=te.ref),te.key!==void 0&&(de=""+te.key),te)S.call(te,J)&&!R.hasOwnProperty(J)&&(oe[J]=te[J]);var pe=arguments.length-2;if(pe===1)oe.children=q;else if(1<pe){for(var Ee=Array(pe),Ae=0;Ae<pe;Ae++)Ee[Ae]=arguments[Ae+2];oe.children=Ee}if(W&&W.defaultProps)for(J in pe=W.defaultProps,pe)oe[J]===void 0&&(oe[J]=pe[J]);return{$$typeof:e,type:W,key:de,ref:ce,props:oe,_owner:C.current}}function O(W,te){return{$$typeof:e,type:W.type,key:te,ref:W.ref,props:W.props,_owner:W._owner}}function M(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function L(W){var te={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(q){return te[q]})}var V=/\/+/g;function D(W,te){return typeof W=="object"&&W!==null&&W.key!=null?L(""+W.key):te.toString(36)}function j(W,te,q,J,oe){var de=typeof W;(de==="undefined"||de==="boolean")&&(W=null);var ce=!1;if(W===null)ce=!0;else switch(de){case"string":case"number":ce=!0;break;case"object":switch(W.$$typeof){case e:case t:ce=!0}}if(ce)return ce=W,oe=oe(ce),W=J===""?"."+D(ce,0):J,w(oe)?(q="",W!=null&&(q=W.replace(V,"$&/")+"/"),j(oe,te,q,"",function(Ae){return Ae})):oe!=null&&(M(oe)&&(oe=O(oe,q+(!oe.key||ce&&ce.key===oe.key?"":(""+oe.key).replace(V,"$&/")+"/")+W)),te.push(oe)),1;if(ce=0,J=J===""?".":J+":",w(W))for(var pe=0;pe<W.length;pe++){de=W[pe];var Ee=J+D(de,pe);ce+=j(de,te,q,Ee,oe)}else if(Ee=d(W),typeof Ee=="function")for(W=Ee.call(W),pe=0;!(de=W.next()).done;)de=de.value,Ee=J+D(de,pe++),ce+=j(de,te,q,Ee,oe);else if(de==="object")throw te=String(W),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return ce}function z(W,te,q){if(W==null)return W;var J=[],oe=0;return j(W,J,"","",function(de){return te.call(q,de,oe++)}),J}function G(W){if(W._status===-1){var te=W._result;te=te(),te.then(function(q){(W._status===0||W._status===-1)&&(W._status=1,W._result=q)},function(q){(W._status===0||W._status===-1)&&(W._status=2,W._result=q)}),W._status===-1&&(W._status=0,W._result=te)}if(W._status===1)return W._result.default;throw W._result}var ee={current:null},ne={transition:null},ue={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:ne,ReactCurrentOwner:C};function X(){throw Error("act(...) is not supported in production builds of React.")}return qr.Children={map:z,forEach:function(W,te,q){z(W,function(){te.apply(this,arguments)},q)},count:function(W){var te=0;return z(W,function(){te++}),te},toArray:function(W){return z(W,function(te){return te})||[]},only:function(W){if(!M(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},qr.Component=g,qr.Fragment=n,qr.Profiler=i,qr.PureComponent=y,qr.StrictMode=r,qr.Suspense=u,qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,qr.act=X,qr.cloneElement=function(W,te,q){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var J=p({},W.props),oe=W.key,de=W.ref,ce=W._owner;if(te!=null){if(te.ref!==void 0&&(de=te.ref,ce=C.current),te.key!==void 0&&(oe=""+te.key),W.type&&W.type.defaultProps)var pe=W.type.defaultProps;for(Ee in te)S.call(te,Ee)&&!R.hasOwnProperty(Ee)&&(J[Ee]=te[Ee]===void 0&&pe!==void 0?pe[Ee]:te[Ee])}var Ee=arguments.length-2;if(Ee===1)J.children=q;else if(1<Ee){pe=Array(Ee);for(var Ae=0;Ae<Ee;Ae++)pe[Ae]=arguments[Ae+2];J.children=pe}return{$$typeof:e,type:W.type,key:oe,ref:de,props:J,_owner:ce}},qr.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:s,_context:W},W.Consumer=W},qr.createElement=I,qr.createFactory=function(W){var te=I.bind(null,W);return te.type=W,te},qr.createRef=function(){return{current:null}},qr.forwardRef=function(W){return{$$typeof:a,render:W}},qr.isValidElement=M,qr.lazy=function(W){return{$$typeof:c,_payload:{_status:-1,_result:W},_init:G}},qr.memo=function(W,te){return{$$typeof:l,type:W,compare:te===void 0?null:te}},qr.startTransition=function(W){var te=ne.transition;ne.transition={};try{W()}finally{ne.transition=te}},qr.unstable_act=X,qr.useCallback=function(W,te){return ee.current.useCallback(W,te)},qr.useContext=function(W){return ee.current.useContext(W)},qr.useDebugValue=function(){},qr.useDeferredValue=function(W){return ee.current.useDeferredValue(W)},qr.useEffect=function(W,te){return ee.current.useEffect(W,te)},qr.useId=function(){return ee.current.useId()},qr.useImperativeHandle=function(W,te,q){return ee.current.useImperativeHandle(W,te,q)},qr.useInsertionEffect=function(W,te){return ee.current.useInsertionEffect(W,te)},qr.useLayoutEffect=function(W,te){return ee.current.useLayoutEffect(W,te)},qr.useMemo=function(W,te){return ee.current.useMemo(W,te)},qr.useReducer=function(W,te,q){return ee.current.useReducer(W,te,q)},qr.useRef=function(W){return ee.current.useRef(W)},qr.useState=function(W){return ee.current.useState(W)},qr.useSyncExternalStore=function(W,te,q){return ee.current.useSyncExternalStore(W,te,q)},qr.useTransition=function(){return ee.current.useTransition()},qr.version="18.3.1",qr}var Ete;function A1(){return Ete||(Ete=1,eF.exports=P8e()),eF.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ste;function N8e(){if(Ste)return HC;Ste=1;var e=A1(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!s.hasOwnProperty(c)&&(f[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:i.current}}return HC.Fragment=n,HC.jsx=o,HC.jsxs=o,HC}var Tte;function D8e(){return Tte||(Tte=1,Z7.exports=N8e()),Z7.exports}var A=D8e(),B=A1();const sr=gc(B),O8e=R8e({__proto__:null,default:sr},[B]);var o6={},tF={exports:{}},$f={},nF={exports:{}},rF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cte;function M8e(){return Cte||(Cte=1,function(e){function t(ne,ue){var X=ne.length;ne.push(ue);e:for(;0<X;){var W=X-1>>>1,te=ne[W];if(0<i(te,ue))ne[W]=ue,ne[X]=te,X=W;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var ue=ne[0],X=ne.pop();if(X!==ue){ne[0]=X;e:for(var W=0,te=ne.length,q=te>>>1;W<q;){var J=2*(W+1)-1,oe=ne[J],de=J+1,ce=ne[de];if(0>i(oe,X))de<te&&0>i(ce,oe)?(ne[W]=ce,ne[de]=X,W=de):(ne[W]=oe,ne[J]=X,W=J);else if(de<te&&0>i(ce,X))ne[W]=ce,ne[de]=X,W=de;else break e}}return ue}function i(ne,ue){var X=ne.sortIndex-ue.sortIndex;return X!==0?X:ne.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(ne){for(var ue=n(l);ue!==null;){if(ue.callback===null)r(l);else if(ue.startTime<=ne)r(l),ue.sortIndex=ue.expirationTime,t(u,ue);else break;ue=n(l)}}function w(ne){if(m=!1,x(ne),!p)if(n(u)!==null)p=!0,G(S);else{var ue=n(l);ue!==null&&ee(w,ue.startTime-ne)}}function S(ne,ue){p=!1,m&&(m=!1,b(I),I=-1),h=!0;var X=d;try{for(x(ue),f=n(u);f!==null&&(!(f.expirationTime>ue)||ne&&!L());){var W=f.callback;if(typeof W=="function"){f.callback=null,d=f.priorityLevel;var te=W(f.expirationTime<=ue);ue=e.unstable_now(),typeof te=="function"?f.callback=te:f===n(u)&&r(u),x(ue)}else r(u);f=n(u)}if(f!==null)var q=!0;else{var J=n(l);J!==null&&ee(w,J.startTime-ue),q=!1}return q}finally{f=null,d=X,h=!1}}var C=!1,R=null,I=-1,O=5,M=-1;function L(){return!(e.unstable_now()-M<O)}function V(){if(R!==null){var ne=e.unstable_now();M=ne;var ue=!0;try{ue=R(!0,ne)}finally{ue?D():(C=!1,R=null)}}else C=!1}var D;if(typeof y=="function")D=function(){y(V)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,z=j.port2;j.port1.onmessage=V,D=function(){z.postMessage(null)}}else D=function(){g(V,0)};function G(ne){R=ne,C||(C=!0,D())}function ee(ne,ue){I=g(function(){ne(e.unstable_now())},ue)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,G(S))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(ne){switch(d){case 1:case 2:case 3:var ue=3;break;default:ue=d}var X=d;d=ue;try{return ne()}finally{d=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,ue){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var X=d;d=ne;try{return ue()}finally{d=X}},e.unstable_scheduleCallback=function(ne,ue,X){var W=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?W+X:W):X=W,ne){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,ne={id:c++,callback:ue,priorityLevel:ne,startTime:X,expirationTime:te,sortIndex:-1},X>W?(ne.sortIndex=X,t(l,ne),n(u)===null&&ne===n(l)&&(m?(b(I),I=-1):m=!0,ee(w,X-W))):(ne.sortIndex=te,t(u,ne),p||h||(p=!0,G(S))),ne},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(ne){var ue=d;return function(){var X=d;d=ue;try{return ne.apply(this,arguments)}finally{d=X}}}}(rF)),rF}var Ate;function uq(){return Ate||(Ate=1,nF.exports=M8e()),nF.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kte;function L8e(){if(kte)return $f;kte=1;var e=A1(),t=uq();function n(v){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+v,N=1;N<arguments.length;N++)_+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(v,_){o(v,_),o(v+"Capture",_)}function o(v,_){for(i[v]=_,v=0;v<_.length;v++)r.add(_[v])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(v){return u.call(f,v)?!0:u.call(c,v)?!1:l.test(v)?f[v]=!0:(c[v]=!0,!1)}function h(v,_,N,U){if(N!==null&&N.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return U?!1:N!==null?!N.acceptsBooleans:(v=v.toLowerCase().slice(0,5),v!=="data-"&&v!=="aria-");default:return!1}}function p(v,_,N,U){if(_===null||typeof _>"u"||h(v,_,N,U))return!0;if(U)return!1;if(N!==null)switch(N.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function m(v,_,N,U,Q,ie,he){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=U,this.attributeNamespace=Q,this.mustUseProperty=N,this.propertyName=v,this.type=_,this.sanitizeURL=ie,this.removeEmptyString=he}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(v){g[v]=new m(v,0,!1,v,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(v){var _=v[0];g[_]=new m(_,1,!1,v[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(v){g[v]=new m(v,2,!1,v.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(v){g[v]=new m(v,2,!1,v,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(v){g[v]=new m(v,3,!1,v.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(v){g[v]=new m(v,3,!0,v,null,!1,!1)}),["capture","download"].forEach(function(v){g[v]=new m(v,4,!1,v,null,!1,!1)}),["cols","rows","size","span"].forEach(function(v){g[v]=new m(v,6,!1,v,null,!1,!1)}),["rowSpan","start"].forEach(function(v){g[v]=new m(v,5,!1,v.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function y(v){return v[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(v){var _=v.replace(b,y);g[_]=new m(_,1,!1,v,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(v){var _=v.replace(b,y);g[_]=new m(_,1,!1,v,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(v){var _=v.replace(b,y);g[_]=new m(_,1,!1,v,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(v){g[v]=new m(v,1,!1,v.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(v){g[v]=new m(v,1,!1,v.toLowerCase(),null,!0,!0)});function x(v,_,N,U){var Q=g.hasOwnProperty(_)?g[_]:null;(Q!==null?Q.type!==0:U||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(p(_,N,Q,U)&&(N=null),U||Q===null?d(_)&&(N===null?v.removeAttribute(_):v.setAttribute(_,""+N)):Q.mustUseProperty?v[Q.propertyName]=N===null?Q.type===3?!1:"":N:(_=Q.attributeName,U=Q.attributeNamespace,N===null?v.removeAttribute(_):(Q=Q.type,N=Q===3||Q===4&&N===!0?"":""+N,U?v.setAttributeNS(U,_,N):v.setAttribute(_,N))))}var w=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),C=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),L=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ue(v){return v===null||typeof v!="object"?null:(v=ne&&v[ne]||v["@@iterator"],typeof v=="function"?v:null)}var X=Object.assign,W;function te(v){if(W===void 0)try{throw Error()}catch(N){var _=N.stack.trim().match(/\n( *(at )?)/);W=_&&_[1]||""}return`
`+W+v}var q=!1;function J(v,_){if(!v||q)return"";q=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(st){var U=st}Reflect.construct(v,[],_)}else{try{_.call()}catch(st){U=st}v.call(_.prototype)}else{try{throw Error()}catch(st){U=st}v()}}catch(st){if(st&&U&&typeof st.stack=="string"){for(var Q=st.stack.split(`
`),ie=U.stack.split(`
`),he=Q.length-1,ke=ie.length-1;1<=he&&0<=ke&&Q[he]!==ie[ke];)ke--;for(;1<=he&&0<=ke;he--,ke--)if(Q[he]!==ie[ke]){if(he!==1||ke!==1)do if(he--,ke--,0>ke||Q[he]!==ie[ke]){var Le=`
`+Q[he].replace(" at new "," at ");return v.displayName&&Le.includes("<anonymous>")&&(Le=Le.replace("<anonymous>",v.displayName)),Le}while(1<=he&&0<=ke);break}}}finally{q=!1,Error.prepareStackTrace=N}return(v=v?v.displayName||v.name:"")?te(v):""}function oe(v){switch(v.tag){case 5:return te(v.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return v=J(v.type,!1),v;case 11:return v=J(v.type.render,!1),v;case 1:return v=J(v.type,!0),v;default:return""}}function de(v){if(v==null)return null;if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v;switch(v){case R:return"Fragment";case C:return"Portal";case O:return"Profiler";case I:return"StrictMode";case D:return"Suspense";case j:return"SuspenseList"}if(typeof v=="object")switch(v.$$typeof){case L:return(v.displayName||"Context")+".Consumer";case M:return(v._context.displayName||"Context")+".Provider";case V:var _=v.render;return v=v.displayName,v||(v=_.displayName||_.name||"",v=v!==""?"ForwardRef("+v+")":"ForwardRef"),v;case z:return _=v.displayName||null,_!==null?_:de(v.type)||"Memo";case G:_=v._payload,v=v._init;try{return de(v(_))}catch{}}return null}function ce(v){var _=v.type;switch(v.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return v=_.render,v=v.displayName||v.name||"",_.displayName||(v!==""?"ForwardRef("+v+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(_);case 8:return _===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function pe(v){switch(typeof v){case"boolean":case"number":case"string":case"undefined":return v;case"object":return v;default:return""}}function Ee(v){var _=v.type;return(v=v.nodeName)&&v.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Ae(v){var _=Ee(v)?"checked":"value",N=Object.getOwnPropertyDescriptor(v.constructor.prototype,_),U=""+v[_];if(!v.hasOwnProperty(_)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var Q=N.get,ie=N.set;return Object.defineProperty(v,_,{configurable:!0,get:function(){return Q.call(this)},set:function(he){U=""+he,ie.call(this,he)}}),Object.defineProperty(v,_,{enumerable:N.enumerable}),{getValue:function(){return U},setValue:function(he){U=""+he},stopTracking:function(){v._valueTracker=null,delete v[_]}}}}function ge(v){v._valueTracker||(v._valueTracker=Ae(v))}function me(v){if(!v)return!1;var _=v._valueTracker;if(!_)return!0;var N=_.getValue(),U="";return v&&(U=Ee(v)?v.checked?"true":"false":v.value),v=U,v!==N?(_.setValue(v),!0):!1}function Oe(v){if(v=v||(typeof document<"u"?document:void 0),typeof v>"u")return null;try{return v.activeElement||v.body}catch{return v.body}}function Me(v,_){var N=_.checked;return X({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:N??v._wrapperState.initialChecked})}function Ye(v,_){var N=_.defaultValue==null?"":_.defaultValue,U=_.checked!=null?_.checked:_.defaultChecked;N=pe(_.value!=null?_.value:N),v._wrapperState={initialChecked:U,initialValue:N,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function lt(v,_){_=_.checked,_!=null&&x(v,"checked",_,!1)}function We(v,_){lt(v,_);var N=pe(_.value),U=_.type;if(N!=null)U==="number"?(N===0&&v.value===""||v.value!=N)&&(v.value=""+N):v.value!==""+N&&(v.value=""+N);else if(U==="submit"||U==="reset"){v.removeAttribute("value");return}_.hasOwnProperty("value")?yt(v,_.type,N):_.hasOwnProperty("defaultValue")&&yt(v,_.type,pe(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(v.defaultChecked=!!_.defaultChecked)}function nt(v,_,N){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var U=_.type;if(!(U!=="submit"&&U!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+v._wrapperState.initialValue,N||_===v.value||(v.value=_),v.defaultValue=_}N=v.name,N!==""&&(v.name=""),v.defaultChecked=!!v._wrapperState.initialChecked,N!==""&&(v.name=N)}function yt(v,_,N){(_!=="number"||Oe(v.ownerDocument)!==v)&&(N==null?v.defaultValue=""+v._wrapperState.initialValue:v.defaultValue!==""+N&&(v.defaultValue=""+N))}var _t=Array.isArray;function It(v,_,N,U){if(v=v.options,_){_={};for(var Q=0;Q<N.length;Q++)_["$"+N[Q]]=!0;for(N=0;N<v.length;N++)Q=_.hasOwnProperty("$"+v[N].value),v[N].selected!==Q&&(v[N].selected=Q),Q&&U&&(v[N].defaultSelected=!0)}else{for(N=""+pe(N),_=null,Q=0;Q<v.length;Q++){if(v[Q].value===N){v[Q].selected=!0,U&&(v[Q].defaultSelected=!0);return}_!==null||v[Q].disabled||(_=v[Q])}_!==null&&(_.selected=!0)}}function Et(v,_){if(_.dangerouslySetInnerHTML!=null)throw Error(n(91));return X({},_,{value:void 0,defaultValue:void 0,children:""+v._wrapperState.initialValue})}function Ke(v,_){var N=_.value;if(N==null){if(N=_.children,_=_.defaultValue,N!=null){if(_!=null)throw Error(n(92));if(_t(N)){if(1<N.length)throw Error(n(93));N=N[0]}_=N}_==null&&(_=""),N=_}v._wrapperState={initialValue:pe(N)}}function Lt(v,_){var N=pe(_.value),U=pe(_.defaultValue);N!=null&&(N=""+N,N!==v.value&&(v.value=N),_.defaultValue==null&&v.defaultValue!==N&&(v.defaultValue=N)),U!=null&&(v.defaultValue=""+U)}function sn(v){var _=v.textContent;_===v._wrapperState.initialValue&&_!==""&&_!==null&&(v.value=_)}function Fe(v){switch(v){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qe(v,_){return v==null||v==="http://www.w3.org/1999/xhtml"?Fe(_):v==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":v}var wt,Vt=function(v){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,N,U,Q){MSApp.execUnsafeLocalFunction(function(){return v(_,N,U,Q)})}:v}(function(v,_){if(v.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in v)v.innerHTML=_;else{for(wt=wt||document.createElement("div"),wt.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=wt.firstChild;v.firstChild;)v.removeChild(v.firstChild);for(;_.firstChild;)v.appendChild(_.firstChild)}});function Wt(v,_){if(_){var N=v.firstChild;if(N&&N===v.lastChild&&N.nodeType===3){N.nodeValue=_;return}}v.textContent=_}var bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dn=["Webkit","ms","Moz","O"];Object.keys(bn).forEach(function(v){Dn.forEach(function(_){_=_+v.charAt(0).toUpperCase()+v.substring(1),bn[_]=bn[v]})});function Zn(v,_,N){return _==null||typeof _=="boolean"||_===""?"":N||typeof _!="number"||_===0||bn.hasOwnProperty(v)&&bn[v]?(""+_).trim():_+"px"}function wr(v,_){v=v.style;for(var N in _)if(_.hasOwnProperty(N)){var U=N.indexOf("--")===0,Q=Zn(N,_[N],U);N==="float"&&(N="cssFloat"),U?v.setProperty(N,Q):v[N]=Q}}var Hn=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nr(v,_){if(_){if(Hn[v]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(n(137,v));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(n(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(n(61))}if(_.style!=null&&typeof _.style!="object")throw Error(n(62))}}function Ei(v,_){if(v.indexOf("-")===-1)return typeof _.is=="string";switch(v){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dr=null;function Co(v){return v=v.target||v.srcElement||window,v.correspondingUseElement&&(v=v.correspondingUseElement),v.nodeType===3?v.parentNode:v}var Ji=null,Di=null,Zi=null;function ei(v){if(v=Da(v)){if(typeof Ji!="function")throw Error(n(280));var _=v.stateNode;_&&(_=Oo(_),Ji(v.stateNode,v.type,_))}}function mo(v){Di?Zi?Zi.push(v):Zi=[v]:Di=v}function Gu(){if(Di){var v=Di,_=Zi;if(Zi=Di=null,ei(v),_)for(v=0;v<_.length;v++)ei(_[v])}}function Sa(v,_){return v(_)}function Ta(){}var Kr=!1;function Oi(v,_,N){if(Kr)return v(_,N);Kr=!0;try{return Sa(v,_,N)}finally{Kr=!1,(Di!==null||Zi!==null)&&(Ta(),Gu())}}function si(v,_){var N=v.stateNode;if(N===null)return null;var U=Oo(N);if(U===null)return null;N=U[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(U=!U.disabled)||(v=v.type,U=!(v==="button"||v==="input"||v==="select"||v==="textarea")),v=!U;break e;default:v=!1}if(v)return null;if(N&&typeof N!="function")throw Error(n(231,_,typeof N));return N}var Zs=!1;if(a)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){Zs=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{Zs=!1}function Hi(v,_,N,U,Q,ie,he,ke,Le){var st=Array.prototype.slice.call(arguments,3);try{_.apply(N,st)}catch(Ot){this.onError(Ot)}}var eo=!1,go=null,Jo=!1,Ca=null,pd={onError:function(v){eo=!0,go=v}};function Hr(v,_,N,U,Q,ie,he,ke,Le){eo=!1,go=null,Hi.apply(pd,arguments)}function Pl(v,_,N,U,Q,ie,he,ke,Le){if(Hr.apply(this,arguments),eo){if(eo){var st=go;eo=!1,go=null}else throw Error(n(198));Jo||(Jo=!0,Ca=st)}}function bs(v){var _=v,N=v;if(v.alternate)for(;_.return;)_=_.return;else{v=_;do _=v,_.flags&4098&&(N=_.return),v=_.return;while(v)}return _.tag===3?N:null}function Ka(v){if(v.tag===13){var _=v.memoizedState;if(_===null&&(v=v.alternate,v!==null&&(_=v.memoizedState)),_!==null)return _.dehydrated}return null}function Zo(v){if(bs(v)!==v)throw Error(n(188))}function yh(v){var _=v.alternate;if(!_){if(_=bs(v),_===null)throw Error(n(188));return _!==v?null:v}for(var N=v,U=_;;){var Q=N.return;if(Q===null)break;var ie=Q.alternate;if(ie===null){if(U=Q.return,U!==null){N=U;continue}break}if(Q.child===ie.child){for(ie=Q.child;ie;){if(ie===N)return Zo(Q),v;if(ie===U)return Zo(Q),_;ie=ie.sibling}throw Error(n(188))}if(N.return!==U.return)N=Q,U=ie;else{for(var he=!1,ke=Q.child;ke;){if(ke===N){he=!0,N=Q,U=ie;break}if(ke===U){he=!0,U=Q,N=ie;break}ke=ke.sibling}if(!he){for(ke=ie.child;ke;){if(ke===N){he=!0,N=ie,U=Q;break}if(ke===U){he=!0,U=ie,N=Q;break}ke=ke.sibling}if(!he)throw Error(n(189))}}if(N.alternate!==U)throw Error(n(190))}if(N.tag!==3)throw Error(n(188));return N.stateNode.current===N?v:_}function md(v){return v=yh(v),v!==null?mf(v):null}function mf(v){if(v.tag===5||v.tag===6)return v;for(v=v.child;v!==null;){var _=mf(v);if(_!==null)return _;v=v.sibling}return null}var gf=t.unstable_scheduleCallback,xc=t.unstable_cancelCallback,_c=t.unstable_shouldYield,wc=t.unstable_requestPaint,Er=t.unstable_now,Ec=t.unstable_getCurrentPriorityLevel,xs=t.unstable_ImmediatePriority,Xa=t.unstable_UserBlockingPriority,As=t.unstable_NormalPriority,Nl=t.unstable_LowPriority,Sc=t.unstable_IdlePriority,ea=null,qi=null;function ti(v){if(qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(ea,v,void 0,(v.current.flags&128)===128)}catch{}}var rr=Math.clz32?Math.clz32:Se,ve=Math.log,Ie=Math.LN2;function Se(v){return v>>>=0,v===0?32:31-(ve(v)/Ie|0)|0}var Be=64,ze=4194304;function De(v){switch(v&-v){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return v&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return v}}function ht(v,_){var N=v.pendingLanes;if(N===0)return 0;var U=0,Q=v.suspendedLanes,ie=v.pingedLanes,he=N&268435455;if(he!==0){var ke=he&~Q;ke!==0?U=De(ke):(ie&=he,ie!==0&&(U=De(ie)))}else he=N&~Q,he!==0?U=De(he):ie!==0&&(U=De(ie));if(U===0)return 0;if(_!==0&&_!==U&&!(_&Q)&&(Q=U&-U,ie=_&-_,Q>=ie||Q===16&&(ie&4194240)!==0))return _;if(U&4&&(U|=N&16),_=v.entangledLanes,_!==0)for(v=v.entanglements,_&=U;0<_;)N=31-rr(_),Q=1<<N,U|=v[N],_&=~Q;return U}function kt(v,_){switch(v){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nt(v,_){for(var N=v.suspendedLanes,U=v.pingedLanes,Q=v.expirationTimes,ie=v.pendingLanes;0<ie;){var he=31-rr(ie),ke=1<<he,Le=Q[he];Le===-1?(!(ke&N)||ke&U)&&(Q[he]=kt(ke,_)):Le<=_&&(v.expiredLanes|=ke),ie&=~ke}}function Rt(v){return v=v.pendingLanes&-1073741825,v!==0?v:v&1073741824?1073741824:0}function jt(){var v=Be;return Be<<=1,!(Be&4194240)&&(Be=64),v}function Zt(v){for(var _=[],N=0;31>N;N++)_.push(v);return _}function qn(v,_,N){v.pendingLanes|=_,_!==536870912&&(v.suspendedLanes=0,v.pingedLanes=0),v=v.eventTimes,_=31-rr(_),v[_]=N}function Sn(v,_){var N=v.pendingLanes&~_;v.pendingLanes=_,v.suspendedLanes=0,v.pingedLanes=0,v.expiredLanes&=_,v.mutableReadLanes&=_,v.entangledLanes&=_,_=v.entanglements;var U=v.eventTimes;for(v=v.expirationTimes;0<N;){var Q=31-rr(N),ie=1<<Q;_[Q]=0,U[Q]=-1,v[Q]=-1,N&=~ie}}function lr(v,_){var N=v.entangledLanes|=_;for(v=v.entanglements;N;){var U=31-rr(N),Q=1<<U;Q&_|v[U]&_&&(v[U]|=_),N&=~Q}}var _n=0;function br(v){return v&=-v,1<v?4<v?v&268435455?16:536870912:4:1}var ls,Ao,Dl,gd,Yu,yf=!1,to=[],Mi=null,ko=null,ta=null,cr=new Map,Aa=new Map,ka=[],bp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ol(v,_){switch(v){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":cr.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Aa.delete(_.pointerId)}}function ks(v,_,N,U,Q,ie){return v===null||v.nativeEvent!==ie?(v={blockedOn:_,domEventName:N,eventSystemFlags:U,nativeEvent:ie,targetContainers:[Q]},_!==null&&(_=Da(_),_!==null&&Ao(_)),v):(v.eventSystemFlags|=U,_=v.targetContainers,Q!==null&&_.indexOf(Q)===-1&&_.push(Q),v)}function Rs(v,_,N,U,Q){switch(_){case"focusin":return Mi=ks(Mi,v,_,N,U,Q),!0;case"dragenter":return ko=ks(ko,v,_,N,U,Q),!0;case"mouseover":return ta=ks(ta,v,_,N,U,Q),!0;case"pointerover":var ie=Q.pointerId;return cr.set(ie,ks(cr.get(ie)||null,v,_,N,U,Q)),!0;case"gotpointercapture":return ie=Q.pointerId,Aa.set(ie,ks(Aa.get(ie)||null,v,_,N,U,Q)),!0}return!1}function yd(v){var _=Nc(v.target);if(_!==null){var N=bs(_);if(N!==null){if(_=N.tag,_===13){if(_=Ka(N),_!==null){v.blockedOn=_,Yu(v.priority,function(){Dl(N)});return}}else if(_===3&&N.stateNode.current.memoizedState.isDehydrated){v.blockedOn=N.tag===3?N.stateNode.containerInfo:null;return}}}v.blockedOn=null}function Tc(v){if(v.blockedOn!==null)return!1;for(var _=v.targetContainers;0<_.length;){var N=Or(v.domEventName,v.eventSystemFlags,_[0],v.nativeEvent);if(N===null){N=v.nativeEvent;var U=new N.constructor(N.type,N);Dr=U,N.target.dispatchEvent(U),Dr=null}else return _=Da(N),_!==null&&Ao(_),v.blockedOn=N,!1;_.shift()}return!0}function Ml(v,_,N){Tc(v)&&N.delete(_)}function X0(){yf=!1,Mi!==null&&Tc(Mi)&&(Mi=null),ko!==null&&Tc(ko)&&(ko=null),ta!==null&&Tc(ta)&&(ta=null),cr.forEach(Ml),Aa.forEach(Ml)}function xr(v,_){v.blockedOn===_&&(v.blockedOn=null,yf||(yf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,X0)))}function Gn(v){function _(Q){return xr(Q,v)}if(0<to.length){xr(to[0],v);for(var N=1;N<to.length;N++){var U=to[N];U.blockedOn===v&&(U.blockedOn=null)}}for(Mi!==null&&xr(Mi,v),ko!==null&&xr(ko,v),ta!==null&&xr(ta,v),cr.forEach(_),Aa.forEach(_),N=0;N<ka.length;N++)U=ka[N],U.blockedOn===v&&(U.blockedOn=null);for(;0<ka.length&&(N=ka[0],N.blockedOn===null);)yd(N),N.blockedOn===null&&ka.shift()}var Cc=w.ReactCurrentBatchConfig,Ce=!0;function Ne(v,_,N,U){var Q=_n,ie=Cc.transition;Cc.transition=null;try{_n=1,hn(v,_,N,U)}finally{_n=Q,Cc.transition=ie}}function rt(v,_,N,U){var Q=_n,ie=Cc.transition;Cc.transition=null;try{_n=4,hn(v,_,N,U)}finally{_n=Q,Cc.transition=ie}}function hn(v,_,N,U){if(Ce){var Q=Or(v,_,N,U);if(Q===null)Y1(v,_,U,ir,N),Ol(v,U);else if(Rs(Q,v,_,N,U))U.stopPropagation();else if(Ol(v,U),_&4&&-1<bp.indexOf(v)){for(;Q!==null;){var ie=Da(Q);if(ie!==null&&ls(ie),ie=Or(v,_,N,U),ie===null&&Y1(v,_,U,ir,N),ie===Q)break;Q=ie}Q!==null&&U.stopPropagation()}else Y1(v,_,U,null,N)}}var ir=null;function Or(v,_,N,U){if(ir=null,v=Co(U),v=Nc(v),v!==null)if(_=bs(v),_===null)v=null;else if(N=_.tag,N===13){if(v=Ka(_),v!==null)return v;v=null}else if(N===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;v=null}else _!==v&&(v=null);return ir=v,null}function gi(v){switch(v){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ec()){case xs:return 1;case Xa:return 4;case As:case Nl:return 16;case Sc:return 536870912;default:return 16}default:return 16}}var dn=null,Tr=null,Ir=null;function _s(){if(Ir)return Ir;var v,_=Tr,N=_.length,U,Q="value"in dn?dn.value:dn.textContent,ie=Q.length;for(v=0;v<N&&_[v]===Q[v];v++);var he=N-v;for(U=1;U<=he&&_[N-U]===Q[ie-U];U++);return Ir=Q.slice(v,1<U?1-U:void 0)}function na(v){var _=v.keyCode;return"charCode"in v?(v=v.charCode,v===0&&_===13&&(v=13)):v=_,v===10&&(v=13),32<=v||v===13?v:0}function Mr(){return!0}function js(){return!1}function Li(v){function _(N,U,Q,ie,he){this._reactName=N,this._targetInst=Q,this.type=U,this.nativeEvent=ie,this.target=he,this.currentTarget=null;for(var ke in v)v.hasOwnProperty(ke)&&(N=v[ke],this[ke]=N?N(ie):ie[ke]);return this.isDefaultPrevented=(ie.defaultPrevented!=null?ie.defaultPrevented:ie.returnValue===!1)?Mr:js,this.isPropagationStopped=js,this}return X(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var N=this.nativeEvent;N&&(N.preventDefault?N.preventDefault():typeof N.returnValue!="unknown"&&(N.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var N=this.nativeEvent;N&&(N.stopPropagation?N.stopPropagation():typeof N.cancelBubble!="unknown"&&(N.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),_}var no={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(v){return v.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=Li(no),ra=X({},no,{view:0,detail:0}),$g=Li(ra),ro,Ac,oi,Ro=X({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_u,button:0,buttons:0,relatedTarget:function(v){return v.relatedTarget===void 0?v.fromElement===v.srcElement?v.toElement:v.fromElement:v.relatedTarget},movementX:function(v){return"movementX"in v?v.movementX:(v!==oi&&(oi&&v.type==="mousemove"?(ro=v.screenX-oi.screenX,Ac=v.screenY-oi.screenY):Ac=ro=0,oi=v),ro)},movementY:function(v){return"movementY"in v?v.movementY:Ac}}),yi=Li(Ro),Ra=X({},Ro,{dataTransfer:0}),ia=Li(Ra),vd=X({},ra,{relatedTarget:0}),vi=Li(vd),Ku=X({},no,{animationName:0,elapsedTime:0,pseudoElement:0}),Xu=Li(Ku),Bg=X({},no,{clipboardData:function(v){return"clipboardData"in v?v.clipboardData:window.clipboardData}}),bd=Li(Bg),jg=X({},no,{data:0}),vf=Li(jg),vh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ia={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xd(v){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(v):(v=bf[v])?!!_[v]:!1}function _u(){return xd}var F=X({},ra,{key:function(v){if(v.key){var _=vh[v.key]||v.key;if(_!=="Unidentified")return _}return v.type==="keypress"?(v=na(v),v===13?"Enter":String.fromCharCode(v)):v.type==="keydown"||v.type==="keyup"?Ia[v.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_u,charCode:function(v){return v.type==="keypress"?na(v):0},keyCode:function(v){return v.type==="keydown"||v.type==="keyup"?v.keyCode:0},which:function(v){return v.type==="keypress"?na(v):v.type==="keydown"||v.type==="keyup"?v.keyCode:0}}),re=Li(F),le=X({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),be=Li(le),Xe=X({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_u}),ut=Li(Xe),Xt=X({},no,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lr=Li(Xt),Us=X({},Ro,{deltaX:function(v){return"deltaX"in v?v.deltaX:"wheelDeltaX"in v?-v.wheelDeltaX:0},deltaY:function(v){return"deltaY"in v?v.deltaY:"wheelDeltaY"in v?-v.wheelDeltaY:"wheelDelta"in v?-v.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=Li(Us),ai=[9,13,27,32],cs=a&&"CompositionEvent"in window,Io=null;a&&"documentMode"in document&&(Io=document.documentMode);var yo=a&&"TextEvent"in window&&!Io,vo=a&&(!cs||Io&&8<Io&&11>=Io),Ll=" ",H1=!1;function mx(v,_){switch(v){case"keyup":return ai.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kc(v){return v=v.detail,typeof v=="object"&&"data"in v?v.data:null}var Qu=!1;function bh(v,_){switch(v){case"compositionend":return kc(_);case"keypress":return _.which!==32?null:(H1=!0,Ll);case"textInput":return v=_.data,v===Ll&&H1?null:v;default:return null}}function c2(v,_){if(Qu)return v==="compositionend"||!cs&&mx(v,_)?(v=_s(),Ir=Tr=dn=null,Qu=!1,v):null;switch(v){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return vo&&_.locale!=="ko"?null:_.data;default:return null}}var _d={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rc(v){var _=v&&v.nodeName&&v.nodeName.toLowerCase();return _==="input"?!!_d[v.type]:_==="textarea"}function Q0(v,_,N,U){mo(U),_=K1(_,"onChange"),0<_.length&&(N=new Qa("onChange","change",null,N,U),v.push({event:N,listeners:_}))}var Ju=null,Ic=null;function f2(v){xx(v,0)}function xh(v){var _=Mn(v);if(me(_))return v}function Fl(v,_){if(v==="change")return _}var Pc=!1;if(a){var Po;if(a){var Zu="oninput"in document;if(!Zu){var q1=document.createElement("div");q1.setAttribute("oninput","return;"),Zu=typeof q1.oninput=="function"}Po=Zu}else Po=!1;Pc=Po&&(!document.documentMode||9<document.documentMode)}function xp(){Ju&&(Ju.detachEvent("onpropertychange",gx),Ic=Ju=null)}function gx(v){if(v.propertyName==="value"&&xh(Ic)){var _=[];Q0(_,Ic,v,Co(v)),Oi(f2,_)}}function yx(v,_,N){v==="focusin"?(xp(),Ju=_,Ic=N,Ju.attachEvent("onpropertychange",gx)):v==="focusout"&&xp()}function ws(v){if(v==="selectionchange"||v==="keyup"||v==="keydown")return xh(Ic)}function wd(v,_){if(v==="click")return xh(_)}function Ve(v,_){if(v==="input"||v==="change")return xh(_)}function mt(v,_){return v===_&&(v!==0||1/v===1/_)||v!==v&&_!==_}var et=typeof Object.is=="function"?Object.is:mt;function on(v,_){if(et(v,_))return!0;if(typeof v!="object"||v===null||typeof _!="object"||_===null)return!1;var N=Object.keys(v),U=Object.keys(_);if(N.length!==U.length)return!1;for(U=0;U<N.length;U++){var Q=N[U];if(!u.call(_,Q)||!et(v[Q],_[Q]))return!1}return!0}function Bn(v){for(;v&&v.firstChild;)v=v.firstChild;return v}function On(v,_){var N=Bn(v);v=0;for(var U;N;){if(N.nodeType===3){if(U=v+N.textContent.length,v<=_&&U>=_)return{node:N,offset:_-v};v=U}e:{for(;N;){if(N.nextSibling){N=N.nextSibling;break e}N=N.parentNode}N=void 0}N=Bn(N)}}function Cr(v,_){return v&&_?v===_?!0:v&&v.nodeType===3?!1:_&&_.nodeType===3?Cr(v,_.parentNode):"contains"in v?v.contains(_):v.compareDocumentPosition?!!(v.compareDocumentPosition(_)&16):!1:!1}function er(){for(var v=window,_=Oe();_ instanceof v.HTMLIFrameElement;){try{var N=typeof _.contentWindow.location.href=="string"}catch{N=!1}if(N)v=_.contentWindow;else break;_=Oe(v.document)}return _}function _h(v){var _=v&&v.nodeName&&v.nodeName.toLowerCase();return _&&(_==="input"&&(v.type==="text"||v.type==="search"||v.type==="tel"||v.type==="url"||v.type==="password")||_==="textarea"||v.contentEditable==="true")}function Ug(v){var _=er(),N=v.focusedElem,U=v.selectionRange;if(_!==N&&N&&N.ownerDocument&&Cr(N.ownerDocument.documentElement,N)){if(U!==null&&_h(N)){if(_=U.start,v=U.end,v===void 0&&(v=_),"selectionStart"in N)N.selectionStart=_,N.selectionEnd=Math.min(v,N.value.length);else if(v=(_=N.ownerDocument||document)&&_.defaultView||window,v.getSelection){v=v.getSelection();var Q=N.textContent.length,ie=Math.min(U.start,Q);U=U.end===void 0?ie:Math.min(U.end,Q),!v.extend&&ie>U&&(Q=U,U=ie,ie=Q),Q=On(N,ie);var he=On(N,U);Q&&he&&(v.rangeCount!==1||v.anchorNode!==Q.node||v.anchorOffset!==Q.offset||v.focusNode!==he.node||v.focusOffset!==he.offset)&&(_=_.createRange(),_.setStart(Q.node,Q.offset),v.removeAllRanges(),ie>U?(v.addRange(_),v.extend(he.node,he.offset)):(_.setEnd(he.node,he.offset),v.addRange(_)))}}for(_=[],v=N;v=v.parentNode;)v.nodeType===1&&_.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<_.length;N++)v=_[N],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}var Pa=a&&"documentMode"in document&&11>=document.documentMode,Ed=null,No=null,$l=null,wh=!1;function _p(v,_,N){var U=N.window===N?N.document:N.nodeType===9?N:N.ownerDocument;wh||Ed==null||Ed!==Oe(U)||(U=Ed,"selectionStart"in U&&_h(U)?U={start:U.selectionStart,end:U.selectionEnd}:(U=(U.ownerDocument&&U.ownerDocument.defaultView||window).getSelection(),U={anchorNode:U.anchorNode,anchorOffset:U.anchorOffset,focusNode:U.focusNode,focusOffset:U.focusOffset}),$l&&on($l,U)||($l=U,U=K1(No,"onSelect"),0<U.length&&(_=new Qa("onSelect","select",null,_,N),v.push({event:_,listeners:U}),_.target=Ed)))}function mr(v,_){var N={};return N[v.toLowerCase()]=_.toLowerCase(),N["Webkit"+v]="webkit"+_,N["Moz"+v]="moz"+_,N}var sa={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionend:mr("Transition","TransitionEnd")},Eh={},wp={};a&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function J0(v){if(Eh[v])return Eh[v];if(!sa[v])return v;var _=sa[v],N;for(N in _)if(_.hasOwnProperty(N)&&N in wp)return Eh[v]=_[N];return v}var vx=J0("animationend"),bx=J0("animationiteration"),Z0=J0("animationstart"),xf=J0("transitionend"),em=new Map,W1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bl(v,_){em.set(v,_),s(_,[v])}for(var zg=0;zg<W1.length;zg++){var Sh=W1[zg],Vg=Sh.toLowerCase(),Hg=Sh[0].toUpperCase()+Sh.slice(1);Bl(Vg,"on"+Hg)}Bl(vx,"onAnimationEnd"),Bl(bx,"onAnimationIteration"),Bl(Z0,"onAnimationStart"),Bl("dblclick","onDoubleClick"),Bl("focusin","onFocus"),Bl("focusout","onBlur"),Bl(xf,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Th=new Set("cancel close invalid load scroll toggle".split(" ").concat(jl));function Ep(v,_,N){var U=v.type||"unknown-event";v.currentTarget=N,Pl(U,_,void 0,v),v.currentTarget=null}function xx(v,_){_=(_&4)!==0;for(var N=0;N<v.length;N++){var U=v[N],Q=U.event;U=U.listeners;e:{var ie=void 0;if(_)for(var he=U.length-1;0<=he;he--){var ke=U[he],Le=ke.instance,st=ke.currentTarget;if(ke=ke.listener,Le!==ie&&Q.isPropagationStopped())break e;Ep(Q,ke,st),ie=Le}else for(he=0;he<U.length;he++){if(ke=U[he],Le=ke.instance,st=ke.currentTarget,ke=ke.listener,Le!==ie&&Q.isPropagationStopped())break e;Ep(Q,ke,st),ie=Le}}}if(Jo)throw v=Ca,Jo=!1,Ca=null,v}function Wi(v,_){var N=_[Kg];N===void 0&&(N=_[Kg]=new Set);var U=v+"__bubble";N.has(U)||(qg(_,v,2,!1),N.add(U))}function G1(v,_,N){var U=0;_&&(U|=4),qg(N,v,U,_)}var Ch="_reactListening"+Math.random().toString(36).slice(2);function _f(v){if(!v[Ch]){v[Ch]=!0,r.forEach(function(N){N!=="selectionchange"&&(Th.has(N)||G1(N,!1,v),G1(N,!0,v))});var _=v.nodeType===9?v:v.ownerDocument;_===null||_[Ch]||(_[Ch]=!0,G1("selectionchange",!1,_))}}function qg(v,_,N,U){switch(gi(_)){case 1:var Q=Ne;break;case 4:Q=rt;break;default:Q=hn}N=Q.bind(null,_,N,v),Q=void 0,!Zs||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(Q=!0),U?Q!==void 0?v.addEventListener(_,N,{capture:!0,passive:Q}):v.addEventListener(_,N,!0):Q!==void 0?v.addEventListener(_,N,{passive:Q}):v.addEventListener(_,N,!1)}function Y1(v,_,N,U,Q){var ie=U;if(!(_&1)&&!(_&2)&&U!==null)e:for(;;){if(U===null)return;var he=U.tag;if(he===3||he===4){var ke=U.stateNode.containerInfo;if(ke===Q||ke.nodeType===8&&ke.parentNode===Q)break;if(he===4)for(he=U.return;he!==null;){var Le=he.tag;if((Le===3||Le===4)&&(Le=he.stateNode.containerInfo,Le===Q||Le.nodeType===8&&Le.parentNode===Q))return;he=he.return}for(;ke!==null;){if(he=Nc(ke),he===null)return;if(Le=he.tag,Le===5||Le===6){U=ie=he;continue e}ke=ke.parentNode}}U=U.return}Oi(function(){var st=ie,Ot=Co(N),Ut=[];e:{var Dt=em.get(v);if(Dt!==void 0){var pn=Qa,En=v;switch(v){case"keypress":if(na(N)===0)break e;case"keydown":case"keyup":pn=re;break;case"focusin":En="focus",pn=vi;break;case"focusout":En="blur",pn=vi;break;case"beforeblur":case"afterblur":pn=vi;break;case"click":if(N.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pn=yi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pn=ia;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pn=ut;break;case vx:case bx:case Z0:pn=Xu;break;case xf:pn=Lr;break;case"scroll":pn=$g;break;case"wheel":pn=Pr;break;case"copy":case"cut":case"paste":pn=bd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pn=be}var Tn=(_&4)!==0,oo=!Tn&&v==="scroll",Je=Tn?Dt!==null?Dt+"Capture":null:Dt;Tn=[];for(var Ue=st,tt;Ue!==null;){tt=Ue;var Yt=tt.stateNode;if(tt.tag===5&&Yt!==null&&(tt=Yt,Je!==null&&(Yt=si(Ue,Je),Yt!=null&&Tn.push(Sp(Ue,Yt,tt)))),oo)break;Ue=Ue.return}0<Tn.length&&(Dt=new pn(Dt,En,null,N,Ot),Ut.push({event:Dt,listeners:Tn}))}}if(!(_&7)){e:{if(Dt=v==="mouseover"||v==="pointerover",pn=v==="mouseout"||v==="pointerout",Dt&&N!==Dr&&(En=N.relatedTarget||N.fromElement)&&(Nc(En)||En[wu]))break e;if((pn||Dt)&&(Dt=Ot.window===Ot?Ot:(Dt=Ot.ownerDocument)?Dt.defaultView||Dt.parentWindow:window,pn?(En=N.relatedTarget||N.toElement,pn=st,En=En?Nc(En):null,En!==null&&(oo=bs(En),En!==oo||En.tag!==5&&En.tag!==6)&&(En=null)):(pn=null,En=st),pn!==En)){if(Tn=yi,Yt="onMouseLeave",Je="onMouseEnter",Ue="mouse",(v==="pointerout"||v==="pointerover")&&(Tn=be,Yt="onPointerLeave",Je="onPointerEnter",Ue="pointer"),oo=pn==null?Dt:Mn(pn),tt=En==null?Dt:Mn(En),Dt=new Tn(Yt,Ue+"leave",pn,N,Ot),Dt.target=oo,Dt.relatedTarget=tt,Yt=null,Nc(Ot)===st&&(Tn=new Tn(Je,Ue+"enter",En,N,Ot),Tn.target=tt,Tn.relatedTarget=oo,Yt=Tn),oo=Yt,pn&&En)t:{for(Tn=pn,Je=En,Ue=0,tt=Tn;tt;tt=Tp(tt))Ue++;for(tt=0,Yt=Je;Yt;Yt=Tp(Yt))tt++;for(;0<Ue-tt;)Tn=Tp(Tn),Ue--;for(;0<tt-Ue;)Je=Tp(Je),tt--;for(;Ue--;){if(Tn===Je||Je!==null&&Tn===Je.alternate)break t;Tn=Tp(Tn),Je=Tp(Je)}Tn=null}else Tn=null;pn!==null&&io(Ut,Dt,pn,Tn,!1),En!==null&&oo!==null&&io(Ut,oo,En,Tn,!0)}}e:{if(Dt=st?Mn(st):window,pn=Dt.nodeName&&Dt.nodeName.toLowerCase(),pn==="select"||pn==="input"&&Dt.type==="file")var Cn=Fl;else if(Rc(Dt))if(Pc)Cn=Ve;else{Cn=ws;var jn=yx}else(pn=Dt.nodeName)&&pn.toLowerCase()==="input"&&(Dt.type==="checkbox"||Dt.type==="radio")&&(Cn=wd);if(Cn&&(Cn=Cn(v,st))){Q0(Ut,Cn,N,Ot);break e}jn&&jn(v,Dt,st),v==="focusout"&&(jn=Dt._wrapperState)&&jn.controlled&&Dt.type==="number"&&yt(Dt,"number",Dt.value)}switch(jn=st?Mn(st):window,v){case"focusin":(Rc(jn)||jn.contentEditable==="true")&&(Ed=jn,No=st,$l=null);break;case"focusout":$l=No=Ed=null;break;case"mousedown":wh=!0;break;case"contextmenu":case"mouseup":case"dragend":wh=!1,_p(Ut,N,Ot);break;case"selectionchange":if(Pa)break;case"keydown":case"keyup":_p(Ut,N,Ot)}var Un;if(cs)e:{switch(v){case"compositionstart":var Xn="onCompositionStart";break e;case"compositionend":Xn="onCompositionEnd";break e;case"compositionupdate":Xn="onCompositionUpdate";break e}Xn=void 0}else Qu?mx(v,N)&&(Xn="onCompositionEnd"):v==="keydown"&&N.keyCode===229&&(Xn="onCompositionStart");Xn&&(vo&&N.locale!=="ko"&&(Qu||Xn!=="onCompositionStart"?Xn==="onCompositionEnd"&&Qu&&(Un=_s()):(dn=Ot,Tr="value"in dn?dn.value:dn.textContent,Qu=!0)),jn=K1(st,Xn),0<jn.length&&(Xn=new vf(Xn,v,null,N,Ot),Ut.push({event:Xn,listeners:jn}),Un?Xn.data=Un:(Un=kc(N),Un!==null&&(Xn.data=Un)))),(Un=yo?bh(v,N):c2(v,N))&&(st=K1(st,"onBeforeInput"),0<st.length&&(Ot=new vf("onBeforeInput","beforeinput",null,N,Ot),Ut.push({event:Ot,listeners:st}),Ot.data=Un))}xx(Ut,_)})}function Sp(v,_,N){return{instance:v,listener:_,currentTarget:N}}function K1(v,_){for(var N=_+"Capture",U=[];v!==null;){var Q=v,ie=Q.stateNode;Q.tag===5&&ie!==null&&(Q=ie,ie=si(v,N),ie!=null&&U.unshift(Sp(v,ie,Q)),ie=si(v,_),ie!=null&&U.push(Sp(v,ie,Q))),v=v.return}return U}function Tp(v){if(v===null)return null;do v=v.return;while(v&&v.tag!==5);return v||null}function io(v,_,N,U,Q){for(var ie=_._reactName,he=[];N!==null&&N!==U;){var ke=N,Le=ke.alternate,st=ke.stateNode;if(Le!==null&&Le===U)break;ke.tag===5&&st!==null&&(ke=st,Q?(Le=si(N,ie),Le!=null&&he.unshift(Sp(N,Le,ke))):Q||(Le=si(N,ie),Le!=null&&he.push(Sp(N,Le,ke)))),N=N.return}he.length!==0&&v.push({event:_,listeners:he})}var Na=/\r\n?/g,d2=/\u0000|\uFFFD/g;function _x(v){return(typeof v=="string"?v:""+v).replace(Na,`
`).replace(d2,"")}function tm(v,_,N){if(_=_x(_),_x(v)!==_&&N)throw Error(n(425))}function Cp(){}var Wg=null,Ap=null;function Gg(v,_){return v==="textarea"||v==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Do=typeof setTimeout=="function"?setTimeout:void 0,kp=typeof clearTimeout=="function"?clearTimeout:void 0,Sd=typeof Promise=="function"?Promise:void 0,Yg=typeof queueMicrotask=="function"?queueMicrotask:typeof Sd<"u"?function(v){return Sd.resolve(null).then(v).catch(Rp)}:Do;function Rp(v){setTimeout(function(){throw v})}function X1(v,_){var N=_,U=0;do{var Q=N.nextSibling;if(v.removeChild(N),Q&&Q.nodeType===8)if(N=Q.data,N==="/$"){if(U===0){v.removeChild(Q),Gn(_);return}U--}else N!=="$"&&N!=="$?"&&N!=="$!"||U++;N=Q}while(N);Gn(_)}function wf(v){for(;v!=null;v=v.nextSibling){var _=v.nodeType;if(_===1||_===3)break;if(_===8){if(_=v.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return v}function Ip(v){v=v.previousSibling;for(var _=0;v;){if(v.nodeType===8){var N=v.data;if(N==="$"||N==="$!"||N==="$?"){if(_===0)return v;_--}else N==="/$"&&_++}v=v.previousSibling}return null}var Ah=Math.random().toString(36).slice(2),Ul="__reactFiber$"+Ah,kh="__reactProps$"+Ah,wu="__reactContainer$"+Ah,Kg="__reactEvents$"+Ah,ye="__reactListeners$"+Ah,Pp="__reactHandles$"+Ah;function Nc(v){var _=v[Ul];if(_)return _;for(var N=v.parentNode;N;){if(_=N[wu]||N[Ul]){if(N=_.alternate,_.child!==null||N!==null&&N.child!==null)for(v=Ip(v);v!==null;){if(N=v[Ul])return N;v=Ip(v)}return _}v=N,N=v.parentNode}return null}function Da(v){return v=v[Ul]||v[wu],!v||v.tag!==5&&v.tag!==6&&v.tag!==13&&v.tag!==3?null:v}function Mn(v){if(v.tag===5||v.tag===6)return v.stateNode;throw Error(n(33))}function Oo(v){return v[kh]||null}var Q1=[],Np=-1;function Ja(v){return{current:v}}function Gi(v){0>Np||(v.current=Q1[Np],Q1[Np]=null,Np--)}function Fi(v,_){Np++,Q1[Np]=v.current,v.current=_}var Ef={},oa=Ja(Ef),Oa=Ja(!1),Ma=Ef;function Dp(v,_){var N=v.type.contextTypes;if(!N)return Ef;var U=v.stateNode;if(U&&U.__reactInternalMemoizedUnmaskedChildContext===_)return U.__reactInternalMemoizedMaskedChildContext;var Q={},ie;for(ie in N)Q[ie]=_[ie];return U&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=_,v.__reactInternalMemoizedMaskedChildContext=Q),Q}function La(v){return v=v.childContextTypes,v!=null}function nm(){Gi(Oa),Gi(oa)}function wx(v,_,N){if(oa.current!==Ef)throw Error(n(168));Fi(oa,_),Fi(Oa,N)}function J1(v,_,N){var U=v.stateNode;if(_=_.childContextTypes,typeof U.getChildContext!="function")return N;U=U.getChildContext();for(var Q in U)if(!(Q in _))throw Error(n(108,ce(v)||"Unknown",Q));return X({},N,U)}function Za(v){return v=(v=v.stateNode)&&v.__reactInternalMemoizedMergedChildContext||Ef,Ma=oa.current,Fi(oa,v),Fi(Oa,Oa.current),!0}function h2(v,_,N){var U=v.stateNode;if(!U)throw Error(n(169));N?(v=J1(v,_,Ma),U.__reactInternalMemoizedMergedChildContext=v,Gi(Oa),Gi(oa),Fi(oa,v)):Gi(Oa),Fi(Oa,N)}var Sf=null,rm=!1,Z1=!1;function Xg(v){Sf===null?Sf=[v]:Sf.push(v)}function eu(v){rm=!0,Xg(v)}function Rh(){if(!Z1&&Sf!==null){Z1=!0;var v=0,_=_n;try{var N=Sf;for(_n=1;v<N.length;v++){var U=N[v];do U=U(!0);while(U!==null)}Sf=null,rm=!1}catch(Q){throw Sf!==null&&(Sf=Sf.slice(v+1)),gf(xs,Rh),Q}finally{_n=_,Z1=!1}}return null}var tu=[],aa=0,Ih=null,Ph=0,nu=[],ru=0,Nh=null,Eu=1,es="";function Op(v,_){tu[aa++]=Ph,tu[aa++]=Ih,Ih=v,Ph=_}function p2(v,_,N){nu[ru++]=Eu,nu[ru++]=es,nu[ru++]=Nh,Nh=v;var U=Eu;v=es;var Q=32-rr(U)-1;U&=~(1<<Q),N+=1;var ie=32-rr(_)+Q;if(30<ie){var he=Q-Q%5;ie=(U&(1<<he)-1).toString(32),U>>=he,Q-=he,Eu=1<<32-rr(_)+Q|N<<Q|U,es=ie+v}else Eu=1<<ie|N<<Q|U,es=v}function Dh(v){v.return!==null&&(Op(v,1),p2(v,1,0))}function Is(v){for(;v===Ih;)Ih=tu[--aa],tu[aa]=null,Ph=tu[--aa],tu[aa]=null;for(;v===Nh;)Nh=nu[--ru],nu[ru]=null,es=nu[--ru],nu[ru]=null,Eu=nu[--ru],nu[ru]=null}var Fa=null,nn=null,bi=!1,el=null;function Dc(v,_){var N=Of(5,null,null,0);N.elementType="DELETED",N.stateNode=_,N.return=v,_=v.deletions,_===null?(v.deletions=[N],v.flags|=16):_.push(N)}function ev(v,_){switch(v.tag){case 5:var N=v.type;return _=_.nodeType!==1||N.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(v.stateNode=_,Fa=v,nn=wf(_.firstChild),!0):!1;case 6:return _=v.pendingProps===""||_.nodeType!==3?null:_,_!==null?(v.stateNode=_,Fa=v,nn=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(N=Nh!==null?{id:Eu,overflow:es}:null,v.memoizedState={dehydrated:_,treeContext:N,retryLane:1073741824},N=Of(18,null,null,0),N.stateNode=_,N.return=v,v.child=N,Fa=v,nn=null,!0):!1;default:return!1}}function tl(v){return(v.mode&1)!==0&&(v.flags&128)===0}function ua(v){if(bi){var _=nn;if(_){var N=_;if(!ev(v,_)){if(tl(v))throw Error(n(418));_=wf(N.nextSibling);var U=Fa;_&&ev(v,_)?Dc(U,N):(v.flags=v.flags&-4097|2,bi=!1,Fa=v)}}else{if(tl(v))throw Error(n(418));v.flags=v.flags&-4097|2,bi=!1,Fa=v}}}function tv(v){for(v=v.return;v!==null&&v.tag!==5&&v.tag!==3&&v.tag!==13;)v=v.return;Fa=v}function im(v){if(v!==Fa)return!1;if(!bi)return tv(v),bi=!0,!1;var _;if((_=v.tag!==3)&&!(_=v.tag!==5)&&(_=v.type,_=_!=="head"&&_!=="body"&&!Gg(v.type,v.memoizedProps)),_&&(_=nn)){if(tl(v))throw nv(),Error(n(418));for(;_;)Dc(v,_),_=wf(_.nextSibling)}if(tv(v),v.tag===13){if(v=v.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));e:{for(v=v.nextSibling,_=0;v;){if(v.nodeType===8){var N=v.data;if(N==="/$"){if(_===0){nn=wf(v.nextSibling);break e}_--}else N!=="$"&&N!=="$!"&&N!=="$?"||_++}v=v.nextSibling}nn=null}}else nn=Fa?wf(v.stateNode.nextSibling):null;return!0}function nv(){for(var v=nn;v;)v=wf(v.nextSibling)}function Oc(){nn=Fa=null,bi=!1}function zl(v){el===null?el=[v]:el.push(v)}var rv=w.ReactCurrentBatchConfig;function zs(v,_,N){if(v=N.ref,v!==null&&typeof v!="function"&&typeof v!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(n(309));var U=N.stateNode}if(!U)throw Error(n(147,v));var Q=U,ie=""+v;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===ie?_.ref:(_=function(he){var ke=Q.refs;he===null?delete ke[ie]:ke[ie]=he},_._stringRef=ie,_)}if(typeof v!="string")throw Error(n(284));if(!N._owner)throw Error(n(290,v))}return v}function la(v,_){throw v=Object.prototype.toString.call(_),Error(n(31,v==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":v))}function Mc(v){var _=v._init;return _(v._payload)}function Qg(v){function _(Je,Ue){if(v){var tt=Je.deletions;tt===null?(Je.deletions=[Ue],Je.flags|=16):tt.push(Ue)}}function N(Je,Ue){if(!v)return null;for(;Ue!==null;)_(Je,Ue),Ue=Ue.sibling;return null}function U(Je,Ue){for(Je=new Map;Ue!==null;)Ue.key!==null?Je.set(Ue.key,Ue):Je.set(Ue.index,Ue),Ue=Ue.sibling;return Je}function Q(Je,Ue){return Je=Od(Je,Ue),Je.index=0,Je.sibling=null,Je}function ie(Je,Ue,tt){return Je.index=tt,v?(tt=Je.alternate,tt!==null?(tt=tt.index,tt<Ue?(Je.flags|=2,Ue):tt):(Je.flags|=2,Ue)):(Je.flags|=1048576,Ue)}function he(Je){return v&&Je.alternate===null&&(Je.flags|=2),Je}function ke(Je,Ue,tt,Yt){return Ue===null||Ue.tag!==6?(Ue=$C(tt,Je.mode,Yt),Ue.return=Je,Ue):(Ue=Q(Ue,tt),Ue.return=Je,Ue)}function Le(Je,Ue,tt,Yt){var Cn=tt.type;return Cn===R?Ot(Je,Ue,tt.props.children,Yt,tt.key):Ue!==null&&(Ue.elementType===Cn||typeof Cn=="object"&&Cn!==null&&Cn.$$typeof===G&&Mc(Cn)===Ue.type)?(Yt=Q(Ue,tt.props),Yt.ref=zs(Je,Ue,tt),Yt.return=Je,Yt):(Yt=P2(tt.type,tt.key,tt.props,null,Je.mode,Yt),Yt.ref=zs(Je,Ue,tt),Yt.return=Je,Yt)}function st(Je,Ue,tt,Yt){return Ue===null||Ue.tag!==4||Ue.stateNode.containerInfo!==tt.containerInfo||Ue.stateNode.implementation!==tt.implementation?(Ue=BC(tt,Je.mode,Yt),Ue.return=Je,Ue):(Ue=Q(Ue,tt.children||[]),Ue.return=Je,Ue)}function Ot(Je,Ue,tt,Yt,Cn){return Ue===null||Ue.tag!==7?(Ue=hy(tt,Je.mode,Yt,Cn),Ue.return=Je,Ue):(Ue=Q(Ue,tt),Ue.return=Je,Ue)}function Ut(Je,Ue,tt){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return Ue=$C(""+Ue,Je.mode,tt),Ue.return=Je,Ue;if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case S:return tt=P2(Ue.type,Ue.key,Ue.props,null,Je.mode,tt),tt.ref=zs(Je,null,Ue),tt.return=Je,tt;case C:return Ue=BC(Ue,Je.mode,tt),Ue.return=Je,Ue;case G:var Yt=Ue._init;return Ut(Je,Yt(Ue._payload),tt)}if(_t(Ue)||ue(Ue))return Ue=hy(Ue,Je.mode,tt,null),Ue.return=Je,Ue;la(Je,Ue)}return null}function Dt(Je,Ue,tt,Yt){var Cn=Ue!==null?Ue.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number")return Cn!==null?null:ke(Je,Ue,""+tt,Yt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case S:return tt.key===Cn?Le(Je,Ue,tt,Yt):null;case C:return tt.key===Cn?st(Je,Ue,tt,Yt):null;case G:return Cn=tt._init,Dt(Je,Ue,Cn(tt._payload),Yt)}if(_t(tt)||ue(tt))return Cn!==null?null:Ot(Je,Ue,tt,Yt,null);la(Je,tt)}return null}function pn(Je,Ue,tt,Yt,Cn){if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number")return Je=Je.get(tt)||null,ke(Ue,Je,""+Yt,Cn);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case S:return Je=Je.get(Yt.key===null?tt:Yt.key)||null,Le(Ue,Je,Yt,Cn);case C:return Je=Je.get(Yt.key===null?tt:Yt.key)||null,st(Ue,Je,Yt,Cn);case G:var jn=Yt._init;return pn(Je,Ue,tt,jn(Yt._payload),Cn)}if(_t(Yt)||ue(Yt))return Je=Je.get(tt)||null,Ot(Ue,Je,Yt,Cn,null);la(Ue,Yt)}return null}function En(Je,Ue,tt,Yt){for(var Cn=null,jn=null,Un=Ue,Xn=Ue=0,da=null;Un!==null&&Xn<tt.length;Xn++){Un.index>Xn?(da=Un,Un=null):da=Un.sibling;var xi=Dt(Je,Un,tt[Xn],Yt);if(xi===null){Un===null&&(Un=da);break}v&&Un&&xi.alternate===null&&_(Je,Un),Ue=ie(xi,Ue,Xn),jn===null?Cn=xi:jn.sibling=xi,jn=xi,Un=da}if(Xn===tt.length)return N(Je,Un),bi&&Op(Je,Xn),Cn;if(Un===null){for(;Xn<tt.length;Xn++)Un=Ut(Je,tt[Xn],Yt),Un!==null&&(Ue=ie(Un,Ue,Xn),jn===null?Cn=Un:jn.sibling=Un,jn=Un);return bi&&Op(Je,Xn),Cn}for(Un=U(Je,Un);Xn<tt.length;Xn++)da=pn(Un,Je,Xn,tt[Xn],Yt),da!==null&&(v&&da.alternate!==null&&Un.delete(da.key===null?Xn:da.key),Ue=ie(da,Ue,Xn),jn===null?Cn=da:jn.sibling=da,jn=da);return v&&Un.forEach(function(ym){return _(Je,ym)}),bi&&Op(Je,Xn),Cn}function Tn(Je,Ue,tt,Yt){var Cn=ue(tt);if(typeof Cn!="function")throw Error(n(150));if(tt=Cn.call(tt),tt==null)throw Error(n(151));for(var jn=Cn=null,Un=Ue,Xn=Ue=0,da=null,xi=tt.next();Un!==null&&!xi.done;Xn++,xi=tt.next()){Un.index>Xn?(da=Un,Un=null):da=Un.sibling;var ym=Dt(Je,Un,xi.value,Yt);if(ym===null){Un===null&&(Un=da);break}v&&Un&&ym.alternate===null&&_(Je,Un),Ue=ie(ym,Ue,Xn),jn===null?Cn=ym:jn.sibling=ym,jn=ym,Un=da}if(xi.done)return N(Je,Un),bi&&Op(Je,Xn),Cn;if(Un===null){for(;!xi.done;Xn++,xi=tt.next())xi=Ut(Je,xi.value,Yt),xi!==null&&(Ue=ie(xi,Ue,Xn),jn===null?Cn=xi:jn.sibling=xi,jn=xi);return bi&&Op(Je,Xn),Cn}for(Un=U(Je,Un);!xi.done;Xn++,xi=tt.next())xi=pn(Un,Je,Xn,xi.value,Yt),xi!==null&&(v&&xi.alternate!==null&&Un.delete(xi.key===null?Xn:xi.key),Ue=ie(xi,Ue,Xn),jn===null?Cn=xi:jn.sibling=xi,jn=xi);return v&&Un.forEach(function(U7){return _(Je,U7)}),bi&&Op(Je,Xn),Cn}function oo(Je,Ue,tt,Yt){if(typeof tt=="object"&&tt!==null&&tt.type===R&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case S:e:{for(var Cn=tt.key,jn=Ue;jn!==null;){if(jn.key===Cn){if(Cn=tt.type,Cn===R){if(jn.tag===7){N(Je,jn.sibling),Ue=Q(jn,tt.props.children),Ue.return=Je,Je=Ue;break e}}else if(jn.elementType===Cn||typeof Cn=="object"&&Cn!==null&&Cn.$$typeof===G&&Mc(Cn)===jn.type){N(Je,jn.sibling),Ue=Q(jn,tt.props),Ue.ref=zs(Je,jn,tt),Ue.return=Je,Je=Ue;break e}N(Je,jn);break}else _(Je,jn);jn=jn.sibling}tt.type===R?(Ue=hy(tt.props.children,Je.mode,Yt,tt.key),Ue.return=Je,Je=Ue):(Yt=P2(tt.type,tt.key,tt.props,null,Je.mode,Yt),Yt.ref=zs(Je,Ue,tt),Yt.return=Je,Je=Yt)}return he(Je);case C:e:{for(jn=tt.key;Ue!==null;){if(Ue.key===jn)if(Ue.tag===4&&Ue.stateNode.containerInfo===tt.containerInfo&&Ue.stateNode.implementation===tt.implementation){N(Je,Ue.sibling),Ue=Q(Ue,tt.children||[]),Ue.return=Je,Je=Ue;break e}else{N(Je,Ue);break}else _(Je,Ue);Ue=Ue.sibling}Ue=BC(tt,Je.mode,Yt),Ue.return=Je,Je=Ue}return he(Je);case G:return jn=tt._init,oo(Je,Ue,jn(tt._payload),Yt)}if(_t(tt))return En(Je,Ue,tt,Yt);if(ue(tt))return Tn(Je,Ue,tt,Yt);la(Je,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"?(tt=""+tt,Ue!==null&&Ue.tag===6?(N(Je,Ue.sibling),Ue=Q(Ue,tt),Ue.return=Je,Je=Ue):(N(Je,Ue),Ue=$C(tt,Je.mode,Yt),Ue.return=Je,Je=Ue),he(Je)):N(Je,Ue)}return oo}var Es=Qg(!0),Su=Qg(!1),sm=Ja(null),Ps=null,Oh=null,Mp=null;function Tf(){Mp=Oh=Ps=null}function Jg(v){var _=sm.current;Gi(sm),v._currentValue=_}function Mo(v,_,N){for(;v!==null;){var U=v.alternate;if((v.childLanes&_)!==_?(v.childLanes|=_,U!==null&&(U.childLanes|=_)):U!==null&&(U.childLanes&_)!==_&&(U.childLanes|=_),v===N)break;v=v.return}}function Lc(v,_){Ps=v,Mp=Oh=null,v=v.dependencies,v!==null&&v.firstContext!==null&&(v.lanes&_&&(ae=!0),v.firstContext=null)}function iu(v){var _=v._currentValue;if(Mp!==v)if(v={context:v,memoizedValue:_,next:null},Oh===null){if(Ps===null)throw Error(n(308));Oh=v,Ps.dependencies={lanes:0,firstContext:v}}else Oh=Oh.next=v;return _}var Cf=null;function om(v){Cf===null?Cf=[v]:Cf.push(v)}function Lp(v,_,N,U){var Q=_.interleaved;return Q===null?(N.next=N,om(_)):(N.next=Q.next,Q.next=N),_.interleaved=N,nl(v,U)}function nl(v,_){v.lanes|=_;var N=v.alternate;for(N!==null&&(N.lanes|=_),N=v,v=v.return;v!==null;)v.childLanes|=_,N=v.alternate,N!==null&&(N.childLanes|=_),N=v,v=v.return;return N.tag===3?N.stateNode:null}var Tu=!1;function am(v){v.updateQueue={baseState:v.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iv(v,_){v=v.updateQueue,_.updateQueue===v&&(_.updateQueue={baseState:v.baseState,firstBaseUpdate:v.firstBaseUpdate,lastBaseUpdate:v.lastBaseUpdate,shared:v.shared,effects:v.effects})}function Af(v,_){return{eventTime:v,lane:_,tag:0,payload:null,callback:null,next:null}}function Cu(v,_,N){var U=v.updateQueue;if(U===null)return null;if(U=U.shared,ui&2){var Q=U.pending;return Q===null?_.next=_:(_.next=Q.next,Q.next=_),U.pending=_,nl(v,N)}return Q=U.interleaved,Q===null?(_.next=_,om(U)):(_.next=Q.next,Q.next=_),U.interleaved=_,nl(v,N)}function sv(v,_,N){if(_=_.updateQueue,_!==null&&(_=_.shared,(N&4194240)!==0)){var U=_.lanes;U&=v.pendingLanes,N|=U,_.lanes=N,lr(v,N)}}function Zg(v,_){var N=v.updateQueue,U=v.alternate;if(U!==null&&(U=U.updateQueue,N===U)){var Q=null,ie=null;if(N=N.firstBaseUpdate,N!==null){do{var he={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};ie===null?Q=ie=he:ie=ie.next=he,N=N.next}while(N!==null);ie===null?Q=ie=_:ie=ie.next=_}else Q=ie=_;N={baseState:U.baseState,firstBaseUpdate:Q,lastBaseUpdate:ie,shared:U.shared,effects:U.effects},v.updateQueue=N;return}v=N.lastBaseUpdate,v===null?N.firstBaseUpdate=_:v.next=_,N.lastBaseUpdate=_}function Mh(v,_,N,U){var Q=v.updateQueue;Tu=!1;var ie=Q.firstBaseUpdate,he=Q.lastBaseUpdate,ke=Q.shared.pending;if(ke!==null){Q.shared.pending=null;var Le=ke,st=Le.next;Le.next=null,he===null?ie=st:he.next=st,he=Le;var Ot=v.alternate;Ot!==null&&(Ot=Ot.updateQueue,ke=Ot.lastBaseUpdate,ke!==he&&(ke===null?Ot.firstBaseUpdate=st:ke.next=st,Ot.lastBaseUpdate=Le))}if(ie!==null){var Ut=Q.baseState;he=0,Ot=st=Le=null,ke=ie;do{var Dt=ke.lane,pn=ke.eventTime;if((U&Dt)===Dt){Ot!==null&&(Ot=Ot.next={eventTime:pn,lane:0,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null});e:{var En=v,Tn=ke;switch(Dt=_,pn=N,Tn.tag){case 1:if(En=Tn.payload,typeof En=="function"){Ut=En.call(pn,Ut,Dt);break e}Ut=En;break e;case 3:En.flags=En.flags&-65537|128;case 0:if(En=Tn.payload,Dt=typeof En=="function"?En.call(pn,Ut,Dt):En,Dt==null)break e;Ut=X({},Ut,Dt);break e;case 2:Tu=!0}}ke.callback!==null&&ke.lane!==0&&(v.flags|=64,Dt=Q.effects,Dt===null?Q.effects=[ke]:Dt.push(ke))}else pn={eventTime:pn,lane:Dt,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null},Ot===null?(st=Ot=pn,Le=Ut):Ot=Ot.next=pn,he|=Dt;if(ke=ke.next,ke===null){if(ke=Q.shared.pending,ke===null)break;Dt=ke,ke=Dt.next,Dt.next=null,Q.lastBaseUpdate=Dt,Q.shared.pending=null}}while(!0);if(Ot===null&&(Le=Ut),Q.baseState=Le,Q.firstBaseUpdate=st,Q.lastBaseUpdate=Ot,_=Q.shared.interleaved,_!==null){Q=_;do he|=Q.lane,Q=Q.next;while(Q!==_)}else ie===null&&(Q.shared.lanes=0);dm|=he,v.lanes=he,v.memoizedState=Ut}}function Ss(v,_,N){if(v=_.effects,_.effects=null,v!==null)for(_=0;_<v.length;_++){var U=v[_],Q=U.callback;if(Q!==null){if(U.callback=null,U=N,typeof Q!="function")throw Error(n(191,Q));Q.call(U)}}}var fr={},$i=Ja(fr),fs=Ja(fr),Ns=Ja(fr);function Vs(v){if(v===fr)throw Error(n(174));return v}function Lh(v,_){switch(Fi(Ns,_),Fi(fs,v),Fi($i,fr),v=_.nodeType,v){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:Qe(null,"");break;default:v=v===8?_.parentNode:_,_=v.namespaceURI||null,v=v.tagName,_=Qe(_,v)}Gi($i),Fi($i,_)}function Yi(){Gi($i),Gi(fs),Gi(Ns)}function Fp(v){Vs(Ns.current);var _=Vs($i.current),N=Qe(_,v.type);_!==N&&(Fi(fs,v),Fi($i,N))}function kf(v){fs.current===v&&(Gi($i),Gi(fs))}var Bi=Ja(0);function Td(v){for(var _=v;_!==null;){if(_.tag===13){var N=_.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||N.data==="$?"||N.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===v)break;for(;_.sibling===null;){if(_.return===null||_.return===v)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var $p=[];function ca(){for(var v=0;v<$p.length;v++)$p[v]._workInProgressVersionPrimary=null;$p.length=0}var Bp=w.ReactCurrentDispatcher,ey=w.ReactCurrentBatchConfig,$a=0,Ti=null,ds=null,Hs=null,rl=!1,Fh=!1,Au=0,dr=0;function so(){throw Error(n(321))}function ty(v,_){if(_===null)return!1;for(var N=0;N<_.length&&N<v.length;N++)if(!et(v[N],_[N]))return!1;return!0}function Rf(v,_,N,U,Q,ie){if($a=ie,Ti=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Bp.current=v===null||v.memoizedState===null?wC:Bc,v=N(U,Q),Fh){ie=0;do{if(Fh=!1,Au=0,25<=ie)throw Error(n(301));ie+=1,Hs=ds=null,_.updateQueue=null,Bp.current=kd,v=N(U,Q)}while(Fh)}if(Bp.current=lm,_=ds!==null&&ds.next!==null,$a=0,Hs=ds=Ti=null,rl=!1,_)throw Error(n(300));return v}function jp(){var v=Au!==0;return Au=0,v}function ts(){var v={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hs===null?Ti.memoizedState=Hs=v:Hs=Hs.next=v,Hs}function bo(){if(ds===null){var v=Ti.alternate;v=v!==null?v.memoizedState:null}else v=ds.next;var _=Hs===null?Ti.memoizedState:Hs.next;if(_!==null)Hs=_,ds=v;else{if(v===null)throw Error(n(310));ds=v,v={memoizedState:ds.memoizedState,baseState:ds.baseState,baseQueue:ds.baseQueue,queue:ds.queue,next:null},Hs===null?Ti.memoizedState=Hs=v:Hs=Hs.next=v}return Hs}function ji(v,_){return typeof _=="function"?_(v):_}function Ba(v){var _=bo(),N=_.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=v;var U=ds,Q=U.baseQueue,ie=N.pending;if(ie!==null){if(Q!==null){var he=Q.next;Q.next=ie.next,ie.next=he}U.baseQueue=Q=ie,N.pending=null}if(Q!==null){ie=Q.next,U=U.baseState;var ke=he=null,Le=null,st=ie;do{var Ot=st.lane;if(($a&Ot)===Ot)Le!==null&&(Le=Le.next={lane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),U=st.hasEagerState?st.eagerState:v(U,st.action);else{var Ut={lane:Ot,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null};Le===null?(ke=Le=Ut,he=U):Le=Le.next=Ut,Ti.lanes|=Ot,dm|=Ot}st=st.next}while(st!==null&&st!==ie);Le===null?he=U:Le.next=ke,et(U,_.memoizedState)||(ae=!0),_.memoizedState=U,_.baseState=he,_.baseQueue=Le,N.lastRenderedState=U}if(v=N.interleaved,v!==null){Q=v;do ie=Q.lane,Ti.lanes|=ie,dm|=ie,Q=Q.next;while(Q!==v)}else Q===null&&(N.lanes=0);return[_.memoizedState,N.dispatch]}function Up(v){var _=bo(),N=_.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=v;var U=N.dispatch,Q=N.pending,ie=_.memoizedState;if(Q!==null){N.pending=null;var he=Q=Q.next;do ie=v(ie,he.action),he=he.next;while(he!==Q);et(ie,_.memoizedState)||(ae=!0),_.memoizedState=ie,_.baseQueue===null&&(_.baseState=ie),N.lastRenderedState=ie}return[ie,U]}function um(){}function ny(v,_){var N=Ti,U=bo(),Q=_(),ie=!et(U.memoizedState,Q);if(ie&&(U.memoizedState=Q,ae=!0),U=U.queue,Pf(If.bind(null,N,U,v),[v]),U.getSnapshot!==_||ie||Hs!==null&&Hs.memoizedState.tag&1){if(N.flags|=2048,zp(9,qs.bind(null,N,U,Q,_),void 0,null),Ua===null)throw Error(n(349));$a&30||Ex(N,_,Q)}return Q}function Ex(v,_,N){v.flags|=16384,v={getSnapshot:_,value:N},_=Ti.updateQueue,_===null?(_={lastEffect:null,stores:null},Ti.updateQueue=_,_.stores=[v]):(N=_.stores,N===null?_.stores=[v]:N.push(v))}function qs(v,_,N,U){_.value=N,_.getSnapshot=U,ry(_)&&iy(v)}function If(v,_,N){return N(function(){ry(_)&&iy(v)})}function ry(v){var _=v.getSnapshot;v=v.value;try{var N=_();return!et(v,N)}catch{return!0}}function iy(v){var _=nl(v,1);_!==null&&Dd(_,v,1,-1)}function Fc(v){var _=ts();return typeof v=="function"&&(v=v()),_.memoizedState=_.baseState=v,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:v},_.queue=v,v=v.dispatch=Rx.bind(null,Ti,v),[_.memoizedState,v]}function zp(v,_,N,U){return v={tag:v,create:_,destroy:N,deps:U,next:null},_=Ti.updateQueue,_===null?(_={lastEffect:null,stores:null},Ti.updateQueue=_,_.lastEffect=v.next=v):(N=_.lastEffect,N===null?_.lastEffect=v.next=v:(U=N.next,N.next=v,v.next=U,_.lastEffect=v)),v}function sy(){return bo().memoizedState}function Vp(v,_,N,U){var Q=ts();Ti.flags|=v,Q.memoizedState=zp(1|_,N,void 0,U===void 0?null:U)}function Cd(v,_,N,U){var Q=bo();U=U===void 0?null:U;var ie=void 0;if(ds!==null){var he=ds.memoizedState;if(ie=he.destroy,U!==null&&ty(U,he.deps)){Q.memoizedState=zp(_,N,ie,U);return}}Ti.flags|=v,Q.memoizedState=zp(1|_,N,ie,U)}function ov(v,_){return Vp(8390656,8,v,_)}function Pf(v,_){return Cd(2048,8,v,_)}function Sx(v,_){return Cd(4,2,v,_)}function Nf(v,_){return Cd(4,4,v,_)}function Ad(v,_){if(typeof _=="function")return v=v(),_(v),function(){_(null)};if(_!=null)return v=v(),_.current=v,function(){_.current=null}}function Tx(v,_,N){return N=N!=null?N.concat([v]):null,Cd(4,4,Ad.bind(null,_,v),N)}function $c(){}function Cx(v,_){var N=bo();_=_===void 0?null:_;var U=N.memoizedState;return U!==null&&_!==null&&ty(_,U[1])?U[0]:(N.memoizedState=[v,_],v)}function ns(v,_){var N=bo();_=_===void 0?null:_;var U=N.memoizedState;return U!==null&&_!==null&&ty(_,U[1])?U[0]:(v=v(),N.memoizedState=[v,_],v)}function m2(v,_,N){return $a&21?(et(N,_)||(N=jt(),Ti.lanes|=N,dm|=N,v.baseState=!0),_):(v.baseState&&(v.baseState=!1,ae=!0),v.memoizedState=N)}function Ax(v,_){var N=_n;_n=N!==0&&4>N?N:4,v(!0);var U=ey.transition;ey.transition={};try{v(!1),_()}finally{_n=N,ey.transition=U}}function kx(){return bo().memoizedState}function _C(v,_,N){var U=mm(v);if(N={lane:U,action:N,hasEagerState:!1,eagerState:null,next:null},av(v))su(_,N);else if(N=Lp(v,_,N,U),N!==null){var Q=ol();Dd(N,v,U,Q),Ds(N,_,U)}}function Rx(v,_,N){var U=mm(v),Q={lane:U,action:N,hasEagerState:!1,eagerState:null,next:null};if(av(v))su(_,Q);else{var ie=v.alternate;if(v.lanes===0&&(ie===null||ie.lanes===0)&&(ie=_.lastRenderedReducer,ie!==null))try{var he=_.lastRenderedState,ke=ie(he,N);if(Q.hasEagerState=!0,Q.eagerState=ke,et(ke,he)){var Le=_.interleaved;Le===null?(Q.next=Q,om(_)):(Q.next=Le.next,Le.next=Q),_.interleaved=Q;return}}catch{}finally{}N=Lp(v,_,Q,U),N!==null&&(Q=ol(),Dd(N,v,U,Q),Ds(N,_,U))}}function av(v){var _=v.alternate;return v===Ti||_!==null&&_===Ti}function su(v,_){Fh=rl=!0;var N=v.pending;N===null?_.next=_:(_.next=N.next,N.next=_),v.pending=_}function Ds(v,_,N){if(N&4194240){var U=_.lanes;U&=v.pendingLanes,N|=U,_.lanes=N,lr(v,N)}}var lm={readContext:iu,useCallback:so,useContext:so,useEffect:so,useImperativeHandle:so,useInsertionEffect:so,useLayoutEffect:so,useMemo:so,useReducer:so,useRef:so,useState:so,useDebugValue:so,useDeferredValue:so,useTransition:so,useMutableSource:so,useSyncExternalStore:so,useId:so,unstable_isNewReconciler:!1},wC={readContext:iu,useCallback:function(v,_){return ts().memoizedState=[v,_===void 0?null:_],v},useContext:iu,useEffect:ov,useImperativeHandle:function(v,_,N){return N=N!=null?N.concat([v]):null,Vp(4194308,4,Ad.bind(null,_,v),N)},useLayoutEffect:function(v,_){return Vp(4194308,4,v,_)},useInsertionEffect:function(v,_){return Vp(4,2,v,_)},useMemo:function(v,_){var N=ts();return _=_===void 0?null:_,v=v(),N.memoizedState=[v,_],v},useReducer:function(v,_,N){var U=ts();return _=N!==void 0?N(_):_,U.memoizedState=U.baseState=_,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:v,lastRenderedState:_},U.queue=v,v=v.dispatch=_C.bind(null,Ti,v),[U.memoizedState,v]},useRef:function(v){var _=ts();return v={current:v},_.memoizedState=v},useState:Fc,useDebugValue:$c,useDeferredValue:function(v){return ts().memoizedState=v},useTransition:function(){var v=Fc(!1),_=v[0];return v=Ax.bind(null,v[1]),ts().memoizedState=v,[_,v]},useMutableSource:function(){},useSyncExternalStore:function(v,_,N){var U=Ti,Q=ts();if(bi){if(N===void 0)throw Error(n(407));N=N()}else{if(N=_(),Ua===null)throw Error(n(349));$a&30||Ex(U,_,N)}Q.memoizedState=N;var ie={value:N,getSnapshot:_};return Q.queue=ie,ov(If.bind(null,U,ie,v),[v]),U.flags|=2048,zp(9,qs.bind(null,U,ie,N,_),void 0,null),N},useId:function(){var v=ts(),_=Ua.identifierPrefix;if(bi){var N=es,U=Eu;N=(U&~(1<<32-rr(U)-1)).toString(32)+N,_=":"+_+"R"+N,N=Au++,0<N&&(_+="H"+N.toString(32)),_+=":"}else N=dr++,_=":"+_+"r"+N.toString(32)+":";return v.memoizedState=_},unstable_isNewReconciler:!1},Bc={readContext:iu,useCallback:Cx,useContext:iu,useEffect:Pf,useImperativeHandle:Tx,useInsertionEffect:Sx,useLayoutEffect:Nf,useMemo:ns,useReducer:Ba,useRef:sy,useState:function(){return Ba(ji)},useDebugValue:$c,useDeferredValue:function(v){var _=bo();return m2(_,ds.memoizedState,v)},useTransition:function(){var v=Ba(ji)[0],_=bo().memoizedState;return[v,_]},useMutableSource:um,useSyncExternalStore:ny,useId:kx,unstable_isNewReconciler:!1},kd={readContext:iu,useCallback:Cx,useContext:iu,useEffect:Pf,useImperativeHandle:Tx,useInsertionEffect:Sx,useLayoutEffect:Nf,useMemo:ns,useReducer:Up,useRef:sy,useState:function(){return Up(ji)},useDebugValue:$c,useDeferredValue:function(v){var _=bo();return ds===null?_.memoizedState=v:m2(_,ds.memoizedState,v)},useTransition:function(){var v=Up(ji)[0],_=bo().memoizedState;return[v,_]},useMutableSource:um,useSyncExternalStore:ny,useId:kx,unstable_isNewReconciler:!1};function Lo(v,_){if(v&&v.defaultProps){_=X({},_),v=v.defaultProps;for(var N in v)_[N]===void 0&&(_[N]=v[N]);return _}return _}function Hp(v,_,N,U){_=v.memoizedState,N=N(U,_),N=N==null?_:X({},_,N),v.memoizedState=N,v.lanes===0&&(v.updateQueue.baseState=N)}var cm={isMounted:function(v){return(v=v._reactInternals)?bs(v)===v:!1},enqueueSetState:function(v,_,N){v=v._reactInternals;var U=ol(),Q=mm(v),ie=Af(U,Q);ie.payload=_,N!=null&&(ie.callback=N),_=Cu(v,ie,Q),_!==null&&(Dd(_,v,Q,U),sv(_,v,Q))},enqueueReplaceState:function(v,_,N){v=v._reactInternals;var U=ol(),Q=mm(v),ie=Af(U,Q);ie.tag=1,ie.payload=_,N!=null&&(ie.callback=N),_=Cu(v,ie,Q),_!==null&&(Dd(_,v,Q,U),sv(_,v,Q))},enqueueForceUpdate:function(v,_){v=v._reactInternals;var N=ol(),U=mm(v),Q=Af(N,U);Q.tag=2,_!=null&&(Q.callback=_),_=Cu(v,Q,U),_!==null&&(Dd(_,v,U,N),sv(_,v,U))}};function oy(v,_,N,U,Q,ie,he){return v=v.stateNode,typeof v.shouldComponentUpdate=="function"?v.shouldComponentUpdate(U,ie,he):_.prototype&&_.prototype.isPureReactComponent?!on(N,U)||!on(Q,ie):!0}function qp(v,_,N){var U=!1,Q=Ef,ie=_.contextType;return typeof ie=="object"&&ie!==null?ie=iu(ie):(Q=La(_)?Ma:oa.current,U=_.contextTypes,ie=(U=U!=null)?Dp(v,Q):Ef),_=new _(N,ie),v.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=cm,v.stateNode=_,_._reactInternals=v,U&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=Q,v.__reactInternalMemoizedMaskedChildContext=ie),_}function Wp(v,_,N,U){v=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(N,U),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(N,U),_.state!==v&&cm.enqueueReplaceState(_,_.state,null)}function uv(v,_,N,U){var Q=v.stateNode;Q.props=N,Q.state=v.memoizedState,Q.refs={},am(v);var ie=_.contextType;typeof ie=="object"&&ie!==null?Q.context=iu(ie):(ie=La(_)?Ma:oa.current,Q.context=Dp(v,ie)),Q.state=v.memoizedState,ie=_.getDerivedStateFromProps,typeof ie=="function"&&(Hp(v,_,ie,N),Q.state=v.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(_=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),_!==Q.state&&cm.enqueueReplaceState(Q,Q.state,null),Mh(v,N,Q,U),Q.state=v.memoizedState),typeof Q.componentDidMount=="function"&&(v.flags|=4194308)}function $h(v,_){try{var N="",U=_;do N+=oe(U),U=U.return;while(U);var Q=N}catch(ie){Q=`
Error generating stack: `+ie.message+`
`+ie.stack}return{value:v,source:_,stack:Q,digest:null}}function ay(v,_,N){return{value:v,source:null,stack:N??null,digest:_??null}}function Rd(v,_){try{console.error(_.value)}catch(N){setTimeout(function(){throw N})}}var g2=typeof WeakMap=="function"?WeakMap:Map;function uy(v,_,N){N=Af(-1,N),N.tag=3,N.payload={element:null};var U=_.value;return N.callback=function(){S2||(S2=!0,PC=U),Rd(v,_)},N}function T(v,_,N){N=Af(-1,N),N.tag=3;var U=v.type.getDerivedStateFromError;if(typeof U=="function"){var Q=_.value;N.payload=function(){return U(Q)},N.callback=function(){Rd(v,_)}}var ie=v.stateNode;return ie!==null&&typeof ie.componentDidCatch=="function"&&(N.callback=function(){Rd(v,_),typeof U!="function"&&(hm===null?hm=new Set([this]):hm.add(this));var he=_.stack;this.componentDidCatch(_.value,{componentStack:he!==null?he:""})}),N}function k(v,_,N){var U=v.pingCache;if(U===null){U=v.pingCache=new g2;var Q=new Set;U.set(_,Q)}else Q=U.get(_),Q===void 0&&(Q=new Set,U.set(_,Q));Q.has(N)||(Q.add(N),v=N7.bind(null,v,_,N),_.then(v,v))}function $(v){do{var _;if((_=v.tag===13)&&(_=v.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return v;v=v.return}while(v!==null);return null}function Y(v,_,N,U,Q){return v.mode&1?(v.flags|=65536,v.lanes=Q,v):(v===_?v.flags|=65536:(v.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(_=Af(-1,1),_.tag=2,Cu(N,_,1))),N.lanes|=1),v)}var Z=w.ReactCurrentOwner,ae=!1;function xe(v,_,N,U){_.child=v===null?Su(_,null,N,U):Es(_,v.child,N,U)}function He(v,_,N,U,Q){N=N.render;var ie=_.ref;return Lc(_,Q),U=Rf(v,_,N,U,ie,Q),N=jp(),v!==null&&!ae?(_.updateQueue=v.updateQueue,_.flags&=-2053,v.lanes&=~Q,$o(v,_,Q)):(bi&&N&&Dh(_),_.flags|=1,xe(v,_,U,Q),_.child)}function at(v,_,N,U,Q){if(v===null){var ie=N.type;return typeof ie=="function"&&!I2(ie)&&ie.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(_.tag=15,_.type=ie,Ft(v,_,ie,U,Q)):(v=P2(N.type,null,U,_,_.mode,Q),v.ref=_.ref,v.return=_,_.child=v)}if(ie=v.child,!(v.lanes&Q)){var he=ie.memoizedProps;if(N=N.compare,N=N!==null?N:on,N(he,U)&&v.ref===_.ref)return $o(v,_,Q)}return _.flags|=1,v=Od(ie,U),v.ref=_.ref,v.return=_,_.child=v}function Ft(v,_,N,U,Q){if(v!==null){var ie=v.memoizedProps;if(on(ie,U)&&v.ref===_.ref)if(ae=!1,_.pendingProps=U=ie,(v.lanes&Q)!==0)v.flags&131072&&(ae=!0);else return _.lanes=v.lanes,$o(v,_,Q)}return an(v,_,N,U,Q)}function yn(v,_,N){var U=_.pendingProps,Q=U.children,ie=v!==null?v.memoizedState:null;if(U.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fi(fv,Uc),Uc|=N;else{if(!(N&1073741824))return v=ie!==null?ie.baseLanes|N:N,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:v,cachePool:null,transitions:null},_.updateQueue=null,Fi(fv,Uc),Uc|=v,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},U=ie!==null?ie.baseLanes:N,Fi(fv,Uc),Uc|=U}else ie!==null?(U=ie.baseLanes|N,_.memoizedState=null):U=N,Fi(fv,Uc),Uc|=U;return xe(v,_,Q,N),_.child}function tr(v,_){var N=_.ref;(v===null&&N!==null||v!==null&&v.ref!==N)&&(_.flags|=512,_.flags|=2097152)}function an(v,_,N,U,Q){var ie=La(N)?Ma:oa.current;return ie=Dp(_,ie),Lc(_,Q),N=Rf(v,_,N,U,ie,Q),U=jp(),v!==null&&!ae?(_.updateQueue=v.updateQueue,_.flags&=-2053,v.lanes&=~Q,$o(v,_,Q)):(bi&&U&&Dh(_),_.flags|=1,xe(v,_,N,Q),_.child)}function Ui(v,_,N,U,Q){if(La(N)){var ie=!0;Za(_)}else ie=!1;if(Lc(_,Q),_.stateNode===null)Br(v,_),qp(_,N,U),uv(_,N,U,Q),U=!0;else if(v===null){var he=_.stateNode,ke=_.memoizedProps;he.props=ke;var Le=he.context,st=N.contextType;typeof st=="object"&&st!==null?st=iu(st):(st=La(N)?Ma:oa.current,st=Dp(_,st));var Ot=N.getDerivedStateFromProps,Ut=typeof Ot=="function"||typeof he.getSnapshotBeforeUpdate=="function";Ut||typeof he.UNSAFE_componentWillReceiveProps!="function"&&typeof he.componentWillReceiveProps!="function"||(ke!==U||Le!==st)&&Wp(_,he,U,st),Tu=!1;var Dt=_.memoizedState;he.state=Dt,Mh(_,U,he,Q),Le=_.memoizedState,ke!==U||Dt!==Le||Oa.current||Tu?(typeof Ot=="function"&&(Hp(_,N,Ot,U),Le=_.memoizedState),(ke=Tu||oy(_,N,ke,U,Dt,Le,st))?(Ut||typeof he.UNSAFE_componentWillMount!="function"&&typeof he.componentWillMount!="function"||(typeof he.componentWillMount=="function"&&he.componentWillMount(),typeof he.UNSAFE_componentWillMount=="function"&&he.UNSAFE_componentWillMount()),typeof he.componentDidMount=="function"&&(_.flags|=4194308)):(typeof he.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=U,_.memoizedState=Le),he.props=U,he.state=Le,he.context=st,U=ke):(typeof he.componentDidMount=="function"&&(_.flags|=4194308),U=!1)}else{he=_.stateNode,iv(v,_),ke=_.memoizedProps,st=_.type===_.elementType?ke:Lo(_.type,ke),he.props=st,Ut=_.pendingProps,Dt=he.context,Le=N.contextType,typeof Le=="object"&&Le!==null?Le=iu(Le):(Le=La(N)?Ma:oa.current,Le=Dp(_,Le));var pn=N.getDerivedStateFromProps;(Ot=typeof pn=="function"||typeof he.getSnapshotBeforeUpdate=="function")||typeof he.UNSAFE_componentWillReceiveProps!="function"&&typeof he.componentWillReceiveProps!="function"||(ke!==Ut||Dt!==Le)&&Wp(_,he,U,Le),Tu=!1,Dt=_.memoizedState,he.state=Dt,Mh(_,U,he,Q);var En=_.memoizedState;ke!==Ut||Dt!==En||Oa.current||Tu?(typeof pn=="function"&&(Hp(_,N,pn,U),En=_.memoizedState),(st=Tu||oy(_,N,st,U,Dt,En,Le)||!1)?(Ot||typeof he.UNSAFE_componentWillUpdate!="function"&&typeof he.componentWillUpdate!="function"||(typeof he.componentWillUpdate=="function"&&he.componentWillUpdate(U,En,Le),typeof he.UNSAFE_componentWillUpdate=="function"&&he.UNSAFE_componentWillUpdate(U,En,Le)),typeof he.componentDidUpdate=="function"&&(_.flags|=4),typeof he.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof he.componentDidUpdate!="function"||ke===v.memoizedProps&&Dt===v.memoizedState||(_.flags|=4),typeof he.getSnapshotBeforeUpdate!="function"||ke===v.memoizedProps&&Dt===v.memoizedState||(_.flags|=1024),_.memoizedProps=U,_.memoizedState=En),he.props=U,he.state=En,he.context=Le,U=st):(typeof he.componentDidUpdate!="function"||ke===v.memoizedProps&&Dt===v.memoizedState||(_.flags|=4),typeof he.getSnapshotBeforeUpdate!="function"||ke===v.memoizedProps&&Dt===v.memoizedState||(_.flags|=1024),U=!1)}return Si(v,_,N,U,ie,Q)}function Si(v,_,N,U,Q,ie){tr(v,_);var he=(_.flags&128)!==0;if(!U&&!he)return Q&&h2(_,N,!1),$o(v,_,ie);U=_.stateNode,Z.current=_;var ke=he&&typeof N.getDerivedStateFromError!="function"?null:U.render();return _.flags|=1,v!==null&&he?(_.child=Es(_,v.child,null,ie),_.child=Es(_,null,ke,ie)):xe(v,_,ke,ie),_.memoizedState=U.state,Q&&h2(_,N,!0),_.child}function ou(v){var _=v.stateNode;_.pendingContext?wx(v,_.pendingContext,_.pendingContext!==_.context):_.context&&wx(v,_.context,!1),Lh(v,_.containerInfo)}function Fo(v,_,N,U,Q){return Oc(),zl(Q),_.flags|=256,xe(v,_,N,U),_.child}var it={dehydrated:null,treeContext:null,retryLane:0};function qe(v){return{baseLanes:v,cachePool:null,transitions:null}}function ct(v,_,N){var U=_.pendingProps,Q=Bi.current,ie=!1,he=(_.flags&128)!==0,ke;if((ke=he)||(ke=v!==null&&v.memoizedState===null?!1:(Q&2)!==0),ke?(ie=!0,_.flags&=-129):(v===null||v.memoizedState!==null)&&(Q|=1),Fi(Bi,Q&1),v===null)return ua(_),v=_.memoizedState,v!==null&&(v=v.dehydrated,v!==null)?(_.mode&1?v.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(he=U.children,v=U.fallback,ie?(U=_.mode,ie=_.child,he={mode:"hidden",children:he},!(U&1)&&ie!==null?(ie.childLanes=0,ie.pendingProps=he):ie=N2(he,U,0,null),v=hy(v,U,N,null),ie.return=_,v.return=_,ie.sibling=v,_.child=ie,_.child.memoizedState=qe(N),_.memoizedState=it,v):rn(_,he));if(Q=v.memoizedState,Q!==null&&(ke=Q.dehydrated,ke!==null))return Gt(v,_,he,U,ke,Q,N);if(ie){ie=U.fallback,he=_.mode,Q=v.child,ke=Q.sibling;var Le={mode:"hidden",children:U.children};return!(he&1)&&_.child!==Q?(U=_.child,U.childLanes=0,U.pendingProps=Le,_.deletions=null):(U=Od(Q,Le),U.subtreeFlags=Q.subtreeFlags&14680064),ke!==null?ie=Od(ke,ie):(ie=hy(ie,he,N,null),ie.flags|=2),ie.return=_,U.return=_,U.sibling=ie,_.child=U,U=ie,ie=_.child,he=v.child.memoizedState,he=he===null?qe(N):{baseLanes:he.baseLanes|N,cachePool:null,transitions:he.transitions},ie.memoizedState=he,ie.childLanes=v.childLanes&~N,_.memoizedState=it,U}return ie=v.child,v=ie.sibling,U=Od(ie,{mode:"visible",children:U.children}),!(_.mode&1)&&(U.lanes=N),U.return=_,U.sibling=null,v!==null&&(N=_.deletions,N===null?(_.deletions=[v],_.flags|=16):N.push(v)),_.child=U,_.memoizedState=null,U}function rn(v,_){return _=N2({mode:"visible",children:_},v.mode,0,null),_.return=v,v.child=_}function kn(v,_,N,U){return U!==null&&zl(U),Es(_,v.child,null,N),v=rn(_,_.pendingProps.children),v.flags|=2,_.memoizedState=null,v}function Gt(v,_,N,U,Q,ie,he){if(N)return _.flags&256?(_.flags&=-257,U=ay(Error(n(422))),kn(v,_,he,U)):_.memoizedState!==null?(_.child=v.child,_.flags|=128,null):(ie=U.fallback,Q=_.mode,U=N2({mode:"visible",children:U.children},Q,0,null),ie=hy(ie,Q,he,null),ie.flags|=2,U.return=_,ie.return=_,U.sibling=ie,_.child=U,_.mode&1&&Es(_,v.child,null,he),_.child.memoizedState=qe(he),_.memoizedState=it,ie);if(!(_.mode&1))return kn(v,_,he,null);if(Q.data==="$!"){if(U=Q.nextSibling&&Q.nextSibling.dataset,U)var ke=U.dgst;return U=ke,ie=Error(n(419)),U=ay(ie,U,void 0),kn(v,_,he,U)}if(ke=(he&v.childLanes)!==0,ae||ke){if(U=Ua,U!==null){switch(he&-he){case 4:Q=2;break;case 16:Q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Q=32;break;case 536870912:Q=268435456;break;default:Q=0}Q=Q&(U.suspendedLanes|he)?0:Q,Q!==0&&Q!==ie.retryLane&&(ie.retryLane=Q,nl(v,Q),Dd(U,v,Q,-1))}return FC(),U=ay(Error(n(421))),kn(v,_,he,U)}return Q.data==="$?"?(_.flags|=128,_.child=v.child,_=D7.bind(null,v),Q._reactRetry=_,null):(v=ie.treeContext,nn=wf(Q.nextSibling),Fa=_,bi=!0,el=null,v!==null&&(nu[ru++]=Eu,nu[ru++]=es,nu[ru++]=Nh,Eu=v.id,es=v.overflow,Nh=_),_=rn(_,U.children),_.flags|=4096,_)}function Kn(v,_,N){v.lanes|=_;var U=v.alternate;U!==null&&(U.lanes|=_),Mo(v.return,_,N)}function Fr(v,_,N,U,Q){var ie=v.memoizedState;ie===null?v.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:U,tail:N,tailMode:Q}:(ie.isBackwards=_,ie.rendering=null,ie.renderingStartTime=0,ie.last=U,ie.tail=N,ie.tailMode=Q)}function rs(v,_,N){var U=_.pendingProps,Q=U.revealOrder,ie=U.tail;if(xe(v,_,U.children,N),U=Bi.current,U&2)U=U&1|2,_.flags|=128;else{if(v!==null&&v.flags&128)e:for(v=_.child;v!==null;){if(v.tag===13)v.memoizedState!==null&&Kn(v,N,_);else if(v.tag===19)Kn(v,N,_);else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===_)break e;for(;v.sibling===null;){if(v.return===null||v.return===_)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}U&=1}if(Fi(Bi,U),!(_.mode&1))_.memoizedState=null;else switch(Q){case"forwards":for(N=_.child,Q=null;N!==null;)v=N.alternate,v!==null&&Td(v)===null&&(Q=N),N=N.sibling;N=Q,N===null?(Q=_.child,_.child=null):(Q=N.sibling,N.sibling=null),Fr(_,!1,Q,N,ie);break;case"backwards":for(N=null,Q=_.child,_.child=null;Q!==null;){if(v=Q.alternate,v!==null&&Td(v)===null){_.child=Q;break}v=Q.sibling,Q.sibling=N,N=Q,Q=v}Fr(_,!0,N,null,ie);break;case"together":Fr(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Br(v,_){!(_.mode&1)&&v!==null&&(v.alternate=null,_.alternate=null,_.flags|=2)}function $o(v,_,N){if(v!==null&&(_.dependencies=v.dependencies),dm|=_.lanes,!(N&_.childLanes))return null;if(v!==null&&_.child!==v.child)throw Error(n(153));if(_.child!==null){for(v=_.child,N=Od(v,v.pendingProps),_.child=N,N.return=_;v.sibling!==null;)v=v.sibling,N=N.sibling=Od(v,v.pendingProps),N.return=_;N.sibling=null}return _.child}function y2(v,_,N){switch(_.tag){case 3:ou(_),Oc();break;case 5:Fp(_);break;case 1:La(_.type)&&Za(_);break;case 4:Lh(_,_.stateNode.containerInfo);break;case 10:var U=_.type._context,Q=_.memoizedProps.value;Fi(sm,U._currentValue),U._currentValue=Q;break;case 13:if(U=_.memoizedState,U!==null)return U.dehydrated!==null?(Fi(Bi,Bi.current&1),_.flags|=128,null):N&_.child.childLanes?ct(v,_,N):(Fi(Bi,Bi.current&1),v=$o(v,_,N),v!==null?v.sibling:null);Fi(Bi,Bi.current&1);break;case 19:if(U=(N&_.childLanes)!==0,v.flags&128){if(U)return rs(v,_,N);_.flags|=128}if(Q=_.memoizedState,Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),Fi(Bi,Bi.current),U)break;return null;case 22:case 23:return _.lanes=0,yn(v,_,N)}return $o(v,_,N)}var au,EC,FI,SC;au=function(v,_){for(var N=_.child;N!==null;){if(N.tag===5||N.tag===6)v.appendChild(N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===_)break;for(;N.sibling===null;){if(N.return===null||N.return===_)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},EC=function(){},FI=function(v,_,N,U){var Q=v.memoizedProps;if(Q!==U){v=_.stateNode,Vs($i.current);var ie=null;switch(N){case"input":Q=Me(v,Q),U=Me(v,U),ie=[];break;case"select":Q=X({},Q,{value:void 0}),U=X({},U,{value:void 0}),ie=[];break;case"textarea":Q=Et(v,Q),U=Et(v,U),ie=[];break;default:typeof Q.onClick!="function"&&typeof U.onClick=="function"&&(v.onclick=Cp)}nr(N,U);var he;N=null;for(st in Q)if(!U.hasOwnProperty(st)&&Q.hasOwnProperty(st)&&Q[st]!=null)if(st==="style"){var ke=Q[st];for(he in ke)ke.hasOwnProperty(he)&&(N||(N={}),N[he]="")}else st!=="dangerouslySetInnerHTML"&&st!=="children"&&st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(i.hasOwnProperty(st)?ie||(ie=[]):(ie=ie||[]).push(st,null));for(st in U){var Le=U[st];if(ke=Q!=null?Q[st]:void 0,U.hasOwnProperty(st)&&Le!==ke&&(Le!=null||ke!=null))if(st==="style")if(ke){for(he in ke)!ke.hasOwnProperty(he)||Le&&Le.hasOwnProperty(he)||(N||(N={}),N[he]="");for(he in Le)Le.hasOwnProperty(he)&&ke[he]!==Le[he]&&(N||(N={}),N[he]=Le[he])}else N||(ie||(ie=[]),ie.push(st,N)),N=Le;else st==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,ke=ke?ke.__html:void 0,Le!=null&&ke!==Le&&(ie=ie||[]).push(st,Le)):st==="children"?typeof Le!="string"&&typeof Le!="number"||(ie=ie||[]).push(st,""+Le):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&(i.hasOwnProperty(st)?(Le!=null&&st==="onScroll"&&Wi("scroll",v),ie||ke===Le||(ie=[])):(ie=ie||[]).push(st,Le))}N&&(ie=ie||[]).push("style",N);var st=ie;(_.updateQueue=st)&&(_.flags|=4)}},SC=function(v,_,N,U){N!==U&&(_.flags|=4)};function Ix(v,_){if(!bi)switch(v.tailMode){case"hidden":_=v.tail;for(var N=null;_!==null;)_.alternate!==null&&(N=_),_=_.sibling;N===null?v.tail=null:N.sibling=null;break;case"collapsed":N=v.tail;for(var U=null;N!==null;)N.alternate!==null&&(U=N),N=N.sibling;U===null?_||v.tail===null?v.tail=null:v.tail.sibling=null:U.sibling=null}}function uu(v){var _=v.alternate!==null&&v.alternate.child===v.child,N=0,U=0;if(_)for(var Q=v.child;Q!==null;)N|=Q.lanes|Q.childLanes,U|=Q.subtreeFlags&14680064,U|=Q.flags&14680064,Q.return=v,Q=Q.sibling;else for(Q=v.child;Q!==null;)N|=Q.lanes|Q.childLanes,U|=Q.subtreeFlags,U|=Q.flags,Q.return=v,Q=Q.sibling;return v.subtreeFlags|=U,v.childLanes=N,_}function T7(v,_,N){var U=_.pendingProps;switch(Is(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return uu(_),null;case 1:return La(_.type)&&nm(),uu(_),null;case 3:return U=_.stateNode,Yi(),Gi(Oa),Gi(oa),ca(),U.pendingContext&&(U.context=U.pendingContext,U.pendingContext=null),(v===null||v.child===null)&&(im(_)?_.flags|=4:v===null||v.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,el!==null&&(OC(el),el=null))),EC(v,_),uu(_),null;case 5:kf(_);var Q=Vs(Ns.current);if(N=_.type,v!==null&&_.stateNode!=null)FI(v,_,N,U,Q),v.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!U){if(_.stateNode===null)throw Error(n(166));return uu(_),null}if(v=Vs($i.current),im(_)){U=_.stateNode,N=_.type;var ie=_.memoizedProps;switch(U[Ul]=_,U[kh]=ie,v=(_.mode&1)!==0,N){case"dialog":Wi("cancel",U),Wi("close",U);break;case"iframe":case"object":case"embed":Wi("load",U);break;case"video":case"audio":for(Q=0;Q<jl.length;Q++)Wi(jl[Q],U);break;case"source":Wi("error",U);break;case"img":case"image":case"link":Wi("error",U),Wi("load",U);break;case"details":Wi("toggle",U);break;case"input":Ye(U,ie),Wi("invalid",U);break;case"select":U._wrapperState={wasMultiple:!!ie.multiple},Wi("invalid",U);break;case"textarea":Ke(U,ie),Wi("invalid",U)}nr(N,ie),Q=null;for(var he in ie)if(ie.hasOwnProperty(he)){var ke=ie[he];he==="children"?typeof ke=="string"?U.textContent!==ke&&(ie.suppressHydrationWarning!==!0&&tm(U.textContent,ke,v),Q=["children",ke]):typeof ke=="number"&&U.textContent!==""+ke&&(ie.suppressHydrationWarning!==!0&&tm(U.textContent,ke,v),Q=["children",""+ke]):i.hasOwnProperty(he)&&ke!=null&&he==="onScroll"&&Wi("scroll",U)}switch(N){case"input":ge(U),nt(U,ie,!0);break;case"textarea":ge(U),sn(U);break;case"select":case"option":break;default:typeof ie.onClick=="function"&&(U.onclick=Cp)}U=Q,_.updateQueue=U,U!==null&&(_.flags|=4)}else{he=Q.nodeType===9?Q:Q.ownerDocument,v==="http://www.w3.org/1999/xhtml"&&(v=Fe(N)),v==="http://www.w3.org/1999/xhtml"?N==="script"?(v=he.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild)):typeof U.is=="string"?v=he.createElement(N,{is:U.is}):(v=he.createElement(N),N==="select"&&(he=v,U.multiple?he.multiple=!0:U.size&&(he.size=U.size))):v=he.createElementNS(v,N),v[Ul]=_,v[kh]=U,au(v,_,!1,!1),_.stateNode=v;e:{switch(he=Ei(N,U),N){case"dialog":Wi("cancel",v),Wi("close",v),Q=U;break;case"iframe":case"object":case"embed":Wi("load",v),Q=U;break;case"video":case"audio":for(Q=0;Q<jl.length;Q++)Wi(jl[Q],v);Q=U;break;case"source":Wi("error",v),Q=U;break;case"img":case"image":case"link":Wi("error",v),Wi("load",v),Q=U;break;case"details":Wi("toggle",v),Q=U;break;case"input":Ye(v,U),Q=Me(v,U),Wi("invalid",v);break;case"option":Q=U;break;case"select":v._wrapperState={wasMultiple:!!U.multiple},Q=X({},U,{value:void 0}),Wi("invalid",v);break;case"textarea":Ke(v,U),Q=Et(v,U),Wi("invalid",v);break;default:Q=U}nr(N,Q),ke=Q;for(ie in ke)if(ke.hasOwnProperty(ie)){var Le=ke[ie];ie==="style"?wr(v,Le):ie==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Le!=null&&Vt(v,Le)):ie==="children"?typeof Le=="string"?(N!=="textarea"||Le!=="")&&Wt(v,Le):typeof Le=="number"&&Wt(v,""+Le):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(i.hasOwnProperty(ie)?Le!=null&&ie==="onScroll"&&Wi("scroll",v):Le!=null&&x(v,ie,Le,he))}switch(N){case"input":ge(v),nt(v,U,!1);break;case"textarea":ge(v),sn(v);break;case"option":U.value!=null&&v.setAttribute("value",""+pe(U.value));break;case"select":v.multiple=!!U.multiple,ie=U.value,ie!=null?It(v,!!U.multiple,ie,!1):U.defaultValue!=null&&It(v,!!U.multiple,U.defaultValue,!0);break;default:typeof Q.onClick=="function"&&(v.onclick=Cp)}switch(N){case"button":case"input":case"select":case"textarea":U=!!U.autoFocus;break e;case"img":U=!0;break e;default:U=!1}}U&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return uu(_),null;case 6:if(v&&_.stateNode!=null)SC(v,_,v.memoizedProps,U);else{if(typeof U!="string"&&_.stateNode===null)throw Error(n(166));if(N=Vs(Ns.current),Vs($i.current),im(_)){if(U=_.stateNode,N=_.memoizedProps,U[Ul]=_,(ie=U.nodeValue!==N)&&(v=Fa,v!==null))switch(v.tag){case 3:tm(U.nodeValue,N,(v.mode&1)!==0);break;case 5:v.memoizedProps.suppressHydrationWarning!==!0&&tm(U.nodeValue,N,(v.mode&1)!==0)}ie&&(_.flags|=4)}else U=(N.nodeType===9?N:N.ownerDocument).createTextNode(U),U[Ul]=_,_.stateNode=U}return uu(_),null;case 13:if(Gi(Bi),U=_.memoizedState,v===null||v.memoizedState!==null&&v.memoizedState.dehydrated!==null){if(bi&&nn!==null&&_.mode&1&&!(_.flags&128))nv(),Oc(),_.flags|=98560,ie=!1;else if(ie=im(_),U!==null&&U.dehydrated!==null){if(v===null){if(!ie)throw Error(n(318));if(ie=_.memoizedState,ie=ie!==null?ie.dehydrated:null,!ie)throw Error(n(317));ie[Ul]=_}else Oc(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;uu(_),ie=!1}else el!==null&&(OC(el),el=null),ie=!0;if(!ie)return _.flags&65536?_:null}return _.flags&128?(_.lanes=N,_):(U=U!==null,U!==(v!==null&&v.memoizedState!==null)&&U&&(_.child.flags|=8192,_.mode&1&&(v===null||Bi.current&1?fa===0&&(fa=3):FC())),_.updateQueue!==null&&(_.flags|=4),uu(_),null);case 4:return Yi(),EC(v,_),v===null&&_f(_.stateNode.containerInfo),uu(_),null;case 10:return Jg(_.type._context),uu(_),null;case 17:return La(_.type)&&nm(),uu(_),null;case 19:if(Gi(Bi),ie=_.memoizedState,ie===null)return uu(_),null;if(U=(_.flags&128)!==0,he=ie.rendering,he===null)if(U)Ix(ie,!1);else{if(fa!==0||v!==null&&v.flags&128)for(v=_.child;v!==null;){if(he=Td(v),he!==null){for(_.flags|=128,Ix(ie,!1),U=he.updateQueue,U!==null&&(_.updateQueue=U,_.flags|=4),_.subtreeFlags=0,U=N,N=_.child;N!==null;)ie=N,v=U,ie.flags&=14680066,he=ie.alternate,he===null?(ie.childLanes=0,ie.lanes=v,ie.child=null,ie.subtreeFlags=0,ie.memoizedProps=null,ie.memoizedState=null,ie.updateQueue=null,ie.dependencies=null,ie.stateNode=null):(ie.childLanes=he.childLanes,ie.lanes=he.lanes,ie.child=he.child,ie.subtreeFlags=0,ie.deletions=null,ie.memoizedProps=he.memoizedProps,ie.memoizedState=he.memoizedState,ie.updateQueue=he.updateQueue,ie.type=he.type,v=he.dependencies,ie.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),N=N.sibling;return Fi(Bi,Bi.current&1|2),_.child}v=v.sibling}ie.tail!==null&&Er()>ly&&(_.flags|=128,U=!0,Ix(ie,!1),_.lanes=4194304)}else{if(!U)if(v=Td(he),v!==null){if(_.flags|=128,U=!0,N=v.updateQueue,N!==null&&(_.updateQueue=N,_.flags|=4),Ix(ie,!0),ie.tail===null&&ie.tailMode==="hidden"&&!he.alternate&&!bi)return uu(_),null}else 2*Er()-ie.renderingStartTime>ly&&N!==1073741824&&(_.flags|=128,U=!0,Ix(ie,!1),_.lanes=4194304);ie.isBackwards?(he.sibling=_.child,_.child=he):(N=ie.last,N!==null?N.sibling=he:_.child=he,ie.last=he)}return ie.tail!==null?(_=ie.tail,ie.rendering=_,ie.tail=_.sibling,ie.renderingStartTime=Er(),_.sibling=null,N=Bi.current,Fi(Bi,U?N&1|2:N&1),_):(uu(_),null);case 22:case 23:return LC(),U=_.memoizedState!==null,v!==null&&v.memoizedState!==null!==U&&(_.flags|=8192),U&&_.mode&1?Uc&1073741824&&(uu(_),_.subtreeFlags&6&&(_.flags|=8192)):uu(_),null;case 24:return null;case 25:return null}throw Error(n(156,_.tag))}function C7(v,_){switch(Is(_),_.tag){case 1:return La(_.type)&&nm(),v=_.flags,v&65536?(_.flags=v&-65537|128,_):null;case 3:return Yi(),Gi(Oa),Gi(oa),ca(),v=_.flags,v&65536&&!(v&128)?(_.flags=v&-65537|128,_):null;case 5:return kf(_),null;case 13:if(Gi(Bi),v=_.memoizedState,v!==null&&v.dehydrated!==null){if(_.alternate===null)throw Error(n(340));Oc()}return v=_.flags,v&65536?(_.flags=v&-65537|128,_):null;case 19:return Gi(Bi),null;case 4:return Yi(),null;case 10:return Jg(_.type._context),null;case 22:case 23:return LC(),null;case 24:return null;default:return null}}var v2=!1,Os=!1,il=typeof WeakSet=="function"?WeakSet:Set,vn=null;function lv(v,_){var N=v.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(U){Ws(v,_,U)}else N.current=null}function Px(v,_,N){try{N()}catch(U){Ws(v,_,U)}}var $I=!1;function A7(v,_){if(Wg=Ce,v=er(),_h(v)){if("selectionStart"in v)var N={start:v.selectionStart,end:v.selectionEnd};else e:{N=(N=v.ownerDocument)&&N.defaultView||window;var U=N.getSelection&&N.getSelection();if(U&&U.rangeCount!==0){N=U.anchorNode;var Q=U.anchorOffset,ie=U.focusNode;U=U.focusOffset;try{N.nodeType,ie.nodeType}catch{N=null;break e}var he=0,ke=-1,Le=-1,st=0,Ot=0,Ut=v,Dt=null;t:for(;;){for(var pn;Ut!==N||Q!==0&&Ut.nodeType!==3||(ke=he+Q),Ut!==ie||U!==0&&Ut.nodeType!==3||(Le=he+U),Ut.nodeType===3&&(he+=Ut.nodeValue.length),(pn=Ut.firstChild)!==null;)Dt=Ut,Ut=pn;for(;;){if(Ut===v)break t;if(Dt===N&&++st===Q&&(ke=he),Dt===ie&&++Ot===U&&(Le=he),(pn=Ut.nextSibling)!==null)break;Ut=Dt,Dt=Ut.parentNode}Ut=pn}N=ke===-1||Le===-1?null:{start:ke,end:Le}}else N=null}N=N||{start:0,end:0}}else N=null;for(Ap={focusedElem:v,selectionRange:N},Ce=!1,vn=_;vn!==null;)if(_=vn,v=_.child,(_.subtreeFlags&1028)!==0&&v!==null)v.return=_,vn=v;else for(;vn!==null;){_=vn;try{var En=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(En!==null){var Tn=En.memoizedProps,oo=En.memoizedState,Je=_.stateNode,Ue=Je.getSnapshotBeforeUpdate(_.elementType===_.type?Tn:Lo(_.type,Tn),oo);Je.__reactInternalSnapshotBeforeUpdate=Ue}break;case 3:var tt=_.stateNode.containerInfo;tt.nodeType===1?tt.textContent="":tt.nodeType===9&&tt.documentElement&&tt.removeChild(tt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Yt){Ws(_,_.return,Yt)}if(v=_.sibling,v!==null){v.return=_.return,vn=v;break}vn=_.return}return En=$I,$I=!1,En}function Gp(v,_,N){var U=_.updateQueue;if(U=U!==null?U.lastEffect:null,U!==null){var Q=U=U.next;do{if((Q.tag&v)===v){var ie=Q.destroy;Q.destroy=void 0,ie!==void 0&&Px(_,N,ie)}Q=Q.next}while(Q!==U)}}function Nx(v,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var N=_=_.next;do{if((N.tag&v)===v){var U=N.create;N.destroy=U()}N=N.next}while(N!==_)}}function b2(v){var _=v.ref;if(_!==null){var N=v.stateNode;switch(v.tag){case 5:v=N;break;default:v=N}typeof _=="function"?_(v):_.current=v}}function BI(v){var _=v.alternate;_!==null&&(v.alternate=null,BI(_)),v.child=null,v.deletions=null,v.sibling=null,v.tag===5&&(_=v.stateNode,_!==null&&(delete _[Ul],delete _[kh],delete _[Kg],delete _[ye],delete _[Pp])),v.stateNode=null,v.return=null,v.dependencies=null,v.memoizedProps=null,v.memoizedState=null,v.pendingProps=null,v.stateNode=null,v.updateQueue=null}function jI(v){return v.tag===5||v.tag===3||v.tag===4}function UI(v){e:for(;;){for(;v.sibling===null;){if(v.return===null||jI(v.return))return null;v=v.return}for(v.sibling.return=v.return,v=v.sibling;v.tag!==5&&v.tag!==6&&v.tag!==18;){if(v.flags&2||v.child===null||v.tag===4)continue e;v.child.return=v,v=v.child}if(!(v.flags&2))return v.stateNode}}function TC(v,_,N){var U=v.tag;if(U===5||U===6)v=v.stateNode,_?N.nodeType===8?N.parentNode.insertBefore(v,_):N.insertBefore(v,_):(N.nodeType===8?(_=N.parentNode,_.insertBefore(v,N)):(_=N,_.appendChild(v)),N=N._reactRootContainer,N!=null||_.onclick!==null||(_.onclick=Cp));else if(U!==4&&(v=v.child,v!==null))for(TC(v,_,N),v=v.sibling;v!==null;)TC(v,_,N),v=v.sibling}function x2(v,_,N){var U=v.tag;if(U===5||U===6)v=v.stateNode,_?N.insertBefore(v,_):N.appendChild(v);else if(U!==4&&(v=v.child,v!==null))for(x2(v,_,N),v=v.sibling;v!==null;)x2(v,_,N),v=v.sibling}var ja=null,Id=!1;function Bh(v,_,N){for(N=N.child;N!==null;)CC(v,_,N),N=N.sibling}function CC(v,_,N){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(ea,N)}catch{}switch(N.tag){case 5:Os||lv(N,_);case 6:var U=ja,Q=Id;ja=null,Bh(v,_,N),ja=U,Id=Q,ja!==null&&(Id?(v=ja,N=N.stateNode,v.nodeType===8?v.parentNode.removeChild(N):v.removeChild(N)):ja.removeChild(N.stateNode));break;case 18:ja!==null&&(Id?(v=ja,N=N.stateNode,v.nodeType===8?X1(v.parentNode,N):v.nodeType===1&&X1(v,N),Gn(v)):X1(ja,N.stateNode));break;case 4:U=ja,Q=Id,ja=N.stateNode.containerInfo,Id=!0,Bh(v,_,N),ja=U,Id=Q;break;case 0:case 11:case 14:case 15:if(!Os&&(U=N.updateQueue,U!==null&&(U=U.lastEffect,U!==null))){Q=U=U.next;do{var ie=Q,he=ie.destroy;ie=ie.tag,he!==void 0&&(ie&2||ie&4)&&Px(N,_,he),Q=Q.next}while(Q!==U)}Bh(v,_,N);break;case 1:if(!Os&&(lv(N,_),U=N.stateNode,typeof U.componentWillUnmount=="function"))try{U.props=N.memoizedProps,U.state=N.memoizedState,U.componentWillUnmount()}catch(ke){Ws(N,_,ke)}Bh(v,_,N);break;case 21:Bh(v,_,N);break;case 22:N.mode&1?(Os=(U=Os)||N.memoizedState!==null,Bh(v,_,N),Os=U):Bh(v,_,N);break;default:Bh(v,_,N)}}function cv(v){var _=v.updateQueue;if(_!==null){v.updateQueue=null;var N=v.stateNode;N===null&&(N=v.stateNode=new il),_.forEach(function(U){var Q=O7.bind(null,v,U);N.has(U)||(N.add(U),U.then(Q,Q))})}}function jc(v,_){var N=_.deletions;if(N!==null)for(var U=0;U<N.length;U++){var Q=N[U];try{var ie=v,he=_,ke=he;e:for(;ke!==null;){switch(ke.tag){case 5:ja=ke.stateNode,Id=!1;break e;case 3:ja=ke.stateNode.containerInfo,Id=!0;break e;case 4:ja=ke.stateNode.containerInfo,Id=!0;break e}ke=ke.return}if(ja===null)throw Error(n(160));CC(ie,he,Q),ja=null,Id=!1;var Le=Q.alternate;Le!==null&&(Le.return=null),Q.return=null}catch(st){Ws(Q,_,st)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)AC(_,v),_=_.sibling}function AC(v,_){var N=v.alternate,U=v.flags;switch(v.tag){case 0:case 11:case 14:case 15:if(jc(_,v),Pd(v),U&4){try{Gp(3,v,v.return),Nx(3,v)}catch(Tn){Ws(v,v.return,Tn)}try{Gp(5,v,v.return)}catch(Tn){Ws(v,v.return,Tn)}}break;case 1:jc(_,v),Pd(v),U&512&&N!==null&&lv(N,N.return);break;case 5:if(jc(_,v),Pd(v),U&512&&N!==null&&lv(N,N.return),v.flags&32){var Q=v.stateNode;try{Wt(Q,"")}catch(Tn){Ws(v,v.return,Tn)}}if(U&4&&(Q=v.stateNode,Q!=null)){var ie=v.memoizedProps,he=N!==null?N.memoizedProps:ie,ke=v.type,Le=v.updateQueue;if(v.updateQueue=null,Le!==null)try{ke==="input"&&ie.type==="radio"&&ie.name!=null&&lt(Q,ie),Ei(ke,he);var st=Ei(ke,ie);for(he=0;he<Le.length;he+=2){var Ot=Le[he],Ut=Le[he+1];Ot==="style"?wr(Q,Ut):Ot==="dangerouslySetInnerHTML"?Vt(Q,Ut):Ot==="children"?Wt(Q,Ut):x(Q,Ot,Ut,st)}switch(ke){case"input":We(Q,ie);break;case"textarea":Lt(Q,ie);break;case"select":var Dt=Q._wrapperState.wasMultiple;Q._wrapperState.wasMultiple=!!ie.multiple;var pn=ie.value;pn!=null?It(Q,!!ie.multiple,pn,!1):Dt!==!!ie.multiple&&(ie.defaultValue!=null?It(Q,!!ie.multiple,ie.defaultValue,!0):It(Q,!!ie.multiple,ie.multiple?[]:"",!1))}Q[kh]=ie}catch(Tn){Ws(v,v.return,Tn)}}break;case 6:if(jc(_,v),Pd(v),U&4){if(v.stateNode===null)throw Error(n(162));Q=v.stateNode,ie=v.memoizedProps;try{Q.nodeValue=ie}catch(Tn){Ws(v,v.return,Tn)}}break;case 3:if(jc(_,v),Pd(v),U&4&&N!==null&&N.memoizedState.isDehydrated)try{Gn(_.containerInfo)}catch(Tn){Ws(v,v.return,Tn)}break;case 4:jc(_,v),Pd(v);break;case 13:jc(_,v),Pd(v),Q=v.child,Q.flags&8192&&(ie=Q.memoizedState!==null,Q.stateNode.isHidden=ie,!ie||Q.alternate!==null&&Q.alternate.memoizedState!==null||(IC=Er())),U&4&&cv(v);break;case 22:if(Ot=N!==null&&N.memoizedState!==null,v.mode&1?(Os=(st=Os)||Ot,jc(_,v),Os=st):jc(_,v),Pd(v),U&8192){if(st=v.memoizedState!==null,(v.stateNode.isHidden=st)&&!Ot&&v.mode&1)for(vn=v,Ot=v.child;Ot!==null;){for(Ut=vn=Ot;vn!==null;){switch(Dt=vn,pn=Dt.child,Dt.tag){case 0:case 11:case 14:case 15:Gp(4,Dt,Dt.return);break;case 1:lv(Dt,Dt.return);var En=Dt.stateNode;if(typeof En.componentWillUnmount=="function"){U=Dt,N=Dt.return;try{_=U,En.props=_.memoizedProps,En.state=_.memoizedState,En.componentWillUnmount()}catch(Tn){Ws(U,N,Tn)}}break;case 5:lv(Dt,Dt.return);break;case 22:if(Dt.memoizedState!==null){fm(Ut);continue}}pn!==null?(pn.return=Dt,vn=pn):fm(Ut)}Ot=Ot.sibling}e:for(Ot=null,Ut=v;;){if(Ut.tag===5){if(Ot===null){Ot=Ut;try{Q=Ut.stateNode,st?(ie=Q.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none"):(ke=Ut.stateNode,Le=Ut.memoizedProps.style,he=Le!=null&&Le.hasOwnProperty("display")?Le.display:null,ke.style.display=Zn("display",he))}catch(Tn){Ws(v,v.return,Tn)}}}else if(Ut.tag===6){if(Ot===null)try{Ut.stateNode.nodeValue=st?"":Ut.memoizedProps}catch(Tn){Ws(v,v.return,Tn)}}else if((Ut.tag!==22&&Ut.tag!==23||Ut.memoizedState===null||Ut===v)&&Ut.child!==null){Ut.child.return=Ut,Ut=Ut.child;continue}if(Ut===v)break e;for(;Ut.sibling===null;){if(Ut.return===null||Ut.return===v)break e;Ot===Ut&&(Ot=null),Ut=Ut.return}Ot===Ut&&(Ot=null),Ut.sibling.return=Ut.return,Ut=Ut.sibling}}break;case 19:jc(_,v),Pd(v),U&4&&cv(v);break;case 21:break;default:jc(_,v),Pd(v)}}function Pd(v){var _=v.flags;if(_&2){try{e:{for(var N=v.return;N!==null;){if(jI(N)){var U=N;break e}N=N.return}throw Error(n(160))}switch(U.tag){case 5:var Q=U.stateNode;U.flags&32&&(Wt(Q,""),U.flags&=-33);var ie=UI(v);x2(v,ie,Q);break;case 3:case 4:var he=U.stateNode.containerInfo,ke=UI(v);TC(v,ke,he);break;default:throw Error(n(161))}}catch(Le){Ws(v,v.return,Le)}v.flags&=-3}_&4096&&(v.flags&=-4097)}function _2(v,_,N){vn=v,kC(v)}function kC(v,_,N){for(var U=(v.mode&1)!==0;vn!==null;){var Q=vn,ie=Q.child;if(Q.tag===22&&U){var he=Q.memoizedState!==null||v2;if(!he){var ke=Q.alternate,Le=ke!==null&&ke.memoizedState!==null||Os;ke=v2;var st=Os;if(v2=he,(Os=Le)&&!st)for(vn=Q;vn!==null;)he=vn,Le=he.child,he.tag===22&&he.memoizedState!==null?zI(Q):Le!==null?(Le.return=he,vn=Le):zI(Q);for(;ie!==null;)vn=ie,kC(ie),ie=ie.sibling;vn=Q,v2=ke,Os=st}Nd(v)}else Q.subtreeFlags&8772&&ie!==null?(ie.return=Q,vn=ie):Nd(v)}}function Nd(v){for(;vn!==null;){var _=vn;if(_.flags&8772){var N=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:Os||Nx(5,_);break;case 1:var U=_.stateNode;if(_.flags&4&&!Os)if(N===null)U.componentDidMount();else{var Q=_.elementType===_.type?N.memoizedProps:Lo(_.type,N.memoizedProps);U.componentDidUpdate(Q,N.memoizedState,U.__reactInternalSnapshotBeforeUpdate)}var ie=_.updateQueue;ie!==null&&Ss(_,ie,U);break;case 3:var he=_.updateQueue;if(he!==null){if(N=null,_.child!==null)switch(_.child.tag){case 5:N=_.child.stateNode;break;case 1:N=_.child.stateNode}Ss(_,he,N)}break;case 5:var ke=_.stateNode;if(N===null&&_.flags&4){N=ke;var Le=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":Le.autoFocus&&N.focus();break;case"img":Le.src&&(N.src=Le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var st=_.alternate;if(st!==null){var Ot=st.memoizedState;if(Ot!==null){var Ut=Ot.dehydrated;Ut!==null&&Gn(Ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Os||_.flags&512&&b2(_)}catch(Dt){Ws(_,_.return,Dt)}}if(_===v){vn=null;break}if(N=_.sibling,N!==null){N.return=_.return,vn=N;break}vn=_.return}}function fm(v){for(;vn!==null;){var _=vn;if(_===v){vn=null;break}var N=_.sibling;if(N!==null){N.return=_.return,vn=N;break}vn=_.return}}function zI(v){for(;vn!==null;){var _=vn;try{switch(_.tag){case 0:case 11:case 15:var N=_.return;try{Nx(4,_)}catch(Le){Ws(_,N,Le)}break;case 1:var U=_.stateNode;if(typeof U.componentDidMount=="function"){var Q=_.return;try{U.componentDidMount()}catch(Le){Ws(_,Q,Le)}}var ie=_.return;try{b2(_)}catch(Le){Ws(_,ie,Le)}break;case 5:var he=_.return;try{b2(_)}catch(Le){Ws(_,he,Le)}}}catch(Le){Ws(_,_.return,Le)}if(_===v){vn=null;break}var ke=_.sibling;if(ke!==null){ke.return=_.return,vn=ke;break}vn=_.return}}var VI=Math.ceil,w2=w.ReactCurrentDispatcher,RC=w.ReactCurrentOwner,Df=w.ReactCurrentBatchConfig,ui=0,Ua=null,Bo=null,lu=0,Uc=0,fv=Ja(0),fa=0,Dx=null,dm=0,Ox=0,E2=0,Mx=null,Vl=null,IC=0,ly=1/0,Yp=null,S2=!1,PC=null,hm=null,T2=!1,pm=null,sl=0,Lx=0,NC=null,C2=-1,Fx=0;function ol(){return ui&6?Er():C2!==-1?C2:C2=Er()}function mm(v){return v.mode&1?ui&2&&lu!==0?lu&-lu:rv.transition!==null?(Fx===0&&(Fx=jt()),Fx):(v=_n,v!==0||(v=window.event,v=v===void 0?16:gi(v.type)),v):1}function Dd(v,_,N,U){if(50<Lx)throw Lx=0,NC=null,Error(n(185));qn(v,N,U),(!(ui&2)||v!==Ua)&&(v===Ua&&(!(ui&2)&&(Ox|=N),fa===4&&gm(v,lu)),Hl(v,U),N===1&&ui===0&&!(_.mode&1)&&(ly=Er()+500,rm&&Rh()))}function Hl(v,_){var N=v.callbackNode;Nt(v,_);var U=ht(v,v===Ua?lu:0);if(U===0)N!==null&&xc(N),v.callbackNode=null,v.callbackPriority=0;else if(_=U&-U,v.callbackPriority!==_){if(N!=null&&xc(N),_===1)v.tag===0?eu(HI.bind(null,v)):Xg(HI.bind(null,v)),Yg(function(){!(ui&6)&&Rh()}),N=null;else{switch(br(U)){case 1:N=xs;break;case 4:N=Xa;break;case 16:N=As;break;case 536870912:N=Sc;break;default:N=As}N=QI(N,A2.bind(null,v))}v.callbackPriority=_,v.callbackNode=N}}function A2(v,_){if(C2=-1,Fx=0,ui&6)throw Error(n(327));var N=v.callbackNode;if(dv()&&v.callbackNode!==N)return null;var U=ht(v,v===Ua?lu:0);if(U===0)return null;if(U&30||U&v.expiredLanes||_)_=k2(v,U);else{_=U;var Q=ui;ui|=2;var ie=WI();(Ua!==v||lu!==_)&&(Yp=null,ly=Er()+500,fy(v,_));do try{I7();break}catch(ke){qI(v,ke)}while(!0);Tf(),w2.current=ie,ui=Q,Bo!==null?_=0:(Ua=null,lu=0,_=fa)}if(_!==0){if(_===2&&(Q=Rt(v),Q!==0&&(U=Q,_=DC(v,Q))),_===1)throw N=Dx,fy(v,0),gm(v,U),Hl(v,Er()),N;if(_===6)gm(v,U);else{if(Q=v.current.alternate,!(U&30)&&!k7(Q)&&(_=k2(v,U),_===2&&(ie=Rt(v),ie!==0&&(U=ie,_=DC(v,ie))),_===1))throw N=Dx,fy(v,0),gm(v,U),Hl(v,Er()),N;switch(v.finishedWork=Q,v.finishedLanes=U,_){case 0:case 1:throw Error(n(345));case 2:dy(v,Vl,Yp);break;case 3:if(gm(v,U),(U&130023424)===U&&(_=IC+500-Er(),10<_)){if(ht(v,0)!==0)break;if(Q=v.suspendedLanes,(Q&U)!==U){ol(),v.pingedLanes|=v.suspendedLanes&Q;break}v.timeoutHandle=Do(dy.bind(null,v,Vl,Yp),_);break}dy(v,Vl,Yp);break;case 4:if(gm(v,U),(U&4194240)===U)break;for(_=v.eventTimes,Q=-1;0<U;){var he=31-rr(U);ie=1<<he,he=_[he],he>Q&&(Q=he),U&=~ie}if(U=Q,U=Er()-U,U=(120>U?120:480>U?480:1080>U?1080:1920>U?1920:3e3>U?3e3:4320>U?4320:1960*VI(U/1960))-U,10<U){v.timeoutHandle=Do(dy.bind(null,v,Vl,Yp),U);break}dy(v,Vl,Yp);break;case 5:dy(v,Vl,Yp);break;default:throw Error(n(329))}}}return Hl(v,Er()),v.callbackNode===N?A2.bind(null,v):null}function DC(v,_){var N=Mx;return v.current.memoizedState.isDehydrated&&(fy(v,_).flags|=256),v=k2(v,_),v!==2&&(_=Vl,Vl=N,_!==null&&OC(_)),v}function OC(v){Vl===null?Vl=v:Vl.push.apply(Vl,v)}function k7(v){for(var _=v;;){if(_.flags&16384){var N=_.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var U=0;U<N.length;U++){var Q=N[U],ie=Q.getSnapshot;Q=Q.value;try{if(!et(ie(),Q))return!1}catch{return!1}}}if(N=_.child,_.subtreeFlags&16384&&N!==null)N.return=_,_=N;else{if(_===v)break;for(;_.sibling===null;){if(_.return===null||_.return===v)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function gm(v,_){for(_&=~E2,_&=~Ox,v.suspendedLanes|=_,v.pingedLanes&=~_,v=v.expirationTimes;0<_;){var N=31-rr(_),U=1<<N;v[N]=-1,_&=~U}}function HI(v){if(ui&6)throw Error(n(327));dv();var _=ht(v,0);if(!(_&1))return Hl(v,Er()),null;var N=k2(v,_);if(v.tag!==0&&N===2){var U=Rt(v);U!==0&&(_=U,N=DC(v,U))}if(N===1)throw N=Dx,fy(v,0),gm(v,_),Hl(v,Er()),N;if(N===6)throw Error(n(345));return v.finishedWork=v.current.alternate,v.finishedLanes=_,dy(v,Vl,Yp),Hl(v,Er()),null}function MC(v,_){var N=ui;ui|=1;try{return v(_)}finally{ui=N,ui===0&&(ly=Er()+500,rm&&Rh())}}function cy(v){pm!==null&&pm.tag===0&&!(ui&6)&&dv();var _=ui;ui|=1;var N=Df.transition,U=_n;try{if(Df.transition=null,_n=1,v)return v()}finally{_n=U,Df.transition=N,ui=_,!(ui&6)&&Rh()}}function LC(){Uc=fv.current,Gi(fv)}function fy(v,_){v.finishedWork=null,v.finishedLanes=0;var N=v.timeoutHandle;if(N!==-1&&(v.timeoutHandle=-1,kp(N)),Bo!==null)for(N=Bo.return;N!==null;){var U=N;switch(Is(U),U.tag){case 1:U=U.type.childContextTypes,U!=null&&nm();break;case 3:Yi(),Gi(Oa),Gi(oa),ca();break;case 5:kf(U);break;case 4:Yi();break;case 13:Gi(Bi);break;case 19:Gi(Bi);break;case 10:Jg(U.type._context);break;case 22:case 23:LC()}N=N.return}if(Ua=v,Bo=v=Od(v.current,null),lu=Uc=_,fa=0,Dx=null,E2=Ox=dm=0,Vl=Mx=null,Cf!==null){for(_=0;_<Cf.length;_++)if(N=Cf[_],U=N.interleaved,U!==null){N.interleaved=null;var Q=U.next,ie=N.pending;if(ie!==null){var he=ie.next;ie.next=Q,U.next=he}N.pending=U}Cf=null}return v}function qI(v,_){do{var N=Bo;try{if(Tf(),Bp.current=lm,rl){for(var U=Ti.memoizedState;U!==null;){var Q=U.queue;Q!==null&&(Q.pending=null),U=U.next}rl=!1}if($a=0,Hs=ds=Ti=null,Fh=!1,Au=0,RC.current=null,N===null||N.return===null){fa=1,Dx=_,Bo=null;break}e:{var ie=v,he=N.return,ke=N,Le=_;if(_=lu,ke.flags|=32768,Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var st=Le,Ot=ke,Ut=Ot.tag;if(!(Ot.mode&1)&&(Ut===0||Ut===11||Ut===15)){var Dt=Ot.alternate;Dt?(Ot.updateQueue=Dt.updateQueue,Ot.memoizedState=Dt.memoizedState,Ot.lanes=Dt.lanes):(Ot.updateQueue=null,Ot.memoizedState=null)}var pn=$(he);if(pn!==null){pn.flags&=-257,Y(pn,he,ke,ie,_),pn.mode&1&&k(ie,st,_),_=pn,Le=st;var En=_.updateQueue;if(En===null){var Tn=new Set;Tn.add(Le),_.updateQueue=Tn}else En.add(Le);break e}else{if(!(_&1)){k(ie,st,_),FC();break e}Le=Error(n(426))}}else if(bi&&ke.mode&1){var oo=$(he);if(oo!==null){!(oo.flags&65536)&&(oo.flags|=256),Y(oo,he,ke,ie,_),zl($h(Le,ke));break e}}ie=Le=$h(Le,ke),fa!==4&&(fa=2),Mx===null?Mx=[ie]:Mx.push(ie),ie=he;do{switch(ie.tag){case 3:ie.flags|=65536,_&=-_,ie.lanes|=_;var Je=uy(ie,Le,_);Zg(ie,Je);break e;case 1:ke=Le;var Ue=ie.type,tt=ie.stateNode;if(!(ie.flags&128)&&(typeof Ue.getDerivedStateFromError=="function"||tt!==null&&typeof tt.componentDidCatch=="function"&&(hm===null||!hm.has(tt)))){ie.flags|=65536,_&=-_,ie.lanes|=_;var Yt=T(ie,ke,_);Zg(ie,Yt);break e}}ie=ie.return}while(ie!==null)}YI(N)}catch(Cn){_=Cn,Bo===N&&N!==null&&(Bo=N=N.return);continue}break}while(!0)}function WI(){var v=w2.current;return w2.current=lm,v===null?lm:v}function FC(){(fa===0||fa===3||fa===2)&&(fa=4),Ua===null||!(dm&268435455)&&!(Ox&268435455)||gm(Ua,lu)}function k2(v,_){var N=ui;ui|=2;var U=WI();(Ua!==v||lu!==_)&&(Yp=null,fy(v,_));do try{R7();break}catch(Q){qI(v,Q)}while(!0);if(Tf(),ui=N,w2.current=U,Bo!==null)throw Error(n(261));return Ua=null,lu=0,fa}function R7(){for(;Bo!==null;)GI(Bo)}function I7(){for(;Bo!==null&&!_c();)GI(Bo)}function GI(v){var _=XI(v.alternate,v,Uc);v.memoizedProps=v.pendingProps,_===null?YI(v):Bo=_,RC.current=null}function YI(v){var _=v;do{var N=_.alternate;if(v=_.return,_.flags&32768){if(N=C7(N,_),N!==null){N.flags&=32767,Bo=N;return}if(v!==null)v.flags|=32768,v.subtreeFlags=0,v.deletions=null;else{fa=6,Bo=null;return}}else if(N=T7(N,_,Uc),N!==null){Bo=N;return}if(_=_.sibling,_!==null){Bo=_;return}Bo=_=v}while(_!==null);fa===0&&(fa=5)}function dy(v,_,N){var U=_n,Q=Df.transition;try{Df.transition=null,_n=1,P7(v,_,N,U)}finally{Df.transition=Q,_n=U}return null}function P7(v,_,N,U){do dv();while(pm!==null);if(ui&6)throw Error(n(327));N=v.finishedWork;var Q=v.finishedLanes;if(N===null)return null;if(v.finishedWork=null,v.finishedLanes=0,N===v.current)throw Error(n(177));v.callbackNode=null,v.callbackPriority=0;var ie=N.lanes|N.childLanes;if(Sn(v,ie),v===Ua&&(Bo=Ua=null,lu=0),!(N.subtreeFlags&2064)&&!(N.flags&2064)||T2||(T2=!0,QI(As,function(){return dv(),null})),ie=(N.flags&15990)!==0,N.subtreeFlags&15990||ie){ie=Df.transition,Df.transition=null;var he=_n;_n=1;var ke=ui;ui|=4,RC.current=null,A7(v,N),AC(N,v),Ug(Ap),Ce=!!Wg,Ap=Wg=null,v.current=N,_2(N),wc(),ui=ke,_n=he,Df.transition=ie}else v.current=N;if(T2&&(T2=!1,pm=v,sl=Q),ie=v.pendingLanes,ie===0&&(hm=null),ti(N.stateNode),Hl(v,Er()),_!==null)for(U=v.onRecoverableError,N=0;N<_.length;N++)Q=_[N],U(Q.value,{componentStack:Q.stack,digest:Q.digest});if(S2)throw S2=!1,v=PC,PC=null,v;return sl&1&&v.tag!==0&&dv(),ie=v.pendingLanes,ie&1?v===NC?Lx++:(Lx=0,NC=v):Lx=0,Rh(),null}function dv(){if(pm!==null){var v=br(sl),_=Df.transition,N=_n;try{if(Df.transition=null,_n=16>v?16:v,pm===null)var U=!1;else{if(v=pm,pm=null,sl=0,ui&6)throw Error(n(331));var Q=ui;for(ui|=4,vn=v.current;vn!==null;){var ie=vn,he=ie.child;if(vn.flags&16){var ke=ie.deletions;if(ke!==null){for(var Le=0;Le<ke.length;Le++){var st=ke[Le];for(vn=st;vn!==null;){var Ot=vn;switch(Ot.tag){case 0:case 11:case 15:Gp(8,Ot,ie)}var Ut=Ot.child;if(Ut!==null)Ut.return=Ot,vn=Ut;else for(;vn!==null;){Ot=vn;var Dt=Ot.sibling,pn=Ot.return;if(BI(Ot),Ot===st){vn=null;break}if(Dt!==null){Dt.return=pn,vn=Dt;break}vn=pn}}}var En=ie.alternate;if(En!==null){var Tn=En.child;if(Tn!==null){En.child=null;do{var oo=Tn.sibling;Tn.sibling=null,Tn=oo}while(Tn!==null)}}vn=ie}}if(ie.subtreeFlags&2064&&he!==null)he.return=ie,vn=he;else e:for(;vn!==null;){if(ie=vn,ie.flags&2048)switch(ie.tag){case 0:case 11:case 15:Gp(9,ie,ie.return)}var Je=ie.sibling;if(Je!==null){Je.return=ie.return,vn=Je;break e}vn=ie.return}}var Ue=v.current;for(vn=Ue;vn!==null;){he=vn;var tt=he.child;if(he.subtreeFlags&2064&&tt!==null)tt.return=he,vn=tt;else e:for(he=Ue;vn!==null;){if(ke=vn,ke.flags&2048)try{switch(ke.tag){case 0:case 11:case 15:Nx(9,ke)}}catch(Cn){Ws(ke,ke.return,Cn)}if(ke===he){vn=null;break e}var Yt=ke.sibling;if(Yt!==null){Yt.return=ke.return,vn=Yt;break e}vn=ke.return}}if(ui=Q,Rh(),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(ea,v)}catch{}U=!0}return U}finally{_n=N,Df.transition=_}}return!1}function R2(v,_,N){_=$h(N,_),_=uy(v,_,1),v=Cu(v,_,1),_=ol(),v!==null&&(qn(v,1,_),Hl(v,_))}function Ws(v,_,N){if(v.tag===3)R2(v,v,N);else for(;_!==null;){if(_.tag===3){R2(_,v,N);break}else if(_.tag===1){var U=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof U.componentDidCatch=="function"&&(hm===null||!hm.has(U))){v=$h(N,v),v=T(_,v,1),_=Cu(_,v,1),v=ol(),_!==null&&(qn(_,1,v),Hl(_,v));break}}_=_.return}}function N7(v,_,N){var U=v.pingCache;U!==null&&U.delete(_),_=ol(),v.pingedLanes|=v.suspendedLanes&N,Ua===v&&(lu&N)===N&&(fa===4||fa===3&&(lu&130023424)===lu&&500>Er()-IC?fy(v,0):E2|=N),Hl(v,_)}function KI(v,_){_===0&&(v.mode&1?(_=ze,ze<<=1,!(ze&130023424)&&(ze=4194304)):_=1);var N=ol();v=nl(v,_),v!==null&&(qn(v,_,N),Hl(v,N))}function D7(v){var _=v.memoizedState,N=0;_!==null&&(N=_.retryLane),KI(v,N)}function O7(v,_){var N=0;switch(v.tag){case 13:var U=v.stateNode,Q=v.memoizedState;Q!==null&&(N=Q.retryLane);break;case 19:U=v.stateNode;break;default:throw Error(n(314))}U!==null&&U.delete(_),KI(v,N)}var XI;XI=function(v,_,N){if(v!==null)if(v.memoizedProps!==_.pendingProps||Oa.current)ae=!0;else{if(!(v.lanes&N)&&!(_.flags&128))return ae=!1,y2(v,_,N);ae=!!(v.flags&131072)}else ae=!1,bi&&_.flags&1048576&&p2(_,Ph,_.index);switch(_.lanes=0,_.tag){case 2:var U=_.type;Br(v,_),v=_.pendingProps;var Q=Dp(_,oa.current);Lc(_,N),Q=Rf(null,_,U,v,Q,N);var ie=jp();return _.flags|=1,typeof Q=="object"&&Q!==null&&typeof Q.render=="function"&&Q.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,La(U)?(ie=!0,Za(_)):ie=!1,_.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,am(_),Q.updater=cm,_.stateNode=Q,Q._reactInternals=_,uv(_,U,v,N),_=Si(null,_,U,!0,ie,N)):(_.tag=0,bi&&ie&&Dh(_),xe(null,_,Q,N),_=_.child),_;case 16:U=_.elementType;e:{switch(Br(v,_),v=_.pendingProps,Q=U._init,U=Q(U._payload),_.type=U,Q=_.tag=L7(U),v=Lo(U,v),Q){case 0:_=an(null,_,U,v,N);break e;case 1:_=Ui(null,_,U,v,N);break e;case 11:_=He(null,_,U,v,N);break e;case 14:_=at(null,_,U,Lo(U.type,v),N);break e}throw Error(n(306,U,""))}return _;case 0:return U=_.type,Q=_.pendingProps,Q=_.elementType===U?Q:Lo(U,Q),an(v,_,U,Q,N);case 1:return U=_.type,Q=_.pendingProps,Q=_.elementType===U?Q:Lo(U,Q),Ui(v,_,U,Q,N);case 3:e:{if(ou(_),v===null)throw Error(n(387));U=_.pendingProps,ie=_.memoizedState,Q=ie.element,iv(v,_),Mh(_,U,null,N);var he=_.memoizedState;if(U=he.element,ie.isDehydrated)if(ie={element:U,isDehydrated:!1,cache:he.cache,pendingSuspenseBoundaries:he.pendingSuspenseBoundaries,transitions:he.transitions},_.updateQueue.baseState=ie,_.memoizedState=ie,_.flags&256){Q=$h(Error(n(423)),_),_=Fo(v,_,U,N,Q);break e}else if(U!==Q){Q=$h(Error(n(424)),_),_=Fo(v,_,U,N,Q);break e}else for(nn=wf(_.stateNode.containerInfo.firstChild),Fa=_,bi=!0,el=null,N=Su(_,null,U,N),_.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(Oc(),U===Q){_=$o(v,_,N);break e}xe(v,_,U,N)}_=_.child}return _;case 5:return Fp(_),v===null&&ua(_),U=_.type,Q=_.pendingProps,ie=v!==null?v.memoizedProps:null,he=Q.children,Gg(U,Q)?he=null:ie!==null&&Gg(U,ie)&&(_.flags|=32),tr(v,_),xe(v,_,he,N),_.child;case 6:return v===null&&ua(_),null;case 13:return ct(v,_,N);case 4:return Lh(_,_.stateNode.containerInfo),U=_.pendingProps,v===null?_.child=Es(_,null,U,N):xe(v,_,U,N),_.child;case 11:return U=_.type,Q=_.pendingProps,Q=_.elementType===U?Q:Lo(U,Q),He(v,_,U,Q,N);case 7:return xe(v,_,_.pendingProps,N),_.child;case 8:return xe(v,_,_.pendingProps.children,N),_.child;case 12:return xe(v,_,_.pendingProps.children,N),_.child;case 10:e:{if(U=_.type._context,Q=_.pendingProps,ie=_.memoizedProps,he=Q.value,Fi(sm,U._currentValue),U._currentValue=he,ie!==null)if(et(ie.value,he)){if(ie.children===Q.children&&!Oa.current){_=$o(v,_,N);break e}}else for(ie=_.child,ie!==null&&(ie.return=_);ie!==null;){var ke=ie.dependencies;if(ke!==null){he=ie.child;for(var Le=ke.firstContext;Le!==null;){if(Le.context===U){if(ie.tag===1){Le=Af(-1,N&-N),Le.tag=2;var st=ie.updateQueue;if(st!==null){st=st.shared;var Ot=st.pending;Ot===null?Le.next=Le:(Le.next=Ot.next,Ot.next=Le),st.pending=Le}}ie.lanes|=N,Le=ie.alternate,Le!==null&&(Le.lanes|=N),Mo(ie.return,N,_),ke.lanes|=N;break}Le=Le.next}}else if(ie.tag===10)he=ie.type===_.type?null:ie.child;else if(ie.tag===18){if(he=ie.return,he===null)throw Error(n(341));he.lanes|=N,ke=he.alternate,ke!==null&&(ke.lanes|=N),Mo(he,N,_),he=ie.sibling}else he=ie.child;if(he!==null)he.return=ie;else for(he=ie;he!==null;){if(he===_){he=null;break}if(ie=he.sibling,ie!==null){ie.return=he.return,he=ie;break}he=he.return}ie=he}xe(v,_,Q.children,N),_=_.child}return _;case 9:return Q=_.type,U=_.pendingProps.children,Lc(_,N),Q=iu(Q),U=U(Q),_.flags|=1,xe(v,_,U,N),_.child;case 14:return U=_.type,Q=Lo(U,_.pendingProps),Q=Lo(U.type,Q),at(v,_,U,Q,N);case 15:return Ft(v,_,_.type,_.pendingProps,N);case 17:return U=_.type,Q=_.pendingProps,Q=_.elementType===U?Q:Lo(U,Q),Br(v,_),_.tag=1,La(U)?(v=!0,Za(_)):v=!1,Lc(_,N),qp(_,U,Q),uv(_,U,Q,N),Si(null,_,U,!0,v,N);case 19:return rs(v,_,N);case 22:return yn(v,_,N)}throw Error(n(156,_.tag))};function QI(v,_){return gf(v,_)}function M7(v,_,N,U){this.tag=v,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=U,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Of(v,_,N,U){return new M7(v,_,N,U)}function I2(v){return v=v.prototype,!(!v||!v.isReactComponent)}function L7(v){if(typeof v=="function")return I2(v)?1:0;if(v!=null){if(v=v.$$typeof,v===V)return 11;if(v===z)return 14}return 2}function Od(v,_){var N=v.alternate;return N===null?(N=Of(v.tag,_,v.key,v.mode),N.elementType=v.elementType,N.type=v.type,N.stateNode=v.stateNode,N.alternate=v,v.alternate=N):(N.pendingProps=_,N.type=v.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=v.flags&14680064,N.childLanes=v.childLanes,N.lanes=v.lanes,N.child=v.child,N.memoizedProps=v.memoizedProps,N.memoizedState=v.memoizedState,N.updateQueue=v.updateQueue,_=v.dependencies,N.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},N.sibling=v.sibling,N.index=v.index,N.ref=v.ref,N}function P2(v,_,N,U,Q,ie){var he=2;if(U=v,typeof v=="function")I2(v)&&(he=1);else if(typeof v=="string")he=5;else e:switch(v){case R:return hy(N.children,Q,ie,_);case I:he=8,Q|=8;break;case O:return v=Of(12,N,_,Q|2),v.elementType=O,v.lanes=ie,v;case D:return v=Of(13,N,_,Q),v.elementType=D,v.lanes=ie,v;case j:return v=Of(19,N,_,Q),v.elementType=j,v.lanes=ie,v;case ee:return N2(N,Q,ie,_);default:if(typeof v=="object"&&v!==null)switch(v.$$typeof){case M:he=10;break e;case L:he=9;break e;case V:he=11;break e;case z:he=14;break e;case G:he=16,U=null;break e}throw Error(n(130,v==null?v:typeof v,""))}return _=Of(he,N,_,Q),_.elementType=v,_.type=U,_.lanes=ie,_}function hy(v,_,N,U){return v=Of(7,v,U,_),v.lanes=N,v}function N2(v,_,N,U){return v=Of(22,v,U,_),v.elementType=ee,v.lanes=N,v.stateNode={isHidden:!1},v}function $C(v,_,N){return v=Of(6,v,null,_),v.lanes=N,v}function BC(v,_,N){return _=Of(4,v.children!==null?v.children:[],v.key,_),_.lanes=N,_.stateNode={containerInfo:v.containerInfo,pendingChildren:null,implementation:v.implementation},_}function F7(v,_,N,U,Q){this.tag=_,this.containerInfo=v,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zt(0),this.expirationTimes=Zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zt(0),this.identifierPrefix=U,this.onRecoverableError=Q,this.mutableSourceEagerHydrationData=null}function jC(v,_,N,U,Q,ie,he,ke,Le){return v=new F7(v,_,N,ke,Le),_===1?(_=1,ie===!0&&(_|=8)):_=0,ie=Of(3,null,null,_),v.current=ie,ie.stateNode=v,ie.memoizedState={element:U,isDehydrated:N,cache:null,transitions:null,pendingSuspenseBoundaries:null},am(ie),v}function $7(v,_,N){var U=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:U==null?null:""+U,children:v,containerInfo:_,implementation:N}}function JI(v){if(!v)return Ef;v=v._reactInternals;e:{if(bs(v)!==v||v.tag!==1)throw Error(n(170));var _=v;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(La(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(n(171))}if(v.tag===1){var N=v.type;if(La(N))return J1(v,N,_)}return _}function ZI(v,_,N,U,Q,ie,he,ke,Le){return v=jC(N,U,!0,v,Q,ie,he,ke,Le),v.context=JI(null),N=v.current,U=ol(),Q=mm(N),ie=Af(U,Q),ie.callback=_??null,Cu(N,ie,Q),v.current.lanes=Q,qn(v,Q,U),Hl(v,U),v}function D2(v,_,N,U){var Q=_.current,ie=ol(),he=mm(Q);return N=JI(N),_.context===null?_.context=N:_.pendingContext=N,_=Af(ie,he),_.payload={element:v},U=U===void 0?null:U,U!==null&&(_.callback=U),v=Cu(Q,_,he),v!==null&&(Dd(v,Q,he,ie),sv(v,Q,he)),he}function O2(v){if(v=v.current,!v.child)return null;switch(v.child.tag){case 5:return v.child.stateNode;default:return v.child.stateNode}}function e6(v,_){if(v=v.memoizedState,v!==null&&v.dehydrated!==null){var N=v.retryLane;v.retryLane=N!==0&&N<_?N:_}}function UC(v,_){e6(v,_),(v=v.alternate)&&e6(v,_)}var t6=typeof reportError=="function"?reportError:function(v){console.error(v)};function zC(v){this._internalRoot=v}$x.prototype.render=zC.prototype.render=function(v){var _=this._internalRoot;if(_===null)throw Error(n(409));D2(v,_,null,null)},$x.prototype.unmount=zC.prototype.unmount=function(){var v=this._internalRoot;if(v!==null){this._internalRoot=null;var _=v.containerInfo;cy(function(){D2(null,v,null,null)}),_[wu]=null}};function $x(v){this._internalRoot=v}$x.prototype.unstable_scheduleHydration=function(v){if(v){var _=gd();v={blockedOn:null,target:v,priority:_};for(var N=0;N<ka.length&&_!==0&&_<ka[N].priority;N++);ka.splice(N,0,v),N===0&&yd(v)}};function M2(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)}function L2(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11&&(v.nodeType!==8||v.nodeValue!==" react-mount-point-unstable "))}function n6(){}function B7(v,_,N,U,Q){if(Q){if(typeof U=="function"){var ie=U;U=function(){var st=O2(he);ie.call(st)}}var he=ZI(_,U,v,0,null,!1,!1,"",n6);return v._reactRootContainer=he,v[wu]=he.current,_f(v.nodeType===8?v.parentNode:v),cy(),he}for(;Q=v.lastChild;)v.removeChild(Q);if(typeof U=="function"){var ke=U;U=function(){var st=O2(Le);ke.call(st)}}var Le=jC(v,0,!1,null,null,!1,!1,"",n6);return v._reactRootContainer=Le,v[wu]=Le.current,_f(v.nodeType===8?v.parentNode:v),cy(function(){D2(_,Le,N,U)}),Le}function F2(v,_,N,U,Q){var ie=N._reactRootContainer;if(ie){var he=ie;if(typeof Q=="function"){var ke=Q;Q=function(){var Le=O2(he);ke.call(Le)}}D2(_,he,v,Q)}else he=B7(N,_,v,Q,U);return O2(he)}ls=function(v){switch(v.tag){case 3:var _=v.stateNode;if(_.current.memoizedState.isDehydrated){var N=De(_.pendingLanes);N!==0&&(lr(_,N|1),Hl(_,Er()),!(ui&6)&&(ly=Er()+500,Rh()))}break;case 13:cy(function(){var U=nl(v,1);if(U!==null){var Q=ol();Dd(U,v,1,Q)}}),UC(v,1)}},Ao=function(v){if(v.tag===13){var _=nl(v,134217728);if(_!==null){var N=ol();Dd(_,v,134217728,N)}UC(v,134217728)}},Dl=function(v){if(v.tag===13){var _=mm(v),N=nl(v,_);if(N!==null){var U=ol();Dd(N,v,_,U)}UC(v,_)}},gd=function(){return _n},Yu=function(v,_){var N=_n;try{return _n=v,_()}finally{_n=N}},Ji=function(v,_,N){switch(_){case"input":if(We(v,N),_=N.name,N.type==="radio"&&_!=null){for(N=v;N.parentNode;)N=N.parentNode;for(N=N.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<N.length;_++){var U=N[_];if(U!==v&&U.form===v.form){var Q=Oo(U);if(!Q)throw Error(n(90));me(U),We(U,Q)}}}break;case"textarea":Lt(v,N);break;case"select":_=N.value,_!=null&&It(v,!!N.multiple,_,!1)}},Sa=MC,Ta=cy;var $2={usingClientEntryPoint:!1,Events:[Da,Mn,Oo,mo,Gu,MC]},Bx={findFiberByHostInstance:Nc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j7={bundleType:Bx.bundleType,version:Bx.version,rendererPackageName:Bx.rendererPackageName,rendererConfig:Bx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(v){return v=md(v),v===null?null:v.stateNode},findFiberByHostInstance:Bx.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var B2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!B2.isDisabled&&B2.supportsFiber)try{ea=B2.inject(j7),qi=B2}catch{}}return $f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$2,$f.createPortal=function(v,_){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!M2(_))throw Error(n(200));return $7(v,_,null,N)},$f.createRoot=function(v,_){if(!M2(v))throw Error(n(299));var N=!1,U="",Q=t6;return _!=null&&(_.unstable_strictMode===!0&&(N=!0),_.identifierPrefix!==void 0&&(U=_.identifierPrefix),_.onRecoverableError!==void 0&&(Q=_.onRecoverableError)),_=jC(v,1,!1,null,null,N,!1,U,Q),v[wu]=_.current,_f(v.nodeType===8?v.parentNode:v),new zC(_)},$f.findDOMNode=function(v){if(v==null)return null;if(v.nodeType===1)return v;var _=v._reactInternals;if(_===void 0)throw typeof v.render=="function"?Error(n(188)):(v=Object.keys(v).join(","),Error(n(268,v)));return v=md(_),v=v===null?null:v.stateNode,v},$f.flushSync=function(v){return cy(v)},$f.hydrate=function(v,_,N){if(!L2(_))throw Error(n(200));return F2(null,v,_,!0,N)},$f.hydrateRoot=function(v,_,N){if(!M2(v))throw Error(n(405));var U=N!=null&&N.hydratedSources||null,Q=!1,ie="",he=t6;if(N!=null&&(N.unstable_strictMode===!0&&(Q=!0),N.identifierPrefix!==void 0&&(ie=N.identifierPrefix),N.onRecoverableError!==void 0&&(he=N.onRecoverableError)),_=ZI(_,null,v,1,N??null,Q,!1,ie,he),v[wu]=_.current,_f(v),U)for(v=0;v<U.length;v++)N=U[v],Q=N._getVersion,Q=Q(N._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[N,Q]:_.mutableSourceEagerHydrationData.push(N,Q);return new $x(_)},$f.render=function(v,_,N){if(!L2(_))throw Error(n(200));return F2(null,v,_,!1,N)},$f.unmountComponentAtNode=function(v){if(!L2(v))throw Error(n(40));return v._reactRootContainer?(cy(function(){F2(null,null,v,!1,function(){v._reactRootContainer=null,v[wu]=null})}),!0):!1},$f.unstable_batchedUpdates=MC,$f.unstable_renderSubtreeIntoContainer=function(v,_,N,U){if(!L2(N))throw Error(n(200));if(v==null||v._reactInternals===void 0)throw Error(n(38));return F2(v,_,N,!1,U)},$f.version="18.3.1-next-f1338f8080-20240426",$f}var Rte;function dme(){if(Rte)return tF.exports;Rte=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),tF.exports=L8e(),tF.exports}var Ite;function F8e(){if(Ite)return o6;Ite=1;var e=dme();return o6.createRoot=e.createRoot,o6.hydrateRoot=e.hydrateRoot,o6}var $8e=F8e();const B8e=gc($8e);var km=function(){return km=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},km.apply(this,arguments)};function iR(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function j8e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var _P="right-scroll-bar-position",wP="width-before-scroll-bar",U8e="with-scroll-bars-hidden",z8e="--removed-body-scroll-bar-size";function iF(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function V8e(e,t){var n=B.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var H8e=typeof window<"u"?B.useLayoutEffect:B.useEffect,Pte=new WeakMap;function q8e(e,t){var n=V8e(null,function(r){return e.forEach(function(i){return iF(i,r)})});return H8e(function(){var r=Pte.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||iF(a,null)}),s.forEach(function(a){i.has(a)||iF(a,o)})}Pte.set(n,e)},[e]),n}function W8e(e){return e}function G8e(e,t){t===void 0&&(t=W8e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function Y8e(e){e===void 0&&(e={});var t=G8e(null);return t.options=km({async:!0,ssr:!1},e),t}var hme=function(e){var t=e.sideCar,n=iR(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return B.createElement(r,km({},n))};hme.isSideCarExport=!0;function K8e(e,t){return e.useMedium(t),hme}var pme=Y8e(),sF=function(){},FO=B.forwardRef(function(e,t){var n=B.useRef(null),r=B.useState({onScrollCapture:sF,onWheelCapture:sF,onTouchMoveCapture:sF}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,b=g===void 0?"div":g,y=e.gapMode,x=iR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,S=q8e([n,t]),C=km(km({},x),i);return B.createElement(B.Fragment,null,c&&B.createElement(w,{sideCar:pme,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:y}),o?B.cloneElement(B.Children.only(a),km(km({},C),{ref:S})):B.createElement(b,km({},C,{className:u,ref:S}),a))});FO.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};FO.classNames={fullWidth:wP,zeroRight:_P};var mme=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function X8e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=mme();return t&&e.setAttribute("nonce",t),e}function Q8e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function J8e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Z8e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=X8e())&&(Q8e(t,n),J8e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},eDe=function(){var e=Z8e();return function(t,n){B.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},tDe=function(){var e=eDe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},nDe={left:0,top:0,right:0,gap:0},oF=function(e){return parseInt(e||"",10)||0},rDe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[oF(n),oF(r),oF(i)]},iDe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return nDe;var t=rDe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},sDe=tDe(),BE="data-scroll-locked",oDe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(U8e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(BE,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_P,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(wP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(_P," .").concat(_P,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(wP," .").concat(wP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(BE,`] {
    `).concat(z8e,": ").concat(a,`px;
  }
`)},Nte=function(){var e=parseInt(document.body.getAttribute(BE)||"0",10);return isFinite(e)?e:0},aDe=function(){B.useEffect(function(){return document.body.setAttribute(BE,(Nte()+1).toString()),function(){var e=Nte()-1;e<=0?document.body.removeAttribute(BE):document.body.setAttribute(BE,e.toString())}},[])},uDe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;aDe();var s=B.useMemo(function(){return iDe(i)},[i]);return B.createElement(sDe,{styles:oDe(s,!t,i,n?"":"!important")})};function lDe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=mme();return t&&e.setAttribute("nonce",t),e}function cDe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function fDe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var dDe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=lDe())&&(cDe(t,n),fDe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},hDe=function(){var e=dDe();return function(t,n){B.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},pDe=function(){var e=hDe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Qj=!1;if(typeof window<"u")try{var a6=Object.defineProperty({},"passive",{get:function(){return Qj=!0,!0}});window.addEventListener("test",a6,a6),window.removeEventListener("test",a6,a6)}catch{Qj=!1}var z2=Qj?{passive:!1}:!1,mDe=function(e){return e.tagName==="TEXTAREA"},gme=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!mDe(e)&&n[t]==="visible")},gDe=function(e){return gme(e,"overflowY")},yDe=function(e){return gme(e,"overflowX")},Dte=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=yme(e,r);if(i){var s=vme(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},vDe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},bDe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},yme=function(e,t){return e==="v"?gDe(t):yDe(t)},vme=function(e,t){return e==="v"?vDe(t):bDe(t)},xDe=function(e,t){return e==="h"&&t==="rtl"?-1:1},_De=function(e,t,n,r,i){var s=xDe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=vme(e,a),p=h[0],m=h[1],g=h[2],b=m-g-s*p;(p||b)&&yme(e,a)&&(f+=b,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},u6=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ote=function(e){return[e.deltaX,e.deltaY]},Mte=function(e){return e&&"current"in e?e.current:e},wDe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},EDe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},SDe=0,V2=[];function TDe(e){var t=B.useRef([]),n=B.useRef([0,0]),r=B.useRef(),i=B.useState(SDe++)[0],s=B.useState(pDe)[0],o=B.useRef(e);B.useEffect(function(){o.current=e},[e]),B.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=j8e([e.lockRef.current],(e.shards||[]).map(Mte),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=B.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var b=u6(m),y=n.current,x="deltaX"in m?m.deltaX:y[0]-b[0],w="deltaY"in m?m.deltaY:y[1]-b[1],S,C=m.target,R=Math.abs(x)>Math.abs(w)?"h":"v";if("touches"in m&&R==="h"&&C.type==="range")return!1;var I=Dte(R,C);if(!I)return!0;if(I?S=R:(S=R==="v"?"h":"v",I=Dte(R,C)),!I)return!1;if(!r.current&&"changedTouches"in m&&(x||w)&&(r.current=S),!S)return!0;var O=r.current||S;return _De(O,g,m,O==="h"?x:w)},[]),u=B.useCallback(function(m){var g=m;if(!(!V2.length||V2[V2.length-1]!==s)){var b="deltaY"in g?Ote(g):u6(g),y=t.current.filter(function(S){return S.name===g.type&&(S.target===g.target||g.target===S.shadowParent)&&wDe(S.delta,b)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var x=(o.current.shards||[]).map(Mte).filter(Boolean).filter(function(S){return S.contains(g.target)}),w=x.length>0?a(g,x[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=B.useCallback(function(m,g,b,y){var x={name:m,delta:g,target:b,should:y,shadowParent:CDe(b)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(w){return w!==x})},1)},[]),c=B.useCallback(function(m){n.current=u6(m),r.current=void 0},[]),f=B.useCallback(function(m){l(m.type,Ote(m),m.target,a(m,e.lockRef.current))},[]),d=B.useCallback(function(m){l(m.type,u6(m),m.target,a(m,e.lockRef.current))},[]);B.useEffect(function(){return V2.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,z2),document.addEventListener("touchmove",u,z2),document.addEventListener("touchstart",c,z2),function(){V2=V2.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,z2),document.removeEventListener("touchmove",u,z2),document.removeEventListener("touchstart",c,z2)}},[]);var h=e.removeScrollBar,p=e.inert;return B.createElement(B.Fragment,null,p?B.createElement(s,{styles:EDe(i)}):null,h?B.createElement(uDe,{gapMode:e.gapMode}):null)}function CDe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ADe=K8e(pme,TDe);var dS=B.forwardRef(function(e,t){return B.createElement(FO,km({},e,{ref:t,sideCar:ADe}))});dS.classNames=FO.classNames;function Cs(e){return Object.keys(e)}function aF(e){return e&&typeof e=="object"&&!Array.isArray(e)}function lq(e,t){const n={...e},r=t;return aF(e)&&aF(t)&&Object.keys(t).forEach(i=>{aF(r[i])&&i in e?n[i]=lq(n[i],r[i]):n[i]=r[i]}),n}function kDe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function RDe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function qk(e){const t=RDe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function uF(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function bme(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?uF(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?uF(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?uF(s):s}}return r}return n}const ot=bme("rem",{shouldScale:!0}),n8=bme("em");function Fb(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function xme(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function $b(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==B.Fragment:!1}function Rl(e){const t=B.createContext(null);return[({children:i,value:s})=>A.jsx(t.Provider,{value:s,children:i}),()=>{const i=B.useContext(t);if(i===null)throw new Error(e);return i}]}function Bb(e=null){const t=B.createContext(e);return[({children:i,value:s})=>A.jsx(t.Provider,{value:s,children:i}),()=>B.useContext(t)]}function r8(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function i8(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function IDe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function PDe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function NDe(e,t,n){return i8(e,n)===i8(t,n)}function cq({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=i8(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>NDe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=PDe(l,u,r),f=IDe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const DDe={app:100,modal:200,popover:300,overlay:400,max:9999};function fd(e){return DDe[e]}const Jj=()=>{};function ODe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||Jj:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function _r(e,t="size",n=!0){if(e!==void 0)return xme(e)?n?ot(e):e:`var(--${t}-${e})`}function qa(e){return _r(e,"mantine-spacing")}function as(e){return e===void 0?"var(--mantine-radius-default)":_r(e,"mantine-radius")}function _l(e){return _r(e,"mantine-font-size")}function _me(e){return _r(e,"mantine-line-height",!1)}function fq(e){if(e)return _r(e,"mantine-shadow",!1)}function Om(e,t){return n=>{e==null||e(n),t==null||t(n)}}function dq(e,t){return e in t?qk(t[e]):qk(e)}function Wk(e,t){const n=e.map(r=>({value:r,px:dq(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function d0(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function MDe(e,t,n){var r;return n?Array.from(((r=i8(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function LDe(){const[e,t]=B.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Rm(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function jE(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function Pv(e){const t=B.useRef(e);return B.useEffect(()=>{t.current=e}),B.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const FDe=()=>{};function $O(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,i=Pv(e),s=B.useRef(0),o=Object.assign(B.useCallback((...a)=>{window.clearTimeout(s.current);const u=()=>{s.current!==0&&(s.current=0,i(...a))};o.flush=u,s.current=window.setTimeout(u,n)},[i,n]),{flush:FDe});return B.useEffect(()=>()=>{window.clearTimeout(s.current),r&&o.flush()},[o,r]),o}const Lte=["mousedown","touchstart"];function $De(e,t,n){const r=B.useRef(null);return B.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Lte).forEach(s=>document.addEventListener(s,i)),()=>{(t||Lte).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function BDe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function jDe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function UDe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=B.useState(n?t:jDe(e)),s=B.useRef(null);return B.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),BDe(s.current,o=>i(o.matches))},[e]),r}const Sw=typeof document<"u"?B.useLayoutEffect:B.useEffect;function tg(e,t){const n=B.useRef(!1);B.useEffect(()=>()=>{n.current=!1},[]),B.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function wme({opened:e,shouldReturnFocus:t=!0}){const n=B.useRef(null),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return tg(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const zDe=/input|select|textarea|button|object/,Eme="a, input, select, textarea, button, object, [tabindex]";function VDe(e){return e.style.display==="none"}function HDe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(VDe(n))return!1;n=n.parentNode}return!0}function Sme(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Zj(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Sme(e));return(zDe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&HDe(e)}function Tme(e){const t=Sme(e);return(Number.isNaN(t)||t>=0)&&Zj(e)}function qDe(e){return Array.from(e.querySelectorAll(Eme)).filter(Tme)}function WDe(e,t){const n=qDe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function GDe(e=!0){const t=B.useRef(null),n=i=>{let s=i.querySelector("[data-autofocus]");if(!s){const o=Array.from(i.querySelectorAll(Eme));s=o.find(Tme)||o.find(Zj)||null,!s&&Zj(i)&&(s=i)}s&&s.focus({preventScroll:!0})},r=B.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return B.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=s=>{s.key==="Tab"&&t.current&&WDe(t.current,s)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const YDe=e=>(e+1)%1e6;function KDe(){const[,e]=B.useReducer(YDe,0);return e}const XDe=sr.useId||(()=>{});function QDe(){const e=XDe();return e?`mantine-${e.replace(/:/g,"")}`:""}function df(e){const t=QDe(),[n,r]=B.useState(t);return Sw(()=>{r(jE())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function Cme(e,t,n){B.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function s8(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Ame(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=s8(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i?i():s8(r,null)}),t.clear()}}}function vu(...e){return B.useCallback(Ame(...e),e)}function JDe(e,t,n="ltr"){const r=B.useRef(null),i=B.useRef(!1),s=B.useRef(!1),o=B.useRef(0),[a,u]=B.useState(!1);return B.useEffect(()=>{i.current=!0},[]),B.useEffect(()=>{var y,x;const l=({x:w,y:S})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const C=r.current.getBoundingClientRect();if(C.width&&C.height){const R=Rm((w-C.left)/C.width,0,1);e({x:n==="ltr"?R:1-R,y:Rm((S-C.top)/C.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",b),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),b(w)},b=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(y=r.current)==null||y.addEventListener("mousedown",p),(x=r.current)==null||x.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ju({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=B.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function BO(e,t){return UDe("(prefers-reduced-motion: reduce)",e,t)}const ZDe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function sR(e){const t=B.useRef(0),n=B.useRef(null),[r,i]=B.useState(ZDe),s=B.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return B.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function eOe(e){const[t,{width:n,height:r}]=sR(e);return{ref:t,width:n,height:r}}function hq(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=B.useState(e),o=B.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=B.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=B.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function tOe(e){const t=B.useRef(void 0);return B.useEffect(()=>{t.current=e},[e]),t.current}function nOe(e,t){const n=Pv(e),r=B.useRef(null),i=B.useRef(null),s=B.useRef(!0),o=B.useRef(t),a=B.useRef(-1),u=()=>window.clearTimeout(a.current),l=B.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=B.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=B.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return B.useEffect(()=>{o.current=t},[t]),[f,u]}function rOe(e,t){const[n,r]=B.useState(e),[i,s]=nOe(r,t);return B.useEffect(()=>s,[]),[n,i]}function iOe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function sOe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Sw(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>iOe(`${e}:${String(r)}`,i[0])}return[t,n]}var oOe={};function aOe(){return typeof process<"u"&&oOe?"production":"development"}function Fte(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function jO(e){var n;const t=sr.version;return typeof sr.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function kme(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=kme(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ba(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=kme(e))&&(r&&(r+=" "),r+=t);return r}const uOe={};function lOe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=ba(t[r],i):t[r]=i})}),t}function UO({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||uOe);return lOe(s)}function o8({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const Rme=B.createContext(null);function jb(){const e=B.useContext(Rme);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function cOe(){return jb().cssVariablesResolver}function fOe(){return jb().classNamesPrefix}function pq(){return jb().getStyleNonce}function dOe(){return jb().withStaticClasses}function hOe(){return jb().headless}function pOe(){var e;return(e=jb().stylesTransform)==null?void 0:e.sx}function mOe(){var e;return(e=jb().stylesTransform)==null?void 0:e.styles}function gOe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function yOe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function vOe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function bOe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function mq(e){return gOe(e)?yOe(e):e.startsWith("rgb")?vOe(e):e.startsWith("hsl")?bOe(e):{r:0,g:0,b:0,a:1}}function l6(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=mq(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function Gk(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function lF(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function xOe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function _Oe(e){if(e.startsWith("oklch("))return(xOe(e)||0)/100;const{r:t,g:n,b:r}=mq(e),i=t/255,s=n/255,o=r/255,a=lF(i),u=lF(s),l=lF(o);return .2126*a+.7152*u+.0722*l}function qC(e,t=.179){return e.startsWith("var(")?!1:_Oe(e)>t}function vg({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:qC(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:qC(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:qC(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][Gk(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:qC(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:qC(e,t.luminanceThreshold),shade:s,variable:void 0}}function Fs(e,t){const n=vg({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function eU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Fs(n.from,t),i=Fs(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function wm(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=mq(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const H2=wm,wOe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=vg({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${ot(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${ot(1)} solid transparent`}:{background:e,hover:l6(e,.1),color:a,border:`${ot(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ot(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:wm(a,.1),hover:wm(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ot(1)} solid transparent`}}return{background:wm(e,.1),hover:wm(e,.12),color:e,border:`${ot(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${ot(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:wm(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ot(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:wm(e,.05),color:e,border:`${ot(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ot(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:wm(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ot(1)} solid transparent`}}return{background:"transparent",hover:wm(e,.12),color:e,border:`${ot(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${ot(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ot(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${ot(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:l6(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${ot(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:l6(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ot(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:l6(t.white,.01),color:e,border:`${ot(1)} solid transparent`}:n==="gradient"?{background:eU(r,t),hover:eU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ot(1)} solid var(--mantine-color-default-border)`}:{}},EOe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},$te="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",gq={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:EOe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:wOe,autoContrast:!1,luminanceThreshold:.3,fontFamily:$te,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:$te,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ot(34),lineHeight:"1.3"},h2:{fontSize:ot(26),lineHeight:"1.35"},h3:{fontSize:ot(22),lineHeight:"1.4"},h4:{fontSize:ot(18),lineHeight:"1.45"},h5:{fontSize:ot(16),lineHeight:"1.5"},h6:{fontSize:ot(14),lineHeight:"1.5"}}},fontSizes:{xs:ot(12),sm:ot(14),md:ot(16),lg:ot(18),xl:ot(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ot(2),sm:ot(4),md:ot(8),lg:ot(16),xl:ot(32)},spacing:{xs:ot(10),sm:ot(12),md:ot(16),lg:ot(20),xl:ot(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), 0 ${ot(1)} ${ot(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(10)} ${ot(15)} ${ot(-5)}, rgba(0, 0, 0, 0.04) 0 ${ot(7)} ${ot(7)} ${ot(-5)}`,md:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(20)} ${ot(25)} ${ot(-5)}, rgba(0, 0, 0, 0.04) 0 ${ot(10)} ${ot(10)} ${ot(-5)}`,lg:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(28)} ${ot(23)} ${ot(-7)}, rgba(0, 0, 0, 0.04) 0 ${ot(12)} ${ot(12)} ${ot(-7)}`,xl:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(36)} ${ot(28)} ${ot(-7)}, rgba(0, 0, 0, 0.04) 0 ${ot(17)} ${ot(17)} ${ot(-7)}`},other:{},components:{}};function Bte(e){return e==="auto"||e==="dark"||e==="light"}function SOe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Bte(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Bte(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const TOe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",jte="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function cF(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Ute(e){if(!(e.primaryColor in e.colors))throw new Error(TOe);if(typeof e.primaryShade=="object"&&(!cF(e.primaryShade.dark)||!cF(e.primaryShade.light)))throw new Error(jte);if(typeof e.primaryShade=="number"&&!cF(e.primaryShade))throw new Error(jte)}function COe(e,t){var r;if(!t)return Ute(e),e;const n=lq(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Ute(n),n}const yq=B.createContext(null),AOe=()=>B.useContext(yq)||gq;function Ga(){const e=B.useContext(yq);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function Ime({theme:e,children:t,inherit:n=!0}){const r=AOe(),i=B.useMemo(()=>COe(n?r:gq,e),[e,r,n]);return A.jsx(yq.Provider,{value:i,children:t})}Ime.displayName="@mantine/core/MantineThemeProvider";function kOe(){const e=Ga(),t=pq(),n=Cs(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=qk(e.breakpoints[i]),a=s?`${o-.1}px`:n8(o-.1),u=s?`${o}px`:n8(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return A.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function fF(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function WC(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function ROe(e,t){const n=fF(e.variables),r=n?WC(t,n):"",i=fF(e.dark),s=fF(e.light),o=i?WC(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?WC(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function Tw({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&vg({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function zte(e,t){return Tw({color:e.colors[e.primaryColor][Gk(e,t)],theme:e,autoContrast:null})}function c6({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=Gk(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:H2(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:H2(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:H2(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=Gk(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:H2(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:H2(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:H2(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function IOe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function q2(e,t,n){Cs(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const Pme=e=>{const t=Gk(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:ot(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":zte(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":zte(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};q2(r.variables,e.breakpoints,"breakpoint"),q2(r.variables,e.spacing,"spacing"),q2(r.variables,e.fontSizes,"font-size"),q2(r.variables,e.lineHeights,"line-height"),q2(r.variables,e.shadows,"shadow"),q2(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Cs(e.colors).forEach(s=>{const o=e.colors[s];if(IOe(o)){Object.assign(r.light,c6({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,c6({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,c6({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,c6({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Cs(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function POe({theme:e,generator:t}){const n=Pme(e),r=t==null?void 0:t(e);return r?lq(n,r):n}const dF=Pme(gq);function NOe(e){const t={variables:{},light:{},dark:{}};return Cs(e.variables).forEach(n=>{dF.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Cs(e.light).forEach(n=>{dF.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Cs(e.dark).forEach(n=>{dF.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function DOe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Nme({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Ga(),r=pq(),i=cOe(),s=POe({theme:n,generator:i}),o=e===":root"&&t,a=o?NOe(s):s,u=ROe(a,e);return u?A.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":DOe(e)}`}}):null}Nme.displayName="@mantine/CssVariables";function OOe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function W2(e,t){var i;const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=e!=="auto"?e:n?"dark":"light";(i=t())==null||i.setAttribute("data-mantine-color-scheme",r)}function MOe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=B.useRef(null),[s,o]=B.useState(()=>e.get(t)),a=r||s,u=B.useCallback(c=>{r||(W2(c,n),o(c),e.set(c))},[e.set,a,r]),l=B.useCallback(()=>{o(t),W2(t,n),e.clear()},[e.clear,t]);return B.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Sw(()=>{W2(e.get(t),n)},[]),B.useEffect(()=>{var f;if(r)return W2(r,n),()=>{};r===void 0&&W2(s,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=d=>{s==="auto"&&W2(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function LOe({respectReducedMotion:e,getRootElement:t}){Sw(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}OOe();function Dme({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=SOe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:b}=MOe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return LOe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),A.jsx(Rme.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:b,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:A.jsxs(Ime,{theme:e,children:[o&&A.jsx(Nme,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&A.jsx(kOe,{}),t]})})}Dme.displayName="@mantine/core/MantineProvider";function Cw({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Ga();return{resolvedClassNames:UO({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:o8({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const FOe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function $Oe({theme:e,options:t,unstyled:n}){return ba((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||FOe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function BOe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return UO({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Vte({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return UO({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function jOe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function UOe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function zOe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function VOe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=UO({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function HOe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function qOe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return ba($Oe({theme:e,options:t,unstyled:a||h}),VOe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),HOe({options:t,classes:o,selector:r,unstyled:a}),Vte({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Vte({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),BOe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),jOe({rootSelector:l,selector:r,className:u}),UOe({selector:r,classes:o,unstyled:a||h}),d&&!h&&zOe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function WOe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return o8({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function tU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...tU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function GOe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Fb(n[r])}}),t),{})}function YOe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=GOe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function KOe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&WOe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&o8({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&o8({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...YOe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?tU({style:u,theme:e}):null,...tU({style:r==null?void 0:r.style,theme:e})}}function XOe({props:e,stylesCtx:t,themeName:n}){var o;const r=Ga(),i=(o=mOe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function xn({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Ga(),h=fOe(),p=dOe(),m=hOe(),g=(Array.isArray(e)?e:[e]).filter(x=>x),{withStylesTransform:b,getTransformedStyles:y}=XOe({props:n,stylesCtx:r,themeName:g});return(x,w)=>({className:qOe({theme:d,options:w,themeName:g,selector:x,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:y([w==null?void 0:w.styles,l])}),style:KOe({theme:d,themeName:g,selector:x,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:b})})}function pT(e,t){return typeof e=="boolean"?e:t.autoContrast}function dt(e,t,n){var o;const r=Ga(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Fb(n)}}function hF(e){return Cs(e).reduce((t,n)=>e[n]!==void 0?`${t}${kDe(n)}:${e[n]};`:t,"").trim()}function QOe({selector:e,styles:t,media:n,container:r}){const i=t?hF(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${hF(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${hF(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Aw(e){const t=pq();return A.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:QOe(e)}})}function kw(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:b,ps:y,bd:x,bg:w,c:S,opacity:C,ff:R,fz:I,fw:O,lts:M,ta:L,lh:V,fs:D,tt:j,td:z,w:G,miw:ee,maw:ne,h:ue,mih:X,mah:W,bgsz:te,bgp:q,bgr:J,bga:oe,pos:de,top:ce,left:pe,bottom:Ee,right:Ae,inset:ge,display:me,flex:Oe,hiddenFrom:Me,visibleFrom:Ye,lightHidden:lt,darkHidden:We,sx:nt,...yt}=e;return{styleProps:Fb({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:b,ps:y,bd:x,bg:w,c:S,opacity:C,ff:R,fz:I,fw:O,lts:M,ta:L,lh:V,fs:D,tt:j,td:z,w:G,miw:ee,maw:ne,h:ue,mih:X,mah:W,bgsz:te,bgp:q,bgr:J,bga:oe,pos:de,top:ce,left:pe,bottom:Ee,right:Ae,inset:ge,display:me,flex:Oe,hiddenFrom:Me,visibleFrom:Ye,lightHidden:lt,darkHidden:We,sx:nt}),rest:yt}}const JOe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function vq(e,t){const n=vg({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function ZOe(e,t){const n=vg({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:vq(e,t)}function e9e(e,t){if(typeof e=="number")return ot(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${ot(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${vq(i.join(" "),t)}`),s.trim()}return e}const Hte={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function t9e(e){return typeof e=="string"&&e in Hte?Hte[e]:e}const n9e=["h1","h2","h3","h4","h5","h6"];function r9e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&n9e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?ot(e):e}function i9e(e){return e}const s9e=["h1","h2","h3","h4","h5","h6"];function o9e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&s9e.includes(e)?`var(--mantine-${e}-line-height)`:e}function a9e(e){return typeof e=="number"?ot(e):e}function u9e(e,t){if(typeof e=="number")return ot(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return ot(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const pF={color:vq,textColor:ZOe,fontSize:r9e,spacing:u9e,identity:i9e,size:a9e,lineHeight:o9e,fontFamily:t9e,border:e9e};function qte(e){return e.replace("(min-width: ","").replace("em)","")}function l9e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(qte(i))-Number(qte(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function c9e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function f9e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function d9e(e){return typeof e=="object"&&e!==null?Cs(e).filter(t=>t!=="base"):[]}function h9e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function Ome({styleProps:e,data:t,theme:n}){return l9e(Cs(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=f9e(e[i]);if(!c9e(e[i]))return o.forEach(l=>{r.inlineStyles[l]=pF[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=d9e(e[i]);return o.forEach(l=>{a&&(r.styles[l]=pF[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:pF[s.type](h9e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function oR(){return`__m__-${B.useId().replace(/:/g,"")}`}function bq(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...bq(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Mme(e){return e.startsWith("data-")?e:`data-${e}`}function p9e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[Mme(n)]=e[n]),t},{})}function Lme(e){return e?typeof e=="string"?{[Mme(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...Lme(n)}),{}):p9e(e):null}function nU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...nU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function m9e({theme:e,style:t,vars:n,styleProps:r}){const i=nU(t,e),s=nU(n,e);return{...i,...s,...r}}const Fme=B.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var I;const m=Ga(),g=e||"div",{styleProps:b,rest:y}=kw(h),x=pOe(),w=(I=x==null?void 0:x())==null?void 0:I(b.sx),S=oR(),C=Ome({styleProps:b,theme:m,data:JOe}),R={ref:p,style:m9e({theme:m,style:t,vars:n,styleProps:C.inlineStyles}),className:ba(r,w,{[S]:C.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":xme(o)?void 0:o||void 0,size:d,...Lme(s),...y};return A.jsxs(A.Fragment,{children:[C.hasResponsiveStyles&&A.jsx(Aw,{selector:`.${S}`,styles:C.styles,media:C.media}),typeof f=="function"?f(R):A.jsx(g,{...R})]})});Fme.displayName="@mantine/core/Box";const je=Fme;function $me(e){return e}function g9e(e){const t=e;return n=>{const r=B.forwardRef((i,s)=>A.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function Bt(e){const t=B.forwardRef(e);return t.extend=$me,t.withProps=n=>{const r=B.forwardRef((i,s)=>A.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Ya(e){const t=B.forwardRef(e);return t.withProps=n=>{const r=B.forwardRef((i,s)=>A.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=$me,t}const y9e=B.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Ub(){return B.useContext(y9e)}var zO=dme();const S3=gc(zO);function v9e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function mF(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const GC=typeof window<"u"&&window.requestAnimationFrame;function b9e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=B.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=B.useState(r?{}:o),l=p=>{zO.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||v9e(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}tg(()=>{typeof GC=="function"&&GC(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),GC(()=>{const p=mF(i);c({...f(p),height:p})})}:()=>{const p=mF(i);c({...f(p),willChange:"height",height:p}),GC(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=mF(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const b=g[m];return{"aria-hidden":!r,...g,[m]:Ame(i,b),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const x9e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},VO=Bt((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=dt("Collapse",x9e,e),c=Ga(),f=BO(),h=(c.respectReducedMotion?f:!1)?0:i,p=b9e({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?A.jsx(je,{...l,children:n}):null:A.jsx(je,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...bq(o,c)},ref:t,...l}),children:n})});VO.displayName="@mantine/core/Collapse";const[_9e,up]=Rl("ScrollArea.Root component was not found in tree");function hS(e,t){const n=Pv(t);Sw(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const w9e=B.forwardRef((e,t)=>{const{style:n,...r}=e,i=up(),[s,o]=B.useState(0),[a,u]=B.useState(0),l=!!(s&&a);return hS(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),hS(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?A.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),E9e=B.forwardRef((e,t)=>{const n=up(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?A.jsx(w9e,{...e,ref:t}):null}),S9e={scrollHideDelay:1e3,type:"hover"},Bme=B.forwardRef((e,t)=>{const n=dt("ScrollAreaRoot",S9e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=B.useState(null),[l,c]=B.useState(null),[f,d]=B.useState(null),[h,p]=B.useState(null),[m,g]=B.useState(null),[b,y]=B.useState(0),[x,w]=B.useState(0),[S,C]=B.useState(!1),[R,I]=B.useState(!1),O=vu(t,M=>u(M));return A.jsx(_9e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:S,onScrollbarXEnabledChange:C,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:R,onScrollbarYEnabledChange:I,onCornerWidthChange:y,onCornerHeightChange:w},children:A.jsx(je,{...o,ref:O,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${b}px`,"--sa-corner-height":s!=="xy"?"0px":`${x}px`}})})});Bme.displayName="@mantine/core/ScrollAreaRoot";function jme(e,t){const n=e/t;return Number.isNaN(n)?0:n}function HO(e){const t=jme(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Ume(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function T9e(e,[t,n]){return Math.min(n,Math.max(t,e))}function Wte(e,t,n="ltr"){const r=HO(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=T9e(e,u);return Ume([0,o],[0,a])(l)}function C9e(e,t,n,r="ltr"){const i=HO(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return Ume([u,l],f)(e)}function zme(e,t){return e>0&&e<t}function a8(e){return e?parseInt(e,10):0}function P_(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[A9e,Vme]=Rl("ScrollAreaScrollbar was not found in tree"),Hme=B.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=up(),[h,p]=B.useState(null),m=vu(t,I=>p(I)),g=B.useRef(null),b=B.useRef(""),{viewport:y}=d,x=n.content-n.viewport,w=Pv(l),S=Pv(a),C=$O(c,10),R=I=>{if(g.current){const O=I.clientX-g.current.left,M=I.clientY-g.current.top;u({x:O,y:M})}};return B.useEffect(()=>{const I=O=>{const M=O.target;(h==null?void 0:h.contains(M))&&w(O,x)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[y,h,x,w]),B.useEffect(S,[n,S]),hS(h,C),hS(d.content,C),A.jsx(A9e,{value:{scrollbar:h,hasThumb:r,onThumbChange:Pv(i),onThumbPointerUp:Pv(s),onThumbPositionChange:S,onThumbPointerDown:Pv(o)},children:A.jsx("div",{...f,ref:m,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:P_(e.onPointerDown,I=>{I.preventDefault(),I.button===0&&(I.target.setPointerCapture(I.pointerId),g.current=h.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",R(I))}),onPointerMove:P_(e.onPointerMove,R),onPointerUp:P_(e.onPointerUp,I=>{I.preventDefault();const O=I.target;O.hasPointerCapture(I.pointerId)&&O.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=b.current,g.current=null})})})}),qme=B.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=up(),[a,u]=B.useState(),l=B.useRef(null),c=vu(t,l,o.onScrollbarXChange);return B.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),A.jsx(Hme,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${HO(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),zme(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:a8(a.paddingLeft),paddingEnd:a8(a.paddingRight)}})}})});qme.displayName="@mantine/core/ScrollAreaScrollbarX";const Wme=B.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=up(),[a,u]=B.useState(),l=B.useRef(null),c=vu(t,l,o.onScrollbarYChange);return B.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),A.jsx(Hme,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${HO(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),zme(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:a8(a.paddingTop),paddingEnd:a8(a.paddingBottom)}})}})});Wme.displayName="@mantine/core/ScrollAreaScrollbarY";const qO=B.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Ub(),s=up(),o=B.useRef(null),a=B.useRef(0),[u,l]=B.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=jme(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>C9e(h,a.current,u,p);return n==="horizontal"?A.jsx(qme,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Wte(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?A.jsx(Wme,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Wte(h,u);u.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null});qO.displayName="@mantine/core/ScrollAreaScrollbarVisible";const xq=B.forwardRef((e,t)=>{const n=up(),{forceMount:r,...i}=e,[s,o]=B.useState(!1),a=e.orientation==="horizontal",u=$O(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return hS(n.viewport,u),hS(n.content,u),r||s?A.jsx(qO,{"data-state":s?"visible":"hidden",...i,ref:t}):null});xq.displayName="@mantine/core/ScrollAreaScrollbarAuto";const Gme=B.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=up(),[s,o]=B.useState(!1);return B.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?A.jsx(xq,{"data-state":s?"visible":"hidden",...r,ref:t}):null});Gme.displayName="@mantine/core/ScrollAreaScrollbarHover";const k9e=B.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=up(),s=e.orientation==="horizontal",[o,a]=B.useState("hidden"),u=$O(()=>a("idle"),100);return B.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),B.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?A.jsx(qO,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:P_(e.onPointerEnter,()=>a("interacting")),onPointerLeave:P_(e.onPointerLeave,()=>a("idle"))}):null}),rU=B.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=up(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return B.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?A.jsx(Gme,{...r,ref:t,forceMount:n}):i.type==="scroll"?A.jsx(k9e,{...r,ref:t,forceMount:n}):i.type==="auto"?A.jsx(xq,{...r,ref:t,forceMount:n}):i.type==="always"?A.jsx(qO,{...r,ref:t}):null});rU.displayName="@mantine/core/ScrollAreaScrollbar";function R9e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Yme=B.forwardRef((e,t)=>{const{style:n,...r}=e,i=up(),s=Vme(),{onThumbPositionChange:o}=s,a=vu(t,c=>s.onThumbChange(c)),u=B.useRef(void 0),l=$O(()=>{u.current&&(u.current(),u.current=void 0)},100);return B.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=R9e(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),A.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:P_(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:P_(e.onPointerUp,s.onThumbPointerUp)})});Yme.displayName="@mantine/core/ScrollAreaThumb";const iU=B.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Vme();return n||i.hasThumb?A.jsx(Yme,{ref:t,...r}):null});iU.displayName="@mantine/core/ScrollAreaThumb";const Kme=B.forwardRef(({children:e,style:t,...n},r)=>{const i=up(),s=vu(r,i.onViewportChange);return A.jsx(je,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:A.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});Kme.displayName="@mantine/core/ScrollAreaViewport";var _q={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Xme={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},I9e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":ot(t)}}),a1=Bt((e,t)=>{const n=dt("ScrollArea",Xme,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:b,onBottomReached:y,onTopReached:x,...w}=n,[S,C]=B.useState(!1),R=xn({name:"ScrollArea",props:n,classes:_q,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:I9e});return A.jsxs(Bme,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:b,...R("root"),...w,children:[A.jsx(Kme,{...d,...R("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":b||void 0,onScroll:I=>{var V;(V=d==null?void 0:d.onScroll)==null||V.call(d,I),p==null||p({x:I.currentTarget.scrollLeft,y:I.currentTarget.scrollTop});const{scrollTop:O,scrollHeight:M,clientHeight:L}=I.currentTarget;O-(M-L)>=0&&(y==null||y()),O===0&&(x==null||x())},children:m}),(b==="xy"||b==="x")&&A.jsx(rU,{...R("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:A.jsx(iU,{...R("thumb")})}),(b==="xy"||b==="y")&&A.jsx(rU,{...R("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:A.jsx(iU,{...R("thumb")})}),A.jsx(E9e,{...R("corner"),"data-hovered":S||void 0,"data-hidden":c==="never"||void 0})]})});a1.displayName="@mantine/core/ScrollArea";const wq=Bt((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:b,onBottomReached:y,onTopReached:x,...w}=dt("ScrollAreaAutosize",Xme,e);return A.jsx(je,{...w,ref:t,style:[{display:"flex",overflow:"auto"},g],children:A.jsx(je,{style:{display:"flex",flexDirection:"column",flex:1},children:A.jsx(a1,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:b,scrollbars:m,onBottomReached:y,onTopReached:x,children:n})})})});a1.classes=_q;wq.displayName="@mantine/core/ScrollAreaAutosize";wq.classes=_q;a1.Autosize=wq;var Qme={root:"m_87cf2631"};const P9e={__staticSelector:"UnstyledButton"},sh=Ya((e,t)=>{const n=dt("UnstyledButton",P9e,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=xn({name:s,props:n,classes:Qme,className:r,style:l,classNames:a,styles:u,unstyled:o});return A.jsx(je,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});sh.classes=Qme;sh.displayName="@mantine/core/UnstyledButton";var Jme={root:"m_515a97f8"};const N9e={},Eq=Bt((e,t)=>{const n=dt("VisuallyHidden",N9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=xn({name:"VisuallyHidden",classes:Jme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return A.jsx(je,{component:"span",ref:t,...c("root"),...l})});Eq.classes=Jme;Eq.displayName="@mantine/core/VisuallyHidden";var Zme={root:"m_1b7284a3"};const D9e={},O9e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:as(t),"--paper-shadow":fq(n)}}),mT=Ya((e,t)=>{const n=dt("Paper",D9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=xn({name:"Paper",props:n,classes:Zme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:O9e});return A.jsx(je,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});mT.classes=Zme;mT.displayName="@mantine/core/Paper";function WO(){return typeof window<"u"}function ege(e){return tge(e)?(e.nodeName||"").toLowerCase():"#document"}function gT(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function M9e(e){var t;return(t=(tge(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function tge(e){return WO()?e instanceof Node||e instanceof gT(e).Node:!1}function Yf(e){return WO()?e instanceof Element||e instanceof gT(e).Element:!1}function Sq(e){return WO()?e instanceof HTMLElement||e instanceof gT(e).HTMLElement:!1}function sU(e){return!WO()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof gT(e).ShadowRoot}function L9e(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Gte(e){return["html","body","#document"].includes(ege(e))}function F9e(e){return gT(e).getComputedStyle(e)}function $9e(e){if(ege(e)==="html")return e;const t=e.assignedSlot||e.parentNode||sU(e)&&e.host||M9e(e);return sU(t)?t.host:t}function Yte(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Yk(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&sU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function nge(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function rge(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function B9e(e){return z9e()?!1:!Kte()&&e.width===0&&e.height===0||Kte()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function j9e(){return/apple/i.test(navigator.vendor)}function Kte(){const e=/android/i;return e.test(nge())||e.test(rge())}function U9e(){return nge().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function z9e(){return rge().includes("jsdom/")}function oU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function V9e(e){return"nativeEvent"in e}function H9e(e){return e.matches("html,body")}function __(e){return(e==null?void 0:e.ownerDocument)||document}function gF(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function gE(e){return"composedPath"in e?e.composedPath()[0]:e.target}const q9e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function W9e(e){return Sq(e)&&e.matches(q9e)}const Wd=Math.min,ec=Math.max,u8=Math.round,f6=Math.floor,ub=e=>({x:e,y:e}),G9e={left:"right",right:"left",bottom:"top",top:"bottom"},Y9e={start:"end",end:"start"};function aU(e,t,n){return ec(e,Wd(t,n))}function u1(e,t){return typeof e=="function"?e(t):e}function T0(e){return e.split("-")[0]}function yT(e){return e.split("-")[1]}function Tq(e){return e==="x"?"y":"x"}function Cq(e){return e==="y"?"height":"width"}function Rw(e){return["top","bottom"].includes(T0(e))?"y":"x"}function Aq(e){return Tq(Rw(e))}function K9e(e,t,n){n===void 0&&(n=!1);const r=yT(e),i=Aq(e),s=Cq(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=l8(o)),[o,l8(o)]}function X9e(e){const t=l8(e);return[uU(e),t,uU(t)]}function uU(e){return e.replace(/start|end/g,t=>Y9e[t])}function Q9e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function J9e(e,t,n,r){const i=yT(e);let s=Q9e(T0(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(uU)))),s}function l8(e){return e.replace(/left|right|bottom|top/g,t=>G9e[t])}function Z9e(e){return{top:0,right:0,bottom:0,left:0,...e}}function kq(e){return typeof e!="number"?Z9e(e):{top:e,right:e,bottom:e,left:e}}function pS(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Xte(e,t,n){let{reference:r,floating:i}=e;const s=Rw(t),o=Aq(t),a=Cq(o),u=T0(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(yT(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const eMe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Xte(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:b}=a[m],{x:y,y:x,data:w,reset:S}=await b({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=y??c,f=x??f,h={...h,[g]:{...h[g],...w}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(d=S.placement),S.rects&&(l=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:c,y:f}=Xte(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function Rq(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=u1(t,e),p=kq(h),g=a[d?f==="floating"?"reference":"floating":f],b=pS(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),y=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},S=pS(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:x,strategy:u}):y);return{top:(b.top-S.top+p.top)/w.y,bottom:(S.bottom-b.bottom+p.bottom)/w.y,left:(b.left-S.left+p.left)/w.x,right:(S.right-b.right+p.right)/w.x}}const tMe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=u1(e,t)||{};if(l==null)return{};const f=kq(c),d={x:n,y:r},h=Aq(i),p=Cq(h),m=await o.getDimensions(l),g=h==="y",b=g?"top":"left",y=g?"bottom":"right",x=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],S=d[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let R=C?C[x]:0;(!R||!await(o.isElement==null?void 0:o.isElement(C)))&&(R=a.floating[x]||s.floating[p]);const I=w/2-S/2,O=R/2-m[p]/2-1,M=Wd(f[b],O),L=Wd(f[y],O),V=M,D=R-m[p]-L,j=R/2-m[p]/2+I,z=aU(V,j,D),G=!u.arrow&&yT(i)!=null&&j!==z&&s.reference[p]/2-(j<V?M:L)-m[p]/2<0,ee=G?j<V?j-V:j-D:0;return{[h]:d[h]+ee,data:{[h]:z,centerOffset:j-z-ee,...G&&{alignmentOffset:ee}},reset:G}}}),nMe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=u1(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=T0(i),y=T0(a)===a,x=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(y||!m?[l8(a)]:X9e(a));!d&&p!=="none"&&w.push(...J9e(a,m,p,x));const S=[a,...w],C=await Rq(t,g),R=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&R.push(C[b]),f){const V=K9e(i,o,x);R.push(C[V[0]],C[V[1]])}if(I=[...I,{placement:i,overflows:R}],!R.every(V=>V<=0)){var O,M;const V=(((O=s.flip)==null?void 0:O.index)||0)+1,D=S[V];if(D)return{data:{index:V,overflows:I},reset:{placement:D}};let j=(M=I.filter(z=>z.overflows[0]<=0).sort((z,G)=>z.overflows[1]-G.overflows[1])[0])==null?void 0:M.placement;if(!j)switch(h){case"bestFit":{var L;const z=(L=I.map(G=>[G.placement,G.overflows.filter(ee=>ee>0).reduce((ee,ne)=>ee+ne,0)]).sort((G,ee)=>G[1]-ee[1])[0])==null?void 0:L[0];z&&(j=z);break}case"initialPlacement":j=a;break}if(i!==j)return{reset:{placement:j}}}return{}}}};function ige(e){const t=Wd(...e.map(s=>s.left)),n=Wd(...e.map(s=>s.top)),r=ec(...e.map(s=>s.right)),i=ec(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function rMe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>pS(ige(i)))}const iMe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=u1(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=rMe(c),d=pS(ige(c)),h=kq(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Rw(n)==="y"){const M=f[0],L=f[f.length-1],V=T0(n)==="top",D=M.top,j=L.bottom,z=V?M.left:L.left,G=V?M.right:L.right,ee=G-z,ne=j-D;return{top:D,bottom:j,left:z,right:G,width:ee,height:ne,x:z,y:D}}const g=T0(n)==="left",b=ec(...f.map(M=>M.right)),y=Wd(...f.map(M=>M.left)),x=f.filter(M=>g?M.left===y:M.right===b),w=x[0].top,S=x[x.length-1].bottom,C=y,R=b,I=R-C,O=S-w;return{top:w,bottom:S,left:C,right:R,width:I,height:O,x:C,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function sMe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=T0(n),a=yT(n),u=Rw(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=u1(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const oMe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await sMe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},aMe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:b,y}=g;return{x:b,y}}},...u}=u1(e,t),l={x:n,y:r},c=await Rq(t,u),f=Rw(T0(i)),d=Tq(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",b=d==="y"?"bottom":"right",y=h+c[g],x=h-c[b];h=aU(y,h,x)}if(o){const g=f==="y"?"top":"left",b=f==="y"?"bottom":"right",y=p+c[g],x=p-c[b];p=aU(y,p,x)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},uMe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=u1(e,t),c={x:n,y:r},f=Rw(i),d=Tq(f);let h=c[d],p=c[f];const m=u1(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const x=d==="y"?"height":"width",w=s.reference[d]-s.floating[x]+g.mainAxis,S=s.reference[d]+s.reference[x]-g.mainAxis;h<w?h=w:h>S&&(h=S)}if(l){var b,y;const x=d==="y"?"width":"height",w=["top","left"].includes(T0(i)),S=s.reference[f]-s.floating[x]+(w&&((b=o.offset)==null?void 0:b[f])||0)+(w?0:g.crossAxis),C=s.reference[f]+s.reference[x]+(w?0:((y=o.offset)==null?void 0:y[f])||0)-(w?g.crossAxis:0);p<S?p=S:p>C&&(p=C)}return{[d]:h,[f]:p}}}},lMe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=u1(e,t),u=await Rq(t,a),l=T0(n),c=yT(n),f=Rw(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,b=d-u.left-u.right,y=Wd(h-u[p],g),x=Wd(d-u[m],b),w=!t.middlewareData.shift;let S=y,C=x;if(f?C=c||w?Wd(x,b):b:S=c||w?Wd(y,g):g,w&&!c){const I=ec(u.left,0),O=ec(u.right,0),M=ec(u.top,0),L=ec(u.bottom,0);f?C=d-2*(I!==0||O!==0?I+O:ec(u.left,u.right)):S=h-2*(M!==0||L!==0?M+L:ec(u.top,u.bottom))}await o({...t,availableWidth:C,availableHeight:S});const R=await i.getDimensions(s.floating);return d!==R.width||h!==R.height?{reset:{rects:!0}}:{}}}};function vT(e){return sge(e)?(e.nodeName||"").toLowerCase():"#document"}function Jd(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function k1(e){var t;return(t=(sge(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function sge(e){return e instanceof Node||e instanceof Jd(e).Node}function ng(e){return e instanceof Element||e instanceof Jd(e).Element}function rg(e){return e instanceof HTMLElement||e instanceof Jd(e).HTMLElement}function Qte(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jd(e).ShadowRoot}function aR(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=C0(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function cMe(e){return["table","td","th"].includes(vT(e))}function Iq(e){const t=Pq(),n=C0(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function fMe(e){let t=lb(e);for(;rg(t)&&!mS(t);){if(Iq(t))return t;t=lb(t)}return null}function Pq(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function mS(e){return["html","body","#document"].includes(vT(e))}function C0(e){return Jd(e).getComputedStyle(e)}function GO(e){return ng(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function lb(e){if(vT(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Qte(e)&&e.host||k1(e);return Qte(t)?t.host:t}function oge(e){const t=lb(e);return mS(t)?e.ownerDocument?e.ownerDocument.body:e.body:rg(t)&&aR(t)?t:oge(t)}function Gy(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=oge(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Jd(i);return s?t.concat(o,o.visualViewport||[],aR(i)?i:[],o.frameElement&&n?Gy(o.frameElement):[]):t.concat(i,Gy(i,[],n))}function age(e){const t=C0(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=rg(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=u8(n)!==s||u8(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Nq(e){return ng(e)?e:e.contextElement}function UE(e){const t=Nq(e);if(!rg(t))return ub(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=age(t);let o=(s?u8(n.width):n.width)/r,a=(s?u8(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const dMe=ub(0);function uge(e){const t=Jd(e);return!Pq()||!t.visualViewport?dMe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function hMe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Jd(e)?!1:t}function q_(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=Nq(e);let o=ub(1);t&&(r?ng(r)&&(o=UE(r)):o=UE(e));const a=hMe(s,n,r)?uge(s):ub(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Jd(s),h=r&&ng(r)?Jd(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=UE(m),b=m.getBoundingClientRect(),y=C0(m),x=b.left+(m.clientLeft+parseFloat(y.paddingLeft))*g.x,w=b.top+(m.clientTop+parseFloat(y.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=x,l+=w,p=Jd(m),m=p.frameElement}}return pS({width:c,height:f,x:u,y:l})}const pMe=[":popover-open",":modal"];function Dq(e){return pMe.some(t=>{try{return e.matches(t)}catch{return!1}})}function mMe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=k1(r),a=t?Dq(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=ub(1);const c=ub(0),f=rg(r);if((f||!f&&!s)&&((vT(r)!=="body"||aR(o))&&(u=GO(r)),rg(r))){const d=q_(r);l=UE(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function gMe(e){return Array.from(e.getClientRects())}function lge(e){return q_(k1(e)).left+GO(e).scrollLeft}function yMe(e){const t=k1(e),n=GO(e),r=e.ownerDocument.body,i=ec(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ec(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+lge(e);const a=-n.scrollTop;return C0(r).direction==="rtl"&&(o+=ec(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function vMe(e,t){const n=Jd(e),r=k1(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=Pq();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function bMe(e,t){const n=q_(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=rg(e)?UE(e):ub(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Jte(e,t,n){let r;if(t==="viewport")r=vMe(e,n);else if(t==="document")r=yMe(k1(e));else if(ng(t))r=bMe(t,n);else{const i=uge(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return pS(r)}function cge(e,t){const n=lb(e);return n===t||!ng(n)||mS(n)?!1:C0(n).position==="fixed"||cge(n,t)}function xMe(e,t){const n=t.get(e);if(n)return n;let r=Gy(e,[],!1).filter(a=>ng(a)&&vT(a)!=="body"),i=null;const s=C0(e).position==="fixed";let o=s?lb(e):e;for(;ng(o)&&!mS(o);){const a=C0(o),u=Iq(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||aR(o)&&!u&&cge(e,o))?r=r.filter(c=>c!==o):i=a,o=lb(o)}return t.set(e,r),r}function _Me(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?Dq(t)?[]:xMe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=Jte(t,c,i);return l.top=ec(f.top,l.top),l.right=Wd(f.right,l.right),l.bottom=Wd(f.bottom,l.bottom),l.left=ec(f.left,l.left),l},Jte(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function wMe(e){const{width:t,height:n}=age(e);return{width:t,height:n}}function EMe(e,t,n){const r=rg(t),i=k1(t),s=n==="fixed",o=q_(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=ub(0);if(r||!r&&!s)if((vT(t)!=="body"||aR(i))&&(a=GO(t)),r){const f=q_(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=lge(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function yF(e){return C0(e).position==="static"}function Zte(e,t){return!rg(e)||C0(e).position==="fixed"?null:t?t(e):e.offsetParent}function fge(e,t){const n=Jd(e);if(Dq(e))return n;if(!rg(e)){let i=lb(e);for(;i&&!mS(i);){if(ng(i)&&!yF(i))return i;i=lb(i)}return n}let r=Zte(e,t);for(;r&&cMe(r)&&yF(r);)r=Zte(r,t);return r&&mS(r)&&yF(r)&&!Iq(r)?n:r||fMe(e)||n}const SMe=async function(e){const t=this.getOffsetParent||fge,n=this.getDimensions,r=await n(e.floating);return{reference:EMe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function TMe(e){return C0(e).direction==="rtl"}const CMe={convertOffsetParentRelativeRectToViewportRelativeRect:mMe,getDocumentElement:k1,getClippingRect:_Me,getOffsetParent:fge,getElementRects:SMe,getClientRects:gMe,getDimensions:wMe,getScale:UE,isElement:ng,isRTL:TMe};function AMe(e,t){let n=null,r;const i=k1(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=f6(c),p=f6(i.clientWidth-(l+f)),m=f6(i.clientHeight-(c+d)),g=f6(l),y={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:ec(0,Wd(1,u))||1};let x=!0;function w(S){const C=S[0].intersectionRatio;if(C!==u){if(!x)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(w,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,y)}n.observe(e)}return o(!0),s}function kMe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=Nq(e),c=i||s?[...l?Gy(l):[],...Gy(t)]:[];c.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const f=l&&a?AMe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(b=>{let[y]=b;y&&y.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?q_(e):null;u&&g();function g(){const b=q_(e);m&&(b.x!==m.x||b.y!==m.y||b.width!==m.width||b.height!==m.height)&&n(),m=b,p=requestAnimationFrame(g)}return n(),()=>{var b;c.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),f==null||f(),(b=h)==null||b.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const RMe=oMe,IMe=aMe,PMe=nMe,NMe=lMe,ene=tMe,DMe=iMe,OMe=uMe,MMe=(e,t,n)=>{const r=new Map,i={platform:CMe,...n},s={...i.platform,_c:r};return eMe(e,t,{...i,platform:s})};var EP=typeof document<"u"?B.useLayoutEffect:B.useEffect;function c8(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!c8(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!c8(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function dge(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function tne(e,t){const n=dge(e);return Math.round(t*n)/n}function vF(e){const t=B.useRef(e);return EP(()=>{t.current=e}),t}function LMe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=B.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=B.useState(r);c8(d,r)||h(r);const[p,m]=B.useState(null),[g,b]=B.useState(null),y=B.useCallback(ne=>{ne!==C.current&&(C.current=ne,m(ne))},[]),x=B.useCallback(ne=>{ne!==R.current&&(R.current=ne,b(ne))},[]),w=s||p,S=o||g,C=B.useRef(null),R=B.useRef(null),I=B.useRef(c),O=u!=null,M=vF(u),L=vF(i),V=vF(l),D=B.useCallback(()=>{if(!C.current||!R.current)return;const ne={placement:t,strategy:n,middleware:d};L.current&&(ne.platform=L.current),MMe(C.current,R.current,ne).then(ue=>{const X={...ue,isPositioned:V.current!==!1};j.current&&!c8(I.current,X)&&(I.current=X,zO.flushSync(()=>{f(X)}))})},[d,t,n,L,V]);EP(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(ne=>({...ne,isPositioned:!1})))},[l]);const j=B.useRef(!1);EP(()=>(j.current=!0,()=>{j.current=!1}),[]),EP(()=>{if(w&&(C.current=w),S&&(R.current=S),w&&S){if(M.current)return M.current(w,S,D);D()}},[w,S,D,M,O]);const z=B.useMemo(()=>({reference:C,floating:R,setReference:y,setFloating:x}),[y,x]),G=B.useMemo(()=>({reference:w,floating:S}),[w,S]),ee=B.useMemo(()=>{const ne={position:n,left:0,top:0};if(!G.floating)return ne;const ue=tne(G.floating,c.x),X=tne(G.floating,c.y);return a?{...ne,transform:"translate("+ue+"px, "+X+"px)",...dge(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ue,top:X}},[n,a,G.floating,c.x,c.y]);return B.useMemo(()=>({...c,update:D,refs:z,elements:G,floatingStyles:ee}),[c,D,z,G,ee])}const FMe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ene({element:r.current,padding:i}).fn(n):{}:r?ene({element:r,padding:i}).fn(n):{}}}},hge=(e,t)=>({...RMe(e),options:[e,t]}),Oq=(e,t)=>({...IMe(e),options:[e,t]}),nne=(e,t)=>({...OMe(e),options:[e,t]}),f8=(e,t)=>({...PMe(e),options:[e,t]}),$Me=(e,t)=>({...NMe(e),options:[e,t]}),fk=(e,t)=>({...DMe(e),options:[e,t]}),pge=(e,t)=>({...FMe(e),options:[e,t]}),mge={...O8e},BMe=mge.useInsertionEffect,jMe=BMe||(e=>e());function Dy(e){const t=B.useRef(()=>{});return jMe(()=>{t.current=e}),B.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Um=typeof document<"u"?B.useLayoutEffect:B.useEffect;let rne=!1,UMe=0;const ine=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+UMe++;function zMe(){const[e,t]=B.useState(()=>rne?ine():void 0);return Um(()=>{e==null&&t(ine())},[]),B.useEffect(()=>{rne=!0},[]),e}const VMe=mge.useId,gge=VMe||zMe;function HMe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const qMe=B.createContext(null),WMe=B.createContext(null),Mq=()=>{var e;return((e=B.useContext(qMe))==null?void 0:e.id)||null},Lq=()=>B.useContext(WMe);function Fq(e){return"data-floating-ui-"+e}function bF(e){const t=B.useRef(e);return Um(()=>{t.current=e}),t}const sne=Fq("safe-polygon");function SP(e,t,n){return n&&!oU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function GMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:f=0,move:d=!0}=t,h=Lq(),p=Mq(),m=bF(l),g=bF(u),b=bF(n),y=B.useRef(),x=B.useRef(-1),w=B.useRef(),S=B.useRef(-1),C=B.useRef(!0),R=B.useRef(!1),I=B.useRef(()=>{}),O=B.useRef(!1),M=B.useCallback(()=>{var ee;const ne=(ee=i.current.openEvent)==null?void 0:ee.type;return(ne==null?void 0:ne.includes("mouse"))&&ne!=="mousedown"},[i]);B.useEffect(()=>{if(!a)return;function ee(ne){let{open:ue}=ne;ue||(clearTimeout(x.current),clearTimeout(S.current),C.current=!0,O.current=!1)}return s.on("openchange",ee),()=>{s.off("openchange",ee)}},[a,s]),B.useEffect(()=>{if(!a||!m.current||!n)return;function ee(ue){M()&&r(!1,ue,"hover")}const ne=__(o.floating).documentElement;return ne.addEventListener("mouseleave",ee),()=>{ne.removeEventListener("mouseleave",ee)}},[o.floating,n,r,a,m,M]);const L=B.useCallback(function(ee,ne,ue){ne===void 0&&(ne=!0),ue===void 0&&(ue="hover");const X=SP(g.current,"close",y.current);X&&!w.current?(clearTimeout(x.current),x.current=window.setTimeout(()=>r(!1,ee,ue),X)):ne&&(clearTimeout(x.current),r(!1,ee,ue))},[g,r]),V=Dy(()=>{I.current(),w.current=void 0}),D=Dy(()=>{if(R.current){const ee=__(o.floating).body;ee.style.pointerEvents="",ee.removeAttribute(sne),R.current=!1}}),j=Dy(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);B.useEffect(()=>{if(!a)return;function ee(W){if(clearTimeout(x.current),C.current=!1,c&&!oU(y.current)||f>0&&!SP(g.current,"open"))return;const te=SP(g.current,"open",y.current);te?x.current=window.setTimeout(()=>{b.current||r(!0,W,"hover")},te):n||r(!0,W,"hover")}function ne(W){if(j())return;I.current();const te=__(o.floating);if(clearTimeout(S.current),O.current=!1,m.current&&i.current.floatingContext){n||clearTimeout(x.current),w.current=m.current({...i.current.floatingContext,tree:h,x:W.clientX,y:W.clientY,onClose(){D(),V(),j()||L(W,!0,"safe-polygon")}});const J=w.current;te.addEventListener("mousemove",J),I.current=()=>{te.removeEventListener("mousemove",J)};return}(y.current==="touch"?!Yk(o.floating,W.relatedTarget):!0)&&L(W)}function ue(W){j()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:W.clientX,y:W.clientY,onClose(){D(),V(),j()||L(W)}})(W))}if(Yf(o.domReference)){var X;const W=o.domReference;return n&&W.addEventListener("mouseleave",ue),(X=o.floating)==null||X.addEventListener("mouseleave",ue),d&&W.addEventListener("mousemove",ee,{once:!0}),W.addEventListener("mouseenter",ee),W.addEventListener("mouseleave",ne),()=>{var te;n&&W.removeEventListener("mouseleave",ue),(te=o.floating)==null||te.removeEventListener("mouseleave",ue),d&&W.removeEventListener("mousemove",ee),W.removeEventListener("mouseenter",ee),W.removeEventListener("mouseleave",ne)}}},[o,a,e,c,f,d,L,V,D,r,n,b,h,g,m,i,j]),Um(()=>{var ee;if(a&&n&&(ee=m.current)!=null&&ee.__options.blockPointerEvents&&M()){R.current=!0;const ue=o.floating;if(Yf(o.domReference)&&ue){var ne;const X=__(o.floating).body;X.setAttribute(sne,"");const W=o.domReference,te=h==null||(ne=h.nodesRef.current.find(q=>q.id===p))==null||(ne=ne.context)==null?void 0:ne.elements.floating;return te&&(te.style.pointerEvents=""),X.style.pointerEvents="none",W.style.pointerEvents="auto",ue.style.pointerEvents="auto",()=>{X.style.pointerEvents="",W.style.pointerEvents="",ue.style.pointerEvents=""}}}},[a,n,p,o,h,m,M]),Um(()=>{n||(y.current=void 0,O.current=!1,V(),D())},[n,V,D]),B.useEffect(()=>()=>{V(),clearTimeout(x.current),clearTimeout(S.current),D()},[a,o.domReference,V,D]);const z=B.useMemo(()=>{function ee(ne){y.current=ne.pointerType}return{onPointerDown:ee,onPointerEnter:ee,onMouseMove(ne){const{nativeEvent:ue}=ne;function X(){!C.current&&!b.current&&r(!0,ue,"hover")}c&&!oU(y.current)||n||f===0||O.current&&ne.movementX**2+ne.movementY**2<2||(clearTimeout(S.current),y.current==="touch"?X():(O.current=!0,S.current=window.setTimeout(X,f)))}}},[c,r,n,b,f]),G=B.useMemo(()=>({onMouseEnter(){clearTimeout(x.current)},onMouseLeave(ee){j()||L(ee.nativeEvent,!1)}}),[L,j]);return B.useMemo(()=>a?{reference:z,floating:G}:{},[a,z,G])}const lU=()=>{},yge=B.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:lU,setState:lU,isInstantPhase:!1}),vge=()=>B.useContext(yge);function YMe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=B.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=B.useRef(null),a=B.useCallback(u=>{s({currentId:u})},[]);return Um(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),B.createElement(yge.Provider,{value:B.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function KMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s,enabled:o=!0}=t,a=s??i,u=vge(),{currentId:l,setCurrentId:c,initialDelay:f,setState:d,timeoutMs:h}=u;return Um(()=>{o&&l&&(d({delay:{open:1,close:SP(f,"close")}}),l!==a&&r(!1))},[o,a,r,d,l,f]),Um(()=>{function p(){r(!1),d({delay:f,currentId:null})}if(o&&l&&!n&&l===a){if(h){const m=window.setTimeout(p,h);return()=>{clearTimeout(m)}}p()}},[o,n,d,l,a,r,f,h]),Um(()=>{o&&(c===lU||!n||c(a))},[o,n,c,a]),u}function xF(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const XMe="data-floating-ui-focusable",QMe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},JMe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},one=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function ZMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:p}=t,m=Lq(),g=Dy(typeof u=="function"?u:()=>!1),b=typeof u=="function"?g:u,y=B.useRef(!1),x=B.useRef(!1),{escapeKey:w,outsidePress:S}=one(h),{escapeKey:C,outsidePress:R}=one(p),I=B.useRef(!1),O=Dy(z=>{var G;if(!n||!o||!a||z.key!=="Escape"||I.current)return;const ee=(G=s.current.floatingContext)==null?void 0:G.nodeId,ne=m?xF(m.nodesRef.current,ee):[];if(!w&&(z.stopPropagation(),ne.length>0)){let ue=!0;if(ne.forEach(X=>{var W;if((W=X.context)!=null&&W.open&&!X.context.dataRef.current.__escapeKeyBubbles){ue=!1;return}}),!ue)return}r(!1,V9e(z)?z.nativeEvent:z,"escape-key")}),M=Dy(z=>{var G;const ee=()=>{var ne;O(z),(ne=gE(z))==null||ne.removeEventListener("keydown",ee)};(G=gE(z))==null||G.addEventListener("keydown",ee)}),L=Dy(z=>{var G;const ee=y.current;y.current=!1;const ne=x.current;if(x.current=!1,l==="click"&&ne||ee||typeof b=="function"&&!b(z))return;const ue=gE(z),X="["+Fq("inert")+"]",W=__(i.floating).querySelectorAll(X);let te=Yf(ue)?ue:null;for(;te&&!Gte(te);){const de=$9e(te);if(Gte(de)||!Yf(de))break;te=de}if(W.length&&Yf(ue)&&!H9e(ue)&&!Yk(ue,i.floating)&&Array.from(W).every(de=>!Yk(te,de)))return;if(Sq(ue)&&j){const de=ue.clientWidth>0&&ue.scrollWidth>ue.clientWidth,ce=ue.clientHeight>0&&ue.scrollHeight>ue.clientHeight;let pe=ce&&z.offsetX>ue.clientWidth;if(ce&&F9e(ue).direction==="rtl"&&(pe=z.offsetX<=ue.offsetWidth-ue.clientWidth),pe||de&&z.offsetY>ue.clientHeight)return}const q=(G=s.current.floatingContext)==null?void 0:G.nodeId,J=m&&xF(m.nodesRef.current,q).some(de=>{var ce;return gF(z,(ce=de.context)==null?void 0:ce.elements.floating)});if(gF(z,i.floating)||gF(z,i.domReference)||J)return;const oe=m?xF(m.nodesRef.current,q):[];if(oe.length>0){let de=!0;if(oe.forEach(ce=>{var pe;if((pe=ce.context)!=null&&pe.open&&!ce.context.dataRef.current.__outsidePressBubbles){de=!1;return}}),!de)return}r(!1,z,"outside-press")}),V=Dy(z=>{var G;const ee=()=>{var ne;L(z),(ne=gE(z))==null||ne.removeEventListener(l,ee)};(G=gE(z))==null||G.addEventListener(l,ee)});B.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=w,s.current.__outsidePressBubbles=S;let z=-1;function G(W){r(!1,W,"ancestor-scroll")}function ee(){window.clearTimeout(z),I.current=!0}function ne(){z=window.setTimeout(()=>{I.current=!1},L9e()?5:0)}const ue=__(i.floating);a&&(ue.addEventListener("keydown",C?M:O,C),ue.addEventListener("compositionstart",ee),ue.addEventListener("compositionend",ne)),b&&ue.addEventListener(l,R?V:L,R);let X=[];return d&&(Yf(i.domReference)&&(X=Gy(i.domReference)),Yf(i.floating)&&(X=X.concat(Gy(i.floating))),!Yf(i.reference)&&i.reference&&i.reference.contextElement&&(X=X.concat(Gy(i.reference.contextElement)))),X=X.filter(W=>{var te;return W!==((te=ue.defaultView)==null?void 0:te.visualViewport)}),X.forEach(W=>{W.addEventListener("scroll",G,{passive:!0})}),()=>{a&&(ue.removeEventListener("keydown",C?M:O,C),ue.removeEventListener("compositionstart",ee),ue.removeEventListener("compositionend",ne)),b&&ue.removeEventListener(l,R?V:L,R),X.forEach(W=>{W.removeEventListener("scroll",G)}),window.clearTimeout(z)}},[s,i,a,b,l,n,r,d,o,w,S,O,C,M,L,R,V]),B.useEffect(()=>{y.current=!1},[b,l]);const D=B.useMemo(()=>({onKeyDown:O,[QMe[f]]:z=>{c&&r(!1,z.nativeEvent,"reference-press")}}),[O,r,c,f]),j=B.useMemo(()=>({onKeyDown:O,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[JMe[l]]:()=>{y.current=!0}}),[O,l]);return B.useMemo(()=>o?{reference:D,floating:j}:{},[o,D,j])}function eLe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=gge(),s=B.useRef({}),[o]=B.useState(()=>HMe()),a=Mq()!=null,[u,l]=B.useState(r.reference),c=Dy((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=B.useMemo(()=>({setPositionReference:l}),[]),d=B.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return B.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function $q(e){e===void 0&&(e={});const{nodeId:t}=e,n=eLe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=B.useState(null),[a,u]=B.useState(null),c=(i==null?void 0:i.domReference)||s,f=B.useRef(null),d=Lq();Um(()=>{c&&(f.current=c)},[c]);const h=LMe({...e,elements:{...i,...a&&{reference:a}}}),p=B.useCallback(x=>{const w=Yf(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;u(w),h.refs.setReference(w)},[h.refs]),m=B.useCallback(x=>{(Yf(x)||x===null)&&(f.current=x,o(x)),(Yf(h.refs.reference.current)||h.refs.reference.current===null||x!==null&&!Yf(x))&&h.refs.setReference(x)},[h.refs]),g=B.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),b=B.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),y=B.useMemo(()=>({...h,...r,refs:g,elements:b,nodeId:t}),[h,g,b,t,r]);return Um(()=>{r.dataRef.current.floatingContext=y;const x=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);x&&(x.context=y)}),B.useMemo(()=>({...h,context:y,refs:g,elements:b}),[h,g,b,y])}function tLe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=B.useRef(!1),c=B.useRef(),f=B.useRef(!0);B.useEffect(()=>{if(!a)return;const h=gT(o.domReference);function p(){!n&&Sq(o.domReference)&&o.domReference===Yte(__(o.domReference))&&(l.current=!0)}function m(){f.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),B.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),B.useEffect(()=>()=>{clearTimeout(c.current)},[]);const d=B.useMemo(()=>({onPointerDown(h){B9e(h.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const p=gE(h.nativeEvent);if(u&&Yf(p))try{if(j9e()&&U9e())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!f.current&&!W9e(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const p=h.relatedTarget,m=h.nativeEvent,g=Yf(p)&&p.hasAttribute(Fq("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var b;const y=Yte(o.domReference?o.domReference.ownerDocument:document);!p&&y===o.domReference||Yk((b=s.current.floatingContext)==null?void 0:b.refs.floating.current,y)||Yk(o.domReference,y)||g||r(!1,m,"focus")})}}),[s,o.domReference,r,u]);return B.useMemo(()=>a?{reference:d}:{},[a,d])}const ane="active",une="selected";function _F(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[ane]:o,[une]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1,[XMe]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[ane,une].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function nLe(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=B.useCallback(a=>_F(a,e,"reference"),t),s=B.useCallback(a=>_F(a,e,"floating"),n),o=B.useCallback(a=>_F(a,e,"item"),r);return B.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const rLe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function iLe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=rLe.get(o))!=null?n:o,u=gge(),c=Mq()!=null,f=B.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,o]),d=B.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,o]),h=B.useCallback(p=>{let{active:m,selected:g}=p;const b={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...b,"aria-selected":m&&g};case"combobox":return{...b,...m&&{"aria-selected":!0}}}return{}},[i,o]);return B.useMemo(()=>s?{reference:f,floating:d,item:h}:{},[s,f,d,h])}function bge(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function lne(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function cne(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const sLe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function oLe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[sLe[u]]:r},f=-t/2;return u==="left"?{...c,...lne(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:u==="right"?{...c,...lne(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:u==="top"?{...c,...cne(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:u==="bottom"?{...c,...cne(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const Bq=B.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Ub();return s?A.jsx("div",{...l,ref:c,style:{...u,...oLe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});Bq.displayName="@mantine/core/FloatingArrow";var xge={root:"m_9814e45f"};const aLe={zIndex:fd("modal")},uLe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&wm(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${ot(i)})`:void 0,"--overlay-radius":s===void 0?void 0:as(s),"--overlay-z-index":o==null?void 0:o.toString()}}),gS=Ya((e,t)=>{const n=dt("Overlay",aLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:b,mod:y,...x}=n,w=xn({name:"Overlay",props:n,classes:xge,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uLe});return A.jsx(je,{ref:t,...w("root"),mod:[{center:c,fixed:l},y],...x,children:f})});gS.classes=xge;gS.displayName="@mantine/core/Overlay";function lLe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const cLe={},_ge=B.forwardRef((e,t)=>{const{children:n,target:r,...i}=dt("Portal",cLe,e),[s,o]=B.useState(!1),a=B.useRef(null);return Sw(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:lLe(i),s8(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:zO.createPortal(A.jsx(A.Fragment,{children:n}),a.current)});_ge.displayName="@mantine/core/Portal";function zb({withinPortal:e=!0,children:t,...n}){return e?A.jsx(_ge,{...n,children:t}):A.jsx(A.Fragment,{children:t})}zb.displayName="@mantine/core/OptionalPortal";const YC=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),d6={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...YC("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...YC("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...YC("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...YC("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...YC("top"),common:{transformOrigin:"top right"}}},fne={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function fLe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in d6?{transitionProperty:d6[e].transitionProperty,...i,...d6[e].common,...d6[e][fne[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[fne[t]]}}function dLe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:u,exitDelay:l}){const c=Ga(),f=BO(),d=c.respectReducedMotion?f:!1,[h,p]=B.useState(d?0:e),[m,g]=B.useState(r?"entered":"exited"),b=B.useRef(-1),y=B.useRef(-1),x=B.useRef(-1),w=C=>{const R=C?i:s,I=C?o:a;window.clearTimeout(b.current);const O=d?0:C?e:t;p(O),O===0?(typeof R=="function"&&R(),typeof I=="function"&&I(),g(C?"entered":"exited")):x.current=requestAnimationFrame(()=>{S3.flushSync(()=>{g(C?"pre-entering":"pre-exiting")}),x.current=requestAnimationFrame(()=>{typeof R=="function"&&R(),g(C?"entering":"exiting"),b.current=window.setTimeout(()=>{typeof I=="function"&&I(),g(C?"entered":"exited")},O)})})},S=C=>{if(window.clearTimeout(y.current),typeof(C?u:l)!="number"){w(C);return}y.current=window.setTimeout(()=>{w(C)},C?u:l)};return tg(()=>{S(r)},[r]),B.useEffect(()=>()=>{window.clearTimeout(b.current),cancelAnimationFrame(x.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function bg({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=dLe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d});return h===0?i?A.jsx(A.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:A.jsx(A.Fragment,{children:s(fLe({transition:t,duration:h,state:p,timingFunction:m}))})}bg.displayName="@mantine/core/Transition";const[hLe,wge]=Rl("Popover component was not found in the tree");function YO({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=GDe(t),s=vu(i,r);return $b(e)?B.cloneElement(e,{[n]:s}):e}function Ege(e){return A.jsx(Eq,{tabIndex:-1,"data-autofocus":!0,...e})}YO.displayName="@mantine/core/FocusTrap";Ege.displayName="@mantine/core/FocusTrapInitialFocus";YO.InitialFocus=Ege;var Sge={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const pLe={},jq=Bt((e,t)=>{var g,b,y,x;const n=dt("PopoverDropdown",pLe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=wge(),h=wme({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=vu(t,d.floating);return d.disabled?null:A.jsx(zb,{...d.portalProps,withinPortal:d.withinPortal,children:A.jsx(bg,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((b=d.transitionProps)==null?void 0:b.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((y=d.transitionProps)==null?void 0:y.exitDuration)=="number"?d.transitionProps.exitDuration:(x=d.transitionProps)==null?void 0:x.duration,children:w=>A.jsx(YO,{active:d.trapFocus&&d.opened,innerRef:m,children:A.jsxs(je,{...p,...f,variant:u,onKeyDownCapture:ODe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:ot(d.width)},d.resolvedStyles.dropdown,c==null?void 0:c.dropdown,i]}),children:[o,A.jsx(Bq,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});jq.classes=Sge;jq.displayName="@mantine/core/PopoverDropdown";const mLe={refProp:"ref",popupType:"dialog"},Tge=Bt((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=dt("PopoverTarget",mLe,e);if(!$b(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=wge(),u=vu(a.reference,jO(n),t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return B.cloneElement(n,{...o,...l,...a.targetProps,className:ba(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Tge.displayName="@mantine/core/PopoverTarget";function Cge({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=B.useState(0);B.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return kMe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),tg(()=>{t.update()},r),tg(()=>{s(o=>o+1)},[e])}function gLe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function yLe(e,t){const n=gLe(e.middlewares),r=[hge(e.offset)];return n.shift&&r.push(Oq(typeof n.shift=="boolean"?{limiter:nne(),padding:5}:{limiter:nne(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?f8():f8(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?fk():fk(n.inline)),r.push(pge({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push($Me({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o,...a}){var c;const l=((c=t().refs.floating.current)==null?void 0:c.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:s,availableHeight:o,...a}):Object.assign(l,{maxWidth:`${s}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(l,{width:`${i.reference.width}px`})}})),r}function vLe(e){const[t,n]=ju({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=B.useRef(t),i=()=>{t&&n(!1)},s=()=>n(!t),o=$q({strategy:e.strategy,placement:e.position,middleware:yLe(e,()=>o)});return Cge({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),tg(()=>{var a;(a=e.onPositionChange)==null||a.call(e,o.placement)},[o.placement]),tg(()=>{var a,u;t!==r.current&&(t?(u=e.onOpen)==null||u.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:i,onToggle:s}}const bLe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:fd("popover"),__staticSelector:"Popover",width:"max-content"},xLe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:as(t),"--popover-shadow":fq(n)}});function wl(e){var Lt,sn,Fe,Qe,wt,Vt;const t=dt("Popover",bLe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:c,width:f,middlewares:d,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:b,unstyled:y,classNames:x,styles:w,closeOnClickOutside:S,withinPortal:C,portalProps:R,closeOnEscape:I,clickOutsideEvents:O,trapFocus:M,onClose:L,onOpen:V,onChange:D,zIndex:j,radius:z,shadow:G,id:ee,defaultOpened:ne,__staticSelector:ue,withRoles:X,disabled:W,returnFocus:te,variant:q,keepMounted:J,vars:oe,floatingStrategy:de,withOverlay:ce,overlayProps:pe,...Ee}=t,Ae=xn({name:ue,props:t,classes:Sge,classNames:x,styles:w,unstyled:y,rootSelector:"dropdown",vars:oe,varsResolver:xLe}),{resolvedStyles:ge}=Cw({classNames:x,styles:w,props:t}),me=B.useRef(null),[Oe,Me]=B.useState(null),[Ye,lt]=B.useState(null),{dir:We}=Ub(),nt=df(ee),yt=vLe({middlewares:d,width:f,position:bge(We,r),offset:typeof i=="number"?i+(h?p/2:0):i,arrowRef:me,arrowOffset:m,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:ne,onChange:D,onOpen:V,onClose:L,strategy:de});$De(()=>S&&yt.onClose(),O,[Oe,Ye]);const _t=B.useCallback(Wt=>{Me(Wt),yt.floating.refs.setReference(Wt)},[yt.floating.refs.setReference]),It=B.useCallback(Wt=>{lt(Wt),yt.floating.refs.setFloating(Wt)},[yt.floating.refs.setFloating]),Et=B.useCallback(()=>{var Wt;(Wt=u==null?void 0:u.onExited)==null||Wt.call(u),l==null||l()},[u==null?void 0:u.onExited,l]),Ke=B.useCallback(()=>{var Wt;(Wt=u==null?void 0:u.onEntered)==null||Wt.call(u),c==null||c()},[u==null?void 0:u.onEntered,c]);return A.jsxs(hLe,{value:{returnFocus:te,disabled:W,controlled:yt.controlled,reference:_t,floating:It,x:yt.floating.x,y:yt.floating.y,arrowX:(Fe=(sn=(Lt=yt.floating)==null?void 0:Lt.middlewareData)==null?void 0:sn.arrow)==null?void 0:Fe.x,arrowY:(Vt=(wt=(Qe=yt.floating)==null?void 0:Qe.middlewareData)==null?void 0:wt.arrow)==null?void 0:Vt.y,opened:yt.opened,arrowRef:me,transitionProps:{...u,onExited:Et,onEntered:Ke},width:f,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:b,placement:yt.floating.placement,trapFocus:M,withinPortal:C,portalProps:R,zIndex:j,radius:z,shadow:G,closeOnEscape:I,onClose:yt.onClose,onToggle:yt.onToggle,getTargetId:()=>`${nt}-target`,getDropdownId:()=>`${nt}-dropdown`,withRoles:X,targetProps:Ee,__staticSelector:ue,classNames:x,styles:w,unstyled:y,variant:q,keepMounted:J,getStyles:Ae,resolvedStyles:ge,floatingStrategy:de},children:[n,ce&&A.jsx(bg,{transition:"fade",mounted:yt.opened,duration:(u==null?void 0:u.duration)||250,exitDuration:(u==null?void 0:u.exitDuration)||250,children:Wt=>A.jsx(zb,{withinPortal:C,children:A.jsx(gS,{...pe,...Ae("overlay",{className:pe==null?void 0:pe.className,style:[Wt,pe==null?void 0:pe.style]})})})})]})}wl.Target=Tge;wl.Dropdown=jq;wl.displayName="@mantine/core/Popover";wl.extend=e=>e;var h0={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Age=B.forwardRef(({className:e,...t},n)=>A.jsxs(je,{component:"span",className:ba(h0.barsLoader,e),...t,ref:n,children:[A.jsx("span",{className:h0.bar}),A.jsx("span",{className:h0.bar}),A.jsx("span",{className:h0.bar})]}));Age.displayName="@mantine/core/Bars";const kge=B.forwardRef(({className:e,...t},n)=>A.jsxs(je,{component:"span",className:ba(h0.dotsLoader,e),...t,ref:n,children:[A.jsx("span",{className:h0.dot}),A.jsx("span",{className:h0.dot}),A.jsx("span",{className:h0.dot})]}));kge.displayName="@mantine/core/Dots";const Rge=B.forwardRef(({className:e,...t},n)=>A.jsx(je,{component:"span",className:ba(h0.ovalLoader,e),...t,ref:n}));Rge.displayName="@mantine/core/Oval";const Ige={bars:Age,oval:Rge,dots:kge},_Le={loaders:Ige,type:"oval"},wLe=(e,{size:t,color:n})=>({root:{"--loader-size":_r(t,"loader-size"),"--loader-color":n?Fs(n,e):void 0}}),xg=Bt((e,t)=>{const n=dt("Loader",_Le,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=xn({name:"Loader",props:n,classes:h0,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:wLe});return p?A.jsx(je,{...g("root"),ref:t,...m,children:p}):A.jsx(je,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});xg.defaultLoaders=Ige;xg.classes=h0;xg.displayName="@mantine/core/Loader";var bT={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const dne={orientation:"horizontal"},ELe=(e,{borderWidth:t})=>({group:{"--ai-border-width":ot(t)}}),Uq=Bt((e,t)=>{const n=dt("ActionIconGroup",dne,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=dt("ActionIconGroup",dne,e),p=xn({name:"ActionIconGroup",props:n,classes:bT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:ELe,rootSelector:"group"});return A.jsx(je,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});Uq.classes=bT;Uq.displayName="@mantine/core/ActionIconGroup";const hne={},SLe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":_r(o,"section-height"),"--section-padding-x":_r(o,"section-padding-x"),"--section-fz":_l(o),"--section-radius":t===void 0?void 0:as(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},zq=Bt((e,t)=>{const n=dt("ActionIconGroupSection",hne,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=dt("ActionIconGroupSection",hne,e),p=xn({name:"ActionIconGroupSection",props:n,classes:bT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:SLe,rootSelector:"groupSection"});return A.jsx(je,{...p("groupSection"),ref:t,variant:l,...h})});zq.classes=bT;zq.displayName="@mantine/core/ActionIconGroupSection";const TLe={},CLe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":_r(t,"ai-size"),"--ai-radius":n===void 0?void 0:as(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Vb=Ya((e,t)=>{const n=dt("ActionIcon",TLe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:b,disabled:y,"data-disabled":x,autoContrast:w,mod:S,...C}=n,R=xn({name:["ActionIcon",p],props:n,className:r,style:u,classes:bT,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:CLe});return A.jsxs(sh,{...R("root",{active:!y&&!l&&!x}),...C,unstyled:i,variant:s,size:f,disabled:y||l,ref:t,mod:[{loading:l,disabled:y||x},S],children:[A.jsx(bg,{mounted:!!l,transition:"slide-down",duration:150,children:I=>A.jsx(je,{component:"span",...R("loader",{style:I}),"aria-hidden":!0,children:A.jsx(xg,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),A.jsx(je,{component:"span",mod:{loading:l},...R("icon"),children:b})]})});Vb.classes=bT;Vb.displayName="@mantine/core/ActionIcon";Vb.Group=Uq;Vb.GroupSection=zq;const Pge=B.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>A.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:A.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Pge.displayName="@mantine/core/CloseIcon";var Nge={root:"m_86a44da5","root--subtle":"m_220c80f2"};const ALe={variant:"subtle"},kLe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":_r(t,"cb-size"),"--cb-radius":n===void 0?void 0:as(n),"--cb-icon-size":ot(r)}}),Hb=Ya((e,t)=>{const n=dt("CloseButton",ALe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,__staticSelector:b,...y}=n,x=xn({name:b||"CloseButton",props:n,className:a,style:l,classes:Nge,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:kLe});return A.jsxs(sh,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...x("root",{variant:p,active:!h&&!d}),children:[m||A.jsx(Pge,{}),i]})});Hb.classes=Nge;Hb.displayName="@mantine/core/CloseButton";function RLe(e){return B.Children.toArray(e).filter(Boolean)}var Dge={root:"m_4081bf90"};const ILe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},PLe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":qa(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Js=Bt((e,t)=>{const n=dt("Group",ILe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:b,mod:y,...x}=n,w=RLe(u),S=w.length,C=qa(l??"md"),I={childWidth:`calc(${100/S}% - (${C} - ${C} / ${S}))`},O=xn({name:"Group",props:n,stylesCtx:I,className:i,style:s,classes:Dge,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:PLe});return A.jsx(je,{...O("root"),ref:t,variant:g,mod:[{grow:h},y],size:b,...x,children:w})});Js.classes=Dge;Js.displayName="@mantine/core/Group";const[NLe,R1]=Rl("ModalBase component was not found in tree");function DLe({opened:e,transitionDuration:t}){const[n,r]=B.useState(e),i=B.useRef(-1),o=BO()?0:t;return B.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function OLe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=df(e),[u,l]=B.useState(!1),[c,f]=B.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=DLe({opened:n,transitionDuration:d});return Cme("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),wme({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Oge=B.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:s,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:u,returnFocus:l,closeOnClickOutside:c,withinPortal:f,portalProps:d,lockScroll:h,children:p,zIndex:m,shadow:g,padding:b,__vars:y,unstyled:x,removeScrollProps:w,...S},C)=>{const{_id:R,titleMounted:I,bodyMounted:O,shouldLockScroll:M,setTitleMounted:L,setBodyMounted:V}=OLe({id:r,transitionProps:i,opened:t,trapFocus:a,closeOnEscape:u,onClose:n,returnFocus:l}),{key:D,...j}=w||{};return A.jsx(zb,{...d,withinPortal:f,children:A.jsx(NLe,{value:{opened:t,onClose:n,closeOnClickOutside:c,onExitTransitionEnd:s,onEnterTransitionEnd:o,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${R}-title`,getBodyId:()=>`${R}-body`,titleMounted:I,bodyMounted:O,setTitleMounted:L,setBodyMounted:V,trapFocus:a,closeOnEscape:u,zIndex:m,unstyled:x},children:A.jsx(dS,{enabled:M&&h,...j,children:A.jsx(je,{ref:C,...S,__vars:{...y,"--mb-z-index":(m||fd("modal")).toString(),"--mb-shadow":fq(g),"--mb-padding":qa(b)},children:p})},D)})})});Oge.displayName="@mantine/core/ModalBase";function MLe(){const e=R1();return B.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var yS={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const Mge=B.forwardRef(({className:e,...t},n)=>{const r=MLe(),i=R1();return A.jsx(je,{ref:n,...t,id:r,className:ba({[yS.body]:!i.unstyled},e)})});Mge.displayName="@mantine/core/ModalBaseBody";const Lge=B.forwardRef(({className:e,onClick:t,...n},r)=>{const i=R1();return A.jsx(Hb,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:ba({[yS.close]:!i.unstyled},e),unstyled:i.unstyled})});Lge.displayName="@mantine/core/ModalBaseCloseButton";const Fge=B.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=R1();return A.jsx(bg,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var u,l,c;(u=a.onExitTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onExited)==null||c.call(l)},onEntered:()=>{var u,l,c;(u=a.onEnterTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onEntered)==null||c.call(l)},...e,children:u=>A.jsx("div",{...n,className:ba({[yS.inner]:!a.unstyled},n.className),children:A.jsx(YO,{active:a.opened&&a.trapFocus,innerRef:o,children:A.jsx(mT,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,u],className:ba({[yS.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})});Fge.displayName="@mantine/core/ModalBaseContent";const $ge=B.forwardRef(({className:e,...t},n)=>{const r=R1();return A.jsx(je,{component:"header",ref:n,className:ba({[yS.header]:!r.unstyled},e),...t})});$ge.displayName="@mantine/core/ModalBaseHeader";const LLe={duration:200,timingFunction:"ease",transition:"fade"};function FLe(e){const t=R1();return{...LLe,...t.transitionProps,...e}}const Bge=B.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...i},s)=>{const o=R1(),a=FLe(t);return A.jsx(bg,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:u=>A.jsx(gS,{ref:s,fixed:!0,style:[n,u],zIndex:o.zIndex,unstyled:o.unstyled,onClick:l=>{e==null||e(l),o.closeOnClickOutside&&o.onClose()},...i})})});Bge.displayName="@mantine/core/ModalBaseOverlay";function $Le(){const e=R1();return B.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const jge=B.forwardRef(({className:e,...t},n)=>{const r=$Le(),i=R1();return A.jsx(je,{component:"h2",ref:n,className:ba({[yS.title]:!i.unstyled},e),...t,id:r})});jge.displayName="@mantine/core/ModalBaseTitle";function BLe({children:e}){return A.jsx(A.Fragment,{children:e})}const[jLe,ULe]=Bb({size:"sm"}),zLe={},Uge=Bt((e,t)=>{const n=dt("InputClearButton",zLe,e),{size:r,variant:i,vars:s,classNames:o,styles:a,...u}=n,l=ULe(),{resolvedClassNames:c,resolvedStyles:f}=Cw({classNames:o,styles:a,props:n});return A.jsx(Hb,{variant:i||"transparent",ref:t,size:r||(l==null?void 0:l.size)||"sm",classNames:c,styles:f,__staticSelector:"InputClearButton",...u})});Uge.displayName="@mantine/core/InputClearButton";const[VLe,xT]=Bb({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var lp={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const pne={},HLe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${_l(t)} - ${ot(2)})`}}),KO=Bt((e,t)=>{const n=dt("InputDescription",pne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=dt("InputDescription",pne,n),p=xT(),m=xn({name:["InputWrapper",c],props:n,classes:lp,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:HLe}),g=f&&(p==null?void 0:p.getStyles)||m;return A.jsx(je,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});KO.classes=lp;KO.displayName="@mantine/core/InputDescription";const qLe={},WLe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${_l(t)} - ${ot(2)})`}}),XO=Bt((e,t)=>{const n=dt("InputError",qLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=xn({name:["InputWrapper",c],props:n,classes:lp,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:WLe}),m=xT(),g=f&&(m==null?void 0:m.getStyles)||p;return A.jsx(je,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});XO.classes=lp;XO.displayName="@mantine/core/InputError";const mne={labelElement:"label"},GLe=(e,{size:t})=>({label:{"--input-label-size":_l(t),"--input-asterisk-color":void 0}}),QO=Bt((e,t)=>{const n=dt("InputLabel",mne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:b,...y}=dt("InputLabel",mne,n),x=xn({name:["InputWrapper",m],props:n,classes:lp,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:GLe}),w=xT(),S=(w==null?void 0:w.getStyles)||x;return A.jsxs(je,{...S("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},b],onMouseDown:C=>{h==null||h(C),!C.defaultPrevented&&C.detail>1&&C.preventDefault()},...y,children:[p,f&&A.jsx("span",{...S("required"),"aria-hidden":!0,children:" *"})]})});QO.classes=lp;QO.displayName="@mantine/core/InputLabel";const gne={},Vq=Bt((e,t)=>{const n=dt("InputPlaceholder",gne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=dt("InputPlaceholder",gne,n),p=xn({name:["InputPlaceholder",l],props:n,classes:lp,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return A.jsx(je,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});Vq.classes=lp;Vq.displayName="@mantine/core/InputPlaceholder";function YLe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const KLe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},XLe=(e,{size:t})=>({label:{"--input-label-size":_l(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${_l(t)} - ${ot(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${_l(t)} - ${ot(2)})`}}),Hq=Bt((e,t)=>{const n=dt("InputWrapper",KLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:b,descriptionProps:y,errorProps:x,labelElement:w,children:S,withAsterisk:C,id:R,required:I,__stylesApiProps:O,mod:M,...L}=n,V=xn({name:["InputWrapper",f],props:O||n,classes:lp,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XLe}),D={size:l,variant:c,__staticSelector:f},j=df(R),z=typeof C=="boolean"?C:I,G=(x==null?void 0:x.id)||`${j}-error`,ee=(y==null?void 0:y.id)||`${j}-description`,ne=j,ue=!!m&&typeof m!="boolean",X=!!g,W=`${ue?G:""} ${X?ee:""}`,te=W.trim().length>0?W.trim():void 0,q=(b==null?void 0:b.id)||`${j}-label`,J=p&&A.jsx(QO,{labelElement:w,id:q,htmlFor:ne,required:z,...D,...b,children:p},"label"),oe=X&&A.jsx(KO,{...y,...D,size:(y==null?void 0:y.size)||D.size,id:(y==null?void 0:y.id)||ee,children:g},"description"),de=A.jsx(B.Fragment,{children:d(S)},"input"),ce=ue&&B.createElement(XO,{...x,...D,size:(x==null?void 0:x.size)||D.size,key:"error",id:(x==null?void 0:x.id)||G},m),pe=h.map(Ee=>{switch(Ee){case"label":return J;case"input":return de;case"description":return oe;case"error":return ce;default:return null}});return A.jsx(VLe,{value:{getStyles:V,describedBy:te,inputId:ne,labelId:q,...YLe(h,{hasDescription:X,hasError:ue})},children:A.jsx(je,{ref:t,variant:c,size:l,mod:[{error:!!m},M],...V("root"),...L,children:pe})})});Hq.classes=lp;Hq.displayName="@mantine/core/InputWrapper";const QLe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},JLe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":_r(t.size,"input-height"),"--input-fz":_l(t.size),"--input-radius":t.radius===void 0?void 0:as(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?ot(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?ot(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?_r(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),ys=Ya((e,t)=>{const n=dt("Input",QLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:b,rightSection:y,rightSectionProps:x,rightSectionWidth:w,rightSectionPointerEvents:S,leftSectionPointerEvents:C,variant:R,vars:I,pointer:O,multiline:M,radius:L,id:V,withAria:D,withErrorStyles:j,mod:z,inputSize:G,__clearSection:ee,__clearable:ne,__defaultRightSection:ue,...X}=n,{styleProps:W,rest:te}=kw(X),q=xT(),J={offsetBottom:q==null?void 0:q.offsetBottom,offsetTop:q==null?void 0:q.offsetTop},oe=xn({name:["Input",l],props:c||n,classes:lp,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:J,rootSelector:"wrapper",vars:I,varsResolver:JLe}),de=D?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":q==null?void 0:q.describedBy,id:(q==null?void 0:q.inputId)||V}:{},ce=y||ne&&ee||ue;return A.jsx(jLe,{value:{size:f||"sm"},children:A.jsxs(je,{...oe("wrapper"),...W,...d,mod:[{error:!!h&&j,pointer:O,disabled:p,multiline:M,"data-with-right-section":!!y,"data-with-left-section":!!m},z],variant:R,size:f,children:[m&&A.jsx("div",{...g,"data-position":"left",...oe("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),A.jsx(je,{component:"input",...te,...de,ref:t,required:u,mod:{disabled:p,error:!!h&&j},variant:R,__size:G,...oe("input")}),ce&&A.jsx("div",{...x,"data-position":"right",...oe("section",{className:x==null?void 0:x.className,style:x==null?void 0:x.style}),children:ce})]})})});ys.classes=lp;ys.Wrapper=Hq;ys.Label=QO;ys.Error=XO;ys.Description=KO;ys.Placeholder=Vq;ys.ClearButton=Uge;ys.displayName="@mantine/core/Input";function ZLe(e,t,n){const r=dt(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:b,id:y,size:x,style:w,inputContainer:S,inputWrapperOrder:C,withAsterisk:R,variant:I,vars:O,mod:M,...L}=r,{styleProps:V,rest:D}=kw(L),j={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:x,style:w,inputContainer:S,inputWrapperOrder:C,withAsterisk:R,variant:I,id:y,mod:M,...b};return{...D,classNames:u,styles:l,unstyled:f,wrapperProps:{...j,...V},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:x,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:I,id:y}}}const e7e={__staticSelector:"InputBase",withAria:!0},cp=Ya((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=ZLe("InputBase",e7e,e);return A.jsx(ys.Wrapper,{...r,children:A.jsx(ys,{...n,...i,ref:t})})});cp.classes={...ys.classes,...ys.Wrapper.classes};cp.displayName="@mantine/core/InputBase";const t7e={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var zge={root:"m_8bffd616"};const n7e={},An=Ya((e,t)=>{const n=dt("Flex",n7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,b=xn({name:"Flex",classes:zge,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),y=Ga(),x=oR(),w=Ome({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:y,data:t7e});return A.jsxs(A.Fragment,{children:[w.hasResponsiveStyles&&A.jsx(Aw,{selector:`.${x}`,styles:w.styles,media:w.media}),A.jsx(je,{ref:t,...b("root",{className:x,style:Fb(w.inlineStyles)}),...g})]})});An.classes=zge;An.displayName="@mantine/core/Flex";const[r7e,qq]=Rl("Accordion component was not found in the tree");function JO({style:e,size:t=16,...n}){return A.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:ot(t),height:ot(t),display:"block"},...n,children:A.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}JO.displayName="@mantine/core/AccordionChevron";const[i7e,Vge]=Rl("Accordion.Item component was not found in the tree");var uR={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const s7e={},Wq=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=dt("AccordionControl",s7e,e),{value:m}=Vge(),g=qq(),b=g.isItemActive(m),y=typeof g.order=="number",x=`h${g.order}`,w=A.jsxs(sh,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:b,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:S=>{l==null||l(S),g.onChange(m)},type:"button",disabled:d,"aria-expanded":b,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:cq({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[A.jsx(je,{component:"span",mod:{rotate:!g.disableChevronRotation&&b,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),A.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&A.jsx(je,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return y?A.jsx(x,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});Wq.displayName="@mantine/core/AccordionControl";Wq.classes=uR;const o7e={},Gq=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=dt("AccordionItem",o7e,e),c=qq();return A.jsx(i7e,{value:{value:a},children:A.jsx(je,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});Gq.displayName="@mantine/core/AccordionItem";Gq.classes=uR;const a7e={},Yq=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=dt("AccordionPanel",a7e,e),{value:l}=Vge(),c=qq();return A.jsx(VO,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:A.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});Yq.displayName="@mantine/core/AccordionPanel";Yq.classes=uR;const u7e={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:A.jsx(JO,{})},l7e=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:ot(n),"--accordion-radius":r===void 0?void 0:as(r)}});function Zl(e){const t=dt("Accordion",u7e,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:b,chevronSize:y,order:x,chevron:w,variant:S,radius:C,...R}=t,I=df(h),[O,M]=ju({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),L=j=>Array.isArray(O)?O.includes(j):j===O,V=j=>{const z=Array.isArray(O)?O.includes(j)?O.filter(G=>G!==j):[...O,j]:j===O?null:j;M(z)},D=xn({name:"Accordion",classes:uR,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:l7e});return A.jsx(r7e,{value:{isItemActive:L,onChange:V,getControlId:r8(`${I}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:r8(`${I}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:b,order:x,chevron:w,loop:p,getStyles:D,variant:S,unstyled:o},children:A.jsx(je,{...D("root"),id:I,...R,variant:S,"data-accordion":!0,children:u})})}const c7e=e=>e;Zl.extend=c7e;Zl.withProps=g9e(Zl);Zl.classes=uR;Zl.displayName="@mantine/core/Accordion";Zl.Item=Gq;Zl.Panel=Yq;Zl.Control=Wq;Zl.Chevron=JO;var Hge={root:"m_7f854edf"};const f7e={position:{bottom:0,right:0},zIndex:fd("modal"),withinPortal:!0},d7e=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":ot(n==null?void 0:n.top),"--affix-left":ot(n==null?void 0:n.left),"--affix-bottom":ot(n==null?void 0:n.bottom),"--affix-right":ot(n==null?void 0:n.right)}}),Kq=Bt((e,t)=>{const n=dt("Affix",f7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,portalProps:l,zIndex:c,withinPortal:f,position:d,...h}=n,p=xn({name:"Affix",classes:Hge,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:d7e});return A.jsx(zb,{...l,withinPortal:f,children:A.jsx(je,{ref:t,...p("root"),...h})})});Kq.classes=Hge;Kq.displayName="@mantine/core/Affix";var qge={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const h7e={},p7e=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:as(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Yy=Bt((e,t)=>{const n=dt("Alert",h7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:b,variant:y,autoContrast:x,...w}=n,S=xn({name:"Alert",classes:qge,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:p7e}),C=df(h),R=f&&`${C}-title`||void 0,I=`${C}-body`;return A.jsx(je,{id:C,...S("root",{variant:y}),variant:y,ref:t,...w,role:"alert","aria-describedby":I,"aria-labelledby":R,children:A.jsxs("div",{...S("wrapper"),children:[p&&A.jsx("div",{...S("icon"),children:p}),A.jsxs("div",{...S("body"),children:[f&&A.jsx("div",{...S("title"),"data-with-close-button":m||void 0,children:A.jsx("span",{id:R,...S("label"),children:f})}),d&&A.jsx("div",{id:I,...S("message"),"data-variant":y,children:d})]}),m&&A.jsx(Hb,{...S("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":b,unstyled:a})]})})});Yy.classes=qge;Yy.displayName="@mantine/core/Alert";var Wge={root:"m_b6d8b162"};function m7e(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const g7e={inherit:!1},y7e=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":_l(i),"--text-lh":_me(i),"--text-gradient":t==="gradient"?eU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Fs(s,e):void 0}}),At=Ya((e,t)=>{const n=dt("Text",g7e,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:b,size:y,...x}=n,w=xn({name:["Text",l],props:n,classes:Wge,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:y7e});return A.jsx(je,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":m7e(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},b],size:y,...x})});At.classes=Wge;At.displayName="@mantine/core/Text";var Gge={root:"m_849cf0da"};const v7e={underline:"hover"},Iw=Ya((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=dt("Anchor",v7e,e);return A.jsx(At,{component:"a",ref:t,className:ba({[Gge.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Iw.classes=Gge;Iw.displayName="@mantine/core/Anchor";const[b7e,_T]=Rl("AppShell was not found in tree");var qb={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const x7e={},Xq=Bt((e,t)=>{const n=dt("AppShellAside",x7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=_T();return h.disabled?null:A.jsx(je,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});Xq.classes=qb;Xq.displayName="@mantine/core/AppShellAside";const _7e={},Qq=Bt((e,t)=>{var p;const n=dt("AppShellFooter",_7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=_T();return h.disabled?null:A.jsx(je,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:ba({[dS.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Qq.classes=qb;Qq.displayName="@mantine/core/AppShellFooter";const w7e={},Jq=Bt((e,t)=>{var p;const n=dt("AppShellHeader",w7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=_T();return h.disabled?null:A.jsx(je,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:ba({[dS.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Jq.classes=qb;Jq.displayName="@mantine/core/AppShellHeader";const E7e={},Zq=Bt((e,t)=>{const n=dt("AppShellMain",E7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=_T();return A.jsx(je,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});Zq.classes=qb;Zq.displayName="@mantine/core/AppShellMain";function lR(e){return typeof e=="object"?e.base:e}function cR(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function fR(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function S7e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),cR(s)){const f=ot(lR(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(fR(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=ot(s.base),e["--app-shell-aside-offset"]=ot(s.base)),Cs(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=ot(s[f]),t[f]["--app-shell-aside-offset"]=ot(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=dq(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function T7e({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(cR(r)){const o=ot(lR(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}fR(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=ot(r.base),s&&(e["--app-shell-footer-offset"]=ot(r.base))),Cs(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=ot(r[o]),s&&(t[o]["--app-shell-footer-offset"]=ot(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function C7e({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(cR(r)){const o=ot(lR(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}fR(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=ot(r.base),s&&(e["--app-shell-header-offset"]=ot(r.base))),Cs(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=ot(r[o]),s&&(t[o]["--app-shell-header-offset"]=ot(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function A7e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),cR(s)){const f=ot(lR(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(fR(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=ot(s.base),e["--app-shell-navbar-offset"]=ot(s.base)),Cs(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=ot(s[f]),t[f]["--app-shell-navbar-offset"]=ot(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=dq(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function wF(e){return Number(e)===0?"0px":qa(e)}function k7e({padding:e,baseStyles:t,minMediaStyles:n}){cR(e)&&(t["--app-shell-padding"]=wF(lR(e))),fR(e)&&(e.base&&(t["--app-shell-padding"]=wF(e.base)),Cs(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=wF(e[r]))}))}function R7e({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};A7e({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),S7e({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),C7e({baseStyles:u,minMediaStyles:o,header:t}),T7e({baseStyles:u,minMediaStyles:o,footer:n}),k7e({baseStyles:u,minMediaStyles:o,padding:i});const l=Wk(Cs(o),s.breakpoints).map(d=>({query:`(min-width: ${n8(d.px)})`,styles:o[d.value]})),c=Wk(Cs(a),s.breakpoints).map(d=>({query:`(max-width: ${n8(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function I7e({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Ga(),o=jb(),{media:a,baseStyles:u}=R7e({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return A.jsx(Aw,{media:a,styles:u,selector:o.cssVariablesSelector})}const P7e={},eW=Bt((e,t)=>{const n=dt("AppShellNavbar",P7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=_T();return h.disabled?null:A.jsx(je,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});eW.classes=qb;eW.displayName="@mantine/core/AppShellNavbar";const N7e={},tW=Ya((e,t)=>{const n=dt("AppShellSection",N7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=_T();return A.jsx(je,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});tW.classes=qb;tW.displayName="@mantine/core/AppShellSection";function D7e({transitionDuration:e,disabled:t}){const[n,r]=B.useState(!0),i=B.useRef(-1),s=B.useRef(-1);return Cme("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>B.startTransition(()=>{r(!1)}),200)}),Sw(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>B.startTransition(()=>{r(!1)}),e||0)},[t,e]),n}const O7e={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:fd("app")},M7e=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),hs=Bt((e,t)=>{const n=dt("AppShell",O7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:b,aside:y,footer:x,offsetScrollbars:w=g!=="alt",mod:S,...C}=n,R=xn({name:"AppShell",classes:qb,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:M7e}),I=D7e({disabled:b,transitionDuration:d});return A.jsxs(b7e,{value:{getStyles:R,withBorder:c,zIndex:m,disabled:b,offsetScrollbars:w},children:[A.jsx(I7e,{navbar:l,header:p,aside:y,footer:x,padding:f}),A.jsx(je,{ref:t,...R("root"),mod:[{resizing:I,layout:g,disabled:b},S],...C})]})});hs.classes=qb;hs.displayName="@mantine/core/AppShell";hs.Navbar=eW;hs.Header=Jq;hs.Main=Zq;hs.Aside=Xq;hs.Footer=Qq;hs.Section=tW;function Yge(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Yge(t))}:e}function Kge(e){return e?e.map(t=>Yge(t)):[]}function nW(e){return e.reduce((t,n)=>"group"in n?{...t,...nW(n.items)}:(t[n.value]=n,t),{})}var id={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const L7e={error:null},F7e=(e,{size:t})=>({chevron:{"--combobox-chevron-size":_r(t,"combobox-chevron-size")}}),rW=Bt((e,t)=>{const n=dt("ComboboxChevron",L7e,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=xn({name:"ComboboxChevron",classes:id,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:F7e,rootSelector:"chevron"});return A.jsx(je,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:A.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});rW.classes=id;rW.displayName="@mantine/core/ComboboxChevron";const[$7e,fp]=Rl("Combobox component was not found in tree"),Xge=B.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>A.jsx(ys.ClearButton,{ref:s,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Xge.displayName="@mantine/core/ComboboxClearButton";const B7e={},iW=Bt((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=dt("ComboboxDropdown",B7e,e),u=fp();return A.jsx(wl.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});iW.classes=id;iW.displayName="@mantine/core/ComboboxDropdown";const j7e={refProp:"ref"},Qge=Bt((e,t)=>{const{children:n,refProp:r}=dt("ComboboxDropdownTarget",j7e,e);if(fp(),!$b(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return A.jsx(wl.Target,{ref:t,refProp:r,children:n})});Qge.displayName="@mantine/core/ComboboxDropdownTarget";const U7e={},sW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("ComboboxEmpty",U7e,e),u=fp();return A.jsx(je,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});sW.classes=id;sW.displayName="@mantine/core/ComboboxEmpty";function oW({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=fp(),[a,u]=B.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const z7e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Jge=Bt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=dt("ComboboxEventsTarget",z7e,e);if(!$b(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=fp(),f=oW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return B.cloneElement(n,{...f,...l,[r]:vu(t,c.store.targetRef,jO(n))})});Jge.displayName="@mantine/core/ComboboxEventsTarget";const V7e={},aW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("ComboboxFooter",V7e,e),u=fp();return A.jsx(je,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});aW.classes=id;aW.displayName="@mantine/core/ComboboxFooter";const H7e={},uW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=dt("ComboboxGroup",H7e,e),c=fp();return A.jsxs(je,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&A.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});uW.classes=id;uW.displayName="@mantine/core/ComboboxGroup";const q7e={},lW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("ComboboxHeader",q7e,e),u=fp();return A.jsx(je,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});lW.classes=id;lW.displayName="@mantine/core/ComboboxHeader";function Zge({value:e,valuesDivider:t=",",...n}){return A.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Zge.displayName="@mantine/core/ComboboxHiddenInput";const W7e={},cW=Bt((e,t)=>{const n=dt("ComboboxOption",W7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,b=fp(),y=B.useId(),x=l||y;return A.jsx(je,{...b.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:x,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var S;h?w.preventDefault():((S=b.onOptionSubmit)==null||S.call(b,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{b.resetSelectionOnOptionHover&&b.store.resetSelectedOption(),d==null||d(w)}})});cW.classes=id;cW.displayName="@mantine/core/ComboboxOption";const G7e={},fW=Bt((e,t)=>{const n=dt("ComboboxOptions",G7e,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=fp(),d=df(a);return B.useEffect(()=>{f.store.setListId(d)},[d]),A.jsx(je,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});fW.classes=id;fW.displayName="@mantine/core/ComboboxOptions";const Y7e={withAriaAttributes:!0,withKeyboardNavigation:!0},dW=Bt((e,t)=>{const n=dt("ComboboxSearch",Y7e,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=fp(),h=d.getStyles("search"),p=oW({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return A.jsx(ys,{ref:vu(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});dW.classes=id;dW.displayName="@mantine/core/ComboboxSearch";const K7e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},eye=Bt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=dt("ComboboxTarget",K7e,e);if(!$b(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=fp(),f=oW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=B.cloneElement(n,{...f,...l});return A.jsx(wl.Target,{ref:vu(t,c.store.targetRef),children:d})});eye.displayName="@mantine/core/ComboboxTarget";function X7e(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Q7e(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function J7e(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function hW({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=ju({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=B.useRef(null),c=B.useRef(-1),f=B.useRef(null),d=B.useRef(null),h=B.useRef(-1),p=B.useRef(-1),m=B.useRef(-1),g=B.useCallback((G="unknown")=>{a||(u(!0),i==null||i(G))},[u,i,a]),b=B.useCallback((G="unknown")=>{a&&(u(!1),r==null||r(G))},[u,r,a]),y=B.useCallback((G="unknown")=>{a?b(G):g(G)},[b,g,a]),x=B.useCallback(()=>{const G=document.querySelector(`#${l.current} [data-combobox-selected]`);G==null||G.removeAttribute("data-combobox-selected"),G==null||G.removeAttribute("aria-selected")},[]),w=B.useCallback(G=>{const ee=document.getElementById(l.current),ne=ee==null?void 0:ee.querySelectorAll("[data-combobox-option]");if(!ne)return null;const ue=G>=ne.length?0:G<0?ne.length-1:G;return c.current=ue,ne!=null&&ne[ue]&&!ne[ue].hasAttribute("data-combobox-disabled")?(x(),ne[ue].setAttribute("data-combobox-selected","true"),ne[ue].setAttribute("aria-selected","true"),ne[ue].scrollIntoView({block:"nearest",behavior:o}),ne[ue].id):null},[o,x]),S=B.useCallback(()=>{const G=document.querySelector(`#${l.current} [data-combobox-active]`);if(G){const ee=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ne=Array.from(ee).findIndex(ue=>ue===G);return w(ne)}return w(0)},[w]),C=B.useCallback(()=>w(Q7e(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),R=B.useCallback(()=>w(X7e(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),I=B.useCallback(()=>w(J7e(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),O=B.useCallback((G="selected",ee)=>{m.current=window.setTimeout(()=>{var X;const ne=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ue=Array.from(ne).findIndex(W=>W.hasAttribute(`data-combobox-${G}`));c.current=ue,ee!=null&&ee.scrollIntoView&&((X=ne[ue])==null||X.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),M=B.useCallback(()=>{c.current=-1,x()},[x]),L=B.useCallback(()=>{const G=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ee=G==null?void 0:G[c.current];ee==null||ee.click()},[]),V=B.useCallback(G=>{l.current=G},[]),D=B.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),j=B.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),z=B.useCallback(()=>c.current,[]);return B.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:b,toggleDropdown:y,selectedOptionIndex:c.current,getSelectedOptionIndex:z,selectOption:w,selectFirstOption:I,selectActiveOption:S,selectNextOption:C,selectPreviousOption:R,resetSelectedOption:M,updateSelectedOptionIndex:O,listId:l.current,setListId:V,clickSelectedOption:L,searchRef:f,focusSearchInput:D,targetRef:d,focusTarget:j}}const Z7e={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},eFe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":_l(t),"--combobox-option-padding":_r(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:ot(n),"--combobox-option-fz":_l(t),"--combobox-option-padding":_r(t,"combobox-option-padding")}});function di(e){const t=dt("Combobox",Z7e,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=hW(),b=o||g,y=xn({name:h||"Combobox",classes:id,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:eFe}),x=()=>{l==null||l(),b.closeDropdown()};return A.jsx($7e,{value:{getStyles:y,store:b,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:A.jsx(wl,{opened:b.dropdownOpened,...m,onChange:w=>!w&&x(),withRoles:!1,unstyled:i,children:s})})}const tFe=e=>e;di.extend=tFe;di.classes=id;di.displayName="@mantine/core/Combobox";di.Target=eye;di.Dropdown=iW;di.Options=fW;di.Option=cW;di.Search=dW;di.Empty=sW;di.Chevron=rW;di.Footer=aW;di.Header=lW;di.EventsTarget=Jge;di.DropdownTarget=Qge;di.Group=uW;di.ClearButton=Xge;di.HiddenInput=Zge;var tye={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const nye=tye,ZO=B.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:b,vars:y,mod:x,...w},S)=>{const C=xn({name:e,props:t,className:n,style:b,classes:tye,classNames:r,styles:i,unstyled:s});return A.jsx(je,{...C("root"),ref:S,__vars:{"--label-fz":_l(d),"--label-lh":_r(d,"label-lh")},mod:[{"label-position":h},x],variant:g,size:d,...w,children:A.jsxs(je,{component:p,htmlFor:p==="label"?l:void 0,...C("body"),children:[o,A.jsxs("div",{...C("labelWrapper"),"data-disabled":c||void 0,children:[a&&A.jsx(je,{component:m,htmlFor:m==="label"?l:void 0,...C("label"),"data-disabled":c||void 0,children:a}),u&&A.jsx(ys.Description,{size:d,__inheritStyles:!1,...C("description"),children:u}),f&&typeof f!="boolean"&&A.jsx(ys.Error,{size:d,__inheritStyles:!1,...C("error"),children:f})]})]})})});ZO.displayName="@mantine/core/InlineInput";const rye=B.createContext(null),nFe=rye.Provider,iye=()=>B.useContext(rye),[rFe,iFe]=Bb();var sye={card:"m_26775b0a"};const sFe={withBorder:!0},oFe=(e,{radius:t})=>({card:{"--card-radius":as(t)}}),pW=Bt((e,t)=>{const n=dt("CheckboxCard",sFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,defaultChecked:p,onChange:m,...g}=n,b=xn({name:"CheckboxCard",classes:sye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oFe,rootSelector:"card"}),y=iye(),x=typeof l=="boolean"?l:y?y.value.includes(d||""):void 0,[w,S]=ju({value:x,defaultValue:p,finalValue:!1,onChange:m});return A.jsx(rFe,{value:{checked:w},children:A.jsx(sh,{ref:t,mod:[{"with-border":f,checked:w},c],...b("card"),...g,role:"checkbox","aria-checked":w,onClick:C=>{h==null||h(C),y==null||y.onChange(d||""),S(!w)}})})});pW.displayName="@mantine/core/CheckboxCard";pW.classes=sye;function mW({children:e,role:t}){const n=xT();return n?A.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):A.jsx(A.Fragment,{children:e})}const aFe={},gW=Bt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=dt("CheckboxGroup",aFe,e),[c,f]=ju({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return A.jsx(nFe,{value:{value:c,onChange:d,size:s},children:A.jsx(ys.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:A.jsx(mW,{role:"group",children:a})})})});gW.classes=ys.Wrapper.classes;gW.displayName="@mantine/core/CheckboxGroup";function oye({size:e,style:t,...n}){const r=e!==void 0?{width:ot(e),height:ot(e),...t}:t;return A.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:A.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function aye({indeterminate:e,...t}){return e?A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:A.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):A.jsx(oye,{...t})}var uye={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const uFe={icon:aye},lFe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=vg({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":_r(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:as(t),"--checkbox-color":s==="outline"?u:Fs(n,e),"--checkbox-icon-color":i?Fs(i,e):pT(o,e)?Tw({color:n,theme:e,autoContrast:o}):void 0}}},yW=Bt((e,t)=>{const n=dt("CheckboxIndicator",uFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:b,disabled:y,...x}=n,w=l,S=xn({name:"CheckboxIndicator",classes:uye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lFe,rootSelector:"indicator"}),C=iFe(),R=typeof m=="boolean"||typeof c=="boolean"?m||c:(C==null?void 0:C.checked)||!1;return A.jsx(je,{ref:t,...S("indicator",{variant:b}),variant:b,mod:[{checked:R,disabled:y},g],...x,children:A.jsx(w,{indeterminate:c,...S("icon")})})});yW.displayName="@mantine/core/CheckboxIndicator";yW.classes=uye;var lye={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const cFe={labelPosition:"right",icon:aye},fFe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=vg({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":_r(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:as(t),"--checkbox-color":s==="outline"?u:Fs(n,e),"--checkbox-icon-color":i?Fs(i,e):pT(o,e)?Tw({color:n,theme:e,autoContrast:o}):void 0}}},ic=Bt((e,t)=>{const n=dt("Checkbox",cFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,checked:m,labelPosition:g,description:b,error:y,disabled:x,variant:w,indeterminate:S,icon:C,rootRef:R,iconColor:I,onChange:O,autoContrast:M,mod:L,...V}=n,D=iye(),j=d||(D==null?void 0:D.size),z=C,G=xn({name:"Checkbox",props:n,classes:lye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fFe}),{styleProps:ee,rest:ne}=kw(V),ue=df(f),X=D?{checked:D.value.includes(ne.value),onChange:W=>{D.onChange(W),O==null||O(W)}}:{};return A.jsx(ZO,{...G("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:ue,size:j,labelPosition:g,label:c,description:b,error:y,disabled:x,classNames:r,styles:o,unstyled:a,"data-checked":X.checked||m||void 0,variant:w,ref:R,mod:L,...ee,...p,children:A.jsxs(je,{...G("inner"),mod:{"data-label-position":g},children:[A.jsx(je,{component:"input",id:ue,ref:t,checked:m,disabled:x,mod:{error:!!y,indeterminate:S},...G("input",{focusable:!0,variant:w}),onChange:O,...ne,...X,type:"checkbox"}),A.jsx(z,{indeterminate:S,...G("icon")})]})})});ic.classes={...lye,...nye};ic.displayName="@mantine/core/Checkbox";ic.Group=gW;ic.Indicator=yW;ic.Card=pW;function vS(e){return"group"in e}function cye({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;vS(o)&&i.push({group:o.group,items:cye({options:o.items,search:t,limit:n-i.length})}),vS(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function dFe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function fye(e,t=new Set){if(Array.isArray(e))for(const n of e)if(vS(n))fye(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function hFe(e,t){return Array.isArray(e)?e.includes(t):e===t}function dye({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!vS(e)){const a=hFe(n,e.value),u=t&&a&&A.jsx(oye,{className:id.optionsDropdownCheckIcon}),l=A.jsxs(A.Fragment,{children:[r==="left"&&u,A.jsx("span",{children:e.label}),r==="right"&&u]});return A.jsx(di.Option,{value:e.value,disabled:e.disabled,className:ba({[id.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>A.jsx(dye,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return A.jsx(di.Group,{label:e.group,children:o})}function hye({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":b}){fye(e);const x=typeof i=="string"?(r||cye)({options:e,search:u?i:"",limit:s??1/0}):e,w=dFe(x),S=x.map(C=>A.jsx(dye,{data:C,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},vS(C)?C.group:C.value));return A.jsx(di.Dropdown,{hidden:t||n&&w,children:A.jsxs(di.Options,{labelledBy:p,"aria-label":b,children:[a?A.jsx(a1.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:S}):S,w&&d&&A.jsx(di.Empty,{children:d})]})})}var pye={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const pFe={},mFe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":_r(s,"badge-height"),"--badge-padding-x":_r(s,"badge-padding-x"),"--badge-fz":_r(s,"badge-fz"),"--badge-radius":t===void 0?void 0:as(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Fs(n,e):void 0}}},v0=Ya((e,t)=>{const n=dt("Badge",pFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:b,circle:y,mod:x,...w}=n,S=xn({name:"Badge",props:n,classes:pye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mFe});return A.jsxs(je,{variant:m,mod:[{block:g,circle:y,"with-right-section":!!h,"with-left-section":!!d},x],...S("root",{variant:m}),ref:t,...w,children:[d&&A.jsx("span",{...S("section"),"data-position":"left",children:d}),A.jsx("span",{...S("label"),children:p}),h&&A.jsx("span",{...S("section"),"data-position":"right",children:h})]})});v0.classes=pye;v0.displayName="@mantine/core/Badge";var wT={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const yne={orientation:"horizontal"},gFe=(e,{borderWidth:t})=>({group:{"--button-border-width":ot(t)}}),vW=Bt((e,t)=>{const n=dt("ButtonGroup",yne,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=dt("ButtonGroup",yne,e),p=xn({name:"ButtonGroup",props:n,classes:wT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:gFe,rootSelector:"group"});return A.jsx(je,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});vW.classes=wT;vW.displayName="@mantine/core/ButtonGroup";const vne={},yFe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":_r(o,"section-height"),"--section-padding-x":_r(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?_l(o.replace("compact-","")):_l(o),"--section-radius":t===void 0?void 0:as(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},bW=Bt((e,t)=>{const n=dt("ButtonGroupSection",vne,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=dt("ButtonGroupSection",vne,e),p=xn({name:"ButtonGroupSection",props:n,classes:wT,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:yFe,rootSelector:"groupSection"});return A.jsx(je,{...p("groupSection"),ref:t,variant:l,...h})});bW.classes=wT;bW.displayName="@mantine/core/ButtonGroupSection";const vFe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${ot(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},bFe={},xFe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":_r(s,"button-height"),"--button-padding-x":_r(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?_l(s.replace("compact-","")):_l(s),"--button-radius":t===void 0?void 0:as(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},In=Ya((e,t)=>{const n=dt("Button",bFe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:b,styles:y,unstyled:x,"data-disabled":w,autoContrast:S,mod:C,...R}=n,I=xn({name:"Button",props:n,classes:wT,className:s,style:r,classNames:b,styles:y,unstyled:x,vars:i,varsResolver:xFe}),O=!!l,M=!!c;return A.jsxs(sh,{ref:t,...I("root",{active:!a&&!p&&!w}),unstyled:x,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":O,"with-right-section":M},C],...R,children:[A.jsx(bg,{mounted:!!p,transition:vFe,duration:150,children:L=>A.jsx(je,{component:"span",...I("loader",{style:L}),"aria-hidden":!0,children:A.jsx(xg,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),A.jsxs("span",{...I("inner"),children:[l&&A.jsx(je,{component:"span",...I("section"),mod:{position:"left"},children:l}),A.jsx(je,{component:"span",mod:{loading:p},...I("label"),children:u}),c&&A.jsx(je,{component:"span",...I("section"),mod:{position:"right"},children:c})]})]})});In.classes=wT;In.displayName="@mantine/core/Button";In.Group=vW;In.GroupSection=bW;const[_Fe,wFe]=Rl("Card component was not found in tree");var xW={root:"m_e615b15f",section:"m_599a2148"};const EFe={},e9=Ya((e,t)=>{const n=dt("CardSection",EFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=wFe();return A.jsx(je,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});e9.classes=xW;e9.displayName="@mantine/core/CardSection";const SFe={},TFe=(e,{padding:t})=>({root:{"--card-padding":qa(t)}}),ET=Ya((e,t)=>{const n=dt("Card",SFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=xn({name:"Card",props:n,classes:xW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TFe}),h=B.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===e9?B.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return A.jsx(_Fe,{value:{getStyles:d},children:A.jsx(mT,{ref:t,unstyled:a,...d("root"),...f,children:p})})});ET.classes=xW;ET.displayName="@mantine/core/Card";ET.Section=e9;var mye={root:"m_4451eb3a"};const CFe={},l1=Ya((e,t)=>{const n=dt("Center",CFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=xn({name:"Center",props:n,classes:mye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return A.jsx(je,{ref:t,mod:[{inline:l},c],...d("root"),...f})});l1.classes=mye;l1.displayName="@mantine/core/Center";var gye={root:"m_b183c0a2"};const AFe={},kFe=(e,{color:t})=>({root:{"--code-bg":t?Fs(t,e):void 0}}),dk=Bt((e,t)=>{const n=dt("Code",AFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=xn({name:"Code",props:n,classes:gye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kFe});return A.jsx(je,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});dk.classes=gye;dk.displayName="@mantine/core/Code";var yye={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const bne={withShadow:!0},RFe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:as(t),"--cs-size":ot(n)}}),_W=Ya((e,t)=>{const n=dt("ColorSwatch",bne,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:p,...m}=dt("ColorSwatch",bne,n),g=xn({name:"ColorSwatch",props:n,classes:yye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:RFe});return A.jsxs(je,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[A.jsx("span",{...g("alphaOverlay")}),d&&A.jsx("span",{...g("shadowOverlay")}),A.jsx("span",{...g("colorOverlay",{style:{backgroundColor:l}})}),A.jsx("span",{...g("childrenOverlay"),children:h})]})});_W.classes=yye;_W.displayName="@mantine/core/ColorSwatch";var vye={root:"m_7485cace"};const IFe={},PFe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:_r(t,"container-size")}}),c1=Bt((e,t)=>{const n=dt("Container",IFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=xn({name:"Container",classes:vye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PFe});return A.jsx(je,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});c1.classes=vye;c1.displayName="@mantine/core/Container";var bye={root:"m_3eebeb36",label:"m_9e365f20"};const NFe={orientation:"horizontal"},DFe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Fs(t,e):void 0,"--divider-border-style":n,"--divider-size":_r(r,"divider-size")}}),Zd=Bt((e,t)=>{const n=dt("Divider",NFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=xn({name:"Divider",classes:bye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:DFe});return A.jsx(je,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&A.jsx(je,{component:"span",mod:{position:d},...m("label"),children:f})})});Zd.classes=bye;Zd.displayName="@mantine/core/Divider";function OFe({open:e,close:t,openDelay:n,closeDelay:r}){const i=B.useRef(-1),s=B.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return B.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[xne,xye]=Rl("Grid component was not found in tree"),cU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,_ne=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":cU(e,t),wne=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Ene=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function MFe({span:e,order:t,offset:n,selector:r}){var h;const i=Ga(),s=xye(),o=s.breakpoints||i.breakpoints,u=d0(e)===void 0?12:d0(e),l=Fb({"--col-order":(h=d0(t))==null?void 0:h.toString(),"--col-flex-grow":wne(u,s.grow),"--col-flex-basis":cU(u,s.columns),"--col-width":u==="content"?"auto":void 0,"--col-max-width":_ne(u,s.columns,s.grow),"--col-offset":Ene(d0(n),s.columns)}),c=Cs(o).reduce((p,m)=>{var g;return p[m]||(p[m]={}),typeof t=="object"&&t[m]!==void 0&&(p[m]["--col-order"]=(g=t[m])==null?void 0:g.toString()),typeof e=="object"&&e[m]!==void 0&&(p[m]["--col-flex-grow"]=wne(e[m],s.grow),p[m]["--col-flex-basis"]=cU(e[m],s.columns),p[m]["--col-width"]=e[m]==="content"?"auto":void 0,p[m]["--col-max-width"]=_ne(e[m],s.columns,s.grow)),typeof n=="object"&&n[m]!==void 0&&(p[m]["--col-offset"]=Ene(n[m],s.columns)),p},{}),d=Wk(Cs(c),o).filter(p=>Cs(c[p.value]).length>0).map(p=>({query:s.type==="container"?`mantine-grid (min-width: ${o[p.value]})`:`(min-width: ${o[p.value]})`,styles:c[p.value]}));return A.jsx(Aw,{styles:l,media:s.type==="container"?void 0:d,container:s.type==="container"?d:void 0,selector:r})}var wW={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const LFe={span:12},EW=Bt((e,t)=>{const n=dt("GridCol",LFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=xye(),h=oR();return A.jsxs(A.Fragment,{children:[A.jsx(MFe,{selector:`.${h}`,span:u,order:l,offset:c}),A.jsx(je,{ref:t,...d.getStyles("col",{className:ba(i,h),style:s,classNames:r,styles:o}),...f})]})});EW.classes=wW;EW.displayName="@mantine/core/GridCol";function Sne({gutter:e,selector:t,breakpoints:n,type:r}){const i=Ga(),s=n||i.breakpoints,o=Fb({"--grid-gutter":qa(d0(e))}),a=Cs(s).reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--grid-gutter"]=qa(e[f])),c),{}),l=Wk(Cs(a),s).filter(c=>Cs(a[c.value]).length>0).map(c=>({query:r==="container"?`mantine-grid (min-width: ${s[c.value]})`:`(min-width: ${s[c.value]})`,styles:a[c.value]}));return A.jsx(Aw,{styles:o,media:r==="container"?void 0:l,container:r==="container"?l:void 0,selector:t})}const FFe={gutter:"md",grow:!1,columns:12},$Fe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Mm=Bt((e,t)=>{const n=dt("Grid",FFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,breakpoints:m,type:g,...b}=n,y=xn({name:"Grid",classes:wW,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$Fe}),x=oR();return g==="container"&&m?A.jsxs(xne,{value:{getStyles:y,grow:l,columns:f||12,breakpoints:m,type:g},children:[A.jsx(Sne,{selector:`.${x}`,...n}),A.jsx("div",{...y("container"),children:A.jsx(je,{ref:t,...y("root",{className:x}),...b,children:A.jsx("div",{...y("inner"),children:p})})})]}):A.jsxs(xne,{value:{getStyles:y,grow:l,columns:f||12,breakpoints:m,type:g},children:[A.jsx(Sne,{selector:`.${x}`,...n}),A.jsx(je,{ref:t,...y("root",{className:x}),...b,children:A.jsx("div",{...y("inner"),children:p})})]})});Mm.classes=wW;Mm.displayName="@mantine/core/Grid";Mm.Col=EW;var _ye={root:"m_9e117634"};const BFe={},jFe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:as(t),"--image-object-fit":n}}),Wb=Ya((e,t)=>{const n=dt("Image",BFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,b]=B.useState(!c);B.useEffect(()=>b(!c),[c]);const y=xn({name:"Image",classes:_ye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jFe});return g&&h?A.jsx(je,{component:"img",ref:t,src:h,...y("root"),onError:l,mod:["fallback",p],...m}):A.jsx(je,{component:"img",ref:t,...y("root"),src:c,onError:x=>{l==null||l(x),b(!0)},mod:p,...m})});Wb.classes=_ye;Wb.displayName="@mantine/core/Image";function fU(){return fU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fU.apply(null,arguments)}function UFe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var zFe=B.useLayoutEffect,VFe=function(t){var n=B.useRef(t);return zFe(function(){n.current=t}),n},Tne=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},HFe=function(t,n){var r=B.useRef();return B.useCallback(function(i){t.current=i,r.current&&Tne(r.current,null),r.current=n,n&&Tne(n,i)},[n])},Cne={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},qFe=function(t){Object.keys(Cne).forEach(function(n){t.style.setProperty(n,Cne[n],"important")})},Ane=qFe,Hc=null,kne=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function WFe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Hc||(Hc=document.createElement("textarea"),Hc.setAttribute("tabindex","-1"),Hc.setAttribute("aria-hidden","true"),Ane(Hc)),Hc.parentNode===null&&document.body.appendChild(Hc);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Hc.style[h]=o[h]}),Ane(Hc),Hc.value=t;var u=kne(Hc,e);Hc.value=t,u=kne(Hc,e),Hc.value="x";var l=Hc.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Rne=function(){},GFe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},YFe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],KFe=!!document.documentElement.currentStyle,XFe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=GFe(YFe,n),i=r.boxSizing;if(i==="")return null;KFe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},QFe=XFe;function wye(e,t,n){var r=VFe(n);B.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var JFe=function(t){wye(window,"resize",t)},ZFe=function(t){wye(document.fonts,"loadingdone",t)},e$e=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],t$e=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Rne:o,u=t.onHeightChange,l=u===void 0?Rne:u,c=UFe(t,e$e),f=c.value!==void 0,d=B.useRef(null),h=HFe(d,n),p=B.useRef(0),m=B.useRef(),g=function(){var x=d.current,w=r&&m.current?m.current:QFe(x);if(w){m.current=w;var S=WFe(w,x.value||x.placeholder||"x",s,i),C=S[0],R=S[1];p.current!==C&&(p.current=C,x.style.setProperty("height",C+"px","important"),l(C,{rowHeight:R}))}},b=function(x){f||g(),a(x)};return B.useLayoutEffect(g),JFe(g),ZFe(g),B.createElement("textarea",fU({},c,{onChange:b,ref:h}))},n$e=B.forwardRef(t$e);const r$e={},SW=Bt((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=dt("Textarea",r$e,e),u=n&&aOe()!=="test",l=u?{maxRows:r,minRows:i}:{};return A.jsx(cp,{component:u?n$e:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});SW.classes=cp.classes;SW.displayName="@mantine/core/Textarea";const[i$e,s$e]=Rl("List component was not found in tree");var TW={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const o$e={},CW=Bt((e,t)=>{const n=dt("ListItem",o$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=s$e(),h=u||d.icon,p={classNames:r,styles:o};return A.jsx(je,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:A.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&A.jsx("span",{...d.getStyles("itemIcon",p),children:h}),A.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});CW.classes=TW;CW.displayName="@mantine/core/ListItem";const a$e={type:"unordered"},u$e=(e,{size:t,spacing:n})=>({root:{"--list-fz":_l(t),"--list-lh":_me(t),"--list-spacing":qa(n)}}),b0=Bt((e,t)=>{const n=dt("List",a$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...b}=n,y=xn({name:"List",classes:TW,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:u$e});return A.jsx(i$e,{value:{center:p,icon:d,getStyles:y},children:A.jsx(je,{...y("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...b,children:l})})});b0.classes=TW;b0.displayName="@mantine/core/List";b0.Item=CW;var Eye={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Ine={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:fd("overlay")},l$e=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),oh=Bt((e,t)=>{const n=dt("LoadingOverlay",Ine,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Ga(),g=xn({name:"LoadingOverlay",classes:Eye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:l$e}),b={...Ine.overlayProps,...f};return A.jsx(bg,{transition:"fade",...l,mounted:!!d,children:y=>A.jsxs(je,{...g("root",{style:y}),ref:t,...p,children:[A.jsx(xg,{...g("loader"),unstyled:a,...c}),A.jsx(gS,{...b,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),A.jsx(gS,{...b,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});oh.classes=Eye;oh.displayName="@mantine/core/LoadingOverlay";const[c$e,dR]=Rl("Menu component was not found in the tree");var ST={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const f$e={},AW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("MenuDivider",f$e,e),u=dR();return A.jsx(je,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});AW.classes=ST;AW.displayName="@mantine/core/MenuDivider";const d$e={},kW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,onKeyDown:l,children:c,...f}=dt("MenuDropdown",d$e,e),d=B.useRef(null),h=dR(),p=Om(l,b=>{var y,x;(b.key==="ArrowUp"||b.key==="ArrowDown")&&(b.preventDefault(),(x=(y=d.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||x.focus())}),m=Om(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),g=Om(u,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return A.jsxs(wl.Dropdown,{...f,onMouseEnter:m,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:vu(t,d),...h.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[A.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});kW.classes=ST;kW.displayName="@mantine/core/MenuDropdown";const h$e={},RW=Ya((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=dt("MenuItem",h$e,e),p=dR(),m=Ga(),{dir:g}=Ub(),b=B.useRef(null),y=p.getItemIndex(b.current),x=h,w=Om(x.onMouseLeave,()=>p.setHovered(-1)),S=Om(x.onMouseEnter,()=>p.setHovered(p.getItemIndex(b.current))),C=Om(x.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),R=Om(x.onFocus,()=>p.setHovered(p.getItemIndex(b.current))),I=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,O=a?vg({color:a,theme:m}):null;return A.jsxs(sh,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:R,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:vu(b,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===y?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:S,onMouseLeave:w,onClick:C,onKeyDown:cq({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:x.onKeyDown}),__vars:{"--menu-item-color":O!=null&&O.isThemeColor&&(O==null?void 0:O.shade)===void 0?`var(--mantine-color-${O.color}-6)`:I==null?void 0:I.color,"--menu-item-hover":I==null?void 0:I.hover},children:[l&&A.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&A.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&A.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});RW.classes=ST;RW.displayName="@mantine/core/MenuItem";const p$e={},IW=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("MenuLabel",p$e,e),u=dR();return A.jsx(je,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});IW.classes=ST;IW.displayName="@mantine/core/MenuLabel";const m$e={refProp:"ref"},Sye=B.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=dt("MenuTarget",m$e,e);if(!$b(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=dR(),o=n.props,a=Om(o.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),u=Om(o.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),l=Om(o.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return A.jsx(wl.Target,{refProp:r,popupType:"menu",ref:t,...i,children:B.cloneElement(n,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":s.opened?!0:void 0})})});Sye.displayName="@mantine/core/MenuTarget";const g$e={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Xc(e){const t=dt("Menu",g$e,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:b,variant:y,vars:x,menuItemTabIndex:w,keepMounted:S,...C}=t,R=xn({name:"Menu",classes:ST,props:t,classNames:m,styles:g,unstyled:b}),[I,{setHovered:O,resetHovered:M}]=LDe(),[L,V]=ju({value:s,defaultValue:o,finalValue:!1,onChange:u}),[D,j]=B.useState(!1),z=()=>{V(!1),j(!1),L&&(i==null||i())},G=()=>{V(!0),!L&&(r==null||r())},ee=()=>{L?z():G()},{openDropdown:ne,closeDropdown:ue}=OFe({open:G,close:z,closeDelay:p,openDelay:h}),X=q=>MDe("[data-menu-item]","[data-menu-dropdown]",q),{resolvedClassNames:W,resolvedStyles:te}=Cw({classNames:m,styles:g,props:t});return tg(()=>{M()},[L]),A.jsx(c$e,{value:{getStyles:R,opened:L,toggleDropdown:ee,getItemIndex:X,hovered:I,setHovered:O,openedViaClick:D,setOpenedViaClick:j,closeOnItemClick:l,closeDropdown:d==="click"?z:ue,openDropdown:d==="click"?G:ne,closeDropdownImmediately:z,loop:c,trigger:d,unstyled:b,menuItemTabIndex:w},children:A.jsx(wl,{...C,opened:L,onChange:ee,defaultOpened:o,trapFocus:S?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:W,styles:te,unstyled:b,variant:y,keepMounted:S,children:n})})}Xc.extend=e=>e;Xc.classes=ST;Xc.displayName="@mantine/core/Menu";Xc.Item=RW;Xc.Label=IW;Xc.Dropdown=kW;Xc.Target=Sye;Xc.Divider=AW;const[y$e,TT]=Rl("Modal component was not found in tree");var I1={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const v$e={},t9=Bt((e,t)=>{const n=dt("ModalBody",v$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=TT();return A.jsx(Mge,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});t9.classes=I1;t9.displayName="@mantine/core/ModalBody";const b$e={},n9=Bt((e,t)=>{const n=dt("ModalCloseButton",b$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=TT();return A.jsx(Lge,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});n9.classes=I1;n9.displayName="@mantine/core/ModalCloseButton";const x$e={},r9=Bt((e,t)=>{const n=dt("ModalContent",x$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,__hidden:l,...c}=n,f=TT(),d=f.scrollAreaComponent||BLe;return A.jsx(Fge,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":l||void 0,ref:t,...c,children:A.jsx(d,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${ot(f.yOffset)} * 2))`},children:u})})});r9.classes=I1;r9.displayName="@mantine/core/ModalContent";const _$e={},i9=Bt((e,t)=>{const n=dt("ModalHeader",_$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=TT();return A.jsx($ge,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});i9.classes=I1;i9.displayName="@mantine/core/ModalHeader";const w$e={},s9=Bt((e,t)=>{const n=dt("ModalOverlay",w$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=TT();return A.jsx(Bge,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});s9.classes=I1;s9.displayName="@mantine/core/ModalOverlay";const E$e={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:fd("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},S$e=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:as(t),"--modal-size":_r(n,"modal-size"),"--modal-y-offset":ot(r),"--modal-x-offset":ot(i)}}),o9=Bt((e,t)=>{const n=dt("ModalRoot",E$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,b=xn({name:m,classes:I1,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:S$e});return A.jsx(y$e,{value:{yOffset:l,scrollAreaComponent:c,getStyles:b,fullScreen:d},children:A.jsx(Oge,{ref:t,...b("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});o9.classes=I1;o9.displayName="@mantine/core/ModalRoot";const[T$e,C$e]=Bb();function Tye({children:e}){const[t,n]=B.useState([]),[r,i]=B.useState(fd("modal"));return A.jsx(T$e,{value:{stack:t,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${t.indexOf(s)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}Tye.displayName="@mantine/core/ModalStack";const A$e={},a9=Bt((e,t)=>{const n=dt("ModalTitle",A$e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=TT();return A.jsx(jge,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});a9.classes=I1;a9.displayName="@mantine/core/ModalTitle";const k$e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:fd("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Eo=Bt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,opened:l,stackId:c,zIndex:f,...d}=dt("Modal",k$e,e),h=C$e(),p=!!n||s,m=h&&c?{closeOnEscape:h.currentId===c,trapFocus:h.currentId===c,zIndex:h.getZIndex(c)}:{},g=r===!1?!1:c&&h?h.currentId===c:l;return B.useEffect(()=>{h&&c&&(l?h.addModal(c,f||fd("modal")):h.removeModal(c))},[l,c,f]),A.jsxs(o9,{ref:t,radius:u,opened:l,zIndex:h&&c?h.getZIndex(c):f,...d,...m,children:[r&&A.jsx(s9,{visible:g,transitionProps:h&&c?{duration:0}:void 0,...i}),A.jsxs(r9,{radius:u,__hidden:h&&c&&l?c!==h.currentId:!1,children:[p&&A.jsxs(i9,{children:[n&&A.jsx(a9,{children:n}),s&&A.jsx(n9,{...o})]}),A.jsx(t9,{children:a})]})]})});Eo.classes=I1;Eo.displayName="@mantine/core/Modal";Eo.Root=o9;Eo.Overlay=s9;Eo.Content=r9;Eo.Body=t9;Eo.Header=i9;Eo.Title=a9;Eo.CloseButton=n9;Eo.Stack=Tye;const[R$e,PW]=Bb(),[I$e,P$e]=Bb();var u9={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const N$e={},D$e=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?_r(t):_r(n,"pg-gap")}}),NW=Bt((e,t)=>{const n=dt("PillGroup",N$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=PW(),h=(d==null?void 0:d.size)||l||void 0,p=xn({name:"PillGroup",classes:u9,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:D$e,stylesCtx:{size:h},rootSelector:"group"});return A.jsx(I$e,{value:{size:h,disabled:c},children:A.jsx(je,{ref:t,size:h,...p("group"),...f})})});NW.classes=u9;NW.displayName="@mantine/core/PillGroup";const O$e={variant:"default"},M$e=(e,{radius:t},{size:n})=>({root:{"--pill-fz":_r(n,"pill-fz"),"--pill-height":_r(n,"pill-height"),"--pill-radius":t===void 0?void 0:as(t)}}),Kk=Bt((e,t)=>{const n=dt("Pill",O$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:b,...y}=n,x=P$e(),w=PW(),S=m||(x==null?void 0:x.size)||void 0,C=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",R=xn({name:"Pill",classes:u9,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:M$e,stylesCtx:{size:S}});return A.jsxs(je,{component:"span",ref:t,variant:C,size:S,...R("root",{variant:C}),mod:[{"with-remove":f&&!g,disabled:g||(x==null?void 0:x.disabled)},b],...y,children:[A.jsx("span",{...R("label"),children:c}),f&&A.jsx(Hb,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...R("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:I=>{var O;I.preventDefault(),I.stopPropagation(),(O=h==null?void 0:h.onMouseDown)==null||O.call(h,I)},onClick:I=>{var O;I.stopPropagation(),d==null||d(),(O=h==null?void 0:h.onClick)==null||O.call(h,I)}})]})});Kk.classes=u9;Kk.displayName="@mantine/core/Pill";Kk.Group=NW;var Cye={field:"m_45c4369d"};const L$e={type:"visible"},DW=Bt((e,t)=>{const n=dt("PillsInputField",L$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=PW(),g=xT(),b=xn({name:"PillsInputField",classes:Cye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),y=c||(m==null?void 0:m.disabled);return A.jsx(je,{component:"input",ref:vu(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:y,mod:[{disabled:y,pointer:d},h],...b("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:x=>!d&&x.stopPropagation()})});DW.classes=Cye;DW.displayName="@mantine/core/PillsInputField";const F$e={},d8=Bt((e,t)=>{const n=dt("PillsInput",F$e,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=B.useRef(null);return A.jsx(R$e,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:A.jsx(cp,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});d8.displayName="@mantine/core/PillsInput";d8.Field=DW;function $$e({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(vS(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const B$e={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},OW=Bt((e,t)=>{const n=dt("MultiSelect",B$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:b,onDropdownOpen:y,onDropdownClose:x,selectFirstOptionOnChange:w,onOptionSubmit:S,comboboxProps:C,filter:R,limit:I,withScrollArea:O,maxDropdownHeight:M,searchValue:L,defaultSearchValue:V,onSearchChange:D,readOnly:j,disabled:z,onFocus:G,onBlur:ee,onPaste:ne,radius:ue,rightSection:X,rightSectionWidth:W,rightSectionPointerEvents:te,rightSectionProps:q,leftSection:J,leftSectionWidth:oe,leftSectionPointerEvents:de,leftSectionProps:ce,inputContainer:pe,inputWrapperOrder:Ee,withAsterisk:Ae,labelProps:ge,descriptionProps:me,errorProps:Oe,wrapperProps:Me,description:Ye,label:lt,error:We,maxValues:nt,searchable:yt,nothingFoundMessage:_t,withCheckIcon:It,checkIconPosition:Et,hidePickedOptions:Ke,withErrorStyles:Lt,name:sn,form:Fe,id:Qe,clearable:wt,clearButtonProps:Vt,hiddenInputProps:Wt,placeholder:bn,hiddenInputValuesDivider:Dn,required:Zn,mod:wr,renderOption:Hn,onRemove:nr,onClear:Ei,scrollAreaProps:Dr,...Co}=n,Ji=df(Qe),Di=Kge(m),Zi=nW(Di),ei=hW({opened:g,defaultOpened:b,onDropdownOpen:y,onDropdownClose:()=>{x==null||x(),ei.resetSelectedOption()}}),{styleProps:mo,rest:{type:Gu,autoComplete:Sa,...Ta}}=kw(Co),[Kr,Oi]=ju({value:c,defaultValue:f,finalValue:[],onChange:d}),[si,Zs]=ju({value:L,defaultValue:V,finalValue:"",onChange:D}),Xr=xn({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Hi,resolvedStyles:eo}=Cw({props:n,styles:o,classNames:r}),go=Hr=>{h==null||h(Hr),Hr.key===" "&&!yt&&(Hr.preventDefault(),ei.toggleDropdown()),Hr.key==="Backspace"&&si.length===0&&Kr.length>0&&(nr==null||nr(Kr[Kr.length-1]),Oi(Kr.slice(0,Kr.length-1)))},Jo=Kr.map((Hr,Pl)=>{var bs,Ka;return A.jsx(Kk,{withRemoveButton:!j&&!((bs=Zi[Hr])!=null&&bs.disabled),onRemove:()=>{Oi(Kr.filter(Zo=>Hr!==Zo)),nr==null||nr(Hr)},unstyled:a,disabled:z,...Xr("pill"),children:((Ka=Zi[Hr])==null?void 0:Ka.label)||Hr},`${Hr}-${Pl}`)});B.useEffect(()=>{w&&ei.selectFirstOption()},[w,Kr]);const Ca=A.jsx(di.ClearButton,{...Vt,onClear:()=>{Ei==null||Ei(),Oi([]),Zs("")}}),pd=$$e({data:Di,value:Kr});return A.jsxs(A.Fragment,{children:[A.jsxs(di,{store:ei,classNames:Hi,styles:eo,unstyled:a,size:l,readOnly:j,__staticSelector:"MultiSelect",onOptionSubmit:Hr=>{S==null||S(Hr),Zs(""),ei.updateSelectedOptionIndex("selected"),Kr.includes(Zi[Hr].value)?(Oi(Kr.filter(Pl=>Pl!==Zi[Hr].value)),nr==null||nr(Zi[Hr].value)):Kr.length<nt&&Oi([...Kr,Zi[Hr].value])},...C,children:[A.jsx(di.DropdownTarget,{children:A.jsx(d8,{...mo,__staticSelector:"MultiSelect",classNames:Hi,styles:eo,unstyled:a,size:l,className:i,style:s,variant:p,disabled:z,radius:ue,__defaultRightSection:A.jsx(di.Chevron,{size:l,error:We,unstyled:a}),__clearSection:Ca,__clearable:wt&&Kr.length>0&&!z&&!j,rightSection:X,rightSectionPointerEvents:te||(Ca?"all":"none"),rightSectionWidth:W,rightSectionProps:q,leftSection:J,leftSectionWidth:oe,leftSectionPointerEvents:de,leftSectionProps:ce,inputContainer:pe,inputWrapperOrder:Ee,withAsterisk:Ae,labelProps:ge,descriptionProps:me,errorProps:Oe,wrapperProps:Me,description:Ye,label:lt,error:We,multiline:!0,withErrorStyles:Lt,__stylesApiProps:{...n,rightSectionPointerEvents:te||(Ca?"all":"none"),multiline:!0},pointer:!yt,onClick:()=>yt?ei.openDropdown():ei.toggleDropdown(),"data-expanded":ei.dropdownOpened||void 0,id:Ji,required:Zn,mod:wr,children:A.jsxs(Kk.Group,{disabled:z,unstyled:a,...Xr("pillsList"),children:[Jo,A.jsx(di.EventsTarget,{autoComplete:Sa,children:A.jsx(d8.Field,{...Ta,ref:t,id:Ji,placeholder:bn,type:!yt&&!bn?"hidden":"visible",...Xr("inputField"),unstyled:a,onFocus:Hr=>{G==null||G(Hr),yt&&ei.openDropdown()},onBlur:Hr=>{ee==null||ee(Hr),ei.closeDropdown(),Zs("")},onKeyDown:go,value:si,onChange:Hr=>{Zs(Hr.currentTarget.value),yt&&ei.openDropdown(),w&&ei.selectFirstOption()},disabled:z,readOnly:j||!yt,pointer:!yt})})]})})}),A.jsx(hye,{data:Ke?pd:Di,hidden:j||z,filter:R,search:si,limit:I,hiddenWhenEmpty:!_t,withScrollArea:O,maxDropdownHeight:M,filterOptions:yt,value:Kr,checkIconPosition:Et,withCheckIcon:It,nothingFoundMessage:_t,unstyled:a,labelId:lt?`${Ji}-label`:void 0,"aria-label":lt?void 0:Co["aria-label"],renderOption:Hn,scrollAreaProps:Dr})]}),A.jsx(di.HiddenInput,{name:sn,valuesDivider:Dn,value:Kr,form:Fe,disabled:z,...Wt})]})});OW.classes={...cp.classes,...di.classes};OW.displayName="@mantine/core/MultiSelect";var Aye={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const j$e={},U$e=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":qa(r)}}},l9=Ya((e,t)=>{const n=dt("NavLink",j$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:b,label:y,description:x,disableRightSectionRotation:w,noWrap:S,childrenOffset:C,onKeyDown:R,autoContrast:I,mod:O,...M}=n,L=xn({name:"NavLink",props:n,classes:Aye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:U$e}),[V,D]=ju({value:l,defaultValue:c,finalValue:!1,onChange:f}),j=!!d,z=G=>{h==null||h(G),j&&(G.preventDefault(),D(!V))};return A.jsxs(A.Fragment,{children:[A.jsxs(sh,{...L("root"),component:"a",ref:t,onClick:z,onKeyDown:G=>{R==null||R(G),G.nativeEvent.code==="Space"&&j&&(G.preventDefault(),D(!V))},unstyled:a,mod:[{disabled:m,active:p,expanded:V},O],...M,children:[g&&A.jsx(je,{component:"span",...L("section"),mod:{position:"left"},children:g}),A.jsxs(je,{...L("body"),mod:{"no-wrap":S},children:[A.jsx(je,{component:"span",...L("label"),children:y}),A.jsx(je,{component:"span",mod:{active:p},...L("description"),children:x})]}),(j||b)&&A.jsx(je,{...L("section"),component:"span",mod:{rotate:V&&!w,position:"right"},children:j?b||A.jsx(JO,{...L("chevron")}):b})]}),j&&A.jsx(VO,{in:V,...L("collapse"),children:A.jsx("div",{...L("children"),children:d})})]})});l9.classes=Aye;l9.displayName="@mantine/core/NavLink";var kye={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const z$e={withCloseButton:!0},V$e=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:as(t),"--notification-color":n?Fs(n,e):void 0}}),MW=Bt((e,t)=>{const n=dt("Notification",z$e,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:b,variant:y,vars:x,mod:w,...S}=n,C=xn({name:"Notification",classes:kye,props:n,className:r,style:m,classNames:p,styles:g,unstyled:b,vars:x,varsResolver:V$e});return A.jsxs(je,{...C("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:y,...S,role:"alert",children:[c&&!o&&A.jsx("div",{...C("icon"),children:c}),o&&A.jsx(xg,{size:28,color:i,...C("loader")}),A.jsxs("div",{...C("body"),children:[l&&A.jsx("div",{...C("title"),children:l}),A.jsx(je,{...C("description"),mod:{"data-with-title":!!l},children:f})]}),a&&A.jsx(Hb,{iconSize:16,color:"gray",...h,unstyled:b,onClick:d,...C("closeButton")})]})});MW.classes=kye;MW.displayName="@mantine/core/Notification";function Rye(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var Xk;(function(e){e.event="event",e.props="prop"})(Xk||(Xk={}));function Nv(){}function H$e(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function Qk(e){return!!(e||"").match(/\d/)}function zE(e){return e==null}function q$e(e){return typeof e=="number"&&isNaN(e)}function Iye(e){return zE(e)||q$e(e)||typeof e=="number"&&!isFinite(e)}function Pye(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function W$e(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function G$e(e,t,n){var r=W$e(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function Y$e(e){var t=B.useRef(e);t.current=e;var n=B.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function LW(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function K$e(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function Nye(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Pne(e,t){return Array(t+1).join(e)}function Dye(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Pne("0",Math.abs(o))+i:o>=a?i=i+Pne("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Nne(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=LW(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,b){return m.length>b?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=Nye(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function h_(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Oye=H$e(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),X$e=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function Q$e(e,t,n){return Math.min(Math.max(e,t),n)}function EF(e){return Math.max(e.selectionStart,e.selectionEnd)}function J$e(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Z$e(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function eBe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function tBe(e,t,n,r,i,s,o){o===void 0&&(o=eBe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var b=r;b<l&&(d[b]===-1||!s(n[b]));)b++;var y=b===l||d[b]===-1?c:d[b];for(b=r-1;b>0&&d[b]===-1;)b--;var x=b===-1||d[b]===-1?0:d[b]+1;return x>y?y:r-x<y-r?x:y}function Dne(e,t,n,r){var i=e.length;if(t=Q$e(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function nBe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(Qk(e[n])||Qk(e[n-1]));return t}function Mye(e,t,n,r,i,s){s===void 0&&(s=Nv);var o=Y$e(function(p,m){var g,b;return Iye(p)?(b="",g=""):typeof p=="number"||m?(b=typeof p=="number"?Dye(p):p,g=r(b)):(b=i(p,void 0),g=r(b)),{formattedValue:g,numAsString:b}}),a=B.useState(function(){return o(zE(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;zE(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return B.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function rBe(e){return e.replace(/[^0-9]/g,"")}function iBe(e){return e}function sBe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=iBe);var a=e.removeFormatting;a===void 0&&(a=rBe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Nv);var h=e.onKeyDown;h===void 0&&(h=Nv);var p=e.onMouseUp;p===void 0&&(p=Nv);var m=e.onFocus;m===void 0&&(m=Nv);var g=e.onBlur;g===void 0&&(g=Nv);var b=e.value,y=e.getCaretBoundary;y===void 0&&(y=nBe);var x=e.isValidInputCharacter;x===void 0&&(x=Qk);var w=e.isCharacterSame,S=Rye(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),C=Mye(b,u,!!l,o,a,c),R=C[0],I=R.formattedValue,O=R.numAsString,M=C[1],L=B.useRef(),V=B.useRef({formattedValue:I,numAsString:O}),D=function(We,nt){V.current={formattedValue:We.formattedValue,numAsString:We.value},M(We,nt)},j=B.useState(!1),z=j[0],G=j[1],ee=B.useRef(null),ne=B.useRef({setCaretTimeout:null,focusTimeout:null});B.useEffect(function(){return G(!0),function(){clearTimeout(ne.current.setCaretTimeout),clearTimeout(ne.current.focusTimeout)}},[]);var ue=o,X=function(We,nt){var yt=parseFloat(nt);return{formattedValue:We,value:nt,floatValue:isNaN(yt)?void 0:yt}},W=function(We,nt,yt){We.selectionStart===0&&We.selectionEnd===We.value.length||(h_(We,nt),ne.current.setCaretTimeout=setTimeout(function(){We.value===yt&&We.selectionStart!==nt&&h_(We,nt)},0))},te=function(We,nt,yt){return Dne(We,nt,y(We),yt)},q=function(We,nt,yt){var _t=y(nt),It=tBe(nt,I,We,yt,_t,x,w);return It=Dne(nt,It,_t),It},J=function(We){var nt=We.formattedValue;nt===void 0&&(nt="");var yt=We.input,_t=We.source,It=We.event,Et=We.numAsString,Ke;if(yt){var Lt=We.inputValue||yt.value,sn=EF(yt);yt.value=nt,Ke=q(Lt,nt,sn),Ke!==void 0&&W(yt,Ke,nt)}nt!==I&&D(X(nt,Et),{event:It,source:_t})};B.useEffect(function(){var We=V.current,nt=We.formattedValue,yt=We.numAsString;(I!==nt||O!==yt)&&D(X(I,O),{event:void 0,source:Xk.props})},[I,O]);var oe=ee.current?EF(ee.current):void 0,de=typeof window<"u"?B.useLayoutEffect:B.useEffect;de(function(){var We=ee.current;if(I!==V.current.formattedValue&&We){var nt=q(V.current.formattedValue,I,oe);We.value=I,W(We,nt,I)}},[I]);var ce=function(We,nt,yt){var _t=nt.target,It=L.current?X$e(L.current,_t.selectionEnd):Oye(I,We),Et=Object.assign(Object.assign({},It),{lastValue:I}),Ke=a(We,Et),Lt=ue(Ke);if(Ke=a(Lt,void 0),f&&!f(X(Lt,Ke))){var sn=nt.target,Fe=EF(sn),Qe=q(We,I,Fe);return sn.value=I,W(sn,Qe,I),!1}return J({formattedValue:Lt,numAsString:Ke,inputValue:We,event:nt,source:yt,input:nt.target}),!0},pe=function(We,nt){nt===void 0&&(nt=0);var yt=We.selectionStart,_t=We.selectionEnd;L.current={selectionStart:yt,selectionEnd:_t+nt}},Ee=function(We){var nt=We.target,yt=nt.value,_t=ce(yt,We,Xk.event);_t&&d(We),L.current=void 0},Ae=function(We){var nt=We.target,yt=We.key,_t=nt.selectionStart,It=nt.selectionEnd,Et=nt.value;Et===void 0&&(Et="");var Ke;yt==="ArrowLeft"||yt==="Backspace"?Ke=Math.max(_t-1,0):yt==="ArrowRight"?Ke=Math.min(_t+1,Et.length):yt==="Delete"&&(Ke=_t);var Lt=0;yt==="Delete"&&_t===It&&(Lt=1);var sn=yt==="ArrowLeft"||yt==="ArrowRight";if(Ke===void 0||_t!==It&&!sn){h(We),pe(nt,Lt);return}var Fe=Ke;if(sn){var Qe=yt==="ArrowLeft"?"left":"right";Fe=te(Et,Ke,Qe),Fe!==Ke&&We.preventDefault()}else yt==="Delete"&&!x(Et[Ke])?Fe=te(Et,Ke,"right"):yt==="Backspace"&&!x(Et[Ke])&&(Fe=te(Et,Ke,"left"));Fe!==Ke&&W(nt,Fe,Et),h(We),pe(nt,Lt)},ge=function(We){var nt=We.target,yt=function(){var _t=nt.selectionStart,It=nt.selectionEnd,Et=nt.value;if(Et===void 0&&(Et=""),_t===It){var Ke=te(Et,_t);Ke!==_t&&W(nt,Ke,Et)}};yt(),requestAnimationFrame(function(){yt()}),p(We),pe(nt)},me=function(We){We.persist&&We.persist();var nt=We.target,yt=We.currentTarget;ee.current=nt,ne.current.focusTimeout=setTimeout(function(){var _t=nt.selectionStart,It=nt.selectionEnd,Et=nt.value;Et===void 0&&(Et="");var Ke=te(Et,_t);Ke!==_t&&!(_t===0&&It===Et.length)&&W(nt,Ke,Et),m(Object.assign(Object.assign({},We),{currentTarget:yt}))},0)},Oe=function(We){ee.current=null,clearTimeout(ne.current.focusTimeout),clearTimeout(ne.current.setCaretTimeout),g(We)},Me=z&&J$e()?"numeric":void 0,Ye=Object.assign({inputMode:Me},S,{type:t,value:I,onChange:Ee,onKeyDown:Ae,onMouseUp:ge,onFocus:me,onBlur:Oe});if(n==="text")return i?sr.createElement(sr.Fragment,null,i(I,S)||null):sr.createElement("span",Object.assign({},S,{ref:s}),I);if(r){var lt=r;return sr.createElement(lt,Object.assign({},Ye,{ref:s}))}return sr.createElement("input",Object.assign({},Ye,{ref:s}))}function One(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=c9(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=LW(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=Nye(p,n,!!r)),l&&(h=G$e(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function c9(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function oBe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function aBe(e,t){return new RegExp("(^-)|[0-9]|"+Pye(e),"g")}function uBe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function lBe(e,t,n){var r;t===void 0&&(t=Z$e(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=c9(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(Qk(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var b=function(ee,ne,ue){var X=!1,W=!1;s.startsWith("-")?X=!1:ee.startsWith("--")?(X=!1,W=!0):o.startsWith("-")&&ee.length===o.length?X=!1:ee[0]==="-"&&(X=!0);var te=X?1:0;return W&&(te=2),te&&(ee=ee.substring(te),ne-=te,ue-=te),{value:ee,start:ne,end:ue,hasNegation:X}},y=b(e,c,f),x=y.hasNegation;r=y,e=r.value,c=r.start,f=r.end;var w=b(t.lastValue,u.start,u.end),S=w.start,C=w.end,R=w.value,I=e.substring(c,f);e.length&&R.length&&(S>R.length-o.length||C<s.length)&&!(I&&o.startsWith(I))&&(e=R);var O=0;e.startsWith(s)?O+=s.length:c<s.length&&(O=c),e=e.substring(O),f-=O;var M=e.length,L=e.length-o.length;e.endsWith(o)?M=L:(f>L||f>e.length-o.length)&&(M=f),e=e.substring(0,M),e=oBe(x?"-"+e:e,i),e=(e.match(aBe(p))||[]).join("");var V=e.indexOf(p);e=e.replace(new RegExp(Pye(p),"g"),function(ee,ne){return ne===V?".":""});var D=LW(e,i),j=D.beforeDecimal,z=D.afterDecimal,G=D.addNegation;return l.end-l.start<u.end-u.start&&j===""&&m&&!parseFloat(z)&&(e=G?"-":""),e}function cBe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function fBe(e){var t=c9(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function dBe(e){e=fBe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Nv);var s=e.onBlur;s===void 0&&(s=Nv);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=Rye(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=c9(e),g=m.decimalSeparator,b=m.allowedDecimalSeparators,y=function(G){return One(G,e)},x=function(G,ee){return lBe(G,ee,e)},w=zE(f)?c:f,S=d??uBe(w,l,t);zE(f)?zE(c)||(S=S||typeof c=="number"):S=S||typeof f=="number";var C=function(G){return Iye(G)?G:(typeof G=="number"&&(G=Dye(G)),S&&typeof a=="number"?Nne(G,a,!!u):G)},R=Mye(C(f),C(c),!!S,y,x,h),I=R[0],O=I.numAsString,M=I.formattedValue,L=R[1],V=function(G){var ee=G.target,ne=G.key,ue=ee.selectionStart,X=ee.selectionEnd,W=ee.value;if(W===void 0&&(W=""),(ne==="Backspace"||ne==="Delete")&&X<l.length){G.preventDefault();return}if(ue!==X){i(G);return}ne==="Backspace"&&W[0]==="-"&&ue===l.length+1&&n&&h_(ee,1),a&&u&&(ne==="Backspace"&&W[ue-1]===g?(h_(ee,ue-1),G.preventDefault()):ne==="Delete"&&W[ue]===g&&G.preventDefault()),b!=null&&b.includes(ne)&&W[ue]===g&&h_(ee,ue+1);var te=o===!0?",":o;ne==="Backspace"&&W[ue-1]===te&&h_(ee,ue-1),ne==="Delete"&&W[ue]===te&&h_(ee,ue+1),i(G)},D=function(G){var ee=O;if(ee.match(/\d/g)||(ee=""),r||(ee=K$e(ee)),u&&a&&(ee=Nne(ee,a,u)),ee!==O){var ne=One(ee,e);L({formattedValue:ne,value:ee,floatValue:parseFloat(ee)},{event:G,source:Xk.event})}s(G)},j=function(G){return G===g?!0:Qk(G)},z=function(G){var ee=G.currentValue,ne=G.lastValue,ue=G.formattedValue,X=G.currentValueIndex,W=G.formattedValueIndex,te=ee[X],q=ue[W],J=Oye(ne,ee),oe=J.to,de=function(ce){return x(ce).indexOf(".")+l.length};return f===0&&u&&a&&ee[oe.start]===g&&de(ee)<X&&de(ue)>W?!1:X>=oe.start&&X<oe.end&&b&&b.includes(te)&&q===g?!0:te===q};return Object.assign(Object.assign({},p),{value:M,valueIsNumericString:!1,isValidInputCharacter:j,isCharacterSame:z,onValueChange:L,format:y,removeFormatting:x,getCaretBoundary:function(G){return cBe(G,e)},onKeyDown:V,onBlur:D})}function hBe(e){var t=dBe(e);return sr.createElement(sBe,Object.assign({},t))}function Mne({direction:e,style:t,...n}){return A.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:A.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var dU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const pBe=/^(0\.0*|-0(\.0*)?)$/,mBe=/^-?0\d+(\.\d+)?\.?$/;function hU(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function SF(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||hU(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function gBe(e){return e.toString().replace(".","").length}function yBe(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&gBe(t)<14&&t!==""}function Lne(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const vBe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},bBe=(e,{size:t})=>({controls:{"--ni-chevron-size":_r(t,"ni-chevron-size")}}),FW=Bt((e,t)=>{const n=dt("NumberInput",vBe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:b,clampBehavior:y,onBlur:x,allowDecimal:w,decimalScale:S,onKeyDown:C,onKeyDownCapture:R,handlersRef:I,startValue:O,disabled:M,rightSectionPointerEvents:L,allowNegative:V,readOnly:D,size:j,rightSectionWidth:z,stepHoldInterval:G,stepHoldDelay:ee,allowLeadingZeros:ne,withKeyboardEvents:ue,trimLeadingZeroesOnBlur:X,...W}=n,te=xn({name:"NumberInput",classes:dU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:bBe}),{resolvedClassNames:q,resolvedStyles:J}=Cw({classNames:i,styles:s,props:n}),[oe,de]=ju({value:c,defaultValue:f,finalValue:"",onChange:u}),ce=ee!==void 0&&G!==void 0,pe=B.useRef(null),Ee=B.useRef(null),Ae=B.useRef(0),ge=(Ke,Lt)=>{Lt.source==="event"&&de(yBe(Ke.floatValue,Ke.value)&&!pBe.test(Ke.value)&&!(ne&&mBe.test(Ke.value))?Ke.floatValue:Ke.value),l==null||l(Ke,Lt)},me=Ke=>{const Lt=String(Ke).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return Lt?Math.max(0,(Lt[1]?Lt[1].length:0)-(Lt[2]?+Lt[2]:0)):0},Oe=Ke=>{pe.current&&typeof Ke<"u"&&pe.current.setSelectionRange(Ke,Ke)},Me=B.useRef(Jj);Me.current=()=>{if(!SF(oe))return;let Ke;const Lt=me(oe),sn=me(p),Fe=Math.max(Lt,sn),Qe=10**Fe;if(!hU(oe)&&(typeof oe!="number"||Number.isNaN(oe)))Ke=Rm(O,h,d);else if(d!==void 0){const Vt=(Math.round(Number(oe)*Qe)+Math.round(p*Qe))/Qe;Ke=Vt<=d?Vt:d}else Ke=(Math.round(Number(oe)*Qe)+Math.round(p*Qe))/Qe;const wt=Ke.toFixed(Fe);de(parseFloat(wt)),l==null||l({floatValue:parseFloat(wt),formattedValue:wt,value:wt},{source:"increment"}),setTimeout(()=>{var Vt;return Oe((Vt=pe.current)==null?void 0:Vt.value.length)},0)};const Ye=B.useRef(Jj);Ye.current=()=>{if(!SF(oe))return;let Ke;const Lt=h!==void 0?h:V?Number.MIN_SAFE_INTEGER:0,sn=me(oe),Fe=me(p),Qe=Math.max(sn,Fe),wt=10**Qe;if(!hU(oe)&&typeof oe!="number"||Number.isNaN(oe))Ke=Rm(O,Lt,d);else{const Wt=(Math.round(Number(oe)*wt)-Math.round(p*wt))/wt;Ke=Lt!==void 0&&Wt<Lt?Lt:Wt}const Vt=Ke.toFixed(Qe);de(parseFloat(Vt)),l==null||l({floatValue:parseFloat(Vt),formattedValue:Vt,value:Vt},{source:"decrement"}),setTimeout(()=>{var Wt;return Oe((Wt=pe.current)==null?void 0:Wt.value.length)},0)};const lt=Ke=>{C==null||C(Ke),!(D||!ue)&&(Ke.key==="ArrowUp"&&(Ke.preventDefault(),Me.current()),Ke.key==="ArrowDown"&&(Ke.preventDefault(),Ye.current()))},We=Ke=>{if(R==null||R(Ke),Ke.key==="Backspace"){const Lt=pe.current;Lt.selectionStart===0&&Lt.selectionStart===Lt.selectionEnd&&(Ke.preventDefault(),window.setTimeout(()=>Oe(0),0))}};s8(I,{increment:Me.current,decrement:Ye.current});const nt=Ke=>{Ke?Me.current():Ye.current(),Ae.current+=1},yt=Ke=>{if(nt(Ke),ce){const Lt=typeof G=="number"?G:G(Ae.current);Ee.current=window.setTimeout(()=>yt(Ke),Lt)}},_t=(Ke,Lt)=>{var sn;Ke.preventDefault(),(sn=pe.current)==null||sn.focus(),nt(Lt),ce&&(Ee.current=window.setTimeout(()=>yt(Lt),ee))},It=()=>{Ee.current&&window.clearTimeout(Ee.current),Ee.current=null,Ae.current=0},Et=A.jsxs("div",{...te("controls"),children:[A.jsx(sh,{...te("control"),tabIndex:-1,"aria-hidden":!0,disabled:M||typeof oe=="number"&&d!==void 0&&oe>=d,mod:{direction:"up"},onMouseDown:Ke=>Ke.preventDefault(),onPointerDown:Ke=>{_t(Ke,!0)},onPointerUp:It,onPointerLeave:It,children:A.jsx(Mne,{direction:"up"})}),A.jsx(sh,{...te("control"),tabIndex:-1,"aria-hidden":!0,disabled:M||typeof oe=="number"&&h!==void 0&&oe<=h,mod:{direction:"down"},onMouseDown:Ke=>Ke.preventDefault(),onPointerDown:Ke=>{_t(Ke,!1)},onPointerUp:It,onPointerLeave:It,children:A.jsx(Mne,{direction:"down"})})]});return A.jsx(cp,{component:hBe,allowNegative:V,className:ba(dU.root,r),size:j,...W,readOnly:D,disabled:M,value:oe,getInputRef:vu(t,pe),onValueChange:ge,rightSection:m||D||!SF(oe)?g:g||Et,classNames:q,styles:J,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?S:0,onKeyDown:lt,onKeyDownCapture:We,rightSectionPointerEvents:L??(M?"none":void 0),rightSectionWidth:z??`var(--ni-right-section-width-${j||"sm"})`,allowLeadingZeros:ne,onBlur:Ke=>{if(x==null||x(Ke),y==="blur"&&typeof oe=="number"&&Rm(oe,h,d)!==oe&&de(Rm(oe,h,d)),X&&typeof oe=="string"&&me(oe)<15){const Lt=oe.replace(/^0+/,""),sn=parseFloat(Lt);de(Number.isNaN(sn)||sn>Number.MAX_SAFE_INTEGER?Lt:Rm(sn,h,d))}},isAllowed:Ke=>y==="strict"?b?b(Ke)&&Lne(Ke.floatValue,h,d):Lne(Ke.floatValue,h,d):b?b(Ke):!0})});FW.classes={...cp.classes,...dU};FW.displayName="@mantine/core/NumberInput";const[xBe,Lye]=Rl("Progress.Root component was not found in tree");var hR={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const _Be={},$W=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=dt("ProgressLabel",_Be,e),u=Lye();return A.jsx(je,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});$W.classes=hR;$W.displayName="@mantine/core/ProgressLabel";const wBe={},EBe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":_r(t,"progress-size"),"--progress-radius":n===void 0?void 0:as(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),f9=Bt((e,t)=>{const n=dt("ProgressRoot",wBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=xn({name:"Progress",classes:hR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EBe});return A.jsx(xBe,{value:{getStyles:d,autoContrast:l},children:A.jsx(je,{ref:t,...d("root"),...f})})});f9.classes=hR;f9.displayName="@mantine/core/ProgressRoot";const SBe={withAria:!0},d9=Bt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=dt("ProgressSection",SBe,e),p=Lye(),m=Ga(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return A.jsx(je,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Fs(l,m),"--progress-label-color":pT(p.autoContrast,m)?Tw({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});d9.classes=hR;d9.displayName="@mantine/core/ProgressSection";const TBe={},CT=Bt((e,t)=>{const n=dt("Progress",TBe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Cw({classNames:i,styles:s,props:n});return A.jsx(f9,{ref:t,classNames:d,styles:h,vars:o,...f,children:A.jsx(d9,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});CT.classes=hR;CT.displayName="@mantine/core/Progress";CT.Section=d9;CT.Root=f9;CT.Label=$W;const[CBe,Fye]=Bb(),[ABe,kBe]=Bb();var $ye={card:"m_9dc8ae12"};const RBe={withBorder:!0},IBe=(e,{radius:t})=>({card:{"--card-radius":as(t)}}),BW=Bt((e,t)=>{const n=dt("RadioCard",RBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,b=xn({name:"RadioCard",classes:$ye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IBe,rootSelector:"card"}),{dir:y}=Ub(),x=Fye(),w=typeof l=="boolean"?l:(x==null?void 0:x.value)===d||!1,S=p||(x==null?void 0:x.name),C=R=>{if(m==null||m(R),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(R.nativeEvent.code)){R.preventDefault();const I=Array.from(document.querySelectorAll(`[role="radio"][name="${S||"__mantine"}"]`)),O=I.findIndex(V=>V===R.target),M=O+1>=I.length?0:O+1,L=O-1<0?I.length-1:O-1;R.nativeEvent.code==="ArrowDown"&&(I[M].focus(),I[M].click()),R.nativeEvent.code==="ArrowUp"&&(I[L].focus(),I[L].click()),R.nativeEvent.code==="ArrowLeft"&&(I[y==="ltr"?L:M].focus(),I[y==="ltr"?L:M].click()),R.nativeEvent.code==="ArrowRight"&&(I[y==="ltr"?M:L].focus(),I[y==="ltr"?M:L].click())}};return A.jsx(ABe,{value:{checked:w},children:A.jsx(sh,{ref:t,mod:[{"with-border":f,checked:w},c],...b("card"),...g,role:"radio","aria-checked":w,name:S,onClick:R=>{h==null||h(R),x==null||x.onChange(d||"")},onKeyDown:C})})});BW.displayName="@mantine/core/RadioCard";BW.classes=$ye;const PBe={},jW=Bt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=dt("RadioGroup",PBe,e),f=df(u),[d,h]=ju({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return A.jsx(CBe,{value:{value:d,onChange:p,size:s,name:f},children:A.jsx(ys.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:A.jsx(mW,{role:"radiogroup",children:a})})})});jW.classes=ys.Wrapper.classes;jW.displayName="@mantine/core/RadioGroup";function Bye({size:e,style:t,...n}){return A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:ot(e),height:ot(e),...t},"aria-hidden":!0,...n,children:A.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var jye={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const NBe={icon:Bye},DBe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=vg({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":_r(r,"radio-size"),"--radio-radius":t===void 0?void 0:as(t),"--radio-color":s==="outline"?u:Fs(n,e),"--radio-icon-size":_r(r,"radio-icon-size"),"--radio-icon-color":i?Fs(i,e):pT(o,e)?Tw({color:n,theme:e,autoContrast:o}):void 0}}},UW=Bt((e,t)=>{const n=dt("RadioIndicator",NBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:b,...y}=n,x=l,w=xn({name:"RadioIndicator",classes:jye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:DBe,rootSelector:"indicator"}),S=kBe(),C=typeof p=="boolean"?p:(S==null?void 0:S.checked)||!1;return A.jsx(je,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:C,disabled:b},m],...y,children:A.jsx(x,{...w("icon")})})});UW.displayName="@mantine/core/RadioIndicator";UW.classes=jye;var Uye={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const OBe={labelPosition:"right"},MBe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=vg({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":_r(t,"radio-size"),"--radio-radius":n===void 0?void 0:as(n),"--radio-color":s==="outline"?u:Fs(r,e),"--radio-icon-color":i?Fs(i,e):pT(o,e)?Tw({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":_r(t,"radio-icon-size")}}},ac=Bt((e,t)=>{const n=dt("Radio",OBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:b,disabled:y,wrapperProps:x,icon:w=Bye,rootRef:S,iconColor:C,onChange:R,mod:I,...O}=n,M=xn({name:"Radio",classes:Uye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MBe}),L=Fye(),V=(L==null?void 0:L.size)??c,D=n.size?c:V,{styleProps:j,rest:z}=kw(O),G=df(l),ee=L?{checked:L.value===z.value,name:z.name??L.name,onChange:ne=>{L.onChange(ne),R==null||R(ne)}}:{};return A.jsx(ZO,{...M("root"),__staticSelector:"Radio",__stylesApiProps:n,id:G,size:D,labelPosition:d,label:f,description:h,error:p,disabled:y,classNames:r,styles:o,unstyled:a,"data-checked":ee.checked||void 0,variant:b,ref:S,mod:I,...j,...x,children:A.jsxs(je,{...M("inner"),mod:{"label-position":d},children:[A.jsx(je,{...M("radio",{focusable:!0,variant:b}),onChange:R,...z,...ee,component:"input",mod:{error:!!p},ref:t,id:G,disabled:y,type:"radio"}),A.jsx(w,{...M("icon"),"aria-hidden":!0})]})})});ac.classes=Uye;ac.displayName="@mantine/core/Radio";ac.Group=jW;ac.Card=BW;ac.Indicator=UW;const LBe={duration:100,transition:"fade"};function FBe(e,t){return{...LBe,...t,...e}}function $Be({offset:e,position:t,defaultOpened:n}){const[r,i]=B.useState(n),s=B.useRef(null),{x:o,y:a,elements:u,refs:l,update:c,placement:f}=$q({placement:t,middleware:[Oq({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=B.useCallback(({clientX:m,clientY:g})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[u.reference]);return B.useEffect(()=>{if(l.floating.current){const m=s.current;m.addEventListener("mousemove",p);const g=Gy(l.floating.current);return g.forEach(b=>{b.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(b=>{b.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:l.setFloating}}var h9={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const BBe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:fd("popover")},jBe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:as(t),"--tooltip-bg":n?Fs(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),zW=Bt((e,t)=>{const n=dt("TooltipFloating",BBe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:b,disabled:y,defaultOpened:x,variant:w,vars:S,portalProps:C,...R}=n,I=Ga(),O=xn({name:"TooltipFloating",props:n,classes:h9,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:S,varsResolver:jBe}),{handleMouseMove:M,x:L,y:V,opened:D,boundaryRef:j,floating:z,setOpened:G}=$Be({offset:p,position:m,defaultOpened:x});if(!$b(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ee=vu(j,jO(r),t),ne=r.props,ue=W=>{var te;(te=ne.onMouseEnter)==null||te.call(ne,W),M(W),G(!0)},X=W=>{var te;(te=ne.onMouseLeave)==null||te.call(ne,W),G(!1)};return A.jsxs(A.Fragment,{children:[A.jsx(zb,{...C,withinPortal:s,children:A.jsx(je,{...R,...O("tooltip",{style:{...bq(o,I),zIndex:b,display:!y&&D?"block":"none",top:(V&&Math.round(V))??"",left:(L&&Math.round(L))??""}}),variant:w,ref:z,mod:{multiline:g},children:h})}),B.cloneElement(r,{...ne,[i]:ee,onMouseEnter:ue,onMouseLeave:X})]})});zW.classes=h9;zW.displayName="@mantine/core/TooltipFloating";const zye=B.createContext(!1),UBe=zye.Provider,zBe=()=>B.useContext(zye),VBe={openDelay:0,closeDelay:0};function VW(e){const{openDelay:t,closeDelay:n,children:r}=dt("TooltipGroup",VBe,e);return A.jsx(UBe,{value:!0,children:A.jsx(YMe,{delay:{open:t,close:n},children:r})})}VW.displayName="@mantine/core/TooltipGroup";VW.extend=e=>e;function HBe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function qBe(e){const t=HBe(e.middlewares),n=[hge(e.offset)];return t.shift&&n.push(Oq(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?f8():f8(t.flip)),n.push(pge({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?fk():fk(t.inline)):e.inline&&n.push(fk()),n}function WBe(e){var C,R,I;const[t,n]=B.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=zBe(),o=df(),{delay:a,currentId:u,setCurrentId:l}=vge(),c=B.useCallback(O=>{n(O),O&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:b,y}={}}}=$q({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:qBe(e)});KMe(h,{id:o});const{getReferenceProps:x,getFloatingProps:w}=nLe([GMe(h,{enabled:(C=e.events)==null?void 0:C.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((R=e.events)!=null&&R.touch)}),tLe(h,{enabled:(I=e.events)==null?void 0:I.focus,visibleOnly:!0}),iLe(h,{role:"tooltip"}),ZMe(h,{enabled:typeof e.opened>"u"})]);Cge({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),tg(()=>{var O;(O=e.onPositionChange)==null||O.call(e,g)},[g]);const S=i&&u&&u!==o;return{x:f,y:d,arrowX:b,arrowY:y,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:x,isGroupPhase:S,opened:i,placement:g}}const Fne={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:fd("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},GBe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:as(t),"--tooltip-bg":n?Fs(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Ys=Bt((e,t)=>{const n=dt("Tooltip",Fne,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:b,style:y,className:x,withArrow:w,arrowSize:S,arrowOffset:C,arrowRadius:R,arrowPosition:I,offset:O,transitionProps:M,multiline:L,events:V,zIndex:D,disabled:j,positionDependencies:z,onClick:G,onMouseEnter:ee,onMouseLeave:ne,inline:ue,variant:X,keepMounted:W,vars:te,portalProps:q,mod:J,floatingStrategy:oe,middlewares:de,...ce}=dt("Tooltip",Fne,n),{dir:pe}=Ub(),Ee=B.useRef(null),Ae=WBe({position:bge(pe,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:f,events:V,arrowRef:Ee,arrowOffset:C,offset:typeof O=="number"?O+(w?S/2:0):O,positionDependencies:[...z,r],inline:ue,strategy:oe,middlewares:de}),ge=xn({name:"Tooltip",props:n,classes:h9,className:x,style:y,classNames:m,styles:g,unstyled:b,rootSelector:"tooltip",vars:te,varsResolver:GBe});if(!$b(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const me=vu(Ae.reference,jO(r),t),Oe=FBe(M,{duration:100,transition:"fade"}),Me=r.props;return A.jsxs(A.Fragment,{children:[A.jsx(zb,{...q,withinPortal:d,children:A.jsx(bg,{...Oe,keepMounted:W,mounted:!j&&!!Ae.opened,duration:Ae.isGroupPhase?10:Oe.duration,children:Ye=>A.jsxs(je,{...ce,"data-fixed":oe==="fixed"||void 0,variant:X,mod:[{multiline:L},J],...Ae.getFloatingProps({ref:Ae.floating,className:ge("tooltip").className,style:{...ge("tooltip").style,...Ye,zIndex:D,top:Ae.y??0,left:Ae.x??0}}),children:[o,A.jsx(Bq,{ref:Ee,arrowX:Ae.arrowX,arrowY:Ae.arrowY,visible:w,position:Ae.placement,arrowSize:S,arrowOffset:C,arrowRadius:R,arrowPosition:I,...ge("arrow")})]})})}),B.cloneElement(r,Ae.getReferenceProps({onClick:G,onMouseEnter:ee,onMouseLeave:ne,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:me,className:ba(x,Me.className),...Me}))]})});Ys.classes=h9;Ys.displayName="@mantine/core/Tooltip";Ys.Floating=zW;Ys.Group=VW;const YBe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},AT=Bt((e,t)=>{const n=dt("Select",YBe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:b,selectFirstOptionOnChange:y,onOptionSubmit:x,comboboxProps:w,readOnly:S,disabled:C,filter:R,limit:I,withScrollArea:O,maxDropdownHeight:M,size:L,searchable:V,rightSection:D,checkIconPosition:j,withCheckIcon:z,nothingFoundMessage:G,name:ee,form:ne,searchValue:ue,defaultSearchValue:X,onSearchChange:W,allowDeselect:te,error:q,rightSectionPointerEvents:J,id:oe,clearable:de,clearButtonProps:ce,hiddenInputProps:pe,renderOption:Ee,onClear:Ae,autoComplete:ge,scrollAreaProps:me,__defaultRightSection:Oe,__clearSection:Me,__clearable:Ye,...lt}=n,We=B.useMemo(()=>Kge(m),[m]),nt=B.useMemo(()=>nW(We),[We]),yt=df(oe),[_t,It,Et]=ju({value:g,defaultValue:b,finalValue:null,onChange:p}),Ke=typeof _t=="string"?nt[_t]:void 0,Lt=tOe(Ke),[sn,Fe]=ju({value:ue,defaultValue:X,finalValue:Ke?Ke.label:"",onChange:W}),Qe=hW({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Qe.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Qe.resetSelectedOption()}}),{resolvedClassNames:wt,resolvedStyles:Vt}=Cw({props:n,styles:i,classNames:r});B.useEffect(()=>{y&&Qe.selectFirstOption()},[y,_t]),B.useEffect(()=>{g===null&&Fe(""),typeof g=="string"&&Ke&&((Lt==null?void 0:Lt.value)!==Ke.value||(Lt==null?void 0:Lt.label)!==Ke.label)&&Fe(Ke.label)},[g,Ke]);const Wt=A.jsx(di.ClearButton,{...ce,onClear:()=>{It(null,null),Fe(""),Ae==null||Ae()}});return A.jsxs(A.Fragment,{children:[A.jsxs(di,{store:Qe,__staticSelector:"Select",classNames:wt,styles:Vt,unstyled:s,readOnly:S,onOptionSubmit:bn=>{x==null||x(bn);const Dn=te&&nt[bn].value===_t?null:nt[bn],Zn=Dn?Dn.value:null;Zn!==_t&&It(Zn,Dn),!Et&&Fe(typeof Zn=="string"&&(Dn==null?void 0:Dn.label)||""),Qe.closeDropdown()},size:L,...w,children:[A.jsx(di.Target,{targetType:V?"input":"button",autoComplete:ge,children:A.jsx(cp,{id:yt,ref:t,__defaultRightSection:A.jsx(di.Chevron,{size:L,error:q,unstyled:s}),__clearSection:Wt,__clearable:de&&!!_t&&!C&&!S,rightSection:D,rightSectionPointerEvents:J||(Wt?"all":"none"),...lt,size:L,__staticSelector:"Select",disabled:C,readOnly:S||!V,value:sn,onChange:bn=>{Fe(bn.currentTarget.value),Qe.openDropdown(),y&&Qe.selectFirstOption()},onFocus:bn=>{V&&Qe.openDropdown(),f==null||f(bn)},onBlur:bn=>{var Dn;V&&Qe.closeDropdown(),Fe(_t!=null&&((Dn=nt[_t])==null?void 0:Dn.label)||""),d==null||d(bn)},onClick:bn=>{V?Qe.openDropdown():Qe.toggleDropdown(),h==null||h(bn)},classNames:wt,styles:Vt,unstyled:s,pointer:!V,error:q})}),A.jsx(hye,{data:We,hidden:S||C,filter:R,search:sn,limit:I,hiddenWhenEmpty:!G,withScrollArea:O,maxDropdownHeight:M,filterOptions:V&&(Ke==null?void 0:Ke.label)!==sn,value:_t,checkIconPosition:j,withCheckIcon:z,nothingFoundMessage:G,unstyled:s,labelId:lt.label?`${yt}-label`:void 0,"aria-label":lt.label?void 0:lt["aria-label"],renderOption:Ee,scrollAreaProps:me})]}),A.jsx(di.HiddenInput,{value:_t,name:ee,form:ne,disabled:C,...pe})]})});AT.classes={...cp.classes,...di.classes};AT.displayName="@mantine/core/Select";function KBe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=Ga(),s=t===void 0?e:t,o=Fb({"--sg-spacing-x":qa(d0(e)),"--sg-spacing-y":qa(d0(s)),"--sg-cols":(c=d0(n))==null?void 0:c.toString()}),a=Cs(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=qa(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=qa(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=Wk(Cs(a),i.breakpoints).filter(f=>Cs(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return A.jsx(Aw,{styles:o,media:l,selector:r})}function TF(e){return typeof e=="object"&&e!==null?Cs(e):[]}function XBe(e){return e.sort((t,n)=>qk(t)-qk(n))}function QBe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...TF(e),...TF(t),...TF(n)]));return XBe(r)}function JBe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Fb({"--sg-spacing-x":qa(d0(e)),"--sg-spacing-y":qa(d0(i)),"--sg-cols":(l=d0(n))==null?void 0:l.toString()}),o=QBe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=qa(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=qa(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return A.jsx(Aw,{styles:s,container:u,selector:r})}var Vye={container:"m_925c2d2c",root:"m_2415a157"};const ZBe={cols:1,spacing:"md",type:"media"},HW=Bt((e,t)=>{const n=dt("SimpleGrid",ZBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=xn({name:"SimpleGrid",classes:Vye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=oR();return d==="container"?A.jsxs(A.Fragment,{children:[A.jsx(JBe,{...n,selector:`.${m}`}),A.jsx("div",{...p("container"),children:A.jsx(je,{ref:t,...p("root",{className:m}),...h})})]}):A.jsxs(A.Fragment,{children:[A.jsx(KBe,{...n,selector:`.${m}`}),A.jsx(je,{ref:t,...p("root",{className:m}),...h})]})});HW.classes=Vye;HW.displayName="@mantine/core/SimpleGrid";const[eje,p9]=Rl("SliderProvider was not found in tree"),Hye=B.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=p9();return A.jsx(je,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});Hye.displayName="@mantine/core/SliderRoot";const qye=B.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},b)=>{const{getStyles:y}=p9(),[x,w]=B.useState(!1),S=l||s||x||h&&p;return A.jsxs(je,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:b,__vars:{"--slider-thumb-offset":`${r}%`},...y("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:C=>{w(!0),typeof f=="function"&&f(C)},onBlur:C=>{w(!1),typeof d=="function"&&d(C)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:C=>C.stopPropagation(),children:[m,A.jsx(bg,{mounted:i!=null&&!!S,transition:"fade",duration:0,...u,children:C=>A.jsx("div",{...y("label",{style:C}),children:i})})]})});qye.displayName="@mantine/core/SliderThumb";function Wye({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function tje({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function Gye({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=p9();if(!e)return null;const u=e.map((l,c)=>B.createElement(je,{...a("markWrapper"),__vars:{"--mark-offset":`${Wye({value:l.value,min:t,max:n})}%`},key:c},A.jsx(je,{...a("mark"),mod:{filled:tje({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&A.jsx("div",{...a("markLabel"),children:l.label})));return A.jsx("div",{children:u})}Gye.displayName="@mantine/core/SliderMarks";function Yye({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=p9();return A.jsx(je,{...u("trackContainer"),mod:{disabled:r},...o,children:A.jsxs(je,{...u("track"),mod:{inverted:s,disabled:r},children:[A.jsx(je,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,A.jsx(Gye,{...a,offset:i,disabled:r,inverted:s})]})})}Yye.displayName="@mantine/core/SliderTrack";function nje({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function h6(e,t){return parseFloat(e.toFixed(t))}function rje(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function CF(e,t){const r=[...t].sort((i,s)=>i.value-s.value).find(i=>i.value>e);return r?r.value:e}function AF(e,t){const r=[...t].sort((i,s)=>s.value-i.value).find(i=>i.value<e);return r?r.value:e}function $ne(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function Bne(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var Kye={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const ije={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},sje=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":_r(t,"slider-size"),"--slider-color":n?Fs(n,e):void 0,"--slider-radius":i===void 0?void 0:as(i),"--slider-thumb-size":r!==void 0?ot(r):"calc(var(--slider-size) * 2)"}}),m9=Bt((e,t)=>{const n=dt("Slider",ije,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:b,labelAlwaysOn:y,thumbLabel:x,showLabelOnHover:w,thumbChildren:S,disabled:C,unstyled:R,scale:I,inverted:O,className:M,style:L,vars:V,hiddenInputProps:D,restrictToMarks:j,thumbProps:z,...G}=n,ee=xn({name:"Slider",props:n,classes:Kye,classNames:r,className:M,styles:i,style:L,vars:V,varsResolver:sje,unstyled:R}),{dir:ne}=Ub(),[ue,X]=B.useState(!1),[W,te]=ju({value:typeof s=="number"?Rm(s,l,c):s,defaultValue:typeof h=="number"?Rm(h,l,c):h,finalValue:Rm(0,l,c),onChange:o}),q=B.useRef(W),J=B.useRef(null),oe=B.useRef(null),de=Wye({value:W,min:l,max:c}),ce=I(W),pe=typeof g=="function"?g(ce):g,Ee=d??rje(f),Ae=B.useCallback(({x:Me})=>{if(!C){const Ye=nje({value:Me,min:l,max:c,step:f,precision:Ee});te(j&&(m!=null&&m.length)?Fte(Ye,m.map(lt=>lt.value)):Ye),q.current=Ye}},[C,l,c,f,Ee,te,m,j]),{ref:ge,active:me}=JDe(Ae,{onScrubEnd:()=>a==null?void 0:a(j&&(m!=null&&m.length)?Fte(q.current,m.map(Me=>Me.value)):q.current)},ne),Oe=Me=>{var Ye,lt,We,nt,yt,_t;if(!C)switch(Me.key){case"ArrowUp":{if(Me.preventDefault(),(Ye=oe.current)==null||Ye.focus(),j&&m){const Et=CF(W,m);te(Et),a==null||a(Et);break}const It=h6(Math.min(Math.max(W+f,l),c),Ee);te(It),a==null||a(It);break}case"ArrowRight":{if(Me.preventDefault(),(lt=oe.current)==null||lt.focus(),j&&m){const Et=ne==="rtl"?AF(W,m):CF(W,m);te(Et),a==null||a(Et);break}const It=h6(Math.min(Math.max(ne==="rtl"?W-f:W+f,l),c),Ee);te(It),a==null||a(It);break}case"ArrowDown":{if(Me.preventDefault(),(We=oe.current)==null||We.focus(),j&&m){const Et=AF(W,m);te(Et),a==null||a(Et);break}const It=h6(Math.min(Math.max(W-f,l),c),Ee);te(It),a==null||a(It);break}case"ArrowLeft":{if(Me.preventDefault(),(nt=oe.current)==null||nt.focus(),j&&m){const Et=ne==="rtl"?CF(W,m):AF(W,m);te(Et),a==null||a(Et);break}const It=h6(Math.min(Math.max(ne==="rtl"?W+f:W-f,l),c),Ee);te(It),a==null||a(It);break}case"Home":{if(Me.preventDefault(),(yt=oe.current)==null||yt.focus(),j&&m){te($ne(m)),a==null||a($ne(m));break}te(l),a==null||a(l);break}case"End":{if(Me.preventDefault(),(_t=oe.current)==null||_t.focus(),j&&m){te(Bne(m)),a==null||a(Bne(m));break}te(c),a==null||a(c);break}}};return A.jsx(eje,{value:{getStyles:ee},children:A.jsxs(Hye,{...G,ref:vu(t,J),onKeyDownCapture:Oe,onMouseDownCapture:()=>{var Me;return(Me=J.current)==null?void 0:Me.focus()},size:u,disabled:C,children:[A.jsx(Yye,{inverted:O,offset:0,filled:de,marks:m,min:l,max:c,value:ce,disabled:C,containerProps:{ref:ge,onMouseEnter:w?()=>X(!0):void 0,onMouseLeave:w?()=>X(!1):void 0},children:A.jsx(qye,{max:c,min:l,value:ce,position:de,dragging:me,label:pe,ref:oe,labelTransitionProps:b,labelAlwaysOn:y,thumbLabel:x,showLabelOnHover:w,isHovered:ue,disabled:C,...z,children:S})}),A.jsx("input",{type:"hidden",name:p,value:ce,...D})]})})});m9.classes=Kye;m9.displayName="@mantine/core/Slider";const oje={},eh=Bt((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=dt("Space",oje,e);return A.jsx(je,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});eh.displayName="@mantine/core/Space";var Xye={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const aje={maxHeight:100,initialState:!1},uje=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),qW=Bt((e,t)=>{const n=dt("Spoiler",aje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,expanded:b,onExpandedChange:y,...x}=n,w=xn({name:"Spoiler",classes:Xye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uje}),S=df(g),C=`${S}-region`,[R,I]=ju({value:b,defaultValue:l,finalValue:!1,onChange:y}),{ref:O,height:M}=eOe(),L=R?f:d,V=L!==null&&c<M;return A.jsxs(je,{...w("root"),id:S,ref:t,"data-has-spoiler":V||void 0,...x,children:[V&&A.jsx(Iw,{component:"button",type:"button",ref:p,onClick:()=>I(!R),"aria-expanded":R,"aria-controls":C,...w("control"),children:L}),A.jsx("div",{...w("content",{style:{maxHeight:R?M?ot(M):void 0:ot(c)}}),"data-reduce-motion":!0,role:"region",id:C,children:A.jsx("div",{ref:O,children:h})})]})});qW.classes=Xye;qW.displayName="@mantine/core/Spoiler";var Qye={root:"m_6d731127"};const lje={gap:"md",align:"stretch",justify:"flex-start"},cje=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":qa(t),"--stack-align":n,"--stack-justify":r}}),El=Bt((e,t)=>{const n=dt("Stack",lje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=xn({name:"Stack",props:n,classes:Qye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cje});return A.jsx(je,{ref:t,...p("root"),variant:d,...h})});El.classes=Qye;El.displayName="@mantine/core/Stack";const Jye=B.createContext(null),fje=Jye.Provider,dje=()=>B.useContext(Jye),hje={},WW=Bt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=dt("SwitchGroup",hje,e),[c,f]=ju({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return A.jsx(fje,{value:{value:c,onChange:d,size:s},children:A.jsx(ys.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:A.jsx(mW,{role:"group",children:a})})})});WW.classes=ys.Wrapper.classes;WW.displayName="@mantine/core/SwitchGroup";var Zye={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const pje={labelPosition:"right"},mje=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:as(t),"--switch-height":_r(r,"switch-height"),"--switch-width":_r(r,"switch-width"),"--switch-thumb-size":_r(r,"switch-thumb-size"),"--switch-label-font-size":_r(r,"switch-label-font-size"),"--switch-track-label-padding":_r(r,"switch-track-label-padding"),"--switch-color":n?Fs(n,e):void 0}}),N_=Bt((e,t)=>{const n=dt("Switch",pje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,thumbIcon:b,checked:y,defaultChecked:x,onChange:w,labelPosition:S,description:C,error:R,disabled:I,variant:O,rootRef:M,mod:L,...V}=n,D=dje(),j=p||(D==null?void 0:D.size),z=xn({name:"Switch",props:n,classes:Zye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mje}),{styleProps:G,rest:ee}=kw(V),ne=df(h),ue=D?{checked:D.value.includes(ee.value),onChange:D.onChange}:{},[X,W]=ju({value:ue.checked??y,defaultValue:x,finalValue:!1});return A.jsxs(ZO,{...z("root"),__staticSelector:"Switch",__stylesApiProps:n,id:ne,size:j,labelPosition:S,label:c,description:C,error:R,disabled:I,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":ue.checked||y||void 0,variant:O,ref:M,mod:L,...G,...g,children:[A.jsx("input",{...ee,disabled:I,checked:X,"data-checked":ue.checked||y||void 0,onChange:te=>{var q;D?(q=ue.onChange)==null||q.call(ue,te):w==null||w(te),W(te.currentTarget.checked)},id:ne,ref:t,type:"checkbox",role:"switch",...z("input")}),A.jsxs(je,{"aria-hidden":"true",mod:{error:R,"label-position":S,"without-labels":!d&&!f},...z("track"),children:[A.jsx(je,{component:"span",mod:"reduce-motion",...z("thumb"),children:b}),A.jsx("span",{...z("trackLabel"),children:X?d:f})]})]})});N_.classes={...Zye,...nye};N_.displayName="@mantine/core/Switch";N_.Group=WW;const[gje,yje]=Rl("Table component was not found in the tree");var pR={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function vje(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Pw(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Bt((i,s)=>{const o=dt(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=yje();return A.jsx(je,{component:e,ref:s,...vje(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=pR,r}const pU=Pw("th",{columnBorder:!0}),e1e=Pw("td",{columnBorder:!0}),TP=Pw("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),t1e=Pw("thead",{stickyHeader:!0}),n1e=Pw("tbody"),r1e=Pw("tfoot"),i1e=Pw("caption",{captionSide:!0});function GW({data:e}){return A.jsxs(A.Fragment,{children:[e.caption&&A.jsx(i1e,{children:e.caption}),e.head&&A.jsx(t1e,{children:A.jsx(TP,{children:e.head.map((t,n)=>A.jsx(pU,{children:t},n))})}),e.body&&A.jsx(n1e,{children:e.body.map((t,n)=>A.jsx(TP,{children:t.map((r,i)=>A.jsx(e1e,{children:r},i))},n))}),e.foot&&A.jsx(r1e,{children:A.jsx(TP,{children:e.foot.map((t,n)=>A.jsx(pU,{children:t},n))})})]})}GW.displayName="@mantine/core/TableDataRenderer";const bje={type:"scrollarea"},xje=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":ot(t),"--table-overflow":n==="native"?"auto":void 0}}),YW=Bt((e,t)=>{const n=dt("TableScrollContainer",bje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=xn({name:"TableScrollContainer",classes:pR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xje,rootSelector:"scrollContainer"});return A.jsx(je,{component:f==="scrollarea"?a1:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:A.jsx("div",{...h("scrollContainerInner"),children:l})})});YW.classes=pR;YW.displayName="@mantine/core/TableScrollContainer";const _je={withRowBorders:!0,verticalSpacing:7},wje=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":qa(r),"--table-vertical-spacing":qa(i),"--table-border-color":s?Fs(s,e):void 0,"--table-striped-color":u&&o?Fs(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Fs(a,e):void 0,"--table-sticky-header-offset":f?ot(c):void 0}}),zn=Bt((e,t)=>{const n=dt("Table",_je,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:b,withTableBorder:y,borderColor:x,layout:w,variant:S,data:C,children:R,stickyHeader:I,stickyHeaderOffset:O,mod:M,tabularNums:L,...V}=n,D=xn({name:"Table",props:n,className:i,style:s,classes:pR,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:wje});return A.jsx(gje,{value:{getStyles:D,stickyHeader:I,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:b,captionSide:f||"bottom"},children:A.jsx(je,{component:"table",variant:S,ref:t,mod:[{"data-with-table-border":y,"data-tabular-nums":L},M],...D("table"),...V,children:R||!!C&&A.jsx(GW,{data:C})})})});zn.classes=pR;zn.displayName="@mantine/core/Table";zn.Td=e1e;zn.Th=pU;zn.Tr=TP;zn.Thead=t1e;zn.Tbody=n1e;zn.Tfoot=r1e;zn.Caption=i1e;zn.ScrollContainer=YW;zn.DataRenderer=GW;const[Eje,KW]=Rl("Tabs component was not found in the tree");var mR={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const Sje={},XW=Bt((e,t)=>{const n=dt("TabsList",Sje,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=KW();return A.jsx(je,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});XW.classes=mR;XW.displayName="@mantine/core/TabsList";const Tje={},QW=Bt((e,t)=>{const n=dt("TabsPanel",Tje,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,keepMounted:c,...f}=n,d=KW(),h=d.value===s,p=d.keepMounted||c||h?r:null;return A.jsx(je,{...f,...d.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,h?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},l],role:"tabpanel",id:d.getPanelId(s),"aria-labelledby":d.getTabId(s),children:p})});QW.classes=mR;QW.displayName="@mantine/core/TabsPanel";const Cje={},JW=Bt((e,t)=>{const n=dt("TabsTab",Cje,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,tabIndex:b,...y}=n,x=Ga(),{dir:w}=Ub(),S=KW(),C=a===S.value,R=O=>{S.onChange(S.allowTabDeactivation&&a===S.value?null:a),u==null||u(O)},I={classNames:h,styles:p,props:n};return A.jsxs(sh,{...y,...S.getStyles("tab",{className:r,style:d,variant:S.variant,...I}),disabled:c,unstyled:S.unstyled,variant:S.variant,mod:[{active:C,disabled:c,orientation:S.orientation,inverted:S.inverted,placement:S.orientation==="vertical"&&S.placement},g],ref:t,role:"tab",id:S.getTabId(a),"aria-selected":C,tabIndex:b||C||S.value===null?0:-1,"aria-controls":S.getPanelId(a),onClick:R,__vars:{"--tabs-color":f?Fs(f,x):void 0},onKeyDown:cq({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:S.activateTabWithKeyboard,loop:S.loop,orientation:S.orientation||"horizontal",dir:w,onKeyDown:l}),children:[o&&A.jsx("span",{...S.getStyles("tabSection",I),"data-position":"left",children:o}),i&&A.jsx("span",{...S.getStyles("tabLabel",I),children:i}),s&&A.jsx("span",{...S.getStyles("tabSection",I),"data-position":"right",children:s})]})});JW.classes=mR;JW.displayName="@mantine/core/TabsTab";const jne="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Aje={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},kje=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":as(t),"--tabs-color":Fs(n,e),"--tabs-text-color":pT(r,e)?Tw({color:n,theme:e,autoContrast:r}):void 0}}),ci=Bt((e,t)=>{const n=dt("Tabs",Aje,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:b,classNames:y,styles:x,unstyled:w,className:S,style:C,vars:R,autoContrast:I,mod:O,...M}=n,L=df(l),[V,D]=ju({value:i,defaultValue:r,finalValue:null,onChange:s}),j=xn({name:"Tabs",props:n,classes:mR,className:S,style:C,classNames:y,styles:x,unstyled:w,vars:R,varsResolver:kje});return A.jsx(Eje,{value:{placement:g,value:V,orientation:o,id:L,loop:u,activateTabWithKeyboard:c,getTabId:r8(`${L}-tab`,jne),getPanelId:r8(`${L}-panel`,jne),onChange:D,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:b,unstyled:w,getStyles:j},children:A.jsx(je,{ref:t,id:L,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},O],...j("root"),...M,children:a})})});ci.classes=mR;ci.displayName="@mantine/core/Tabs";ci.Tab=JW;ci.Panel=QW;ci.List=XW;const Rje={},Fy=Bt((e,t)=>{const n=dt("TextInput",Rje,e);return A.jsx(cp,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Fy.classes=cp.classes;Fy.displayName="@mantine/core/TextInput";const Ije=["h1","h2","h3","h4","h5","h6"],Pje=["xs","sm","md","lg","xl"];function Nje(e,t){const n=t!==void 0?t:`h${e}`;return Ije.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:Pje.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:ot(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var s1e={root:"m_8a5d1357"};const Dje={order:1},Oje=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=Nje(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},co=Bt((e,t)=>{const n=dt("Title",Dje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=xn({name:"Title",props:n,classes:s1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Oje});return[1,2,3,4,5,6].includes(u)?A.jsx(je,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});co.classes=s1e;co.displayName="@mantine/core/Title";function Mje(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function Lje(e){return B.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Fje(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const $je=()=>Mje({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Nw=$je(),Bje=(e=Nw)=>Lje(e);function kT(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=Fje(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function jje(e,t=Nw){const n=e.id||jE();return kT(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function o1e(e,t=Nw){return kT(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function Uje(e,t=Nw){return kT(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function zje(e=Nw){kT(e,()=>[])}function Vje(e=Nw){kT(e,t=>t.slice(0,e.getState().limit))}const Dw={show:jje,hide:o1e,update:Uje,clean:zje,cleanQueue:Vje,updateState:kT};function mU(){return mU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mU.apply(null,arguments)}function a1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function gU(e,t){return gU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},gU(e,t)}function u1e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,gU(e,t)}var kF={exports:{}},RF,Une;function Hje(){if(Une)return RF;Une=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return RF=e,RF}var IF,zne;function qje(){if(zne)return IF;zne=1;var e=Hje();function t(){}function n(){}return n.resetWarningCache=t,IF=function(){function r(o,a,u,l,c,f){if(f!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},IF}var Vne;function Wje(){return Vne||(Vne=1,kF.exports=qje()()),kF.exports}var Gje=Wje();const Hne=gc(Gje),qne={disabled:!1},h8=sr.createContext(null);var Yje=function(t){return t.scrollTop},T3="unmounted",n_="exited",r_="entering",yE="entered",yU="exiting",P1=function(e){u1e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=n_,s.appearStatus=r_):u=yE:r.unmountOnExit||r.mountOnEnter?u=T3:u=n_,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===T3?{status:n_}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==r_&&o!==yE&&(s=r_):(o===r_||o===yE)&&(s=yU)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===r_){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:S3.findDOMNode(this);o&&Yje(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===n_&&this.setState({status:T3})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[S3.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||qne.disabled){this.safeSetState({status:yE},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:r_},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:yE},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:S3.findDOMNode(this);if(!s||qne.disabled){this.safeSetState({status:n_},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:yU},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:n_},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:S3.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===T3)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=a1e(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return sr.createElement(h8.Provider,{value:null},typeof o=="function"?o(i,a):sr.cloneElement(sr.Children.only(o),a))},t}(sr.Component);P1.contextType=h8;P1.propTypes={};function G2(){}P1.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:G2,onEntering:G2,onEntered:G2,onExit:G2,onExiting:G2,onExited:G2};P1.UNMOUNTED=T3;P1.EXITED=n_;P1.ENTERING=r_;P1.ENTERED=yE;P1.EXITING=yU;function Kje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZW(e,t){var n=function(s){return t&&B.isValidElement(s)?t(s):s},r=Object.create(null);return e&&B.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Xje(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function w_(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Qje(e,t){return ZW(e.children,function(n){return B.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:w_(n,"appear",e),enter:w_(n,"enter",e),exit:w_(n,"exit",e)})})}function Jje(e,t,n){var r=ZW(e.children),i=Xje(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(B.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=B.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=B.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:w_(o,"exit",e),enter:w_(o,"enter",e)}):!u&&a&&!c?i[s]=B.cloneElement(o,{in:!1}):u&&a&&B.isValidElement(l)&&(i[s]=B.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:w_(o,"exit",e),enter:w_(o,"enter",e)}))}}),i}var Zje=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},eUe={component:"div",childFactory:function(t){return t}},Tv=function(e){u1e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(Kje(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?Qje(i,a):Jje(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=ZW(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=mU({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=a1e(i,["component","childFactory"]),u=this.state.contextValue,l=Zje(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?sr.createElement(h8.Provider,{value:u},l):sr.createElement(h8.Provider,{value:u},sr.createElement(s,a,l))},t}(sr.Component);Tv.propTypes={};Tv.defaultProps=eUe;const l1e=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function tUe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),l1e.reduce((n,r)=>(n[r]=[],n),{}))}const Wne={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},nUe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function rUe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Wne[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:nUe[o]},l={opacity:0,maxHeight:0,transform:Wne[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function iUe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const c1e=B.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=iUe(n,e.autoClose),l=B.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return B.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),B.useEffect(()=>(d(),c),[u]),A.jsx(MW,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});c1e.displayName="@mantine/notifications/NotificationContainer";var f1e={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const sUe=P1,oUe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:fd("overlay"),store:Nw,withinPortal:!0},aUe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":ot(n)}}),N1=Bt((e,t)=>{const n=dt("Notifications",oUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:b,withinPortal:y,...x}=n,w=Ga(),S=Bje(g),C=KDe(),R=BO(),I=B.useRef({}),O=B.useRef(0),L=(w.respectReducedMotion?R:!1)?1:f,V=xn({name:"Notifications",classes:f1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aUe});B.useEffect(()=>{g==null||g.updateState(z=>({...z,limit:p||5,defaultPosition:l}))},[p,l]),tg(()=>{S.notifications.length>O.current&&setTimeout(()=>C(),0),O.current=S.notifications.length},[S.notifications]);const D=tUe(S.notifications,l),j=l1e.reduce((z,G)=>(z[G]=D[G].map(({style:ee,...ne})=>A.jsx(sUe,{timeout:L,onEnter:()=>I.current[ne.id].offsetHeight,nodeRef:{current:I.current[ne.id]},children:ue=>A.jsx(c1e,{ref:X=>{I.current[ne.id]=X},data:ne,onHide:X=>o1e(X,g),autoClose:c,...V("notification",{style:{...rUe({state:ue,position:G,transitionDuration:L,maxHeight:h}),...ee}})})},ne.id)),z),{});return A.jsxs(zb,{withinPortal:y,...b,children:[A.jsx(je,{...V("root"),"data-position":"top-center",ref:t,...x,children:A.jsx(Tv,{children:j["top-center"]})}),A.jsx(je,{...V("root"),"data-position":"top-left",...x,children:A.jsx(Tv,{children:j["top-left"]})}),A.jsx(je,{...V("root",{className:dS.classNames.fullWidth}),"data-position":"top-right",...x,children:A.jsx(Tv,{children:j["top-right"]})}),A.jsx(je,{...V("root",{className:dS.classNames.fullWidth}),"data-position":"bottom-right",...x,children:A.jsx(Tv,{children:j["bottom-right"]})}),A.jsx(je,{...V("root"),"data-position":"bottom-left",...x,children:A.jsx(Tv,{children:j["bottom-left"]})}),A.jsx(je,{...V("root"),"data-position":"bottom-center",...x,children:A.jsx(Tv,{children:j["bottom-center"]})})]})});N1.classes=f1e;N1.displayName="@mantine/notifications/Notifications";N1.show=Dw.show;N1.hide=Dw.hide;N1.update=Dw.update;N1.clean=Dw.clean;N1.cleanQueue=Dw.cleanQueue;N1.updateState=Dw.updateState;const d1e=B.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Ko=()=>B.useContext(d1e);function uUe({children:e}){const[t,n]=B.useState(void 0),r=B.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return A.jsx(d1e.Provider,{value:r,children:e})}var KC={},Gne;function lUe(){if(Gne)return KC;Gne=1,Object.defineProperty(KC,"__esModule",{value:!0}),KC.parse=o,KC.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function o(d,h){const p=new s,m=d.length;if(m<2)return p;const g=(h==null?void 0:h.decode)||c;let b=0;do{const y=d.indexOf("=",b);if(y===-1)break;const x=d.indexOf(";",b),w=x===-1?m:x;if(y>w){b=d.lastIndexOf(";",y-1)+1;continue}const S=a(d,b,y),C=u(d,y,S),R=d.slice(S,C);if(p[R]===void 0){let I=a(d,y+1,w),O=u(d,w,I);const M=g(d.slice(I,O));p[R]=M}b=w+1}while(b<m);return p}function a(d,h,p){do{const m=d.charCodeAt(h);if(m!==32&&m!==9)return h}while(++h<p);return p}function u(d,h,p){for(;h>p;){const m=d.charCodeAt(--h);if(m!==32&&m!==9)return h+1}return p}function l(d,h,p){const m=(p==null?void 0:p.encode)||encodeURIComponent;if(!e.test(d))throw new TypeError(`argument name is invalid: ${d}`);const g=m(h);if(!t.test(g))throw new TypeError(`argument val is invalid: ${h}`);let b=d+"="+g;if(!p)return b;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);b+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);b+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);b+="; Path="+p.path}if(p.expires){if(!f(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);b+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(b+="; HttpOnly"),p.secure&&(b+="; Secure"),p.partitioned&&(b+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return b}function c(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function f(d){return i.call(d)==="[object Date]"}return KC}lUe();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Yne="popstate";function cUe(e={}){function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return vU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Jk(i)}return dUe(t,n,null,e)}function ho(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ep(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fUe(){return Math.random().toString(36).substring(2,10)}function Kne(e,t){return{usr:e.state,key:e.key,idx:t}}function vU(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?RT(t):t,state:n,key:t&&t.key||r||fUe()}}function Jk({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function RT(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function dUe(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,l=c();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let g=c(),b=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:b})}function d(g,b){a="PUSH";let y=vU(m.location,g,b);l=c()+1;let x=Kne(y,l),w=m.createHref(y);try{o.pushState(x,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,b){a="REPLACE";let y=vU(m.location,g,b);l=c();let x=Kne(y,l),w=m.createHref(y);o.replaceState(x,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let b=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof g=="string"?g:Jk(g);return y=y.replace(/ $/,"%20"),ho(b,`No window.location.(origin|href) available to create URL for href: ${y}`),new URL(y,b)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Yne,f),u=g,()=>{i.removeEventListener(Yne,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let b=p(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}function h1e(e,t,n="/"){return hUe(e,t,n,!1)}function hUe(e,t,n,r){let i=typeof t=="string"?RT(t):t,s=cb(i.pathname||"/",n);if(s==null)return null;let o=p1e(e);pUe(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let l=TUe(s);a=EUe(o[u],l,r)}return a}function p1e(e,t=[],n=[],r=""){let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(ho(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let l=Ky([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(ho(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),p1e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:_Ue(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of m1e(s.path))i(s,o,u)}),t}function m1e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=m1e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function pUe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:wUe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var mUe=/^:[\w-]+$/,gUe=3,yUe=2,vUe=1,bUe=10,xUe=-2,Xne=e=>e==="*";function _Ue(e,t){let n=e.split("/"),r=n.length;return n.some(Xne)&&(r+=xUe),t&&(r+=yUe),n.filter(i=>!Xne(i)).reduce((i,s)=>i+(mUe.test(s)?gUe:s===""?vUe:bUe),r)}function wUe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function EUe(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",f=p8({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=p8({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Ky([s,f.pathname]),pathnameBase:RUe(Ky([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=Ky([s,f.pathnameBase]))}return o}function p8(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=SUe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:c,isOptional:f},d)=>{if(c==="*"){let p=a[d]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[d];return f&&!h?l[c]=void 0:l[c]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function SUe(e,t=!1,n=!0){ep(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function TUe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ep(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function cb(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function CUe(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?RT(e):e;return{pathname:n?n.startsWith("/")?n:AUe(n,t):t,search:IUe(r),hash:PUe(i)}}function AUe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function PF(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kUe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function eG(e){let t=kUe(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function tG(e,t,n,r=!1){let i;typeof e=="string"?i=RT(e):(i={...e},ho(!i.pathname||!i.pathname.includes("?"),PF("?","pathname","search",i)),ho(!i.pathname||!i.pathname.includes("#"),PF("#","pathname","hash",i)),ho(!i.search||!i.search.includes("#"),PF("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=CUe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}var Ky=e=>e.join("/").replace(/\/\/+/g,"/"),RUe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),IUe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,PUe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function NUe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var g1e=["POST","PUT","PATCH","DELETE"];new Set(g1e);var DUe=["GET",...g1e];new Set(DUe);var IT=B.createContext(null);IT.displayName="DataRouter";var g9=B.createContext(null);g9.displayName="DataRouterState";var y1e=B.createContext({isTransitioning:!1});y1e.displayName="ViewTransition";var OUe=B.createContext(new Map);OUe.displayName="Fetchers";var MUe=B.createContext(null);MUe.displayName="Await";var L0=B.createContext(null);L0.displayName="Navigation";var gR=B.createContext(null);gR.displayName="Location";var dp=B.createContext({outlet:null,matches:[],isDataRoute:!1});dp.displayName="Route";var nG=B.createContext(null);nG.displayName="RouteError";function rG(e,{relative:t}={}){ho(PT(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=B.useContext(L0),{hash:i,pathname:s,search:o}=yR(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:Ky([n,s])),r.createHref({pathname:a,search:o,hash:i})}function PT(){return B.useContext(gR)!=null}function hp(){return ho(PT(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(gR).location}var v1e="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function b1e(e){B.useContext(L0).static||B.useLayoutEffect(e)}function F0(){let{isDataRoute:e}=B.useContext(dp);return e?KUe():LUe()}function LUe(){ho(PT(),"useNavigate() may be used only in the context of a <Router> component.");let e=B.useContext(IT),{basename:t,navigator:n}=B.useContext(L0),{matches:r}=B.useContext(dp),{pathname:i}=hp(),s=JSON.stringify(eG(r)),o=B.useRef(!1);return b1e(()=>{o.current=!0}),B.useCallback((u,l={})=>{if(ep(o.current,v1e),!o.current)return;if(typeof u=="number"){n.go(u);return}let c=tG(u,JSON.parse(s),i,l.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:Ky([t,c.pathname])),(l.replace?n.replace:n.push)(c,l.state,l)},[t,n,s,i,e])}var FUe=B.createContext(null);function $Ue(e){let t=B.useContext(dp).outlet;return t&&B.createElement(FUe.Provider,{value:e},t)}function ig(){let{matches:e}=B.useContext(dp),t=e[e.length-1];return t?t.params:{}}function yR(e,{relative:t}={}){let{matches:n}=B.useContext(dp),{pathname:r}=hp(),i=JSON.stringify(eG(n));return B.useMemo(()=>tG(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function x1e(e,t){return _1e(e,t)}function _1e(e,t,n,r){var b;ho(PT(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=B.useContext(L0),{matches:s}=B.useContext(dp),o=s[s.length-1],a=o?o.params:{},u=o?o.pathname:"/",l=o?o.pathnameBase:"/",c=o&&o.route;{let y=c&&c.path||"";w1e(u,!c||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=hp(),d;if(t){let y=typeof t=="string"?RT(t):t;ho(l==="/"||((b=y.pathname)==null?void 0:b.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${y.pathname}" was given in the \`location\` prop.`),d=y}else d=f;let h=d.pathname||"/",p=h;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=h1e(e,{pathname:p});ep(c||m!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),ep(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=VUe(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Ky([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Ky([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n,r);return t&&g?B.createElement(gR.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},g):g}function BUe(){let e=YUe(),t=NUe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=B.createElement(B.Fragment,null,B.createElement("p",null,"💿 Hey developer 👋"),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:s},"ErrorBoundary")," or"," ",B.createElement("code",{style:s},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},t),n?B.createElement("pre",{style:i},n):null,o)}var jUe=B.createElement(BUe,null),UUe=class extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?B.createElement(dp.Provider,{value:this.props.routeContext},B.createElement(nG.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zUe({routeContext:e,match:t,children:n}){let r=B.useContext(IT);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),B.createElement(dp.Provider,{value:e},n)}function VUe(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id])!==void 0);ho(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let l=i[u];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=u),l.route.id){let{loaderData:c,errors:f}=n,d=l.route.loader&&!c.hasOwnProperty(l.route.id)&&(!f||f[l.route.id]===void 0);if(l.route.lazy||d){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,l,c)=>{let f,d=!1,h=null,p=null;n&&(f=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||jUe,o&&(a<0&&c===0?(w1e("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):a===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let m=t.concat(i.slice(0,c+1)),g=()=>{let b;return f?b=h:d?b=p:l.route.Component?b=B.createElement(l.route.Component,null):l.route.element?b=l.route.element:b=u,B.createElement(zUe,{match:l,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:b})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?B.createElement(UUe,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}function iG(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HUe(e){let t=B.useContext(IT);return ho(t,iG(e)),t}function qUe(e){let t=B.useContext(g9);return ho(t,iG(e)),t}function WUe(e){let t=B.useContext(dp);return ho(t,iG(e)),t}function sG(e){let t=WUe(e),n=t.matches[t.matches.length-1];return ho(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function GUe(){return sG("useRouteId")}function YUe(){var r;let e=B.useContext(nG),t=qUe("useRouteError"),n=sG("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function KUe(){let{router:e}=HUe("useNavigate"),t=sG("useNavigate"),n=B.useRef(!1);return b1e(()=>{n.current=!0}),B.useCallback(async(i,s={})=>{ep(n.current,v1e),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var Qne={};function w1e(e,t,n){!t&&!Qne[e]&&(Qne[e]=!0,ep(!1,n))}B.memo(XUe);function XUe({routes:e,future:t,state:n}){return _1e(e,void 0,n,t)}function oG({to:e,replace:t,state:n,relative:r}){ho(PT(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=B.useContext(L0);ep(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=B.useContext(dp),{pathname:o}=hp(),a=F0(),u=tG(e,eG(s),o,r==="path"),l=JSON.stringify(u);return B.useEffect(()=>{a(JSON.parse(l),{replace:t,state:n,relative:r})},[a,l,r,t,n]),null}function QUe(e){return $Ue(e.context)}function i_(e){ho(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JUe({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){ho(!PT(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=B.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=RT(n));let{pathname:u="/",search:l="",hash:c="",state:f=null,key:d="default"}=n,h=B.useMemo(()=>{let p=cb(u,o);return p==null?null:{location:{pathname:p,search:l,hash:c,state:f,key:d},navigationType:r}},[o,u,l,c,f,d,r]);return ep(h!=null,`<Router basename="${o}"> is not able to match the URL "${u}${l}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:B.createElement(L0.Provider,{value:a},B.createElement(gR.Provider,{children:t,value:h}))}function ZUe({children:e,location:t}){return x1e(bU(e),t)}function bU(e,t=[]){let n=[];return B.Children.forEach(e,(r,i)=>{if(!B.isValidElement(r))return;let s=[...t,i];if(r.type===B.Fragment){n.push.apply(n,bU(r.props.children,s));return}ho(r.type===i_,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ho(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=bU(r.props.children,s)),n.push(o)}),n}var CP="get",AP="application/x-www-form-urlencoded";function y9(e){return e!=null&&typeof e.tagName=="string"}function eze(e){return y9(e)&&e.tagName.toLowerCase()==="button"}function tze(e){return y9(e)&&e.tagName.toLowerCase()==="form"}function nze(e){return y9(e)&&e.tagName.toLowerCase()==="input"}function rze(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ize(e,t){return e.button===0&&(!t||t==="_self")&&!rze(e)}function xU(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function sze(e,t){let n=xU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var p6=null;function oze(){if(p6===null)try{new FormData(document.createElement("form"),0),p6=!1}catch{p6=!0}return p6}var aze=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function NF(e){return e!=null&&!aze.has(e)?(ep(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${AP}"`),null):e}function uze(e,t){let n,r,i,s,o;if(tze(e)){let a=e.getAttribute("action");r=a?cb(a,t):null,n=e.getAttribute("method")||CP,i=NF(e.getAttribute("enctype"))||AP,s=new FormData(e)}else if(eze(e)||nze(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||a.getAttribute("action");if(r=u?cb(u,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||CP,i=NF(e.getAttribute("formenctype"))||NF(a.getAttribute("enctype"))||AP,s=new FormData(a,e),!oze()){let{name:l,type:c,value:f}=e;if(c==="image"){let d=l?`${l}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else l&&s.append(l,f)}}else{if(y9(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=CP,r=null,i=AP,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function aG(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function lze(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cze(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function fze(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await lze(s,n);return o.links?o.links():[]}return[]}));return mze(r.flat(1).filter(cze).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Jne(e,t,n,r,i,s){let o=(u,l)=>n[l]?u.route.id!==n[l].route.id:!0,a=(u,l)=>{var c;return n[l].pathname!==u.pathname||((c=n[l].route.path)==null?void 0:c.endsWith("*"))&&n[l].params["*"]!==u.params["*"]};return s==="assets"?t.filter((u,l)=>o(u,l)||a(u,l)):s==="data"?t.filter((u,l)=>{var f;let c=r.routes[u.route.id];if(!c||!c.hasLoader)return!1;if(o(u,l)||a(u,l))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function dze(e,t){return hze(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function hze(e){return[...new Set(e)]}function pze(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function mze(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(pze(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function gze(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function yze(){let e=B.useContext(IT);return aG(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function vze(){let e=B.useContext(g9);return aG(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var uG=B.createContext(void 0);uG.displayName="FrameworkContext";function E1e(){let e=B.useContext(uG);return aG(e,"You must render this element inside a <HydratedRouter> element"),e}function bze(e,t){let n=B.useContext(uG),[r,i]=B.useState(!1),[s,o]=B.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:l,onMouseLeave:c,onTouchStart:f}=t,d=B.useRef(null);B.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=b=>{b.forEach(y=>{o(y.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return d.current&&g.observe(d.current),()=>{g.disconnect()}}},[e]),B.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,d,{}]:[s,d,{onFocus:XC(a,h),onBlur:XC(u,p),onMouseEnter:XC(l,h),onMouseLeave:XC(c,p),onTouchStart:XC(f,h)}]:[!1,d,{}]}function XC(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function xze({page:e,...t}){let{router:n}=yze(),r=B.useMemo(()=>h1e(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?B.createElement(wze,{page:e,matches:r,...t}):null}function _ze(e){let{manifest:t,routeModules:n}=E1e(),[r,i]=B.useState([]);return B.useEffect(()=>{let s=!1;return fze(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function wze({page:e,matches:t,...n}){let r=hp(),{manifest:i,routeModules:s}=E1e(),{loaderData:o,matches:a}=vze(),u=B.useMemo(()=>Jne(e,t,a,i,r,"data"),[e,t,a,i,r]),l=B.useMemo(()=>Jne(e,t,a,i,r,"assets"),[e,t,a,i,r]),c=B.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,p=!1;if(t.forEach(g=>{var y;let b=i.routes[g.route.id];!b||!b.hasLoader||(!u.some(x=>x.route.id===g.route.id)&&g.route.id in o&&((y=s[g.route.id])!=null&&y.shouldRevalidate)||b.hasClientLoader?p=!0:h.add(g.route.id))}),h.size===0)return[];let m=gze(e);return p&&h.size>0&&m.searchParams.set("_routes",t.filter(g=>h.has(g.route.id)).map(g=>g.route.id).join(",")),[m.pathname+m.search]},[o,r,i,u,t,e,s]),f=B.useMemo(()=>dze(l,i),[l,i]),d=_ze(l);return B.createElement(B.Fragment,null,c.map(h=>B.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),f.map(h=>B.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),d.map(({key:h,link:p})=>B.createElement("link",{key:h,...p})))}function Eze(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var S1e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{S1e&&(window.__reactRouterVersion="7.1.3")}catch{}function Sze({basename:e,children:t,window:n}){let r=B.useRef();r.current==null&&(r.current=cUe({window:n,v5Compat:!0}));let i=r.current,[s,o]=B.useState({action:i.action,location:i.location}),a=B.useCallback(u=>{B.startTransition(()=>o(u))},[o]);return B.useLayoutEffect(()=>i.listen(a),[i,a]),B.createElement(JUe,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var T1e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,C1e=B.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,viewTransition:f,...d},h){let{basename:p}=B.useContext(L0),m=typeof l=="string"&&T1e.test(l),g,b=!1;if(typeof l=="string"&&m&&(g=l,S1e))try{let O=new URL(window.location.href),M=l.startsWith("//")?new URL(O.protocol+l):new URL(l),L=cb(M.pathname,p);M.origin===O.origin&&L!=null?l=L+M.search+M.hash:b=!0}catch{ep(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=rG(l,{relative:i}),[x,w,S]=bze(r,d),C=kze(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,viewTransition:f});function R(O){t&&t(O),O.defaultPrevented||C(O)}let I=B.createElement("a",{...d,...S,href:g||y,onClick:b||s?t:R,ref:Eze(h,w),target:u,"data-discover":!m&&n==="render"?"true":void 0});return x&&!m?B.createElement(B.Fragment,null,I,B.createElement(xze,{page:y})):I});C1e.displayName="Link";var Tze=B.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...l},c){let f=yR(o,{relative:l.relative}),d=hp(),h=B.useContext(g9),{navigator:p,basename:m}=B.useContext(L0),g=h!=null&&Dze(f)&&a===!0,b=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,y=d.pathname,x=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(y=y.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&m&&(x=cb(x,m)||x);const w=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let S=y===b||!i&&y.startsWith(b)&&y.charAt(w)==="/",C=x!=null&&(x===b||!i&&x.startsWith(b)&&x.charAt(b.length)==="/"),R={isActive:S,isPending:C,isTransitioning:g},I=S?t:void 0,O;typeof r=="function"?O=r(R):O=[r,S?"active":null,C?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let M=typeof s=="function"?s(R):s;return B.createElement(C1e,{...l,"aria-current":I,className:O,ref:c,style:M,to:o,viewTransition:a},typeof u=="function"?u(R):u)});Tze.displayName="NavLink";var Cze=B.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=CP,action:a,onSubmit:u,relative:l,preventScrollReset:c,viewTransition:f,...d},h)=>{let p=Pze(),m=Nze(a,{relative:l}),g=o.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&T1e.test(a),y=x=>{if(u&&u(x),x.defaultPrevented)return;x.preventDefault();let w=x.nativeEvent.submitter,S=(w==null?void 0:w.getAttribute("formmethod"))||o;p(w||x.currentTarget,{fetcherKey:t,method:S,navigate:n,replace:i,state:s,relative:l,preventScrollReset:c,viewTransition:f})};return B.createElement("form",{ref:h,method:g,action:m,onSubmit:r?u:y,...d,"data-discover":!b&&e==="render"?"true":void 0})});Cze.displayName="Form";function Aze(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function A1e(e){let t=B.useContext(IT);return ho(t,Aze(e)),t}function kze(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=F0(),u=hp(),l=yR(e,{relative:s});return B.useCallback(c=>{if(ize(c,t)){c.preventDefault();let f=n!==void 0?n:Jk(u)===Jk(l);a(e,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,l,n,r,t,e,i,s,o])}function D1(e){ep(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=B.useRef(xU(e)),n=B.useRef(!1),r=hp(),i=B.useMemo(()=>sze(r.search,n.current?null:t.current),[r.search]),s=F0(),o=B.useCallback((a,u)=>{const l=xU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}var Rze=0,Ize=()=>`__${String(++Rze)}__`;function Pze(){let{router:e}=A1e("useSubmit"),{basename:t}=B.useContext(L0),n=GUe();return B.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:l}=uze(r,t);if(i.navigate===!1){let c=i.fetcherKey||Ize();await e.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function Nze(e,{relative:t}={}){let{basename:n}=B.useContext(L0),r=B.useContext(dp);ho(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...yR(e||".",{relative:t})},o=hp();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(c=>c==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ky([n,s.pathname])),Jk(s)}function Dze(e,t={}){let n=B.useContext(y1e);ho(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=A1e("useViewTransitionState"),i=yR(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=cb(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=cb(n.nextLocation.pathname,r)||n.nextLocation.pathname;return p8(i.pathname,o)!=null||p8(i.pathname,s)!=null}new TextEncoder;const lG=B.createContext(null);lG.displayName="@mantine/modals/ModalsContext";function Oze(){const e=B.useContext(lG);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function Mze({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=Oze(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return A.jsxs(A.Fragment,{children:[l&&A.jsx(je,{mb:"md",children:l}),A.jsxs(Js,{mt:l?0:"md",justify:"flex-end",...o,children:[A.jsx(In,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),A.jsx(In,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[Lze,cG]=sOe("mantine-modals"),Zne=e=>{const t=e.modalId||jE();return cG("openConfirmModal")({...e,modalId:t}),t};cG("closeModal");cG("closeAllModals");function ere(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function Fze(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(s=>s.id===t.modalId);if(!r)return e;ere(r,t.canceled);const i=e.modals.filter(s=>s.id!==t.modalId);return{current:i[i.length-1]||e.current,modals:i}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{ere(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:i}=t,s=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...i}}:a.type==="context"?{...a,props:{...a.props,...i,innerProps:{...a.props.innerProps,...i.innerProps}}}:a),o=((n=e.current)==null?void 0:n.id)===r&&s.find(a=>a.id===r)||e.current;return{...e,modals:s,current:o}}default:return e}}function $ze(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function Bze({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=B.useReducer(Fze,{modals:[],current:null}),o=B.useRef(i);o.current=i;const a=B.useCallback(y=>{s({type:"CLOSE_ALL",canceled:y})},[o,s]),u=B.useCallback(({modalId:y,...x})=>{const w=y||jE();return s({type:"OPEN",modal:{id:w,type:"content",props:x}}),w},[s]),l=B.useCallback(({modalId:y,...x})=>{const w=y||jE();return s({type:"OPEN",modal:{id:w,type:"confirm",props:x}}),w},[s]),c=B.useCallback((y,{modalId:x,...w})=>{const S=x||jE();return s({type:"OPEN",modal:{id:S,type:"context",props:w,ctx:y}}),S},[s]),f=B.useCallback((y,x)=>{s({type:"CLOSE",modalId:y,canceled:x})},[o,s]),d=B.useCallback(({modalId:y,...x})=>{s({type:"UPDATE",modalId:y,newProps:x})},[s]),h=B.useCallback(({modalId:y,...x})=>{s({type:"UPDATE",modalId:y,newProps:x})},[s]);Lze({openModal:u,openConfirmModal:l,openContextModal:({modal:y,...x})=>c(y,x),closeModal:f,closeContextModal:f,closeAllModals:a,updateModal:d,updateContextModal:h});const p={modalProps:t||{},modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a,updateModal:d,updateContextModal:h},m=()=>{const y=o.current.current;switch(y==null?void 0:y.type){case"context":{const{innerProps:x,...w}=y.props,S=r[y.ctx];return{modalProps:w,content:A.jsx(S,{innerProps:x,context:p,id:y.id})}}case"confirm":{const{modalProps:x,confirmProps:w}=$ze(y.props);return{modalProps:x,content:A.jsx(Mze,{...w,id:y.id,labels:y.props.labels||n})}}case"content":{const{children:x,...w}=y.props;return{modalProps:w,content:x}}default:return{modalProps:{},content:null}}},{modalProps:g,content:b}=m();return A.jsxs(lG.Provider,{value:p,children:[A.jsx(Eo,{zIndex:fd("modal")+1,...t,...g,opened:i.modals.length>0,onClose:()=>{var y;return f((y=i.current)==null?void 0:y.id)},children:b}),e]})}/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jze={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=(e,t,n,r)=>{const i=B.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:u,className:l,children:c,...f},d)=>B.createElement("svg",{ref:d,...jze[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...f},[u&&B.createElement("title",{key:"svg-title"},u),...r.map(([h,p])=>B.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uze=pr("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zze=pr("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hk=pr("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tre=pr("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nre=pr("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vze=pr("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hze=pr("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qze=pr("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wze=pr("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gze=pr("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yze=pr("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var k1e=pr("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v9=pr("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kze=pr("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xze=pr("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qze=pr("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jze=pr("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zze=pr("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var R1e=pr("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eVe=pr("outline","hourglass-empty","IconHourglassEmpty",[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tVe=pr("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fG=pr("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nVe=pr("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var I1e=pr("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rVe=pr("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iVe=pr("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sVe=pr("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oVe=pr("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aVe=pr("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var P1e=pr("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uVe=pr("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lVe=pr("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cVe=pr("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fVe=pr("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dVe=pr("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var N1e=pr("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hVe=pr("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var D1e=pr("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pVe=pr("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var O1e=pr("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dG=pr("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rre=pr("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vR=pr("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mVe=pr("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gVe=pr("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yVe=pr("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function M1e(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Uu="/Revisit-Study/";function ire(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function L1e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const vVe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bVe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,xVe={};function sre(e,t){return(xVe.jsx?bVe:vVe).test(e)}const _Ve=/[ \t\n\f\r]/g;function wVe(e){return typeof e=="object"?e.type==="text"?ore(e.value):!1:ore(e)}function ore(e){return e.replace(_Ve,"")===""}class bR{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}bR.prototype.property={};bR.prototype.normal={};bR.prototype.space=null;function F1e(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new bR(n,r,t)}function Zk(e){return e.toLowerCase()}let pp=class{constructor(t,n){this.property=t,this.attribute=n}};pp.prototype.space=null;pp.prototype.boolean=!1;pp.prototype.booleanish=!1;pp.prototype.overloadedBoolean=!1;pp.prototype.number=!1;pp.prototype.commaSeparated=!1;pp.prototype.spaceSeparated=!1;pp.prototype.commaOrSpaceSeparated=!1;pp.prototype.mustUseProperty=!1;pp.prototype.defined=!1;let EVe=0;const Ar=Ow(),Va=Ow(),$1e=Ow(),Qt=Ow(),Ms=Ow(),VE=Ow(),jd=Ow();function Ow(){return 2**++EVe}const _U=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ar,booleanish:Va,commaOrSpaceSeparated:jd,commaSeparated:VE,number:Qt,overloadedBoolean:$1e,spaceSeparated:Ms},Symbol.toStringTag,{value:"Module"})),DF=Object.keys(_U);class hG extends pp{constructor(t,n,r,i){let s=-1;if(super(t,n),are(this,"space",i),typeof r=="number")for(;++s<DF.length;){const o=DF[s];are(this,DF[s],(r&_U[o])===_U[o])}}}hG.prototype.defined=!0;function are(e,t,n){n&&(e[t]=n)}const SVe={}.hasOwnProperty;function NT(e){const t={},n={};let r;for(r in e.properties)if(SVe.call(e.properties,r)){const i=e.properties[r],s=new hG(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Zk(r)]=r,n[Zk(s.attribute)]=r}return new bR(t,n,e.space)}const B1e=NT({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),j1e=NT({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function U1e(e,t){return t in e?e[t]:t}function z1e(e,t){return U1e(e,t.toLowerCase())}const V1e=NT({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:z1e,properties:{xmlns:null,xmlnsXLink:null}}),H1e=NT({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Va,ariaAutoComplete:null,ariaBusy:Va,ariaChecked:Va,ariaColCount:Qt,ariaColIndex:Qt,ariaColSpan:Qt,ariaControls:Ms,ariaCurrent:null,ariaDescribedBy:Ms,ariaDetails:null,ariaDisabled:Va,ariaDropEffect:Ms,ariaErrorMessage:null,ariaExpanded:Va,ariaFlowTo:Ms,ariaGrabbed:Va,ariaHasPopup:null,ariaHidden:Va,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ms,ariaLevel:Qt,ariaLive:null,ariaModal:Va,ariaMultiLine:Va,ariaMultiSelectable:Va,ariaOrientation:null,ariaOwns:Ms,ariaPlaceholder:null,ariaPosInSet:Qt,ariaPressed:Va,ariaReadOnly:Va,ariaRelevant:null,ariaRequired:Va,ariaRoleDescription:Ms,ariaRowCount:Qt,ariaRowIndex:Qt,ariaRowSpan:Qt,ariaSelected:Va,ariaSetSize:Qt,ariaSort:null,ariaValueMax:Qt,ariaValueMin:Qt,ariaValueNow:Qt,ariaValueText:null,role:null}}),TVe=NT({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:z1e,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:VE,acceptCharset:Ms,accessKey:Ms,action:null,allow:null,allowFullScreen:Ar,allowPaymentRequest:Ar,allowUserMedia:Ar,alt:null,as:null,async:Ar,autoCapitalize:null,autoComplete:Ms,autoFocus:Ar,autoPlay:Ar,blocking:Ms,capture:null,charSet:null,checked:Ar,cite:null,className:Ms,cols:Qt,colSpan:null,content:null,contentEditable:Va,controls:Ar,controlsList:Ms,coords:Qt|VE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ar,defer:Ar,dir:null,dirName:null,disabled:Ar,download:$1e,draggable:Va,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ar,formTarget:null,headers:Ms,height:Qt,hidden:Ar,high:Qt,href:null,hrefLang:null,htmlFor:Ms,httpEquiv:Ms,id:null,imageSizes:null,imageSrcSet:null,inert:Ar,inputMode:null,integrity:null,is:null,isMap:Ar,itemId:null,itemProp:Ms,itemRef:Ms,itemScope:Ar,itemType:Ms,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ar,low:Qt,manifest:null,max:null,maxLength:Qt,media:null,method:null,min:null,minLength:Qt,multiple:Ar,muted:Ar,name:null,nonce:null,noModule:Ar,noValidate:Ar,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ar,optimum:Qt,pattern:null,ping:Ms,placeholder:null,playsInline:Ar,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ar,referrerPolicy:null,rel:Ms,required:Ar,reversed:Ar,rows:Qt,rowSpan:Qt,sandbox:Ms,scope:null,scoped:Ar,seamless:Ar,selected:Ar,shadowRootClonable:Ar,shadowRootDelegatesFocus:Ar,shadowRootMode:null,shape:null,size:Qt,sizes:null,slot:null,span:Qt,spellCheck:Va,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Qt,step:null,style:null,tabIndex:Qt,target:null,title:null,translate:null,type:null,typeMustMatch:Ar,useMap:null,value:Va,width:Qt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ms,axis:null,background:null,bgColor:null,border:Qt,borderColor:null,bottomMargin:Qt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ar,declare:Ar,event:null,face:null,frame:null,frameBorder:null,hSpace:Qt,leftMargin:Qt,link:null,longDesc:null,lowSrc:null,marginHeight:Qt,marginWidth:Qt,noResize:Ar,noHref:Ar,noShade:Ar,noWrap:Ar,object:null,profile:null,prompt:null,rev:null,rightMargin:Qt,rules:null,scheme:null,scrolling:Va,standby:null,summary:null,text:null,topMargin:Qt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Qt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ar,disableRemotePlayback:Ar,prefix:null,property:null,results:Qt,security:null,unselectable:null}}),CVe=NT({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:U1e,properties:{about:jd,accentHeight:Qt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Qt,amplitude:Qt,arabicForm:null,ascent:Qt,attributeName:null,attributeType:null,azimuth:Qt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Qt,by:null,calcMode:null,capHeight:Qt,className:Ms,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Qt,diffuseConstant:Qt,direction:null,display:null,dur:null,divisor:Qt,dominantBaseline:null,download:Ar,dx:null,dy:null,edgeMode:null,editable:null,elevation:Qt,enableBackground:null,end:null,event:null,exponent:Qt,externalResourcesRequired:null,fill:null,fillOpacity:Qt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:VE,g2:VE,glyphName:VE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Qt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Qt,horizOriginX:Qt,horizOriginY:Qt,id:null,ideographic:Qt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Qt,k:Qt,k1:Qt,k2:Qt,k3:Qt,k4:Qt,kernelMatrix:jd,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Qt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Qt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Qt,overlineThickness:Qt,paintOrder:null,panose1:null,path:null,pathLength:Qt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ms,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Qt,pointsAtY:Qt,pointsAtZ:Qt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:jd,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:jd,rev:jd,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:jd,requiredFeatures:jd,requiredFonts:jd,requiredFormats:jd,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Qt,specularExponent:Qt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Qt,strikethroughThickness:Qt,string:null,stroke:null,strokeDashArray:jd,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Qt,strokeOpacity:Qt,strokeWidth:null,style:null,surfaceScale:Qt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:jd,tabIndex:Qt,tableValues:null,target:null,targetX:Qt,targetY:Qt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:jd,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Qt,underlineThickness:Qt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Qt,values:null,vAlphabetic:Qt,vMathematical:Qt,vectorEffect:null,vHanging:Qt,vIdeographic:Qt,version:null,vertAdvY:Qt,vertOriginX:Qt,vertOriginY:Qt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Qt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),AVe=/^data[-\w.:]+$/i,ure=/-[a-z]/g,kVe=/[A-Z]/g;function b9(e,t){const n=Zk(t);let r=t,i=pp;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&AVe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(ure,IVe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!ure.test(s)){let o=s.replace(kVe,RVe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=hG}return new i(r,t)}function RVe(e){return"-"+e.toLowerCase()}function IVe(e){return e.charAt(1).toUpperCase()}const PVe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},xR=F1e([j1e,B1e,V1e,H1e,TVe],"html"),Gb=F1e([j1e,B1e,V1e,H1e,CVe],"svg");function lre(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function q1e(e){return e.join(" ").trim()}var QC={},OF,cre;function NVe(){if(cre)return OF;cre=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,u=`
`,l="/",c="*",f="",d="comment",h="declaration";OF=function(m,g){if(typeof m!="string")throw new TypeError("First argument must be a string");if(!m)return[];g=g||{};var b=1,y=1;function x(D){var j=D.match(t);j&&(b+=j.length);var z=D.lastIndexOf(u);y=~z?D.length-z:y+D.length}function w(){var D={line:b,column:y};return function(j){return j.position=new S(D),I(),j}}function S(D){this.start=D,this.end={line:b,column:y},this.source=g.source}S.prototype.content=m;function C(D){var j=new Error(g.source+":"+b+":"+y+": "+D);if(j.reason=D,j.filename=g.source,j.line=b,j.column=y,j.source=m,!g.silent)throw j}function R(D){var j=D.exec(m);if(j){var z=j[0];return x(z),m=m.slice(z.length),j}}function I(){R(n)}function O(D){var j;for(D=D||[];j=M();)j!==!1&&D.push(j);return D}function M(){var D=w();if(!(l!=m.charAt(0)||c!=m.charAt(1))){for(var j=2;f!=m.charAt(j)&&(c!=m.charAt(j)||l!=m.charAt(j+1));)++j;if(j+=2,f===m.charAt(j-1))return C("End of comment missing");var z=m.slice(2,j-2);return y+=2,x(z),m=m.slice(j),y+=2,D({type:d,comment:z})}}function L(){var D=w(),j=R(r);if(j){if(M(),!R(i))return C("property missing ':'");var z=R(s),G=D({type:h,property:p(j[0].replace(e,f)),value:z?p(z[0].replace(e,f)):f});return R(o),G}}function V(){var D=[];O(D);for(var j;j=L();)j!==!1&&(D.push(j),O(D));return D}return I(),V()};function p(m){return m?m.replace(a,f):f}return OF}var fre;function DVe(){if(fre)return QC;fre=1;var e=QC.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(QC,"__esModule",{value:!0});var t=e(NVe());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),a=typeof i=="function";return o.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;a?i(l,c,u):c&&(s=s||{},s[l]=c)}}),s}return QC.default=n,QC}var OVe=DVe();const dre=gc(OVe),MVe=dre.default||dre,x9=W1e("end"),_g=W1e("start");function W1e(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function LVe(e){const t=_g(e),n=x9(e);if(t&&n)return{start:t,end:n}}function pk(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?hre(e.position):"start"in e||"end"in e?hre(e):"line"in e||"column"in e?wU(e):""}function wU(e){return pre(e&&e.line)+":"+pre(e&&e.column)}function hre(e){return wU(e&&e.start)+"-"+wU(e&&e.end)}function pre(e){return e&&typeof e=="number"?e:1}class yc extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=pk(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}yc.prototype.file="";yc.prototype.name="";yc.prototype.reason="";yc.prototype.message="";yc.prototype.stack="";yc.prototype.column=void 0;yc.prototype.line=void 0;yc.prototype.ancestors=void 0;yc.prototype.cause=void 0;yc.prototype.fatal=void 0;yc.prototype.place=void 0;yc.prototype.ruleId=void 0;yc.prototype.source=void 0;const pG={}.hasOwnProperty,FVe=new Map,$Ve=/[A-Z]/g,BVe=/-([a-z])/g,jVe=new Set(["table","tbody","thead","tfoot","tr"]),UVe=new Set(["td","th"]),G1e="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function zVe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=XVe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=KVe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Gb:xR,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Y1e(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Y1e(e,t,n){if(t.type==="element")return VVe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return HVe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return WVe(e,t,n);if(t.type==="mdxjsEsm")return qVe(e,t);if(t.type==="root")return GVe(e,t,n);if(t.type==="text")return YVe(e,t)}function VVe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Gb,e.schema=i),e.ancestors.push(t);const s=X1e(e,t.tagName,!1),o=QVe(e,t);let a=gG(e,t);return jVe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!wVe(u):!0})),K1e(e,o,s,t),mG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function HVe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}e4(e,t.position)}function qVe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);e4(e,t.position)}function WVe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Gb,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:X1e(e,t.name,!0),o=JVe(e,t),a=gG(e,t);return K1e(e,o,s,t),mG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function GVe(e,t,n){const r={};return mG(r,gG(e,t)),e.create(t,e.Fragment,r,n)}function YVe(e,t){return t.value}function K1e(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function mG(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function KVe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function XVe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=_g(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function QVe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&pG.call(t.properties,i)){const s=ZVe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&UVe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function JVe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else e4(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else e4(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function gG(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:FVe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=Y1e(e,s,o);a!==void 0&&n.push(a)}return n}function ZVe(e,t,n){const r=b9(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?L1e(n):q1e(n)),r.property==="style"){let i=typeof n=="object"?n:eHe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=tHe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?PVe[r.property]||r.property:r.attribute,n]}}function eHe(e,t){const n={};try{MVe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new yc("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=G1e+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(BVe,rHe)),n[o]=s}}function X1e(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=sre(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=sre(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return pG.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);e4(e)}function e4(e,t){const n=new yc("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=G1e+"#cannot-handle-mdx-estrees-without-createevaluater",n}function tHe(e){const t={};let n;for(n in e)pG.call(e,n)&&(t[nHe(n)]=e[n]);return t}function nHe(e){let t=e.replace($Ve,iHe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function rHe(e,t){return t.toUpperCase()}function iHe(e){return"-"+e.toLowerCase()}const MF={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},sHe={};function oHe(e,t){const n=sHe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Q1e(e,r,i)}function Q1e(e,t,n){if(aHe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return mre(e.children,t,n)}return Array.isArray(e)?mre(e,t,n):""}function mre(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Q1e(e[i],t,n);return r.join("")}function aHe(e){return!!(e&&typeof e=="object")}const gre=document.createElement("i");function yG(e){const t="&"+e+";";gre.innerHTML=t;const n=gre.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function f1(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Vh(e,t){return e.length>0?(f1(e,e.length,0,t),e):t}const yre={}.hasOwnProperty;function uHe(e){const t={};let n=-1;for(;++n<e.length;)lHe(t,e[n]);return t}function lHe(e,t){let n;for(n in t){const i=(yre.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){yre.call(i,o)||(i[o]=[]);const a=s[o];cHe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function cHe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);f1(e,0,0,r)}function J1e(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function HE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Im=Yb(/[A-Za-z]/),Gd=Yb(/[\dA-Za-z]/),fHe=Yb(/[#-'*+\--9=?A-Z^-~]/);function EU(e){return e!==null&&(e<32||e===127)}const SU=Yb(/\d/),dHe=Yb(/[\dA-Fa-f]/),hHe=Yb(/[!-/:-@[-`{-~]/);function or(e){return e!==null&&e<-2}function td(e){return e!==null&&(e<0||e===32)}function zi(e){return e===-2||e===-1||e===32}const pHe=Yb(new RegExp("\\p{P}|\\p{S}","u")),mHe=Yb(/\s/);function Yb(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function DT(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Gd(e.charCodeAt(n+1))&&Gd(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Ls(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return zi(u)?(e.enter(n),a(u)):t(u)}function a(u){return zi(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const gHe={tokenize:yHe};function yHe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ls(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return or(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const vHe={tokenize:bHe},vre={tokenize:xHe};function bHe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(x){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(x)}return l(x)}function u(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&y();const w=t.events.length;let S=w,C;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){C=t.events[S][1].end;break}b(r);let R=w;for(;R<t.events.length;)t.events[R][1].end=Object.assign({},C),R++;return f1(t.events,S+1,0,t.events.slice(w)),t.events.length=R,l(x)}return a(x)}function l(x){if(r===n.length){if(!i)return d(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(vre,c,f)(x)}function c(x){return i&&y(),b(r),d(x)}function f(x){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(x)}function d(x){return t.containerState={},e.attempt(vre,h,p)(x)}function h(x){return r++,n.push([t.currentConstruct,t.containerState]),d(x)}function p(x){if(x===null){i&&y(),b(0),e.consume(x);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(x)}function m(x){if(x===null){g(e.exit("chunkFlow"),!0),b(0),e.consume(x);return}return or(x)?(e.consume(x),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(x),m)}function g(x,w){const S=t.sliceStream(x);if(w&&S.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(S),t.parser.lazy[x.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const R=t.events.length;let I=R,O,M;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(O){M=t.events[I][1].end;break}O=!0}for(b(r),C=R;C<t.events.length;)t.events[C][1].end=Object.assign({},M),C++;f1(t.events,I+1,0,t.events.slice(R)),t.events.length=C}}function b(x){let w=n.length;for(;w-- >x;){const S=n[w];t.containerState=S[1],S[0].exit.call(t,e)}n.length=x}function y(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function xHe(e,t,n){return Ls(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function bre(e){if(e===null||td(e)||mHe(e))return 1;if(pHe(e))return 2}function vG(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const TU={name:"attention",tokenize:wHe,resolveAll:_He};function _He(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);xre(f,-u),xre(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Vh(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Vh(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Vh(l,vG(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Vh(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Vh(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,f1(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function wHe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=bre(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=bre(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function xre(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const EHe={name:"autolink",tokenize:SHe};function SHe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Im(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Gd(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Gd(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||EU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):fHe(h)?(e.consume(h),l):n(h)}function c(h){return Gd(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Gd(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const _9={tokenize:THe,partial:!0};function THe(e,t,n){return r;function r(s){return zi(s)?Ls(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||or(s)?t(s):n(s)}}const Z1e={name:"blockQuote",tokenize:CHe,continuation:{tokenize:AHe},exit:kHe};function CHe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return zi(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function AHe(e,t,n){const r=this;return i;function i(o){return zi(o)?Ls(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Z1e,t,n)(o)}}function kHe(e){e.exit("blockQuote")}const eve={name:"characterEscape",tokenize:RHe};function RHe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return hHe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const tve={name:"characterReference",tokenize:IHe};function IHe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Gd,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=dHe,c):(e.enter("characterReferenceValue"),s=7,o=SU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Gd&&!yG(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const _re={tokenize:NHe,partial:!0},wre={name:"codeFenced",tokenize:PHe,concrete:!0};function PHe(e,t,n){const r=this,i={tokenize:S,partial:!0};let s=0,o=0,a;return u;function u(C){return l(C)}function l(C){const R=r.events[r.events.length-1];return s=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,a=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(C)}function c(C){return C===a?(o++,e.consume(C),c):o<3?n(C):(e.exit("codeFencedFenceSequence"),zi(C)?Ls(e,f,"whitespace")(C):f(C))}function f(C){return C===null||or(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(_re,m,w)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(C))}function d(C){return C===null||or(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(C)):zi(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ls(e,h,"whitespace")(C)):C===96&&C===a?n(C):(e.consume(C),d)}function h(C){return C===null||or(C)?f(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||or(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(C)):C===96&&C===a?n(C):(e.consume(C),p)}function m(C){return e.attempt(i,w,g)(C)}function g(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),b}function b(C){return s>0&&zi(C)?Ls(e,y,"linePrefix",s+1)(C):y(C)}function y(C){return C===null||or(C)?e.check(_re,m,w)(C):(e.enter("codeFlowValue"),x(C))}function x(C){return C===null||or(C)?(e.exit("codeFlowValue"),y(C)):(e.consume(C),x)}function w(C){return e.exit("codeFenced"),t(C)}function S(C,R,I){let O=0;return M;function M(z){return C.enter("lineEnding"),C.consume(z),C.exit("lineEnding"),L}function L(z){return C.enter("codeFencedFence"),zi(z)?Ls(C,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):V(z)}function V(z){return z===a?(C.enter("codeFencedFenceSequence"),D(z)):I(z)}function D(z){return z===a?(O++,C.consume(z),D):O>=o?(C.exit("codeFencedFenceSequence"),zi(z)?Ls(C,j,"whitespace")(z):j(z)):I(z)}function j(z){return z===null||or(z)?(C.exit("codeFencedFence"),R(z)):I(z)}}}function NHe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const LF={name:"codeIndented",tokenize:OHe},DHe={tokenize:MHe,partial:!0};function OHe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Ls(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):or(l)?e.attempt(DHe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||or(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function MHe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):or(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Ls(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):or(o)?i(o):n(o)}}const LHe={name:"codeText",tokenize:BHe,resolve:FHe,previous:$He};function FHe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function $He(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function BHe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):or(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||or(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class jHe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&JC(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),JC(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),JC(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);JC(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);JC(this.left,n.reverse())}}}function JC(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function nve(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new jHe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,UHe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return f1(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function UHe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const b=a.slice(g[d],g[d+1]),y=s.pop();u.push([y,y+b.length-1]),e.splice(y,2,b)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const zHe={tokenize:qHe,resolve:HHe},VHe={tokenize:WHe,partial:!0};function HHe(e){return nve(e),e}function qHe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):or(a)?e.check(VHe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function WHe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ls(e,s,"linePrefix")}function s(o){if(o===null||or(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function rve(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(b){return b===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(b),e.exit(s),d):b===null||b===32||b===41||EU(b)?n(b):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(b))}function d(b){return b===62?(e.enter(s),e.consume(b),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(b))}function h(b){return b===62?(e.exit("chunkString"),e.exit(a),d(b)):b===null||b===60||or(b)?n(b):(e.consume(b),b===92?p:h)}function p(b){return b===60||b===62||b===92?(e.consume(b),h):h(b)}function m(b){return!c&&(b===null||b===41||td(b))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(b)):c<l&&b===40?(e.consume(b),c++,m):b===41?(e.consume(b),c--,m):b===null||b===32||b===40||EU(b)?n(b):(e.consume(b),b===92?g:m)}function g(b){return b===40||b===41||b===92?(e.consume(b),m):m(b)}}function ive(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):or(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||or(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!zi(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function sve(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):or(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Ls(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||or(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function mk(e,t){let n;return r;function r(i){return or(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):zi(i)?Ls(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const GHe={name:"definition",tokenize:KHe},YHe={tokenize:XHe,partial:!0};function KHe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return ive.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=HE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return td(h)?mk(e,l)(h):l(h)}function l(h){return rve(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(YHe,f,f)(h)}function f(h){return zi(h)?Ls(e,d,"whitespace")(h):d(h)}function d(h){return h===null||or(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function XHe(e,t,n){return r;function r(a){return td(a)?mk(e,i)(a):n(a)}function i(a){return sve(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return zi(a)?Ls(e,o,"whitespace")(a):o(a)}function o(a){return a===null||or(a)?t(a):n(a)}}const QHe={name:"hardBreakEscape",tokenize:JHe};function JHe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return or(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const ZHe={name:"headingAtx",tokenize:tqe,resolve:eqe};function eqe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},f1(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function tqe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||td(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||or(c)?(e.exit("atxHeading"),t(c)):zi(c)?Ls(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||td(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const nqe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ere=["pre","script","style","textarea"],rqe={name:"htmlFlow",tokenize:aqe,resolveTo:oqe,concrete:!0},iqe={tokenize:lqe,partial:!0},sqe={tokenize:uqe,partial:!0};function oqe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function aqe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(q){return c(q)}function c(q){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(q),f}function f(q){return q===33?(e.consume(q),d):q===47?(e.consume(q),s=!0,m):q===63?(e.consume(q),i=3,r.interrupt?t:X):Im(q)?(e.consume(q),o=String.fromCharCode(q),g):n(q)}function d(q){return q===45?(e.consume(q),i=2,h):q===91?(e.consume(q),i=5,a=0,p):Im(q)?(e.consume(q),i=4,r.interrupt?t:X):n(q)}function h(q){return q===45?(e.consume(q),r.interrupt?t:X):n(q)}function p(q){const J="CDATA[";return q===J.charCodeAt(a++)?(e.consume(q),a===J.length?r.interrupt?t:V:p):n(q)}function m(q){return Im(q)?(e.consume(q),o=String.fromCharCode(q),g):n(q)}function g(q){if(q===null||q===47||q===62||td(q)){const J=q===47,oe=o.toLowerCase();return!J&&!s&&Ere.includes(oe)?(i=1,r.interrupt?t(q):V(q)):nqe.includes(o.toLowerCase())?(i=6,J?(e.consume(q),b):r.interrupt?t(q):V(q)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(q):s?y(q):x(q))}return q===45||Gd(q)?(e.consume(q),o+=String.fromCharCode(q),g):n(q)}function b(q){return q===62?(e.consume(q),r.interrupt?t:V):n(q)}function y(q){return zi(q)?(e.consume(q),y):M(q)}function x(q){return q===47?(e.consume(q),M):q===58||q===95||Im(q)?(e.consume(q),w):zi(q)?(e.consume(q),x):M(q)}function w(q){return q===45||q===46||q===58||q===95||Gd(q)?(e.consume(q),w):S(q)}function S(q){return q===61?(e.consume(q),C):zi(q)?(e.consume(q),S):x(q)}function C(q){return q===null||q===60||q===61||q===62||q===96?n(q):q===34||q===39?(e.consume(q),u=q,R):zi(q)?(e.consume(q),C):I(q)}function R(q){return q===u?(e.consume(q),u=null,O):q===null||or(q)?n(q):(e.consume(q),R)}function I(q){return q===null||q===34||q===39||q===47||q===60||q===61||q===62||q===96||td(q)?S(q):(e.consume(q),I)}function O(q){return q===47||q===62||zi(q)?x(q):n(q)}function M(q){return q===62?(e.consume(q),L):n(q)}function L(q){return q===null||or(q)?V(q):zi(q)?(e.consume(q),L):n(q)}function V(q){return q===45&&i===2?(e.consume(q),G):q===60&&i===1?(e.consume(q),ee):q===62&&i===4?(e.consume(q),W):q===63&&i===3?(e.consume(q),X):q===93&&i===5?(e.consume(q),ue):or(q)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(iqe,te,D)(q)):q===null||or(q)?(e.exit("htmlFlowData"),D(q)):(e.consume(q),V)}function D(q){return e.check(sqe,j,te)(q)}function j(q){return e.enter("lineEnding"),e.consume(q),e.exit("lineEnding"),z}function z(q){return q===null||or(q)?D(q):(e.enter("htmlFlowData"),V(q))}function G(q){return q===45?(e.consume(q),X):V(q)}function ee(q){return q===47?(e.consume(q),o="",ne):V(q)}function ne(q){if(q===62){const J=o.toLowerCase();return Ere.includes(J)?(e.consume(q),W):V(q)}return Im(q)&&o.length<8?(e.consume(q),o+=String.fromCharCode(q),ne):V(q)}function ue(q){return q===93?(e.consume(q),X):V(q)}function X(q){return q===62?(e.consume(q),W):q===45&&i===2?(e.consume(q),X):V(q)}function W(q){return q===null||or(q)?(e.exit("htmlFlowData"),te(q)):(e.consume(q),W)}function te(q){return e.exit("htmlFlow"),t(q)}}function uqe(e,t,n){const r=this;return i;function i(o){return or(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function lqe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(_9,t,n)}}const cqe={name:"htmlText",tokenize:fqe};function fqe(e,t,n){const r=this;let i,s,o;return a;function a(X){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(X),u}function u(X){return X===33?(e.consume(X),l):X===47?(e.consume(X),S):X===63?(e.consume(X),x):Im(X)?(e.consume(X),I):n(X)}function l(X){return X===45?(e.consume(X),c):X===91?(e.consume(X),s=0,p):Im(X)?(e.consume(X),y):n(X)}function c(X){return X===45?(e.consume(X),h):n(X)}function f(X){return X===null?n(X):X===45?(e.consume(X),d):or(X)?(o=f,ee(X)):(e.consume(X),f)}function d(X){return X===45?(e.consume(X),h):f(X)}function h(X){return X===62?G(X):X===45?d(X):f(X)}function p(X){const W="CDATA[";return X===W.charCodeAt(s++)?(e.consume(X),s===W.length?m:p):n(X)}function m(X){return X===null?n(X):X===93?(e.consume(X),g):or(X)?(o=m,ee(X)):(e.consume(X),m)}function g(X){return X===93?(e.consume(X),b):m(X)}function b(X){return X===62?G(X):X===93?(e.consume(X),b):m(X)}function y(X){return X===null||X===62?G(X):or(X)?(o=y,ee(X)):(e.consume(X),y)}function x(X){return X===null?n(X):X===63?(e.consume(X),w):or(X)?(o=x,ee(X)):(e.consume(X),x)}function w(X){return X===62?G(X):x(X)}function S(X){return Im(X)?(e.consume(X),C):n(X)}function C(X){return X===45||Gd(X)?(e.consume(X),C):R(X)}function R(X){return or(X)?(o=R,ee(X)):zi(X)?(e.consume(X),R):G(X)}function I(X){return X===45||Gd(X)?(e.consume(X),I):X===47||X===62||td(X)?O(X):n(X)}function O(X){return X===47?(e.consume(X),G):X===58||X===95||Im(X)?(e.consume(X),M):or(X)?(o=O,ee(X)):zi(X)?(e.consume(X),O):G(X)}function M(X){return X===45||X===46||X===58||X===95||Gd(X)?(e.consume(X),M):L(X)}function L(X){return X===61?(e.consume(X),V):or(X)?(o=L,ee(X)):zi(X)?(e.consume(X),L):O(X)}function V(X){return X===null||X===60||X===61||X===62||X===96?n(X):X===34||X===39?(e.consume(X),i=X,D):or(X)?(o=V,ee(X)):zi(X)?(e.consume(X),V):(e.consume(X),j)}function D(X){return X===i?(e.consume(X),i=void 0,z):X===null?n(X):or(X)?(o=D,ee(X)):(e.consume(X),D)}function j(X){return X===null||X===34||X===39||X===60||X===61||X===96?n(X):X===47||X===62||td(X)?O(X):(e.consume(X),j)}function z(X){return X===47||X===62||td(X)?O(X):n(X)}function G(X){return X===62?(e.consume(X),e.exit("htmlTextData"),e.exit("htmlText"),t):n(X)}function ee(X){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(X),e.exit("lineEnding"),ne}function ne(X){return zi(X)?Ls(e,ue,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):ue(X)}function ue(X){return e.enter("htmlTextData"),o(X)}}const bG={name:"labelEnd",tokenize:yqe,resolveTo:gqe,resolveAll:mqe},dqe={tokenize:vqe},hqe={tokenize:bqe},pqe={tokenize:xqe};function mqe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function gqe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Vh(a,e.slice(s+1,s+r+3)),a=Vh(a,[["enter",c,t]]),a=Vh(a,vG(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Vh(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Vh(a,e.slice(o+1)),a=Vh(a,[["exit",u,t]]),f1(e,s,e.length,a),e}function yqe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(HE(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(dqe,c,o?c:f)(d):d===91?e.attempt(hqe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(pqe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function vqe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return td(f)?mk(e,s)(f):s(f)}function s(f){return f===41?c(f):rve(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return td(f)?mk(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?sve(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return td(f)?mk(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function bqe(e,t,n){const r=this;return i;function i(a){return ive.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(HE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function xqe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const _qe={name:"labelStartImage",tokenize:wqe,resolveAll:bG.resolveAll};function wqe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Eqe={name:"labelStartLink",tokenize:Sqe,resolveAll:bG.resolveAll};function Sqe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const FF={name:"lineEnding",tokenize:Tqe};function Tqe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ls(e,t,"linePrefix")}}const kP={name:"thematicBreak",tokenize:Cqe};function Cqe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||or(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),zi(l)?Ls(e,a,"whitespace")(l):a(l))}}const zf={name:"list",tokenize:Rqe,continuation:{tokenize:Iqe},exit:Nqe},Aqe={tokenize:Dqe,partial:!0},kqe={tokenize:Pqe,partial:!0};function Rqe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:SU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(kP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return SU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(_9,r.interrupt?n:c,e.attempt(Aqe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return zi(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function Iqe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(_9,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ls(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!zi(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(kqe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ls(e,e.attempt(zf,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Pqe(e,t,n){const r=this;return Ls(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Nqe(e){e.exit(this.containerState.type)}function Dqe(e,t,n){const r=this;return Ls(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!zi(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Sre={name:"setextUnderline",tokenize:Mqe,resolveTo:Oqe};function Oqe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Mqe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),zi(l)?Ls(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||or(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const Lqe={tokenize:Fqe};function Fqe(e){const t=this,n=e.attempt(_9,r,e.attempt(this.parser.constructs.flowInitial,i,Ls(e,e.attempt(this.parser.constructs.flow,i,e.attempt(zHe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const $qe={resolveAll:ave()},Bqe=ove("string"),jqe=ove("text");function ove(e){return{tokenize:t,resolveAll:ave(e==="text"?Uqe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function ave(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Uqe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function zqe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:y,enter:x,exit:w,attempt:R(S),check:R(C),interrupt:R(C,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(L){return o=Vh(o,L),g(),o[o.length-1]!==null?[]:(I(t,0),l.events=vG(s,l.events,l),l.events)}function d(L,V){return Hqe(h(L),V)}function h(L){return Vqe(o,L)}function p(){const{line:L,column:V,offset:D,_index:j,_bufferIndex:z}=r;return{line:L,column:V,offset:D,_index:j,_bufferIndex:z}}function m(L){i[L.line]=L.column,M()}function g(){let L;for(;r._index<o.length;){const V=o[r._index];if(typeof V=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<V.length;)b(V.charCodeAt(r._bufferIndex));else b(V)}}function b(L){c=c(L)}function y(L){or(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,M()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=L}function x(L,V){const D=V||{};return D.type=L,D.start=p(),l.events.push(["enter",D,l]),a.push(D),D}function w(L){const V=a.pop();return V.end=p(),l.events.push(["exit",V,l]),V}function S(L,V){I(L,V.from)}function C(L,V){V.restore()}function R(L,V){return D;function D(j,z,G){let ee,ne,ue,X;return Array.isArray(j)?te(j):"tokenize"in j?te([j]):W(j);function W(de){return ce;function ce(pe){const Ee=pe!==null&&de[pe],Ae=pe!==null&&de.null,ge=[...Array.isArray(Ee)?Ee:Ee?[Ee]:[],...Array.isArray(Ae)?Ae:Ae?[Ae]:[]];return te(ge)(pe)}}function te(de){return ee=de,ne=0,de.length===0?G:q(de[ne])}function q(de){return ce;function ce(pe){return X=O(),ue=de,de.partial||(l.currentConstruct=de),de.name&&l.parser.constructs.disable.null.includes(de.name)?oe():de.tokenize.call(V?Object.assign(Object.create(l),V):l,u,J,oe)(pe)}}function J(de){return L(ue,X),z}function oe(de){return X.restore(),++ne<ee.length?q(ee[ne]):G}}}function I(L,V){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&f1(l.events,V,l.events.length-V,L.resolve(l.events.slice(V),l)),L.resolveTo&&(l.events=L.resolveTo(l.events,l))}function O(){const L=p(),V=l.previous,D=l.currentConstruct,j=l.events.length,z=Array.from(a);return{restore:G,from:j};function G(){r=L,l.previous=V,l.currentConstruct=D,l.events.length=j,a=z,M()}}function M(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Vqe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Hqe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const qqe={42:zf,43:zf,45:zf,48:zf,49:zf,50:zf,51:zf,52:zf,53:zf,54:zf,55:zf,56:zf,57:zf,62:Z1e},Wqe={91:GHe},Gqe={[-2]:LF,[-1]:LF,32:LF},Yqe={35:ZHe,42:kP,45:[Sre,kP],60:rqe,61:Sre,95:kP,96:wre,126:wre},Kqe={38:tve,92:eve},Xqe={[-5]:FF,[-4]:FF,[-3]:FF,33:_qe,38:tve,42:TU,60:[EHe,cqe],91:Eqe,92:[QHe,eve],93:bG,95:TU,96:LHe},Qqe={null:[TU,$qe]},Jqe={null:[42,95]},Zqe={null:[]},eWe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Jqe,contentInitial:Wqe,disable:Zqe,document:qqe,flow:Yqe,flowInitial:Gqe,insideSpan:Qqe,string:Kqe,text:Xqe},Symbol.toStringTag,{value:"Module"}));function tWe(e){const n=uHe([eWe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(gHe),document:i(vHe),flow:i(Lqe),string:i(Bqe),text:i(jqe)};return r;function i(s){return o;function o(a){return zqe(r,s,a)}}}function nWe(e){for(;!nve(e););return e}const Tre=/[\0\t\n\r]/g;function rWe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Tre.lastIndex=f,l=Tre.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const iWe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function sWe(e){return e.replace(iWe,oWe)}function oWe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return J1e(n.slice(s?2:1),s?16:10)}return yG(n)||e}const uve={}.hasOwnProperty;function aWe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),uWe(n)(nWe(tWe(n).document().write(rWe()(e,t,!0))))}function uWe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(yt),autolinkProtocol:O,autolinkEmail:O,atxHeading:s(Ye),blockQuote:s(Ae),characterEscape:O,characterReference:O,codeFenced:s(ge),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ge,o),codeText:s(me,o),codeTextData:O,data:O,codeFlowValue:O,definition:s(Oe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Me),hardBreakEscape:s(lt),hardBreakTrailing:s(lt),htmlFlow:s(We,o),htmlFlowData:O,htmlText:s(We,o),htmlTextData:O,image:s(nt),label:o,link:s(yt),listItem:s(It),listItemValue:d,listOrdered:s(_t,f),listUnordered:s(_t),paragraph:s(Et),reference:q,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ye),strong:s(Ke),thematicBreak:s(sn)},exit:{atxHeading:u(),atxHeadingSequence:S,autolink:u(),autolinkEmail:Ee,autolinkProtocol:pe,blockQuote:u(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:oe,characterReferenceMarkerNumeric:oe,characterReferenceValue:de,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:M,codeIndented:u(b),codeText:u(z),codeTextData:M,data:M,definition:u(),definitionDestinationString:w,definitionLabelString:y,definitionTitleString:x,emphasis:u(),hardBreakEscape:u(V),hardBreakTrailing:u(V),htmlFlow:u(D),htmlFlowData:M,htmlText:u(j),htmlTextData:M,image:u(ee),label:ue,labelText:ne,lineEnding:L,link:u(G),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:J,resourceDestinationString:X,resourceTitleString:W,resource:te,setextHeading:u(I),setextHeadingLineSequence:R,setextHeadingText:C,strong:u(),thematicBreak:u()}};lve(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Fe){let Qe={type:"root",children:[]};const wt={stack:[Qe],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},Vt=[];let Wt=-1;for(;++Wt<Fe.length;)if(Fe[Wt][1].type==="listOrdered"||Fe[Wt][1].type==="listUnordered")if(Fe[Wt][0]==="enter")Vt.push(Wt);else{const bn=Vt.pop();Wt=i(Fe,bn,Wt)}for(Wt=-1;++Wt<Fe.length;){const bn=t[Fe[Wt][0]];uve.call(bn,Fe[Wt][1].type)&&bn[Fe[Wt][1].type].call(Object.assign({sliceSerialize:Fe[Wt][2].sliceSerialize},wt),Fe[Wt][1])}if(wt.tokenStack.length>0){const bn=wt.tokenStack[wt.tokenStack.length-1];(bn[1]||Cre).call(wt,void 0,bn[0])}for(Qe.position={start:pv(Fe.length>0?Fe[0][1].start:{line:1,column:1,offset:0}),end:pv(Fe.length>0?Fe[Fe.length-2][1].end:{line:1,column:1,offset:0})},Wt=-1;++Wt<t.transforms.length;)Qe=t.transforms[Wt](Qe)||Qe;return Qe}function i(Fe,Qe,wt){let Vt=Qe-1,Wt=-1,bn=!1,Dn,Zn,wr,Hn;for(;++Vt<=wt;){const nr=Fe[Vt];switch(nr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{nr[0]==="enter"?Wt++:Wt--,Hn=void 0;break}case"lineEndingBlank":{nr[0]==="enter"&&(Dn&&!Hn&&!Wt&&!wr&&(wr=Vt),Hn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Hn=void 0}if(!Wt&&nr[0]==="enter"&&nr[1].type==="listItemPrefix"||Wt===-1&&nr[0]==="exit"&&(nr[1].type==="listUnordered"||nr[1].type==="listOrdered")){if(Dn){let Ei=Vt;for(Zn=void 0;Ei--;){const Dr=Fe[Ei];if(Dr[1].type==="lineEnding"||Dr[1].type==="lineEndingBlank"){if(Dr[0]==="exit")continue;Zn&&(Fe[Zn][1].type="lineEndingBlank",bn=!0),Dr[1].type="lineEnding",Zn=Ei}else if(!(Dr[1].type==="linePrefix"||Dr[1].type==="blockQuotePrefix"||Dr[1].type==="blockQuotePrefixWhitespace"||Dr[1].type==="blockQuoteMarker"||Dr[1].type==="listItemIndent"))break}wr&&(!Zn||wr<Zn)&&(Dn._spread=!0),Dn.end=Object.assign({},Zn?Fe[Zn][1].start:nr[1].end),Fe.splice(Zn||Vt,0,["exit",Dn,nr[2]]),Vt++,wt++}if(nr[1].type==="listItemPrefix"){const Ei={type:"listItem",_spread:!1,start:Object.assign({},nr[1].start),end:void 0};Dn=Ei,Fe.splice(Vt,0,["enter",Ei,nr[2]]),Vt++,wt++,wr=void 0,Hn=!0}}}return Fe[Qe][1]._spread=bn,wt}function s(Fe,Qe){return wt;function wt(Vt){a.call(this,Fe(Vt),Vt),Qe&&Qe.call(this,Vt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Fe,Qe,wt){this.stack[this.stack.length-1].children.push(Fe),this.stack.push(Fe),this.tokenStack.push([Qe,wt]),Fe.position={start:pv(Qe.start),end:void 0}}function u(Fe){return Qe;function Qe(wt){Fe&&Fe.call(this,wt),l.call(this,wt)}}function l(Fe,Qe){const wt=this.stack.pop(),Vt=this.tokenStack.pop();if(Vt)Vt[0].type!==Fe.type&&(Qe?Qe.call(this,Fe,Vt[0]):(Vt[1]||Cre).call(this,Fe,Vt[0]));else throw new Error("Cannot close `"+Fe.type+"` ("+pk({start:Fe.start,end:Fe.end})+"): it’s not open");wt.position.end=pv(Fe.end)}function c(){return oHe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(Fe){if(this.data.expectingFirstListItemValue){const Qe=this.stack[this.stack.length-2];Qe.start=Number.parseInt(this.sliceSerialize(Fe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.lang=Fe}function p(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.meta=Fe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe.replace(/(\r?\n|\r)$/g,"")}function y(Fe){const Qe=this.resume(),wt=this.stack[this.stack.length-1];wt.label=Qe,wt.identifier=HE(this.sliceSerialize(Fe)).toLowerCase()}function x(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.title=Fe}function w(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.url=Fe}function S(Fe){const Qe=this.stack[this.stack.length-1];if(!Qe.depth){const wt=this.sliceSerialize(Fe).length;Qe.depth=wt}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function R(Fe){const Qe=this.stack[this.stack.length-1];Qe.depth=this.sliceSerialize(Fe).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function O(Fe){const wt=this.stack[this.stack.length-1].children;let Vt=wt[wt.length-1];(!Vt||Vt.type!=="text")&&(Vt=Lt(),Vt.position={start:pv(Fe.start),end:void 0},wt.push(Vt)),this.stack.push(Vt)}function M(Fe){const Qe=this.stack.pop();Qe.value+=this.sliceSerialize(Fe),Qe.position.end=pv(Fe.end)}function L(Fe){const Qe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const wt=Qe.children[Qe.children.length-1];wt.position.end=pv(Fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Qe.type)&&(O.call(this,Fe),M.call(this,Fe))}function V(){this.data.atHardBreak=!0}function D(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe}function j(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe}function z(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=Fe}function G(){const Fe=this.stack[this.stack.length-1];if(this.data.inReference){const Qe=this.data.referenceType||"shortcut";Fe.type+="Reference",Fe.referenceType=Qe,delete Fe.url,delete Fe.title}else delete Fe.identifier,delete Fe.label;this.data.referenceType=void 0}function ee(){const Fe=this.stack[this.stack.length-1];if(this.data.inReference){const Qe=this.data.referenceType||"shortcut";Fe.type+="Reference",Fe.referenceType=Qe,delete Fe.url,delete Fe.title}else delete Fe.identifier,delete Fe.label;this.data.referenceType=void 0}function ne(Fe){const Qe=this.sliceSerialize(Fe),wt=this.stack[this.stack.length-2];wt.label=sWe(Qe),wt.identifier=HE(Qe).toLowerCase()}function ue(){const Fe=this.stack[this.stack.length-1],Qe=this.resume(),wt=this.stack[this.stack.length-1];if(this.data.inReference=!0,wt.type==="link"){const Vt=Fe.children;wt.children=Vt}else wt.alt=Qe}function X(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.url=Fe}function W(){const Fe=this.resume(),Qe=this.stack[this.stack.length-1];Qe.title=Fe}function te(){this.data.inReference=void 0}function q(){this.data.referenceType="collapsed"}function J(Fe){const Qe=this.resume(),wt=this.stack[this.stack.length-1];wt.label=Qe,wt.identifier=HE(this.sliceSerialize(Fe)).toLowerCase(),this.data.referenceType="full"}function oe(Fe){this.data.characterReferenceType=Fe.type}function de(Fe){const Qe=this.sliceSerialize(Fe),wt=this.data.characterReferenceType;let Vt;wt?(Vt=J1e(Qe,wt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Vt=yG(Qe);const Wt=this.stack[this.stack.length-1];Wt.value+=Vt}function ce(Fe){const Qe=this.stack.pop();Qe.position.end=pv(Fe.end)}function pe(Fe){M.call(this,Fe);const Qe=this.stack[this.stack.length-1];Qe.url=this.sliceSerialize(Fe)}function Ee(Fe){M.call(this,Fe);const Qe=this.stack[this.stack.length-1];Qe.url="mailto:"+this.sliceSerialize(Fe)}function Ae(){return{type:"blockquote",children:[]}}function ge(){return{type:"code",lang:null,meta:null,value:""}}function me(){return{type:"inlineCode",value:""}}function Oe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Me(){return{type:"emphasis",children:[]}}function Ye(){return{type:"heading",depth:0,children:[]}}function lt(){return{type:"break"}}function We(){return{type:"html",value:""}}function nt(){return{type:"image",title:null,url:"",alt:null}}function yt(){return{type:"link",title:null,url:"",children:[]}}function _t(Fe){return{type:"list",ordered:Fe.type==="listOrdered",start:null,spread:Fe._spread,children:[]}}function It(Fe){return{type:"listItem",spread:Fe._spread,checked:null,children:[]}}function Et(){return{type:"paragraph",children:[]}}function Ke(){return{type:"strong",children:[]}}function Lt(){return{type:"text",value:""}}function sn(){return{type:"thematicBreak"}}}function pv(e){return{line:e.line,column:e.column,offset:e.offset}}function lve(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?lve(e,r):lWe(e,r)}}function lWe(e,t){let n;for(n in t)if(uve.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Cre(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+pk({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+pk({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+pk({start:t.start,end:t.end})+") is still open")}function cWe(e){const t=this;t.parser=n;function n(r){return aWe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function fWe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function dWe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function hWe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function pWe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function mWe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function gWe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=DT(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function yWe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vWe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function cve(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function bWe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return cve(e,t);const i={src:DT(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function xWe(e,t){const n={src:DT(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function _We(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function wWe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return cve(e,t);const i={href:DT(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function EWe(e,t){const n={href:DT(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function SWe(e,t,n){const r=e.all(t),i=n?TWe(n):fve(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function TWe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=fve(n[r])}return t}function fve(e){const t=e.spread;return t??e.children.length>1}function CWe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function AWe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function kWe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function RWe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function IWe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=_g(t.children[1]),u=x9(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function PWe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function NWe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Are=9,kre=32;function DWe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Rre(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Rre(t.slice(i),i>0,!1)),s.join("")}function Rre(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Are||s===kre;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Are||s===kre;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function OWe(e,t){const n={type:"text",value:DWe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function MWe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const LWe={blockquote:fWe,break:dWe,code:hWe,delete:pWe,emphasis:mWe,footnoteReference:gWe,heading:yWe,html:vWe,imageReference:bWe,image:xWe,inlineCode:_We,linkReference:wWe,link:EWe,listItem:SWe,list:CWe,paragraph:AWe,root:kWe,strong:RWe,table:IWe,tableCell:NWe,tableRow:PWe,text:OWe,thematicBreak:MWe,toml:m6,yaml:m6,definition:m6,footnoteDefinition:m6};function m6(){}const dve=-1,w9=0,m8=1,g8=2,xG=3,_G=4,wG=5,EG=6,hve=7,pve=8,Ire=typeof self=="object"?self:globalThis,FWe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case w9:case dve:return n(o,i);case m8:{const a=n([],i);for(const u of o)a.push(r(u));return a}case g8:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case xG:return n(new Date(o),i);case _G:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case wG:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case EG:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case hve:{const{name:a,message:u}=o;return n(new Ire[a](u),i)}case pve:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Ire[s](o),i)};return r},Pre=e=>FWe(new Map,e)(0),Y2="",{toString:$We}={},{keys:BWe}=Object,ZC=e=>{const t=typeof e;if(t!=="object"||!e)return[w9,t];const n=$We.call(e).slice(8,-1);switch(n){case"Array":return[m8,Y2];case"Object":return[g8,Y2];case"Date":return[xG,Y2];case"RegExp":return[_G,Y2];case"Map":return[wG,Y2];case"Set":return[EG,Y2]}return n.includes("Array")?[m8,n]:n.includes("Error")?[hve,n]:[g8,n]},g6=([e,t])=>e===w9&&(t==="function"||t==="symbol"),jWe=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=ZC(o);switch(a){case w9:{let c=o;switch(u){case"bigint":a=pve,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([dve],o)}return i([a,c],o)}case m8:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case g8:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of BWe(o))(e||!g6(ZC(o[d])))&&c.push([s(d),s(o[d])]);return f}case xG:return i([a,o.toISOString()],o);case _G:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case wG:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(g6(ZC(d))||g6(ZC(h))))&&c.push([s(d),s(h)]);return f}case EG:{const c=[],f=i([a,c],o);for(const d of o)(e||!g6(ZC(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Nre=(e,{json:t,lossy:n}={})=>{const r=[];return jWe(!(t||n),!!t,new Map,r)(e),r},bS=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Pre(Nre(e,t)):structuredClone(e):(e,t)=>Pre(Nre(e,t));function UWe(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function zWe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function VWe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||UWe,r=e.options.footnoteBackLabel||zWe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=DT(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let y=typeof n=="string"?n:n(u,h);typeof y=="string"&&(y={type:"text",value:y}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(y)?y:[y]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const y=g.children[g.children.length-1];y&&y.type==="text"?y.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const b={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,b),a.push(b)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...bS(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const mve=function(e){if(e==null)return GWe;if(typeof e=="function")return E9(e);if(typeof e=="object")return Array.isArray(e)?HWe(e):qWe(e);if(typeof e=="string")return WWe(e);throw new Error("Expected function, string, or object as test")};function HWe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=mve(e[n]);return E9(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function qWe(e){const t=e;return E9(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function WWe(e){return E9(t);function t(n){return n&&n.type===e}}function E9(e){return t;function t(n,r,i){return!!(YWe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function GWe(){return!0}function YWe(e){return e!==null&&typeof e=="object"&&"type"in e}const gve=[],KWe=!0,Dre=!1,XWe="skip";function QWe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=mve(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=gve,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=JWe(n(u,c)),h[0]===Dre))return h;if("children"in u&&u.children){const b=u;if(b.children&&h[0]!==XWe)for(m=(r?b.children.length:-1)+o,g=c.concat(b);m>-1&&m<b.children.length;){const y=b.children[m];if(p=a(y,m,g)(),p[0]===Dre)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function JWe(e){return Array.isArray(e)?e:typeof e=="number"?[KWe,e]:e==null?gve:[e]}function SG(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),QWe(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const CU={}.hasOwnProperty,ZWe={};function eGe(e,t){const n=t||ZWe,r=new Map,i=new Map,s=new Map,o={...LWe,...n.handlers},a={all:l,applyData:nGe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:tGe,wrap:iGe};return SG(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(CU.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,b=bS(g);return b.children=a.all(c),b}return bS(c)}return(a.options.unknownHandler||rGe)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Ore(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Ore(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function tGe(e,t){e.position&&(t.position=LVe(e))}function nGe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,bS(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function rGe(e,t){const n=t.data||{},r="value"in t&&!(CU.call(n,"hProperties")||CU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function iGe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Ore(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Mre(e,t){const n=eGe(e,t),r=n.one(e,void 0),i=VWe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function sGe(e,t){return e&&"run"in e?async function(n,r){const i=Mre(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Mre(n,{file:r,...t||e})}}function Lre(e){if(e)throw e}var $F,Fre;function oGe(){if(Fre)return $F;Fre=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),f=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!f)return!1;var d;for(d in l);return typeof d>"u"||e.call(l,d)},o=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return $F=function u(){var l,c,f,d,h,p,m=arguments[0],g=1,b=arguments.length,y=!1;for(typeof m=="boolean"&&(y=m,m=arguments[1]||{},g=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});g<b;++g)if(l=arguments[g],l!=null)for(c in l)f=a(m,c),d=a(l,c),m!==d&&(y&&d&&(s(d)||(h=i(d)))?(h?(h=!1,p=f&&i(f)?f:[]):p=f&&s(f)?f:{},o(m,{name:c,newValue:u(y,p,d)})):typeof d<"u"&&o(m,{name:c,newValue:d}));return m},$F}var aGe=oGe();const BF=gc(aGe);function AU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function uGe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?lGe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function lGe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Em={basename:cGe,dirname:fGe,extname:dGe,join:hGe,sep:"/"};function cGe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');_R(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function fGe(e){if(_R(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function dGe(e){_R(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function hGe(...e){let t=-1,n;for(;++t<e.length;)_R(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":pGe(n)}function pGe(e){_R(e);const t=e.codePointAt(0)===47;let n=mGe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function mGe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function _R(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const gGe={cwd:yGe};function yGe(){return"/"}function kU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function vGe(e){if(typeof e=="string")e=new URL(e);else if(!kU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return bGe(e)}function bGe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const jF=["history","path","basename","stem","extname","dirname"];class yve{constructor(t){let n;t?kU(t)?n={path:t}:typeof t=="string"||xGe(t)?n={value:t}:n=t:n={},this.cwd=gGe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<jF.length;){const s=jF[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)jF.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Em.basename(this.path):void 0}set basename(t){zF(t,"basename"),UF(t,"basename"),this.path=Em.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Em.dirname(this.path):void 0}set dirname(t){$re(this.basename,"dirname"),this.path=Em.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Em.extname(this.path):void 0}set extname(t){if(UF(t,"extname"),$re(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Em.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){kU(t)&&(t=vGe(t)),zF(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Em.basename(this.path,this.extname):void 0}set stem(t){zF(t,"stem"),UF(t,"stem"),this.path=Em.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new yc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function UF(e,t){if(e&&e.includes(Em.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Em.sep+"`")}function zF(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function $re(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function xGe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const _Ge=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},wGe={}.hasOwnProperty;class TG extends _Ge{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=uGe()}copy(){const t=new TG;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(BF(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(qF("data",this.frozen),this.namespace[t]=n,this):wGe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(qF("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=y6(t),r=this.parser||this.Parser;return VF("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),VF("process",this.parser||this.Parser),HF("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=y6(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);TGe(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),VF("processSync",this.parser||this.Parser),HF("processSync",this.compiler||this.Compiler),this.process(t,i),jre("processSync","process",n),r;function i(s,o){n=!0,Lre(s),r=o}}run(t,n,r){Bre(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=y6(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),jre("runSync","run",r),i;function s(o,a){Lre(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=y6(n),i=this.compiler||this.Compiler;return HF("stringify",i),Bre(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(qF("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=BF(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];AU(m)&&AU(h)&&(h=BF(!0,m,h)),r[d]=[l,h,...p]}}}}const EGe=new TG().freeze();function VF(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function HF(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function qF(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Bre(e){if(!AU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function jre(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function y6(e){return SGe(e)?e:new yve(e)}function SGe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function TGe(e){return typeof e=="string"||CGe(e)}function CGe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const AGe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Ure=[],zre={allowDangerousHtml:!0},kGe=/^(https?|ircs?|mailto|xmpp)$/i,RGe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function IGe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Ure,u=e.remarkPlugins||Ure,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...zre}:zre,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||PGe,h=EGe().use(cWe).use(u).use(sGe,l).use(a),p=new yve;typeof r=="string"&&(p.value=r);for(const y of RGe)Object.hasOwn(e,y.from)&&(""+y.from+(y.to?"use `"+y.to+"` instead":"remove it")+AGe+y.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),SG(g,b),zVe(g,{Fragment:A.Fragment,components:s,ignoreInvalidStyle:!0,jsx:A.jsx,jsxs:A.jsxs,passKeys:!0,passNode:!0});function b(y,x,w){if(y.type==="raw"&&w&&typeof x=="number")return c?w.children.splice(x,1):w.children[x]={type:"text",value:y.value},x;if(y.type==="element"){let S;for(S in MF)if(Object.hasOwn(MF,S)&&Object.hasOwn(y.properties,S)){const C=y.properties[S],R=MF[S];(R===null||R.includes(y.tagName))&&(y.properties[S]=d(String(C||""),S,y))}}if(y.type==="element"){let S=t?!t.includes(y.tagName):o?o.includes(y.tagName):!1;if(!S&&n&&typeof x=="number"&&(S=!n(y,x,w)),S&&w&&typeof x=="number")return f&&y.children?w.children.splice(x,1,...y.children):w.children.splice(x,1),x}}}function PGe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||kGe.test(e.slice(0,t))?e:""}const Vre=/[#.]/g;function NGe(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Vre.lastIndex=i;const a=Vre.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const DGe=new Set(["button","menu","reset","submit"]),RU={}.hasOwnProperty;function vve(e,t,n){const r=n&&FGe(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=NGe(s,t),l.tagName=l.tagName.toLowerCase(),r&&RU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),OGe(o,l.tagName)){let c;for(c in o)RU.call(o,c)&&MGe(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)IU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function OGe(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?DGe.has(e.type.toLowerCase()):!("value"in e)}function MGe(e,t,n,r){const i=b9(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=lre(r):i.commaSeparated?o=ire(r):i.commaOrSpaceSeparated?o=lre(ire(r).join(" ")):o=Hre(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?LGe(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Hre(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function IU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)IU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?IU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Hre(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||Zk(n)===Zk(t)))return!0}return n}function LGe(e){const t=[];let n;for(n in e)RU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function FGe(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const $Ge=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],BGe=vve(xR,"div"),jGe=vve(Gb,"g",$Ge),WF=/\r?\n|\r/g;function UGe(e){const t=String(e),n=[];for(WF.lastIndex=0;WF.test(t);)n.push(WF.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const E_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bve={}.hasOwnProperty,zGe=Object.prototype;function VGe(e,t){const n=t;return CG({file:n.file||void 0,location:!1,schema:n.space==="svg"?Gb:xR,verbose:n.verbose||!1},e)}function CG(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},RP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:xve(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=UGe(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},RP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},RP(e,r,n),n}default:return n=HGe(e,t),n}}function xve(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=CG(e,t[n]);r.push(i)}return r}function HGe(e,t){const n=e.schema;e.schema=t.namespaceURI===E_.svg?Gb:xR;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;bve.call(zGe,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?jGe:BGe)(t.tagName,i,xve(e,t.childNodes));if(RP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&kE(u.startTag),c=u&&u.endTag&&kE(u.endTag),f=CG(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function RP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=qGe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function qGe(e,t,n){const r=kE(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)bve.call(n.attrs,o)&&(s[b9(e.schema,o).property]=kE(n.attrs[o]));n.startTag;const a=kE(n.startTag),u=n.endTag?kE(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function kE(e){const t=qre({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=qre({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function qre(e){return e.line&&e.column?e:void 0}const Wre={}.hasOwnProperty;function _ve(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Wre.call(i,e)){const u=String(i[e]);o=Wre.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const WGe={}.hasOwnProperty,wve=_ve("type",{handlers:{root:YGe,element:ZGe,text:QGe,comment:JGe,doctype:XGe}});function GGe(e,t){const r=t.space;return wve(e,r==="svg"?Gb:xR)}function YGe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=AG(e.children,n,t),OT(e,n),n}function KGe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=AG(e.children,n,t),OT(e,n),n}function XGe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return OT(e,t),t}function QGe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return OT(e,t),t}function JGe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return OT(e,t),t}function ZGe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Gb);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&WGe.call(e.properties,s)){const u=eYe(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:E_[o],childNodes:[],parentNode:null};return a.childNodes=AG(e.children,a,r),OT(e,a),e.tagName==="template"&&e.content&&(a.content=KGe(e.content,r)),a}function eYe(e,t,n){const r=b9(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?L1e(n):q1e(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=E_[r.space]}return i}function AG(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=wve(e[r],n);s.parentNode=t,i.push(s)}return i}function OT(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const tYe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],nYe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ao="�";var we;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(we=we||(we={}));const Bf={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Eve(e){return e>=55296&&e<=57343}function rYe(e){return e>=56320&&e<=57343}function iYe(e,t){return(e-55296)*1024+9216+t}function Sve(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Tve(e){return e>=64976&&e<=65007||nYe.has(e)}var ft;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ft=ft||(ft={}));const sYe=65536;class oYe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=sYe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(rYe(n))return this.pos++,this._addGap(),iYe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,we.EOF;return this._err(ft.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,we.EOF;const r=this.html.charCodeAt(n);return r===we.CARRIAGE_RETURN?we.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,we.EOF;let t=this.html.charCodeAt(this.pos);return t===we.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,we.LINE_FEED):t===we.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Eve(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===we.LINE_FEED||t===we.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Sve(t)?this._err(ft.controlCharacterInInputStream):Tve(t)&&this._err(ft.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Ur;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Ur=Ur||(Ur={}));function Cve(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const xv=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),aYe=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)));var GF;const uYe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),lYe=(GF=String.fromCodePoint)!==null&&GF!==void 0?GF:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function cYe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=uYe.get(e))!==null&&t!==void 0?t:e}var Du;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Du||(Du={}));const fYe=32;var Lm;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Lm||(Lm={}));function PU(e){return e>=Du.ZERO&&e<=Du.NINE}function dYe(e){return e>=Du.UPPER_A&&e<=Du.UPPER_F||e>=Du.LOWER_A&&e<=Du.LOWER_F}function hYe(e){return e>=Du.UPPER_A&&e<=Du.UPPER_Z||e>=Du.LOWER_A&&e<=Du.LOWER_Z||PU(e)}function pYe(e){return e===Du.EQUALS||hYe(e)}var Ru;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ru||(Ru={}));var p_;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(p_||(p_={}));class mYe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ru.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=p_.Strict}startEntity(t){this.decodeMode=t,this.state=Ru.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ru.EntityStart:return t.charCodeAt(n)===Du.NUM?(this.state=Ru.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ru.NamedEntity,this.stateNamedEntity(t,n));case Ru.NumericStart:return this.stateNumericStart(t,n);case Ru.NumericDecimal:return this.stateNumericDecimal(t,n);case Ru.NumericHex:return this.stateNumericHex(t,n);case Ru.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|fYe)===Du.LOWER_X?(this.state=Ru.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ru.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(PU(i)||dYe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(PU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Du.SEMI)this.consumed+=1;else if(this.decodeMode===p_.Strict)return 0;return this.emitCodePoint(cYe(this.result),this.consumed),this.errors&&(t!==Du.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Lm.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=kve(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===p_.Attribute&&(s===0||pYe(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Lm.VALUE_LENGTH)>>14,s!==0){if(o===Du.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==p_.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Lm.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Lm.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ru.NamedEntity:return this.result!==0&&(this.decodeMode!==p_.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ru.NumericDecimal:return this.emitNumericEntity(0,2);case Ru.NumericHex:return this.emitNumericEntity(0,3);case Ru.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ru.EntityStart:return 0}}}function Ave(e){let t="";const n=new mYe(e,r=>t+=lYe(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function kve(e,t,n,r){const i=(t&Lm.BRANCH_LENGTH)>>7,s=t&Lm.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}Ave(xv);Ave(aYe);var bt;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(bt=bt||(bt={}));var Kv;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Kv=Kv||(Kv={}));var Vd;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Vd=Vd||(Vd={}));var Ze;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ze=Ze||(Ze={}));var K;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(K=K||(K={}));const gYe=new Map([[Ze.A,K.A],[Ze.ADDRESS,K.ADDRESS],[Ze.ANNOTATION_XML,K.ANNOTATION_XML],[Ze.APPLET,K.APPLET],[Ze.AREA,K.AREA],[Ze.ARTICLE,K.ARTICLE],[Ze.ASIDE,K.ASIDE],[Ze.B,K.B],[Ze.BASE,K.BASE],[Ze.BASEFONT,K.BASEFONT],[Ze.BGSOUND,K.BGSOUND],[Ze.BIG,K.BIG],[Ze.BLOCKQUOTE,K.BLOCKQUOTE],[Ze.BODY,K.BODY],[Ze.BR,K.BR],[Ze.BUTTON,K.BUTTON],[Ze.CAPTION,K.CAPTION],[Ze.CENTER,K.CENTER],[Ze.CODE,K.CODE],[Ze.COL,K.COL],[Ze.COLGROUP,K.COLGROUP],[Ze.DD,K.DD],[Ze.DESC,K.DESC],[Ze.DETAILS,K.DETAILS],[Ze.DIALOG,K.DIALOG],[Ze.DIR,K.DIR],[Ze.DIV,K.DIV],[Ze.DL,K.DL],[Ze.DT,K.DT],[Ze.EM,K.EM],[Ze.EMBED,K.EMBED],[Ze.FIELDSET,K.FIELDSET],[Ze.FIGCAPTION,K.FIGCAPTION],[Ze.FIGURE,K.FIGURE],[Ze.FONT,K.FONT],[Ze.FOOTER,K.FOOTER],[Ze.FOREIGN_OBJECT,K.FOREIGN_OBJECT],[Ze.FORM,K.FORM],[Ze.FRAME,K.FRAME],[Ze.FRAMESET,K.FRAMESET],[Ze.H1,K.H1],[Ze.H2,K.H2],[Ze.H3,K.H3],[Ze.H4,K.H4],[Ze.H5,K.H5],[Ze.H6,K.H6],[Ze.HEAD,K.HEAD],[Ze.HEADER,K.HEADER],[Ze.HGROUP,K.HGROUP],[Ze.HR,K.HR],[Ze.HTML,K.HTML],[Ze.I,K.I],[Ze.IMG,K.IMG],[Ze.IMAGE,K.IMAGE],[Ze.INPUT,K.INPUT],[Ze.IFRAME,K.IFRAME],[Ze.KEYGEN,K.KEYGEN],[Ze.LABEL,K.LABEL],[Ze.LI,K.LI],[Ze.LINK,K.LINK],[Ze.LISTING,K.LISTING],[Ze.MAIN,K.MAIN],[Ze.MALIGNMARK,K.MALIGNMARK],[Ze.MARQUEE,K.MARQUEE],[Ze.MATH,K.MATH],[Ze.MENU,K.MENU],[Ze.META,K.META],[Ze.MGLYPH,K.MGLYPH],[Ze.MI,K.MI],[Ze.MO,K.MO],[Ze.MN,K.MN],[Ze.MS,K.MS],[Ze.MTEXT,K.MTEXT],[Ze.NAV,K.NAV],[Ze.NOBR,K.NOBR],[Ze.NOFRAMES,K.NOFRAMES],[Ze.NOEMBED,K.NOEMBED],[Ze.NOSCRIPT,K.NOSCRIPT],[Ze.OBJECT,K.OBJECT],[Ze.OL,K.OL],[Ze.OPTGROUP,K.OPTGROUP],[Ze.OPTION,K.OPTION],[Ze.P,K.P],[Ze.PARAM,K.PARAM],[Ze.PLAINTEXT,K.PLAINTEXT],[Ze.PRE,K.PRE],[Ze.RB,K.RB],[Ze.RP,K.RP],[Ze.RT,K.RT],[Ze.RTC,K.RTC],[Ze.RUBY,K.RUBY],[Ze.S,K.S],[Ze.SCRIPT,K.SCRIPT],[Ze.SECTION,K.SECTION],[Ze.SELECT,K.SELECT],[Ze.SOURCE,K.SOURCE],[Ze.SMALL,K.SMALL],[Ze.SPAN,K.SPAN],[Ze.STRIKE,K.STRIKE],[Ze.STRONG,K.STRONG],[Ze.STYLE,K.STYLE],[Ze.SUB,K.SUB],[Ze.SUMMARY,K.SUMMARY],[Ze.SUP,K.SUP],[Ze.TABLE,K.TABLE],[Ze.TBODY,K.TBODY],[Ze.TEMPLATE,K.TEMPLATE],[Ze.TEXTAREA,K.TEXTAREA],[Ze.TFOOT,K.TFOOT],[Ze.TD,K.TD],[Ze.TH,K.TH],[Ze.THEAD,K.THEAD],[Ze.TITLE,K.TITLE],[Ze.TR,K.TR],[Ze.TRACK,K.TRACK],[Ze.TT,K.TT],[Ze.U,K.U],[Ze.UL,K.UL],[Ze.SVG,K.SVG],[Ze.VAR,K.VAR],[Ze.WBR,K.WBR],[Ze.XMP,K.XMP]]);function MT(e){var t;return(t=gYe.get(e))!==null&&t!==void 0?t:K.UNKNOWN}const Ht=K,yYe={[bt.HTML]:new Set([Ht.ADDRESS,Ht.APPLET,Ht.AREA,Ht.ARTICLE,Ht.ASIDE,Ht.BASE,Ht.BASEFONT,Ht.BGSOUND,Ht.BLOCKQUOTE,Ht.BODY,Ht.BR,Ht.BUTTON,Ht.CAPTION,Ht.CENTER,Ht.COL,Ht.COLGROUP,Ht.DD,Ht.DETAILS,Ht.DIR,Ht.DIV,Ht.DL,Ht.DT,Ht.EMBED,Ht.FIELDSET,Ht.FIGCAPTION,Ht.FIGURE,Ht.FOOTER,Ht.FORM,Ht.FRAME,Ht.FRAMESET,Ht.H1,Ht.H2,Ht.H3,Ht.H4,Ht.H5,Ht.H6,Ht.HEAD,Ht.HEADER,Ht.HGROUP,Ht.HR,Ht.HTML,Ht.IFRAME,Ht.IMG,Ht.INPUT,Ht.LI,Ht.LINK,Ht.LISTING,Ht.MAIN,Ht.MARQUEE,Ht.MENU,Ht.META,Ht.NAV,Ht.NOEMBED,Ht.NOFRAMES,Ht.NOSCRIPT,Ht.OBJECT,Ht.OL,Ht.P,Ht.PARAM,Ht.PLAINTEXT,Ht.PRE,Ht.SCRIPT,Ht.SECTION,Ht.SELECT,Ht.SOURCE,Ht.STYLE,Ht.SUMMARY,Ht.TABLE,Ht.TBODY,Ht.TD,Ht.TEMPLATE,Ht.TEXTAREA,Ht.TFOOT,Ht.TH,Ht.THEAD,Ht.TITLE,Ht.TR,Ht.TRACK,Ht.UL,Ht.WBR,Ht.XMP]),[bt.MATHML]:new Set([Ht.MI,Ht.MO,Ht.MN,Ht.MS,Ht.MTEXT,Ht.ANNOTATION_XML]),[bt.SVG]:new Set([Ht.TITLE,Ht.FOREIGN_OBJECT,Ht.DESC]),[bt.XLINK]:new Set,[bt.XML]:new Set,[bt.XMLNS]:new Set};function Rve(e){return e===Ht.H1||e===Ht.H2||e===Ht.H3||e===Ht.H4||e===Ht.H5||e===Ht.H6}Ze.STYLE,Ze.SCRIPT,Ze.XMP,Ze.IFRAME,Ze.NOEMBED,Ze.NOFRAMES,Ze.PLAINTEXT;const vYe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Te;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Te||(Te={}));const ya={DATA:Te.DATA,RCDATA:Te.RCDATA,RAWTEXT:Te.RAWTEXT,SCRIPT_DATA:Te.SCRIPT_DATA,PLAINTEXT:Te.PLAINTEXT,CDATA_SECTION:Te.CDATA_SECTION};function gk(e){return e>=we.DIGIT_0&&e<=we.DIGIT_9}function C3(e){return e>=we.LATIN_CAPITAL_A&&e<=we.LATIN_CAPITAL_Z}function bYe(e){return e>=we.LATIN_SMALL_A&&e<=we.LATIN_SMALL_Z}function _v(e){return bYe(e)||C3(e)}function NU(e){return _v(e)||gk(e)}function Ive(e){return e>=we.LATIN_CAPITAL_A&&e<=we.LATIN_CAPITAL_F}function Pve(e){return e>=we.LATIN_SMALL_A&&e<=we.LATIN_SMALL_F}function xYe(e){return gk(e)||Ive(e)||Pve(e)}function v6(e){return e+32}function Nve(e){return e===we.SPACE||e===we.LINE_FEED||e===we.TABULATION||e===we.FORM_FEED}function _Ye(e){return e===we.EQUALS_SIGN||NU(e)}function Gre(e){return Nve(e)||e===we.SOLIDUS||e===we.GREATER_THAN_SIGN}class wYe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Te.DATA,this.returnState=Te.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new oYe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Ur.START_TAG,tagName:"",tagID:K.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Ur.END_TAG,tagName:"",tagID:K.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Ur.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Ur.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Cve(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ft.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=MT(t.tagName),t.type===Ur.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ft.endTagWithAttributes),t.selfClosing&&this._err(ft.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Ur.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Ur.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Ur.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Ur.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=Nve(t)?Ur.WHITESPACE_CHARACTER:t===we.NULL?Ur.NULL_CHARACTER:Ur.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Ur.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=xv[0];s>=0&&(s=kve(xv,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=xv[s];const a=o&Lm.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==we.SEMICOLON&&this._isCharacterReferenceInAttribute()&&_Ye(this.preprocessor.peek(1))?(n=[we.AMPERSAND],s+=u):(n=u===0?[xv[s]&~Lm.VALUE_LENGTH]:u===1?[xv[++s]]:[xv[++s],xv[++s]],r=0,i=t!==we.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(ft.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===Te.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Te.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Te.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case Te.DATA:{this._stateData(t);break}case Te.RCDATA:{this._stateRcdata(t);break}case Te.RAWTEXT:{this._stateRawtext(t);break}case Te.SCRIPT_DATA:{this._stateScriptData(t);break}case Te.PLAINTEXT:{this._statePlaintext(t);break}case Te.TAG_OPEN:{this._stateTagOpen(t);break}case Te.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case Te.TAG_NAME:{this._stateTagName(t);break}case Te.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case Te.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case Te.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case Te.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case Te.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case Te.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case Te.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case Te.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case Te.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case Te.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case Te.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case Te.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case Te.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case Te.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case Te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case Te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case Te.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case Te.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case Te.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case Te.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case Te.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case Te.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case Te.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case Te.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case Te.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case Te.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case Te.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case Te.BOGUS_COMMENT:{this._stateBogusComment(t);break}case Te.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case Te.COMMENT_START:{this._stateCommentStart(t);break}case Te.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case Te.COMMENT:{this._stateComment(t);break}case Te.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case Te.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case Te.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case Te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case Te.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case Te.COMMENT_END:{this._stateCommentEnd(t);break}case Te.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case Te.DOCTYPE:{this._stateDoctype(t);break}case Te.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case Te.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case Te.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case Te.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case Te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case Te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case Te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case Te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case Te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case Te.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case Te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case Te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case Te.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case Te.CDATA_SECTION:{this._stateCdataSection(t);break}case Te.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case Te.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case Te.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case Te.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case Te.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case Te.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case Te.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case Te.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case Te.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case Te.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case we.LESS_THAN_SIGN:{this.state=Te.TAG_OPEN;break}case we.AMPERSAND:{this.returnState=Te.DATA,this.state=Te.CHARACTER_REFERENCE;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitCodePoint(t);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case we.AMPERSAND:{this.returnState=Te.RCDATA,this.state=Te.CHARACTER_REFERENCE;break}case we.LESS_THAN_SIGN:{this.state=Te.RCDATA_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(ao);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case we.LESS_THAN_SIGN:{this.state=Te.RAWTEXT_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(ao);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(ao);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(ao);break}case we.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(_v(t))this._createStartTagToken(),this.state=Te.TAG_NAME,this._stateTagName(t);else switch(t){case we.EXCLAMATION_MARK:{this.state=Te.MARKUP_DECLARATION_OPEN;break}case we.SOLIDUS:{this.state=Te.END_TAG_OPEN;break}case we.QUESTION_MARK:{this._err(ft.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Te.BOGUS_COMMENT,this._stateBogusComment(t);break}case we.EOF:{this._err(ft.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ft.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Te.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(_v(t))this._createEndTagToken(),this.state=Te.TAG_NAME,this._stateTagName(t);else switch(t){case we.GREATER_THAN_SIGN:{this._err(ft.missingEndTagName),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ft.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Te.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BEFORE_ATTRIBUTE_NAME;break}case we.SOLIDUS:{this.state=Te.SELF_CLOSING_START_TAG;break}case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentTagToken();break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.tagName+=ao;break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(C3(t)?v6(t):t)}}_stateRcdataLessThanSign(t){t===we.SOLIDUS?this.state=Te.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Te.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){_v(t)?(this.state=Te.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=Te.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Te.BEFORE_ATTRIBUTE_NAME,!1;case we.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Te.SELF_CLOSING_START_TAG,!1;case we.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Te.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Te.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===we.SOLIDUS?this.state=Te.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Te.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){_v(t)?(this.state=Te.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=Te.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Te.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case we.SOLIDUS:{this.state=Te.SCRIPT_DATA_END_TAG_OPEN;break}case we.EXCLAMATION_MARK:{this.state=Te.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Te.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){_v(t)?(this.state=Te.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=Te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===we.HYPHEN_MINUS?(this.state=Te.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===we.HYPHEN_MINUS?(this.state=Te.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(ao);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.state=Te.SCRIPT_DATA_ESCAPED,this._emitChars(ao);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Te.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case we.HYPHEN_MINUS:{this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case we.GREATER_THAN_SIGN:{this.state=Te.SCRIPT_DATA,this._emitChars(">");break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.state=Te.SCRIPT_DATA_ESCAPED,this._emitChars(ao);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Te.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===we.SOLIDUS?this.state=Te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:_v(t)?(this._emitChars("<"),this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=Te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){_v(t)?(this.state=Te.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=Te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Bf.SCRIPT,!1)&&Gre(this.preprocessor.peek(Bf.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Bf.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this._emitChars(ao);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ao);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case we.HYPHEN_MINUS:{this._emitChars("-");break}case we.LESS_THAN_SIGN:{this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case we.GREATER_THAN_SIGN:{this.state=Te.SCRIPT_DATA,this._emitChars(">");break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ao);break}case we.EOF:{this._err(ft.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===we.SOLIDUS?(this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Bf.SCRIPT,!1)&&Gre(this.preprocessor.peek(Bf.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Bf.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Te.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Te.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.SOLIDUS:case we.GREATER_THAN_SIGN:case we.EOF:{this.state=Te.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case we.EQUALS_SIGN:{this._err(ft.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Te.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Te.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:case we.SOLIDUS:case we.GREATER_THAN_SIGN:case we.EOF:{this._leaveAttrName(),this.state=Te.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case we.EQUALS_SIGN:{this._leaveAttrName(),this.state=Te.BEFORE_ATTRIBUTE_VALUE;break}case we.QUOTATION_MARK:case we.APOSTROPHE:case we.LESS_THAN_SIGN:{this._err(ft.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.currentAttr.name+=ao;break}default:this.currentAttr.name+=String.fromCodePoint(C3(t)?v6(t):t)}}_stateAfterAttributeName(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.SOLIDUS:{this.state=Te.SELF_CLOSING_START_TAG;break}case we.EQUALS_SIGN:{this.state=Te.BEFORE_ATTRIBUTE_VALUE;break}case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentTagToken();break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Te.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.QUOTATION_MARK:{this.state=Te.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case we.APOSTROPHE:{this.state=Te.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingAttributeValue),this.state=Te.DATA,this.emitCurrentTagToken();break}default:this.state=Te.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case we.QUOTATION_MARK:{this.state=Te.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case we.AMPERSAND:{this.returnState=Te.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Te.CHARACTER_REFERENCE;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.currentAttr.value+=ao;break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case we.APOSTROPHE:{this.state=Te.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case we.AMPERSAND:{this.returnState=Te.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Te.CHARACTER_REFERENCE;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.currentAttr.value+=ao;break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this._leaveAttrValue(),this.state=Te.BEFORE_ATTRIBUTE_NAME;break}case we.AMPERSAND:{this.returnState=Te.ATTRIBUTE_VALUE_UNQUOTED,this.state=Te.CHARACTER_REFERENCE;break}case we.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Te.DATA,this.emitCurrentTagToken();break}case we.NULL:{this._err(ft.unexpectedNullCharacter),this.currentAttr.value+=ao;break}case we.QUOTATION_MARK:case we.APOSTROPHE:case we.LESS_THAN_SIGN:case we.EQUALS_SIGN:case we.GRAVE_ACCENT:{this._err(ft.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this._leaveAttrValue(),this.state=Te.BEFORE_ATTRIBUTE_NAME;break}case we.SOLIDUS:{this._leaveAttrValue(),this.state=Te.SELF_CLOSING_START_TAG;break}case we.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Te.DATA,this.emitCurrentTagToken();break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this._err(ft.missingWhitespaceBetweenAttributes),this.state=Te.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case we.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Te.DATA,this.emitCurrentTagToken();break}case we.EOF:{this._err(ft.eofInTag),this._emitEOFToken();break}default:this._err(ft.unexpectedSolidusInTag),this.state=Te.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentComment(n);break}case we.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.data+=ao;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Bf.DASH_DASH,!0)?(this._createCommentToken(Bf.DASH_DASH.length+1),this.state=Te.COMMENT_START):this._consumeSequenceIfMatch(Bf.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Bf.DOCTYPE.length+1),this.state=Te.DOCTYPE):this._consumeSequenceIfMatch(Bf.CDATA_START,!0)?this.inForeignNode?this.state=Te.CDATA_SECTION:(this._err(ft.cdataInHtmlContent),this._createCommentToken(Bf.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Te.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ft.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Te.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case we.HYPHEN_MINUS:{this.state=Te.COMMENT_START_DASH;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptClosingOfEmptyComment),this.state=Te.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Te.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case we.HYPHEN_MINUS:{this.state=Te.COMMENT_END;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptClosingOfEmptyComment),this.state=Te.DATA,this.emitCurrentComment(n);break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Te.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case we.HYPHEN_MINUS:{this.state=Te.COMMENT_END_DASH;break}case we.LESS_THAN_SIGN:{n.data+="<",this.state=Te.COMMENT_LESS_THAN_SIGN;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.data+=ao;break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case we.EXCLAMATION_MARK:{n.data+="!",this.state=Te.COMMENT_LESS_THAN_SIGN_BANG;break}case we.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Te.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===we.HYPHEN_MINUS?this.state=Te.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Te.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===we.HYPHEN_MINUS?this.state=Te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Te.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==we.GREATER_THAN_SIGN&&t!==we.EOF&&this._err(ft.nestedComment),this.state=Te.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case we.HYPHEN_MINUS:{this.state=Te.COMMENT_END;break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Te.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentComment(n);break}case we.EXCLAMATION_MARK:{this.state=Te.COMMENT_END_BANG;break}case we.HYPHEN_MINUS:{n.data+="-";break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Te.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case we.HYPHEN_MINUS:{n.data+="--!",this.state=Te.COMMENT_END_DASH;break}case we.GREATER_THAN_SIGN:{this._err(ft.incorrectlyClosedComment),this.state=Te.DATA,this.emitCurrentComment(n);break}case we.EOF:{this._err(ft.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Te.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BEFORE_DOCTYPE_NAME;break}case we.GREATER_THAN_SIGN:{this.state=Te.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case we.EOF:{this._err(ft.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingWhitespaceBeforeDoctypeName),this.state=Te.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(C3(t))this._createDoctypeToken(String.fromCharCode(v6(t))),this.state=Te.DOCTYPE_NAME;else switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.NULL:{this._err(ft.unexpectedNullCharacter),this._createDoctypeToken(ao),this.state=Te.DOCTYPE_NAME;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=Te.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.AFTER_DOCTYPE_NAME;break}case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.name+=ao;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(C3(t)?v6(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Bf.PUBLIC,!1)?this.state=Te.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Bf.SYSTEM,!1)?this.state=Te.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ft.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case we.QUOTATION_MARK:{this._err(ft.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{this._err(ft.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.QUOTATION_MARK:{n.publicId="",this.state=Te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{n.publicId="",this.state=Te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case we.QUOTATION_MARK:{this.state=Te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.publicId+=ao;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case we.APOSTROPHE:{this.state=Te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.publicId+=ao;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case we.GREATER_THAN_SIGN:{this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.QUOTATION_MARK:{this._err(ft.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{this._err(ft.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.QUOTATION_MARK:{n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:{this.state=Te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case we.QUOTATION_MARK:{this._err(ft.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{this._err(ft.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.QUOTATION_MARK:{n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case we.APOSTROPHE:{n.systemId="",this.state=Te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case we.GREATER_THAN_SIGN:{this._err(ft.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.DATA,this.emitCurrentDoctype(n);break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case we.QUOTATION_MARK:{this.state=Te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.systemId+=ao;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case we.APOSTROPHE:{this.state=Te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case we.NULL:{this._err(ft.unexpectedNullCharacter),n.systemId+=ao;break}case we.GREATER_THAN_SIGN:{this._err(ft.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case we.SPACE:case we.LINE_FEED:case we.TABULATION:case we.FORM_FEED:break;case we.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.EOF:{this._err(ft.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ft.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case we.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Te.DATA;break}case we.NULL:{this._err(ft.unexpectedNullCharacter);break}case we.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case we.RIGHT_SQUARE_BRACKET:{this.state=Te.CDATA_SECTION_BRACKET;break}case we.EOF:{this._err(ft.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===we.RIGHT_SQUARE_BRACKET?this.state=Te.CDATA_SECTION_END:(this._emitChars("]"),this.state=Te.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case we.GREATER_THAN_SIGN:{this.state=Te.DATA;break}case we.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Te.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===we.NUMBER_SIGN?this.state=Te.NUMERIC_CHARACTER_REFERENCE:NU(t)?(this.state=Te.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(we.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(we.AMPERSAND),this.state=Te.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){NU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===we.SEMICOLON&&this._err(ft.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===we.LATIN_SMALL_X||t===we.LATIN_CAPITAL_X?this.state=Te.HEXADEMICAL_CHARACTER_REFERENCE_START:gk(t)?(this.state=Te.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(ft.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(we.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(we.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){xYe(t)?(this.state=Te.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(ft.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(we.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(we.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){Ive(t)?this.charRefCode=this.charRefCode*16+t-55:Pve(t)?this.charRefCode=this.charRefCode*16+t-87:gk(t)?this.charRefCode=this.charRefCode*16+t-48:t===we.SEMICOLON?this.state=Te.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ft.missingSemicolonAfterCharacterReference),this.state=Te.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){gk(t)?this.charRefCode=this.charRefCode*10+t-48:t===we.SEMICOLON?this.state=Te.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ft.missingSemicolonAfterCharacterReference),this.state=Te.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===we.NULL)this._err(ft.nullCharacterReference),this.charRefCode=we.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ft.characterReferenceOutsideUnicodeRange),this.charRefCode=we.REPLACEMENT_CHARACTER;else if(Eve(this.charRefCode))this._err(ft.surrogateCharacterReference),this.charRefCode=we.REPLACEMENT_CHARACTER;else if(Tve(this.charRefCode))this._err(ft.noncharacterCharacterReference);else if(Sve(this.charRefCode)||this.charRefCode===we.CARRIAGE_RETURN){this._err(ft.controlCharacterReference);const n=vYe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Dve=new Set([K.DD,K.DT,K.LI,K.OPTGROUP,K.OPTION,K.P,K.RB,K.RP,K.RT,K.RTC]),Yre=new Set([...Dve,K.CAPTION,K.COLGROUP,K.TBODY,K.TD,K.TFOOT,K.TH,K.THEAD,K.TR]),b6=new Map([[K.APPLET,bt.HTML],[K.CAPTION,bt.HTML],[K.HTML,bt.HTML],[K.MARQUEE,bt.HTML],[K.OBJECT,bt.HTML],[K.TABLE,bt.HTML],[K.TD,bt.HTML],[K.TEMPLATE,bt.HTML],[K.TH,bt.HTML],[K.ANNOTATION_XML,bt.MATHML],[K.MI,bt.MATHML],[K.MN,bt.MATHML],[K.MO,bt.MATHML],[K.MS,bt.MATHML],[K.MTEXT,bt.MATHML],[K.DESC,bt.SVG],[K.FOREIGN_OBJECT,bt.SVG],[K.TITLE,bt.SVG]]),EYe=[K.H1,K.H2,K.H3,K.H4,K.H5,K.H6],SYe=[K.TR,K.TEMPLATE,K.HTML],TYe=[K.TBODY,K.TFOOT,K.THEAD,K.TEMPLATE,K.HTML],CYe=[K.TABLE,K.TEMPLATE,K.HTML],AYe=[K.TD,K.TH];class kYe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=K.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===K.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===bt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==bt.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(EYe,bt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(AYe,bt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(CYe,bt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(TYe,bt.HTML)}clearBackToTableRowContext(){this.clearBackTo(SYe,bt.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===K.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===K.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===bt.HTML)return!0;if(b6.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(Rve(n)&&r===bt.HTML)return!0;if(b6.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===bt.HTML)return!0;if((r===K.UL||r===K.OL)&&i===bt.HTML||b6.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===bt.HTML)return!0;if(r===K.BUTTON&&i===bt.HTML||b6.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===bt.HTML){if(r===t)return!0;if(r===K.TABLE||r===K.TEMPLATE||r===K.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===bt.HTML){if(n===K.TBODY||n===K.THEAD||n===K.TFOOT)return!0;if(n===K.TABLE||n===K.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===bt.HTML){if(r===t)return!0;if(r!==K.OPTION&&r!==K.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Dve.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Yre.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Yre.has(this.currentTagId);)this.pop()}}const YF=3;var s0;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(s0=s0||(s0={}));const Kre={type:s0.Marker};class RYe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===s0.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<YF)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<YF)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=YF&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Kre)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:s0.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:s0.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Kre);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===s0.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===s0.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===s0.Element&&n.element===t)}}function Xre(e){return{nodeName:"#text",value:e,parentNode:null}}const vE={createDocument(){return{nodeName:"#document",mode:Vd.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};vE.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(vE.isTextNode(n)){n.value+=t;return}}vE.appendChild(e,Xre(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&vE.isTextNode(r)?r.value+=t:vE.insertBefore(e,Xre(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Ove="html",IYe="about:legacy-compat",PYe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Mve=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],NYe=[...Mve,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],DYe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Lve=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],OYe=[...Lve,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Qre(e,t){return t.some(n=>e.startsWith(n))}function MYe(e){return e.name===Ove&&e.publicId===null&&(e.systemId===null||e.systemId===IYe)}function LYe(e){if(e.name!==Ove)return Vd.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===PYe)return Vd.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),DYe.has(n))return Vd.QUIRKS;let r=t===null?NYe:Mve;if(Qre(n,r))return Vd.QUIRKS;if(r=t===null?Lve:OYe,Qre(n,r))return Vd.LIMITED_QUIRKS}return Vd.NO_QUIRKS}const Jre={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},FYe="definitionurl",$Ye="definitionURL",BYe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),jYe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:bt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:bt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:bt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:bt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:bt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:bt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:bt.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:bt.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:bt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:bt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:bt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:bt.XMLNS}]]),UYe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),zYe=new Set([K.B,K.BIG,K.BLOCKQUOTE,K.BODY,K.BR,K.CENTER,K.CODE,K.DD,K.DIV,K.DL,K.DT,K.EM,K.EMBED,K.H1,K.H2,K.H3,K.H4,K.H5,K.H6,K.HEAD,K.HR,K.I,K.IMG,K.LI,K.LISTING,K.MENU,K.META,K.NOBR,K.OL,K.P,K.PRE,K.RUBY,K.S,K.SMALL,K.SPAN,K.STRONG,K.STRIKE,K.SUB,K.SUP,K.TABLE,K.TT,K.U,K.UL,K.VAR]);function VYe(e){const t=e.tagID;return t===K.FONT&&e.attrs.some(({name:r})=>r===Kv.COLOR||r===Kv.SIZE||r===Kv.FACE)||zYe.has(t)}function Fve(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===FYe){e.attrs[t].name=$Ye;break}}function $ve(e){for(let t=0;t<e.attrs.length;t++){const n=BYe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function kG(e){for(let t=0;t<e.attrs.length;t++){const n=jYe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function HYe(e){const t=UYe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=MT(e.tagName))}function qYe(e,t){return t===bt.MATHML&&(e===K.MI||e===K.MO||e===K.MN||e===K.MS||e===K.MTEXT)}function WYe(e,t,n){if(t===bt.MATHML&&e===K.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Kv.ENCODING){const i=n[r].value.toLowerCase();return i===Jre.TEXT_HTML||i===Jre.APPLICATION_XML}}return t===bt.SVG&&(e===K.FOREIGN_OBJECT||e===K.DESC||e===K.TITLE)}function GYe(e,t,n,r){return(!r||r===bt.HTML)&&WYe(e,t,n)||(!r||r===bt.MATHML)&&qYe(e,t)}const YYe="hidden",KYe=8,XYe=3;var Pe;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Pe||(Pe={}));const QYe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Bve=new Set([K.TABLE,K.TBODY,K.TFOOT,K.THEAD,K.TR]),Zre={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:vE,onParseError:null};class eie{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=Pe.INITIAL,this.originalInsertionMode=Pe.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Zre,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new wYe(this.options,this),this.activeFormattingElements=new RYe(this.treeAdapter),this.fragmentContextID=r?MT(this.treeAdapter.getTagName(r)):K.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new kYe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Zre,...n};t??(t=r.treeAdapter.createElement(Ze.TEMPLATE,bt.HTML,[]));const i=r.treeAdapter.createElement("documentmock",bt.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===K.TEMPLATE&&s.tmplInsertionModeStack.unshift(Pe.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:QYe,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===bt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,bt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Pe.TEXT}switchToPlaintextParsing(){this.insertionMode=Pe.TEXT,this.originalInsertionMode=Pe.IN_BODY,this.tokenizer.state=ya.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ze.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==bt.HTML))switch(this.fragmentContextID){case K.TITLE:case K.TEXTAREA:{this.tokenizer.state=ya.RCDATA;break}case K.STYLE:case K.XMP:case K.IFRAME:case K.NOEMBED:case K.NOFRAMES:case K.NOSCRIPT:{this.tokenizer.state=ya.RAWTEXT;break}case K.SCRIPT:{this.tokenizer.state=ya.SCRIPT_DATA;break}case K.PLAINTEXT:{this.tokenizer.state=ya.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,bt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,bt.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ze.HTML,bt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,K.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Ur.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===K.SVG&&this.treeAdapter.getTagName(n)===Ze.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===bt.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===K.MGLYPH||t.tagID===K.MALIGNMARK)&&!this._isIntegrationPoint(r,n,bt.HTML)}_processToken(t){switch(t.type){case Ur.CHARACTER:{this.onCharacter(t);break}case Ur.NULL_CHARACTER:{this.onNullCharacter(t);break}case Ur.COMMENT:{this.onComment(t);break}case Ur.DOCTYPE:{this.onDoctype(t);break}case Ur.START_TAG:{this._processStartTag(t);break}case Ur.END_TAG:{this.onEndTag(t);break}case Ur.EOF:{this.onEof(t);break}case Ur.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return GYe(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===s0.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Pe.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(K.P),this.openElements.popUntilTagNamePopped(K.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case K.TR:{this.insertionMode=Pe.IN_ROW;return}case K.TBODY:case K.THEAD:case K.TFOOT:{this.insertionMode=Pe.IN_TABLE_BODY;return}case K.CAPTION:{this.insertionMode=Pe.IN_CAPTION;return}case K.COLGROUP:{this.insertionMode=Pe.IN_COLUMN_GROUP;return}case K.TABLE:{this.insertionMode=Pe.IN_TABLE;return}case K.BODY:{this.insertionMode=Pe.IN_BODY;return}case K.FRAMESET:{this.insertionMode=Pe.IN_FRAMESET;return}case K.SELECT:{this._resetInsertionModeForSelect(t);return}case K.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case K.HTML:{this.insertionMode=this.headElement?Pe.AFTER_HEAD:Pe.BEFORE_HEAD;return}case K.TD:case K.TH:{if(t>0){this.insertionMode=Pe.IN_CELL;return}break}case K.HEAD:{if(t>0){this.insertionMode=Pe.IN_HEAD;return}break}}this.insertionMode=Pe.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===K.TEMPLATE)break;if(r===K.TABLE){this.insertionMode=Pe.IN_SELECT_IN_TABLE;return}}this.insertionMode=Pe.IN_SELECT}_isElementCausesFosterParenting(t){return Bve.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case K.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===bt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case K.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return yYe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){AXe(this,t);return}switch(this.insertionMode){case Pe.INITIAL:{eA(this,t);break}case Pe.BEFORE_HTML:{yk(this,t);break}case Pe.BEFORE_HEAD:{vk(this,t);break}case Pe.IN_HEAD:{bk(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{xk(this,t);break}case Pe.AFTER_HEAD:{_k(this,t);break}case Pe.IN_BODY:case Pe.IN_CAPTION:case Pe.IN_CELL:case Pe.IN_TEMPLATE:{Uve(this,t);break}case Pe.TEXT:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case Pe.IN_TABLE:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:{KF(this,t);break}case Pe.IN_TABLE_TEXT:{Gve(this,t);break}case Pe.IN_COLUMN_GROUP:{y8(this,t);break}case Pe.AFTER_BODY:{v8(this,t);break}case Pe.AFTER_AFTER_BODY:{IP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){CXe(this,t);return}switch(this.insertionMode){case Pe.INITIAL:{eA(this,t);break}case Pe.BEFORE_HTML:{yk(this,t);break}case Pe.BEFORE_HEAD:{vk(this,t);break}case Pe.IN_HEAD:{bk(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{xk(this,t);break}case Pe.AFTER_HEAD:{_k(this,t);break}case Pe.TEXT:{this._insertCharacters(t);break}case Pe.IN_TABLE:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:{KF(this,t);break}case Pe.IN_COLUMN_GROUP:{y8(this,t);break}case Pe.AFTER_BODY:{v8(this,t);break}case Pe.AFTER_AFTER_BODY:{IP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){DU(this,t);return}switch(this.insertionMode){case Pe.INITIAL:case Pe.BEFORE_HTML:case Pe.BEFORE_HEAD:case Pe.IN_HEAD:case Pe.IN_HEAD_NO_SCRIPT:case Pe.AFTER_HEAD:case Pe.IN_BODY:case Pe.IN_TABLE:case Pe.IN_CAPTION:case Pe.IN_COLUMN_GROUP:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:case Pe.IN_CELL:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:case Pe.IN_TEMPLATE:case Pe.IN_FRAMESET:case Pe.AFTER_FRAMESET:{DU(this,t);break}case Pe.IN_TABLE_TEXT:{tA(this,t);break}case Pe.AFTER_BODY:{iKe(this,t);break}case Pe.AFTER_AFTER_BODY:case Pe.AFTER_AFTER_FRAMESET:{sKe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case Pe.INITIAL:{oKe(this,t);break}case Pe.BEFORE_HEAD:case Pe.IN_HEAD:case Pe.IN_HEAD_NO_SCRIPT:case Pe.AFTER_HEAD:{this._err(t,ft.misplacedDoctype);break}case Pe.IN_TABLE_TEXT:{tA(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ft.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?kXe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case Pe.INITIAL:{eA(this,t);break}case Pe.BEFORE_HTML:{aKe(this,t);break}case Pe.BEFORE_HEAD:{lKe(this,t);break}case Pe.IN_HEAD:{$0(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{dKe(this,t);break}case Pe.AFTER_HEAD:{pKe(this,t);break}case Pe.IN_BODY:{vc(this,t);break}case Pe.IN_TABLE:{xS(this,t);break}case Pe.IN_TABLE_TEXT:{tA(this,t);break}case Pe.IN_CAPTION:{cXe(this,t);break}case Pe.IN_COLUMN_GROUP:{PG(this,t);break}case Pe.IN_TABLE_BODY:{C9(this,t);break}case Pe.IN_ROW:{A9(this,t);break}case Pe.IN_CELL:{hXe(this,t);break}case Pe.IN_SELECT:{Xve(this,t);break}case Pe.IN_SELECT_IN_TABLE:{mXe(this,t);break}case Pe.IN_TEMPLATE:{yXe(this,t);break}case Pe.AFTER_BODY:{bXe(this,t);break}case Pe.IN_FRAMESET:{xXe(this,t);break}case Pe.AFTER_FRAMESET:{wXe(this,t);break}case Pe.AFTER_AFTER_BODY:{SXe(this,t);break}case Pe.AFTER_AFTER_FRAMESET:{TXe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?RXe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case Pe.INITIAL:{eA(this,t);break}case Pe.BEFORE_HTML:{uKe(this,t);break}case Pe.BEFORE_HEAD:{cKe(this,t);break}case Pe.IN_HEAD:{fKe(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{hKe(this,t);break}case Pe.AFTER_HEAD:{mKe(this,t);break}case Pe.IN_BODY:{T9(this,t);break}case Pe.TEXT:{eXe(this,t);break}case Pe.IN_TABLE:{t4(this,t);break}case Pe.IN_TABLE_TEXT:{tA(this,t);break}case Pe.IN_CAPTION:{fXe(this,t);break}case Pe.IN_COLUMN_GROUP:{dXe(this,t);break}case Pe.IN_TABLE_BODY:{OU(this,t);break}case Pe.IN_ROW:{Kve(this,t);break}case Pe.IN_CELL:{pXe(this,t);break}case Pe.IN_SELECT:{Qve(this,t);break}case Pe.IN_SELECT_IN_TABLE:{gXe(this,t);break}case Pe.IN_TEMPLATE:{vXe(this,t);break}case Pe.AFTER_BODY:{Zve(this,t);break}case Pe.IN_FRAMESET:{_Xe(this,t);break}case Pe.AFTER_FRAMESET:{EXe(this,t);break}case Pe.AFTER_AFTER_BODY:{IP(this,t);break}}}onEof(t){switch(this.insertionMode){case Pe.INITIAL:{eA(this,t);break}case Pe.BEFORE_HTML:{yk(this,t);break}case Pe.BEFORE_HEAD:{vk(this,t);break}case Pe.IN_HEAD:{bk(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{xk(this,t);break}case Pe.AFTER_HEAD:{_k(this,t);break}case Pe.IN_BODY:case Pe.IN_TABLE:case Pe.IN_CAPTION:case Pe.IN_COLUMN_GROUP:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:case Pe.IN_CELL:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:{qve(this,t);break}case Pe.TEXT:{tXe(this,t);break}case Pe.IN_TABLE_TEXT:{tA(this,t);break}case Pe.IN_TEMPLATE:{Jve(this,t);break}case Pe.AFTER_BODY:case Pe.IN_FRAMESET:case Pe.AFTER_FRAMESET:case Pe.AFTER_AFTER_BODY:case Pe.AFTER_AFTER_FRAMESET:{IG(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===we.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case Pe.IN_HEAD:case Pe.IN_HEAD_NO_SCRIPT:case Pe.AFTER_HEAD:case Pe.TEXT:case Pe.IN_COLUMN_GROUP:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:case Pe.IN_FRAMESET:case Pe.AFTER_FRAMESET:{this._insertCharacters(t);break}case Pe.IN_BODY:case Pe.IN_CAPTION:case Pe.IN_CELL:case Pe.IN_TEMPLATE:case Pe.AFTER_BODY:case Pe.AFTER_AFTER_BODY:case Pe.AFTER_AFTER_FRAMESET:{jve(this,t);break}case Pe.IN_TABLE:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:{KF(this,t);break}case Pe.IN_TABLE_TEXT:{Wve(this,t);break}}}}function JYe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Hve(e,t),n}function ZYe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function eKe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=XYe;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=tKe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function tKe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function nKe(e,t,n){const r=e.treeAdapter.getTagName(t),i=MT(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===K.TEMPLATE&&s===bt.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function rKe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function RG(e,t){for(let n=0;n<KYe;n++){const r=JYe(e,t);if(!r)break;const i=ZYe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=eKe(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&nKe(e,o,s),rKe(e,i,r)}}function DU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function iKe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function sKe(e,t){e._appendCommentNode(t,e.document)}function IG(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function oKe(e,t){e._setDocumentType(t);const n=t.forceQuirks?Vd.QUIRKS:LYe(t);MYe(t)||e._err(t,ft.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Pe.BEFORE_HTML}function eA(e,t){e._err(t,ft.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Vd.QUIRKS),e.insertionMode=Pe.BEFORE_HTML,e._processToken(t)}function aKe(e,t){t.tagID===K.HTML?(e._insertElement(t,bt.HTML),e.insertionMode=Pe.BEFORE_HEAD):yk(e,t)}function uKe(e,t){const n=t.tagID;(n===K.HTML||n===K.HEAD||n===K.BODY||n===K.BR)&&yk(e,t)}function yk(e,t){e._insertFakeRootElement(),e.insertionMode=Pe.BEFORE_HEAD,e._processToken(t)}function lKe(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.HEAD:{e._insertElement(t,bt.HTML),e.headElement=e.openElements.current,e.insertionMode=Pe.IN_HEAD;break}default:vk(e,t)}}function cKe(e,t){const n=t.tagID;n===K.HEAD||n===K.BODY||n===K.HTML||n===K.BR?vk(e,t):e._err(t,ft.endTagWithoutMatchingOpenElement)}function vk(e,t){e._insertFakeElement(Ze.HEAD,K.HEAD),e.headElement=e.openElements.current,e.insertionMode=Pe.IN_HEAD,e._processToken(t)}function $0(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.BASE:case K.BASEFONT:case K.BGSOUND:case K.LINK:case K.META:{e._appendElement(t,bt.HTML),t.ackSelfClosing=!0;break}case K.TITLE:{e._switchToTextParsing(t,ya.RCDATA);break}case K.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ya.RAWTEXT):(e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_HEAD_NO_SCRIPT);break}case K.NOFRAMES:case K.STYLE:{e._switchToTextParsing(t,ya.RAWTEXT);break}case K.SCRIPT:{e._switchToTextParsing(t,ya.SCRIPT_DATA);break}case K.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Pe.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Pe.IN_TEMPLATE);break}case K.HEAD:{e._err(t,ft.misplacedStartTagForHeadElement);break}default:bk(e,t)}}function fKe(e,t){switch(t.tagID){case K.HEAD:{e.openElements.pop(),e.insertionMode=Pe.AFTER_HEAD;break}case K.BODY:case K.BR:case K.HTML:{bk(e,t);break}case K.TEMPLATE:{Mw(e,t);break}default:e._err(t,ft.endTagWithoutMatchingOpenElement)}}function Mw(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==K.TEMPLATE&&e._err(t,ft.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(K.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ft.endTagWithoutMatchingOpenElement)}function bk(e,t){e.openElements.pop(),e.insertionMode=Pe.AFTER_HEAD,e._processToken(t)}function dKe(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.BASEFONT:case K.BGSOUND:case K.HEAD:case K.LINK:case K.META:case K.NOFRAMES:case K.STYLE:{$0(e,t);break}case K.NOSCRIPT:{e._err(t,ft.nestedNoscriptInHead);break}default:xk(e,t)}}function hKe(e,t){switch(t.tagID){case K.NOSCRIPT:{e.openElements.pop(),e.insertionMode=Pe.IN_HEAD;break}case K.BR:{xk(e,t);break}default:e._err(t,ft.endTagWithoutMatchingOpenElement)}}function xk(e,t){const n=t.type===Ur.EOF?ft.openElementsLeftAfterEof:ft.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Pe.IN_HEAD,e._processToken(t)}function pKe(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.BODY:{e._insertElement(t,bt.HTML),e.framesetOk=!1,e.insertionMode=Pe.IN_BODY;break}case K.FRAMESET:{e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_FRAMESET;break}case K.BASE:case K.BASEFONT:case K.BGSOUND:case K.LINK:case K.META:case K.NOFRAMES:case K.SCRIPT:case K.STYLE:case K.TEMPLATE:case K.TITLE:{e._err(t,ft.abandonedHeadElementChild),e.openElements.push(e.headElement,K.HEAD),$0(e,t),e.openElements.remove(e.headElement);break}case K.HEAD:{e._err(t,ft.misplacedStartTagForHeadElement);break}default:_k(e,t)}}function mKe(e,t){switch(t.tagID){case K.BODY:case K.HTML:case K.BR:{_k(e,t);break}case K.TEMPLATE:{Mw(e,t);break}default:e._err(t,ft.endTagWithoutMatchingOpenElement)}}function _k(e,t){e._insertFakeElement(Ze.BODY,K.BODY),e.insertionMode=Pe.IN_BODY,S9(e,t)}function S9(e,t){switch(t.type){case Ur.CHARACTER:{Uve(e,t);break}case Ur.WHITESPACE_CHARACTER:{jve(e,t);break}case Ur.COMMENT:{DU(e,t);break}case Ur.START_TAG:{vc(e,t);break}case Ur.END_TAG:{T9(e,t);break}case Ur.EOF:{qve(e,t);break}}}function jve(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Uve(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function gKe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function yKe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function vKe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_FRAMESET)}function bKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML)}function xKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),Rve(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,bt.HTML)}function _Ke(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function wKe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML),n||(e.formElement=e.openElements.current))}function EKe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===K.LI&&i===K.LI||(n===K.DD||n===K.DT)&&(i===K.DD||i===K.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==K.ADDRESS&&i!==K.DIV&&i!==K.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML)}function SKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML),e.tokenizer.state=ya.PLAINTEXT}function TKe(e,t){e.openElements.hasInScope(K.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(K.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.framesetOk=!1}function CKe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ze.A);n&&(RG(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function AKe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function kKe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(K.NOBR)&&(RG(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,bt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function RKe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function IKe(e,t){e.treeAdapter.getDocumentMode(e.document)!==Vd.QUIRKS&&e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._insertElement(t,bt.HTML),e.framesetOk=!1,e.insertionMode=Pe.IN_TABLE}function zve(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,bt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Vve(e){const t=Cve(e,Kv.TYPE);return t!=null&&t.toLowerCase()===YYe}function PKe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,bt.HTML),Vve(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function NKe(e,t){e._appendElement(t,bt.HTML),t.ackSelfClosing=!0}function DKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._appendElement(t,bt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function OKe(e,t){t.tagName=Ze.IMG,t.tagID=K.IMG,zve(e,t)}function MKe(e,t){e._insertElement(t,bt.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ya.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Pe.TEXT}function LKe(e,t){e.openElements.hasInButtonScope(K.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ya.RAWTEXT)}function FKe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ya.RAWTEXT)}function tie(e,t){e._switchToTextParsing(t,ya.RAWTEXT)}function $Ke(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Pe.IN_TABLE||e.insertionMode===Pe.IN_CAPTION||e.insertionMode===Pe.IN_TABLE_BODY||e.insertionMode===Pe.IN_ROW||e.insertionMode===Pe.IN_CELL?Pe.IN_SELECT_IN_TABLE:Pe.IN_SELECT}function BKe(e,t){e.openElements.currentTagId===K.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML)}function jKe(e,t){e.openElements.hasInScope(K.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,bt.HTML)}function UKe(e,t){e.openElements.hasInScope(K.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(K.RTC),e._insertElement(t,bt.HTML)}function zKe(e,t){e._reconstructActiveFormattingElements(),Fve(t),kG(t),t.selfClosing?e._appendElement(t,bt.MATHML):e._insertElement(t,bt.MATHML),t.ackSelfClosing=!0}function VKe(e,t){e._reconstructActiveFormattingElements(),$ve(t),kG(t),t.selfClosing?e._appendElement(t,bt.SVG):e._insertElement(t,bt.SVG),t.ackSelfClosing=!0}function nie(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,bt.HTML)}function vc(e,t){switch(t.tagID){case K.I:case K.S:case K.B:case K.U:case K.EM:case K.TT:case K.BIG:case K.CODE:case K.FONT:case K.SMALL:case K.STRIKE:case K.STRONG:{AKe(e,t);break}case K.A:{CKe(e,t);break}case K.H1:case K.H2:case K.H3:case K.H4:case K.H5:case K.H6:{xKe(e,t);break}case K.P:case K.DL:case K.OL:case K.UL:case K.DIV:case K.DIR:case K.NAV:case K.MAIN:case K.MENU:case K.ASIDE:case K.CENTER:case K.FIGURE:case K.FOOTER:case K.HEADER:case K.HGROUP:case K.DIALOG:case K.DETAILS:case K.ADDRESS:case K.ARTICLE:case K.SECTION:case K.SUMMARY:case K.FIELDSET:case K.BLOCKQUOTE:case K.FIGCAPTION:{bKe(e,t);break}case K.LI:case K.DD:case K.DT:{EKe(e,t);break}case K.BR:case K.IMG:case K.WBR:case K.AREA:case K.EMBED:case K.KEYGEN:{zve(e,t);break}case K.HR:{DKe(e,t);break}case K.RB:case K.RTC:{jKe(e,t);break}case K.RT:case K.RP:{UKe(e,t);break}case K.PRE:case K.LISTING:{_Ke(e,t);break}case K.XMP:{LKe(e,t);break}case K.SVG:{VKe(e,t);break}case K.HTML:{gKe(e,t);break}case K.BASE:case K.LINK:case K.META:case K.STYLE:case K.TITLE:case K.SCRIPT:case K.BGSOUND:case K.BASEFONT:case K.TEMPLATE:{$0(e,t);break}case K.BODY:{yKe(e,t);break}case K.FORM:{wKe(e,t);break}case K.NOBR:{kKe(e,t);break}case K.MATH:{zKe(e,t);break}case K.TABLE:{IKe(e,t);break}case K.INPUT:{PKe(e,t);break}case K.PARAM:case K.TRACK:case K.SOURCE:{NKe(e,t);break}case K.IMAGE:{OKe(e,t);break}case K.BUTTON:{TKe(e,t);break}case K.APPLET:case K.OBJECT:case K.MARQUEE:{RKe(e,t);break}case K.IFRAME:{FKe(e,t);break}case K.SELECT:{$Ke(e,t);break}case K.OPTION:case K.OPTGROUP:{BKe(e,t);break}case K.NOEMBED:{tie(e,t);break}case K.FRAMESET:{vKe(e,t);break}case K.TEXTAREA:{MKe(e,t);break}case K.NOSCRIPT:{e.options.scriptingEnabled?tie(e,t):nie(e,t);break}case K.PLAINTEXT:{SKe(e,t);break}case K.COL:case K.TH:case K.TD:case K.TR:case K.HEAD:case K.FRAME:case K.TBODY:case K.TFOOT:case K.THEAD:case K.CAPTION:case K.COLGROUP:break;default:nie(e,t)}}function HKe(e,t){if(e.openElements.hasInScope(K.BODY)&&(e.insertionMode=Pe.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function qKe(e,t){e.openElements.hasInScope(K.BODY)&&(e.insertionMode=Pe.AFTER_BODY,Zve(e,t))}function WKe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function GKe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(K.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(K.FORM):n&&e.openElements.remove(n))}function YKe(e){e.openElements.hasInButtonScope(K.P)||e._insertFakeElement(Ze.P,K.P),e._closePElement()}function KKe(e){e.openElements.hasInListItemScope(K.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(K.LI),e.openElements.popUntilTagNamePopped(K.LI))}function XKe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function QKe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function JKe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function ZKe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ze.BR,K.BR),e.openElements.pop(),e.framesetOk=!1}function Hve(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==K.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function T9(e,t){switch(t.tagID){case K.A:case K.B:case K.I:case K.S:case K.U:case K.EM:case K.TT:case K.BIG:case K.CODE:case K.FONT:case K.NOBR:case K.SMALL:case K.STRIKE:case K.STRONG:{RG(e,t);break}case K.P:{YKe(e);break}case K.DL:case K.UL:case K.OL:case K.DIR:case K.DIV:case K.NAV:case K.PRE:case K.MAIN:case K.MENU:case K.ASIDE:case K.BUTTON:case K.CENTER:case K.FIGURE:case K.FOOTER:case K.HEADER:case K.HGROUP:case K.DIALOG:case K.ADDRESS:case K.ARTICLE:case K.DETAILS:case K.SECTION:case K.SUMMARY:case K.LISTING:case K.FIELDSET:case K.BLOCKQUOTE:case K.FIGCAPTION:{WKe(e,t);break}case K.LI:{KKe(e);break}case K.DD:case K.DT:{XKe(e,t);break}case K.H1:case K.H2:case K.H3:case K.H4:case K.H5:case K.H6:{QKe(e);break}case K.BR:{ZKe(e);break}case K.BODY:{HKe(e,t);break}case K.HTML:{qKe(e,t);break}case K.FORM:{GKe(e);break}case K.APPLET:case K.OBJECT:case K.MARQUEE:{JKe(e,t);break}case K.TEMPLATE:{Mw(e,t);break}default:Hve(e,t)}}function qve(e,t){e.tmplInsertionModeStack.length>0?Jve(e,t):IG(e,t)}function eXe(e,t){var n;t.tagID===K.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function tXe(e,t){e._err(t,ft.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function KF(e,t){if(Bve.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Pe.IN_TABLE_TEXT,t.type){case Ur.CHARACTER:{Gve(e,t);break}case Ur.WHITESPACE_CHARACTER:{Wve(e,t);break}}else wR(e,t)}function nXe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_CAPTION}function rXe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_COLUMN_GROUP}function iXe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ze.COLGROUP,K.COLGROUP),e.insertionMode=Pe.IN_COLUMN_GROUP,PG(e,t)}function sXe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_TABLE_BODY}function oXe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ze.TBODY,K.TBODY),e.insertionMode=Pe.IN_TABLE_BODY,C9(e,t)}function aXe(e,t){e.openElements.hasInTableScope(K.TABLE)&&(e.openElements.popUntilTagNamePopped(K.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function uXe(e,t){Vve(t)?e._appendElement(t,bt.HTML):wR(e,t),t.ackSelfClosing=!0}function lXe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,bt.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function xS(e,t){switch(t.tagID){case K.TD:case K.TH:case K.TR:{oXe(e,t);break}case K.STYLE:case K.SCRIPT:case K.TEMPLATE:{$0(e,t);break}case K.COL:{iXe(e,t);break}case K.FORM:{lXe(e,t);break}case K.TABLE:{aXe(e,t);break}case K.TBODY:case K.TFOOT:case K.THEAD:{sXe(e,t);break}case K.INPUT:{uXe(e,t);break}case K.CAPTION:{nXe(e,t);break}case K.COLGROUP:{rXe(e,t);break}default:wR(e,t)}}function t4(e,t){switch(t.tagID){case K.TABLE:{e.openElements.hasInTableScope(K.TABLE)&&(e.openElements.popUntilTagNamePopped(K.TABLE),e._resetInsertionMode());break}case K.TEMPLATE:{Mw(e,t);break}case K.BODY:case K.CAPTION:case K.COL:case K.COLGROUP:case K.HTML:case K.TBODY:case K.TD:case K.TFOOT:case K.TH:case K.THEAD:case K.TR:break;default:wR(e,t)}}function wR(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,S9(e,t),e.fosterParentingEnabled=n}function Wve(e,t){e.pendingCharacterTokens.push(t)}function Gve(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function tA(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)wR(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Yve=new Set([K.CAPTION,K.COL,K.COLGROUP,K.TBODY,K.TD,K.TFOOT,K.TH,K.THEAD,K.TR]);function cXe(e,t){const n=t.tagID;Yve.has(n)?e.openElements.hasInTableScope(K.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(K.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Pe.IN_TABLE,xS(e,t)):vc(e,t)}function fXe(e,t){const n=t.tagID;switch(n){case K.CAPTION:case K.TABLE:{e.openElements.hasInTableScope(K.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(K.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Pe.IN_TABLE,n===K.TABLE&&t4(e,t));break}case K.BODY:case K.COL:case K.COLGROUP:case K.HTML:case K.TBODY:case K.TD:case K.TFOOT:case K.TH:case K.THEAD:case K.TR:break;default:T9(e,t)}}function PG(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.COL:{e._appendElement(t,bt.HTML),t.ackSelfClosing=!0;break}case K.TEMPLATE:{$0(e,t);break}default:y8(e,t)}}function dXe(e,t){switch(t.tagID){case K.COLGROUP:{e.openElements.currentTagId===K.COLGROUP&&(e.openElements.pop(),e.insertionMode=Pe.IN_TABLE);break}case K.TEMPLATE:{Mw(e,t);break}case K.COL:break;default:y8(e,t)}}function y8(e,t){e.openElements.currentTagId===K.COLGROUP&&(e.openElements.pop(),e.insertionMode=Pe.IN_TABLE,e._processToken(t))}function C9(e,t){switch(t.tagID){case K.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_ROW;break}case K.TH:case K.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ze.TR,K.TR),e.insertionMode=Pe.IN_ROW,A9(e,t);break}case K.CAPTION:case K.COL:case K.COLGROUP:case K.TBODY:case K.TFOOT:case K.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE,xS(e,t));break}default:xS(e,t)}}function OU(e,t){const n=t.tagID;switch(t.tagID){case K.TBODY:case K.TFOOT:case K.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE);break}case K.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE,t4(e,t));break}case K.BODY:case K.CAPTION:case K.COL:case K.COLGROUP:case K.HTML:case K.TD:case K.TH:case K.TR:break;default:t4(e,t)}}function A9(e,t){switch(t.tagID){case K.TH:case K.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,bt.HTML),e.insertionMode=Pe.IN_CELL,e.activeFormattingElements.insertMarker();break}case K.CAPTION:case K.COL:case K.COLGROUP:case K.TBODY:case K.TFOOT:case K.THEAD:case K.TR:{e.openElements.hasInTableScope(K.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY,C9(e,t));break}default:xS(e,t)}}function Kve(e,t){switch(t.tagID){case K.TR:{e.openElements.hasInTableScope(K.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY);break}case K.TABLE:{e.openElements.hasInTableScope(K.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY,OU(e,t));break}case K.TBODY:case K.TFOOT:case K.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(K.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY,OU(e,t));break}case K.BODY:case K.CAPTION:case K.COL:case K.COLGROUP:case K.HTML:case K.TD:case K.TH:break;default:t4(e,t)}}function hXe(e,t){const n=t.tagID;Yve.has(n)?(e.openElements.hasInTableScope(K.TD)||e.openElements.hasInTableScope(K.TH))&&(e._closeTableCell(),A9(e,t)):vc(e,t)}function pXe(e,t){const n=t.tagID;switch(n){case K.TD:case K.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Pe.IN_ROW);break}case K.TABLE:case K.TBODY:case K.TFOOT:case K.THEAD:case K.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Kve(e,t));break}case K.BODY:case K.CAPTION:case K.COL:case K.COLGROUP:case K.HTML:break;default:T9(e,t)}}function Xve(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.OPTION:{e.openElements.currentTagId===K.OPTION&&e.openElements.pop(),e._insertElement(t,bt.HTML);break}case K.OPTGROUP:{e.openElements.currentTagId===K.OPTION&&e.openElements.pop(),e.openElements.currentTagId===K.OPTGROUP&&e.openElements.pop(),e._insertElement(t,bt.HTML);break}case K.INPUT:case K.KEYGEN:case K.TEXTAREA:case K.SELECT:{e.openElements.hasInSelectScope(K.SELECT)&&(e.openElements.popUntilTagNamePopped(K.SELECT),e._resetInsertionMode(),t.tagID!==K.SELECT&&e._processStartTag(t));break}case K.SCRIPT:case K.TEMPLATE:{$0(e,t);break}}}function Qve(e,t){switch(t.tagID){case K.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===K.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===K.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===K.OPTGROUP&&e.openElements.pop();break}case K.OPTION:{e.openElements.currentTagId===K.OPTION&&e.openElements.pop();break}case K.SELECT:{e.openElements.hasInSelectScope(K.SELECT)&&(e.openElements.popUntilTagNamePopped(K.SELECT),e._resetInsertionMode());break}case K.TEMPLATE:{Mw(e,t);break}}}function mXe(e,t){const n=t.tagID;n===K.CAPTION||n===K.TABLE||n===K.TBODY||n===K.TFOOT||n===K.THEAD||n===K.TR||n===K.TD||n===K.TH?(e.openElements.popUntilTagNamePopped(K.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Xve(e,t)}function gXe(e,t){const n=t.tagID;n===K.CAPTION||n===K.TABLE||n===K.TBODY||n===K.TFOOT||n===K.THEAD||n===K.TR||n===K.TD||n===K.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(K.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Qve(e,t)}function yXe(e,t){switch(t.tagID){case K.BASE:case K.BASEFONT:case K.BGSOUND:case K.LINK:case K.META:case K.NOFRAMES:case K.SCRIPT:case K.STYLE:case K.TEMPLATE:case K.TITLE:{$0(e,t);break}case K.CAPTION:case K.COLGROUP:case K.TBODY:case K.TFOOT:case K.THEAD:{e.tmplInsertionModeStack[0]=Pe.IN_TABLE,e.insertionMode=Pe.IN_TABLE,xS(e,t);break}case K.COL:{e.tmplInsertionModeStack[0]=Pe.IN_COLUMN_GROUP,e.insertionMode=Pe.IN_COLUMN_GROUP,PG(e,t);break}case K.TR:{e.tmplInsertionModeStack[0]=Pe.IN_TABLE_BODY,e.insertionMode=Pe.IN_TABLE_BODY,C9(e,t);break}case K.TD:case K.TH:{e.tmplInsertionModeStack[0]=Pe.IN_ROW,e.insertionMode=Pe.IN_ROW,A9(e,t);break}default:e.tmplInsertionModeStack[0]=Pe.IN_BODY,e.insertionMode=Pe.IN_BODY,vc(e,t)}}function vXe(e,t){t.tagID===K.TEMPLATE&&Mw(e,t)}function Jve(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(K.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):IG(e,t)}function bXe(e,t){t.tagID===K.HTML?vc(e,t):v8(e,t)}function Zve(e,t){var n;if(t.tagID===K.HTML){if(e.fragmentContext||(e.insertionMode=Pe.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===K.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else v8(e,t)}function v8(e,t){e.insertionMode=Pe.IN_BODY,S9(e,t)}function xXe(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.FRAMESET:{e._insertElement(t,bt.HTML);break}case K.FRAME:{e._appendElement(t,bt.HTML),t.ackSelfClosing=!0;break}case K.NOFRAMES:{$0(e,t);break}}}function _Xe(e,t){t.tagID===K.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==K.FRAMESET&&(e.insertionMode=Pe.AFTER_FRAMESET))}function wXe(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.NOFRAMES:{$0(e,t);break}}}function EXe(e,t){t.tagID===K.HTML&&(e.insertionMode=Pe.AFTER_AFTER_FRAMESET)}function SXe(e,t){t.tagID===K.HTML?vc(e,t):IP(e,t)}function IP(e,t){e.insertionMode=Pe.IN_BODY,S9(e,t)}function TXe(e,t){switch(t.tagID){case K.HTML:{vc(e,t);break}case K.NOFRAMES:{$0(e,t);break}}}function CXe(e,t){t.chars=ao,e._insertCharacters(t)}function AXe(e,t){e._insertCharacters(t),e.framesetOk=!1}function ebe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==bt.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function kXe(e,t){if(VYe(t))ebe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===bt.MATHML?Fve(t):r===bt.SVG&&(HYe(t),$ve(t)),kG(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function RXe(e,t){if(t.tagID===K.P||t.tagID===K.BR){ebe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===bt.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ze.AREA,Ze.BASE,Ze.BASEFONT,Ze.BGSOUND,Ze.BR,Ze.COL,Ze.EMBED,Ze.FRAME,Ze.HR,Ze.IMG,Ze.INPUT,Ze.KEYGEN,Ze.LINK,Ze.META,Ze.PARAM,Ze.SOURCE,Ze.TRACK,Ze.WBR;const IXe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),rie={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function tbe(e,t){const n=jXe(e),r=_ve("type",{handlers:{root:PXe,element:NXe,text:DXe,comment:rbe,doctype:OXe,raw:LXe},unknown:FXe}),i={parser:n?new eie(rie):eie.getFragmentParser(void 0,rie),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),LT(i,_g());const s=n?i.parser.document:i.parser.getFragment(),o=VGe(s,{file:i.options.file});return i.stitches&&SG(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function nbe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function PXe(e,t){nbe(e.children,t)}function NXe(e,t){$Xe(e,t),nbe(e.children,t),BXe(e,t)}function DXe(e,t){const n={type:Ur.CHARACTER,chars:e.value,location:ER(e)};LT(t,_g(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function OXe(e,t){const n={type:Ur.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:ER(e)};LT(t,_g(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function MXe(e,t){t.stitches=!0;const n=UXe(e);if("children"in e&&"children"in n){const r=tbe({type:"root",children:e.children},t.options);n.children=r.children}rbe({type:"comment",value:{stitch:n}},t)}function rbe(e,t){const n=e.value,r={type:Ur.COMMENT,data:n,location:ER(e)};LT(t,_g(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function LXe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,ibe(t,_g(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function FXe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))MXe(n,t);else{let r="";throw IXe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function LT(e,t){ibe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ya.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function ibe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function $Xe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ya.PLAINTEXT)return;LT(t,_g(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:E_.html;i===E_.html&&n==="svg"&&(i=E_.svg);const s=GGe({...e,children:[]},{space:i===E_.svg?"svg":"html"}),o={type:Ur.START_TAG,tagName:n,tagID:MT(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:ER(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function BXe(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&tYe.includes(n)||t.parser.tokenizer.state===ya.PLAINTEXT)return;LT(t,x9(e));const r={type:Ur.END_TAG,tagName:n,tagID:MT(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:ER(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ya.RCDATA||t.parser.tokenizer.state===ya.RAWTEXT||t.parser.tokenizer.state===ya.SCRIPT_DATA)&&(t.parser.tokenizer.state=ya.DATA)}function jXe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function ER(e){const t=_g(e)||{line:void 0,column:void 0,offset:void 0},n=x9(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function UXe(e){return"children"in e?bS({...e,children:[]}):bS(e)}function zXe(e){return function(t,n){return tbe(t,{...e,file:n})}}function dc({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return A.jsx(Wb,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return A.jsx(At,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return A.jsx(co,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return A.jsx(co,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return A.jsx(co,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return A.jsx(co,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return A.jsx(co,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return A.jsx(co,{...s,order:6,...s,pb:12})},a({node:i,...s}){return A.jsx(Iw,{...s,ref:void 0})},ul({node:i,...s}){return A.jsx(b0,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return A.jsx(b0,{type:"ordered",withPadding:!0,...o,pb:8})}};return A.jsx(IGe,{components:n,rehypePlugins:[zXe],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function PP({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return A.jsx(dc,{text:n})}const K2=14;function VXe({completed:e,inProgress:t,rejected:n}){return A.jsxs(An,{ml:4,gap:4,children:[A.jsx(Ys,{label:"Completed",children:A.jsx(v0,{variant:"light",color:"green",leftSection:A.jsx(v9,{width:K2,height:K2,style:{paddingTop:1}}),pb:1,children:e})}),A.jsx(Ys,{label:"In Progress",children:A.jsx(v0,{variant:"light",color:"orange",leftSection:A.jsx(P1e,{width:K2,height:K2,style:{paddingTop:1}}),pb:1,children:t})}),A.jsx(Ys,{label:"Rejected",children:A.jsx(v0,{variant:"light",color:"red",leftSection:A.jsx(vR,{width:K2,height:K2,style:{paddingTop:1}}),pb:1,children:n})})]})}const HXe={},qXe=Object.freeze(Object.defineProperty({__proto__:null,default:HXe},Symbol.toStringTag,{value:"Module"})),sbe=I8e(qXe);var XF,iie;function k9(){if(iie)return XF;iie=1;var e=sbe;function t(o,a){var u,l="",c=0,f=!0,d=0,h;function p(){return h=o.charAt(d),d++,h}for(p(),h==="-"&&(l="-",p());h>="0"&&h<="9";)f&&(h=="0"?c++:f=!1),l+=h,p();if(f&&c--,h===".")for(l+=".";p()&&h>="0"&&h<="9";)l+=h;if(h==="e"||h==="E")for(l+=h,p(),(h==="-"||h==="+")&&(l+=h,p());h>="0"&&h<="9";)l+=h,p();for(;h&&h<=" ";)p();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(o[d]==="/"||o[d]==="*"))&&(h=0),u=+l,!(h||c||!isFinite(u)))return u}function n(o,a){return Object.defineProperty&&Object.defineProperty(o,"__COMMENTS__",{enumerable:!1,writable:!0}),o.__COMMENTS__=a||{}}function r(o){Object.defineProperty(o,"__COMMENTS__",{value:void 0})}function i(o){return o.__COMMENTS__}function s(o){if(!o)return"";var a=o.split(`
`),u,l,c,f;for(c=0;c<a.length;c++)for(u=a[c],f=u.length,l=0;l<f;l++){var d=u[l];if(d==="#")break;if(d==="/"&&(u[l+1]==="/"||u[l+1]==="*")){u[l+1]==="*"&&(c=a.length);break}else if(d>" "){a[c]="# "+u;break}}return a.join(`
`)}return XF={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:s},XF}var QF,sie;function WXe(){return sie||(sie=1,QF="3.2.1"),QF}var JF,oie;function NG(){if(oie)return JF;oie=1;function e(a,u){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var l=[];function c(f){return{}.toString.call(f)==="[object Function]"}return a.forEach(function(f){if(!f.name||!c(f.parse)||!c(f.stringify))throw new Error("extension does not match the DSF interface");l.push(function(){try{if(u=="parse")return f.parse.apply(null,arguments);if(u=="stringify"){var d=f.stringify.apply(null,arguments);if(d!==void 0&&(typeof d!="string"||d.length===0||d[0]==='"'||[].some.call(d,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+d);return d}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+f.name+" failed; "+h.message)}})}),t.bind(null,l)}function t(a,u){if(a)for(var l=0;l<a.length;l++){var c=a[l](u);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function s(a){var u=a&&a.out;return{name:"hex",parse:function(l){if(/^0x[0-9A-Fa-f]+$/.test(l))return parseInt(l,16)},stringify:function(l){if(u&&Number.isInteger(l))return"0x"+l.toString(16)}}}s.description="parse hexadecimal numbers prefixed with 0x";function o(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var u=Date.parse(a);if(!isNaN(u))return new Date(u)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var u=a.toISOString();return u.indexOf("T00:00:00.000Z",u.length-14)!==-1?u.substr(0,10):u}}}}return o.description="support ISO dates",JF={loadDsf:e,std:{math:i,hex:s,date:o}},JF}var ZF,aie;function GXe(){return aie||(aie=1,ZF=function(e,t){var n=k9(),r=NG(),i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(j){return j==="{"||j==="}"||j==="["||j==="]"||j===","||j===":"}function d(j){var z,G=0,ee=1;for(z=s-1;z>0&&i[z]!==`
`;z--,G++);for(;z>0;z--)i[z]===`
`&&ee++;throw new Error(j+" at line "+ee+","+G+" >>>"+i.substr(s-G,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(j){return i.charAt(s+j)}function m(j){for(var z="",G=o;h();){if(o===G)return h(),j&&G==="'"&&o==="'"&&z.length===0?(h(),g()):z;if(o==="\\")if(h(),o==="u"){for(var ee=0,ne=0;ne<4;ne++){h();var ue=o.charCodeAt(0),X;o>="0"&&o<="9"?X=ue-48:o>="a"&&o<="f"?X=ue-97+10:o>="A"&&o<="F"?X=ue-65+10:d("Bad \\u char "+o),ee=ee*16+X}z+=String.fromCharCode(ee)}else if(typeof a[o]=="string")z+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):z+=o}d("Bad string")}function g(){for(var j="",z=0,G=0;;){var ee=p(-G-5);if(!ee||ee===`
`)break;G++}function ne(){for(var ue=G;o&&o<=" "&&o!==`
`&&ue-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),ne());;){if(!o)d("Bad multiline string");else if(o==="'"){if(z++,h(),z===3)return j.slice(-1)===`
`&&(j=j.slice(0,-1)),j;continue}else for(;z>0;)j+="'",z--;o===`
`?(j+=`
`,h(),ne()):(o!=="\r"&&(j+=o),h())}}function b(){if(o==='"'||o==="'")return m(!1);for(var j="",z=s,G=-1;;){if(o===":")return j?G>=0&&G!==j.length&&(s=z+G,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),j;o<=" "?o?G<0&&(G=j.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):j+=o,h()}}function y(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function x(){var j=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var z=o==="\r"||o===`
`||o==="";if(z||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var G=j[0];switch(G){case"f":if(j.trim()==="false")return!1;break;case"n":if(j.trim()==="null")return null;break;case"t":if(j.trim()==="true")return!0;break;default:if(G==="-"||G>="0"&&G<="9"){var ee=n.tryParseNumber(j);if(ee!==void 0)return ee}}if(z){j=j.trim();var ne=l(j);return ne!==void 0?ne:j}}j+=o}}function w(j,z){var G;for(j--,G=s-2;G>j&&i[G]<=" "&&i[G]!==`
`;G--);i[G]===`
`&&G--,i[G]==="\r"&&G--;var ee=i.substr(j,G-j+1);for(G=0;G<ee.length;G++)if(ee[G]>" "){var ne=ee.indexOf(`
`);if(ne>=0){var ue=[ee.substr(0,ne),ee.substr(ne+1)];return z&&ue[0].trim().length===0&&ue.shift(),ue}else return[ee]}return[]}function S(j){function z(ee,ne){var ue,X,W,te;switch(typeof ee){case"string":ee.indexOf(ne)>=0&&(te=ee);break;case"object":if(Object.prototype.toString.apply(ee)==="[object Array]")for(ue=0,W=ee.length;ue<W;ue++)te=z(ee[ue],ne)||te;else for(X in ee)Object.prototype.hasOwnProperty.call(ee,X)&&(te=z(ee[X],ne)||te)}return te}function G(ee){var ne=z(j,ee);return ne?"found '"+ee+`' in a string value, your mistake could be with:
  > `+ne+`
  (unquoted strings contain everything up to the next line!)`:""}return G("}")||G("]")}function C(){var j=[],z,G,ee;try{if(u&&(z=n.createComment(j,{a:[]})),h(),G=s,y(),z&&(ee=w(G,!0).join(`
`)),o==="]")return h(),z&&(z.e=[ee]),j;for(;o;){if(j.push(I()),G=s,y(),o===","&&(h(),G=s,y()),z){var ne=w(G);z.a.push([ee||"",ne[0]||""]),ee=ne[1]}if(o==="]")return h(),z&&(z.a[z.a.length-1][1]+=ee||""),j;y()}d("End of input while parsing an array (missing ']')")}catch(ue){throw ue.hint=ue.hint||S(j),ue}}function R(j){var z="",G={},ee,ne,ue;try{if(u&&(ee=n.createComment(G,{c:{},o:[]})),j?ne=1:(h(),ne=s),y(),ee&&(ue=w(ne,!0).join(`
`)),o==="}"&&!j)return ee&&(ee.e=[ue]),h(),G;for(;o;){if(z=b(),y(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),G[z]=I(),ne=s,y(),o===","&&(h(),ne=s,y()),ee){var X=w(ne);ee.c[z]=[ue||"",X[0]||""],ue=X[1],ee.o.push(z)}if(o==="}"&&!j)return h(),ee&&(ee.c[z][1]+=ue||""),G;y()}if(j)return G;d("End of input while parsing an object (missing '}')")}catch(W){throw W.hint=W.hint||S(G),W}}function I(){switch(y(),o){case"{":return R();case"[":return C();case"'":case'"':return m(!0);default:return x()}}function O(j,z){var G=s;if(y(),o&&d("Syntax error, found trailing characters"),u){var ee=z.join(`
`),ne=w(G).join(`
`);if(ne||ee){var ue=n.createComment(j,n.getComment(j));ue.r=[ee,ne]}}return j}function M(){y();var j=u?w(1):null;switch(o){case"{":return O(R(),j);case"[":return O(C(),j);default:return O(I(),j)}}function L(){y();var j=u?w(1):null;switch(o){case"{":return O(R(),j);case"[":return O(C(),j)}try{return O(R(!0),j)}catch(z){c();try{return O(I(),j)}catch{throw z}}}if(typeof e!="string")throw new Error("source is not a string");var V=null,D=!0;return t&&typeof t=="object"&&(u=t.keepWsc,V=t.dsf,D=t.legacyRoot!==!1),l=r.loadDsf(V,"parse"),i=e,c(),D?L():M()}),ZF}var e$,uie;function YXe(){return uie||(uie=1,e$=function(e,t){var n=k9(),r=NG(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var b,y=Object.keys(i);for(b=y.length-1;b>=0;b--){var x=y[b];g[x].push(i[x][0].length,i[x][1].length)}}var w,S="-­؀-؄܏឴឵‌-‏\u2028- ⁠-⁯\uFEFF￰-￿",C=new RegExp('[\\\\\\"\0-'+S+"]","g"),R=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+S+"]","g"),I=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+S+"]","g"),O=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),M={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},L=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,V="",D=0;function j(te,q){return D+=te[0].length+te[1].length-te[2]-te[3],te[0]+q+te[1]}function z(te){return te.replace(C,function(q){var J=M[q];return typeof J=="string"?j(g.esc,J):j(g.uni,("0000"+q.charCodeAt(0).toString(16)).slice(-4))})}function G(te,q,J,oe){return te?(R.lastIndex=0,O.lastIndex=0,c||J||R.test(te)||n.tryParseNumber(te,!0)!==void 0||O.test(te)?(C.lastIndex=0,I.lastIndex=0,C.test(te)?!I.test(te)&&!oe&&d?ee(te,q):j(g.qstr,z(te)):j(g.qstr,te)):j(g.str,te)):j(g.qstr,"")}function ee(te,q){var J,oe=te.replace(/\r/g,"").split(`
`);if(q+=o,oe.length===1)return j(g.mstr,oe[0]);var de=s+q+g.mstr[0];for(J=0;J<oe.length;J++)de+=s,oe[J]&&(de+=q+oe[J]);return de+s+q+g.mstr[1]}function ne(te){return te?l||L.test(te)?(C.lastIndex=0,j(g.qkey,C.test(te)?z(te):te)):j(g.key,te):'""'}function ue(te,q,J,oe){function de(Hn){return Hn&&Hn[Hn[0]==="\r"?1:0]===`
`}function ce(Hn){return Hn&&!de(Hn)}function pe(Hn,nr,Ei){if(!Hn)return"";Hn=n.forceComment(Hn);var Dr,Co=Hn.length;for(Dr=0;Dr<Co&&Hn[Dr]<=" ";Dr++);return Ei&&Dr>0&&(Hn=Hn.substr(Dr)),Dr<Co?nr+j(g.rem,Hn):Hn}var Ee=w(te);if(Ee!==void 0)return j(g.dsf,Ee);switch(typeof te){case"string":return G(te,V,q,oe);case"number":return isFinite(te)?j(g.num,String(te)):j(g.lit,"null");case"boolean":return j(g.lit,String(te));case"object":if(!te)return j(g.lit,"null");var Ae;a&&(Ae=n.getComment(te));var ge=Object.prototype.toString.apply(te)==="[object Array]",me=V;V+=o;var Oe=s+me,Me=s+V,Ye=J||u?"":Oe,lt=[],We,nt=f?[]:null,yt=c,_t=d,It=h?"":g.com[0],Et=0,Ke,Lt,sn,Fe,Qe,wt,Vt,Wt,bn;if(ge){for(Ke=0,Lt=te.length;Ke<Lt;Ke++){if(We=Ke<Lt-1,Ae?(wt=Ae.a[Ke]||[],Vt=ce(wt[1]),lt.push(pe(wt[0],`
`)+Me),nt&&(wt[0]||wt[1]||Vt)&&(nt=null)):lt.push(Me),D=0,Fe=te[Ke],lt.push(ue(Fe,Ae?Vt:!1,!0)+(We?h:"")),nt){switch(typeof Fe){case"string":D=0,c=!0,d=0,nt.push(ue(Fe,!1,!0)+(We?g.com[0]:"")),c=yt,d=_t;break;case"object":if(Fe){nt=null;break}default:nt.push(lt[lt.length-1]+(We?It:""));break}We&&(D+=g.com[0].length-g.com[2]),Et+=D}Ae&&wt[1]&&lt.push(pe(wt[1],Vt?" ":`
`,Vt))}Lt===0?Ae&&Ae.e&&lt.push(pe(Ae.e[0],`
`)+Oe):lt.push(Oe),lt.length===0?Wt=j(g.arr,""):(Wt=Ye+j(g.arr,lt.join("")),nt&&(bn=nt.join(" "),bn.length-Et<=f&&(Wt=j(g.arr,bn))))}else{var Dn=Ae?Ae.o.slice():[],Zn=[];for(sn in te)Object.prototype.hasOwnProperty.call(te,sn)&&Dn.indexOf(sn)<0&&Zn.push(sn);m&&Zn.sort();var wr=Dn.concat(Zn);for(Ke=0,Lt=wr.length;Ke<Lt;Ke++)if(We=Ke<Lt-1,sn=wr[Ke],Ae?(wt=Ae.c[sn]||[],Vt=ce(wt[1]),lt.push(pe(wt[0],`
`)+Me),nt&&(wt[0]||wt[1]||Vt)&&(nt=null)):lt.push(Me),D=0,Fe=te[sn],Qe=ue(Fe,Ae&&Vt),lt.push(ne(sn)+g.col[0]+(de(Qe)?"":" ")+Qe+(We?h:"")),Ae&&wt[1]&&lt.push(pe(wt[1],Vt?" ":`
`,Vt)),nt){switch(typeof Fe){case"string":D=0,c=!0,d=0,Qe=ue(Fe,!1),c=yt,d=_t,nt.push(ne(sn)+g.col[0]+" "+Qe+(We?g.com[0]:""));break;case"object":if(Fe){nt=null;break}default:nt.push(lt[lt.length-1]+(We?It:""));break}D+=g.col[0].length-g.col[2],We&&(D+=g.com[0].length-g.com[2]),Et+=D}Lt===0?Ae&&Ae.e&&lt.push(pe(Ae.e[0],`
`)+Oe):lt.push(Oe),lt.length===0?Wt=j(g.obj,""):(Wt=Ye+j(g.obj,lt.join("")),nt&&(bn=nt.join(" "),bn.length-Et<=f&&(Wt=j(g.obj,bn))))}return V=me,Wt}}w=r.loadDsf(p,"stringify");var X="",W=a?W=(n.getComment(e)||{}).r:null;return W&&W[0]&&(X=W[0]+`
`),X+=ue(e,null,!0,!0),W&&(X+=W[1]||""),X}),e$}var t$,lie;function KXe(){if(lie)return t$;lie=1;var e=k9();function t(c,f,d){var h;return c&&(h={b:c}),f&&((h=h||{}).a=f),d&&((h=h||{}).x=d),h}function n(c,f){if(!(c===null||typeof c!="object")){var d=e.getComment(c);d&&e.removeComment(c);var h,p,m,g;if(Object.prototype.toString.apply(c)==="[object Array]"){for(g={a:{}},h=0,p=c.length;h<p;h++)s(g.a,h,d.a[h],n(c[h]))&&(m=!0);!m&&d.e&&(g.e=t(d.e[0],d.e[1]),m=!0)}else{g={s:{}};var b,y=Object.keys(c);for(d&&d.o?(b=[],d.o.concat(y).forEach(function(w){Object.prototype.hasOwnProperty.call(c,w)&&b.indexOf(w)<0&&b.push(w)})):b=y,g.o=b,h=0,p=b.length;h<p;h++){var x=b[h];s(g.s,x,d.c[x],n(c[x]))&&(m=!0)}!m&&d.e&&(g.e=t(d.e[0],d.e[1]),m=!0)}return f&&d&&d.r&&(g.r=t(d.r[0],d.r[1])),m?g:void 0}}function r(){var c="";return[].forEach.call(arguments,function(f){f&&f.trim()!==""&&(c&&(c+="; "),c+=f.trim())}),c}function i(c,f){var d=[];if(u(c,f,d,[]),d.length>0){var h=l(f,null,1);h+=`
# Orphaned comments:
`,d.forEach(function(p){h+=("# "+p.path.join("/")+": "+r(p.b,p.a,p.e)).replace(`
`,"\\n ")+`
`}),l(f,h,1)}}function s(c,f,d,h){var p=t(d?d[0]:void 0,d?d[1]:void 0,h);return p&&(c[f]=p),p}function o(c,f){var d=t(f.b,f.a);return d.path=c,d}function a(c,f,d){if(c){var h,p;if(c.a)for(h=0,p=c.a.length;h<p;h++){var m=d.slice().concat([h]),g=c.a[h];g&&(f.push(o(m,g)),a(g.x,f,m))}else c.o&&c.o.forEach(function(b){var y=d.slice().concat([b]),x=c.s[b];x&&(f.push(o(y,x)),a(x.x,f,y))});c.e&&f.push(o(d,c.e))}}function u(c,f,d,h){if(c){if(f===null||typeof f!="object"){a(c,d,h);return}var p,m=e.createComment(f);if(h.length===0&&c.r&&(m.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(f)==="[object Array]"){m.a=[];var g=c.a||{};for(var b in g)if(g.hasOwnProperty(b)){p=parseInt(b);var y=c.a[b];if(y){var x=h.slice().concat([p]);p<f.length?(m.a[p]=[y.b,y.a],u(y.x,f[p],d,x)):(d.push(o(x,y)),a(y.x,d,x))}}p===0&&c.e&&(m.e=[c.e.b,c.e.a])}else m.c={},m.o=[],(c.o||[]).forEach(function(w){var S=h.slice().concat([w]),C=c.s[w];Object.prototype.hasOwnProperty.call(f,w)?(m.o.push(w),C&&(m.c[w]=[C.b,C.a],u(C.x,f[w],d,S))):C&&(d.push(o(S,C)),a(C.x,d,S))}),c.e&&(m.e=[c.e.b,c.e.a])}}function l(c,f,d){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(f||f==="")&&(h.r[d]=e.forceComment(f)),h.r[d]||""}return t$={extract:function(c){return n(c,!0)},merge:i,header:function(c,f){return l(c,f,0)},footer:function(c,f){return l(c,f,1)}},t$}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var n$,cie;function XXe(){if(cie)return n$;cie=1;var e=k9(),t=WXe(),n=GXe(),r=YXe(),i=KXe(),s=NG();return n$={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(o){(o===`
`||o===`\r
`)&&(e.EOL=o)},version:t,rt:{parse:function(o,a){return(a=a||{}).keepWsc=!0,n(o,a)},stringify:function(o,a){return(a=a||{}).keepWsc=!0,r(o,a)}},comments:i,dsf:s.std},n$}var QXe=XXe(),fie={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const obe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},JXe=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},DG={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(obe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):JXe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new ZXe;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ZXe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eQe=function(e){const t=obe(e);return DG.encodeByteArray(t,!0)},b8=function(e){return eQe(e).replace(/\./g,"")},abe=function(e){try{return DG.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ube(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tQe=()=>ube().__FIREBASE_DEFAULTS__,nQe=()=>{if(typeof process>"u"||typeof fie>"u")return;const e=fie.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},rQe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&abe(e[1]);return t&&JSON.parse(t)},R9=()=>{try{return tQe()||nQe()||rQe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},lbe=e=>{var t,n;return(n=(t=R9())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},iQe=e=>{const t=lbe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},cbe=()=>{var e;return(e=R9())===null||e===void 0?void 0:e.config},fbe=e=>{var t;return(t=R9())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sQe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[b8(JSON.stringify(n)),b8(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oQe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hc())}function aQe(){var e;const t=(e=R9())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uQe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lQe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function cQe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fQe(){const e=hc();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function dQe(){return!aQe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OG(){try{return typeof indexedDB=="object"}catch{return!1}}function hQe(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pQe="FirebaseError";class wg extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=pQe,Object.setPrototypeOf(this,wg.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,FT.prototype.create)}}class FT{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?mQe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new wg(i,a,r)}}function mQe(e,t){return e.replace(gQe,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const gQe=/\{\$([^}]+)}/g;function yQe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function r4(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(die(s)&&die(o)){if(!r4(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function die(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function vQe(e,t){const n=new bQe(e,t);return n.subscribe.bind(n)}class bQe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xQe(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=r$),i.error===void 0&&(i.error=r$),i.complete===void 0&&(i.complete=r$);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xQe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function r$(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Qe=1e3,wQe=2,EQe=4*60*60*1e3,SQe=.5;function TQe(e,t=_Qe,n=wQe){const r=t*Math.pow(n,e),i=Math.round(SQe*r*(Math.random()-.5)*2);return Math.min(EQe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(e){return e&&e._delegate?e._delegate:e}class sg{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CQe=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new n4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(kQe(t))try{this.getOrInitializeService({instanceIdentifier:s_})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=s_){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=s_){return this.instances.has(t)}getOptions(t=s_){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AQe(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=s_){return this.component?this.component.multipleInstances?t:s_:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AQe(e){return e===s_?void 0:e}function kQe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RQe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new CQe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ni||(ni={}));const IQe={debug:ni.DEBUG,verbose:ni.VERBOSE,info:ni.INFO,warn:ni.WARN,error:ni.ERROR,silent:ni.SILENT},PQe=ni.INFO,NQe={[ni.DEBUG]:"log",[ni.VERBOSE]:"log",[ni.INFO]:"info",[ni.WARN]:"warn",[ni.ERROR]:"error"},DQe=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=NQe[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class I9{constructor(t){this.name=t,this._logLevel=PQe,this._logHandler=DQe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ni))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?IQe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ni.DEBUG,...t),this._logHandler(this,ni.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ni.VERBOSE,...t),this._logHandler(this,ni.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ni.INFO,...t),this._logHandler(this,ni.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ni.WARN,...t),this._logHandler(this,ni.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ni.ERROR,...t),this._logHandler(this,ni.ERROR,...t)}}const OQe=(e,t)=>t.some(n=>e instanceof n);let hie,pie;function MQe(){return hie||(hie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LQe(){return pie||(pie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dbe=new WeakMap,MU=new WeakMap,hbe=new WeakMap,i$=new WeakMap,MG=new WeakMap;function FQe(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Xv(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&dbe.set(n,e)}).catch(()=>{}),MG.set(t,e),t}function $Qe(e){if(MU.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});MU.set(e,t)}let LU={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return MU.get(e);if(t==="objectStoreNames")return e.objectStoreNames||hbe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xv(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function BQe(e){LU=e(LU)}function jQe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(s$(this),t,...n);return hbe.set(r,t.sort?t.sort():[t]),Xv(r)}:LQe().includes(e)?function(...t){return e.apply(s$(this),t),Xv(dbe.get(this))}:function(...t){return Xv(e.apply(s$(this),t))}}function UQe(e){return typeof e=="function"?jQe(e):(e instanceof IDBTransaction&&$Qe(e),OQe(e,MQe())?new Proxy(e,LU):e)}function Xv(e){if(e instanceof IDBRequest)return FQe(e);if(i$.has(e))return i$.get(e);const t=UQe(e);return t!==e&&(i$.set(e,t),MG.set(t,e)),t}const s$=e=>MG.get(e);function zQe(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Xv(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Xv(o.result),u.oldVersion,u.newVersion,Xv(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const VQe=["get","getKey","getAll","getAllKeys","count"],HQe=["put","add","delete","clear"],o$=new Map;function mie(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(o$.get(t))return o$.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=HQe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||VQe.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return o$.set(t,s),s}BQe(e=>({...e,get:(t,n,r)=>mie(t,n)||e.get(t,n,r),has:(t,n)=>!!mie(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WQe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WQe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const FU="@firebase/app",gie="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new I9("@firebase/app"),GQe="@firebase/app-compat",YQe="@firebase/analytics-compat",KQe="@firebase/analytics",XQe="@firebase/app-check-compat",QQe="@firebase/app-check",JQe="@firebase/auth",ZQe="@firebase/auth-compat",eJe="@firebase/database",tJe="@firebase/data-connect",nJe="@firebase/database-compat",rJe="@firebase/functions",iJe="@firebase/functions-compat",sJe="@firebase/installations",oJe="@firebase/installations-compat",aJe="@firebase/messaging",uJe="@firebase/messaging-compat",lJe="@firebase/performance",cJe="@firebase/performance-compat",fJe="@firebase/remote-config",dJe="@firebase/remote-config-compat",hJe="@firebase/storage",pJe="@firebase/storage-compat",mJe="@firebase/firestore",gJe="@firebase/vertexai",yJe="@firebase/firestore-compat",vJe="firebase",bJe="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U="[DEFAULT]",xJe={[FU]:"fire-core",[GQe]:"fire-core-compat",[KQe]:"fire-analytics",[YQe]:"fire-analytics-compat",[QQe]:"fire-app-check",[XQe]:"fire-app-check-compat",[JQe]:"fire-auth",[ZQe]:"fire-auth-compat",[eJe]:"fire-rtdb",[tJe]:"fire-data-connect",[nJe]:"fire-rtdb-compat",[rJe]:"fire-fn",[iJe]:"fire-fn-compat",[sJe]:"fire-iid",[oJe]:"fire-iid-compat",[aJe]:"fire-fcm",[uJe]:"fire-fcm-compat",[lJe]:"fire-perf",[cJe]:"fire-perf-compat",[fJe]:"fire-rc",[dJe]:"fire-rc-compat",[hJe]:"fire-gcs",[pJe]:"fire-gcs-compat",[mJe]:"fire-fst",[yJe]:"fire-fst-compat",[gJe]:"fire-vertex","fire-js":"fire-js",[vJe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=new Map,_Je=new Map,BU=new Map;function yie(e,t){try{e.container.addComponent(t)}catch(n){d1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function h1(e){const t=e.name;if(BU.has(t))return d1.debug(`There were multiple attempts to register component ${t}.`),!1;BU.set(t,e);for(const n of x8.values())yie(n,e);for(const n of _Je.values())yie(n,e);return!0}function $T(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Fm(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wJe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qv=new FT("app","Firebase",wJe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EJe{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sg("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Qv.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=bJe;function pbe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:$U,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Qv.create("bad-app-name",{appName:String(i)});if(n||(n=cbe()),!n)throw Qv.create("no-options");const s=x8.get(i);if(s){if(r4(n,s.options)&&r4(r,s.config))return s;throw Qv.create("duplicate-app",{appName:i})}const o=new RQe(i);for(const u of BU.values())o.addComponent(u);const a=new EJe(n,r,o);return x8.set(i,a),a}function LG(e=$U){const t=x8.get(e);if(!t&&e===$U&&cbe())return pbe();if(!t)throw Qv.create("no-app",{appName:e});return t}function x0(e,t,n){var r;let i=(r=xJe[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),d1.warn(a.join(" "));return}h1(new sg(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SJe="firebase-heartbeat-database",TJe=1,i4="firebase-heartbeat-store";let a$=null;function mbe(){return a$||(a$=zQe(SJe,TJe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(i4)}catch(n){console.warn(n)}}}}).catch(e=>{throw Qv.create("idb-open",{originalErrorMessage:e.message})})),a$}async function CJe(e){try{const n=(await mbe()).transaction(i4),r=await n.objectStore(i4).get(gbe(e));return await n.done,r}catch(t){if(t instanceof wg)d1.warn(t.message);else{const n=Qv.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});d1.warn(n.message)}}}async function vie(e,t){try{const r=(await mbe()).transaction(i4,"readwrite");await r.objectStore(i4).put(t,gbe(e)),await r.done}catch(n){if(n instanceof wg)d1.warn(n.message);else{const r=Qv.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});d1.warn(r.message)}}}function gbe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJe=1024,kJe=30*24*60*60*1e3;class RJe{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PJe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=bie();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=kJe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){d1.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bie(),{heartbeatsToSend:r,unsentEntries:i}=IJe(this._heartbeatsCache.heartbeats),s=b8(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return d1.warn(n),""}}}function bie(){return new Date().toISOString().substring(0,10)}function IJe(e,t=AJe){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),xie(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xie(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PJe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OG()?hQe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CJe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return vie(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return vie(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function xie(e){return b8(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NJe(e){h1(new sg("platform-logger",t=>new qQe(t),"PRIVATE")),h1(new sg("heartbeat",t=>new RJe(t),"PRIVATE")),x0(FU,gie,e),x0(FU,gie,"esm2017"),x0("fire-js","")}NJe("");var DJe="firebase",OJe="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */x0(DJe,OJe,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ybe="firebasestorage.googleapis.com",vbe="storageBucket",MJe=2*60*1e3,LJe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends wg{constructor(t,n,r=0){super(u$(t),`Firebase Storage: ${n} (${u$(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xo.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return u$(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Yo;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Yo||(Yo={}));function u$(e){return"storage/"+e}function FG(){const e="An unknown error occurred, please check the error payload for server response.";return new Xo(Yo.UNKNOWN,e)}function FJe(e){return new Xo(Yo.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function $Je(e){return new Xo(Yo.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function BJe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xo(Yo.UNAUTHENTICATED,e)}function jJe(){return new Xo(Yo.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UJe(e){return new Xo(Yo.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function zJe(){return new Xo(Yo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function VJe(){return new Xo(Yo.CANCELED,"User canceled the upload/download.")}function HJe(e){return new Xo(Yo.INVALID_URL,"Invalid URL '"+e+"'.")}function qJe(e){return new Xo(Yo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function WJe(){return new Xo(Yo.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vbe+"' property when initializing the app?")}function GJe(){return new Xo(Yo.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YJe(){return new Xo(Yo.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function KJe(e){return new Xo(Yo.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jU(e){return new Xo(Yo.INVALID_ARGUMENT,e)}function bbe(){return new Xo(Yo.APP_DELETED,"The Firebase app was deleted.")}function XJe(e){return new Xo(Yo.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wk(e,t){return new Xo(Yo.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function nA(e){throw new Xo(Yo.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=nf.makeFromUrl(t,n)}catch{return new nf(t,"")}if(r.path==="")return r;throw qJe(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===ybe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",b=new RegExp(`^https?://${m}/${i}/${g}`,"i"),x=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:b,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<x.length;w++){const S=x[w],C=S.regex.exec(t);if(C){const R=C[S.indices.bucket];let I=C[S.indices.path];I||(I=""),r=new nf(R,I),S.postModify(r);break}}if(r==null)throw HJe(t);return r}}class QJe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJe(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...b){if(l){d();return}if(g){d(),c.call(null,g,...b);return}if(u()||o){d(),c.call(null,g,...b);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function ZJe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eZe(e){return e!==void 0}function tZe(e){return typeof e=="object"&&!Array.isArray(e)}function $G(e){return typeof e=="string"||e instanceof String}function _ie(e){return BG()&&e instanceof Blob}function BG(){return typeof Blob<"u"}function UU(e,t,n,r){if(r<t)throw jU(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw jU(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function xbe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var D_;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(D_||(D_={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nZe(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZe{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new x6(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===D_.NO_ERROR,u=s.getStatus();if(!a||nZe(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===D_.ABORT;r(!1,new x6(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new x6(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());eZe(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=FG();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?bbe():VJe();o(u)}else{const u=zJe();o(u)}};this.canceled_?n(!1,new x6(!1,null,!0)):this.backoffId_=JJe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&ZJe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class x6{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function iZe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function sZe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function oZe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function aZe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function uZe(e,t,n,r,i,s,o=!0){const a=xbe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return oZe(l,t),iZe(l,n),sZe(l,s),aZe(l,r),new rZe(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lZe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function cZe(...e){const t=lZe();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(BG())return new Blob(e);throw new Xo(Yo.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fZe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dZe(e){if(typeof atob>"u")throw KJe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class l${constructor(t,n){this.data=t,this.contentType=n||null}}function hZe(e,t){switch(e){case $m.RAW:return new l$(_be(t));case $m.BASE64:case $m.BASE64URL:return new l$(wbe(e,t));case $m.DATA_URL:return new l$(mZe(t),gZe(t))}throw FG()}function _be(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function pZe(e){let t;try{t=decodeURIComponent(e)}catch{throw wk($m.DATA_URL,"Malformed data URL.")}return _be(t)}function wbe(e,t){switch(e){case $m.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw wk(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case $m.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw wk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=dZe(t)}catch(i){throw i.message.includes("polyfill")?i:wk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Ebe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw wk($m.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=yZe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function mZe(e){const t=new Ebe(e);return t.base64?wbe($m.BASE64,t.rest):pZe(t.rest)}function gZe(e){return new Ebe(e).contentType}function yZe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(t,n){let r=0,i="";_ie(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(_ie(this.data_)){const r=this.data_,i=fZe(r,t,n);return i===null?null:new Dv(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Dv(r,!0)}}static getBlob(...t){if(BG()){const n=t.map(r=>r instanceof Dv?r.data_:r);return new Dv(cZe.apply(null,n))}else{const n=t.map(o=>$G(o)?hZe($m.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Dv(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jG(e){let t;try{t=JSON.parse(e)}catch{return null}return tZe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vZe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function bZe(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function Sbe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xZe(e,t){return t}class qc{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||xZe}}let _6=null;function _Ze(e){return!$G(e)||e.length<2?e:Sbe(e)}function Tbe(){if(_6)return _6;const e=[];e.push(new qc("bucket")),e.push(new qc("generation")),e.push(new qc("metageneration")),e.push(new qc("name","fullPath",!0));function t(s,o){return _Ze(o)}const n=new qc("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new qc("size");return i.xform=r,e.push(i),e.push(new qc("timeCreated")),e.push(new qc("updated")),e.push(new qc("md5Hash",null,!0)),e.push(new qc("cacheControl",null,!0)),e.push(new qc("contentDisposition",null,!0)),e.push(new qc("contentEncoding",null,!0)),e.push(new qc("contentLanguage",null,!0)),e.push(new qc("contentType",null,!0)),e.push(new qc("metadata","customMetadata",!0)),_6=e,_6}function wZe(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new nf(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function EZe(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return wZe(r,e),r}function Cbe(e,t,n){const r=jG(t);return r===null?null:EZe(e,r,n)}function SZe(e,t,n,r){const i=jG(t);if(i===null||!$G(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=TR(d,n,r),p=xbe({alt:"media",token:l});return h+p})[0]}function TZe(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wie="prefixes",Eie="items";function CZe(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[wie])for(const i of n[wie]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new nf(t,s));r.prefixes.push(o)}if(n[Eie])for(const i of n[Eie]){const s=e._makeStorageReference(new nf(t,i.name));r.items.push(s)}return r}function AZe(e,t,n){const r=jG(n);return r===null?null:CZe(e,t,r)}class P9{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(e){if(!e)throw FG()}function kZe(e,t){function n(r,i){const s=Cbe(e,i,t);return UG(s!==null),s}return n}function RZe(e,t){function n(r,i){const s=AZe(e,t,i);return UG(s!==null),s}return n}function IZe(e,t){function n(r,i){const s=Cbe(e,i,t);return UG(s!==null),SZe(s,i,e.host,e._protocol)}return n}function zG(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=jJe():i=BJe():n.getStatus()===402?i=$Je(e.bucket):n.getStatus()===403?i=UJe(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function Abe(e){const t=zG(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=FJe(e.path)),s.serverResponse=i.serverResponse,s}return n}function PZe(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=TR(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new P9(a,u,RZe(e,t.bucket),l);return c.urlParams=s,c.errorHandler=zG(t),c}function NZe(e,t,n){const r=t.fullServerUrl(),i=TR(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new P9(i,s,IZe(e,n),o);return a.errorHandler=Abe(t),a}function DZe(e,t){const n=t.fullServerUrl(),r=TR(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new P9(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Abe(t),a}function OZe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function MZe(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=OZe(null,t)),r}function LZe(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let w=0;w<2;w++)x=x+Math.random().toString().slice(2);return x}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=MZe(t,r,i),c=TZe(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Dv.getBlob(f,r,d);if(h===null)throw GJe();const p={name:l.fullPath},m=TR(s,e.host,e._protocol),g="POST",b=e.maxUploadRetryTime,y=new P9(m,g,kZe(e,n),b);return y.urlParams=p,y.headers=o,y.body=h.uploadData(),y.errorHandler=zG(t),y}class FZe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=D_.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=D_.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=D_.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw nA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nA("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nA("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nA("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nA("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class $Ze extends FZe{initXhr(){this.xhr_.responseType="text"}}function N9(){return new $Ze}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(t,n){this._service=t,n instanceof nf?this._location=n:this._location=nf.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new W_(t,n)}get root(){const t=new nf(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Sbe(this._location.path)}get storage(){return this._service}get parent(){const t=vZe(this._location.path);if(t===null)return null;const n=new nf(this._location.bucket,t);return new W_(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw XJe(t)}}function BZe(e,t,n){e._throwIfRoot("uploadBytes");const r=LZe(e.storage,e._location,Tbe(),new Dv(t,!0),n);return e.storage.makeRequestWithTokens(r,N9).then(i=>({metadata:i,ref:e}))}function jZe(e){const t={prefixes:[],items:[]};return kbe(e,t).then(()=>t)}async function kbe(e,t,n){const i=await UZe(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await kbe(e,t,i.nextPageToken)}function UZe(e,t){t!=null&&typeof t.maxResults=="number"&&UU("options.maxResults",1,1e3,t.maxResults);const n=t,r=PZe(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,N9)}function zZe(e){e._throwIfRoot("getDownloadURL");const t=NZe(e.storage,e._location,Tbe());return e.storage.makeRequestWithTokens(t,N9).then(n=>{if(n===null)throw YJe();return n})}function VZe(e){e._throwIfRoot("deleteObject");const t=DZe(e.storage,e._location);return e.storage.makeRequestWithTokens(t,N9)}function HZe(e,t){const n=bZe(e._location.path,t),r=new nf(e._location.bucket,n);return new W_(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qZe(e){return/^[A-Za-z]+:\/\//.test(e)}function WZe(e,t){return new W_(e,t)}function Rbe(e,t){if(e instanceof VG){const n=e;if(n._bucket==null)throw WJe();const r=new W_(n,n._bucket);return t!=null?Rbe(r,t):r}else return t!==void 0?HZe(e,t):e}function GZe(e,t){if(t&&qZe(t)){if(e instanceof VG)return WZe(e,t);throw jU("To use ref(service, url), the first argument must be a Storage instance.")}else return Rbe(e,t)}function Sie(e,t){const n=t==null?void 0:t[vbe];return n==null?null:nf.makeFromBucketSpec(n,e)}function YZe(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:sQe(i,e.app.options.projectId))}class VG{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=ybe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=MJe,this._maxUploadRetryTime=LJe,this._requests=new Set,i!=null?this._bucket=nf.makeFromBucketSpec(i,this._host):this._bucket=Sie(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=nf.makeFromBucketSpec(this._url,t):this._bucket=Sie(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){UU("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){UU("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new W_(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new QJe(bbe());{const o=uZe(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Tie="@firebase/storage",Cie="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ibe="storage";function w6(e,t,n){return e=$s(e),BZe(e,t,n)}function rA(e){return e=$s(e),jZe(e)}function E6(e){return e=$s(e),zZe(e)}function Aie(e){return e=$s(e),VZe(e)}function $d(e,t){return e=$s(e),GZe(e,t)}function kie(e=LG(),t){e=$s(e);const r=$T(e,Ibe).getImmediate({identifier:t}),i=iQe("storage");return i&&KZe(r,...i),r}function KZe(e,t,n,r={}){YZe(e,t,n,r)}function XZe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new VG(n,r,i,t,Lw)}function QZe(){h1(new sg(Ibe,XZe,"PUBLIC").setMultipleInstances(!0)),x0(Tie,Cie,""),x0(Tie,Cie,"esm2017")}QZe();var Rie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jv,Pbe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,I){function O(){}O.prototype=I.prototype,R.D=I.prototype,R.prototype=new O,R.prototype.constructor=R,R.C=function(M,L,V){for(var D=Array(arguments.length-2),j=2;j<arguments.length;j++)D[j-2]=arguments[j];return I.prototype[L].apply(M,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,O){O||(O=0);var M=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)M[L]=I.charCodeAt(O++)|I.charCodeAt(O++)<<8|I.charCodeAt(O++)<<16|I.charCodeAt(O++)<<24;else for(L=0;16>L;++L)M[L]=I[O++]|I[O++]<<8|I[O++]<<16|I[O++]<<24;I=R.g[0],O=R.g[1],L=R.g[2];var V=R.g[3],D=I+(V^O&(L^V))+M[0]+3614090360&4294967295;I=O+(D<<7&4294967295|D>>>25),D=V+(L^I&(O^L))+M[1]+3905402710&4294967295,V=I+(D<<12&4294967295|D>>>20),D=L+(O^V&(I^O))+M[2]+606105819&4294967295,L=V+(D<<17&4294967295|D>>>15),D=O+(I^L&(V^I))+M[3]+3250441966&4294967295,O=L+(D<<22&4294967295|D>>>10),D=I+(V^O&(L^V))+M[4]+4118548399&4294967295,I=O+(D<<7&4294967295|D>>>25),D=V+(L^I&(O^L))+M[5]+1200080426&4294967295,V=I+(D<<12&4294967295|D>>>20),D=L+(O^V&(I^O))+M[6]+2821735955&4294967295,L=V+(D<<17&4294967295|D>>>15),D=O+(I^L&(V^I))+M[7]+4249261313&4294967295,O=L+(D<<22&4294967295|D>>>10),D=I+(V^O&(L^V))+M[8]+1770035416&4294967295,I=O+(D<<7&4294967295|D>>>25),D=V+(L^I&(O^L))+M[9]+2336552879&4294967295,V=I+(D<<12&4294967295|D>>>20),D=L+(O^V&(I^O))+M[10]+4294925233&4294967295,L=V+(D<<17&4294967295|D>>>15),D=O+(I^L&(V^I))+M[11]+2304563134&4294967295,O=L+(D<<22&4294967295|D>>>10),D=I+(V^O&(L^V))+M[12]+1804603682&4294967295,I=O+(D<<7&4294967295|D>>>25),D=V+(L^I&(O^L))+M[13]+4254626195&4294967295,V=I+(D<<12&4294967295|D>>>20),D=L+(O^V&(I^O))+M[14]+2792965006&4294967295,L=V+(D<<17&4294967295|D>>>15),D=O+(I^L&(V^I))+M[15]+1236535329&4294967295,O=L+(D<<22&4294967295|D>>>10),D=I+(L^V&(O^L))+M[1]+4129170786&4294967295,I=O+(D<<5&4294967295|D>>>27),D=V+(O^L&(I^O))+M[6]+3225465664&4294967295,V=I+(D<<9&4294967295|D>>>23),D=L+(I^O&(V^I))+M[11]+643717713&4294967295,L=V+(D<<14&4294967295|D>>>18),D=O+(V^I&(L^V))+M[0]+3921069994&4294967295,O=L+(D<<20&4294967295|D>>>12),D=I+(L^V&(O^L))+M[5]+3593408605&4294967295,I=O+(D<<5&4294967295|D>>>27),D=V+(O^L&(I^O))+M[10]+38016083&4294967295,V=I+(D<<9&4294967295|D>>>23),D=L+(I^O&(V^I))+M[15]+3634488961&4294967295,L=V+(D<<14&4294967295|D>>>18),D=O+(V^I&(L^V))+M[4]+3889429448&4294967295,O=L+(D<<20&4294967295|D>>>12),D=I+(L^V&(O^L))+M[9]+568446438&4294967295,I=O+(D<<5&4294967295|D>>>27),D=V+(O^L&(I^O))+M[14]+3275163606&4294967295,V=I+(D<<9&4294967295|D>>>23),D=L+(I^O&(V^I))+M[3]+4107603335&4294967295,L=V+(D<<14&4294967295|D>>>18),D=O+(V^I&(L^V))+M[8]+1163531501&4294967295,O=L+(D<<20&4294967295|D>>>12),D=I+(L^V&(O^L))+M[13]+2850285829&4294967295,I=O+(D<<5&4294967295|D>>>27),D=V+(O^L&(I^O))+M[2]+4243563512&4294967295,V=I+(D<<9&4294967295|D>>>23),D=L+(I^O&(V^I))+M[7]+1735328473&4294967295,L=V+(D<<14&4294967295|D>>>18),D=O+(V^I&(L^V))+M[12]+2368359562&4294967295,O=L+(D<<20&4294967295|D>>>12),D=I+(O^L^V)+M[5]+4294588738&4294967295,I=O+(D<<4&4294967295|D>>>28),D=V+(I^O^L)+M[8]+2272392833&4294967295,V=I+(D<<11&4294967295|D>>>21),D=L+(V^I^O)+M[11]+1839030562&4294967295,L=V+(D<<16&4294967295|D>>>16),D=O+(L^V^I)+M[14]+4259657740&4294967295,O=L+(D<<23&4294967295|D>>>9),D=I+(O^L^V)+M[1]+2763975236&4294967295,I=O+(D<<4&4294967295|D>>>28),D=V+(I^O^L)+M[4]+1272893353&4294967295,V=I+(D<<11&4294967295|D>>>21),D=L+(V^I^O)+M[7]+4139469664&4294967295,L=V+(D<<16&4294967295|D>>>16),D=O+(L^V^I)+M[10]+3200236656&4294967295,O=L+(D<<23&4294967295|D>>>9),D=I+(O^L^V)+M[13]+681279174&4294967295,I=O+(D<<4&4294967295|D>>>28),D=V+(I^O^L)+M[0]+3936430074&4294967295,V=I+(D<<11&4294967295|D>>>21),D=L+(V^I^O)+M[3]+3572445317&4294967295,L=V+(D<<16&4294967295|D>>>16),D=O+(L^V^I)+M[6]+76029189&4294967295,O=L+(D<<23&4294967295|D>>>9),D=I+(O^L^V)+M[9]+3654602809&4294967295,I=O+(D<<4&4294967295|D>>>28),D=V+(I^O^L)+M[12]+3873151461&4294967295,V=I+(D<<11&4294967295|D>>>21),D=L+(V^I^O)+M[15]+530742520&4294967295,L=V+(D<<16&4294967295|D>>>16),D=O+(L^V^I)+M[2]+3299628645&4294967295,O=L+(D<<23&4294967295|D>>>9),D=I+(L^(O|~V))+M[0]+4096336452&4294967295,I=O+(D<<6&4294967295|D>>>26),D=V+(O^(I|~L))+M[7]+1126891415&4294967295,V=I+(D<<10&4294967295|D>>>22),D=L+(I^(V|~O))+M[14]+2878612391&4294967295,L=V+(D<<15&4294967295|D>>>17),D=O+(V^(L|~I))+M[5]+4237533241&4294967295,O=L+(D<<21&4294967295|D>>>11),D=I+(L^(O|~V))+M[12]+1700485571&4294967295,I=O+(D<<6&4294967295|D>>>26),D=V+(O^(I|~L))+M[3]+2399980690&4294967295,V=I+(D<<10&4294967295|D>>>22),D=L+(I^(V|~O))+M[10]+4293915773&4294967295,L=V+(D<<15&4294967295|D>>>17),D=O+(V^(L|~I))+M[1]+2240044497&4294967295,O=L+(D<<21&4294967295|D>>>11),D=I+(L^(O|~V))+M[8]+1873313359&4294967295,I=O+(D<<6&4294967295|D>>>26),D=V+(O^(I|~L))+M[15]+4264355552&4294967295,V=I+(D<<10&4294967295|D>>>22),D=L+(I^(V|~O))+M[6]+2734768916&4294967295,L=V+(D<<15&4294967295|D>>>17),D=O+(V^(L|~I))+M[13]+1309151649&4294967295,O=L+(D<<21&4294967295|D>>>11),D=I+(L^(O|~V))+M[4]+4149444226&4294967295,I=O+(D<<6&4294967295|D>>>26),D=V+(O^(I|~L))+M[11]+3174756917&4294967295,V=I+(D<<10&4294967295|D>>>22),D=L+(I^(V|~O))+M[2]+718787259&4294967295,L=V+(D<<15&4294967295|D>>>17),D=O+(V^(L|~I))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+L&4294967295,R.g[3]=R.g[3]+V&4294967295}r.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var O=I-this.blockSize,M=this.B,L=this.h,V=0;V<I;){if(L==0)for(;V<=O;)i(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<I;)if(M[L++]=R.charCodeAt(V++),L==this.blockSize){i(this,M),L=0;break}}else for(;V<I;)if(M[L++]=R[V++],L==this.blockSize){i(this,M),L=0;break}}this.h=L,this.o+=I},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var O=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=O&255,O/=256;for(this.u(R),R=Array(16),I=O=0;4>I;++I)for(var M=0;32>M;M+=8)R[O++]=this.g[I]>>>M&255;return R};function s(R,I){var O=a;return Object.prototype.hasOwnProperty.call(O,R)?O[R]:O[R]=I(R)}function o(R,I){this.h=I;for(var O=[],M=!0,L=R.length-1;0<=L;L--){var V=R[L]|0;M&&V==I||(O[L]=V,M=!1)}this.g=O}var a={};function u(R){return-128<=R&&128>R?s(R,function(I){return new o([I|0],0>I?-1:0)}):new o([R|0],0>R?-1:0)}function l(R){if(isNaN(R)||!isFinite(R))return f;if(0>R)return g(l(-R));for(var I=[],O=1,M=0;R>=O;M++)I[M]=R/O|0,O*=4294967296;return new o(I,0)}function c(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return g(c(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=l(Math.pow(I,8)),M=f,L=0;L<R.length;L+=8){var V=Math.min(8,R.length-L),D=parseInt(R.substring(L,L+V),I);8>V?(V=l(Math.pow(I,V)),M=M.j(V).add(l(D))):(M=M.j(O),M=M.add(l(D)))}return M}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var R=0,I=1,O=0;O<this.g.length;O++){var M=this.i(O);R+=(0<=M?M:4294967296+M)*I,I*=4294967296}return R},e.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(p(this))return"0";if(m(this))return"-"+g(this).toString(R);for(var I=l(Math.pow(R,6)),O=this,M="";;){var L=w(O,I).g;O=b(O,L.j(I));var V=((0<O.g.length?O.g[0]:O.h)>>>0).toString(R);if(O=L,p(O))return V+M;for(;6>V.length;)V="0"+V;M=V+M}},e.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function p(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function m(R){return R.h==-1}e.l=function(R){return R=b(this,R),m(R)?-1:p(R)?0:1};function g(R){for(var I=R.g.length,O=[],M=0;M<I;M++)O[M]=~R.g[M];return new o(O,~R.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(R){for(var I=Math.max(this.g.length,R.g.length),O=[],M=0,L=0;L<=I;L++){var V=M+(this.i(L)&65535)+(R.i(L)&65535),D=(V>>>16)+(this.i(L)>>>16)+(R.i(L)>>>16);M=D>>>16,V&=65535,D&=65535,O[L]=D<<16|V}return new o(O,O[O.length-1]&-2147483648?-1:0)};function b(R,I){return R.add(g(I))}e.j=function(R){if(p(this)||p(R))return f;if(m(this))return m(R)?g(this).j(g(R)):g(g(this).j(R));if(m(R))return g(this.j(g(R)));if(0>this.l(h)&&0>R.l(h))return l(this.m()*R.m());for(var I=this.g.length+R.g.length,O=[],M=0;M<2*I;M++)O[M]=0;for(M=0;M<this.g.length;M++)for(var L=0;L<R.g.length;L++){var V=this.i(M)>>>16,D=this.i(M)&65535,j=R.i(L)>>>16,z=R.i(L)&65535;O[2*M+2*L]+=D*z,y(O,2*M+2*L),O[2*M+2*L+1]+=V*z,y(O,2*M+2*L+1),O[2*M+2*L+1]+=D*j,y(O,2*M+2*L+1),O[2*M+2*L+2]+=V*j,y(O,2*M+2*L+2)}for(M=0;M<I;M++)O[M]=O[2*M+1]<<16|O[2*M];for(M=I;M<2*I;M++)O[M]=0;return new o(O,0)};function y(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function x(R,I){this.g=R,this.h=I}function w(R,I){if(p(I))throw Error("division by zero");if(p(R))return new x(f,f);if(m(R))return I=w(g(R),I),new x(g(I.g),g(I.h));if(m(I))return I=w(R,g(I)),new x(g(I.g),I.h);if(30<R.g.length){if(m(R)||m(I))throw Error("slowDivide_ only works with positive integers.");for(var O=d,M=I;0>=M.l(R);)O=S(O),M=S(M);var L=C(O,1),V=C(M,1);for(M=C(M,2),O=C(O,2);!p(M);){var D=V.add(M);0>=D.l(R)&&(L=L.add(O),V=D),M=C(M,1),O=C(O,1)}return I=b(R,L.j(I)),new x(L,I)}for(L=f;0<=R.l(I);){for(O=Math.max(1,Math.floor(R.m()/I.m())),M=Math.ceil(Math.log(O)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),V=l(O),D=V.j(I);m(D)||0<D.l(R);)O-=M,V=l(O),D=V.j(I);p(V)&&(V=d),L=L.add(V),R=b(R,D)}return new x(L,R)}e.A=function(R){return w(this,R).h},e.and=function(R){for(var I=Math.max(this.g.length,R.g.length),O=[],M=0;M<I;M++)O[M]=this.i(M)&R.i(M);return new o(O,this.h&R.h)},e.or=function(R){for(var I=Math.max(this.g.length,R.g.length),O=[],M=0;M<I;M++)O[M]=this.i(M)|R.i(M);return new o(O,this.h|R.h)},e.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),O=[],M=0;M<I;M++)O[M]=this.i(M)^R.i(M);return new o(O,this.h^R.h)};function S(R){for(var I=R.g.length+1,O=[],M=0;M<I;M++)O[M]=R.i(M)<<1|R.i(M-1)>>>31;return new o(O,R.h)}function C(R,I){var O=I>>5;I%=32;for(var M=R.g.length-O,L=[],V=0;V<M;V++)L[V]=0<I?R.i(V+O)>>>I|R.i(V+O+1)<<32-I:R.i(V+O);return new o(L,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Pbe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,Jv=o}).apply(typeof Rie<"u"?Rie:typeof self<"u"?self:typeof window<"u"?window:{});var S6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nbe,A3,Dbe,NP,zU,Obe,Mbe,Lbe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(F,re,le){return F==Array.prototype||F==Object.prototype||(F[re]=le.value),F};function n(F){F=[typeof globalThis=="object"&&globalThis,F,typeof window=="object"&&window,typeof self=="object"&&self,typeof S6=="object"&&S6];for(var re=0;re<F.length;++re){var le=F[re];if(le&&le.Math==Math)return le}throw Error("Cannot find global object")}var r=n(this);function i(F,re){if(re)e:{var le=r;F=F.split(".");for(var be=0;be<F.length-1;be++){var Xe=F[be];if(!(Xe in le))break e;le=le[Xe]}F=F[F.length-1],be=le[F],re=re(be),re!=be&&re!=null&&t(le,F,{configurable:!0,writable:!0,value:re})}}function s(F,re){F instanceof String&&(F+="");var le=0,be=!1,Xe={next:function(){if(!be&&le<F.length){var ut=le++;return{value:re(ut,F[ut]),done:!1}}return be=!0,{done:!0,value:void 0}}};return Xe[Symbol.iterator]=function(){return Xe},Xe}i("Array.prototype.values",function(F){return F||function(){return s(this,function(re,le){return le})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(F){var re=typeof F;return re=re!="object"?re:F?Array.isArray(F)?"array":re:"null",re=="array"||re=="object"&&typeof F.length=="number"}function l(F){var re=typeof F;return re=="object"&&F!=null||re=="function"}function c(F,re,le){return F.call.apply(F.bind,arguments)}function f(F,re,le){if(!F)throw Error();if(2<arguments.length){var be=Array.prototype.slice.call(arguments,2);return function(){var Xe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Xe,be),F.apply(re,Xe)}}return function(){return F.apply(re,arguments)}}function d(F,re,le){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(F,re){var le=Array.prototype.slice.call(arguments,1);return function(){var be=le.slice();return be.push.apply(be,arguments),F.apply(this,be)}}function p(F,re){function le(){}le.prototype=re.prototype,F.aa=re.prototype,F.prototype=new le,F.prototype.constructor=F,F.Qb=function(be,Xe,ut){for(var Xt=Array(arguments.length-2),Lr=2;Lr<arguments.length;Lr++)Xt[Lr-2]=arguments[Lr];return re.prototype[Xe].apply(be,Xt)}}function m(F){const re=F.length;if(0<re){const le=Array(re);for(let be=0;be<re;be++)le[be]=F[be];return le}return[]}function g(F,re){for(let le=1;le<arguments.length;le++){const be=arguments[le];if(u(be)){const Xe=F.length||0,ut=be.length||0;F.length=Xe+ut;for(let Xt=0;Xt<ut;Xt++)F[Xe+Xt]=be[Xt]}else F.push(be)}}class b{constructor(re,le){this.i=re,this.j=le,this.h=0,this.g=null}get(){let re;return 0<this.h?(this.h--,re=this.g,this.g=re.next,re.next=null):re=this.i(),re}}function y(F){return/^[\s\xa0]*$/.test(F)}function x(){var F=a.navigator;return F&&(F=F.userAgent)?F:""}function w(F){return w[" "](F),F}w[" "]=function(){};var S=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function C(F,re,le){for(const be in F)re.call(le,F[be],be,F)}function R(F,re){for(const le in F)re.call(void 0,F[le],le,F)}function I(F){const re={};for(const le in F)re[le]=F[le];return re}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(F,re){let le,be;for(let Xe=1;Xe<arguments.length;Xe++){be=arguments[Xe];for(le in be)F[le]=be[le];for(let ut=0;ut<O.length;ut++)le=O[ut],Object.prototype.hasOwnProperty.call(be,le)&&(F[le]=be[le])}}function L(F){var re=1;F=F.split(":");const le=[];for(;0<re&&F.length;)le.push(F.shift()),re--;return F.length&&le.push(F.join(":")),le}function V(F){a.setTimeout(()=>{throw F},0)}function D(){var F=ue;let re=null;return F.g&&(re=F.g,F.g=F.g.next,F.g||(F.h=null),re.next=null),re}class j{constructor(){this.h=this.g=null}add(re,le){const be=z.get();be.set(re,le),this.h?this.h.next=be:this.g=be,this.h=be}}var z=new b(()=>new G,F=>F.reset());class G{constructor(){this.next=this.g=this.h=null}set(re,le){this.h=re,this.g=le,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ne=!1,ue=new j,X=()=>{const F=a.Promise.resolve(void 0);ee=()=>{F.then(W)}};var W=()=>{for(var F;F=D();){try{F.h.call(F.g)}catch(le){V(le)}var re=z;re.j(F),100>re.h&&(re.h++,F.next=re.g,re.g=F)}ne=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(F,re){this.type=F,this.g=this.target=re,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var F=!1,re=Object.defineProperty({},"passive",{get:function(){F=!0}});try{const le=()=>{};a.addEventListener("test",le,re),a.removeEventListener("test",le,re)}catch{}return F}();function oe(F,re){if(q.call(this,F?F.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,F){var le=this.type=F.type,be=F.changedTouches&&F.changedTouches.length?F.changedTouches[0]:null;if(this.target=F.target||F.srcElement,this.g=re,re=F.relatedTarget){if(S){e:{try{w(re.nodeName);var Xe=!0;break e}catch{}Xe=!1}Xe||(re=null)}}else le=="mouseover"?re=F.fromElement:le=="mouseout"&&(re=F.toElement);this.relatedTarget=re,be?(this.clientX=be.clientX!==void 0?be.clientX:be.pageX,this.clientY=be.clientY!==void 0?be.clientY:be.pageY,this.screenX=be.screenX||0,this.screenY=be.screenY||0):(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0),this.button=F.button,this.key=F.key||"",this.ctrlKey=F.ctrlKey,this.altKey=F.altKey,this.shiftKey=F.shiftKey,this.metaKey=F.metaKey,this.pointerId=F.pointerId||0,this.pointerType=typeof F.pointerType=="string"?F.pointerType:de[F.pointerType]||"",this.state=F.state,this.i=F,F.defaultPrevented&&oe.aa.h.call(this)}}p(oe,q);var de={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var F=this.i;F.preventDefault?F.preventDefault():F.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),pe=0;function Ee(F,re,le,be,Xe){this.listener=F,this.proxy=null,this.src=re,this.type=le,this.capture=!!be,this.ha=Xe,this.key=++pe,this.da=this.fa=!1}function Ae(F){F.da=!0,F.listener=null,F.proxy=null,F.src=null,F.ha=null}function ge(F){this.src=F,this.g={},this.h=0}ge.prototype.add=function(F,re,le,be,Xe){var ut=F.toString();F=this.g[ut],F||(F=this.g[ut]=[],this.h++);var Xt=Oe(F,re,be,Xe);return-1<Xt?(re=F[Xt],le||(re.fa=!1)):(re=new Ee(re,this.src,ut,!!be,Xe),re.fa=le,F.push(re)),re};function me(F,re){var le=re.type;if(le in F.g){var be=F.g[le],Xe=Array.prototype.indexOf.call(be,re,void 0),ut;(ut=0<=Xe)&&Array.prototype.splice.call(be,Xe,1),ut&&(Ae(re),F.g[le].length==0&&(delete F.g[le],F.h--))}}function Oe(F,re,le,be){for(var Xe=0;Xe<F.length;++Xe){var ut=F[Xe];if(!ut.da&&ut.listener==re&&ut.capture==!!le&&ut.ha==be)return Xe}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),Ye={};function lt(F,re,le,be,Xe){if(Array.isArray(re)){for(var ut=0;ut<re.length;ut++)lt(F,re[ut],le,be,Xe);return null}return le=sn(le),F&&F[ce]?F.K(re,le,l(be)?!!be.capture:!1,Xe):We(F,re,le,!1,be,Xe)}function We(F,re,le,be,Xe,ut){if(!re)throw Error("Invalid event type");var Xt=l(Xe)?!!Xe.capture:!!Xe,Lr=Ke(F);if(Lr||(F[Me]=Lr=new ge(F)),le=Lr.add(re,le,be,Xt,ut),le.proxy)return le;if(be=nt(),le.proxy=be,be.src=F,be.listener=le,F.addEventListener)J||(Xe=Xt),Xe===void 0&&(Xe=!1),F.addEventListener(re.toString(),be,Xe);else if(F.attachEvent)F.attachEvent(It(re.toString()),be);else if(F.addListener&&F.removeListener)F.addListener(be);else throw Error("addEventListener and attachEvent are unavailable.");return le}function nt(){function F(le){return re.call(F.src,F.listener,le)}const re=Et;return F}function yt(F,re,le,be,Xe){if(Array.isArray(re))for(var ut=0;ut<re.length;ut++)yt(F,re[ut],le,be,Xe);else be=l(be)?!!be.capture:!!be,le=sn(le),F&&F[ce]?(F=F.i,re=String(re).toString(),re in F.g&&(ut=F.g[re],le=Oe(ut,le,be,Xe),-1<le&&(Ae(ut[le]),Array.prototype.splice.call(ut,le,1),ut.length==0&&(delete F.g[re],F.h--)))):F&&(F=Ke(F))&&(re=F.g[re.toString()],F=-1,re&&(F=Oe(re,le,be,Xe)),(le=-1<F?re[F]:null)&&_t(le))}function _t(F){if(typeof F!="number"&&F&&!F.da){var re=F.src;if(re&&re[ce])me(re.i,F);else{var le=F.type,be=F.proxy;re.removeEventListener?re.removeEventListener(le,be,F.capture):re.detachEvent?re.detachEvent(It(le),be):re.addListener&&re.removeListener&&re.removeListener(be),(le=Ke(re))?(me(le,F),le.h==0&&(le.src=null,re[Me]=null)):Ae(F)}}}function It(F){return F in Ye?Ye[F]:Ye[F]="on"+F}function Et(F,re){if(F.da)F=!0;else{re=new oe(re,this);var le=F.listener,be=F.ha||F.src;F.fa&&_t(F),F=le.call(be,re)}return F}function Ke(F){return F=F[Me],F instanceof ge?F:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function sn(F){return typeof F=="function"?F:(F[Lt]||(F[Lt]=function(re){return F.handleEvent(re)}),F[Lt])}function Fe(){te.call(this),this.i=new ge(this),this.M=this,this.F=null}p(Fe,te),Fe.prototype[ce]=!0,Fe.prototype.removeEventListener=function(F,re,le,be){yt(this,F,re,le,be)};function Qe(F,re){var le,be=F.F;if(be)for(le=[];be;be=be.F)le.push(be);if(F=F.M,be=re.type||re,typeof re=="string")re=new q(re,F);else if(re instanceof q)re.target=re.target||F;else{var Xe=re;re=new q(be,F),M(re,Xe)}if(Xe=!0,le)for(var ut=le.length-1;0<=ut;ut--){var Xt=re.g=le[ut];Xe=wt(Xt,be,!0,re)&&Xe}if(Xt=re.g=F,Xe=wt(Xt,be,!0,re)&&Xe,Xe=wt(Xt,be,!1,re)&&Xe,le)for(ut=0;ut<le.length;ut++)Xt=re.g=le[ut],Xe=wt(Xt,be,!1,re)&&Xe}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var F=this.i,re;for(re in F.g){for(var le=F.g[re],be=0;be<le.length;be++)Ae(le[be]);delete F.g[re],F.h--}}this.F=null},Fe.prototype.K=function(F,re,le,be){return this.i.add(String(F),re,!1,le,be)},Fe.prototype.L=function(F,re,le,be){return this.i.add(String(F),re,!0,le,be)};function wt(F,re,le,be){if(re=F.i.g[String(re)],!re)return!0;re=re.concat();for(var Xe=!0,ut=0;ut<re.length;++ut){var Xt=re[ut];if(Xt&&!Xt.da&&Xt.capture==le){var Lr=Xt.listener,Us=Xt.ha||Xt.src;Xt.fa&&me(F.i,Xt),Xe=Lr.call(Us,be)!==!1&&Xe}}return Xe&&!be.defaultPrevented}function Vt(F,re,le){if(typeof F=="function")le&&(F=d(F,le));else if(F&&typeof F.handleEvent=="function")F=d(F.handleEvent,F);else throw Error("Invalid listener argument");return 2147483647<Number(re)?-1:a.setTimeout(F,re||0)}function Wt(F){F.g=Vt(()=>{F.g=null,F.i&&(F.i=!1,Wt(F))},F.l);const re=F.h;F.h=null,F.m.apply(null,re)}class bn extends te{constructor(re,le){super(),this.m=re,this.l=le,this.h=null,this.i=!1,this.g=null}j(re){this.h=arguments,this.g?this.i=!0:Wt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(F){te.call(this),this.h=F,this.g={}}p(Dn,te);var Zn=[];function wr(F){C(F.g,function(re,le){this.g.hasOwnProperty(le)&&_t(re)},F),F.g={}}Dn.prototype.N=function(){Dn.aa.N.call(this),wr(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hn=a.JSON.stringify,nr=a.JSON.parse,Ei=class{stringify(F){return a.JSON.stringify(F,void 0)}parse(F){return a.JSON.parse(F,void 0)}};function Dr(){}Dr.prototype.h=null;function Co(F){return F.h||(F.h=F.i())}function Ji(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zi(){q.call(this,"d")}p(Zi,q);function ei(){q.call(this,"c")}p(ei,q);var mo={},Gu=null;function Sa(){return Gu=Gu||new Fe}mo.La="serverreachability";function Ta(F){q.call(this,mo.La,F)}p(Ta,q);function Kr(F){const re=Sa();Qe(re,new Ta(re))}mo.STAT_EVENT="statevent";function Oi(F,re){q.call(this,mo.STAT_EVENT,F),this.stat=re}p(Oi,q);function si(F){const re=Sa();Qe(re,new Oi(re,F))}mo.Ma="timingevent";function Zs(F,re){q.call(this,mo.Ma,F),this.size=re}p(Zs,q);function Xr(F,re){if(typeof F!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){F()},re)}function Hi(){this.g=!0}Hi.prototype.xa=function(){this.g=!1};function eo(F,re,le,be,Xe,ut){F.info(function(){if(F.g)if(ut)for(var Xt="",Lr=ut.split("&"),Us=0;Us<Lr.length;Us++){var Pr=Lr[Us].split("=");if(1<Pr.length){var ai=Pr[0];Pr=Pr[1];var cs=ai.split("_");Xt=2<=cs.length&&cs[1]=="type"?Xt+(ai+"="+Pr+"&"):Xt+(ai+"=redacted&")}}else Xt=null;else Xt=ut;return"XMLHTTP REQ ("+be+") [attempt "+Xe+"]: "+re+`
`+le+`
`+Xt})}function go(F,re,le,be,Xe,ut,Xt){F.info(function(){return"XMLHTTP RESP ("+be+") [ attempt "+Xe+"]: "+re+`
`+le+`
`+ut+" "+Xt})}function Jo(F,re,le,be){F.info(function(){return"XMLHTTP TEXT ("+re+"): "+pd(F,le)+(be?" "+be:"")})}function Ca(F,re){F.info(function(){return"TIMEOUT: "+re})}Hi.prototype.info=function(){};function pd(F,re){if(!F.g)return re;if(!re)return null;try{var le=JSON.parse(re);if(le){for(F=0;F<le.length;F++)if(Array.isArray(le[F])){var be=le[F];if(!(2>be.length)){var Xe=be[1];if(Array.isArray(Xe)&&!(1>Xe.length)){var ut=Xe[0];if(ut!="noop"&&ut!="stop"&&ut!="close")for(var Xt=1;Xt<Xe.length;Xt++)Xe[Xt]=""}}}}return Hn(le)}catch{return re}}var Hr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bs;function Ka(){}p(Ka,Dr),Ka.prototype.g=function(){return new XMLHttpRequest},Ka.prototype.i=function(){return{}},bs=new Ka;function Zo(F,re,le,be){this.j=F,this.i=re,this.l=le,this.R=be||1,this.U=new Dn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yh}function yh(){this.i=null,this.g="",this.h=!1}var md={},mf={};function gf(F,re,le){F.L=1,F.v=lr(Rt(re)),F.m=le,F.P=!0,xc(F,null)}function xc(F,re){F.F=Date.now(),Er(F),F.A=Rt(F.v);var le=F.A,be=F.R;Array.isArray(be)||(be=[String(be)]),cr(le.i,"t",be),F.C=0,le=F.j.J,F.h=new yh,F.g=jg(F.j,le?re:null,!F.m),0<F.O&&(F.M=new bn(d(F.Y,F,F.g),F.O)),re=F.U,le=F.g,be=F.ca;var Xe="readystatechange";Array.isArray(Xe)||(Xe&&(Zn[0]=Xe.toString()),Xe=Zn);for(var ut=0;ut<Xe.length;ut++){var Xt=lt(le,Xe[ut],be||re.handleEvent,!1,re.h||re);if(!Xt)break;re.g[Xt.key]=Xt}re=F.H?I(F.H):{},F.m?(F.u||(F.u="POST"),re["Content-Type"]="application/x-www-form-urlencoded",F.g.ea(F.A,F.u,F.m,re)):(F.u="GET",F.g.ea(F.A,F.u,null,re)),Kr(),eo(F.i,F.u,F.A,F.l,F.R,F.m)}Zo.prototype.ca=function(F){F=F.target;const re=this.M;re&&Ir(F)==3?re.j():this.Y(F)},Zo.prototype.Y=function(F){try{if(F==this.g)e:{const cs=Ir(this.g);var re=this.g.Ba();const Io=this.g.Z();if(!(3>cs)&&(cs!=3||this.g&&(this.h.h||this.g.oa()||_s(this.g)))){this.J||cs!=4||re==7||(re==8||0>=Io?Kr(3):Kr(2)),xs(this);var le=this.g.Z();this.X=le;t:if(_c(this)){var be=_s(this.g);F="";var Xe=be.length,ut=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){As(this),Xa(this);var Xt="";break t}this.h.i=new a.TextDecoder}for(re=0;re<Xe;re++)this.h.h=!0,F+=this.h.i.decode(be[re],{stream:!(ut&&re==Xe-1)});be.length=0,this.h.g+=F,this.C=0,Xt=this.h.g}else Xt=this.g.oa();if(this.o=le==200,go(this.i,this.u,this.A,this.l,this.R,cs,le),this.o){if(this.T&&!this.K){t:{if(this.g){var Lr,Us=this.g;if((Lr=Us.g?Us.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Lr)){var Pr=Lr;break t}}Pr=null}if(le=Pr)Jo(this.i,this.l,le,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nl(this,le);else{this.o=!1,this.s=3,si(12),As(this),Xa(this);break e}}if(this.P){le=!0;let yo;for(;!this.J&&this.C<Xt.length;)if(yo=wc(this,Xt),yo==mf){cs==4&&(this.s=4,si(14),le=!1),Jo(this.i,this.l,null,"[Incomplete Response]");break}else if(yo==md){this.s=4,si(15),Jo(this.i,this.l,Xt,"[Invalid Chunk]"),le=!1;break}else Jo(this.i,this.l,yo,null),Nl(this,yo);if(_c(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cs!=4||Xt.length!=0||this.h.h||(this.s=1,si(16),le=!1),this.o=this.o&&le,!le)Jo(this.i,this.l,Xt,"[Invalid Chunked Response]"),As(this),Xa(this);else if(0<Xt.length&&!this.W){this.W=!0;var ai=this.j;ai.g==this&&ai.ba&&!ai.M&&(ai.j.info("Great, no buffering proxy detected. Bytes received: "+Xt.length),Ra(ai),ai.M=!0,si(11))}}else Jo(this.i,this.l,Xt,null),Nl(this,Xt);cs==4&&As(this),this.o&&!this.J&&(cs==4?vi(this.j,this):(this.o=!1,Er(this)))}else na(this.g),le==400&&0<Xt.indexOf("Unknown SID")?(this.s=3,si(12)):(this.s=0,si(13)),As(this),Xa(this)}}}catch{}finally{}};function _c(F){return F.g?F.u=="GET"&&F.L!=2&&F.j.Ca:!1}function wc(F,re){var le=F.C,be=re.indexOf(`
`,le);return be==-1?mf:(le=Number(re.substring(le,be)),isNaN(le)?md:(be+=1,be+le>re.length?mf:(re=re.slice(be,be+le),F.C=be+le,re)))}Zo.prototype.cancel=function(){this.J=!0,As(this)};function Er(F){F.S=Date.now()+F.I,Ec(F,F.I)}function Ec(F,re){if(F.B!=null)throw Error("WatchDog timer not null");F.B=Xr(d(F.ba,F),re)}function xs(F){F.B&&(a.clearTimeout(F.B),F.B=null)}Zo.prototype.ba=function(){this.B=null;const F=Date.now();0<=F-this.S?(Ca(this.i,this.A),this.L!=2&&(Kr(),si(17)),As(this),this.s=2,Xa(this)):Ec(this,this.S-F)};function Xa(F){F.j.G==0||F.J||vi(F.j,F)}function As(F){xs(F);var re=F.M;re&&typeof re.ma=="function"&&re.ma(),F.M=null,wr(F.U),F.g&&(re=F.g,F.g=null,re.abort(),re.ma())}function Nl(F,re){try{var le=F.j;if(le.G!=0&&(le.g==F||rr(le.h,F))){if(!F.K&&rr(le.h,F)&&le.G==3){try{var be=le.Da.g.parse(re)}catch{be=null}if(Array.isArray(be)&&be.length==3){var Xe=be;if(Xe[0]==0){e:if(!le.u){if(le.g)if(le.g.F+3e3<F.F)vd(le),no(le);else break e;yi(le),si(18)}}else le.za=Xe[1],0<le.za-le.T&&37500>Xe[2]&&le.F&&le.v==0&&!le.C&&(le.C=Xr(d(le.Za,le),6e3));if(1>=ti(le.h)&&le.ca){try{le.ca()}catch{}le.ca=void 0}}else Xu(le,11)}else if((F.K||le.g==F)&&vd(le),!y(re))for(Xe=le.Da.g.parse(re),re=0;re<Xe.length;re++){let Pr=Xe[re];if(le.T=Pr[0],Pr=Pr[1],le.G==2)if(Pr[0]=="c"){le.K=Pr[1],le.ia=Pr[2];const ai=Pr[3];ai!=null&&(le.la=ai,le.j.info("VER="+le.la));const cs=Pr[4];cs!=null&&(le.Aa=cs,le.j.info("SVER="+le.Aa));const Io=Pr[5];Io!=null&&typeof Io=="number"&&0<Io&&(be=1.5*Io,le.L=be,le.j.info("backChannelRequestTimeoutMs_="+be)),be=le;const yo=F.g;if(yo){const vo=yo.g?yo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vo){var ut=be.h;ut.g||vo.indexOf("spdy")==-1&&vo.indexOf("quic")==-1&&vo.indexOf("h2")==-1||(ut.j=ut.l,ut.g=new Set,ut.h&&(ve(ut,ut.h),ut.h=null))}if(be.D){const Ll=yo.g?yo.g.getResponseHeader("X-HTTP-Session-Id"):null;Ll&&(be.ya=Ll,Sn(be.I,be.D,Ll))}}le.G=3,le.l&&le.l.ua(),le.ba&&(le.R=Date.now()-F.F,le.j.info("Handshake RTT: "+le.R+"ms")),be=le;var Xt=F;if(be.qa=bd(be,be.J?be.ia:null,be.W),Xt.K){Ie(be.h,Xt);var Lr=Xt,Us=be.L;Us&&(Lr.I=Us),Lr.B&&(xs(Lr),Er(Lr)),be.g=Xt}else Ro(be);0<le.i.length&&ra(le)}else Pr[0]!="stop"&&Pr[0]!="close"||Xu(le,7);else le.G==3&&(Pr[0]=="stop"||Pr[0]=="close"?Pr[0]=="stop"?Xu(le,7):Li(le):Pr[0]!="noop"&&le.l&&le.l.ta(Pr),le.v=0)}}Kr(4)}catch{}}var Sc=class{constructor(F,re){this.g=F,this.map=re}};function ea(F){this.l=F||10,a.PerformanceNavigationTiming?(F=a.performance.getEntriesByType("navigation"),F=0<F.length&&(F[0].nextHopProtocol=="hq"||F[0].nextHopProtocol=="h2")):F=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=F?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qi(F){return F.h?!0:F.g?F.g.size>=F.j:!1}function ti(F){return F.h?1:F.g?F.g.size:0}function rr(F,re){return F.h?F.h==re:F.g?F.g.has(re):!1}function ve(F,re){F.g?F.g.add(re):F.h=re}function Ie(F,re){F.h&&F.h==re?F.h=null:F.g&&F.g.has(re)&&F.g.delete(re)}ea.prototype.cancel=function(){if(this.i=Se(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const F of this.g.values())F.cancel();this.g.clear()}};function Se(F){if(F.h!=null)return F.i.concat(F.h.D);if(F.g!=null&&F.g.size!==0){let re=F.i;for(const le of F.g.values())re=re.concat(le.D);return re}return m(F.i)}function Be(F){if(F.V&&typeof F.V=="function")return F.V();if(typeof Map<"u"&&F instanceof Map||typeof Set<"u"&&F instanceof Set)return Array.from(F.values());if(typeof F=="string")return F.split("");if(u(F)){for(var re=[],le=F.length,be=0;be<le;be++)re.push(F[be]);return re}re=[],le=0;for(be in F)re[le++]=F[be];return re}function ze(F){if(F.na&&typeof F.na=="function")return F.na();if(!F.V||typeof F.V!="function"){if(typeof Map<"u"&&F instanceof Map)return Array.from(F.keys());if(!(typeof Set<"u"&&F instanceof Set)){if(u(F)||typeof F=="string"){var re=[];F=F.length;for(var le=0;le<F;le++)re.push(le);return re}re=[],le=0;for(const be in F)re[le++]=be;return re}}}function De(F,re){if(F.forEach&&typeof F.forEach=="function")F.forEach(re,void 0);else if(u(F)||typeof F=="string")Array.prototype.forEach.call(F,re,void 0);else for(var le=ze(F),be=Be(F),Xe=be.length,ut=0;ut<Xe;ut++)re.call(void 0,be[ut],le&&le[ut],F)}var ht=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kt(F,re){if(F){F=F.split("&");for(var le=0;le<F.length;le++){var be=F[le].indexOf("="),Xe=null;if(0<=be){var ut=F[le].substring(0,be);Xe=F[le].substring(be+1)}else ut=F[le];re(ut,Xe?decodeURIComponent(Xe.replace(/\+/g," ")):"")}}}function Nt(F){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,F instanceof Nt){this.h=F.h,jt(this,F.j),this.o=F.o,this.g=F.g,Zt(this,F.s),this.l=F.l;var re=F.i,le=new to;le.i=re.i,re.g&&(le.g=new Map(re.g),le.h=re.h),qn(this,le),this.m=F.m}else F&&(re=String(F).match(ht))?(this.h=!1,jt(this,re[1]||"",!0),this.o=_n(re[2]||""),this.g=_n(re[3]||"",!0),Zt(this,re[4]),this.l=_n(re[5]||"",!0),qn(this,re[6]||"",!0),this.m=_n(re[7]||"")):(this.h=!1,this.i=new to(null,this.h))}Nt.prototype.toString=function(){var F=[],re=this.j;re&&F.push(br(re,Ao,!0),":");var le=this.g;return(le||re=="file")&&(F.push("//"),(re=this.o)&&F.push(br(re,Ao,!0),"@"),F.push(encodeURIComponent(String(le)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),le=this.s,le!=null&&F.push(":",String(le))),(le=this.l)&&(this.g&&le.charAt(0)!="/"&&F.push("/"),F.push(br(le,le.charAt(0)=="/"?gd:Dl,!0))),(le=this.i.toString())&&F.push("?",le),(le=this.m)&&F.push("#",br(le,yf)),F.join("")};function Rt(F){return new Nt(F)}function jt(F,re,le){F.j=le?_n(re,!0):re,F.j&&(F.j=F.j.replace(/:$/,""))}function Zt(F,re){if(re){if(re=Number(re),isNaN(re)||0>re)throw Error("Bad port number "+re);F.s=re}else F.s=null}function qn(F,re,le){re instanceof to?(F.i=re,ka(F.i,F.h)):(le||(re=br(re,Yu)),F.i=new to(re,F.h))}function Sn(F,re,le){F.i.set(re,le)}function lr(F){return Sn(F,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),F}function _n(F,re){return F?re?decodeURI(F.replace(/%25/g,"%2525")):decodeURIComponent(F):""}function br(F,re,le){return typeof F=="string"?(F=encodeURI(F).replace(re,ls),le&&(F=F.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F):null}function ls(F){return F=F.charCodeAt(0),"%"+(F>>4&15).toString(16)+(F&15).toString(16)}var Ao=/[#\/\?@]/g,Dl=/[#\?:]/g,gd=/[#\?]/g,Yu=/[#\?@]/g,yf=/#/g;function to(F,re){this.h=this.g=null,this.i=F||null,this.j=!!re}function Mi(F){F.g||(F.g=new Map,F.h=0,F.i&&kt(F.i,function(re,le){F.add(decodeURIComponent(re.replace(/\+/g," ")),le)}))}e=to.prototype,e.add=function(F,re){Mi(this),this.i=null,F=Aa(this,F);var le=this.g.get(F);return le||this.g.set(F,le=[]),le.push(re),this.h+=1,this};function ko(F,re){Mi(F),re=Aa(F,re),F.g.has(re)&&(F.i=null,F.h-=F.g.get(re).length,F.g.delete(re))}function ta(F,re){return Mi(F),re=Aa(F,re),F.g.has(re)}e.forEach=function(F,re){Mi(this),this.g.forEach(function(le,be){le.forEach(function(Xe){F.call(re,Xe,be,this)},this)},this)},e.na=function(){Mi(this);const F=Array.from(this.g.values()),re=Array.from(this.g.keys()),le=[];for(let be=0;be<re.length;be++){const Xe=F[be];for(let ut=0;ut<Xe.length;ut++)le.push(re[be])}return le},e.V=function(F){Mi(this);let re=[];if(typeof F=="string")ta(this,F)&&(re=re.concat(this.g.get(Aa(this,F))));else{F=Array.from(this.g.values());for(let le=0;le<F.length;le++)re=re.concat(F[le])}return re},e.set=function(F,re){return Mi(this),this.i=null,F=Aa(this,F),ta(this,F)&&(this.h-=this.g.get(F).length),this.g.set(F,[re]),this.h+=1,this},e.get=function(F,re){return F?(F=this.V(F),0<F.length?String(F[0]):re):re};function cr(F,re,le){ko(F,re),0<le.length&&(F.i=null,F.g.set(Aa(F,re),m(le)),F.h+=le.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const F=[],re=Array.from(this.g.keys());for(var le=0;le<re.length;le++){var be=re[le];const ut=encodeURIComponent(String(be)),Xt=this.V(be);for(be=0;be<Xt.length;be++){var Xe=ut;Xt[be]!==""&&(Xe+="="+encodeURIComponent(String(Xt[be]))),F.push(Xe)}}return this.i=F.join("&")};function Aa(F,re){return re=String(re),F.j&&(re=re.toLowerCase()),re}function ka(F,re){re&&!F.j&&(Mi(F),F.i=null,F.g.forEach(function(le,be){var Xe=be.toLowerCase();be!=Xe&&(ko(this,be),cr(this,Xe,le))},F)),F.j=re}function bp(F,re){const le=new Hi;if(a.Image){const be=new Image;be.onload=h(ks,le,"TestLoadImage: loaded",!0,re,be),be.onerror=h(ks,le,"TestLoadImage: error",!1,re,be),be.onabort=h(ks,le,"TestLoadImage: abort",!1,re,be),be.ontimeout=h(ks,le,"TestLoadImage: timeout",!1,re,be),a.setTimeout(function(){be.ontimeout&&be.ontimeout()},1e4),be.src=F}else re(!1)}function Ol(F,re){const le=new Hi,be=new AbortController,Xe=setTimeout(()=>{be.abort(),ks(le,"TestPingServer: timeout",!1,re)},1e4);fetch(F,{signal:be.signal}).then(ut=>{clearTimeout(Xe),ut.ok?ks(le,"TestPingServer: ok",!0,re):ks(le,"TestPingServer: server error",!1,re)}).catch(()=>{clearTimeout(Xe),ks(le,"TestPingServer: error",!1,re)})}function ks(F,re,le,be,Xe){try{Xe&&(Xe.onload=null,Xe.onerror=null,Xe.onabort=null,Xe.ontimeout=null),be(le)}catch{}}function Rs(){this.g=new Ei}function yd(F,re,le){const be=le||"";try{De(F,function(Xe,ut){let Xt=Xe;l(Xe)&&(Xt=Hn(Xe)),re.push(be+ut+"="+encodeURIComponent(Xt))})}catch(Xe){throw re.push(be+"type="+encodeURIComponent("_badmap")),Xe}}function Tc(F){this.l=F.Ub||null,this.j=F.eb||!1}p(Tc,Dr),Tc.prototype.g=function(){return new Ml(this.l,this.j)},Tc.prototype.i=function(F){return function(){return F}}({});function Ml(F,re){Fe.call(this),this.D=F,this.o=re,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Ml,Fe),e=Ml.prototype,e.open=function(F,re){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=F,this.A=re,this.readyState=1,Gn(this)},e.send=function(F){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const re={headers:this.u,method:this.B,credentials:this.m,cache:void 0};F&&(re.body=F),(this.D||a).fetch(new Request(this.A,re)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},e.Sa=function(F){if(this.g&&(this.l=F,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=F.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")F.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in F){if(this.j=F.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;X0(this)}else F.text().then(this.Ra.bind(this),this.ga.bind(this))};function X0(F){F.j.read().then(F.Pa.bind(F)).catch(F.ga.bind(F))}e.Pa=function(F){if(this.g){if(this.o&&F.value)this.response.push(F.value);else if(!this.o){var re=F.value?F.value:new Uint8Array(0);(re=this.v.decode(re,{stream:!F.done}))&&(this.response=this.responseText+=re)}F.done?xr(this):Gn(this),this.readyState==3&&X0(this)}},e.Ra=function(F){this.g&&(this.response=this.responseText=F,xr(this))},e.Qa=function(F){this.g&&(this.response=F,xr(this))},e.ga=function(){this.g&&xr(this)};function xr(F){F.readyState=4,F.l=null,F.j=null,F.v=null,Gn(F)}e.setRequestHeader=function(F,re){this.u.append(F,re)},e.getResponseHeader=function(F){return this.h&&this.h.get(F.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const F=[],re=this.h.entries();for(var le=re.next();!le.done;)le=le.value,F.push(le[0]+": "+le[1]),le=re.next();return F.join(`\r
`)};function Gn(F){F.onreadystatechange&&F.onreadystatechange.call(F)}Object.defineProperty(Ml.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(F){this.m=F?"include":"same-origin"}});function Cc(F){let re="";return C(F,function(le,be){re+=be,re+=":",re+=le,re+=`\r
`}),re}function Ce(F,re,le){e:{for(be in le){var be=!1;break e}be=!0}be||(le=Cc(le),typeof F=="string"?le!=null&&encodeURIComponent(String(le)):Sn(F,re,le))}function Ne(F){Fe.call(this),this.headers=new Map,this.o=F||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Ne,Fe);var rt=/^https?$/i,hn=["POST","PUT"];e=Ne.prototype,e.Ha=function(F){this.J=F},e.ea=function(F,re,le,be){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+F);re=re?re.toUpperCase():"GET",this.D=F,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bs.g(),this.v=this.o?Co(this.o):Co(bs),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(re,String(F),!0),this.B=!1}catch(ut){ir(this,ut);return}if(F=le||"",le=new Map(this.headers),be)if(Object.getPrototypeOf(be)===Object.prototype)for(var Xe in be)le.set(Xe,be[Xe]);else if(typeof be.keys=="function"&&typeof be.get=="function")for(const ut of be.keys())le.set(ut,be.get(ut));else throw Error("Unknown input type for opt_headers: "+String(be));be=Array.from(le.keys()).find(ut=>ut.toLowerCase()=="content-type"),Xe=a.FormData&&F instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hn,re,void 0))||be||Xe||le.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ut,Xt]of le)this.g.setRequestHeader(ut,Xt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tr(this),this.u=!0,this.g.send(F),this.u=!1}catch(ut){ir(this,ut)}};function ir(F,re){F.h=!1,F.g&&(F.j=!0,F.g.abort(),F.j=!1),F.l=re,F.m=5,Or(F),dn(F)}function Or(F){F.A||(F.A=!0,Qe(F,"complete"),Qe(F,"error"))}e.abort=function(F){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=F||7,Qe(this,"complete"),Qe(this,"abort"),dn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dn(this,!0)),Ne.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?gi(this):this.bb())},e.bb=function(){gi(this)};function gi(F){if(F.h&&typeof o<"u"&&(!F.v[1]||Ir(F)!=4||F.Z()!=2)){if(F.u&&Ir(F)==4)Vt(F.Ea,0,F);else if(Qe(F,"readystatechange"),Ir(F)==4){F.h=!1;try{const Xt=F.Z();e:switch(Xt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var re=!0;break e;default:re=!1}var le;if(!(le=re)){var be;if(be=Xt===0){var Xe=String(F.D).match(ht)[1]||null;!Xe&&a.self&&a.self.location&&(Xe=a.self.location.protocol.slice(0,-1)),be=!rt.test(Xe?Xe.toLowerCase():"")}le=be}if(le)Qe(F,"complete"),Qe(F,"success");else{F.m=6;try{var ut=2<Ir(F)?F.g.statusText:""}catch{ut=""}F.l=ut+" ["+F.Z()+"]",Or(F)}}finally{dn(F)}}}}function dn(F,re){if(F.g){Tr(F);const le=F.g,be=F.v[0]?()=>{}:null;F.g=null,F.v=null,re||Qe(F,"ready");try{le.onreadystatechange=be}catch{}}}function Tr(F){F.I&&(a.clearTimeout(F.I),F.I=null)}e.isActive=function(){return!!this.g};function Ir(F){return F.g?F.g.readyState:0}e.Z=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(F){if(this.g){var re=this.g.responseText;return F&&re.indexOf(F)==0&&(re=re.substring(F.length)),nr(re)}};function _s(F){try{if(!F.g)return null;if("response"in F.g)return F.g.response;switch(F.H){case"":case"text":return F.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in F.g)return F.g.mozResponseArrayBuffer}return null}catch{return null}}function na(F){const re={};F=(F.g&&2<=Ir(F)&&F.g.getAllResponseHeaders()||"").split(`\r
`);for(let be=0;be<F.length;be++){if(y(F[be]))continue;var le=L(F[be]);const Xe=le[0];if(le=le[1],typeof le!="string")continue;le=le.trim();const ut=re[Xe]||[];re[Xe]=ut,ut.push(le)}R(re,function(be){return be.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mr(F,re,le){return le&&le.internalChannelParams&&le.internalChannelParams[F]||re}function js(F){this.Aa=0,this.i=[],this.j=new Hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mr("failFast",!1,F),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mr("baseRetryDelayMs",5e3,F),this.cb=Mr("retryDelaySeedMs",1e4,F),this.Wa=Mr("forwardChannelMaxRetries",2,F),this.wa=Mr("forwardChannelRequestTimeoutMs",2e4,F),this.pa=F&&F.xmlHttpFactory||void 0,this.Xa=F&&F.Tb||void 0,this.Ca=F&&F.useFetchStreams||!1,this.L=void 0,this.J=F&&F.supportsCrossDomainXhr||!1,this.K="",this.h=new ea(F&&F.concurrentRequestLimit),this.Da=new Rs,this.P=F&&F.fastHandshake||!1,this.O=F&&F.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=F&&F.Rb||!1,F&&F.xa&&this.j.xa(),F&&F.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&F&&F.detectBufferingProxy||!1,this.ja=void 0,F&&F.longPollingTimeout&&0<F.longPollingTimeout&&(this.ja=F.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=js.prototype,e.la=8,e.G=1,e.connect=function(F,re,le,be){si(0),this.W=F,this.H=re||{},le&&be!==void 0&&(this.H.OSID=le,this.H.OAID=be),this.F=this.X,this.I=bd(this,null,this.W),ra(this)};function Li(F){if(Qa(F),F.G==3){var re=F.U++,le=Rt(F.I);if(Sn(le,"SID",F.K),Sn(le,"RID",re),Sn(le,"TYPE","terminate"),Ac(F,le),re=new Zo(F,F.j,re),re.L=2,re.v=lr(Rt(le)),le=!1,a.navigator&&a.navigator.sendBeacon)try{le=a.navigator.sendBeacon(re.v.toString(),"")}catch{}!le&&a.Image&&(new Image().src=re.v,le=!0),le||(re.g=jg(re.j,null),re.g.ea(re.v)),re.F=Date.now(),Er(re)}Bg(F)}function no(F){F.g&&(Ra(F),F.g.cancel(),F.g=null)}function Qa(F){no(F),F.u&&(a.clearTimeout(F.u),F.u=null),vd(F),F.h.cancel(),F.s&&(typeof F.s=="number"&&a.clearTimeout(F.s),F.s=null)}function ra(F){if(!qi(F.h)&&!F.s){F.s=!0;var re=F.Ga;ee||X(),ne||(ee(),ne=!0),ue.add(re,F),F.B=0}}function $g(F,re){return ti(F.h)>=F.h.j-(F.s?1:0)?!1:F.s?(F.i=re.D.concat(F.i),!0):F.G==1||F.G==2||F.B>=(F.Va?0:F.Wa)?!1:(F.s=Xr(d(F.Ga,F,re),Ku(F,F.B)),F.B++,!0)}e.Ga=function(F){if(this.s)if(this.s=null,this.G==1){if(!F){this.U=Math.floor(1e5*Math.random()),F=this.U++;const Xe=new Zo(this,this.j,F);let ut=this.o;if(this.S&&(ut?(ut=I(ut),M(ut,this.S)):ut=this.S),this.m!==null||this.O||(Xe.H=ut,ut=null),this.P)e:{for(var re=0,le=0;le<this.i.length;le++){t:{var be=this.i[le];if("__data__"in be.map&&(be=be.map.__data__,typeof be=="string")){be=be.length;break t}be=void 0}if(be===void 0)break;if(re+=be,4096<re){re=le;break e}if(re===4096||le===this.i.length-1){re=le+1;break e}}re=1e3}else re=1e3;re=oi(this,Xe,re),le=Rt(this.I),Sn(le,"RID",F),Sn(le,"CVER",22),this.D&&Sn(le,"X-HTTP-Session-Id",this.D),Ac(this,le),ut&&(this.O?re="headers="+encodeURIComponent(String(Cc(ut)))+"&"+re:this.m&&Ce(le,this.m,ut)),ve(this.h,Xe),this.Ua&&Sn(le,"TYPE","init"),this.P?(Sn(le,"$req",re),Sn(le,"SID","null"),Xe.T=!0,gf(Xe,le,null)):gf(Xe,le,re),this.G=2}}else this.G==3&&(F?ro(this,F):this.i.length==0||qi(this.h)||ro(this))};function ro(F,re){var le;re?le=re.l:le=F.U++;const be=Rt(F.I);Sn(be,"SID",F.K),Sn(be,"RID",le),Sn(be,"AID",F.T),Ac(F,be),F.m&&F.o&&Ce(be,F.m,F.o),le=new Zo(F,F.j,le,F.B+1),F.m===null&&(le.H=F.o),re&&(F.i=re.D.concat(F.i)),re=oi(F,le,1e3),le.I=Math.round(.5*F.wa)+Math.round(.5*F.wa*Math.random()),ve(F.h,le),gf(le,be,re)}function Ac(F,re){F.H&&C(F.H,function(le,be){Sn(re,be,le)}),F.l&&De({},function(le,be){Sn(re,be,le)})}function oi(F,re,le){le=Math.min(F.i.length,le);var be=F.l?d(F.l.Na,F.l,F):null;e:{var Xe=F.i;let ut=-1;for(;;){const Xt=["count="+le];ut==-1?0<le?(ut=Xe[0].g,Xt.push("ofs="+ut)):ut=0:Xt.push("ofs="+ut);let Lr=!0;for(let Us=0;Us<le;Us++){let Pr=Xe[Us].g;const ai=Xe[Us].map;if(Pr-=ut,0>Pr)ut=Math.max(0,Xe[Us].g-100),Lr=!1;else try{yd(ai,Xt,"req"+Pr+"_")}catch{be&&be(ai)}}if(Lr){be=Xt.join("&");break e}}}return F=F.i.splice(0,le),re.D=F,be}function Ro(F){if(!F.g&&!F.u){F.Y=1;var re=F.Fa;ee||X(),ne||(ee(),ne=!0),ue.add(re,F),F.v=0}}function yi(F){return F.g||F.u||3<=F.v?!1:(F.Y++,F.u=Xr(d(F.Fa,F),Ku(F,F.v)),F.v++,!0)}e.Fa=function(){if(this.u=null,ia(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var F=2*this.R;this.j.info("BP detection timer enabled: "+F),this.A=Xr(d(this.ab,this),F)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,si(10),no(this),ia(this))};function Ra(F){F.A!=null&&(a.clearTimeout(F.A),F.A=null)}function ia(F){F.g=new Zo(F,F.j,"rpc",F.Y),F.m===null&&(F.g.H=F.o),F.g.O=0;var re=Rt(F.qa);Sn(re,"RID","rpc"),Sn(re,"SID",F.K),Sn(re,"AID",F.T),Sn(re,"CI",F.F?"0":"1"),!F.F&&F.ja&&Sn(re,"TO",F.ja),Sn(re,"TYPE","xmlhttp"),Ac(F,re),F.m&&F.o&&Ce(re,F.m,F.o),F.L&&(F.g.I=F.L);var le=F.g;F=F.ia,le.L=1,le.v=lr(Rt(re)),le.m=null,le.P=!0,xc(le,F)}e.Za=function(){this.C!=null&&(this.C=null,no(this),yi(this),si(19))};function vd(F){F.C!=null&&(a.clearTimeout(F.C),F.C=null)}function vi(F,re){var le=null;if(F.g==re){vd(F),Ra(F),F.g=null;var be=2}else if(rr(F.h,re))le=re.D,Ie(F.h,re),be=1;else return;if(F.G!=0){if(re.o)if(be==1){le=re.m?re.m.length:0,re=Date.now()-re.F;var Xe=F.B;be=Sa(),Qe(be,new Zs(be,le)),ra(F)}else Ro(F);else if(Xe=re.s,Xe==3||Xe==0&&0<re.X||!(be==1&&$g(F,re)||be==2&&yi(F)))switch(le&&0<le.length&&(re=F.h,re.i=re.i.concat(le)),Xe){case 1:Xu(F,5);break;case 4:Xu(F,10);break;case 3:Xu(F,6);break;default:Xu(F,2)}}}function Ku(F,re){let le=F.Ta+Math.floor(Math.random()*F.cb);return F.isActive()||(le*=2),le*re}function Xu(F,re){if(F.j.info("Error code "+re),re==2){var le=d(F.fb,F),be=F.Xa;const Xe=!be;be=new Nt(be||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jt(be,"https"),lr(be),Xe?bp(be.toString(),le):Ol(be.toString(),le)}else si(2);F.G=0,F.l&&F.l.sa(re),Bg(F),Qa(F)}e.fb=function(F){F?(this.j.info("Successfully pinged google.com"),si(2)):(this.j.info("Failed to ping google.com"),si(1))};function Bg(F){if(F.G=0,F.ka=[],F.l){const re=Se(F.h);(re.length!=0||F.i.length!=0)&&(g(F.ka,re),g(F.ka,F.i),F.h.i.length=0,m(F.i),F.i.length=0),F.l.ra()}}function bd(F,re,le){var be=le instanceof Nt?Rt(le):new Nt(le);if(be.g!="")re&&(be.g=re+"."+be.g),Zt(be,be.s);else{var Xe=a.location;be=Xe.protocol,re=re?re+"."+Xe.hostname:Xe.hostname,Xe=+Xe.port;var ut=new Nt(null);be&&jt(ut,be),re&&(ut.g=re),Xe&&Zt(ut,Xe),le&&(ut.l=le),be=ut}return le=F.D,re=F.ya,le&&re&&Sn(be,le,re),Sn(be,"VER",F.la),Ac(F,be),be}function jg(F,re,le){if(re&&!F.J)throw Error("Can't create secondary domain capable XhrIo object.");return re=F.Ca&&!F.pa?new Ne(new Tc({eb:le})):new Ne(F.pa),re.Ha(F.J),re}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function vf(){}e=vf.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function vh(){}vh.prototype.g=function(F,re){return new Ia(F,re)};function Ia(F,re){Fe.call(this),this.g=new js(re),this.l=F,this.h=re&&re.messageUrlParams||null,F=re&&re.messageHeaders||null,re&&re.clientProtocolHeaderRequired&&(F?F["X-Client-Protocol"]="webchannel":F={"X-Client-Protocol":"webchannel"}),this.g.o=F,F=re&&re.initMessageHeaders||null,re&&re.messageContentType&&(F?F["X-WebChannel-Content-Type"]=re.messageContentType:F={"X-WebChannel-Content-Type":re.messageContentType}),re&&re.va&&(F?F["X-WebChannel-Client-Profile"]=re.va:F={"X-WebChannel-Client-Profile":re.va}),this.g.S=F,(F=re&&re.Sb)&&!y(F)&&(this.g.m=F),this.v=re&&re.supportsCrossDomainXhr||!1,this.u=re&&re.sendRawJson||!1,(re=re&&re.httpSessionIdParam)&&!y(re)&&(this.g.D=re,F=this.h,F!==null&&re in F&&(F=this.h,re in F&&delete F[re])),this.j=new _u(this)}p(Ia,Fe),Ia.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ia.prototype.close=function(){Li(this.g)},Ia.prototype.o=function(F){var re=this.g;if(typeof F=="string"){var le={};le.__data__=F,F=le}else this.u&&(le={},le.__data__=Hn(F),F=le);re.i.push(new Sc(re.Ya++,F)),re.G==3&&ra(re)},Ia.prototype.N=function(){this.g.l=null,delete this.j,Li(this.g),delete this.g,Ia.aa.N.call(this)};function bf(F){Zi.call(this),F.__headers__&&(this.headers=F.__headers__,this.statusCode=F.__status__,delete F.__headers__,delete F.__status__);var re=F.__sm__;if(re){e:{for(const le in re){F=le;break e}F=void 0}(this.i=F)&&(F=this.i,re=re!==null&&F in re?re[F]:void 0),this.data=re}else this.data=F}p(bf,Zi);function xd(){ei.call(this),this.status=1}p(xd,ei);function _u(F){this.g=F}p(_u,vf),_u.prototype.ua=function(){Qe(this.g,"a")},_u.prototype.ta=function(F){Qe(this.g,new bf(F))},_u.prototype.sa=function(F){Qe(this.g,new xd)},_u.prototype.ra=function(){Qe(this.g,"b")},vh.prototype.createWebChannel=vh.prototype.g,Ia.prototype.send=Ia.prototype.o,Ia.prototype.open=Ia.prototype.m,Ia.prototype.close=Ia.prototype.close,Lbe=function(){return new vh},Mbe=function(){return Sa()},Obe=mo,zU={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hr.NO_ERROR=0,Hr.TIMEOUT=8,Hr.HTTP_ERROR=6,NP=Hr,Pl.COMPLETE="complete",Dbe=Pl,Ji.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,A3=Ji,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,Nbe=Ne}).apply(typeof S6<"u"?S6:typeof self<"u"?self:typeof window<"u"?window:{});const Iie="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qf.UNAUTHENTICATED=new qf(null),qf.GOOGLE_CREDENTIALS=new qf("google-credentials-uid"),qf.FIRST_PARTY=new qf("first-party-uid"),qf.MOCK_USER=new qf("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BT="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=new I9("@firebase/firestore");function bE(){return G_.logLevel}function wn(e,...t){if(G_.logLevel<=ni.DEBUG){const n=t.map(HG);G_.debug(`Firestore (${BT}): ${e}`,...n)}}function p1(e,...t){if(G_.logLevel<=ni.ERROR){const n=t.map(HG);G_.error(`Firestore (${BT}): ${e}`,...n)}}function s4(e,...t){if(G_.logLevel<=ni.WARN){const n=t.map(HG);G_.warn(`Firestore (${BT}): ${e}`,...n)}}function HG(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(e="Unexpected state"){const t=`FIRESTORE (${BT}) INTERNAL ASSERTION FAILED: `+e;throw p1(t),new Error(t)}function Qi(e,t){e||ar()}function vr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mn extends wg{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZe{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ZZe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(qf.UNAUTHENTICATED))}shutdown(){}}class eet{constructor(t){this.t=t,this.currentUser=qf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Qi(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Xy;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xy,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{wn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(wn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xy)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(wn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qi(typeof r.accessToken=="string"),new JZe(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Qi(t===null||typeof t=="string"),new qf(t)}}class tet{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=qf.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class net{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new tet(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(qf.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ret{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iet{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){Qi(this.o===void 0);const r=s=>{s.error!=null&&wn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,wn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{wn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):wn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Qi(typeof n.token=="string"),this.R=n.token,new ret(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function set(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fbe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=set(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function fi(e,t){return e<t?-1:e>t?1:0}function _S(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{static now(){return pu.fromMillis(Date.now())}static fromDate(t){return pu.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new pu(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new mn(Tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new mn(Tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new mn(Tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mn(Tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?fi(this.nanoseconds,t.nanoseconds):fi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{static fromTimestamp(t){return new yr(t)}static min(){return new yr(new pu(0,0))}static max(){return new yr(new pu(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(t,n,r){n===void 0?n=0:n>t.length&&ar(),r===void 0?r=t.length-n:r>t.length-n&&ar(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Sm.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Sm?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=Sm.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=Sm.isNumericId(t),i=Sm.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Sm.extractNumericId(t).compare(Sm.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Jv.fromString(t.substring(4,t.length-2))}}class Ks extends Sm{construct(t,n,r){return new Ks(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new mn(Tt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ks(n)}static emptyPath(){return new Ks([])}}const oet=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gl extends Sm{construct(t,n,r){return new gl(t,n,r)}static isValidIdentifier(t){return oet.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gl.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gl(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new mn(Tt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new mn(Tt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new mn(Tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new mn(Tt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new gl(n)}static emptyPath(){return new gl([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this.path=t}static fromPath(t){return new Vn(Ks.fromString(t))}static fromName(t){return new Vn(Ks.fromString(t).popFirst(5))}static empty(){return new Vn(Ks.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ks.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ks.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Vn(new Ks(t.slice()))}}function aet(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=yr.fromTimestamp(r===1e9?new pu(n+1,0):new pu(n,r));return new fb(i,Vn.empty(),t)}function uet(e){return new fb(e.readTime,e.key,-1)}class fb{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new fb(yr.min(),Vn.empty(),-1)}static max(){return new fb(yr.max(),Vn.empty(),-1)}}function cet(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Vn.comparator(e.documentKey,t.documentKey),n!==0?n:fi(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fet="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class det{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jT(e){if(e.code!==Tt.FAILED_PRECONDITION||e.message!==fet)throw e;wn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ar(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Pt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Pt?n:Pt.resolve(n)}catch(n){return Pt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Pt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Pt.reject(n)}static resolve(t){return new Pt((n,r)=>{n(t)})}static reject(t){return new Pt((n,r)=>{r(t)})}static waitFor(t){return new Pt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Pt.resolve(!1);for(const r of t)n=n.next(i=>i?Pt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Pt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Pt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function het(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function UT(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}D9.oe=-1;function O9(e){return e==null}function _8(e){return e===0&&1/e==-1/0}function pet(e){return typeof e=="number"&&Number.isInteger(e)&&!_8(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function met(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Pie(t)),t=get(e.get(n),t);return Pie(t)}function get(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Pie(e){return e+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nie(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Kb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $be(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,n){this.comparator=t,this.root=n||dl.EMPTY}insert(t,n){return new To(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,dl.BLACK,null,null))}remove(t){return new To(this.comparator,this.root.remove(t,this.comparator).copy(null,null,dl.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new T6(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new T6(this.root,t,this.comparator,!1)}getReverseIterator(){return new T6(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new T6(this.root,t,this.comparator,!0)}}class T6{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class dl{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??dl.RED,this.left=i??dl.EMPTY,this.right=s??dl.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new dl(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dl.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return dl.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,dl.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,dl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ar();const t=this.left.check();if(t!==this.right.check())throw ar();return t+(this.isRed()?0:1)}}dl.EMPTY=null,dl.RED=!0,dl.BLACK=!1;dl.EMPTY=new class{constructor(){this.size=0}get key(){throw ar()}get value(){throw ar()}get color(){throw ar()}get left(){throw ar()}get right(){throw ar()}copy(t,n,r,i,s){return this}insert(t,n,r){return new dl(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(t){this.comparator=t,this.data=new To(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Die(this.data.getIterator())}getIteratorFrom(t){return new Die(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof mu)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new mu(this.comparator);return n.data=t,n}}class Die{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t){this.fields=t,t.sort(gl.comparator)}static empty(){return new Yd([])}unionWith(t){let n=new mu(gl.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Yd(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return _S(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bbe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Bbe("Invalid base64 string: "+s):s}}(t);return new Cl(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Cl(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return fi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Cl.EMPTY_BYTE_STRING=new Cl("");const yet=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function db(e){if(Qi(!!e),typeof e=="string"){let t=0;const n=yet.exec(e);if(Qi(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ga(e.seconds),nanos:ga(e.nanos)}}function ga(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function hb(e){return typeof e=="string"?Cl.fromBase64String(e):Cl.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qG(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function M9(e){const t=e.mapValue.fields.__previous_value__;return qG(t)?M9(t):t}function o4(e){const t=db(e.mapValue.fields.__local_write_time__.timestampValue);return new pu(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vet{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class a4{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new a4("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof a4&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function pb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qG(e)?4:xet(e)?9007199254740991:bet(e)?10:11:ar()}function og(e,t){if(e===t)return!0;const n=pb(e);if(n!==pb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return o4(e).isEqual(o4(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=db(i.timestampValue),a=db(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return hb(i.bytesValue).isEqual(hb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ga(i.geoPointValue.latitude)===ga(s.geoPointValue.latitude)&&ga(i.geoPointValue.longitude)===ga(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ga(i.integerValue)===ga(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ga(i.doubleValue),a=ga(s.doubleValue);return o===a?_8(o)===_8(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return _S(e.arrayValue.values||[],t.arrayValue.values||[],og);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Nie(o)!==Nie(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!og(o[u],a[u])))return!1;return!0}(e,t);default:return ar()}}function u4(e,t){return(e.values||[]).find(n=>og(n,t))!==void 0}function wS(e,t){if(e===t)return 0;const n=pb(e),r=pb(t);if(n!==r)return fi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fi(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ga(s.integerValue||s.doubleValue),u=ga(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Oie(e.timestampValue,t.timestampValue);case 4:return Oie(o4(e),o4(t));case 5:return fi(e.stringValue,t.stringValue);case 6:return function(s,o){const a=hb(s),u=hb(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=fi(a[l],u[l]);if(c!==0)return c}return fi(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=fi(ga(s.latitude),ga(o.latitude));return a!==0?a:fi(ga(s.longitude),ga(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Mie(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,u,l,c;const f=s.fields||{},d=o.fields||{},h=(a=f.value)===null||a===void 0?void 0:a.arrayValue,p=(u=d.value)===null||u===void 0?void 0:u.arrayValue,m=fi(((l=h==null?void 0:h.values)===null||l===void 0?void 0:l.length)||0,((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:Mie(h,p)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===C6.mapValue&&o===C6.mapValue)return 0;if(s===C6.mapValue)return 1;if(o===C6.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=fi(u[f],c[f]);if(d!==0)return d;const h=wS(a[u[f]],l[c[f]]);if(h!==0)return h}return fi(u.length,c.length)}(e.mapValue,t.mapValue);default:throw ar()}}function Oie(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return fi(e,t);const n=db(e),r=db(t),i=fi(n.seconds,r.seconds);return i!==0?i:fi(n.nanos,r.nanos)}function Mie(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=wS(n[i],r[i]);if(s)return s}return fi(n.length,r.length)}function ES(e){return VU(e)}function VU(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=db(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return hb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Vn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=VU(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${VU(n.fields[o])}`;return i+"}"}(e.mapValue):ar()}function DP(e){switch(pb(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=M9(e);return t?16+DP(t):16;case 5:return 2*e.stringValue.length;case 6:return hb(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+DP(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return Kb(r.fields,(s,o)=>{i+=s.length+DP(o)}),i}(e.mapValue);default:throw ar()}}function Lie(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function HU(e){return!!e&&"integerValue"in e}function WG(e){return!!e&&"arrayValue"in e}function Fie(e){return!!e&&"nullValue"in e}function $ie(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function OP(e){return!!e&&"mapValue"in e}function bet(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ek(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Kb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Ek(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ek(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xet(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(t){this.value=t}static empty(){return new Xf({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!OP(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ek(n)}setAll(t){let n=gl.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ek(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());OP(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return og(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];OP(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Kb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Xf(Ek(this.value))}}function jbe(e){const t=[];return Kb(e.fields,(n,r)=>{const i=new gl([n]);if(OP(r)){const s=jbe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Yd(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new tc(t,0,yr.min(),yr.min(),yr.min(),Xf.empty(),0)}static newFoundDocument(t,n,r,i){return new tc(t,1,n,yr.min(),r,i,0)}static newNoDocument(t,n){return new tc(t,2,n,yr.min(),yr.min(),Xf.empty(),0)}static newUnknownDocument(t,n){return new tc(t,3,n,yr.min(),yr.min(),Xf.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(yr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Xf.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Xf.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof tc&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new tc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w8=class{constructor(t,n){this.position=t,this.inclusive=n}};function Bie(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Vn.comparator(Vn.fromName(o.referenceValue),n.key):r=wS(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jie(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!og(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(t,n="asc"){this.field=t,this.dir=n}}function _et(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ube=class{};class Ha extends Ube{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Eet(t,n,r):n==="array-contains"?new Aet(t,r):n==="in"?new ket(t,r):n==="not-in"?new Ret(t,r):n==="array-contains-any"?new Iet(t,r):new Ha(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Tet(t,r):new Cet(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wS(n,this.value)):n!==null&&pb(this.value)===pb(n)&&this.matchesComparison(wS(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ar()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class A0 extends Ube{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new A0(t,n)}matches(t){return zbe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zbe(e){return e.op==="and"}function Vbe(e){return wet(e)&&zbe(e)}function wet(e){for(const t of e.filters)if(t instanceof A0)return!1;return!0}function qU(e){if(e instanceof Ha)return e.field.canonicalString()+e.op.toString()+ES(e.value);if(Vbe(e))return e.filters.map(t=>qU(t)).join(",");{const t=e.filters.map(n=>qU(n)).join(",");return`${e.op}(${t})`}}function Hbe(e,t){return e instanceof Ha?function(r,i){return i instanceof Ha&&r.op===i.op&&r.field.isEqual(i.field)&&og(r.value,i.value)}(e,t):e instanceof A0?function(r,i){return i instanceof A0&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Hbe(o,i.filters[a]),!0):!1}(e,t):void ar()}function qbe(e){return e instanceof Ha?function(n){return`${n.field.canonicalString()} ${n.op} ${ES(n.value)}`}(e):e instanceof A0?function(n){return n.op.toString()+" {"+n.getFilters().map(qbe).join(" ,")+"}"}(e):"Filter"}class Eet extends Ha{constructor(t,n,r){super(t,n,r),this.key=Vn.fromName(r.referenceValue)}matches(t){const n=Vn.comparator(t.key,this.key);return this.matchesComparison(n)}}class Tet extends Ha{constructor(t,n){super(t,"in",n),this.keys=Wbe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Cet extends Ha{constructor(t,n){super(t,"not-in",n),this.keys=Wbe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Wbe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Vn.fromName(r.referenceValue))}class Aet extends Ha{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return WG(n)&&u4(n.arrayValue,this.value)}}class ket extends Ha{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&u4(this.value.arrayValue,n)}}class Ret extends Ha{constructor(t,n){super(t,"not-in",n)}matches(t){if(u4(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!u4(this.value.arrayValue,n)}}class Iet extends Ha{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!WG(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>u4(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pet{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Uie(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Pet(e,t,n,r,i,s,o)}function GG(e){const t=vr(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>qU(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),O9(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>ES(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>ES(r)).join(",")),t.ue=n}return t.ue}function YG(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!_et(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Hbe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!jie(e.startAt,t.startAt)&&jie(e.endAt,t.endAt)}function WU(e){return Vn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Net(e,t,n,r,i,s,o,a){return new zT(e,t,n,r,i,s,o,a)}function KG(e){return new zT(e)}function zie(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Gbe(e){return e.collectionGroup!==null}function Sk(e){const t=vr(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new mu(gl.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new l4(s,r))}),n.has(gl.keyField().canonicalString())||t.ce.push(new l4(gl.keyField(),r))}return t.ce}function zm(e){const t=vr(e);return t.le||(t.le=Det(t,Sk(e))),t.le}function Det(e,t){if(e.limitType==="F")return Uie(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new l4(i.field,s)});const n=e.endAt?new w8(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new w8(e.startAt.position,e.startAt.inclusive):null;return Uie(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function GU(e,t){const n=e.filters.concat([t]);return new zT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function YU(e,t,n){return new zT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function L9(e,t){return YG(zm(e),zm(t))&&e.limitType===t.limitType}function Ybe(e){return`${GG(zm(e))}|lt:${e.limitType}`}function xE(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>qbe(i)).join(", ")}]`),O9(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ES(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ES(i)).join(",")),`Target(${r})`}(zm(e))}; limitType=${e.limitType})`}function F9(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Vn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of Sk(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Bie(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Sk(r),i)||r.endAt&&!function(o,a,u){const l=Bie(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Sk(r),i))}(e,t)}function Oet(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Kbe(e){return(t,n)=>{let r=!1;for(const i of Sk(e)){const s=Met(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Met(e,t,n){const r=e.field.isKeyField()?Vn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?wS(u,l):ar()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ar()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Kb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return $be(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Let=new To(Vn.comparator);function m1(){return Let}const Xbe=new To(Vn.comparator);function k3(...e){let t=Xbe;for(const n of e)t=t.insert(n.key,n);return t}function Qbe(e){let t=Xbe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function S_(){return Tk()}function Jbe(){return Tk()}function Tk(){return new Fw(e=>e.toString(),(e,t)=>e.isEqual(t))}const Fet=new To(Vn.comparator),$et=new mu(Vn.comparator);function ri(...e){let t=$et;for(const n of e)t=t.add(n);return t}const Bet=new mu(fi);function jet(){return Bet}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XG(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_8(t)?"-0":t}}function Zbe(e){return{integerValue:""+e}}function Uet(e,t){return pet(t)?Zbe(t):XG(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(){this._=void 0}}function zet(e,t,n){return e instanceof c4?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qG(s)&&(s=M9(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof f4?txe(e,t):e instanceof d4?nxe(e,t):function(i,s){const o=exe(i,s),a=Vie(o)+Vie(i.Pe);return HU(o)&&HU(i.Pe)?Zbe(a):XG(i.serializer,a)}(e,t)}function Vet(e,t,n){return e instanceof f4?txe(e,t):e instanceof d4?nxe(e,t):n}function exe(e,t){return e instanceof E8?function(r){return HU(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class c4 extends $9{}class f4 extends $9{constructor(t){super(),this.elements=t}}function txe(e,t){const n=rxe(t);for(const r of e.elements)n.some(i=>og(i,r))||n.push(r);return{arrayValue:{values:n}}}class d4 extends $9{constructor(t){super(),this.elements=t}}function nxe(e,t){let n=rxe(t);for(const r of e.elements)n=n.filter(i=>!og(i,r));return{arrayValue:{values:n}}}class E8 extends $9{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Vie(e){return ga(e.integerValue||e.doubleValue)}function rxe(e){return WG(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Het{constructor(t,n){this.field=t,this.transform=n}}function qet(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof f4&&i instanceof f4||r instanceof d4&&i instanceof d4?_S(r.elements,i.elements,og):r instanceof E8&&i instanceof E8?og(r.Pe,i.Pe):r instanceof c4&&i instanceof c4}(e.transform,t.transform)}class Wet{constructor(t,n){this.version=t,this.transformResults=n}}class th{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new th}static exists(t){return new th(void 0,t)}static updateTime(t){return new th(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function MP(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class B9{}function ixe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new QG(e.key,th.none()):new CR(e.key,e.data,th.none());{const n=e.data,r=Xf.empty();let i=new mu(gl.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xb(e.key,r,new Yd(i.toArray()),th.none())}}function Get(e,t,n){e instanceof CR?function(i,s,o){const a=i.value.clone(),u=qie(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Xb?function(i,s,o){if(!MP(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=qie(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(sxe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Ck(e,t,n,r){return e instanceof CR?function(s,o,a,u){if(!MP(s.precondition,o))return a;const l=s.value.clone(),c=Wie(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xb?function(s,o,a,u){if(!MP(s.precondition,o))return a;const l=Wie(s.fieldTransforms,u,o),c=o.data;return c.setAll(sxe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return MP(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function Yet(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=exe(r.transform,i||null);s!=null&&(n===null&&(n=Xf.empty()),n.set(r.field,s))}return n||null}function Hie(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_S(r,i,(s,o)=>qet(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class CR extends B9{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xb extends B9{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function sxe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function qie(e,t,n){const r=new Map;Qi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Vet(o,a,n[i]))}return r}function Wie(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,zet(s,o,t))}return r}class QG extends B9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ket extends B9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xet{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&Get(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Ck(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Ck(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Jbe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=ixe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(yr.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ri())}isEqual(t){return this.batchId===t.batchId&&_S(this.mutations,t.mutations,(n,r)=>Hie(n,r))&&_S(this.baseMutations,t.baseMutations,(n,r)=>Hie(n,r))}}class JG{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Qi(t.mutations.length===r.length);let i=function(){return Fet}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new JG(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qet{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jet{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var za,_i;function Zet(e){switch(e){default:return ar();case Tt.CANCELLED:case Tt.UNKNOWN:case Tt.DEADLINE_EXCEEDED:case Tt.RESOURCE_EXHAUSTED:case Tt.INTERNAL:case Tt.UNAVAILABLE:case Tt.UNAUTHENTICATED:return!1;case Tt.INVALID_ARGUMENT:case Tt.NOT_FOUND:case Tt.ALREADY_EXISTS:case Tt.PERMISSION_DENIED:case Tt.FAILED_PRECONDITION:case Tt.ABORTED:case Tt.OUT_OF_RANGE:case Tt.UNIMPLEMENTED:case Tt.DATA_LOSS:return!0}}function oxe(e){if(e===void 0)return p1("GRPC error has no .code"),Tt.UNKNOWN;switch(e){case za.OK:return Tt.OK;case za.CANCELLED:return Tt.CANCELLED;case za.UNKNOWN:return Tt.UNKNOWN;case za.DEADLINE_EXCEEDED:return Tt.DEADLINE_EXCEEDED;case za.RESOURCE_EXHAUSTED:return Tt.RESOURCE_EXHAUSTED;case za.INTERNAL:return Tt.INTERNAL;case za.UNAVAILABLE:return Tt.UNAVAILABLE;case za.UNAUTHENTICATED:return Tt.UNAUTHENTICATED;case za.INVALID_ARGUMENT:return Tt.INVALID_ARGUMENT;case za.NOT_FOUND:return Tt.NOT_FOUND;case za.ALREADY_EXISTS:return Tt.ALREADY_EXISTS;case za.PERMISSION_DENIED:return Tt.PERMISSION_DENIED;case za.FAILED_PRECONDITION:return Tt.FAILED_PRECONDITION;case za.ABORTED:return Tt.ABORTED;case za.OUT_OF_RANGE:return Tt.OUT_OF_RANGE;case za.UNIMPLEMENTED:return Tt.UNIMPLEMENTED;case za.DATA_LOSS:return Tt.DATA_LOSS;default:return ar()}}(_i=za||(za={}))[_i.OK=0]="OK",_i[_i.CANCELLED=1]="CANCELLED",_i[_i.UNKNOWN=2]="UNKNOWN",_i[_i.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_i[_i.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_i[_i.NOT_FOUND=5]="NOT_FOUND",_i[_i.ALREADY_EXISTS=6]="ALREADY_EXISTS",_i[_i.PERMISSION_DENIED=7]="PERMISSION_DENIED",_i[_i.UNAUTHENTICATED=16]="UNAUTHENTICATED",_i[_i.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_i[_i.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_i[_i.ABORTED=10]="ABORTED",_i[_i.OUT_OF_RANGE=11]="OUT_OF_RANGE",_i[_i.UNIMPLEMENTED=12]="UNIMPLEMENTED",_i[_i.INTERNAL=13]="INTERNAL",_i[_i.UNAVAILABLE=14]="UNAVAILABLE",_i[_i.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ett(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ttt=new Jv([4294967295,4294967295],0);function Gie(e){const t=ett().encode(e),n=new Pbe;return n.update(t),new Uint8Array(n.digest())}function Yie(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Jv([n,r],0),new Jv([i,s],0)]}class ZG{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new R3(`Invalid padding: ${n}`);if(r<0)throw new R3(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new R3(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new R3(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=Jv.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(Jv.fromNumber(r)));return i.compare(ttt)===1&&(i=new Jv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Gie(t),[r,i]=Yie(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ee(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new ZG(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Gie(t),[r,i]=Yie(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class R3 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,AR.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new j9(yr.min(),i,new To(fi),m1(),ri())}}class AR{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new AR(r,n,ri(),ri(),ri())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class axe{constructor(t,n){this.targetId=t,this.me=n}}class uxe{constructor(t,n,r=Cl.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Kie{constructor(){this.fe=0,this.ge=Xie(),this.pe=Cl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=ri(),n=ri(),r=ri();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ar()}}),new AR(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=Xie()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Qi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ntt{constructor(t){this.Be=t,this.Le=new Map,this.ke=m1(),this.qe=A6(),this.Qe=A6(),this.Ke=new To(fi)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:ar()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.me.count,i=this.Ye(n);if(i){const s=i.target;if(WU(s))if(r===0){const o=new Vn(s.path);this.We(n,o,tc.newNoDocument(o,yr.min()))}else Qi(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=hb(r).toUint8Array()}catch(u){if(u instanceof Bbe)return s4("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ZG(o,i,s)}catch(u){return s4(u instanceof R3?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.Le.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&WU(a.target)){const u=new Vn(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,tc.newNoDocument(u,t))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ri();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new j9(t,n,this.Ke,this.ke,r);return this.ke=m1(),this.qe=A6(),this.Qe=A6(),this.Ke=new To(fi),i}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.ot(t,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new Kie,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new mu(fi),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new mu(fi),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||wn("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new Kie),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function A6(){return new To(Vn.comparator)}function Xie(){return new To(Vn.comparator)}const rtt={asc:"ASCENDING",desc:"DESCENDING"},itt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},stt={and:"AND",or:"OR"};class ott{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function KU(e,t){return e.useProto3Json||O9(t)?t:{value:t}}function S8(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lxe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function att(e,t){return S8(e,t.toTimestamp())}function Vm(e){return Qi(!!e),yr.fromTimestamp(function(n){const r=db(n);return new pu(r.seconds,r.nanos)}(e))}function eY(e,t){return XU(e,t).canonicalString()}function XU(e,t){const n=function(i){return new Ks(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function cxe(e){const t=Ks.fromString(e);return Qi(mxe(t)),t}function QU(e,t){return eY(e.databaseId,t.path)}function c$(e,t){const n=cxe(t);if(n.get(1)!==e.databaseId.projectId)throw new mn(Tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new mn(Tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Vn(dxe(n))}function fxe(e,t){return eY(e.databaseId,t)}function utt(e){const t=cxe(e);return t.length===4?Ks.emptyPath():dxe(t)}function JU(e){return new Ks(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dxe(e){return Qi(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Qie(e,t,n){return{name:QU(e,t),fields:n.value.mapValue.fields}}function ltt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ar()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Qi(c===void 0||typeof c=="string"),Cl.fromBase64String(c||"")):(Qi(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Cl.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Tt.UNKNOWN:oxe(l.code);return new mn(c,l.message||"")}(o);n=new uxe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=c$(e,r.document.name),s=Vm(r.document.updateTime),o=r.document.createTime?Vm(r.document.createTime):yr.min(),a=new Xf({mapValue:{fields:r.document.fields}}),u=tc.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new LP(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=c$(e,r.document),s=r.readTime?Vm(r.readTime):yr.min(),o=tc.newNoDocument(i,s),a=r.removedTargetIds||[];n=new LP([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=c$(e,r.document),s=r.removedTargetIds||[];n=new LP([],s,i,null)}else{if(!("filter"in t))return ar();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Jet(i,s),a=r.targetId;n=new axe(a,o)}}return n}function ctt(e,t){let n;if(t instanceof CR)n={update:Qie(e,t.key,t.value)};else if(t instanceof QG)n={delete:QU(e,t.key)};else if(t instanceof Xb)n={update:Qie(e,t.key,t.data),updateMask:btt(t.fieldMask)};else{if(!(t instanceof Ket))return ar();n={verify:QU(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof c4)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof f4)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof d4)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof E8)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ar()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:att(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ar()}(e,t.precondition)),n}function ftt(e,t){return e&&e.length>0?(Qi(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Vm(i.updateTime):Vm(s);return o.isEqual(yr.min())&&(o=Vm(s)),new Wet(o,i.transformResults||[])}(n,t))):[]}function dtt(e,t){return{documents:[fxe(e,t.path)]}}function htt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fxe(e,i);const s=function(l){if(l.length!==0)return pxe(A0.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:_E(d.field),direction:gtt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=KU(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ct:n,parent:i}}function ptt(e){let t=utt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qi(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=hxe(f);return d instanceof A0&&Vbe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new l4(wE(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,O9(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new w8(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new w8(h,d)}(n.endAt)),Net(t,i,o,s,a,"F",u,l)}function mtt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ar()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function hxe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wE(n.unaryFilter.field);return Ha.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wE(n.unaryFilter.field);return Ha.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=wE(n.unaryFilter.field);return Ha.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=wE(n.unaryFilter.field);return Ha.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ar()}}(e):e.fieldFilter!==void 0?function(n){return Ha.create(wE(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ar()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return A0.create(n.compositeFilter.filters.map(r=>hxe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ar()}}(n.compositeFilter.op))}(e):ar()}function gtt(e){return rtt[e]}function ytt(e){return itt[e]}function vtt(e){return stt[e]}function _E(e){return{fieldPath:e.canonicalString()}}function wE(e){return gl.fromServerFormat(e.fieldPath)}function pxe(e){return e instanceof Ha?function(n){if(n.op==="=="){if($ie(n.value))return{unaryFilter:{field:_E(n.field),op:"IS_NAN"}};if(Fie(n.value))return{unaryFilter:{field:_E(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($ie(n.value))return{unaryFilter:{field:_E(n.field),op:"IS_NOT_NAN"}};if(Fie(n.value))return{unaryFilter:{field:_E(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_E(n.field),op:ytt(n.op),value:n.value}}}(e):e instanceof A0?function(n){const r=n.getFilters().map(i=>pxe(i));return r.length===1?r[0]:{compositeFilter:{op:vtt(n.op),filters:r}}}(e):ar()}function btt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function mxe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t,n,r,i,s=yr.min(),o=yr.min(),a=Cl.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Bv(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Bv(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Bv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Bv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xtt{constructor(t){this.ht=t}}function _tt(e){const t=ptt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?YU(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wtt{constructor(){this.ln=new Ett}addToCollectionParentIndex(t,n){return this.ln.add(n),Pt.resolve()}getCollectionParents(t,n){return Pt.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return Pt.resolve()}deleteFieldIndex(t,n){return Pt.resolve()}deleteAllFieldIndexes(t){return Pt.resolve()}createTargetIndexes(t,n){return Pt.resolve()}getDocumentsMatchingTarget(t,n){return Pt.resolve(null)}getIndexType(t,n){return Pt.resolve(0)}getFieldIndexes(t,n){return Pt.resolve([])}getNextCollectionGroupToUpdate(t){return Pt.resolve(null)}getMinOffset(t,n){return Pt.resolve(fb.min())}getMinOffsetFromCollectionGroup(t,n){return Pt.resolve(fb.min())}updateCollectionGroup(t,n,r){return Pt.resolve()}updateIndexEntries(t,n){return Pt.resolve()}}class Ett{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new mu(Ks.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new mu(Ks.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jie={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wf{static withCacheSize(t){return new Wf(t,Wf.DEFAULT_COLLECTION_PERCENTILE,Wf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wf.DEFAULT_COLLECTION_PERCENTILE=10,Wf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wf.DEFAULT=new Wf(41943040,Wf.DEFAULT_COLLECTION_PERCENTILE,Wf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wf.DISABLED=new Wf(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new SS(0)}static Qn(){return new SS(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zie([e,t],[n,r]){const i=fi(e,n);return i===0?fi(t,r):i}class Stt{constructor(t){this.Gn=t,this.buffer=new mu(Zie),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Zie(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Ttt{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){wn("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){UT(n)?wn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await jT(n)}await this.Yn(3e5)})}}class Ctt{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return Pt.resolve(D9.oe);const r=new Stt(n);return this.Zn.forEachTarget(t,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(t,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(wn("LruGarbageCollector","Garbage collection skipped; disabled"),Pt.resolve(Jie)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(wn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jie):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(wn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(t,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(t,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(f=>(l=Date.now(),bE()<=ni.DEBUG&&wn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),Pt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function Att(e,t){return new Ctt(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ktt{constructor(){this.changes=new Fw(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,tc.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Pt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rtt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Itt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&Ck(r.mutation,i,Yd.empty(),pu.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,ri()).next(()=>r))}getLocalViewOfDocuments(t,n,r=ri()){const i=S_();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=k3();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=S_();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,ri()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=m1();const o=Tk(),a=function(){return Tk()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Xb)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),Ck(c.mutation,l,c.mutation.getFieldMask(),pu.now())):o.set(l.key,Yd.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new Rtt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Tk();let i=new To((o,a)=>o-a),s=ri();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Yd.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||ri()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=Jbe();c.forEach(d=>{if(!s.has(d)){const h=ixe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Pt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Vn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Gbe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Pt.resolve(S_());let a=-1,u=s;return o.next(l=>Pt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Pt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,ri())).next(c=>({batchId:a,changes:Qbe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Vn(n)).next(r=>{let i=k3();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=k3();return this.indexManager.getCollectionParents(t,s).next(a=>Pt.forEach(a,u=>{const l=function(f,d){return new zT(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,tc.newInvalidDocument(c)))});let a=k3();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&Ck(c.mutation,l,Yd.empty(),pu.now()),F9(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ptt{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return Pt.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Vm(i.createTime)}}(n)),Pt.resolve()}getNamedQuery(t,n){return Pt.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:_tt(i.bundledQuery),readTime:Vm(i.readTime)}}(n)),Pt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ntt{constructor(){this.overlays=new To(Vn.comparator),this.dr=new Map}getOverlay(t,n){return Pt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=S_();return Pt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.Tt(t,n,s)}),Pt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.dr.delete(r)),Pt.resolve()}getOverlaysForCollection(t,n,r){const i=S_(),s=n.length+1,o=new Vn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Pt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new To((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=S_(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=S_(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Pt.resolve(a)}Tt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Qet(n,r));let s=this.dr.get(n);s===void 0&&(s=ri(),this.dr.set(n,s)),this.dr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dtt{constructor(){this.sessionToken=Cl.EMPTY_BYTE_STRING}getSessionToken(t){return Pt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Pt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY{constructor(){this.Er=new mu(Pu.Ar),this.Rr=new mu(Pu.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const r=new Pu(t,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new Pu(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new Vn(new Ks([])),r=new Pu(n,t),i=new Pu(n,t+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new Vn(new Ks([])),r=new Pu(n,t),i=new Pu(n,t+1);let s=ri();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Pu(t,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Pu{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return Vn.comparator(t.key,n.key)||fi(t.br,n.br)}static Vr(t,n){return fi(t.br,n.br)||Vn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ott{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new mu(Pu.Ar)}checkEmpty(t){return Pt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Xet(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Pu(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Pt.resolve(o)}lookupMutationBatch(t,n){return Pt.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return Pt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Pt.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return Pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Pu(n,0),i=new Pu(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),Pt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new mu(fi);return n.forEach(i=>{const s=new Pu(i,0),o=new Pu(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),Pt.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Vn.isDocumentKey(s)||(s=s.child(""));const o=new Pu(new Vn(s),0);let a=new mu(fi);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},o),Pt.resolve(this.Mr(a))}Mr(t){const n=[];return t.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Qi(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return Pt.forEach(n.mutations,i=>{const s=new Pu(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.vr=r})}Bn(t){}containsKey(t,n){const r=new Pu(n,0),i=this.vr.firstAfterOrEqual(r);return Pt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Pt.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mtt{constructor(t){this.Nr=t,this.docs=function(){return new To(Vn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Pt.resolve(r?r.document.mutableCopy():tc.newInvalidDocument(n))}getEntries(t,n){let r=m1();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tc.newInvalidDocument(i))}),Pt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=m1();const o=n.path,a=new Vn(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||cet(uet(c),r)<=0||(i.has(c.key)||F9(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Pt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){ar()}Br(t,n){return Pt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Ltt(this)}getSize(t){return Pt.resolve(this.size)}}class Ltt extends ktt{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(t,i)):this.hr.removeEntry(r)}),Pt.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ftt{constructor(t){this.persistence=t,this.Lr=new Fw(n=>GG(n),YG),this.lastRemoteSnapshotVersion=yr.min(),this.highestTargetId=0,this.kr=0,this.qr=new tY,this.targetCount=0,this.Qr=SS.qn()}forEachTarget(t,n){return this.Lr.forEach((r,i)=>n(i)),Pt.resolve()}getLastRemoteSnapshotVersion(t){return Pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Pt.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),Pt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),Pt.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new SS(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,Pt.resolve()}updateTargetData(t,n){return this.Un(n),Pt.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,Pt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Lr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Pt.waitFor(s).next(()=>i)}getTargetCount(t){return Pt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Lr.get(n)||null;return Pt.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),Pt.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Pt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),Pt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return Pt.resolve(r)}containsKey(t,n){return Pt.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gxe{constructor(t,n){this.Kr={},this.overlays={},this.$r=new D9(0),this.Ur=!1,this.Ur=!0,this.Wr=new Dtt,this.referenceDelegate=t(this),this.Gr=new Ftt(this),this.indexManager=new wtt,this.remoteDocumentCache=function(i){return new Mtt(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new xtt(n),this.jr=new Ptt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Ntt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new Ott(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){wn("MemoryPersistence","Starting transaction:",t);const i=new $tt(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(t,n){return Pt.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class $tt extends det{constructor(t){super(),this.currentSequenceNumber=t}}class nY{constructor(t){this.persistence=t,this.Zr=new tY,this.Xr=null}static ei(t){return new nY(t)}get ti(){if(this.Xr)return this.Xr;throw ar()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),Pt.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),Pt.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),Pt.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pt.forEach(this.ti,r=>{const i=Vn.fromPath(r);return this.ni(t,i).next(s=>{s||n.removeEntry(i,yr.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return Pt.or([()=>Pt.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class T8{constructor(t,n){this.persistence=t,this.ri=new Fw(r=>met(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Att(this,n)}static ei(t,n){return new T8(t,n)}Hr(){}Jr(t){return Pt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return Pt.forEach(this.ri,(r,i)=>this.ir(t,r,i).next(s=>s?Pt.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Br(t,o=>this.ir(t,o,n).next(a=>{a||(r++,s.removeEntry(o,yr.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),Pt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),Pt.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),Pt.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),Pt.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=DP(t.data.value)),n}ir(t,n,r){return Pt.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.ri.get(n);return Pt.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(t,n){let r=ri(),i=ri();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new rY(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Btt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jtt{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return dQe()?8:het(hc())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.Xi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Btt;return this.ts(t,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(t,n,o,a.size)})}).next(()=>s.result)}ns(t,n,r,i){return r.documentReadCount<this.Ji?(bE()<=ni.DEBUG&&wn("QueryEngine","SDK will not create cache indexes for query:",xE(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Pt.resolve()):(bE()<=ni.DEBUG&&wn("QueryEngine","Query:",xE(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(bE()<=ni.DEBUG&&wn("QueryEngine","The SDK decides to create cache indexes for query:",xE(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,zm(n))):Pt.resolve())}Xi(t,n){if(zie(n))return Pt.resolve(null);let r=zm(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=YU(n,null,"F"),r=zm(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=ri(...s);return this.Zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.rs(n,a);return this.ss(n,l,o,u.readTime)?this.Xi(t,YU(n,null,"F")):this.os(t,l,n,u)}))})))}es(t,n,r,i){return zie(n)||i.isEqual(yr.min())?Pt.resolve(null):this.Zi.getDocuments(t,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?Pt.resolve(null):(bE()<=ni.DEBUG&&wn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xE(n)),this.os(t,o,n,aet(i,-1)).next(a=>a))})}rs(t,n){let r=new mu(Kbe(t));return n.forEach((i,s)=>{F9(t,s)&&(r=r.add(s))}),r}ss(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(t,n,r){return bE()<=ni.DEBUG&&wn("QueryEngine","Using full collection scan to execute query:",xE(n)),this.Zi.getDocumentsMatchingQuery(t,n,fb.min(),r)}os(t,n,r,i){return this.Zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Utt{constructor(t,n,r,i){this.persistence=t,this._s=n,this.serializer=i,this.us=new To(fi),this.cs=new Fw(s=>GG(s),YG),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Itt(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function ztt(e,t,n,r){return new Utt(e,t,n,r)}async function yxe(e,t){const n=vr(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ri();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:o,addedBatchIds:a}))})})}function Vtt(e,t){const n=vr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Pt.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Qi(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ri();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function vxe(e){const t=vr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function Htt(e,t){const n=vr(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Gr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Cl.EMPTY_BYTE_STRING,yr.min()).withLastLimboFreeSnapshotVersion(yr.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,b){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(d,h,c)&&a.push(n.Gr.updateTargetData(s,h))});let u=m1(),l=ri();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(qtt(s,o,t.documentUpdates).next(c=>{u=c.Is,l=c.ds})),!r.isEqual(yr.min())){const c=n.Gr.getLastRemoteSnapshotVersion(s).next(f=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Pt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.us=i,s))}function qtt(e,t,n){let r=ri(),i=ri();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=m1();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(yr.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):wn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:o,ds:i}})}function Wtt(e,t){const n=vr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Gtt(e,t){const n=vr(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,t).next(s=>s?(i=s,Pt.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new Bv(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function ZU(e,t,n){const r=vr(e),i=r.us.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!UT(o))throw o;wn("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.us=r.us.remove(t),r.cs.delete(i.target)}function ese(e,t,n){const r=vr(e);let i=yr.min(),s=ri();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=vr(u),d=f.cs.get(c);return d!==void 0?Pt.resolve(f.us.get(d)):f.Gr.getTargetData(l,c)}(r,o,zm(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,t,n?i:yr.min(),n?s:ri())).next(a=>(Ytt(r,Oet(t),a),{documents:a,Es:s})))}function Ytt(e,t,n){let r=e.ls.get(t)||yr.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ls.set(t,r)}class tse{constructor(){this.activeTargetIds=jet()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ktt{constructor(){this._o=new tse,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new tse,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xtt{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nse{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){wn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){wn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k6=null;function f$(){return k6===null?k6=function(){return 268435456+Math.round(2147483648*Math.random())}():k6++,"0x"+k6.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qtt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jtt{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql="WebChannelConnection";class Ztt extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=f$(),u=this.No(n,r.toUriEncodedString());wn("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,s,o),this.Lo(n,u,l,i).then(c=>(wn("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw s4("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+BT}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=Qtt[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,r,i){const s=f$();return new Promise((o,a)=>{const u=new Nbe;u.setWithCredentials(!0),u.listenOnce(Dbe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case NP.NO_ERROR:const c=u.getResponseJson();wn(ql,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case NP.TIMEOUT:wn(ql,`RPC '${t}' ${s} timed out`),a(new mn(Tt.DEADLINE_EXCEEDED,"Request time out"));break;case NP.HTTP_ERROR:const f=u.getStatus();if(wn(ql,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const b=g.toLowerCase().replace(/_/g,"-");return Object.values(Tt).indexOf(b)>=0?b:Tt.UNKNOWN}(h.status);a(new mn(p,h.message))}else a(new mn(Tt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new mn(Tt.UNAVAILABLE,"Connection failed."));break;default:ar()}}finally{wn(ql,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);wn(ql,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}qo(t,n,r){const i=f$(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Lbe(),a=Mbe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");wn(ql,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new Jtt({Eo:g=>{h?wn(ql,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(wn(ql,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),wn(ql,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},Ao:()=>f.close()}),m=(g,b,y)=>{g.listen(b,x=>{try{y(x)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,A3.EventType.OPEN,()=>{h||(wn(ql,`RPC '${t}' stream ${i} transport opened.`),p.So())}),m(f,A3.EventType.CLOSE,()=>{h||(h=!0,wn(ql,`RPC '${t}' stream ${i} transport closed`),p.Do())}),m(f,A3.EventType.ERROR,g=>{h||(h=!0,s4(ql,`RPC '${t}' stream ${i} transport errored:`,g),p.Do(new mn(Tt.UNAVAILABLE,"The operation could not be completed")))}),m(f,A3.EventType.MESSAGE,g=>{var b;if(!h){const y=g.data[0];Qi(!!y);const x=y,w=(x==null?void 0:x.error)||((b=x[0])===null||b===void 0?void 0:b.error);if(w){wn(ql,`RPC '${t}' stream ${i} received error:`,w);const S=w.status;let C=function(O){const M=za[O];if(M!==void 0)return oxe(M)}(S),R=w.message;C===void 0&&(C=Tt.INTERNAL,R="Unknown error status: "+S+" with message "+w.message),h=!0,p.Do(new mn(C,R)),f.close()}else wn(ql,`RPC '${t}' stream ${i} received:`,y),p.vo(y)}}),m(a,Obe.STAT_EVENT,g=>{g.stat===zU.PROXY?wn(ql,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===zU.NOPROXY&&wn(ql,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.bo()},0),p}}function d$(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U9(e){return new ott(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bxe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&wn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xxe{constructor(t,n,r,i,s,o,a,u){this.li=t,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new bxe(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===Tt.RESOURCE_EXHAUSTED?(p1(n.toString()),p1("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Tt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{t(()=>{const i=new mn(Tt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return wn("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(wn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ent extends xxe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=ltt(this.serializer,t),r=function(s){if(!("targetChange"in s))return yr.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?yr.min():o.readTime?Vm(o.readTime):yr.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=JU(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=WU(u)?{documents:dtt(s,u)}:{query:htt(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lxe(s,o.resumeToken);const l=KU(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(yr.min())>0){a.readTime=S8(s,o.snapshotVersion.toTimestamp());const l=KU(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=mtt(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=JU(this.serializer),n.removeTarget=t,this.c_(n)}}class tnt extends xxe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return Qi(!!t.streamToken),this.lastStreamToken=t.streamToken,Qi(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){Qi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=ftt(t.writeResults,t.commitTime),r=Vm(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=JU(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>ctt(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nnt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new mn(Tt.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(t,XU(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new mn(Tt.UNKNOWN,s.toString())})}ko(t,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(t,XU(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new mn(Tt.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class rnt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(p1(n),this.C_=!1):wn("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class int{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{$w(this)&&(wn("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=vr(u);l.k_.add(4),await RR(l),l.K_.set("Unknown"),l.k_.delete(4),await kR(l)}(this))})}),this.K_=new rnt(r,i)}}async function kR(e){if($w(e))for(const t of e.q_)await t(!0)}async function RR(e){for(const t of e.q_)await t(!1)}function _xe(e,t){const n=vr(e);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),aY(n)?oY(n):VT(n).s_()&&sY(n,t))}function iY(e,t){const n=vr(e),r=VT(n);n.L_.delete(t),r.s_()&&wxe(n,t),n.L_.size===0&&(r.s_()?r.a_():$w(n)&&n.K_.set("Unknown"))}function sY(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yr.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}VT(e).V_(t)}function wxe(e,t){e.U_.xe(t),VT(e).m_(t)}function oY(e){e.U_=new ntt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.L_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),VT(e).start(),e.K_.F_()}function aY(e){return $w(e)&&!VT(e).i_()&&e.L_.size>0}function $w(e){return vr(e).k_.size===0}function Exe(e){e.U_=void 0}async function snt(e){e.K_.set("Online")}async function ont(e){e.L_.forEach((t,n)=>{sY(e,t)})}async function ant(e,t){Exe(e),aY(e)?(e.K_.O_(t),oY(e)):e.K_.set("Unknown")}async function unt(e,t,n){if(e.K_.set("Online"),t instanceof uxe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.L_.delete(a),i.U_.removeTarget(a))}(e,t)}catch(r){wn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await C8(e,r)}else if(t instanceof LP?e.U_.$e(t):t instanceof axe?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(yr.min()))try{const r=await vxe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.L_.get(l);c&&s.L_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.L_.get(u);if(!c)return;s.L_.set(u,c.withResumeToken(Cl.EMPTY_BYTE_STRING,c.snapshotVersion)),wxe(s,u);const f=new Bv(c.target,u,l,c.sequenceNumber);sY(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){wn("RemoteStore","Failed to raise snapshot:",r),await C8(e,r)}}async function C8(e,t,n){if(!UT(t))throw t;e.k_.add(1),await RR(e),e.K_.set("Offline"),n||(n=()=>vxe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{wn("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await kR(e)})}function Sxe(e,t){return t().catch(n=>C8(e,n,t))}async function z9(e){const t=vr(e),n=mb(t);let r=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;lnt(t);)try{const i=await Wtt(t.localStore,r);if(i===null){t.B_.length===0&&n.a_();break}r=i.batchId,cnt(t,i)}catch(i){await C8(t,i)}Txe(t)&&Cxe(t)}function lnt(e){return $w(e)&&e.B_.length<10}function cnt(e,t){e.B_.push(t);const n=mb(e);n.s_()&&n.f_&&n.g_(t.mutations)}function Txe(e){return $w(e)&&!mb(e).i_()&&e.B_.length>0}function Cxe(e){mb(e).start()}async function fnt(e){mb(e).w_()}async function dnt(e){const t=mb(e);for(const n of e.B_)t.g_(n.mutations)}async function hnt(e,t,n){const r=e.B_.shift(),i=JG.from(r,t,n);await Sxe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await z9(e)}async function pnt(e,t){t&&mb(e).f_&&await async function(r,i){if(function(o){return Zet(o)&&o!==Tt.ABORTED}(i.code)){const s=r.B_.shift();mb(r).__(),await Sxe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await z9(r)}}(e,t),Txe(e)&&Cxe(e)}async function rse(e,t){const n=vr(e);n.asyncQueue.verifyOperationInProgress(),wn("RemoteStore","RemoteStore received new credentials");const r=$w(n);n.k_.add(3),await RR(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await kR(n)}async function mnt(e,t){const n=vr(e);t?(n.k_.delete(2),await kR(n)):t||(n.k_.add(2),await RR(n),n.K_.set("Unknown"))}function VT(e){return e.W_||(e.W_=function(n,r,i){const s=vr(n);return s.b_(),new ent(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:snt.bind(null,e),mo:ont.bind(null,e),po:ant.bind(null,e),R_:unt.bind(null,e)}),e.q_.push(async t=>{t?(e.W_.__(),aY(e)?oY(e):e.K_.set("Unknown")):(await e.W_.stop(),Exe(e))})),e.W_}function mb(e){return e.G_||(e.G_=function(n,r,i){const s=vr(n);return s.b_(),new tnt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:fnt.bind(null,e),po:pnt.bind(null,e),p_:dnt.bind(null,e),y_:hnt.bind(null,e)}),e.q_.push(async t=>{t?(e.G_.__(),await z9(e)):(await e.G_.stop(),e.B_.length>0&&(wn("RemoteStore",`Stopping write stream with ${e.B_.length} pending writes`),e.B_=[]))})),e.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new uY(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mn(Tt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lY(e,t){if(p1("AsyncQueue",`${t}: ${e}`),UT(e))return new mn(Tt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{static emptySet(t){return new qE(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Vn.comparator(n.key,r.key):(n,r)=>Vn.comparator(n.key,r.key),this.keyedMap=k3(),this.sortedSet=new To(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof qE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new qE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ise{constructor(){this.z_=new To(Vn.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):ar():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class TS{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new TS(t,n,qE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&L9(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gnt{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class ynt{constructor(){this.queries=sse(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=vr(n),s=i.queries;i.queries=sse(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})})(this,new mn(Tt.ABORTED,"Firestore shutting down"))}}function sse(){return new Fw(e=>Ybe(e),L9)}async function Axe(e,t){const n=vr(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Y_()&&t.Z_()&&(r=2):(s=new gnt,r=t.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=lY(o,`Initialization of query '${xE(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.J_.push(t),t.ea(n.onlineState),s.H_&&t.ta(s.H_)&&cY(n)}async function kxe(e,t){const n=vr(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(t);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vnt(e,t){const n=vr(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&cY(n)}function bnt(e,t,n){const r=vr(e),i=r.queries.get(t);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(t)}function cY(e){e.X_.forEach(t=>{t.next()})}var ez,ose;(ose=ez||(ez={})).na="default",ose.Cache="cache";class Rxe{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new TS(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=TS.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==ez.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ixe{constructor(t){this.key=t}}class Pxe{constructor(t){this.key=t}}class xnt{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ri(),this.mutatedKeys=ri(),this.Va=Kbe(t),this.ma=new qE(this.Va)}get fa(){return this.Ea}ga(t,n){const r=n?n.pa:new ise,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=F9(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.ya(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Va(h,u)>0||l&&this.Va(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const o=t.pa.j_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ar()}};return m(h)-m(p)}(c.type,f.type)||this.Va(c.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,o.length!==0||l?{snapshot:new TS(this.query,t.ma,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new ise,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=ri(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new Pxe(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new Ixe(r))}),n}va(t){this.Ea=t.Es,this.Ra=ri();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return TS.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class _nt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class wnt{constructor(t){this.key=t,this.Fa=!1}}class Ent{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new Fw(a=>Ybe(a),L9),this.Oa=new Map,this.Na=new Set,this.Ba=new To(Vn.comparator),this.La=new Map,this.ka=new tY,this.qa={},this.Qa=new Map,this.Ka=SS.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Snt(e,t,n=!0){const r=Fxe(e);let i;const s=r.xa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await Nxe(r,t,n,!0),i}async function Tnt(e,t){const n=Fxe(e);await Nxe(n,t,!0,!1)}async function Nxe(e,t,n,r){const i=await Gtt(e.localStore,zm(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Cnt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&_xe(e.remoteStore,i),a}async function Cnt(e,t,n,r,i){e.Ua=(f,d,h)=>async function(m,g,b,y){let x=g.view.ga(b);x.ss&&(x=await ese(m.localStore,g.query,!1).then(({documents:R})=>g.view.ga(R,x)));const w=y&&y.targetChanges.get(g.targetId),S=y&&y.targetMismatches.get(g.targetId)!=null,C=g.view.applyChanges(x,m.isPrimaryClient,w,S);return use(m,g.targetId,C.ba),C.snapshot}(e,f,d,h);const s=await ese(e.localStore,t,!0),o=new xnt(t,s.Es),a=o.ga(s.documents),u=AR.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);use(e,n,l.ba);const c=new _nt(t,n,o);return e.xa.set(t,c),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),l.snapshot}async function Ant(e,t,n){const r=vr(e),i=r.xa.get(t),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!L9(o,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ZU(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&iY(r.remoteStore,i.targetId),tz(r,i.targetId)}).catch(jT)):(tz(r,i.targetId),await ZU(r.localStore,i.targetId,!0))}async function knt(e,t){const n=vr(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),iY(n.remoteStore,r.targetId))}async function Rnt(e,t,n){const r=Lnt(e);try{const i=await function(o,a){const u=vr(o),l=pu.now(),c=a.reduce((h,p)=>h.add(p.key),ri());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=m1(),m=ri();return u.hs.getEntries(h,c).next(g=>{p=g,p.forEach((b,y)=>{y.isValidDocument()||(m=m.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const b=[];for(const y of a){const x=Yet(y,f.get(y.key).overlayedDocument);x!=null&&b.push(new Xb(y.key,x,jbe(x.value.mapValue),th.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,b,a)}).next(g=>{d=g;const b=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,b)})}).then(()=>({batchId:d.batchId,changes:Qbe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.qa[o.currentUser.toKey()];l||(l=new To(fi)),l=l.insert(a,u),o.qa[o.currentUser.toKey()]=l}(r,i.batchId,n),await IR(r,i.changes),await z9(r.remoteStore)}catch(i){const s=lY(i,"Failed to persist write");n.reject(s)}}async function Dxe(e,t){const n=vr(e);try{const r=await Htt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.La.get(s);o&&(Qi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?Qi(o.Fa):i.removedDocuments.size>0&&(Qi(o.Fa),o.Fa=!1))}),await IR(n,r,t)}catch(r){await jT(r)}}function ase(e,t,n){const r=vr(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=vr(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.J_)d.ea(a)&&(l=!0)}),l&&cY(u)}(r.eventManager,t),i.length&&r.Ma.R_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Int(e,t,n){const r=vr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.La.get(t),s=i&&i.key;if(s){let o=new To(Vn.comparator);o=o.insert(s,tc.newNoDocument(s,yr.min()));const a=ri().add(s),u=new j9(yr.min(),new Map,new To(fi),o,a);await Dxe(r,u),r.Ba=r.Ba.remove(s),r.La.delete(t),fY(r)}else await ZU(r.localStore,t,!1).then(()=>tz(r,t,n)).catch(jT)}async function Pnt(e,t){const n=vr(e),r=t.batch.batchId;try{const i=await Vtt(n.localStore,t);Mxe(n,r,null),Oxe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await IR(n,i)}catch(i){await jT(i)}}async function Nnt(e,t,n){const r=vr(e);try{const i=await function(o,a){const u=vr(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Qi(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);Mxe(r,t,n),Oxe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await IR(r,i)}catch(i){await jT(i)}}function Oxe(e,t){(e.Qa.get(t)||[]).forEach(n=>{n.resolve()}),e.Qa.delete(t)}function Mxe(e,t,n){const r=vr(e);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function tz(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach(r=>{e.ka.containsKey(r)||Lxe(e,r)})}function Lxe(e,t){e.Na.delete(t.path.canonicalString());const n=e.Ba.get(t);n!==null&&(iY(e.remoteStore,n),e.Ba=e.Ba.remove(t),e.La.delete(n),fY(e))}function use(e,t,n){for(const r of n)r instanceof Ixe?(e.ka.addReference(r.key,t),Dnt(e,r)):r instanceof Pxe?(wn("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||Lxe(e,r.key)):ar()}function Dnt(e,t){const n=t.key,r=n.path.canonicalString();e.Ba.get(n)||e.Na.has(r)||(wn("SyncEngine","New document in limbo: "+n),e.Na.add(r),fY(e))}function fY(e){for(;e.Na.size>0&&e.Ba.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new Vn(Ks.fromString(t)),r=e.Ka.next();e.La.set(r,new wnt(n)),e.Ba=e.Ba.insert(n,r),_xe(e.remoteStore,new Bv(zm(KG(n.path)),r,"TargetPurposeLimboResolution",D9.oe))}}async function IR(e,t,n){const r=vr(e),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=rY.zi(u.targetId,l);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(u,l){const c=vr(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Pt.forEach(l,d=>Pt.forEach(d.Wi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Pt.forEach(d.Gi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!UT(f))throw f;wn("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.us.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.us=c.us.insert(d,m)}}}(r.localStore,s))}async function Ont(e,t){const n=vr(e);if(!n.currentUser.isEqual(t)){wn("SyncEngine","User change. New user:",t.toKey());const r=await yxe(n.localStore,t);n.currentUser=t,function(s,o){s.Qa.forEach(a=>{a.forEach(u=>{u.reject(new mn(Tt.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await IR(n,r.Ts)}}function Mnt(e,t){const n=vr(e),r=n.La.get(t);if(r&&r.Fa)return ri().add(r.key);{let i=ri();const s=n.Oa.get(t);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function Fxe(e){const t=vr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dxe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mnt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Int.bind(null,t),t.Ma.R_=vnt.bind(null,t.eventManager),t.Ma.Wa=bnt.bind(null,t.eventManager),t}function Lnt(e){const t=vr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Pnt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Nnt.bind(null,t),t}class A8{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=U9(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return ztt(this.persistence,new jtt,t.initialUser,this.serializer)}ja(t){return new gxe(nY.ei,this.serializer)}za(t){return new Ktt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}A8.provider={build:()=>new A8};class Fnt extends A8{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){Qi(this.persistence.referenceDelegate instanceof T8);const r=this.persistence.referenceDelegate.garbageCollector;return new Ttt(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?Wf.withCacheSize(this.cacheSizeBytes):Wf.DEFAULT;return new gxe(r=>T8.ei(r,n),this.serializer)}}class nz{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ase(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ont.bind(null,this.syncEngine),await mnt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ynt}()}createDatastore(t){const n=U9(t.databaseInfo.databaseId),r=function(s){return new Ztt(s)}(t.databaseInfo);return function(s,o,a,u){return new nnt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new int(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>ase(this.syncEngine,n,0),function(){return nse.p()?new nse:new Xtt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new Ent(i,s,o,a,u,l);return c&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=vr(i);wn("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await RR(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}nz.provider={build:()=>new nz};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $xe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):p1("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $nt{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qf.UNAUTHENTICATED,this.clientId=Fbe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{wn("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(wn("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Xy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=lY(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function h$(e,t){e.asyncQueue.verifyOperationInProgress(),wn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await yxe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function lse(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Bxe(e);wn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>rse(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>rse(t.remoteStore,i)),e._onlineComponents=t}async function Bxe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){wn("FirestoreClient","Using user provided OfflineComponentProvider");try{await h$(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===Tt.FAILED_PRECONDITION||i.code===Tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;s4("Error using user provided cache. Falling back to memory cache: "+n),await h$(e,new A8)}}else wn("FirestoreClient","Using default OfflineComponentProvider"),await h$(e,new Fnt(void 0));return e._offlineComponents}async function dY(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(wn("FirestoreClient","Using user provided OnlineComponentProvider"),await lse(e,e._uninitializedComponentsProvider._online)):(wn("FirestoreClient","Using default OnlineComponentProvider"),await lse(e,new nz))),e._onlineComponents}function Bnt(e){return Bxe(e).then(t=>t.persistence)}function jnt(e){return dY(e).then(t=>t.remoteStore)}function Unt(e){return dY(e).then(t=>t.syncEngine)}async function jxe(e){const t=await dY(e),n=t.eventManager;return n.onListen=Snt.bind(null,t.syncEngine),n.onUnlisten=Ant.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Tnt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=knt.bind(null,t.syncEngine),n}function znt(e){return e.asyncQueue.enqueue(async()=>{const t=await Bnt(e),n=await jnt(e);return t.setNetworkEnabled(!0),function(i){const s=vr(i);return s.k_.delete(0),kR(s)}(n)})}function Vnt(e,t,n={}){const r=new Xy;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new $xe({next:d=>{c.eu(),o.enqueueAndForget(()=>kxe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new mn(Tt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new mn(Tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new Rxe(KG(a.path),c,{includeMetadataChanges:!0,ua:!0});return Axe(s,f)}(await jxe(e),e.asyncQueue,t,n,r)),r.promise}function Hnt(e,t,n={}){const r=new Xy;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new $xe({next:d=>{c.eu(),o.enqueueAndForget(()=>kxe(s,f)),d.fromCache&&u.source==="server"?l.reject(new mn(Tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new Rxe(a,c,{includeMetadataChanges:!0,ua:!0});return Axe(s,f)}(await jxe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uxe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cse=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zxe(e,t,n){if(!n)throw new mn(Tt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function qnt(e,t,n,r){if(t===!0&&r===!0)throw new mn(Tt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function fse(e){if(!Vn.isDocumentKey(e))throw new mn(Tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function dse(e){if(Vn.isDocumentKey(e))throw new mn(Tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function V9(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ar()}function ag(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new mn(Tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=V9(e);throw new mn(Tt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hse{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new mn(Tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new mn(Tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}qnt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Uxe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new mn(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new mn(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new mn(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class hY{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hse({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mn(Tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new mn(Tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hse(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZZe;switch(r.type){case"firstParty":return new net(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new mn(Tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cse.get(n);r&&(wn("ComponentProvider","Removing Datastore"),cse.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Bw(this.firestore,t,this._query)}}class of{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zv(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new of(this.firestore,t,this._key)}}class Zv extends Bw{constructor(t,n,r){super(t,n,KG(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new of(this.firestore,null,new Vn(t))}withConverter(t){return new Zv(this.firestore,t,this._path)}}function jf(e,t,...n){if(e=$s(e),zxe("collection","path",t),e instanceof hY){const r=Ks.fromString(t,...n);return dse(r),new Zv(e,null,r)}{if(!(e instanceof of||e instanceof Zv))throw new mn(Tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ks.fromString(t,...n));return dse(r),new Zv(e.firestore,null,r)}}function Gs(e,t,...n){if(e=$s(e),arguments.length===1&&(t=Fbe.newId()),zxe("doc","path",t),e instanceof hY){const r=Ks.fromString(t,...n);return fse(r),new of(e,null,new Vn(r))}{if(!(e instanceof of||e instanceof Zv))throw new mn(Tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ks.fromString(t,...n));return fse(r),new of(e.firestore,e instanceof Zv?e.converter:null,new Vn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pse{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new bxe(this,"async_queue_retry"),this.fu=()=>{const r=d$();r&&wn("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=d$();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=d$();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new Xy;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!UT(t))throw t;wn("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw p1("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const i=uY.createAndSchedule(this,t,n,r,s=>this.Su(s));return this.Eu.push(i),i}pu(){this.Au&&ar()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class jw extends hY{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new pse,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new pse(t),this._firestoreClient=void 0,await t}}}function Wnt(e,t,n){n||(n="(default)");const r=$T(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(r4(s,t))return i;throw new mn(Tt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new mn(Tt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new mn(Tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function PR(e){if(e._terminated)throw new mn(Tt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Gnt(e),e._firestoreClient}function Gnt(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new vet(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Uxe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new $nt(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(e._componentsProvider))}function Ynt(e){return znt(PR(e=ag(e,jw)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(t){this._byteString=t}static fromBase64String(t){try{return new CS(Cl.fromBase64String(t))}catch(n){throw new mn(Tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new CS(Cl.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new mn(Tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gl(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pY=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new mn(Tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new mn(Tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return fi(this._lat,t._lat)||fi(this._long,t._long)}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mY{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Knt=/^__.*__$/;class Xnt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Xb(t,this.data,this.fieldMask,n,this.fieldTransforms):new CR(t,this.data,n,this.fieldTransforms)}}class Vxe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Xb(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Hxe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ar()}}class gY{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new gY(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Bu(t),i}Lu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return k8(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(Hxe(this.Mu)&&Knt.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class Qnt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||U9(t)}$u(t,n,r,i=!1){return new gY({Mu:t,methodName:n,Ku:r,path:gl.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function q9(e){const t=e._freezeSettings(),n=U9(e._databaseId);return new Qnt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function qxe(e,t,n,r,i,s={}){const o=e.$u(s.merge||s.mergeFields?2:0,t,n,i);vY("Data must be an object, but it was:",o,r);const a=Yxe(r,o);let u,l;if(s.merge)u=new Yd(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=rz(t,f,n);if(!o.contains(d))throw new mn(Tt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Xxe(c,d)||c.push(d)}u=new Yd(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new Xnt(new Xf(a),u,l)}class W9 extends H9{_toFieldTransform(t){if(t.Mu!==2)throw t.Mu===1?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof W9}}class yY extends H9{_toFieldTransform(t){return new Het(t.path,new c4)}isEqual(t){return t instanceof yY}}function Wxe(e,t,n,r){const i=e.$u(1,t,n);vY("Data must be an object, but it was:",i,r);const s=[],o=Xf.empty();Kb(r,(u,l)=>{const c=bY(t,u,n);l=$s(l);const f=i.Lu(c);if(l instanceof W9)s.push(c);else{const d=DR(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Yd(s);return new Vxe(o,a,i.fieldTransforms)}function Gxe(e,t,n,r,i,s){const o=e.$u(1,t,n),a=[rz(t,r,n)],u=[i];if(s.length%2!=0)throw new mn(Tt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(rz(t,s[d])),u.push(s[d+1]);const l=[],c=Xf.empty();for(let d=a.length-1;d>=0;--d)if(!Xxe(l,a[d])){const h=a[d];let p=u[d];p=$s(p);const m=o.Lu(h);if(p instanceof W9)l.push(h);else{const g=DR(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Yd(l);return new Vxe(c,f,o.fieldTransforms)}function Jnt(e,t,n,r=!1){return DR(n,e.$u(r?4:3,t))}function DR(e,t){if(Kxe(e=$s(e)))return vY("Unsupported field value:",t,e),Yxe(e,t);if(e instanceof H9)return function(r,i){if(!Hxe(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=DR(a,i.ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=$s(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Uet(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=pu.fromDate(r);return{timestampValue:S8(i.serializer,s)}}if(r instanceof pu){const s=new pu(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:S8(i.serializer,s)}}if(r instanceof pY)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof CS)return{bytesValue:lxe(i.serializer,r._byteString)};if(r instanceof of){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:eY(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mY)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return XG(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${V9(r)}`)}(e,t)}function Yxe(e,t){const n={};return $be(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Kb(e,(r,i)=>{const s=DR(i,t.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Kxe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof pu||e instanceof pY||e instanceof CS||e instanceof of||e instanceof H9||e instanceof mY)}function vY(e,t,n){if(!Kxe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=V9(n);throw r==="an object"?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function rz(e,t,n){if((t=$s(t))instanceof NR)return t._internalPath;if(typeof t=="string")return bY(e,t);throw k8("Field path arguments must be of type string or ",e,!1,void 0,n)}const Znt=new RegExp("[~\\*/\\[\\]]");function bY(e,t,n){if(t.search(Znt)>=0)throw k8(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new NR(...t.split("."))._internalPath}catch{throw k8(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function k8(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new mn(Tt.INVALID_ARGUMENT,a+e+u)}function Xxe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qxe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new of(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new ert(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(G9("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ert extends Qxe{data(){return super.data()}}function G9(e,t){return typeof t=="string"?bY(e,t):t instanceof NR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function trt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new mn(Tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xY{}class Jxe extends xY{}function p$(e,t,...n){let r=[];t instanceof xY&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof _Y).length,a=s.filter(u=>u instanceof Y9).length;if(o>1||o>0&&a>0)throw new mn(Tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Y9 extends Jxe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Y9(t,n,r)}_apply(t){const n=this._parse(t);return Zxe(t._query,n),new Bw(t.firestore,t.converter,GU(t._query,n))}_parse(t){const n=q9(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new mn(Tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){vse(f,c);const h=[];for(const p of f)h.push(yse(u,s,p));d={arrayValue:{values:h}}}else d=yse(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||vse(f,c),d=Jnt(a,o,f,c==="in"||c==="not-in");return Ha.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function mse(e,t,n){const r=t,i=G9("where",e);return Y9._create(i,r,n)}class _Y extends xY{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new _Y(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:A0.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)Zxe(o,u),o=GU(o,u)}(t._query,n),new Bw(t.firestore,t.converter,GU(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wY extends Jxe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new wY(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new mn(Tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new mn(Tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new l4(s,o)}(t._query,this._field,this._direction);return new Bw(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new zT(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function gse(e,t="asc"){const n=t,r=G9("orderBy",e);return wY._create(r,n)}function yse(e,t,n){if(typeof(n=$s(n))=="string"){if(n==="")throw new mn(Tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gbe(t)&&n.indexOf("/")!==-1)throw new mn(Tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ks.fromString(n));if(!Vn.isDocumentKey(r))throw new mn(Tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lie(e,new Vn(r))}if(n instanceof of)return Lie(e,n._key);throw new mn(Tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${V9(n)}.`)}function vse(e,t){if(!Array.isArray(e)||e.length===0)throw new mn(Tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Zxe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new mn(Tt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new mn(Tt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class nrt{convertValue(t,n="none"){switch(pb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ga(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(hb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw ar()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Kb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ga(o.doubleValue));return new mY(s)}convertGeoPoint(t){return new pY(ga(t.latitude),ga(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=M9(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(o4(t));default:return null}}convertTimestamp(t){const n=db(t);return new pu(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Ks.fromString(t);Qi(mxe(r));const i=new a4(r.get(1),r.get(3)),s=new Vn(r.popFirst(5));return i.isEqual(n)||p1(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_e(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class t_e extends Qxe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new FP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(G9("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class FP extends t_e{data(t={}){return super.data(t)}}class rrt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new I3(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new FP(this._firestore,this._userDataWriter,r.key,r,new I3(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new mn(Tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new FP(i._firestore,i._userDataWriter,a.doc.key,a.doc,new I3(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new FP(i._firestore,i._userDataWriter,a.doc.key,a.doc,new I3(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:irt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function irt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ar()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(e){e=ag(e,of);const t=ag(e.firestore,jw);return Vnt(PR(t),e._key).then(n=>srt(t,e,n))}class n_e extends nrt{constructor(t){super(),this.firestore=t}convertBytes(t){return new CS(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new of(this.firestore,null,n)}}function X2(e){e=ag(e,Bw);const t=ag(e.firestore,jw),n=PR(t),r=new n_e(t);return trt(e._query),Hnt(n,e._query).then(i=>new rrt(t,r,e,i))}function Wl(e,t,n){e=ag(e,of);const r=ag(e.firestore,jw),i=e_e(e.converter,t,n);return EY(r,[qxe(q9(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,th.none())])}function bse(e,t,n,...r){e=ag(e,of);const i=ag(e.firestore,jw),s=q9(i);let o;return o=typeof(t=$s(t))=="string"||t instanceof NR?Gxe(s,"updateDoc",e._key,t,n,r):Wxe(s,"updateDoc",e._key,t),EY(i,[o.toMutation(e._key,th.exists(!0))])}function EY(e,t){return function(r,i){const s=new Xy;return r.asyncQueue.enqueueAndForget(async()=>Rnt(await Unt(r),i,s)),s.promise}(PR(e),t)}function srt(e,t,n){const r=n.docs.get(t._key),i=new n_e(e);return new t_e(e,i,t._key,r,new I3(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ort{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=q9(t)}set(t,n,r){this._verifyNotCommitted();const i=m$(t,this._firestore),s=e_e(i.converter,n,r),o=qxe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,th.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=m$(t,this._firestore);let o;return o=typeof(n=$s(n))=="string"||n instanceof NR?Gxe(this._dataReader,"WriteBatch.update",s._key,n,r,i):Wxe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,th.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=m$(t,this._firestore);return this._mutations=this._mutations.concat(new QG(n._key,th.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new mn(Tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function m$(e,t){if((e=$s(e)).firestore!==t)throw new mn(Tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function I6(){return new yY("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xse(e){return PR(e=ag(e,jw)),new ort(e,t=>EY(e,t))}(function(t,n=!0){(function(i){BT=i})(Lw),h1(new sg("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new jw(new eet(r.getProvider("auth-internal")),new iet(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new mn(Tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new a4(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),x0(Iie,"4.7.6",t),x0(Iie,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=new Map,r_e={activated:!1,tokenObservers:[]},art={initialized:!1,enabled:!1};function gu(e){return iz.get(e)||Object.assign({},r_e)}function urt(e,t){return iz.set(e,t),iz.get(e)}function K9(){return art}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_e="https://content-firebaseappcheck.googleapis.com/v1",lrt="exchangeRecaptchaV3Token",crt="exchangeDebugToken",_se={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},frt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class drt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new n4,this.pending.promise.catch(n=>{}),await hrt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new n4,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function hrt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const prt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Jf=new FT("appCheck","AppCheck",prt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wse(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function SY(e){if(!gu(e).activated)throw Jf.create("use-before-activation",{appName:e.name})}function s_e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=P6(n)+"d:"),r&&(o+=P6(r)+"h:"),o+=P6(i)+"m:"+P6(s)+"s",o}function P6(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TY({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Jf.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Jf.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Jf.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Jf.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function mrt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${i_e}/projects/${n}/apps/${r}:${lrt}?key=${i}`,body:{recaptcha_v3_token:t}}}function o_e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${i_e}/projects/${n}/apps/${r}:${crt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const grt="firebase-app-check-database",yrt=1,h4="firebase-app-check-store",a_e="debug-token";let N6=null;function u_e(){return N6||(N6=new Promise((e,t)=>{try{const n=indexedDB.open(grt,yrt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Jf.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(h4,{keyPath:"compositeKey"})}}}catch(n){t(Jf.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),N6)}function vrt(e){return c_e(f_e(e))}function brt(e,t){return l_e(f_e(e),t)}function xrt(e){return l_e(a_e,e)}function _rt(){return c_e(a_e)}async function l_e(e,t){const r=(await u_e()).transaction(h4,"readwrite"),s=r.objectStore(h4).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Jf.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function c_e(e){const n=(await u_e()).transaction(h4,"readonly"),i=n.objectStore(h4).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Jf.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function f_e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=new I9("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wrt(e){if(OG()){let t;try{t=await vrt(e)}catch(n){p4.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function g$(e,t){return OG()?brt(e,t).catch(n=>{p4.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Ert(){let e;try{e=await _rt()}catch{}if(e)return e;{const t=crypto.randomUUID();return xrt(t).catch(n=>p4.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CY(){return K9().enabled}async function AY(){const e=K9();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Srt(){const e=ube(),t=K9();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new n4;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Ert())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Trt={error:"UNKNOWN_ERROR"};function Crt(e){return DG.encodeString(JSON.stringify(e),!1)}async function sz(e,t=!1){const n=e.app;SY(n);const r=gu(n);let i=r.token,s;if(i&&!RE(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(RE(u)?i=u:await g$(n,void 0))}if(!t&&i&&RE(i))return{token:i.token};let o=!1;if(CY()){r.exchangeTokenPromise||(r.exchangeTokenPromise=TY(o_e(n,await AY()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await g$(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await gu(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?p4.warn(u.message):p4.error(u),s=u}let a;return i?s?RE(i)?a={token:i.token,internalError:s}:a=Sse(s):(a={token:i.token},r.token=i,await g$(n,i)):a=Sse(s),o&&p_e(n,a),a}async function Art(e){const t=e.app;SY(t);const{provider:n}=gu(t);if(CY()){const r=await AY(),{token:i}=await TY(o_e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function d_e(e,t,n,r){const{app:i}=e,s=gu(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&RE(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Ese(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Ese(e))}function h_e(e,t){const n=gu(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Ese(e){const{app:t}=e,n=gu(t);let r=n.tokenRefresher;r||(r=krt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function krt(e){const{app:t}=e;return new drt(async()=>{const n=gu(t);let r;if(n.token?r=await sz(e,!0):r=await sz(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=gu(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},_se.RETRIAL_MIN_WAIT,_se.RETRIAL_MAX_WAIT)}function p_e(e,t){const n=gu(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function RE(e){return e.expireTimeMillis-Date.now()>0}function Sse(e){return{token:Crt(Trt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rrt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=gu(this.app);for(const n of t)h_e(this.app,n.next);return Promise.resolve()}}function Irt(e,t){return new Rrt(e,t)}function Prt(e){return{getToken:t=>sz(e,t),getLimitedUseToken:()=>Art(e),addTokenListener:t=>d_e(e,"INTERNAL",t),removeTokenListener:t=>h_e(e.app,t)}}const Nrt="@firebase/app-check",Drt="0.8.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ort="https://www.google.com/recaptcha/api.js";function Mrt(e,t){const n=new n4,r=gu(e);r.reCAPTCHAState={initialized:n};const i=Lrt(e),s=wse(!1);return s?Tse(e,t,s,i,n):Brt(()=>{const o=wse(!1);if(!o)throw new Error("no recaptcha");Tse(e,t,o,i,n)}),n.promise}function Tse(e,t,n,r,i){n.ready(()=>{$rt(e,t,n,r),i.resolve(n)})}function Lrt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function Frt(e){SY(e);const n=await gu(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=gu(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function $rt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{gu(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{gu(e).reCAPTCHAState.succeeded=!1}}),s=gu(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function Brt(e){const t=document.createElement("script");t.src=Ort,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kY{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;Urt(this._throttleData);const i=await Frt(this._app).catch(o=>{throw Jf.create("recaptcha-error")});if(!(!((t=gu(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Jf.create("recaptcha-error");let s;try{s=await TY(mrt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=jrt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Jf.create("throttled",{time:s_e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=$T(t,"heartbeat"),Mrt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof kY?this._siteKey===t._siteKey:!1}}function jrt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+frt,httpStatus:e};{const n=t?t.backoffCount:0,r=TQe(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function Urt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Jf.create("throttled",{time:s_e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zrt(e=LG(),t){e=$s(e);const n=$T(e,"app-check");if(K9().initialized||Srt(),CY()&&AY().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Jf.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return Vrt(e,t.provider,t.isTokenAutoRefreshEnabled),gu(e).isTokenAutoRefreshEnabled&&d_e(r,"INTERNAL",()=>{}),r}function Vrt(e,t,n){const r=urt(e,Object.assign({},r_e));r.activated=!0,r.provider=t,r.cachedTokenPromise=wrt(e).then(i=>(i&&RE(i)&&(r.token=i,p_e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const Hrt="app-check",Cse="app-check-internal";function qrt(){h1(new sg(Hrt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Irt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Cse).initialize()})),h1(new sg(Cse,e=>{const t=e.getProvider("app-check").getImmediate();return Prt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),x0(Nrt,Drt)}qrt();function m_e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wrt=m_e,g_e=new FT("auth","Firebase",m_e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8=new I9("@firebase/auth");function Grt(e,...t){R8.logLevel<=ni.WARN&&R8.warn(`Auth (${Lw}): ${e}`,...t)}function $P(e,...t){R8.logLevel<=ni.ERROR&&R8.error(`Auth (${Lw}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(e,...t){throw IY(e,...t)}function _0(e,...t){return IY(e,...t)}function RY(e,t,n){const r=Object.assign(Object.assign({},Wrt()),{[t]:n});return new FT("auth","Firebase",r).create(t,{appName:e.name})}function eb(e){return RY(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yrt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&ug(e,"argument-error"),RY(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function IY(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return g_e.create(e,...t)}function hr(e,t,...n){if(!e)throw IY(t,...n)}function $y(e){const t="INTERNAL ASSERTION FAILED: "+e;throw $P(t),new Error(t)}function g1(e,t){e||$y(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oz(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Krt(){return Ase()==="http:"||Ase()==="https:"}function Ase(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xrt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Krt()||lQe()||"connection"in navigator)?navigator.onLine:!0}function Qrt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t,n){this.shortDelay=t,this.longDelay=n,g1(n>t,"Short delay should be less than long delay!"),this.isMobile=oQe()||cQe()}get(){return Xrt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PY(e,t){g1(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_e{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$y("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$y("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$y("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jrt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zrt=new OR(3e4,6e4);function X9(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function HT(e,t,n,r,i={}){return v_e(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=SR(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:u},s);return uQe()||(l.referrerPolicy="no-referrer"),y_e.fetch()(x_e(e,e.config.apiHost,n,a),l)})}async function v_e(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Jrt),t);try{const i=new eit(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw D6(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw D6(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw D6(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw D6(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw RY(e,c,l);ug(e,c)}}catch(i){if(i instanceof wg)throw i;ug(e,"network-request-failed",{message:String(i)})}}async function b_e(e,t,n,r,i={}){const s=await HT(e,t,n,r,i);return"mfaPendingCredential"in s&&ug(e,"multi-factor-auth-required",{_serverResponse:s}),s}function x_e(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?PY(e.config,i):`${e.config.apiScheme}://${i}`}class eit{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_0(this.auth,"network-request-failed")),Zrt.get())})}}function D6(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=_0(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tit(e,t){return HT(e,"POST","/v1/accounts:delete",t)}async function __e(e,t){return HT(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function nit(e,t=!1){const n=$s(e),r=await n.getIdToken(t),i=NY(r);hr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ak(y$(i.auth_time)),issuedAtTime:Ak(y$(i.iat)),expirationTime:Ak(y$(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function y$(e){return Number(e)*1e3}function NY(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return $P("JWT malformed, contained fewer than 3 sections"),null;try{const i=abe(n);return i?JSON.parse(i):($P("Failed to decode base64 JWT payload"),null)}catch(i){return $P("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function kse(e){const t=NY(e);return hr(t,"internal-error"),hr(typeof t.exp<"u","internal-error"),hr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m4(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof wg&&rit(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function rit({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iit{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ak(this.lastLoginAt),this.creationTime=Ak(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I8(e){var t;const n=e.auth,r=await e.getIdToken(),i=await m4(e,__e(n,{idToken:r}));hr(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?w_e(s.providerUserInfo):[],a=oit(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new az(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function sit(e){const t=$s(e);await I8(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function oit(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function w_e(e){return e.map(t=>{var{providerId:n}=t,r=iR(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ait(e,t){const n=await v_e(e,{},async()=>{const r=SR({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=x_e(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",y_e.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uit(e,t){return HT(e,"POST","/v2/accounts:revokeToken",X9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){hr(t.idToken,"internal-error"),hr(typeof t.idToken<"u","internal-error"),hr(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):kse(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){hr(t.length!==0,"internal-error");const n=kse(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(hr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await ait(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new WE;return r&&(hr(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(hr(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(hr(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new WE,this.toJSON())}_performRefresh(){return $y("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(e,t){hr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class By{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=iR(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iit(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new az(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await m4(this,this.stsTokenManager.getToken(this.auth,t));return hr(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return nit(this,t)}reload(){return sit(this)}_assign(t){this!==t&&(hr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new By(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){hr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await I8(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fm(this.auth.app))return Promise.reject(eb(this.auth));const t=await this.getIdToken();return await m4(this,tit(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(l=n.createdAt)!==null&&l!==void 0?l:void 0,y=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:x,emailVerified:w,isAnonymous:S,providerData:C,stsTokenManager:R}=n;hr(x&&R,t,"internal-error");const I=WE.fromJSON(this.name,R);hr(typeof x=="string",t,"internal-error"),mv(f,t.name),mv(d,t.name),hr(typeof w=="boolean",t,"internal-error"),hr(typeof S=="boolean",t,"internal-error"),mv(h,t.name),mv(p,t.name),mv(m,t.name),mv(g,t.name),mv(b,t.name),mv(y,t.name);const O=new By({uid:x,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:S,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:I,createdAt:b,lastLoginAt:y});return C&&Array.isArray(C)&&(O.providerData=C.map(M=>Object.assign({},M))),g&&(O._redirectEventId=g),O}static async _fromIdTokenResponse(t,n,r=!1){const i=new WE;i.updateFromServerResponse(n);const s=new By({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await I8(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];hr(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?w_e(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new WE;a.updateFromIdToken(r);const u=new By({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new az(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rse=new Map;function jy(e){g1(e instanceof Function,"Expected a class definition");let t=Rse.get(e);return t?(g1(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Rse.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}E_e.type="NONE";const Ise=E_e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(e,t,n){return`firebase:${e}:${t}:${n}`}class GE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=BP(this.userKey,i.apiKey,s),this.fullPersistenceKey=BP("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?By._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new GE(jy(Ise),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||jy(Ise);const o=BP(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=By._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new GE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new GE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pse(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(A_e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(S_e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(R_e(t))return"Blackberry";if(I_e(t))return"Webos";if(T_e(t))return"Safari";if((t.includes("chrome/")||C_e(t))&&!t.includes("edge/"))return"Chrome";if(k_e(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function S_e(e=hc()){return/firefox\//i.test(e)}function T_e(e=hc()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function C_e(e=hc()){return/crios\//i.test(e)}function A_e(e=hc()){return/iemobile/i.test(e)}function k_e(e=hc()){return/android/i.test(e)}function R_e(e=hc()){return/blackberry/i.test(e)}function I_e(e=hc()){return/webos/i.test(e)}function DY(e=hc()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function lit(e=hc()){var t;return DY(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function cit(){return fQe()&&document.documentMode===10}function P_e(e=hc()){return DY(e)||k_e(e)||I_e(e)||R_e(e)||/windows phone/i.test(e)||A_e(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_e(e,t=[]){let n;switch(e){case"Browser":n=Pse(hc());break;case"Worker":n=`${Pse(hc())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Lw}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fit{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dit(e,t={}){return HT(e,"GET","/v2/passwordPolicy",X9(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hit=6;class pit{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:hit,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mit{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nse(this),this.idTokenSubscription=new Nse(this),this.beforeStateQueue=new fit(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g_e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=jy(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await GE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await __e(this,{idToken:t}),r=await By._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Fm(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return hr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await I8(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Qrt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Fm(this.app))return Promise.reject(eb(this));const n=t?$s(t):null;return n&&hr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&hr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Fm(this.app)?Promise.reject(eb(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Fm(this.app)?Promise.reject(eb(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jy(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await dit(this),n=new pit(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new FT("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uit(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&jy(t)||this._popupRedirectResolver;hr(n,this,"argument-error"),this.redirectPersistenceManager=await GE.create(this,[jy(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(hr(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return hr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=N_e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Grt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function MR(e){return $s(e)}class Nse{constructor(t){this.auth=t,this.observer=null,this.addObserver=vQe(n=>this.observer=n)}get next(){return hr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OY={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function git(e){OY=e}function yit(e){return OY.loadJS(e)}function vit(){return OY.gapiScript}function bit(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xit(e,t){const n=$T(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(r4(s,t??{}))return i;ug(i,"already-initialized")}return n.initialize({options:t})}function _it(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jy);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function wit(e,t,n){const r=MR(e);hr(r._canInitEmulator,r,"emulator-config-failed"),hr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=D_e(t),{host:o,port:a}=Eit(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Sit()}function D_e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Eit(e){const t=D_e(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Dse(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Dse(o)}}}function Dse(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Sit(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_e{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return $y("not implemented")}_getIdTokenResponse(t){return $y("not implemented")}_linkToIdToken(t,n){return $y("not implemented")}_getReauthenticationResolver(t){return $y("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YE(e,t){return b_e(e,"POST","/v1/accounts:signInWithIdp",X9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tit="http://localhost";class Y_ extends O_e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Y_(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ug("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=iR(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Y_(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return YE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,YE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,YE(t,n)}buildRequest(){const t={requestUri:Tit,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=SR(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MY{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR extends MY{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov extends LR{constructor(){super("facebook.com")}static credential(t){return Y_._fromParams({providerId:Ov.PROVIDER_ID,signInMethod:Ov.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ov.credentialFromTaggedObject(t)}static credentialFromError(t){return Ov.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ov.credential(t.oauthAccessToken)}catch{return null}}}Ov.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ov.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy extends LR{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Y_._fromParams({providerId:Oy.PROVIDER_ID,signInMethod:Oy.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Oy.credentialFromTaggedObject(t)}static credentialFromError(t){return Oy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Oy.credential(n,r)}catch{return null}}}Oy.GOOGLE_SIGN_IN_METHOD="google.com";Oy.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv extends LR{constructor(){super("github.com")}static credential(t){return Y_._fromParams({providerId:Mv.PROVIDER_ID,signInMethod:Mv.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Mv.credentialFromTaggedObject(t)}static credentialFromError(t){return Mv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Mv.credential(t.oauthAccessToken)}catch{return null}}}Mv.GITHUB_SIGN_IN_METHOD="github.com";Mv.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv extends LR{constructor(){super("twitter.com")}static credential(t,n){return Y_._fromParams({providerId:Lv.PROVIDER_ID,signInMethod:Lv.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Lv.credentialFromTaggedObject(t)}static credentialFromError(t){return Lv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Lv.credential(n,r)}catch{return null}}}Lv.TWITTER_SIGN_IN_METHOD="twitter.com";Lv.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cit(e,t){return b_e(e,"POST","/v1/accounts:signUp",X9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await By._fromIdTokenResponse(t,r,i),o=Ose(r);return new gb({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Ose(r);return new gb({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Ose(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ait(e){var t;if(Fm(e.app))return Promise.reject(eb(e));const n=MR(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new gb({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Cit(n,{returnSecureToken:!0}),i=await gb._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8 extends wg{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,P8.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new P8(t,n,r,i)}}function M_e(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?P8._fromErrorAndOperation(e,s,t,r):s})}async function kit(e,t,n=!1){const r=await m4(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return gb._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rit(e,t,n=!1){const{auth:r}=e;if(Fm(r.app))return Promise.reject(eb(r));const i="reauthenticate";try{const s=await m4(e,M_e(r,i,t,e),n);hr(s.idToken,r,"internal-error");const o=NY(s.idToken);hr(o,r,"internal-error");const{sub:a}=o;return hr(e.uid===a,r,"user-mismatch"),gb._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ug(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iit(e,t,n=!1){if(Fm(e.app))return Promise.reject(eb(e));const r="signIn",i=await M_e(e,r,t),s=await gb._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Pit(e,t,n,r){return $s(e).onIdTokenChanged(t,n,r)}function Nit(e,t,n){return $s(e).beforeAuthStateChanged(t,n)}function Dit(e,t,n,r){return $s(e).onAuthStateChanged(t,n,r)}function Oit(e){return $s(e).signOut()}const N8="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_e{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(N8,"1"),this.storage.removeItem(N8),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mit=1e3,Lit=10;class F_e extends L_e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=P_e(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);cit()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Lit):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Mit)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}F_e.type="LOCAL";const Fit=F_e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_e extends L_e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}$_e.type="SESSION";const B_e=$_e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $it(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new Q9(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await $it(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Q9.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LY(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bit{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=LY("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){return window}function jit(e){Hm().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_e(){return typeof Hm().WorkerGlobalScope<"u"&&typeof Hm().importScripts=="function"}async function Uit(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zit(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Vit(){return j_e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_e="firebaseLocalStorageDb",Hit=1,D8="firebaseLocalStorage",z_e="fbase_key";class FR{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function J9(e,t){return e.transaction([D8],t?"readwrite":"readonly").objectStore(D8)}function qit(){const e=indexedDB.deleteDatabase(U_e);return new FR(e).toPromise()}function uz(){const e=indexedDB.open(U_e,Hit);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(D8,{keyPath:z_e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(D8)?t(r):(r.close(),await qit(),t(await uz()))})})}async function Mse(e,t,n){const r=J9(e,!0).put({[z_e]:t,value:n});return new FR(r).toPromise()}async function Wit(e,t){const n=J9(e,!1).get(t),r=await new FR(n).toPromise();return r===void 0?null:r.value}function Lse(e,t){const n=J9(e,!0).delete(t);return new FR(n).toPromise()}const Git=800,Yit=3;class V_e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uz(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Yit)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return j_e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Q9._getInstance(Vit()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Uit(),!this.activeServiceWorker)return;this.sender=new Bit(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||zit()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await uz();return await Mse(t,N8,"1"),await Lse(t,N8),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mse(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Wit(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Lse(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=J9(i,!1).getAll();return new FR(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Git)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V_e.type="LOCAL";const Kit=V_e;new OR(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_e(e,t){return t?jy(t):(hr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FY extends O_e{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return YE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return YE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return YE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Xit(e){return Iit(e.auth,new FY(e),e.bypassAuthState)}function Qit(e){const{auth:t,user:n}=e;return hr(n,t,"internal-error"),Rit(n,new FY(e),e.bypassAuthState)}async function Jit(e){const{auth:t,user:n}=e;return hr(n,t,"internal-error"),kit(n,new FY(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_e{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Xit;case"linkViaPopup":case"linkViaRedirect":return Jit;case"reauthViaPopup":case"reauthViaRedirect":return Qit;default:ug(this.auth,"internal-error")}}resolve(t){g1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){g1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zit=new OR(2e3,1e4);async function est(e,t,n){if(Fm(e.app))return Promise.reject(_0(e,"operation-not-supported-in-this-environment"));const r=MR(e);Yrt(e,t,MY);const i=H_e(r,n);return new T_(r,"signInViaPopup",t,i).executeNotNull()}class T_ extends q_e{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,T_.currentPopupAction&&T_.currentPopupAction.cancel(),T_.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return hr(t,this.auth,"internal-error"),t}async onExecution(){g1(this.filter.length===1,"Popup operations only handle one event");const t=LY();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_0(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(_0(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T_.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_0(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Zit.get())};t()}}T_.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tst="pendingRedirect",jP=new Map;class nst extends q_e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=jP.get(this.auth._key());if(!t){try{const r=await rst(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}jP.set(this.auth._key(),t)}return this.bypassAuthState||jP.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rst(e,t){const n=ost(t),r=sst(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ist(e,t){jP.set(e._key(),t)}function sst(e){return jy(e._redirectPersistence)}function ost(e){return BP(tst,e.config.apiKey,e.name)}async function ast(e,t,n=!1){if(Fm(e.app))return Promise.reject(eb(e));const r=MR(e),i=H_e(r,t),o=await new nst(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ust=10*60*1e3;class lst{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!cst(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!W_e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_0(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ust&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fse(t))}saveEventToCache(t){this.cachedEventUids.add(Fse(t)),this.lastProcessedEventTime=Date.now()}}function Fse(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function W_e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function cst(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W_e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fst(e,t={}){return HT(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dst=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hst=/^https?/;async function pst(e){if(e.config.emulator)return;const{authorizedDomains:t}=await fst(e);for(const n of t)try{if(mst(n))return}catch{}ug(e,"unauthorized-domain")}function mst(e){const t=oz(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!hst.test(n))return!1;if(dst.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gst=new OR(3e4,6e4);function $se(){const e=Hm().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function yst(e){return new Promise((t,n)=>{var r,i,s;function o(){$se(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{$se(),n(_0(e,"network-request-failed"))},timeout:gst.get()})}if(!((i=(r=Hm().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Hm().gapi)===null||s===void 0)&&s.load)o();else{const a=bit("iframefcb");return Hm()[a]=()=>{gapi.load?o():n(_0(e,"network-request-failed"))},yit(`${vit()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw UP=null,t})}let UP=null;function vst(e){return UP=UP||yst(e),UP}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bst=new OR(5e3,15e3),xst="__/auth/iframe",_st="emulator/auth/iframe",wst={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Est=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sst(e){const t=e.config;hr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?PY(t,_st):`https://${e.config.authDomain}/${xst}`,r={apiKey:t.apiKey,appName:e.name,v:Lw},i=Est.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${SR(r).slice(1)}`}async function Tst(e){const t=await vst(e),n=Hm().gapi;return hr(n,e,"internal-error"),t.open({where:document.body,url:Sst(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wst,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=_0(e,"network-request-failed"),a=Hm().setTimeout(()=>{s(o)},bst.get());function u(){Hm().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cst={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ast=500,kst=600,Rst="_blank",Ist="http://localhost";class Bse{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pst(e,t,n,r=Ast,i=kst){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Cst),{width:r.toString(),height:i.toString(),top:s,left:o}),l=hc().toLowerCase();n&&(a=C_e(l)?Rst:n),S_e(l)&&(t=t||Ist,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(lit(l)&&a!=="_self")return Nst(t||"",a),new Bse(null);const f=window.open(t||"",a,c);hr(f,e,"popup-blocked");try{f.focus()}catch{}return new Bse(f)}function Nst(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dst="__/auth/handler",Ost="emulator/auth/handler",Mst=encodeURIComponent("fac");async function jse(e,t,n,r,i,s){hr(e.config.authDomain,e,"auth-domain-config-required"),hr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Lw,eventId:i};if(t instanceof MY){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",yQe(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof LR){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${Mst}=${encodeURIComponent(u)}`:"";return`${Lst(e)}?${SR(a).slice(1)}${l}`}function Lst({config:e}){return e.emulator?PY(e,Ost):`https://${e.authDomain}/${Dst}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$="webStorageSupport";class Fst{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B_e,this._completeRedirectFn=ast,this._overrideRedirectResult=ist}async _openPopup(t,n,r,i){var s;g1((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await jse(t,n,r,oz(),i);return Pst(t,o,LY())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await jse(t,n,r,oz(),i);return jit(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(g1(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await Tst(t),r=new lst(t);return n.register("authEvent",i=>(hr(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(v$,{type:v$},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[v$];o!==void 0&&n(!!o),ug(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pst(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return P_e()||T_e()||DY()}}const G_e=Fst;var Use="@firebase/auth",zse="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $st{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){hr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bst(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jst(e){h1(new sg("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;hr(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N_e(e)},l=new mit(r,i,s,u);return _it(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),h1(new sg("auth-internal",t=>{const n=MR(t.getProvider("auth").getImmediate());return(r=>new $st(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),x0(Use,zse,Bst(e)),x0(Use,zse,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ust=5*60,zst=fbe("authIdTokenMaxAge")||Ust;let Vse=null;const Vst=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zst)return;const i=n==null?void 0:n.token;Vse!==i&&(Vse=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function O8(e=LG()){const t=$T(e,"auth");if(t.isInitialized())return t.getImmediate();const n=xit(e,{popupRedirectResolver:G_e,persistence:[Kit,Fit,B_e]}),r=fbe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Vst(s.toString());Nit(n,o,()=>o(n.currentUser)),Pit(n,a=>o(a))}}const i=lbe("auth");return i&&wit(n,`http://${i}`),n}function Hst(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}git({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=_0("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Hst().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jst("Browser");function P3(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var b$={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Hse;function qst(){return Hse||(Hse=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof P3=="function"&&P3;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof P3=="function"&&P3,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,b,y=h.length;y;){for(b=h,h=[],g=-1;++g<y;)b[g]();y=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof va<"u"?va:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,S!==o&&m(this,S)}f.prototype.catch=function(S){return this.then(null,S)},f.prototype.then=function(S,C){if(typeof S!="function"&&this.state===l||typeof C!="function"&&this.state===u)return this;var R=new this.constructor(o);if(this.state!==c){var I=this.state===l?S:C;h(R,I,this.outcome)}else this.queue.push(new d(R,S,C));return R};function d(S,C,R){this.promise=S,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(S){a.resolve(this.promise,S)},d.prototype.otherCallFulfilled=function(S){h(this.promise,this.onFulfilled,S)},d.prototype.callRejected=function(S){a.reject(this.promise,S)},d.prototype.otherCallRejected=function(S){h(this.promise,this.onRejected,S)};function h(S,C,R){s(function(){var I;try{I=C(R)}catch(O){return a.reject(S,O)}I===S?a.reject(S,new TypeError("Cannot resolve promise with itself")):a.resolve(S,I)})}a.resolve=function(S,C){var R=g(p,C);if(R.status==="error")return a.reject(S,R.value);var I=R.value;if(I)m(S,I);else{S.state=l,S.outcome=C;for(var O=-1,M=S.queue.length;++O<M;)S.queue[O].callFulfilled(C)}return S},a.reject=function(S,C){S.state=u,S.outcome=C;for(var R=-1,I=S.queue.length;++R<I;)S.queue[R].callRejected(C);return S};function p(S){var C=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof C=="function")return function(){C.apply(S,arguments)}}function m(S,C){var R=!1;function I(V){R||(R=!0,a.reject(S,V))}function O(V){R||(R=!0,a.resolve(S,V))}function M(){C(O,I)}var L=g(M);L.status==="error"&&I(L.value)}function g(S,C){var R={};try{R.value=S(C),R.status="success"}catch(I){R.status="error",R.value=I}return R}f.resolve=b;function b(S){return S instanceof this?S:a.resolve(new this(o),S)}f.reject=y;function y(S){var C=new this(o);return a.reject(C,S)}f.all=x;function x(S){var C=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=S.length,I=!1;if(!R)return this.resolve([]);for(var O=new Array(R),M=0,L=-1,V=new this(o);++L<R;)D(S[L],L);return V;function D(j,z){C.resolve(j).then(G,function(ee){I||(I=!0,a.reject(V,ee))});function G(ee){O[z]=ee,++M===R&&!I&&(I=!0,a.resolve(V,O))}}}f.race=w;function w(S){var C=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=S.length,I=!1;if(!R)return this.resolve([]);for(var O=-1,M=new this(o);++O<R;)L(S[O]);return M;function L(V){C.resolve(V).then(function(D){I||(I=!0,a.resolve(M,D))},function(D){I||(I=!0,a.reject(M,D))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof va<"u"?va:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve};function o(ve,Ie){if(!(ve instanceof Ie))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ve=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Ie=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ve||Ie)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ve,Ie){ve=ve||[],Ie=Ie||{};try{return new Blob(ve,Ie)}catch(De){if(De.name!=="TypeError")throw De;for(var Se=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Be=new Se,ze=0;ze<ve.length;ze+=1)Be.append(ve[ze]);return Be.getBlob(Ie.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ve,Ie){Ie&&ve.then(function(Se){Ie(null,Se)},function(Se){Ie(Se)})}function h(ve,Ie,Se){typeof Ie=="function"&&ve.then(Ie),typeof Se=="function"&&ve.catch(Se)}function p(ve){return typeof ve!="string"&&(console.warn(ve+" used as a key, but it is not a string."),ve=String(ve)),ve}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",b=void 0,y={},x=Object.prototype.toString,w="readonly",S="readwrite";function C(ve){for(var Ie=ve.length,Se=new ArrayBuffer(Ie),Be=new Uint8Array(Se),ze=0;ze<Ie;ze++)Be[ze]=ve.charCodeAt(ze);return Se}function R(ve){return new f(function(Ie){var Se=ve.transaction(g,S),Be=c([""]);Se.objectStore(g).put(Be,"key"),Se.onabort=function(ze){ze.preventDefault(),ze.stopPropagation(),Ie(!1)},Se.oncomplete=function(){var ze=navigator.userAgent.match(/Chrome\/(\d+)/),De=navigator.userAgent.match(/Edge\//);Ie(De||!ze||parseInt(ze[1],10)>=43)}}).catch(function(){return!1})}function I(ve){return typeof b=="boolean"?f.resolve(b):R(ve).then(function(Ie){return b=Ie,b})}function O(ve){var Ie=y[ve.name],Se={};Se.promise=new f(function(Be,ze){Se.resolve=Be,Se.reject=ze}),Ie.deferredOperations.push(Se),Ie.dbReady?Ie.dbReady=Ie.dbReady.then(function(){return Se.promise}):Ie.dbReady=Se.promise}function M(ve){var Ie=y[ve.name],Se=Ie.deferredOperations.pop();if(Se)return Se.resolve(),Se.promise}function L(ve,Ie){var Se=y[ve.name],Be=Se.deferredOperations.pop();if(Be)return Be.reject(Ie),Be.promise}function V(ve,Ie){return new f(function(Se,Be){if(y[ve.name]=y[ve.name]||te(),ve.db)if(Ie)O(ve),ve.db.close();else return Se(ve.db);var ze=[ve.name];Ie&&ze.push(ve.version);var De=u.open.apply(u,ze);Ie&&(De.onupgradeneeded=function(ht){var kt=De.result;try{kt.createObjectStore(ve.storeName),ht.oldVersion<=1&&kt.createObjectStore(g)}catch(Nt){if(Nt.name==="ConstraintError")console.warn('The database "'+ve.name+'" has been upgraded from version '+ht.oldVersion+" to version "+ht.newVersion+', but the storage "'+ve.storeName+'" already exists.');else throw Nt}}),De.onerror=function(ht){ht.preventDefault(),Be(De.error)},De.onsuccess=function(){var ht=De.result;ht.onversionchange=function(kt){kt.target.close()},Se(ht),M(ve)}})}function D(ve){return V(ve,!1)}function j(ve){return V(ve,!0)}function z(ve,Ie){if(!ve.db)return!0;var Se=!ve.db.objectStoreNames.contains(ve.storeName),Be=ve.version<ve.db.version,ze=ve.version>ve.db.version;if(Be&&(ve.version!==Ie&&console.warn('The database "'+ve.name+`" can't be downgraded from version `+ve.db.version+" to version "+ve.version+"."),ve.version=ve.db.version),ze||Se){if(Se){var De=ve.db.version+1;De>ve.version&&(ve.version=De)}return!0}return!1}function G(ve){return new f(function(Ie,Se){var Be=new FileReader;Be.onerror=Se,Be.onloadend=function(ze){var De=btoa(ze.target.result||"");Ie({__local_forage_encoded_blob:!0,data:De,type:ve.type})},Be.readAsBinaryString(ve)})}function ee(ve){var Ie=C(atob(ve.data));return c([Ie],{type:ve.type})}function ne(ve){return ve&&ve.__local_forage_encoded_blob}function ue(ve){var Ie=this,Se=Ie._initReady().then(function(){var Be=y[Ie._dbInfo.name];if(Be&&Be.dbReady)return Be.dbReady});return h(Se,ve,ve),Se}function X(ve){O(ve);for(var Ie=y[ve.name],Se=Ie.forages,Be=0;Be<Se.length;Be++){var ze=Se[Be];ze._dbInfo.db&&(ze._dbInfo.db.close(),ze._dbInfo.db=null)}return ve.db=null,D(ve).then(function(De){return ve.db=De,z(ve)?j(ve):De}).then(function(De){ve.db=Ie.db=De;for(var ht=0;ht<Se.length;ht++)Se[ht]._dbInfo.db=De}).catch(function(De){throw L(ve,De),De})}function W(ve,Ie,Se,Be){Be===void 0&&(Be=1);try{var ze=ve.db.transaction(ve.storeName,Ie);Se(null,ze)}catch(De){if(Be>0&&(!ve.db||De.name==="InvalidStateError"||De.name==="NotFoundError"))return f.resolve().then(function(){if(!ve.db||De.name==="NotFoundError"&&!ve.db.objectStoreNames.contains(ve.storeName)&&ve.version<=ve.db.version)return ve.db&&(ve.version=ve.db.version+1),j(ve)}).then(function(){return X(ve).then(function(){W(ve,Ie,Se,Be-1)})}).catch(Se);Se(De)}}function te(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function q(ve){var Ie=this,Se={db:null};if(ve)for(var Be in ve)Se[Be]=ve[Be];var ze=y[Se.name];ze||(ze=te(),y[Se.name]=ze),ze.forages.push(Ie),Ie._initReady||(Ie._initReady=Ie.ready,Ie.ready=ue);var De=[];function ht(){return f.resolve()}for(var kt=0;kt<ze.forages.length;kt++){var Nt=ze.forages[kt];Nt!==Ie&&De.push(Nt._initReady().catch(ht))}var Rt=ze.forages.slice(0);return f.all(De).then(function(){return Se.db=ze.db,D(Se)}).then(function(jt){return Se.db=jt,z(Se,Ie._defaultConfig.version)?j(Se):jt}).then(function(jt){Se.db=ze.db=jt,Ie._dbInfo=Se;for(var Zt=0;Zt<Rt.length;Zt++){var qn=Rt[Zt];qn!==Ie&&(qn._dbInfo.db=Se.db,qn._dbInfo.version=Se.version)}})}function J(ve,Ie){var Se=this;ve=p(ve);var Be=new f(function(ze,De){Se.ready().then(function(){W(Se._dbInfo,w,function(ht,kt){if(ht)return De(ht);try{var Nt=kt.objectStore(Se._dbInfo.storeName),Rt=Nt.get(ve);Rt.onsuccess=function(){var jt=Rt.result;jt===void 0&&(jt=null),ne(jt)&&(jt=ee(jt)),ze(jt)},Rt.onerror=function(){De(Rt.error)}}catch(jt){De(jt)}})}).catch(De)});return d(Be,Ie),Be}function oe(ve,Ie){var Se=this,Be=new f(function(ze,De){Se.ready().then(function(){W(Se._dbInfo,w,function(ht,kt){if(ht)return De(ht);try{var Nt=kt.objectStore(Se._dbInfo.storeName),Rt=Nt.openCursor(),jt=1;Rt.onsuccess=function(){var Zt=Rt.result;if(Zt){var qn=Zt.value;ne(qn)&&(qn=ee(qn));var Sn=ve(qn,Zt.key,jt++);Sn!==void 0?ze(Sn):Zt.continue()}else ze()},Rt.onerror=function(){De(Rt.error)}}catch(Zt){De(Zt)}})}).catch(De)});return d(Be,Ie),Be}function de(ve,Ie,Se){var Be=this;ve=p(ve);var ze=new f(function(De,ht){var kt;Be.ready().then(function(){return kt=Be._dbInfo,x.call(Ie)==="[object Blob]"?I(kt.db).then(function(Nt){return Nt?Ie:G(Ie)}):Ie}).then(function(Nt){W(Be._dbInfo,S,function(Rt,jt){if(Rt)return ht(Rt);try{var Zt=jt.objectStore(Be._dbInfo.storeName);Nt===null&&(Nt=void 0);var qn=Zt.put(Nt,ve);jt.oncomplete=function(){Nt===void 0&&(Nt=null),De(Nt)},jt.onabort=jt.onerror=function(){var Sn=qn.error?qn.error:qn.transaction.error;ht(Sn)}}catch(Sn){ht(Sn)}})}).catch(ht)});return d(ze,Se),ze}function ce(ve,Ie){var Se=this;ve=p(ve);var Be=new f(function(ze,De){Se.ready().then(function(){W(Se._dbInfo,S,function(ht,kt){if(ht)return De(ht);try{var Nt=kt.objectStore(Se._dbInfo.storeName),Rt=Nt.delete(ve);kt.oncomplete=function(){ze()},kt.onerror=function(){De(Rt.error)},kt.onabort=function(){var jt=Rt.error?Rt.error:Rt.transaction.error;De(jt)}}catch(jt){De(jt)}})}).catch(De)});return d(Be,Ie),Be}function pe(ve){var Ie=this,Se=new f(function(Be,ze){Ie.ready().then(function(){W(Ie._dbInfo,S,function(De,ht){if(De)return ze(De);try{var kt=ht.objectStore(Ie._dbInfo.storeName),Nt=kt.clear();ht.oncomplete=function(){Be()},ht.onabort=ht.onerror=function(){var Rt=Nt.error?Nt.error:Nt.transaction.error;ze(Rt)}}catch(Rt){ze(Rt)}})}).catch(ze)});return d(Se,ve),Se}function Ee(ve){var Ie=this,Se=new f(function(Be,ze){Ie.ready().then(function(){W(Ie._dbInfo,w,function(De,ht){if(De)return ze(De);try{var kt=ht.objectStore(Ie._dbInfo.storeName),Nt=kt.count();Nt.onsuccess=function(){Be(Nt.result)},Nt.onerror=function(){ze(Nt.error)}}catch(Rt){ze(Rt)}})}).catch(ze)});return d(Se,ve),Se}function Ae(ve,Ie){var Se=this,Be=new f(function(ze,De){if(ve<0){ze(null);return}Se.ready().then(function(){W(Se._dbInfo,w,function(ht,kt){if(ht)return De(ht);try{var Nt=kt.objectStore(Se._dbInfo.storeName),Rt=!1,jt=Nt.openKeyCursor();jt.onsuccess=function(){var Zt=jt.result;if(!Zt){ze(null);return}ve===0||Rt?ze(Zt.key):(Rt=!0,Zt.advance(ve))},jt.onerror=function(){De(jt.error)}}catch(Zt){De(Zt)}})}).catch(De)});return d(Be,Ie),Be}function ge(ve){var Ie=this,Se=new f(function(Be,ze){Ie.ready().then(function(){W(Ie._dbInfo,w,function(De,ht){if(De)return ze(De);try{var kt=ht.objectStore(Ie._dbInfo.storeName),Nt=kt.openKeyCursor(),Rt=[];Nt.onsuccess=function(){var jt=Nt.result;if(!jt){Be(Rt);return}Rt.push(jt.key),jt.continue()},Nt.onerror=function(){ze(Nt.error)}}catch(jt){ze(jt)}})}).catch(ze)});return d(Se,ve),Se}function me(ve,Ie){Ie=m.apply(this,arguments);var Se=this.config();ve=typeof ve!="function"&&ve||{},ve.name||(ve.name=ve.name||Se.name,ve.storeName=ve.storeName||Se.storeName);var Be=this,ze;if(!ve.name)ze=f.reject("Invalid arguments");else{var De=ve.name===Se.name&&Be._dbInfo.db,ht=De?f.resolve(Be._dbInfo.db):D(ve).then(function(kt){var Nt=y[ve.name],Rt=Nt.forages;Nt.db=kt;for(var jt=0;jt<Rt.length;jt++)Rt[jt]._dbInfo.db=kt;return kt});ve.storeName?ze=ht.then(function(kt){if(kt.objectStoreNames.contains(ve.storeName)){var Nt=kt.version+1;O(ve);var Rt=y[ve.name],jt=Rt.forages;kt.close();for(var Zt=0;Zt<jt.length;Zt++){var qn=jt[Zt];qn._dbInfo.db=null,qn._dbInfo.version=Nt}var Sn=new f(function(lr,_n){var br=u.open(ve.name,Nt);br.onerror=function(ls){var Ao=br.result;Ao.close(),_n(ls)},br.onupgradeneeded=function(){var ls=br.result;ls.deleteObjectStore(ve.storeName)},br.onsuccess=function(){var ls=br.result;ls.close(),lr(ls)}});return Sn.then(function(lr){Rt.db=lr;for(var _n=0;_n<jt.length;_n++){var br=jt[_n];br._dbInfo.db=lr,M(br._dbInfo)}}).catch(function(lr){throw(L(ve,lr)||f.resolve()).catch(function(){}),lr})}}):ze=ht.then(function(kt){O(ve);var Nt=y[ve.name],Rt=Nt.forages;kt.close();for(var jt=0;jt<Rt.length;jt++){var Zt=Rt[jt];Zt._dbInfo.db=null}var qn=new f(function(Sn,lr){var _n=u.deleteDatabase(ve.name);_n.onerror=function(){var br=_n.result;br&&br.close(),lr(_n.error)},_n.onblocked=function(){console.warn('dropInstance blocked for database "'+ve.name+'" until all open connections are closed')},_n.onsuccess=function(){var br=_n.result;br&&br.close(),Sn(br)}});return qn.then(function(Sn){Nt.db=Sn;for(var lr=0;lr<Rt.length;lr++){var _n=Rt[lr];M(_n._dbInfo)}}).catch(function(Sn){throw(L(ve,Sn)||f.resolve()).catch(function(){}),Sn})})}return d(ze,Ie),ze}var Oe={_driver:"asyncStorage",_initStorage:q,_support:l(),iterate:oe,getItem:J,setItem:de,removeItem:ce,clear:pe,length:Ee,key:Ae,keys:ge,dropInstance:me};function Me(){return typeof openDatabase=="function"}var Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lt="~~local_forage_type~",We=/^~~local_forage_type~([^~]+)~/,nt="__lfsc__:",yt=nt.length,_t="arbf",It="blob",Et="si08",Ke="ui08",Lt="uic8",sn="si16",Fe="si32",Qe="ur16",wt="ui32",Vt="fl32",Wt="fl64",bn=yt+_t.length,Dn=Object.prototype.toString;function Zn(ve){var Ie=ve.length*.75,Se=ve.length,Be,ze=0,De,ht,kt,Nt;ve[ve.length-1]==="="&&(Ie--,ve[ve.length-2]==="="&&Ie--);var Rt=new ArrayBuffer(Ie),jt=new Uint8Array(Rt);for(Be=0;Be<Se;Be+=4)De=Ye.indexOf(ve[Be]),ht=Ye.indexOf(ve[Be+1]),kt=Ye.indexOf(ve[Be+2]),Nt=Ye.indexOf(ve[Be+3]),jt[ze++]=De<<2|ht>>4,jt[ze++]=(ht&15)<<4|kt>>2,jt[ze++]=(kt&3)<<6|Nt&63;return Rt}function wr(ve){var Ie=new Uint8Array(ve),Se="",Be;for(Be=0;Be<Ie.length;Be+=3)Se+=Ye[Ie[Be]>>2],Se+=Ye[(Ie[Be]&3)<<4|Ie[Be+1]>>4],Se+=Ye[(Ie[Be+1]&15)<<2|Ie[Be+2]>>6],Se+=Ye[Ie[Be+2]&63];return Ie.length%3===2?Se=Se.substring(0,Se.length-1)+"=":Ie.length%3===1&&(Se=Se.substring(0,Se.length-2)+"=="),Se}function Hn(ve,Ie){var Se="";if(ve&&(Se=Dn.call(ve)),ve&&(Se==="[object ArrayBuffer]"||ve.buffer&&Dn.call(ve.buffer)==="[object ArrayBuffer]")){var Be,ze=nt;ve instanceof ArrayBuffer?(Be=ve,ze+=_t):(Be=ve.buffer,Se==="[object Int8Array]"?ze+=Et:Se==="[object Uint8Array]"?ze+=Ke:Se==="[object Uint8ClampedArray]"?ze+=Lt:Se==="[object Int16Array]"?ze+=sn:Se==="[object Uint16Array]"?ze+=Qe:Se==="[object Int32Array]"?ze+=Fe:Se==="[object Uint32Array]"?ze+=wt:Se==="[object Float32Array]"?ze+=Vt:Se==="[object Float64Array]"?ze+=Wt:Ie(new Error("Failed to get type for BinaryArray"))),Ie(ze+wr(Be))}else if(Se==="[object Blob]"){var De=new FileReader;De.onload=function(){var ht=lt+ve.type+"~"+wr(this.result);Ie(nt+It+ht)},De.readAsArrayBuffer(ve)}else try{Ie(JSON.stringify(ve))}catch(ht){console.error("Couldn't convert value into a JSON string: ",ve),Ie(null,ht)}}function nr(ve){if(ve.substring(0,yt)!==nt)return JSON.parse(ve);var Ie=ve.substring(bn),Se=ve.substring(yt,bn),Be;if(Se===It&&We.test(Ie)){var ze=Ie.match(We);Be=ze[1],Ie=Ie.substring(ze[0].length)}var De=Zn(Ie);switch(Se){case _t:return De;case It:return c([De],{type:Be});case Et:return new Int8Array(De);case Ke:return new Uint8Array(De);case Lt:return new Uint8ClampedArray(De);case sn:return new Int16Array(De);case Qe:return new Uint16Array(De);case Fe:return new Int32Array(De);case wt:return new Uint32Array(De);case Vt:return new Float32Array(De);case Wt:return new Float64Array(De);default:throw new Error("Unkown type: "+Se)}}var Ei={serialize:Hn,deserialize:nr,stringToBuffer:Zn,bufferToString:wr};function Dr(ve,Ie,Se,Be){ve.executeSql("CREATE TABLE IF NOT EXISTS "+Ie.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Se,Be)}function Co(ve){var Ie=this,Se={db:null};if(ve)for(var Be in ve)Se[Be]=typeof ve[Be]!="string"?ve[Be].toString():ve[Be];var ze=new f(function(De,ht){try{Se.db=openDatabase(Se.name,String(Se.version),Se.description,Se.size)}catch(kt){return ht(kt)}Se.db.transaction(function(kt){Dr(kt,Se,function(){Ie._dbInfo=Se,De()},function(Nt,Rt){ht(Rt)})},ht)});return Se.serializer=Ei,ze}function Ji(ve,Ie,Se,Be,ze,De){ve.executeSql(Se,Be,ze,function(ht,kt){kt.code===kt.SYNTAX_ERR?ht.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Ie.storeName],function(Nt,Rt){Rt.rows.length?De(Nt,kt):Dr(Nt,Ie,function(){Nt.executeSql(Se,Be,ze,De)},De)},De):De(ht,kt)},De)}function Di(ve,Ie){var Se=this;ve=p(ve);var Be=new f(function(ze,De){Se.ready().then(function(){var ht=Se._dbInfo;ht.db.transaction(function(kt){Ji(kt,ht,"SELECT * FROM "+ht.storeName+" WHERE key = ? LIMIT 1",[ve],function(Nt,Rt){var jt=Rt.rows.length?Rt.rows.item(0).value:null;jt&&(jt=ht.serializer.deserialize(jt)),ze(jt)},function(Nt,Rt){De(Rt)})})}).catch(De)});return d(Be,Ie),Be}function Zi(ve,Ie){var Se=this,Be=new f(function(ze,De){Se.ready().then(function(){var ht=Se._dbInfo;ht.db.transaction(function(kt){Ji(kt,ht,"SELECT * FROM "+ht.storeName,[],function(Nt,Rt){for(var jt=Rt.rows,Zt=jt.length,qn=0;qn<Zt;qn++){var Sn=jt.item(qn),lr=Sn.value;if(lr&&(lr=ht.serializer.deserialize(lr)),lr=ve(lr,Sn.key,qn+1),lr!==void 0){ze(lr);return}}ze()},function(Nt,Rt){De(Rt)})})}).catch(De)});return d(Be,Ie),Be}function ei(ve,Ie,Se,Be){var ze=this;ve=p(ve);var De=new f(function(ht,kt){ze.ready().then(function(){Ie===void 0&&(Ie=null);var Nt=Ie,Rt=ze._dbInfo;Rt.serializer.serialize(Ie,function(jt,Zt){Zt?kt(Zt):Rt.db.transaction(function(qn){Ji(qn,Rt,"INSERT OR REPLACE INTO "+Rt.storeName+" (key, value) VALUES (?, ?)",[ve,jt],function(){ht(Nt)},function(Sn,lr){kt(lr)})},function(qn){if(qn.code===qn.QUOTA_ERR){if(Be>0){ht(ei.apply(ze,[ve,Nt,Se,Be-1]));return}kt(qn)}})})}).catch(kt)});return d(De,Se),De}function mo(ve,Ie,Se){return ei.apply(this,[ve,Ie,Se,1])}function Gu(ve,Ie){var Se=this;ve=p(ve);var Be=new f(function(ze,De){Se.ready().then(function(){var ht=Se._dbInfo;ht.db.transaction(function(kt){Ji(kt,ht,"DELETE FROM "+ht.storeName+" WHERE key = ?",[ve],function(){ze()},function(Nt,Rt){De(Rt)})})}).catch(De)});return d(Be,Ie),Be}function Sa(ve){var Ie=this,Se=new f(function(Be,ze){Ie.ready().then(function(){var De=Ie._dbInfo;De.db.transaction(function(ht){Ji(ht,De,"DELETE FROM "+De.storeName,[],function(){Be()},function(kt,Nt){ze(Nt)})})}).catch(ze)});return d(Se,ve),Se}function Ta(ve){var Ie=this,Se=new f(function(Be,ze){Ie.ready().then(function(){var De=Ie._dbInfo;De.db.transaction(function(ht){Ji(ht,De,"SELECT COUNT(key) as c FROM "+De.storeName,[],function(kt,Nt){var Rt=Nt.rows.item(0).c;Be(Rt)},function(kt,Nt){ze(Nt)})})}).catch(ze)});return d(Se,ve),Se}function Kr(ve,Ie){var Se=this,Be=new f(function(ze,De){Se.ready().then(function(){var ht=Se._dbInfo;ht.db.transaction(function(kt){Ji(kt,ht,"SELECT key FROM "+ht.storeName+" WHERE id = ? LIMIT 1",[ve+1],function(Nt,Rt){var jt=Rt.rows.length?Rt.rows.item(0).key:null;ze(jt)},function(Nt,Rt){De(Rt)})})}).catch(De)});return d(Be,Ie),Be}function Oi(ve){var Ie=this,Se=new f(function(Be,ze){Ie.ready().then(function(){var De=Ie._dbInfo;De.db.transaction(function(ht){Ji(ht,De,"SELECT key FROM "+De.storeName,[],function(kt,Nt){for(var Rt=[],jt=0;jt<Nt.rows.length;jt++)Rt.push(Nt.rows.item(jt).key);Be(Rt)},function(kt,Nt){ze(Nt)})})}).catch(ze)});return d(Se,ve),Se}function si(ve){return new f(function(Ie,Se){ve.transaction(function(Be){Be.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ze,De){for(var ht=[],kt=0;kt<De.rows.length;kt++)ht.push(De.rows.item(kt).name);Ie({db:ve,storeNames:ht})},function(ze,De){Se(De)})},function(Be){Se(Be)})})}function Zs(ve,Ie){Ie=m.apply(this,arguments);var Se=this.config();ve=typeof ve!="function"&&ve||{},ve.name||(ve.name=ve.name||Se.name,ve.storeName=ve.storeName||Se.storeName);var Be=this,ze;return ve.name?ze=new f(function(De){var ht;ve.name===Se.name?ht=Be._dbInfo.db:ht=openDatabase(ve.name,"","",0),ve.storeName?De({db:ht,storeNames:[ve.storeName]}):De(si(ht))}).then(function(De){return new f(function(ht,kt){De.db.transaction(function(Nt){function Rt(Sn){return new f(function(lr,_n){Nt.executeSql("DROP TABLE IF EXISTS "+Sn,[],function(){lr()},function(br,ls){_n(ls)})})}for(var jt=[],Zt=0,qn=De.storeNames.length;Zt<qn;Zt++)jt.push(Rt(De.storeNames[Zt]));f.all(jt).then(function(){ht()}).catch(function(Sn){kt(Sn)})},function(Nt){kt(Nt)})})}):ze=f.reject("Invalid arguments"),d(ze,Ie),ze}var Xr={_driver:"webSQLStorage",_initStorage:Co,_support:Me(),iterate:Zi,getItem:Di,setItem:mo,removeItem:Gu,clear:Sa,length:Ta,key:Kr,keys:Oi,dropInstance:Zs};function Hi(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function eo(ve,Ie){var Se=ve.name+"/";return ve.storeName!==Ie.storeName&&(Se+=ve.storeName+"/"),Se}function go(){var ve="_localforage_support_test";try{return localStorage.setItem(ve,!0),localStorage.removeItem(ve),!1}catch{return!0}}function Jo(){return!go()||localStorage.length>0}function Ca(ve){var Ie=this,Se={};if(ve)for(var Be in ve)Se[Be]=ve[Be];return Se.keyPrefix=eo(ve,Ie._defaultConfig),Jo()?(Ie._dbInfo=Se,Se.serializer=Ei,f.resolve()):f.reject()}function pd(ve){var Ie=this,Se=Ie.ready().then(function(){for(var Be=Ie._dbInfo.keyPrefix,ze=localStorage.length-1;ze>=0;ze--){var De=localStorage.key(ze);De.indexOf(Be)===0&&localStorage.removeItem(De)}});return d(Se,ve),Se}function Hr(ve,Ie){var Se=this;ve=p(ve);var Be=Se.ready().then(function(){var ze=Se._dbInfo,De=localStorage.getItem(ze.keyPrefix+ve);return De&&(De=ze.serializer.deserialize(De)),De});return d(Be,Ie),Be}function Pl(ve,Ie){var Se=this,Be=Se.ready().then(function(){for(var ze=Se._dbInfo,De=ze.keyPrefix,ht=De.length,kt=localStorage.length,Nt=1,Rt=0;Rt<kt;Rt++){var jt=localStorage.key(Rt);if(jt.indexOf(De)===0){var Zt=localStorage.getItem(jt);if(Zt&&(Zt=ze.serializer.deserialize(Zt)),Zt=ve(Zt,jt.substring(ht),Nt++),Zt!==void 0)return Zt}}});return d(Be,Ie),Be}function bs(ve,Ie){var Se=this,Be=Se.ready().then(function(){var ze=Se._dbInfo,De;try{De=localStorage.key(ve)}catch{De=null}return De&&(De=De.substring(ze.keyPrefix.length)),De});return d(Be,Ie),Be}function Ka(ve){var Ie=this,Se=Ie.ready().then(function(){for(var Be=Ie._dbInfo,ze=localStorage.length,De=[],ht=0;ht<ze;ht++){var kt=localStorage.key(ht);kt.indexOf(Be.keyPrefix)===0&&De.push(kt.substring(Be.keyPrefix.length))}return De});return d(Se,ve),Se}function Zo(ve){var Ie=this,Se=Ie.keys().then(function(Be){return Be.length});return d(Se,ve),Se}function yh(ve,Ie){var Se=this;ve=p(ve);var Be=Se.ready().then(function(){var ze=Se._dbInfo;localStorage.removeItem(ze.keyPrefix+ve)});return d(Be,Ie),Be}function md(ve,Ie,Se){var Be=this;ve=p(ve);var ze=Be.ready().then(function(){Ie===void 0&&(Ie=null);var De=Ie;return new f(function(ht,kt){var Nt=Be._dbInfo;Nt.serializer.serialize(Ie,function(Rt,jt){if(jt)kt(jt);else try{localStorage.setItem(Nt.keyPrefix+ve,Rt),ht(De)}catch(Zt){(Zt.name==="QuotaExceededError"||Zt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&kt(Zt),kt(Zt)}})})});return d(ze,Se),ze}function mf(ve,Ie){if(Ie=m.apply(this,arguments),ve=typeof ve!="function"&&ve||{},!ve.name){var Se=this.config();ve.name=ve.name||Se.name,ve.storeName=ve.storeName||Se.storeName}var Be=this,ze;return ve.name?ze=new f(function(De){ve.storeName?De(eo(ve,Be._defaultConfig)):De(ve.name+"/")}).then(function(De){for(var ht=localStorage.length-1;ht>=0;ht--){var kt=localStorage.key(ht);kt.indexOf(De)===0&&localStorage.removeItem(kt)}}):ze=f.reject("Invalid arguments"),d(ze,Ie),ze}var gf={_driver:"localStorageWrapper",_initStorage:Ca,_support:Hi(),iterate:Pl,getItem:Hr,setItem:md,removeItem:yh,clear:pd,length:Zo,key:bs,keys:Ka,dropInstance:mf},xc=function(Ie,Se){return Ie===Se||typeof Ie=="number"&&typeof Se=="number"&&isNaN(Ie)&&isNaN(Se)},_c=function(Ie,Se){for(var Be=Ie.length,ze=0;ze<Be;){if(xc(Ie[ze],Se))return!0;ze++}return!1},wc=Array.isArray||function(ve){return Object.prototype.toString.call(ve)==="[object Array]"},Er={},Ec={},xs={INDEXEDDB:Oe,WEBSQL:Xr,LOCALSTORAGE:gf},Xa=[xs.INDEXEDDB._driver,xs.WEBSQL._driver,xs.LOCALSTORAGE._driver],As=["dropInstance"],Nl=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(As),Sc={description:"",driver:Xa.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ea(ve,Ie){ve[Ie]=function(){var Se=arguments;return ve.ready().then(function(){return ve[Ie].apply(ve,Se)})}}function qi(){for(var ve=1;ve<arguments.length;ve++){var Ie=arguments[ve];if(Ie)for(var Se in Ie)Ie.hasOwnProperty(Se)&&(wc(Ie[Se])?arguments[0][Se]=Ie[Se].slice():arguments[0][Se]=Ie[Se])}return arguments[0]}var ti=function(){function ve(Ie){o(this,ve);for(var Se in xs)if(xs.hasOwnProperty(Se)){var Be=xs[Se],ze=Be._driver;this[Se]=ze,Er[ze]||this.defineDriver(Be)}this._defaultConfig=qi({},Sc),this._config=qi({},this._defaultConfig,Ie),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ve.prototype.config=function(Se){if((typeof Se>"u"?"undefined":s(Se))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Be in Se){if(Be==="storeName"&&(Se[Be]=Se[Be].replace(/\W/g,"_")),Be==="version"&&typeof Se[Be]!="number")return new Error("Database version must be a number.");this._config[Be]=Se[Be]}return"driver"in Se&&Se.driver?this.setDriver(this._config.driver):!0}else return typeof Se=="string"?this._config[Se]:this._config},ve.prototype.defineDriver=function(Se,Be,ze){var De=new f(function(ht,kt){try{var Nt=Se._driver,Rt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Se._driver){kt(Rt);return}for(var jt=Nl.concat("_initStorage"),Zt=0,qn=jt.length;Zt<qn;Zt++){var Sn=jt[Zt],lr=!_c(As,Sn);if((lr||Se[Sn])&&typeof Se[Sn]!="function"){kt(Rt);return}}var _n=function(){for(var Ao=function(to){return function(){var Mi=new Error("Method "+to+" is not implemented by the current driver"),ko=f.reject(Mi);return d(ko,arguments[arguments.length-1]),ko}},Dl=0,gd=As.length;Dl<gd;Dl++){var Yu=As[Dl];Se[Yu]||(Se[Yu]=Ao(Yu))}};_n();var br=function(Ao){Er[Nt]&&console.info("Redefining LocalForage driver: "+Nt),Er[Nt]=Se,Ec[Nt]=Ao,ht()};"_support"in Se?Se._support&&typeof Se._support=="function"?Se._support().then(br,kt):br(!!Se._support):br(!0)}catch(ls){kt(ls)}});return h(De,Be,ze),De},ve.prototype.driver=function(){return this._driver||null},ve.prototype.getDriver=function(Se,Be,ze){var De=Er[Se]?f.resolve(Er[Se]):f.reject(new Error("Driver not found."));return h(De,Be,ze),De},ve.prototype.getSerializer=function(Se){var Be=f.resolve(Ei);return h(Be,Se),Be},ve.prototype.ready=function(Se){var Be=this,ze=Be._driverSet.then(function(){return Be._ready===null&&(Be._ready=Be._initDriver()),Be._ready});return h(ze,Se,Se),ze},ve.prototype.setDriver=function(Se,Be,ze){var De=this;wc(Se)||(Se=[Se]);var ht=this._getSupportedDrivers(Se);function kt(){De._config.driver=De.driver()}function Nt(Zt){return De._extend(Zt),kt(),De._ready=De._initStorage(De._config),De._ready}function Rt(Zt){return function(){var qn=0;function Sn(){for(;qn<Zt.length;){var lr=Zt[qn];return qn++,De._dbInfo=null,De._ready=null,De.getDriver(lr).then(Nt).catch(Sn)}kt();var _n=new Error("No available storage method found.");return De._driverSet=f.reject(_n),De._driverSet}return Sn()}}var jt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=jt.then(function(){var Zt=ht[0];return De._dbInfo=null,De._ready=null,De.getDriver(Zt).then(function(qn){De._driver=qn._driver,kt(),De._wrapLibraryMethodsWithReady(),De._initDriver=Rt(ht)})}).catch(function(){kt();var Zt=new Error("No available storage method found.");return De._driverSet=f.reject(Zt),De._driverSet}),h(this._driverSet,Be,ze),this._driverSet},ve.prototype.supports=function(Se){return!!Ec[Se]},ve.prototype._extend=function(Se){qi(this,Se)},ve.prototype._getSupportedDrivers=function(Se){for(var Be=[],ze=0,De=Se.length;ze<De;ze++){var ht=Se[ze];this.supports(ht)&&Be.push(ht)}return Be},ve.prototype._wrapLibraryMethodsWithReady=function(){for(var Se=0,Be=Nl.length;Se<Be;Se++)ea(this,Nl[Se])},ve.prototype.createInstance=function(Se){return new ve(Se)},ve}(),rr=new ti;r.exports=rr},{3:3}]},{},[4])(4)})}(b$)),b$.exports}var Wst=qst();const EE=gc(Wst),ll=[];for(let e=0;e<256;++e)ll.push((e+256).toString(16).slice(1));function Gst(e,t=0){return(ll[e[t+0]]+ll[e[t+1]]+ll[e[t+2]]+ll[e[t+3]]+"-"+ll[e[t+4]]+ll[e[t+5]]+"-"+ll[e[t+6]]+ll[e[t+7]]+"-"+ll[e[t+8]]+ll[e[t+9]]+"-"+ll[e[t+10]]+ll[e[t+11]]+ll[e[t+12]]+ll[e[t+13]]+ll[e[t+14]]+ll[e[t+15]]).toLowerCase()}let x$;const Yst=new Uint8Array(16);function Kst(){if(!x$){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");x$=crypto.getRandomValues.bind(crypto)}return x$(Yst)}const Xst=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qse={randomUUID:Xst};function M8(e,t,n){var i;if(qse.randomUUID&&!e)return qse.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??Kst();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Gst(r)}class Y_e{constructor(t){Vc(this,"engine");Vc(this,"connected",!1);Vc(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function L8(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function iA(e){return e.participantId!==void 0}class Hh extends Y_e{constructor(){super("firebase");Vc(this,"RECAPTCHAV3TOKEN","6Lfbe8IqAAAAAOEYDF0mWB_xkcxWJD0XfCyRaNIi");Vc(this,"firestore");Vc(this,"collectionPrefix","prod-");Vc(this,"studyCollection");Vc(this,"storage");Vc(this,"studyId","");Vc(this,"localForage",EE.createInstance({name:"currentParticipantId"}));Vc(this,"participantData",null);Vc(this,"userManagementData",{});const n=QXe.parse(` 
{
  apiKey: "AIzaSyBNUsuUETpZj6lJwFHGRcMIdy15R8H-TCo",
  authDomain: "patch-labeling-study.firebaseapp.com",
  projectId: "patch-labeling-study",
  storageBucket: "patch-labeling-study.firebasestorage.app",
  messagingSenderId: "742007974424",
  appId: "1:742007974424:web:43f121ed8397dd9f02716d"
}
`),r=pbe(n);this.firestore=Wnt(r,{}),this.storage=kie();try{zrt(r,{provider:new kY(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await Ynt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=O8();if(!i.currentUser&&(await Ait(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=jf(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await L8(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(iA(a))return this.participantData=a,a;const l=await L8(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Gs(this.studyCollection,"configHash"),r=await R6(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=Gs(this.studyCollection,"configHash");await Wl(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=$d(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=M8(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){let i=null;const s=async o=>{i||(i=setTimeout(async()=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,o.data)},500))};n.addEventListener("dataavailable",s),n.requestData()}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Gs(this.studyCollection,"sequenceAssignment");await Wl(i,{});const s=jf(i,"sequenceAssignment"),o=Gs(s,this.currentParticipantId),a=p$(s,mse("rejected","==",!0),mse("claimed","==",!1)),u=await X2(a);if(u.docs.length>0){const b=u.docs[0],y=b.data().timestamp;r.dataCollectionEnabled&&(await Wl(b.ref,{claimed:!0}),await Wl(o,{participantId:this.currentParticipantId,timestamp:y,rejected:!1,claimed:!1,completed:null,createdTime:I6()}))}else r.dataCollectionEnabled&&await Wl(o,{participantId:this.currentParticipantId,timestamp:I6(),rejected:!1,claimed:!1,completed:null,createdTime:I6()});const l=p$(s,gse("timestamp","asc")),f=(await X2(l)).docs.map(b=>b.data()),d=f.filter(b=>!b.rejected).findIndex(b=>b.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");const g=f.sort((b,y)=>b.createdTime-y.createdTime).findIndex(b=>b.participantId===this.currentParticipantId)+1;return{currentRow:p,creationIndex:g}}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=$d(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await rA(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");iA(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=kie(),s=await E6($d(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return iA(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=M8();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=Gs(this.studyCollection,"sequenceAssignment"),i=jf(r,"sequenceAssignment"),s=Gs(i,this.currentParticipantId);return await bse(s,{completed:I6()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=jf(this.firestore,"user-management"),i=await X2(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await Wl(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Wl(Gs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Wl(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Wl(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Wl(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=$d(this.storage,`${this.collectionPrefix}${n}/participants`),i=await rA(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");iA(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=jf(this.firestore,`${this.collectionPrefix}${n}`),o=$d(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!iA(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=Gs(s,"sequenceAssignment"),l=jf(u,"sequenceAssignment"),c=Gs(l,r);await bse(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=Gs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Wl(s,{[r]:i},{merge:!0})}async getModes(n){const r=Gs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await R6(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Wl(r,s),s}async getParticipantsStatusCounts(n){const r=jf(this.firestore,`${this.collectionPrefix}${n}`),i=Gs(r,"sequenceAssignment"),s=jf(i,"sequenceAssignment"),o=p$(s,gse("timestamp","asc")),u=(await X2(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=Gs(this.firestore,"metadata","collections"),i=await R6(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=Gs(this.firestore,"metadata","collections");await Wl(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=Gs(this.firestore,"metadata","collections");return await Wl(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=Gs(this.firestore,"metadata","collections"),i=await R6(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Wl(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=$d(this.storage,n),s=(await rA(r)).items.map(o=>Aie(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=$d(this.storage,n),o=(await rA(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=$d(this.storage,n),s=$d(this.storage,r),o=await E6(i),u=await(await fetch(o)).blob();await w6(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=jf(this.firestore,n),s=Gs(i,"sequenceAssignment"),o=jf(s,"sequenceAssignment"),a=jf(this.firestore,r),u=Gs(a,"sequenceAssignment");await Wl(u,{});const l=jf(u,"sequenceAssignment"),c=await X2(o),f=xse(this.firestore);c.docs.forEach(d=>{const h=Gs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=jf(this.firestore,n),i=Gs(r,"sequenceAssignment"),s=jf(i,"sequenceAssignment"),o=await X2(s),a=xse(this.firestore);o.forEach(u=>{const l=Gs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=$d(this.storage,n);return(await rA(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=$d(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await E6(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await E6(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=$d(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await w6(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await w6(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await w6(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=$d(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Aie(i)}}const K_e=B.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),qT=()=>B.useContext(K_e);function Qst({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=B.useState(t),[o,a]=B.useState(!1),{storageEngine:u}=Ko(),l=async()=>{const h=O8();try{await Oit(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;B.useEffect(()=>{s(t);let h;if(u instanceof Hh)try{h=O8()}catch{console.warn("No firebase store.")}const p=async b=>{if(s(y=>({user:y.user,isAdmin:y.isAdmin,determiningStatus:!0,adminVerification:!1})),b){const y={user:b,determiningStatus:!1,isAdmin:!1,adminVerification:!0},x=await f(y);y.isAdmin=!!x,s(y)}else l()},g=(async()=>{if(u instanceof Hh){const b=await(u==null?void 0:u.getUserManagementData("authentication"));if(b!=null&&b.isEnabled){const y=Dit(h,async x=>await p(x));return()=>y()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(b=>b())}},[u,o]);const d=B.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return A.jsx(K_e.Provider,{value:d,children:i.determiningStatus?A.jsx(oh,{visible:!0}):e})}const Jst="https://github.com/revisit-studies/study/tree/main/public/";function Zst({configName:e,config:t,url:n}){const{storageEngine:r}=Ko(),[i,s]=B.useState(null);B.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=B.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=B.useState(null);B.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=B.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return A.jsx(ET,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?A.jsxs(A.Fragment,{children:[A.jsx(At,{fw:"bold",children:e}),A.jsxs(An,{align:"center",direction:"row",children:[A.jsx(hk,{color:"red"}),A.jsx(At,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),A.jsx(PP,{issues:t.errors,type:"error"}),t.warnings.length>0&&A.jsxs(A.Fragment,{children:[A.jsxs(An,{align:"center",direction:"row",children:[A.jsx(hk,{color:"orange"}),A.jsx(At,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),A.jsx(PP,{issues:t.warnings,type:"warning"})]})]}):A.jsxs(A.Fragment,{children:[A.jsx(An,{direction:"row",justify:"space-between",children:A.jsx(At,{fw:"bold",children:t.studyMetadata.title})}),A.jsxs(At,{c:"dimmed",children:[A.jsx(At,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),A.jsx(At,{c:"dimmed",children:t.studyMetadata.description}),A.jsx(At,{c:"dimmed",ta:"right",style:{paddingRight:5},children:A.jsxs(Iw,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${Jst}${n}`,children:["View source:"," ",n,A.jsx(R1e,{style:{width:ot(18),height:ot(18),marginLeft:ot(2),marginBottom:ot(-3)}})]})}),t.warnings.length>0&&A.jsxs(A.Fragment,{children:[A.jsxs(An,{align:"center",direction:"row",children:[A.jsx(hk,{color:"orange"}),A.jsx(At,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),A.jsx(PP,{issues:t.warnings,type:"warning"})]}),A.jsx(Zd,{my:"md"}),A.jsxs(An,{direction:"row",gap:"sm",children:[A.jsxs(At,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&A.jsx(VXe,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&A.jsxs(At,{c:"dimmed",mt:4,children:["Activity:"," ",o," ","–"," ",a]}),A.jsxs(An,{direction:"row",align:"end",gap:"sm",mt:"md",children:[A.jsx(In,{leftSection:A.jsx(k1e,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${Uu}analysis/stats/${n}`,children:"Analyze & Manage Study"}),A.jsx(In,{leftSection:A.jsx(I1e,{}),component:"a",href:`${Uu}${n}`,children:"Go to Study"})]})]})},e)}function Q2({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=M1e(n);return A.jsx(Zst,{configName:n,config:r,url:i},n)})}function eot({globalConfig:e,studyConfigs:t}){const{storageEngine:n}=Ko(),{configsList:r}=e,i=r.filter(b=>b.startsWith("demo-")),s=r.filter(b=>b.startsWith("tutorial-")),o=r.filter(b=>b.startsWith("example-")),a=r.filter(b=>b.startsWith("test-")),u=r.filter(b=>b.startsWith("library-")),l=B.useMemo(()=>r.filter(b=>!b.startsWith("demo-")&&!b.startsWith("tutorial-")&&!b.startsWith("example-")&&!b.startsWith("test-")&&!b.startsWith("library-")),[r]),[c,f]=B.useState({});B.useEffect(()=>{async function b(){const y={};await Promise.all(l.map(async x=>{if(n instanceof Hh){const w=await n.getModes(x);y[x]=w.analyticsInterfacePubliclyAccessible}})),f(y)}b()},[l,n]);const{user:d}=qT(),h=B.useMemo(()=>l.filter(b=>c[b]||d.isAdmin),[l,c,d]),[p]=D1(),m=B.useMemo(()=>p.get("tab")||(h.length>0?"Others":"Demos"),[h.length,p]),g=F0();return A.jsx(hs.Main,{children:A.jsxs(c1,{size:"sm",px:0,children:[A.jsx(Wb,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Uu}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),A.jsxs(ci,{variant:"outline",defaultValue:l.length>0?"Others":"Demos",value:m,onChange:b=>g(`/?tab=${b}`),children:[A.jsxs(ci.List,{children:[h.length>0&&A.jsx(ci.Tab,{value:"Others",children:"Your Studies"}),A.jsx(ci.Tab,{value:"Demos",children:"Demo Studies"}),A.jsx(ci.Tab,{value:"Examples",children:"Example Studies"}),A.jsx(ci.Tab,{value:"Tutorials",children:"Tutorials"}),A.jsx(ci.Tab,{value:"Tests",children:"Tests"}),A.jsx(ci.Tab,{value:"Libraries",children:"Libraries"})]}),h.length>0&&A.jsx(ci.Panel,{value:"Others",children:A.jsx(Q2,{configNames:h,studyConfigs:t})}),A.jsxs(ci.Panel,{value:"Demos",children:[A.jsx(At,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),A.jsx(Q2,{configNames:i,studyConfigs:t})]}),A.jsxs(ci.Panel,{value:"Examples",children:[A.jsx(At,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),A.jsx(Q2,{configNames:o,studyConfigs:t})]}),A.jsxs(ci.Panel,{value:"Tutorials",children:[A.jsx(At,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),A.jsx(Q2,{configNames:s,studyConfigs:t})]}),A.jsxs(ci.Panel,{value:"Tests",children:[A.jsx(At,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),A.jsx(Q2,{configNames:a,studyConfigs:t})]}),A.jsxs(ci.Panel,{value:"Libraries",children:[A.jsx(At,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish."}),A.jsx(Q2,{configNames:u,studyConfigs:t})]})]})]})})}var _$={exports:{}},w$={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wse;function tot(){if(Wse)return w$;Wse=1;var e=A1();function t(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,a=e.useDebugValue;return w$.useSyncExternalStoreWithSelector=function(u,l,c,f,d){var h=i(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=o(function(){function g(S){if(!b){if(b=!0,y=S,S=f(S),d!==void 0&&p.hasValue){var C=p.value;if(d(C,S))return x=C}return x=S}if(C=x,n(y,S))return C;var R=f(S);return d!==void 0&&d(C,R)?(y=S,C):(y=S,x=R)}var b=!1,y,x,w=c===void 0?null:c;return[function(){return g(l())},w===null?void 0:function(){return g(w())}]},[l,c,f,d]);var m=r(u,h[0],h[1]);return s(function(){p.hasValue=!0,p.value=m},[m]),a(m),m},w$}var Gse;function not(){return Gse||(Gse=1,_$.exports=tot()),_$.exports}var rot=not();function iot(e){e()}function sot(){let e=null,t=null;return{clear(){e=null,t=null},notify(){iot(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Yse={notify(){},get:()=>[]};function oot(e,t){let n,r=Yse,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let b=!1;return()=>{b||(b=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=sot())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Yse)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var aot=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uot=aot(),lot=()=>typeof navigator<"u"&&navigator.product==="ReactNative",cot=lot(),fot=()=>uot||cot?B.useLayoutEffect:B.useEffect,dot=fot(),E$=Symbol.for("react-redux-context"),S$=typeof globalThis<"u"?globalThis:{};function hot(){if(!B.createContext)return{};const e=S$[E$]??(S$[E$]=new Map);let t=e.get(B.createContext);return t||(t=B.createContext(null),e.set(B.createContext,t)),t}var yb=hot();function pot(e){const{children:t,context:n,serverState:r,store:i}=e,s=B.useMemo(()=>{const u=oot(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=B.useMemo(()=>i.getState(),[i]);dot(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const a=n||yb;return B.createElement(a.Provider,{value:s},t)}var mot=pot;function $Y(e=yb){return function(){return B.useContext(e)}}var X_e=$Y();function Q_e(e=yb){const t=e===yb?X_e:$Y(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var got=Q_e();function yot(e=yb){const t=e===yb?got:Q_e(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var J_e=yot(),vot=(e,t)=>e===t;function bot(e=yb){const t=e===yb?X_e:$Y(e),n=(r,i={})=>{const{equalityFn:s=vot}=typeof i=="function"?{equalityFn:i}:i,o=t(),{store:a,subscription:u,getServerState:l}=o;B.useRef(!0);const c=B.useCallback({[r.name](d){return r(d)}}[r.name],[r]),f=rot.useSyncExternalStoreWithSelector(u.addNestedSub,a.getState,l||a.getState,c,s);return B.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var xot=bot();function fl(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _ot=typeof Symbol=="function"&&Symbol.observable||"@@observable",Kse=_ot,T$=()=>Math.random().toString(36).substring(7).split("").join("."),wot={INIT:`@@redux/INIT${T$()}`,REPLACE:`@@redux/REPLACE${T$()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${T$()}`},F8=wot;function BY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Z_e(e,t,n){if(typeof e!="function")throw new Error(fl(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(fl(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(fl(1));return n(Z_e)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,b)=>{o.set(b,g)}))}function c(){if(u)throw new Error(fl(3));return i}function f(g){if(typeof g!="function")throw new Error(fl(4));if(u)throw new Error(fl(5));let b=!0;l();const y=a++;return o.set(y,g),function(){if(b){if(u)throw new Error(fl(6));b=!1,l(),o.delete(y),s=null}}}function d(g){if(!BY(g))throw new Error(fl(7));if(typeof g.type>"u")throw new Error(fl(8));if(typeof g.type!="string")throw new Error(fl(17));if(u)throw new Error(fl(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(y=>{y()}),g}function h(g){if(typeof g!="function")throw new Error(fl(10));r=g,d({type:F8.REPLACE})}function p(){const g=f;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(fl(11));function y(){const w=b;w.next&&w.next(c())}return y(),{unsubscribe:g(y)}},[Kse](){return this}}}return d({type:F8.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Kse]:p}}function Eot(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:F8.INIT})>"u")throw new Error(fl(12));if(typeof n(void 0,{type:F8.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(fl(13))})}function Sot(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Eot(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(fl(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function $8(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Tot(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(fl(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=$8(...a)(i.dispatch),{...i,dispatch:s}}}function Cot(e){return BY(e)&&"type"in e&&typeof e.type=="string"}var ewe=Symbol.for("immer-nothing"),Xse=Symbol.for("immer-draftable"),ah=Symbol.for("immer-state");function a0(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var AS=Object.getPrototypeOf;function K_(e){return!!e&&!!e[ah]}function y1(e){var t;return e?twe(e)||Array.isArray(e)||!!e[Xse]||!!((t=e.constructor)!=null&&t[Xse])||eM(e)||tM(e):!1}var Aot=Object.prototype.constructor.toString();function twe(e){if(!e||typeof e!="object")return!1;const t=AS(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Aot}function B8(e,t){Z9(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Z9(e){const t=e[ah];return t?t.type_:Array.isArray(e)?1:eM(e)?2:tM(e)?3:0}function lz(e,t){return Z9(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nwe(e,t,n){const r=Z9(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function kot(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function eM(e){return e instanceof Map}function tM(e){return e instanceof Set}function o_(e){return e.copy_||e.base_}function cz(e,t){if(eM(e))return new Map(e);if(tM(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=twe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ah];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(AS(e),r)}else{const r=AS(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function jY(e,t=!1){return nM(e)||K_(e)||!y1(e)||(Z9(e)>1&&(e.set=e.add=e.clear=e.delete=Rot),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>jY(r,!0))),e}function Rot(){a0(2)}function nM(e){return Object.isFrozen(e)}var Iot={};function X_(e){const t=Iot[e];return t||a0(0,e),t}var g4;function rwe(){return g4}function Pot(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Qse(e,t){t&&(X_("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function fz(e){dz(e),e.drafts_.forEach(Not),e.drafts_=null}function dz(e){e===g4&&(g4=e.parent_)}function Jse(e){return g4=Pot(g4,e)}function Not(e){const t=e[ah];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Zse(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ah].modified_&&(fz(t),a0(4)),y1(e)&&(e=j8(t,e),t.parent_||U8(t,e)),t.patches_&&X_("Patches").generateReplacementPatches_(n[ah].base_,e,t.patches_,t.inversePatches_)):e=j8(t,n,[]),fz(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ewe?e:void 0}function j8(e,t,n){if(nM(t))return t;const r=t[ah];if(!r)return B8(t,(i,s)=>eoe(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return U8(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),B8(s,(a,u)=>eoe(e,r,i,a,u,n,o)),U8(e,i,!1),n&&e.patches_&&X_("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function eoe(e,t,n,r,i,s,o){if(K_(i)){const a=s&&t&&t.type_!==3&&!lz(t.assigned_,r)?s.concat(r):void 0,u=j8(e,i,a);if(nwe(n,r,u),K_(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(y1(i)&&!nM(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;j8(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&U8(e,i)}}function U8(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jY(t,n)}function Dot(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:rwe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=UY;n&&(i=[r],s=y4);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var UY={get(e,t){if(t===ah)return e;const n=o_(e);if(!lz(n,t))return Oot(e,n,t);const r=n[t];return e.finalized_||!y1(r)?r:r===C$(e.base_,t)?(A$(e),e.copy_[t]=pz(r,e)):r},has(e,t){return t in o_(e)},ownKeys(e){return Reflect.ownKeys(o_(e))},set(e,t,n){const r=iwe(o_(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=C$(o_(e),t),s=i==null?void 0:i[ah];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(kot(n,i)&&(n!==void 0||lz(e.base_,t)))return!0;A$(e),hz(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return C$(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,A$(e),hz(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=o_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){a0(11)},getPrototypeOf(e){return AS(e.base_)},setPrototypeOf(){a0(12)}},y4={};B8(UY,(e,t)=>{y4[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});y4.deleteProperty=function(e,t){return y4.set.call(this,e,t,void 0)};y4.set=function(e,t,n){return UY.set.call(this,e[0],t,n,e[0])};function C$(e,t){const n=e[ah];return(n?o_(n):e)[t]}function Oot(e,t,n){var i;const r=iwe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function iwe(e,t){if(!(t in e))return;let n=AS(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=AS(n)}}function hz(e){e.modified_||(e.modified_=!0,e.parent_&&hz(e.parent_))}function A$(e){e.copy_||(e.copy_=cz(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Mot=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&a0(6),r!==void 0&&typeof r!="function"&&a0(7);let i;if(y1(t)){const s=Jse(this),o=pz(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?fz(s):dz(s)}return Qse(s,r),Zse(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===ewe&&(i=void 0),this.autoFreeze_&&jY(i,!0),r){const s=[],o=[];X_("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else a0(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){y1(e)||a0(8),K_(e)&&(e=Lot(e));const t=Jse(this),n=pz(e,void 0);return n[ah].isManual_=!0,dz(t),n}finishDraft(e,t){const n=e&&e[ah];(!n||!n.isManual_)&&a0(9);const{scope_:r}=n;return Qse(r,t),Zse(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=X_("Patches").applyPatches_;return K_(e)?r(e,t):this.produce(e,i=>r(i,t))}};function pz(e,t){const n=eM(e)?X_("MapSet").proxyMap_(e,t):tM(e)?X_("MapSet").proxySet_(e,t):Dot(e,t);return(t?t.scope_:rwe()).drafts_.push(n),n}function Lot(e){return K_(e)||a0(10,e),swe(e)}function swe(e){if(!y1(e)||nM(e))return e;const t=e[ah];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=cz(e,t.scope_.immer_.useStrictShallowCopy_)}else n=cz(e,!0);return B8(n,(r,i)=>{nwe(n,r,swe(i))}),t&&(t.finalized_=!1),n}var uh=new Mot,owe=uh.produce;uh.produceWithPatches.bind(uh);uh.setAutoFreeze.bind(uh);uh.setUseStrictShallowCopy.bind(uh);uh.applyPatches.bind(uh);uh.createDraft.bind(uh);uh.finishDraft.bind(uh);function Fot(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function $ot(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Bot(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var toe=e=>Array.isArray(e)?e:[e];function jot(e){const t=Array.isArray(e[0])?e[0]:e;return Bot(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Uot(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var zot=class{constructor(e){this.value=e}deref(){return this.value}},Vot=typeof WeakRef<"u"?WeakRef:zot,Hot=0,noe=1;function O6(){return{s:Hot,v:void 0,o:null,p:null}}function awe(e,t={}){let n=O6();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=O6(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=O6(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===noe)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Vot(c):c}return l.s=noe,l.v=c,c}return o.clearCache=()=>{n=O6(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function qot(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Fot(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=awe,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=toe(d),b=toe(p),y=jot(i),x=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const C=Uot(y,arguments);return a=x.apply(null,C),a},...b);return Object.assign(w,{resultFunc:l,memoizedResultFunc:x,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var uwe=qot(awe),Wot=Object.assign((e,t=uwe)=>{$ot(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Wot});function lwe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Got=lwe(),Yot=lwe,Kot=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?$8:$8.apply(null,arguments)};function roe(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Qy(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Cot(r)&&r.type===e,n}var cwe=class N3 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,N3.prototype)}static get[Symbol.species](){return N3}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new N3(...t[0].concat(this)):new N3(...t.concat(this))}};function ioe(e){return y1(e)?owe(e,()=>{}):e}function soe(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Xot(e){return typeof e=="boolean"}var Qot=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new cwe;return n&&(Xot(n)?o.push(Got):o.push(Yot(n.extraArgument))),o},Jot="RTK_autoBatch",ooe=e=>t=>{setTimeout(t,e)},Zot=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ooe(10):e.type==="callback"?e.queueNotification:ooe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Jot]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},eat=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new cwe(e);return r&&i.push(Zot(typeof r=="object"?r:void 0)),i};function tat(e){const t=Qot(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(BY(n))a=Sot(n);else throw new Error(Qy(1));let u;typeof r=="function"?u=r(t):u=t();let l=$8;i&&(l=Kot({trace:!1,...typeof i=="object"&&i}));const c=Tot(...u),f=eat(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return Z_e(a,s,h)}function fwe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Qy(28));if(a in t)throw new Error(Qy(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function nat(e){return typeof e=="function"}function rat(e,t){let[n,r,i]=fwe(t),s;if(nat(e))s=()=>ioe(e());else{const a=ioe(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(K_(c)){const h=f(c,u);return h===void 0?c:h}else{if(y1(c))return owe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return c},a)}return o.getInitialState=s,o}var iat=Symbol.for("rtk-slice-createasyncthunk");function sat(e,t){return`${e}/${t}`}function oat({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[iat];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Qy(11));const a=(typeof i.reducers=="function"?i.reducers(lat()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(x,w){const S=typeof x=="string"?x:x.type;if(!S)throw new Error(Qy(12));if(S in l.sliceCaseReducersByType)throw new Error(Qy(13));return l.sliceCaseReducersByType[S]=w,c},addMatcher(x,w){return l.sliceMatchers.push({matcher:x,reducer:w}),c},exposeAction(x,w){return l.actionCreators[x]=w,c},exposeCaseReducer(x,w){return l.sliceCaseReducersByName[x]=w,c}};u.forEach(x=>{const w=a[x],S={reducerName:x,type:sat(s,x),createNotation:typeof i.reducers=="function"};fat(w)?hat(S,w,c,t):cat(S,w,c)});function f(){const[x={},w=[],S=void 0]=typeof i.extraReducers=="function"?fwe(i.extraReducers):[i.extraReducers],C={...x,...l.sliceCaseReducersByType};return rat(i.initialState,R=>{for(let I in C)R.addCase(I,C[I]);for(let I of l.sliceMatchers)R.addMatcher(I.matcher,I.reducer);for(let I of w)R.addMatcher(I.matcher,I.reducer);S&&R.addDefaultCase(S)})}const d=x=>x,h=new Map;let p;function m(x,w){return p||(p=f()),p(x,w)}function g(){return p||(p=f()),p.getInitialState()}function b(x,w=!1){function S(R){let I=R[x];return typeof I>"u"&&w&&(I=g()),I}function C(R=d){const I=soe(h,w,()=>new WeakMap);return soe(I,R,()=>{const O={};for(const[M,L]of Object.entries(i.selectors??{}))O[M]=aat(L,R,g,w);return O})}return{reducerPath:x,getSelectors:C,get selectors(){return C(S)},selectSlice:S}}const y={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...b(o),injectInto(x,{reducerPath:w,...S}={}){const C=w??o;return x.inject({reducerPath:C,reducer:m},S),{...y,...b(C,!0)}}};return y}}function aat(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var uat=oat();function lat(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function cat({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!dat(r))throw new Error(Qy(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?roe(e,o):roe(e))}function fat(e){return e._reducerDefinitionType==="asyncThunk"}function dat(e){return e._reducerDefinitionType==="reducerWithPrepare"}function hat({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Qy(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||M6,pending:a||M6,rejected:u||M6,settled:l||M6})}function M6(){}function Qy(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function k0(e){return e.components.flatMap(t=>typeof t=="string"?t:k0(t))}function dwe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:dwe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function hwe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+k0(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+k0(e).length-1}];r+=1}else{const o=hwe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function zY(e,t){const n=hwe(e,t,0);return typeof n=="number"?null:n}function pwe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=pwe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function pat(e,t){const n=pwe(e,t,0);return n.found?n.distance:-1}function mwe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...mwe(i,`${t}-${s}`))}),n}function VY(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>VY(n,`${t}-${r}`))}}async function mat(e,t,n,r,i,s,o){const a=k0(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,reactiveAnswers:{},reactiveProvenance:null,otherTexts:{},metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=uat({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setreactiveAnswers:(p,m)=>{p.reactiveAnswers=m.payload},setreactiveProvenance:(p,m)=>{p.reactiveProvenance=m.payload},setOtherText:(p,m)=>{p.otherTexts[m.payload.key]=m.payload.value},resetOtherText:p=>{p.otherTexts={}},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:g,questionKey:b,val:y}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[b]:y}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var g;if(m.payload){const{responseId:b,questionKey:y,value:x,isChecked:w,choiceOptions:S}=m.payload,C=((g=p.matrixAnswers[b])==null?void 0:g[y])??"";let R="";w?C.length>0?R=[...C.split("|"),x].sort((I,O)=>S.map(M=>M.value).indexOf(I)-S.map(M=>M.value).indexOf(O)).join("|"):R=`${x}`:R=C.split("|").filter(I=>I!==x).join("|"),p.matrixAnswers={...p.matrixAnswers,[b]:{...p.matrixAnswers[b],[y]:R}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{if(p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),Object.keys(m.values).length>0){const g=p.trialValidation[m.identifier][m.location].values;p.trialValidation[m.identifier][m.location]={valid:m.status,values:{...g,...m.values}}}m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:b,startTime:y,endTime:x,provenanceGraph:w,windowEvents:S,timedOut:C,incorrectAnswers:R,helpButtonClickedCount:I}=m;p.answers[g]={incorrectAnswers:R,answer:b,startTime:y,endTime:x,provenanceGraph:w,windowEvents:S,timedOut:C,helpButtonClickedCount:I}},incrementHelpCounter(p,{payload:m}){const{identifier:g}=m;p.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:b,question:y}=m;p.answers[y].incorrectAnswers||(p.answers[y].incorrectAnswers={}),p.answers[y].incorrectAnswers[g]||(p.answers[y].incorrectAnswers[g]={id:g,value:[]}),p.answers[y].incorrectAnswers[g].value.push(b)}}});return{store:tat({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const gwe=B.createContext(null);function Al(){return B.useContext(gwe).actions}const bc=J_e,Ai=xot;function gat(e){return Ai(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const yat=uwe(e=>e.sequence,e=>k0(e));function HY(){return Ai(yat)}var zP={exports:{}},VP={exports:{}},vat=VP.exports,aoe;function mi(){return aoe||(aoe=1,function(e,t){(function(n,r){e.exports=r()})(vat,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof va<"u"&&va.crypto&&(s=va.crypto),!s&&typeof P3=="function")try{s=sbe}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function y(){}return function(x){var w;return y.prototype=x,w=new y,y.prototype=null,w}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(y){var x=a(this);return y&&x.mixIn(y),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var x in y)y.hasOwnProperty(x)&&(this[x]=y[x]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(y,x){y=this.words=y||[],x!=i?this.sigBytes=x:this.sigBytes=y.length*4},toString:function(y){return(y||h).stringify(this)},concat:function(y){var x=this.words,w=y.words,S=this.sigBytes,C=y.sigBytes;if(this.clamp(),S%4)for(var R=0;R<C;R++){var I=w[R>>>2]>>>24-R%4*8&255;x[S+R>>>2]|=I<<24-(S+R)%4*8}else for(var O=0;O<C;O+=4)x[S+O>>>2]=w[O>>>2];return this.sigBytes+=C,this},clamp:function(){var y=this.words,x=this.sigBytes;y[x>>>2]&=4294967295<<32-x%4*8,y.length=r.ceil(x/4)},clone:function(){var y=c.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var x=[],w=0;w<y;w+=4)x.push(o());return new f.init(x,y)}}),d=u.enc={},h=d.Hex={stringify:function(y){for(var x=y.words,w=y.sigBytes,S=[],C=0;C<w;C++){var R=x[C>>>2]>>>24-C%4*8&255;S.push((R>>>4).toString(16)),S.push((R&15).toString(16))}return S.join("")},parse:function(y){for(var x=y.length,w=[],S=0;S<x;S+=2)w[S>>>3]|=parseInt(y.substr(S,2),16)<<24-S%8*4;return new f.init(w,x/2)}},p=d.Latin1={stringify:function(y){for(var x=y.words,w=y.sigBytes,S=[],C=0;C<w;C++){var R=x[C>>>2]>>>24-C%4*8&255;S.push(String.fromCharCode(R))}return S.join("")},parse:function(y){for(var x=y.length,w=[],S=0;S<x;S++)w[S>>>2]|=(y.charCodeAt(S)&255)<<24-S%4*8;return new f.init(w,x)}},m=d.Utf8={stringify:function(y){try{return decodeURIComponent(escape(p.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return p.parse(unescape(encodeURIComponent(y)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=m.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var x,w=this._data,S=w.words,C=w.sigBytes,R=this.blockSize,I=R*4,O=C/I;y?O=r.ceil(O):O=r.max((O|0)-this._minBufferSize,0);var M=O*R,L=r.min(M*4,C);if(M){for(var V=0;V<M;V+=R)this._doProcessBlock(S,V);x=S.splice(0,M),w.sigBytes-=L}return new f.init(x,L)},clone:function(){var y=c.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(y){return function(x,w){return new y.init(w).finalize(x)}},_createHmacHelper:function(y){return function(x,w){return new b.HMAC.init(y,w).finalize(x)}}});var b=u.algo={};return u}(Math);return n})}(VP)),VP.exports}var HP={exports:{}},bat=HP.exports,uoe;function rM(){return uoe||(uoe=1,function(e,t){(function(n,r){e.exports=r(mi())})(bat,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(HP)),HP.exports}var qP={exports:{}},xat=qP.exports,loe;function _at(){return loe||(loe=1,function(e,t){(function(n,r){e.exports=r(mi())})(xat,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(qP)),qP.exports}var WP={exports:{}},wat=WP.exports,coe;function Eat(){return coe||(coe=1,function(e,t){(function(n,r){e.exports=r(mi())})(wat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(WP)),WP.exports}var GP={exports:{}},Sat=GP.exports,foe;function Uw(){return foe||(foe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Sat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,b=p<<16|m<<8|g,y=0;y<4&&h+y*.75<c;y++)d.push(f.charAt(b>>>6*(3-y)&63));var x=f.charAt(64);if(x)for(;d.length%4;)d.push(x);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(GP)),GP.exports}var YP={exports:{}},Tat=YP.exports,doe;function Cat(){return doe||(doe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Tat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,b=c[p+2>>>2]>>>24-(p+2)%4*8&255,y=m<<16|g<<8|b,x=0;x<4&&p+x*.75<f;x++)h.push(d.charAt(y>>>6*(3-x)&63));var w=d.charAt(64);if(w)for(;h.length%4;)h.push(w);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(YP)),YP.exports}var KP={exports:{}},Aat=KP.exports,hoe;function zw(){return hoe||(hoe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Aat,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var b=0;b<16;b++){var y=g+b,x=m[y];m[y]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var w=this._hash.words,S=m[g+0],C=m[g+1],R=m[g+2],I=m[g+3],O=m[g+4],M=m[g+5],L=m[g+6],V=m[g+7],D=m[g+8],j=m[g+9],z=m[g+10],G=m[g+11],ee=m[g+12],ne=m[g+13],ue=m[g+14],X=m[g+15],W=w[0],te=w[1],q=w[2],J=w[3];W=f(W,te,q,J,S,7,l[0]),J=f(J,W,te,q,C,12,l[1]),q=f(q,J,W,te,R,17,l[2]),te=f(te,q,J,W,I,22,l[3]),W=f(W,te,q,J,O,7,l[4]),J=f(J,W,te,q,M,12,l[5]),q=f(q,J,W,te,L,17,l[6]),te=f(te,q,J,W,V,22,l[7]),W=f(W,te,q,J,D,7,l[8]),J=f(J,W,te,q,j,12,l[9]),q=f(q,J,W,te,z,17,l[10]),te=f(te,q,J,W,G,22,l[11]),W=f(W,te,q,J,ee,7,l[12]),J=f(J,W,te,q,ne,12,l[13]),q=f(q,J,W,te,ue,17,l[14]),te=f(te,q,J,W,X,22,l[15]),W=d(W,te,q,J,C,5,l[16]),J=d(J,W,te,q,L,9,l[17]),q=d(q,J,W,te,G,14,l[18]),te=d(te,q,J,W,S,20,l[19]),W=d(W,te,q,J,M,5,l[20]),J=d(J,W,te,q,z,9,l[21]),q=d(q,J,W,te,X,14,l[22]),te=d(te,q,J,W,O,20,l[23]),W=d(W,te,q,J,j,5,l[24]),J=d(J,W,te,q,ue,9,l[25]),q=d(q,J,W,te,I,14,l[26]),te=d(te,q,J,W,D,20,l[27]),W=d(W,te,q,J,ne,5,l[28]),J=d(J,W,te,q,R,9,l[29]),q=d(q,J,W,te,V,14,l[30]),te=d(te,q,J,W,ee,20,l[31]),W=h(W,te,q,J,M,4,l[32]),J=h(J,W,te,q,D,11,l[33]),q=h(q,J,W,te,G,16,l[34]),te=h(te,q,J,W,ue,23,l[35]),W=h(W,te,q,J,C,4,l[36]),J=h(J,W,te,q,O,11,l[37]),q=h(q,J,W,te,V,16,l[38]),te=h(te,q,J,W,z,23,l[39]),W=h(W,te,q,J,ne,4,l[40]),J=h(J,W,te,q,S,11,l[41]),q=h(q,J,W,te,I,16,l[42]),te=h(te,q,J,W,L,23,l[43]),W=h(W,te,q,J,j,4,l[44]),J=h(J,W,te,q,ee,11,l[45]),q=h(q,J,W,te,X,16,l[46]),te=h(te,q,J,W,R,23,l[47]),W=p(W,te,q,J,S,6,l[48]),J=p(J,W,te,q,V,10,l[49]),q=p(q,J,W,te,ue,15,l[50]),te=p(te,q,J,W,M,21,l[51]),W=p(W,te,q,J,ee,6,l[52]),J=p(J,W,te,q,I,10,l[53]),q=p(q,J,W,te,z,15,l[54]),te=p(te,q,J,W,C,21,l[55]),W=p(W,te,q,J,D,6,l[56]),J=p(J,W,te,q,X,10,l[57]),q=p(q,J,W,te,L,15,l[58]),te=p(te,q,J,W,ne,21,l[59]),W=p(W,te,q,J,O,6,l[60]),J=p(J,W,te,q,G,10,l[61]),q=p(q,J,W,te,R,15,l[62]),te=p(te,q,J,W,j,21,l[63]),w[0]=w[0]+W|0,w[1]=w[1]+te|0,w[2]=w[2]+q|0,w[3]=w[3]+J|0},_doFinalize:function(){var m=this._data,g=m.words,b=this._nDataBytes*8,y=m.sigBytes*8;g[y>>>5]|=128<<24-y%32;var x=r.floor(b/4294967296),w=b;g[(y+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,g[(y+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var S=this._hash,C=S.words,R=0;R<4;R++){var I=C[R];C[R]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}return S},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,b,y,x,w,S){var C=m+(g&b|~g&y)+x+S;return(C<<w|C>>>32-w)+g}function d(m,g,b,y,x,w,S){var C=m+(g&y|b&~y)+x+S;return(C<<w|C>>>32-w)+g}function h(m,g,b,y,x,w,S){var C=m+(g^b^y)+x+S;return(C<<w|C>>>32-w)+g}function p(m,g,b,y,x,w,S){var C=m+(b^(g|~y))+x+S;return(C<<w|C>>>32-w)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(KP)),KP.exports}var XP={exports:{}},kat=XP.exports,poe;function ywe(){return poe||(poe=1,function(e,t){(function(n,r){e.exports=r(mi())})(kat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],b=d[4],y=0;y<80;y++){if(y<16)u[y]=c[f+y]|0;else{var x=u[y-3]^u[y-8]^u[y-14]^u[y-16];u[y]=x<<1|x>>>31}var w=(h<<5|h>>>27)+b+u[y];y<20?w+=(p&m|~p&g)+1518500249:y<40?w+=(p^m^g)+1859775393:y<60?w+=(p&m|p&g|m&g)-1894007588:w+=(p^m^g)-899497514,b=g,g=m,m=p<<30|p>>>2,p=h,h=w}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+b|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(XP)),XP.exports}var QP={exports:{}},Rat=QP.exports,moe;function qY(){return moe||(moe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Rat,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(b){for(var y=r.sqrt(b),x=2;x<=y;x++)if(!(b%x))return!1;return!0}function p(b){return(b-(b|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(l[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],b=m[1],y=m[2],x=m[3],w=m[4],S=m[5],C=m[6],R=m[7],I=0;I<64;I++){if(I<16)f[I]=h[p+I]|0;else{var O=f[I-15],M=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,L=f[I-2],V=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;f[I]=M+f[I-7]+V+f[I-16]}var D=w&S^~w&C,j=g&b^g&y^b&y,z=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),G=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),ee=R+G+D+c[I]+f[I],ne=z+j;R=C,C=S,S=w,w=x+ee|0,x=y,y=b,b=g,g=ee+ne|0}m[0]=m[0]+g|0,m[1]=m[1]+b|0,m[2]=m[2]+y|0,m[3]=m[3]+x|0,m[4]=m[4]+w|0,m[5]=m[5]+S|0,m[6]=m[6]+C|0,m[7]=m[7]+R|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(QP)),QP.exports}var JP={exports:{}},Iat=JP.exports,goe;function Pat(){return goe||(goe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),qY())})(Iat,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(JP)),JP.exports}var ZP={exports:{}},Nat=ZP.exports,yoe;function vwe(){return yoe||(yoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),rM())})(Nat,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,b=g[0],y=g[1],x=g[2],w=g[3],S=g[4],C=g[5],R=g[6],I=g[7],O=b.high,M=b.low,L=y.high,V=y.low,D=x.high,j=x.low,z=w.high,G=w.low,ee=S.high,ne=S.low,ue=C.high,X=C.low,W=R.high,te=R.low,q=I.high,J=I.low,oe=O,de=M,ce=L,pe=V,Ee=D,Ae=j,ge=z,me=G,Oe=ee,Me=ne,Ye=ue,lt=X,We=W,nt=te,yt=q,_t=J,It=0;It<80;It++){var Et,Ke,Lt=d[It];if(It<16)Ke=Lt.high=p[m+It*2]|0,Et=Lt.low=p[m+It*2+1]|0;else{var sn=d[It-15],Fe=sn.high,Qe=sn.low,wt=(Fe>>>1|Qe<<31)^(Fe>>>8|Qe<<24)^Fe>>>7,Vt=(Qe>>>1|Fe<<31)^(Qe>>>8|Fe<<24)^(Qe>>>7|Fe<<25),Wt=d[It-2],bn=Wt.high,Dn=Wt.low,Zn=(bn>>>19|Dn<<13)^(bn<<3|Dn>>>29)^bn>>>6,wr=(Dn>>>19|bn<<13)^(Dn<<3|bn>>>29)^(Dn>>>6|bn<<26),Hn=d[It-7],nr=Hn.high,Ei=Hn.low,Dr=d[It-16],Co=Dr.high,Ji=Dr.low;Et=Vt+Ei,Ke=wt+nr+(Et>>>0<Vt>>>0?1:0),Et=Et+wr,Ke=Ke+Zn+(Et>>>0<wr>>>0?1:0),Et=Et+Ji,Ke=Ke+Co+(Et>>>0<Ji>>>0?1:0),Lt.high=Ke,Lt.low=Et}var Di=Oe&Ye^~Oe&We,Zi=Me&lt^~Me&nt,ei=oe&ce^oe&Ee^ce&Ee,mo=de&pe^de&Ae^pe&Ae,Gu=(oe>>>28|de<<4)^(oe<<30|de>>>2)^(oe<<25|de>>>7),Sa=(de>>>28|oe<<4)^(de<<30|oe>>>2)^(de<<25|oe>>>7),Ta=(Oe>>>14|Me<<18)^(Oe>>>18|Me<<14)^(Oe<<23|Me>>>9),Kr=(Me>>>14|Oe<<18)^(Me>>>18|Oe<<14)^(Me<<23|Oe>>>9),Oi=f[It],si=Oi.high,Zs=Oi.low,Xr=_t+Kr,Hi=yt+Ta+(Xr>>>0<_t>>>0?1:0),Xr=Xr+Zi,Hi=Hi+Di+(Xr>>>0<Zi>>>0?1:0),Xr=Xr+Zs,Hi=Hi+si+(Xr>>>0<Zs>>>0?1:0),Xr=Xr+Et,Hi=Hi+Ke+(Xr>>>0<Et>>>0?1:0),eo=Sa+mo,go=Gu+ei+(eo>>>0<Sa>>>0?1:0);yt=We,_t=nt,We=Ye,nt=lt,Ye=Oe,lt=Me,Me=me+Xr|0,Oe=ge+Hi+(Me>>>0<me>>>0?1:0)|0,ge=Ee,me=Ae,Ee=ce,Ae=pe,ce=oe,pe=de,de=Xr+eo|0,oe=Hi+go+(de>>>0<Xr>>>0?1:0)|0}M=b.low=M+de,b.high=O+oe+(M>>>0<de>>>0?1:0),V=y.low=V+pe,y.high=L+ce+(V>>>0<pe>>>0?1:0),j=x.low=j+Ae,x.high=D+Ee+(j>>>0<Ae>>>0?1:0),G=w.low=G+me,w.high=z+ge+(G>>>0<me>>>0?1:0),ne=S.low=ne+Me,S.high=ee+Oe+(ne>>>0<Me>>>0?1:0),X=C.low=X+lt,C.high=ue+Ye+(X>>>0<lt>>>0?1:0),te=R.low=te+nt,R.high=W+We+(te>>>0<nt>>>0?1:0),J=I.low=J+_t,I.high=q+yt+(J>>>0<_t>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,b=p.sigBytes*8;m[b>>>5]|=128<<24-b%32,m[(b+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(b+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var y=this._hash.toX32();return y},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(ZP)),ZP.exports}var eN={exports:{}},Dat=eN.exports,voe;function Oat(){return voe||(voe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),rM(),vwe())})(Dat,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(eN)),eN.exports}var tN={exports:{}},Mat=tN.exports,boe;function Lat(){return boe||(boe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),rM())})(Mat,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,b=0,y=0;y<24;y++){f[g+5*b]=(y+1)*(y+2)/2%64;var x=b%5,w=(2*g+3*b)%5;g=x,b=w}for(var g=0;g<5;g++)for(var b=0;b<5;b++)d[g+5*b]=b+(2*g+3*b)%5*5;for(var S=1,C=0;C<24;C++){for(var R=0,I=0,O=0;O<7;O++){if(S&1){var M=(1<<O)-1;M<32?I^=1<<M:R^=1<<M-32}S&128?S=S<<1^113:S<<=1}h[C]=l.create(R,I)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],b=0;b<25;b++)g[b]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,b){for(var y=this._state,x=this.blockSize/2,w=0;w<x;w++){var S=g[b+2*w],C=g[b+2*w+1];S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360;var R=y[w];R.high^=C,R.low^=S}for(var I=0;I<24;I++){for(var O=0;O<5;O++){for(var M=0,L=0,V=0;V<5;V++){var R=y[O+5*V];M^=R.high,L^=R.low}var D=p[O];D.high=M,D.low=L}for(var O=0;O<5;O++)for(var j=p[(O+4)%5],z=p[(O+1)%5],G=z.high,ee=z.low,M=j.high^(G<<1|ee>>>31),L=j.low^(ee<<1|G>>>31),V=0;V<5;V++){var R=y[O+5*V];R.high^=M,R.low^=L}for(var ne=1;ne<25;ne++){var M,L,R=y[ne],ue=R.high,X=R.low,W=f[ne];W<32?(M=ue<<W|X>>>32-W,L=X<<W|ue>>>32-W):(M=X<<W-32|ue>>>64-W,L=ue<<W-32|X>>>64-W);var te=p[d[ne]];te.high=M,te.low=L}var q=p[0],J=y[0];q.high=J.high,q.low=J.low;for(var O=0;O<5;O++)for(var V=0;V<5;V++){var ne=O+5*V,R=y[ne],oe=p[ne],de=p[(O+1)%5+5*V],ce=p[(O+2)%5+5*V];R.high=oe.high^~de.high&ce.high,R.low=oe.low^~de.low&ce.low}var R=y[0],pe=h[I];R.high^=pe.high,R.low^=pe.low}},_doFinalize:function(){var g=this._data,b=g.words;this._nDataBytes*8;var y=g.sigBytes*8,x=this.blockSize*32;b[y>>>5]|=1<<24-y%32,b[(r.ceil((y+1)/x)*x>>>5)-1]|=128,g.sigBytes=b.length*4,this._process();for(var w=this._state,S=this.cfg.outputLength/8,C=S/8,R=[],I=0;I<C;I++){var O=w[I],M=O.high,L=O.low;M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,R.push(L),R.push(M)}return new o.init(R,S)},clone:function(){for(var g=a.clone.call(this),b=g._state=this._state.slice(0),y=0;y<25;y++)b[y]=b[y].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(tN)),tN.exports}var nN={exports:{}},Fat=nN.exports,xoe;function $at(){return xoe||(xoe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Fat,function(n){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,R){for(var I=0;I<16;I++){var O=R+I,M=C[O];C[O]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}var L=this._hash.words,V=h.words,D=p.words,j=l.words,z=c.words,G=f.words,ee=d.words,ne,ue,X,W,te,q,J,oe,de,ce;q=ne=L[0],J=ue=L[1],oe=X=L[2],de=W=L[3],ce=te=L[4];for(var pe,I=0;I<80;I+=1)pe=ne+C[R+j[I]]|0,I<16?pe+=g(ue,X,W)+V[0]:I<32?pe+=b(ue,X,W)+V[1]:I<48?pe+=y(ue,X,W)+V[2]:I<64?pe+=x(ue,X,W)+V[3]:pe+=w(ue,X,W)+V[4],pe=pe|0,pe=S(pe,G[I]),pe=pe+te|0,ne=te,te=W,W=S(X,10),X=ue,ue=pe,pe=q+C[R+z[I]]|0,I<16?pe+=w(J,oe,de)+D[0]:I<32?pe+=x(J,oe,de)+D[1]:I<48?pe+=y(J,oe,de)+D[2]:I<64?pe+=b(J,oe,de)+D[3]:pe+=g(J,oe,de)+D[4],pe=pe|0,pe=S(pe,ee[I]),pe=pe+ce|0,q=ce,ce=de,de=S(oe,10),oe=J,J=pe;pe=L[1]+X+de|0,L[1]=L[2]+W+ce|0,L[2]=L[3]+te+q|0,L[3]=L[4]+ne+J|0,L[4]=L[0]+ue+oe|0,L[0]=pe},_doFinalize:function(){var C=this._data,R=C.words,I=this._nDataBytes*8,O=C.sigBytes*8;R[O>>>5]|=128<<24-O%32,R[(O+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,C.sigBytes=(R.length+1)*4,this._process();for(var M=this._hash,L=M.words,V=0;V<5;V++){var D=L[V];L[V]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return M},clone:function(){var C=a.clone.call(this);return C._hash=this._hash.clone(),C}});function g(C,R,I){return C^R^I}function b(C,R,I){return C&R|~C&I}function y(C,R,I){return(C|~R)^I}function x(C,R,I){return C&I|R&~I}function w(C,R,I){return C^(R|~I)}function S(C,R){return C<<R|C>>>32-R}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(nN)),nN.exports}var rN={exports:{}},Bat=rN.exports,_oe;function WY(){return _oe||(_oe=1,function(e,t){(function(n,r){e.exports=r(mi())})(Bat,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,b=0;b<f;b++)m[b]^=1549556828,g[b]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(rN)),rN.exports}var iN={exports:{}},jat=iN.exports,woe;function Uat(){return woe||(woe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),qY(),WY())})(jat,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),g=o.create([1]),b=m.words,y=g.words,x=h.keySize,w=h.iterations;b.length<x;){var S=p.update(d).finalize(g);p.reset();for(var C=S.words,R=C.length,I=S,O=1;O<w;O++){I=p.finalize(I),p.reset();for(var M=I.words,L=0;L<R;L++)C[L]^=M[L]}m.concat(S),y[0]++}return m.sigBytes=x*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(iN)),iN.exports}var sN={exports:{}},zat=sN.exports,Eoe;function Qb(){return Eoe||(Eoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),ywe(),WY())})(zat,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,b=h.keySize,y=h.iterations;g.length<b;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var x=1;x<y;x++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=b*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(sN)),sN.exports}var oN={exports:{}},Vat=oN.exports,Soe;function Vu(){return Soe||(Soe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Qb())})(Vat,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(M,L){return this.create(this._ENC_XFORM_MODE,M,L)},createDecryptor:function(M,L){return this.create(this._DEC_XFORM_MODE,M,L)},init:function(M,L,V){this.cfg=this.cfg.extend(V),this._xformMode=M,this._key=L,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(M){return this._append(M),this._process()},finalize:function(M){M&&this._append(M);var L=this._doFinalize();return L},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function M(L){return typeof L=="string"?O:C}return function(L){return{encrypt:function(V,D,j){return M(D).encrypt(L,V,D,j)},decrypt:function(V,D,j){return M(D).decrypt(L,V,D,j)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var M=this._process(!0);return M},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(M,L){return this.Encryptor.create(M,L)},createDecryptor:function(M,L){return this.Decryptor.create(M,L)},init:function(M,L){this._cipher=M,this._iv=L}}),g=p.CBC=function(){var M=m.extend();M.Encryptor=M.extend({processBlock:function(V,D){var j=this._cipher,z=j.blockSize;L.call(this,V,D,z),j.encryptBlock(V,D),this._prevBlock=V.slice(D,D+z)}}),M.Decryptor=M.extend({processBlock:function(V,D){var j=this._cipher,z=j.blockSize,G=V.slice(D,D+z);j.decryptBlock(V,D),L.call(this,V,D,z),this._prevBlock=G}});function L(V,D,j){var z,G=this._iv;G?(z=G,this._iv=r):z=this._prevBlock;for(var ee=0;ee<j;ee++)V[D+ee]^=z[ee]}return M}(),b=i.pad={},y=b.Pkcs7={pad:function(M,L){for(var V=L*4,D=V-M.sigBytes%V,j=D<<24|D<<16|D<<8|D,z=[],G=0;G<D;G+=4)z.push(j);var ee=a.create(z,D);M.concat(ee)},unpad:function(M){var L=M.words[M.sigBytes-1>>>2]&255;M.sigBytes-=L}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:y}),reset:function(){var M;h.reset.call(this);var L=this.cfg,V=L.iv,D=L.mode;this._xformMode==this._ENC_XFORM_MODE?M=D.createEncryptor:(M=D.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==M?this._mode.init(this,V&&V.words):(this._mode=M.call(D,this,V&&V.words),this._mode.__creator=M)},_doProcessBlock:function(M,L){this._mode.processBlock(M,L)},_doFinalize:function(){var M,L=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(L.pad(this._data,this.blockSize),M=this._process(!0)):(M=this._process(!0),L.unpad(M)),M},blockSize:128/32});var x=s.CipherParams=o.extend({init:function(M){this.mixIn(M)},toString:function(M){return(M||this.formatter).stringify(this)}}),w=i.format={},S=w.OpenSSL={stringify:function(M){var L,V=M.ciphertext,D=M.salt;return D?L=a.create([1398893684,1701076831]).concat(D).concat(V):L=V,L.toString(c)},parse:function(M){var L,V=c.parse(M),D=V.words;return D[0]==1398893684&&D[1]==1701076831&&(L=a.create(D.slice(2,4)),D.splice(0,4),V.sigBytes-=16),x.create({ciphertext:V,salt:L})}},C=s.SerializableCipher=o.extend({cfg:o.extend({format:S}),encrypt:function(M,L,V,D){D=this.cfg.extend(D);var j=M.createEncryptor(V,D),z=j.finalize(L),G=j.cfg;return x.create({ciphertext:z,key:V,iv:G.iv,algorithm:M,mode:G.mode,padding:G.padding,blockSize:M.blockSize,formatter:D.format})},decrypt:function(M,L,V,D){D=this.cfg.extend(D),L=this._parse(L,D.format);var j=M.createDecryptor(V,D).finalize(L.ciphertext);return j},_parse:function(M,L){return typeof M=="string"?L.parse(M,this):M}}),R=i.kdf={},I=R.OpenSSL={execute:function(M,L,V,D,j){if(D||(D=a.random(64/8)),j)var z=d.create({keySize:L+V,hasher:j}).compute(M,D);else var z=d.create({keySize:L+V}).compute(M,D);var G=a.create(z.words.slice(L),V*4);return z.sigBytes=L*4,x.create({key:z,iv:G,salt:D})}},O=s.PasswordBasedCipher=C.extend({cfg:C.cfg.extend({kdf:I}),encrypt:function(M,L,V,D){D=this.cfg.extend(D);var j=D.kdf.execute(V,M.keySize,M.ivSize,D.salt,D.hasher);D.iv=j.iv;var z=C.encrypt.call(this,M,L,j.key,D);return z.mixIn(j),z},decrypt:function(M,L,V,D){D=this.cfg.extend(D),L=this._parse(L,D.format);var j=D.kdf.execute(V,M.keySize,M.ivSize,L.salt,D.hasher);D.iv=j.iv;var z=C.decrypt.call(this,M,L,j.key,D);return z}})}()})}(oN)),oN.exports}var aN={exports:{}},Hat=aN.exports,Toe;function qat(){return Toe||(Toe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(Hat,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(aN)),aN.exports}var uN={exports:{}},Wat=uN.exports,Coe;function Gat(){return Coe||(Coe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(Wat,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(uN)),uN.exports}var lN={exports:{}},Yat=lN.exports,Aoe;function Kat(){return Aoe||(Aoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(Yat,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(lN)),lN.exports}var cN={exports:{}},Xat=cN.exports,koe;function Qat(){return koe||(koe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(Xat,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(cN)),cN.exports}var fN={exports:{}},Jat=fN.exports,Roe;function Zat(){return Roe||(Roe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(Jat,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(fN)),fN.exports}var dN={exports:{}},eut=dN.exports,Ioe;function tut(){return Ioe||(Ioe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(eut,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(dN)),dN.exports}var hN={exports:{}},nut=hN.exports,Poe;function rut(){return Poe||(Poe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(nut,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(hN)),hN.exports}var pN={exports:{}},iut=pN.exports,Noe;function sut(){return Noe||(Noe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(iut,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(pN)),pN.exports}var mN={exports:{}},out=mN.exports,Doe;function aut(){return Doe||(Doe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(out,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(mN)),mN.exports}var gN={exports:{}},uut=gN.exports,Ooe;function lut(){return Ooe||(Ooe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(uut,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(gN)),gN.exports}var yN={exports:{}},cut=yN.exports,Moe;function fut(){return Moe||(Moe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Vu())})(cut,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(yN)),yN.exports}var vN={exports:{}},dut=vN.exports,Loe;function hut(){return Loe||(Loe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Uw(),zw(),Qb(),Vu())})(dut,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var x=[],w=0;w<256;w++)w<128?x[w]=w<<1:x[w]=w<<1^283;for(var S=0,C=0,w=0;w<256;w++){var R=C^C<<1^C<<2^C<<3^C<<4;R=R>>>8^R&255^99,a[S]=R,u[R]=S;var I=x[S],O=x[I],M=x[O],L=x[R]*257^R*16843008;l[S]=L<<24|L>>>8,c[S]=L<<16|L>>>16,f[S]=L<<8|L>>>24,d[S]=L;var L=M*16843009^O*65537^I*257^S*16843008;h[R]=L<<24|L>>>8,p[R]=L<<16|L>>>16,m[R]=L<<8|L>>>24,g[R]=L,S?(S=I^x[x[x[M^I]]],C^=x[x[C]]):S=C=1}})();var b=[0,1,2,4,8,16,32,64,128,27,54],y=o.AES=s.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,S=w.words,C=w.sigBytes/4,R=this._nRounds=C+6,I=(R+1)*4,O=this._keySchedule=[],M=0;M<I;M++)M<C?O[M]=S[M]:(x=O[M-1],M%C?C>6&&M%C==4&&(x=a[x>>>24]<<24|a[x>>>16&255]<<16|a[x>>>8&255]<<8|a[x&255]):(x=x<<8|x>>>24,x=a[x>>>24]<<24|a[x>>>16&255]<<16|a[x>>>8&255]<<8|a[x&255],x^=b[M/C|0]<<24),O[M]=O[M-C]^x);for(var L=this._invKeySchedule=[],V=0;V<I;V++){var M=I-V;if(V%4)var x=O[M];else var x=O[M-4];V<4||M<=4?L[V]=x:L[V]=h[a[x>>>24]]^p[a[x>>>16&255]]^m[a[x>>>8&255]]^g[a[x&255]]}}},encryptBlock:function(x,w){this._doCryptBlock(x,w,this._keySchedule,l,c,f,d,a)},decryptBlock:function(x,w){var S=x[w+1];x[w+1]=x[w+3],x[w+3]=S,this._doCryptBlock(x,w,this._invKeySchedule,h,p,m,g,u);var S=x[w+1];x[w+1]=x[w+3],x[w+3]=S},_doCryptBlock:function(x,w,S,C,R,I,O,M){for(var L=this._nRounds,V=x[w]^S[0],D=x[w+1]^S[1],j=x[w+2]^S[2],z=x[w+3]^S[3],G=4,ee=1;ee<L;ee++){var ne=C[V>>>24]^R[D>>>16&255]^I[j>>>8&255]^O[z&255]^S[G++],ue=C[D>>>24]^R[j>>>16&255]^I[z>>>8&255]^O[V&255]^S[G++],X=C[j>>>24]^R[z>>>16&255]^I[V>>>8&255]^O[D&255]^S[G++],W=C[z>>>24]^R[V>>>16&255]^I[D>>>8&255]^O[j&255]^S[G++];V=ne,D=ue,j=X,z=W}var ne=(M[V>>>24]<<24|M[D>>>16&255]<<16|M[j>>>8&255]<<8|M[z&255])^S[G++],ue=(M[D>>>24]<<24|M[j>>>16&255]<<16|M[z>>>8&255]<<8|M[V&255])^S[G++],X=(M[j>>>24]<<24|M[z>>>16&255]<<16|M[V>>>8&255]<<8|M[D&255])^S[G++],W=(M[z>>>24]<<24|M[V>>>16&255]<<16|M[D>>>8&255]<<8|M[j&255])^S[G++];x[w]=ne,x[w+1]=ue,x[w+2]=X,x[w+3]=W},keySize:256/32});r.AES=s._createHelper(y)}(),n.AES})}(vN)),vN.exports}var bN={exports:{}},put=bN.exports,Foe;function mut(){return Foe||(Foe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Uw(),zw(),Qb(),Vu())})(put,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var b=this._key,y=b.words,x=[],w=0;w<56;w++){var S=u[w]-1;x[w]=y[S>>>5]>>>31-S%32&1}for(var C=this._subKeys=[],R=0;R<16;R++){for(var I=C[R]=[],O=c[R],w=0;w<24;w++)I[w/6|0]|=x[(l[w]-1+O)%28]<<31-w%6,I[4+(w/6|0)]|=x[28+(l[w+24]-1+O)%28]<<31-w%6;I[0]=I[0]<<1|I[0]>>>31;for(var w=1;w<7;w++)I[w]=I[w]>>>(w-1)*4+3;I[7]=I[7]<<5|I[7]>>>27}for(var M=this._invSubKeys=[],w=0;w<16;w++)M[w]=C[15-w]},encryptBlock:function(b,y){this._doCryptBlock(b,y,this._subKeys)},decryptBlock:function(b,y){this._doCryptBlock(b,y,this._invSubKeys)},_doCryptBlock:function(b,y,x){this._lBlock=b[y],this._rBlock=b[y+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var w=0;w<16;w++){for(var S=x[w],C=this._lBlock,R=this._rBlock,I=0,O=0;O<8;O++)I|=f[O][((R^S[O])&d[O])>>>0];this._lBlock=R,this._rBlock=C^I}var M=this._lBlock;this._lBlock=this._rBlock,this._rBlock=M,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),b[y]=this._lBlock,b[y+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(b,y){var x=(this._lBlock>>>b^this._rBlock)&y;this._rBlock^=x,this._lBlock^=x<<b}function m(b,y){var x=(this._rBlock>>>b^this._lBlock)&y;this._lBlock^=x,this._rBlock^=x<<b}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var b=this._key,y=b.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=y.slice(0,2),w=y.length<4?y.slice(0,2):y.slice(2,4),S=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=h.createEncryptor(s.create(x)),this._des2=h.createEncryptor(s.create(w)),this._des3=h.createEncryptor(s.create(S))},encryptBlock:function(b,y){this._des1.encryptBlock(b,y),this._des2.decryptBlock(b,y),this._des3.encryptBlock(b,y)},decryptBlock:function(b,y){this._des3.decryptBlock(b,y),this._des2.encryptBlock(b,y),this._des1.decryptBlock(b,y)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(bN)),bN.exports}var xN={exports:{}},gut=xN.exports,$oe;function yut(){return $oe||($oe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Uw(),zw(),Qb(),Vu())})(gut,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,b=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+b)%256;var y=h[p];h[p]=h[m],h[m]=y}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(xN)),xN.exports}var _N={exports:{}},vut=_N.exports,Boe;function but(){return Boe||(Boe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Uw(),zw(),Qb(),Vu())})(vut,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var b=h.words,y=b[0],x=b[1],w=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,S=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,C=w>>>16|S&4294901760,R=S<<16|w&65535;g[0]^=w,g[1]^=C,g[2]^=S,g[3]^=R,g[4]^=w,g[5]^=C,g[6]^=S,g[7]^=R;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,b=m>>>16,y=((g*g>>>17)+g*b>>>15)+b*b,x=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=y^x}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(_N)),_N.exports}var wN={exports:{}},xut=wN.exports,joe;function _ut(){return joe||(joe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Uw(),zw(),Qb(),Vu())})(xut,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var b=h.words,y=b[0],x=b[1],w=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,S=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,C=w>>>16|S&4294901760,R=S<<16|w&65535;m[0]^=w,m[1]^=C,m[2]^=S,m[3]^=R,m[4]^=w,m[5]^=C,m[6]^=S,m[7]^=R;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,b=m>>>16,y=((g*g>>>17)+g*b>>>15)+b*b,x=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=y^x}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(wN)),wN.exports}var EN={exports:{}},wut=EN.exports,Uoe;function Eut(){return Uoe||(Uoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),Uw(),zw(),Qb(),Vu())})(wut,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,b){let y=b>>24&255,x=b>>16&255,w=b>>8&255,S=b&255,C=g.sbox[0][y]+g.sbox[1][x];return C=C^g.sbox[2][w],C=C+g.sbox[3][S],C}function d(g,b,y){let x=b,w=y,S;for(let C=0;C<a;++C)x=x^g.pbox[C],w=f(g,x)^w,S=x,x=w,w=S;return S=x,x=w,w=S,w=w^g.pbox[a],x=x^g.pbox[a+1],{left:x,right:w}}function h(g,b,y){let x=b,w=y,S;for(let C=a+1;C>1;--C)x=x^g.pbox[C],w=f(g,x)^w,S=x,x=w,w=S;return S=x,x=w,w=S,w=w^g.pbox[1],x=x^g.pbox[0],{left:x,right:w}}function p(g,b,y){for(let R=0;R<4;R++){g.sbox[R]=[];for(let I=0;I<256;I++)g.sbox[R][I]=l[R][I]}let x=0;for(let R=0;R<a+2;R++)g.pbox[R]=u[R]^b[x],x++,x>=y&&(x=0);let w=0,S=0,C=0;for(let R=0;R<a+2;R+=2)C=d(g,w,S),w=C.left,S=C.right,g.pbox[R]=w,g.pbox[R+1]=S;for(let R=0;R<4;R++)for(let I=0;I<256;I+=2)C=d(g,w,S),w=C.left,S=C.right,g.sbox[R][I]=w,g.sbox[R][I+1]=S;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,b=g.words,y=g.sigBytes/4;p(c,b,y)}},encryptBlock:function(g,b){var y=d(c,g[b],g[b+1]);g[b]=y.left,g[b+1]=y.right},decryptBlock:function(g,b){var y=h(c,g[b],g[b+1]);g[b]=y.left,g[b+1]=y.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(EN)),EN.exports}var Sut=zP.exports,zoe;function Tut(){return zoe||(zoe=1,function(e,t){(function(n,r,i){e.exports=r(mi(),rM(),_at(),Eat(),Uw(),Cat(),zw(),ywe(),qY(),Pat(),vwe(),Oat(),Lat(),$at(),WY(),Uat(),Qb(),Vu(),qat(),Gat(),Kat(),Qat(),Zat(),tut(),rut(),sut(),aut(),lut(),fut(),hut(),mut(),yut(),but(),_ut(),Eut())})(Sut,function(n){return n})}(zP)),zP.exports}var mz=Tut();function u0(e){const t=mz.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function Cut(e){const t=mz.AES.decrypt(atob(e),"notSecret").toString(mz.enc.Utf8);return parseInt(t,10)}function Vw(){const{studyId:e}=ig();return`${e}`}function mp(){const{index:e}=ig();return e===void 0?0:e.startsWith("reviewer-")||e.startsWith("__")?e:Cut(e)}function B0(){const e=mp(),t=HY();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var D3={exports:{}};D3.exports;var Voe;function Aut(){return Voe||(Voe=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",b="[object Null]",y="[object Object]",x="[object Proxy]",w="[object RegExp]",S="[object Set]",C="[object String]",R="[object Undefined]",I="[object WeakMap]",O="[object ArrayBuffer]",M="[object DataView]",L="[object Float32Array]",V="[object Float64Array]",D="[object Int8Array]",j="[object Int16Array]",z="[object Int32Array]",G="[object Uint8Array]",ee="[object Uint8ClampedArray]",ne="[object Uint16Array]",ue="[object Uint32Array]",X=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,q={};q[L]=q[V]=q[D]=q[j]=q[z]=q[G]=q[ee]=q[ne]=q[ue]=!0,q[a]=q[u]=q[O]=q[c]=q[M]=q[f]=q[d]=q[h]=q[m]=q[g]=q[y]=q[w]=q[S]=q[C]=q[I]=!1;var J=typeof va=="object"&&va&&va.Object===Object&&va,oe=typeof self=="object"&&self&&self.Object===Object&&self,de=J||oe||Function("return this")(),ce=t&&!t.nodeType&&t,pe=ce&&!0&&e&&!e.nodeType&&e,Ee=pe&&pe.exports===ce,Ae=Ee&&J.process,ge=function(){try{var Ce=pe&&pe.require&&pe.require("util").types;return Ce||Ae&&Ae.binding&&Ae.binding("util")}catch{}}(),me=ge&&ge.isTypedArray;function Oe(Ce,Ne,rt){switch(rt.length){case 0:return Ce.call(Ne);case 1:return Ce.call(Ne,rt[0]);case 2:return Ce.call(Ne,rt[0],rt[1]);case 3:return Ce.call(Ne,rt[0],rt[1],rt[2])}return Ce.apply(Ne,rt)}function Me(Ce,Ne){for(var rt=-1,hn=Array(Ce);++rt<Ce;)hn[rt]=Ne(rt);return hn}function Ye(Ce){return function(Ne){return Ce(Ne)}}function lt(Ce,Ne){return Ce==null?void 0:Ce[Ne]}function We(Ce,Ne){return function(rt){return Ce(Ne(rt))}}var nt=Array.prototype,yt=Function.prototype,_t=Object.prototype,It=de["__core-js_shared__"],Et=yt.toString,Ke=_t.hasOwnProperty,Lt=function(){var Ce=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||"");return Ce?"Symbol(src)_1."+Ce:""}(),sn=_t.toString,Fe=Et.call(Object),Qe=RegExp("^"+Et.call(Ke).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=Ee?de.Buffer:void 0,Vt=de.Symbol,Wt=de.Uint8Array;wt&&wt.allocUnsafe;var bn=We(Object.getPrototypeOf,Object),Dn=Object.create,Zn=_t.propertyIsEnumerable,wr=nt.splice,Hn=Vt?Vt.toStringTag:void 0,nr=function(){try{var Ce=Nt(Object,"defineProperty");return Ce({},"",{}),Ce}catch{}}(),Ei=wt?wt.isBuffer:void 0,Dr=Math.max,Co=Date.now,Ji=Nt(de,"Map"),Di=Nt(Object,"create"),Zi=function(){function Ce(){}return function(Ne){if(!Ol(Ne))return{};if(Dn)return Dn(Ne);Ce.prototype=Ne;var rt=new Ce;return Ce.prototype=void 0,rt}}();function ei(Ce){var Ne=-1,rt=Ce==null?0:Ce.length;for(this.clear();++Ne<rt;){var hn=Ce[Ne];this.set(hn[0],hn[1])}}function mo(){this.__data__=Di?Di(null):{},this.size=0}function Gu(Ce){var Ne=this.has(Ce)&&delete this.__data__[Ce];return this.size-=Ne?1:0,Ne}function Sa(Ce){var Ne=this.__data__;if(Di){var rt=Ne[Ce];return rt===r?void 0:rt}return Ke.call(Ne,Ce)?Ne[Ce]:void 0}function Ta(Ce){var Ne=this.__data__;return Di?Ne[Ce]!==void 0:Ke.call(Ne,Ce)}function Kr(Ce,Ne){var rt=this.__data__;return this.size+=this.has(Ce)?0:1,rt[Ce]=Di&&Ne===void 0?r:Ne,this}ei.prototype.clear=mo,ei.prototype.delete=Gu,ei.prototype.get=Sa,ei.prototype.has=Ta,ei.prototype.set=Kr;function Oi(Ce){var Ne=-1,rt=Ce==null?0:Ce.length;for(this.clear();++Ne<rt;){var hn=Ce[Ne];this.set(hn[0],hn[1])}}function si(){this.__data__=[],this.size=0}function Zs(Ce){var Ne=this.__data__,rt=wc(Ne,Ce);if(rt<0)return!1;var hn=Ne.length-1;return rt==hn?Ne.pop():wr.call(Ne,rt,1),--this.size,!0}function Xr(Ce){var Ne=this.__data__,rt=wc(Ne,Ce);return rt<0?void 0:Ne[rt][1]}function Hi(Ce){return wc(this.__data__,Ce)>-1}function eo(Ce,Ne){var rt=this.__data__,hn=wc(rt,Ce);return hn<0?(++this.size,rt.push([Ce,Ne])):rt[hn][1]=Ne,this}Oi.prototype.clear=si,Oi.prototype.delete=Zs,Oi.prototype.get=Xr,Oi.prototype.has=Hi,Oi.prototype.set=eo;function go(Ce){var Ne=-1,rt=Ce==null?0:Ce.length;for(this.clear();++Ne<rt;){var hn=Ce[Ne];this.set(hn[0],hn[1])}}function Jo(){this.size=0,this.__data__={hash:new ei,map:new(Ji||Oi),string:new ei}}function Ca(Ce){var Ne=kt(this,Ce).delete(Ce);return this.size-=Ne?1:0,Ne}function pd(Ce){return kt(this,Ce).get(Ce)}function Hr(Ce){return kt(this,Ce).has(Ce)}function Pl(Ce,Ne){var rt=kt(this,Ce),hn=rt.size;return rt.set(Ce,Ne),this.size+=rt.size==hn?0:1,this}go.prototype.clear=Jo,go.prototype.delete=Ca,go.prototype.get=pd,go.prototype.has=Hr,go.prototype.set=Pl;function bs(Ce){var Ne=this.__data__=new Oi(Ce);this.size=Ne.size}function Ka(){this.__data__=new Oi,this.size=0}function Zo(Ce){var Ne=this.__data__,rt=Ne.delete(Ce);return this.size=Ne.size,rt}function yh(Ce){return this.__data__.get(Ce)}function md(Ce){return this.__data__.has(Ce)}function mf(Ce,Ne){var rt=this.__data__;if(rt instanceof Oi){var hn=rt.__data__;if(!Ji||hn.length<n-1)return hn.push([Ce,Ne]),this.size=++rt.size,this;rt=this.__data__=new go(hn)}return rt.set(Ce,Ne),this.size=rt.size,this}bs.prototype.clear=Ka,bs.prototype.delete=Zo,bs.prototype.get=yh,bs.prototype.has=md,bs.prototype.set=mf;function gf(Ce,Ne){var rt=ko(Ce),hn=!rt&&Mi(Ce),ir=!rt&&!hn&&Aa(Ce),Or=!rt&&!hn&&!ir&&yd(Ce),gi=rt||hn||ir||Or,dn=gi?Me(Ce.length,String):[],Tr=dn.length;for(var Ir in Ce)gi&&(Ir=="length"||ir&&(Ir=="offset"||Ir=="parent")||Or&&(Ir=="buffer"||Ir=="byteLength"||Ir=="byteOffset")||Zt(Ir,Tr))||dn.push(Ir);return dn}function xc(Ce,Ne,rt){(rt!==void 0&&!to(Ce[Ne],rt)||rt===void 0&&!(Ne in Ce))&&Er(Ce,Ne,rt)}function _c(Ce,Ne,rt){var hn=Ce[Ne];(!(Ke.call(Ce,Ne)&&to(hn,rt))||rt===void 0&&!(Ne in Ce))&&Er(Ce,Ne,rt)}function wc(Ce,Ne){for(var rt=Ce.length;rt--;)if(to(Ce[rt][0],Ne))return rt;return-1}function Er(Ce,Ne,rt){Ne=="__proto__"&&nr?nr(Ce,Ne,{configurable:!0,enumerable:!0,value:rt,writable:!0}):Ce[Ne]=rt}var Ec=ht();function xs(Ce){return Ce==null?Ce===void 0?R:b:Hn&&Hn in Object(Ce)?Rt(Ce):ls(Ce)}function Xa(Ce){return ks(Ce)&&xs(Ce)==a}function As(Ce){if(!Ol(Ce)||lr(Ce))return!1;var Ne=ka(Ce)?Qe:W;return Ne.test(yf(Ce))}function Nl(Ce){return ks(Ce)&&bp(Ce.length)&&!!q[xs(Ce)]}function Sc(Ce){if(!Ol(Ce))return br(Ce);var Ne=_n(Ce),rt=[];for(var hn in Ce)hn=="constructor"&&(Ne||!Ke.call(Ce,hn))||rt.push(hn);return rt}function ea(Ce,Ne,rt,hn,ir){Ce!==Ne&&Ec(Ne,function(Or,gi){if(ir||(ir=new bs),Ol(Or))qi(Ce,Ne,gi,rt,ea,hn,ir);else{var dn=hn?hn(Dl(Ce,gi),Or,gi+"",Ce,Ne,ir):void 0;dn===void 0&&(dn=Or),xc(Ce,gi,dn)}},Ml)}function qi(Ce,Ne,rt,hn,ir,Or,gi){var dn=Dl(Ce,rt),Tr=Dl(Ne,rt),Ir=gi.get(Tr);if(Ir){xc(Ce,rt,Ir);return}var _s=Or?Or(dn,Tr,rt+"",Ce,Ne,gi):void 0,na=_s===void 0;if(na){var Mr=ko(Tr),js=!Mr&&Aa(Tr),Li=!Mr&&!js&&yd(Tr);_s=Tr,Mr||js||Li?ko(dn)?_s=dn:cr(dn)?_s=Be(dn):js?(na=!1,_s=ve(Tr)):Li?(na=!1,_s=Se(Tr)):_s=[]:Rs(Tr)||Mi(Tr)?(_s=dn,Mi(dn)?_s=Tc(dn):(!Ol(dn)||ka(dn))&&(_s=jt(Tr))):na=!1}na&&(gi.set(Tr,_s),ir(_s,Tr,hn,Or,gi),gi.delete(Tr)),xc(Ce,rt,_s)}function ti(Ce,Ne){return gd(Ao(Ce,Ne,Gn),Ce+"")}var rr=nr?function(Ce,Ne){return nr(Ce,"toString",{configurable:!0,enumerable:!1,value:xr(Ne),writable:!0})}:Gn;function ve(Ce,Ne){return Ce.slice()}function Ie(Ce){var Ne=new Ce.constructor(Ce.byteLength);return new Wt(Ne).set(new Wt(Ce)),Ne}function Se(Ce,Ne){var rt=Ie(Ce.buffer);return new Ce.constructor(rt,Ce.byteOffset,Ce.length)}function Be(Ce,Ne){var rt=-1,hn=Ce.length;for(Ne||(Ne=Array(hn));++rt<hn;)Ne[rt]=Ce[rt];return Ne}function ze(Ce,Ne,rt,hn){var ir=!rt;rt||(rt={});for(var Or=-1,gi=Ne.length;++Or<gi;){var dn=Ne[Or],Tr=void 0;Tr===void 0&&(Tr=Ce[dn]),ir?Er(rt,dn,Tr):_c(rt,dn,Tr)}return rt}function De(Ce){return ti(function(Ne,rt){var hn=-1,ir=rt.length,Or=ir>1?rt[ir-1]:void 0,gi=ir>2?rt[2]:void 0;for(Or=Ce.length>3&&typeof Or=="function"?(ir--,Or):void 0,gi&&qn(rt[0],rt[1],gi)&&(Or=ir<3?void 0:Or,ir=1),Ne=Object(Ne);++hn<ir;){var dn=rt[hn];dn&&Ce(Ne,dn,hn,Or)}return Ne})}function ht(Ce){return function(Ne,rt,hn){for(var ir=-1,Or=Object(Ne),gi=hn(Ne),dn=gi.length;dn--;){var Tr=gi[++ir];if(rt(Or[Tr],Tr,Or)===!1)break}return Ne}}function kt(Ce,Ne){var rt=Ce.__data__;return Sn(Ne)?rt[typeof Ne=="string"?"string":"hash"]:rt.map}function Nt(Ce,Ne){var rt=lt(Ce,Ne);return As(rt)?rt:void 0}function Rt(Ce){var Ne=Ke.call(Ce,Hn),rt=Ce[Hn];try{Ce[Hn]=void 0;var hn=!0}catch{}var ir=sn.call(Ce);return hn&&(Ne?Ce[Hn]=rt:delete Ce[Hn]),ir}function jt(Ce){return typeof Ce.constructor=="function"&&!_n(Ce)?Zi(bn(Ce)):{}}function Zt(Ce,Ne){var rt=typeof Ce;return Ne=Ne??o,!!Ne&&(rt=="number"||rt!="symbol"&&te.test(Ce))&&Ce>-1&&Ce%1==0&&Ce<Ne}function qn(Ce,Ne,rt){if(!Ol(rt))return!1;var hn=typeof Ne;return(hn=="number"?ta(rt)&&Zt(Ne,rt.length):hn=="string"&&Ne in rt)?to(rt[Ne],Ce):!1}function Sn(Ce){var Ne=typeof Ce;return Ne=="string"||Ne=="number"||Ne=="symbol"||Ne=="boolean"?Ce!=="__proto__":Ce===null}function lr(Ce){return!!Lt&&Lt in Ce}function _n(Ce){var Ne=Ce&&Ce.constructor,rt=typeof Ne=="function"&&Ne.prototype||_t;return Ce===rt}function br(Ce){var Ne=[];if(Ce!=null)for(var rt in Object(Ce))Ne.push(rt);return Ne}function ls(Ce){return sn.call(Ce)}function Ao(Ce,Ne,rt){return Ne=Dr(Ne===void 0?Ce.length-1:Ne,0),function(){for(var hn=arguments,ir=-1,Or=Dr(hn.length-Ne,0),gi=Array(Or);++ir<Or;)gi[ir]=hn[Ne+ir];ir=-1;for(var dn=Array(Ne+1);++ir<Ne;)dn[ir]=hn[ir];return dn[Ne]=rt(gi),Oe(Ce,this,dn)}}function Dl(Ce,Ne){if(!(Ne==="constructor"&&typeof Ce[Ne]=="function")&&Ne!="__proto__")return Ce[Ne]}var gd=Yu(rr);function Yu(Ce){var Ne=0,rt=0;return function(){var hn=Co(),ir=s-(hn-rt);if(rt=hn,ir>0){if(++Ne>=i)return arguments[0]}else Ne=0;return Ce.apply(void 0,arguments)}}function yf(Ce){if(Ce!=null){try{return Et.call(Ce)}catch{}try{return Ce+""}catch{}}return""}function to(Ce,Ne){return Ce===Ne||Ce!==Ce&&Ne!==Ne}var Mi=Xa(function(){return arguments}())?Xa:function(Ce){return ks(Ce)&&Ke.call(Ce,"callee")&&!Zn.call(Ce,"callee")},ko=Array.isArray;function ta(Ce){return Ce!=null&&bp(Ce.length)&&!ka(Ce)}function cr(Ce){return ks(Ce)&&ta(Ce)}var Aa=Ei||Cc;function ka(Ce){if(!Ol(Ce))return!1;var Ne=xs(Ce);return Ne==h||Ne==p||Ne==l||Ne==x}function bp(Ce){return typeof Ce=="number"&&Ce>-1&&Ce%1==0&&Ce<=o}function Ol(Ce){var Ne=typeof Ce;return Ce!=null&&(Ne=="object"||Ne=="function")}function ks(Ce){return Ce!=null&&typeof Ce=="object"}function Rs(Ce){if(!ks(Ce)||xs(Ce)!=y)return!1;var Ne=bn(Ce);if(Ne===null)return!0;var rt=Ke.call(Ne,"constructor")&&Ne.constructor;return typeof rt=="function"&&rt instanceof rt&&Et.call(rt)==Fe}var yd=me?Ye(me):Nl;function Tc(Ce){return ze(Ce,Ml(Ce))}function Ml(Ce){return ta(Ce)?gf(Ce):Sc(Ce)}var X0=De(function(Ce,Ne,rt){ea(Ce,Ne,rt)});function xr(Ce){return function(){return Ce}}function Gn(Ce){return Ce}function Cc(){return!1}e.exports=X0}(D3,D3.exports)),D3.exports}var kut=Aut();const GY=gc(kut);function Jy(e){return structuredClone(e)}function YY(){const e=mp(),n=`${B0()}_${e}`;return Ai(i=>i.answers[n])}const bwe=B.createContext(null);function Rut(){const e=B.useContext(bwe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function v1(){return Ai(e=>e.config)}function WT(){const[e]=D1();return!!e.get("participantId")}function Hoe(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Iut(){const e=mp(),t=HY(),r=`${B0()}_${e}`,i=Ai(L=>L.trialValidation),s=Ai(L=>L.sequence),o=Ai(L=>L.answers),a=Ai(L=>L.modes),u=Ai(L=>L.otherTexts),l=bc(),{saveTrialAnswer:c,setreactiveAnswers:f,setMatrixAnswersRadio:d,setMatrixAnswersCheckbox:h,resetOtherText:p}=Al(),{storageEngine:m}=Ko(),g=Vw(),b=B.useMemo(()=>a.dataCollectionEnabled,[a]),y=gat(r),x=WT(),w=typeof e!="number"||x||!y,S=YY(),C=F0(),R=v1(),I=B.useMemo(()=>Date.now(),[]),O=Rut(),M=B.useCallback((L=!0)=>{if(typeof e!="number")return;const V=Jy(i[r]),D=Object.values(V).reduce((q,J)=>Object.hasOwn(J,"values")?{...q,...J.values}:q,{});Object.entries(u).forEach(([q,J])=>{Array.isArray(D[q])&&D[q].includes("__other")&&(D[q]=D[q].filter(oe=>oe!=="__other"),D[q].push(`other:${J}`)),typeof D[q]=="string"&&D[q]==="__other"&&(D[q]=`other:${J}`)});const{provenanceGraph:j}=V,z=Date.now(),{incorrectAnswers:G,helpButtonClickedCount:ee}=S,ne=O&&"current"in O&&O.current?O.current.splice(0,O.current.length):[];if(b&&S.endTime===-1){const q={answer:L?D:{},startTime:I,endTime:z,incorrectAnswers:G,provenanceGraph:j,windowEvents:ne,timedOut:!L,helpButtonClickedCount:ee};l(c({identifier:r,...q})),m&&m.saveAnswers({...o,[r]:q}),l(f({})),l(p()),l(h(null)),l(d(null))}let ue=e+1;const X=zY(s,e),W=X!==null&&X.some(q=>Object.hasOwn(q.currentBlock,"skip")&&q.currentBlock.skip!==void 0),te={...o,[r]:{answer:D,startTime:I,endTime:z,provenanceGraph:j,windowEvents:ne}};W&&[...X.flatMap(J=>J.currentBlock.skip?J.currentBlock.skip.map(oe=>({...oe,firstIndex:J.firstIndex,lastIndex:J.lastIndex})):[])].some(J=>{let oe=!1;const de=Object.fromEntries(Object.entries(te).filter(([pe])=>{const Ee=parseInt(pe.slice(pe.lastIndexOf("_")+1),10);return Ee>=J.firstIndex&&Ee<=e})),ce=J.check!=="block"?Object.entries(de).filter(([pe])=>pe.slice(0,pe.lastIndexOf("_"))===J.name):Object.entries(de);if(ce.length===0)return!1;if(ce.some(([pe,Ee])=>!Ee))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(J,null,2)}`);if(J.check==="response"||J.check==="responses"){const[pe,Ee]=ce[0];J.check==="response"?oe=J.comparison==="equal"?J.value===Ee.answer[J.responseId]:J.value!==Ee.answer[J.responseId]:oe=!Hoe(Ee.answer,pe,R.components[pe.slice(0,pe.lastIndexOf("_"))],R)}else if(J.check==="block"||J.check==="repeatedComponent"){if(ce.length<J.value)return!1;const pe=ce.map(([ge,me])=>Hoe(me.answer,ge,R.components[ge.slice(0,ge.lastIndexOf("_"))],R)),Ee=pe.filter(ge=>ge).length,Ae=pe.length-Ee;oe=J.condition==="numCorrect"&&Ee===J.value||J.condition==="numIncorrect"&&Ae===J.value}if(oe){const pe=t.indexOf(J.to),Ee=pe===-1?pat(s,J.to):-1;return ue=pe===-1?Ee:pe,!0}return!1}),C(`/${g}/${u0(ue)}${window.location.search}`)},[e,i,r,u,S,O,b,s,o,I,C,g,l,c,m,f,p,h,d,R,t]);return{isNextDisabled:w,goToNextStep:M}}function Put({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=Iut(),o=v1(),a=F0(),u=B.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=B.useState(void 0);B.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(m)}},[]),B.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./../__timedOut")},[l,f,a,o.uiConfig.timeoutReject]);const h=B.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return B.useEffect(()=>{const p=m=>{m.key==="Enter"&&!t&&!i&&h&&s()};return o.uiConfig.nextOnEnter?(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}):()=>{}},[t,i,h,s,o.uiConfig.nextOnEnter]),A.jsxs(A.Fragment,{children:[A.jsx(In,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&A.jsxs(Yy,{mt:"md",title:"Please wait",color:"blue",icon:A.jsx(fG,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?A.jsxs(Yy,{mt:"md",title:"Next button disables soon",color:"yellow",icon:A.jsx(hk,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&A.jsxs(Yy,{mt:"md",title:"Next button disabled",color:"red",icon:A.jsx(hk,{}),children:["The next button has timed out and is now disabled.",A.jsx(Js,{justify:"right",mt:"sm",children:A.jsx(In,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function Nut(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Dut=typeof window<"u"?B.useLayoutEffect:B.useEffect;function al(e,t){Dut(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Out(e,t){e&&Nut(e),al(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),al(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),al(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),al(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),al(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),al(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),al(`mantine-form:${e}:clear-errors`,t.clearErrors),al(`mantine-form:${e}:reset`,t.reset),al(`mantine-form:${e}:validate`,t.validate),al(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),al(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),al(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),al(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),al(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),al(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),al(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),al(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Mut(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function gz(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Lut(e){const[t,n]=B.useState(gz(e)),r=B.useRef(t),i=B.useCallback(u=>{n(l=>{const c=gz(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=B.useCallback(()=>i({}),[]),o=B.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=B.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function yz(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function qoe(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Woe(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=yz(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=qoe(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=qoe(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Fut(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Goe(e,t,n){typeof n.value=="object"&&(n.value=IE(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function IE(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(IE(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(IE(a),IE(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(IE(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Goe(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Goe(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function xwe(e){return typeof e!="string"?[]:e.split(".")}function yl(e,t){const n=xwe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!=null;i+=1)r=r[n[i]];return r}function $R(e,t,n){const r=xwe(e);if(r.length===0)return n;const i=IE(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function $ut(e,{from:t,to:n},r){const i=yl(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),$R(e,s,r)}function But(e,t,n,r){const i=yl(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),$R(e,s,r)}function jut(e,t,n){const r=yl(e,n);return Array.isArray(r)?$R(e,r.filter((i,s)=>s!==t),n):n}function Uut(e,t,n,r){const i=yl(e,r);if(!Array.isArray(i)||i.length<=n)return r;const s=[...i];return s[n]=t,$R(e,s,r)}function zut({$values:e,$errors:t,$status:n}){const r=B.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>Fut(a,u,l)),e.setValues({values:$ut(a,u,e.refValues.current),updateState:!0})},[]),i=B.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>Woe(a,u,l,-1)),e.setValues({values:jut(a,u,e.refValues.current),updateState:!0})},[]),s=B.useCallback((a,u,l)=>{n.clearFieldDirty(a),t.setErrors(c=>Woe(a,l,c,1)),e.setValues({values:But(a,u,l,e.refValues.current),updateState:!0})},[]),o=B.useCallback((a,u,l)=>{n.clearFieldDirty(a),e.setValues({values:Uut(a,l,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s,replaceListItem:o}}var k$,Yoe;function KY(){return Yoe||(Yoe=1,k$=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),k$}var Vut=KY();const O3=gc(Vut);function sA(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function Hut({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=B.useState(t),[o,a]=B.useState(e),u=B.useRef(t),l=B.useRef(e),c=B.useCallback(C=>{const R=typeof C=="function"?C(u.current):C;u.current=R,n==="controlled"&&s(R)},[]),f=B.useCallback((C,R=!1)=>{const I=typeof C=="function"?C(l.current):C;l.current=I,(n==="controlled"||R)&&a(I)},[]),d=B.useCallback(()=>c({}),[]),h=B.useCallback(C=>{const R=C?{...C,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(R),f({})},[]),p=B.useCallback((C,R)=>{c(I=>sA(I,C)===R?I:{...I,[C]:R})},[]),m=B.useCallback((C,R,I)=>{f(O=>sA(O,C)===R?O:{...O,[C]:R},I)},[]),g=B.useCallback((C,R)=>{const I=sA(l.current,C),O=!O3(yl(C,r.getValuesSnapshot()),R),M=yz(C,l.current);M[C]=O,f(M,I!==O)},[]),b=B.useCallback(C=>sA(u.current,C),[]),y=B.useCallback(C=>f(R=>{if(typeof C!="string")return R;const I=yz(C,R);return delete I[C],O3(I,R)?R:I}),[]),x=B.useCallback(C=>{if(C){const I=yl(C,l.current);if(typeof I=="boolean")return I;const O=yl(C,r.refValues.current),M=yl(C,r.valuesSnapshot.current);return!O3(O,M)}return Object.keys(l.current).length>0?sA(l.current):!O3(r.refValues.current,r.valuesSnapshot.current)},[]),w=B.useCallback(()=>l.current,[]),S=B.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:b,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:x,getDirty:w,getTouched:S,setCalculatedFieldDirty:g}}function qut({initialValues:e,onValuesChange:t,mode:n}){const r=B.useRef(!1),[i,s]=B.useState(e||{}),o=B.useRef(i),a=B.useRef(i),u=B.useCallback(({values:m,subscribers:g,updateState:b=!0,mergeWithPreviousValues:y=!0})=>{const x=o.current,w=m instanceof Function?m(o.current):m,S=y?{...x,...w}:w;o.current=S,b&&s(S),t==null||t(S,x),g==null||g.filter(Boolean).forEach(C=>C({updatedValues:S,previousValues:x}))},[t]),l=B.useCallback(m=>{var y;const g=yl(m.path,o.current),b=m.value instanceof Function?m.value(g):m.value;if(g!==b){const x=o.current,w=$R(m.path,b,o.current);u({values:w,updateState:m.updateState}),(y=m.subscribers)==null||y.filter(Boolean).forEach(S=>S({path:m.path,updatedValues:w,previousValues:x}))}},[u]),c=B.useCallback(m=>{a.current=m},[]),f=B.useCallback((m,g)=>{r.current||(r.current=!0,u({values:m,updateState:n==="controlled"}),c(m),g())},[u]),d=B.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=B.useCallback(()=>o.current,[]),p=B.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h,getValuesSnapshot:p}}function Wut({$status:e}){const t=B.useRef({}),n=B.useCallback((i,s)=>{B.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=B.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:yl(i,o.previousValues),value:yl(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Koe(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Xoe(e){const t=gz(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function vz(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=yl(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>vz(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||vz(o,t,a,i)),i},r)}function bz(e,t){return Xoe(typeof e=="function"?e(t):vz(e,t))}function L6(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=bz(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Gut="__MANTINE_FORM_INDEX__";function Qoe(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${Gut}`)):!1:!1}function _we({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=m=>m,enhanceGetInputProps:f,validate:d,onSubmitPreventDefault:h="always",touchTrigger:p="change"}={}){const m=Lut(r),g=qut({initialValues:n,onValuesChange:l,mode:t}),b=Hut({initialDirty:i,initialTouched:s,$values:g,mode:t}),y=zut({$values:g,$errors:m,$status:b}),x=Wut({$status:b}),[w,S]=B.useState(0),[C,R]=B.useState({}),[I,O]=B.useState(!1),M=B.useCallback(()=>{g.resetValues(),m.clearErrors(),b.resetDirty(),b.resetTouched(),t==="uncontrolled"&&S(oe=>oe+1)},[]),L=B.useCallback(oe=>{o&&m.clearErrors(),t==="uncontrolled"&&S(de=>de+1),Object.keys(x.subscribers.current).forEach(de=>{const ce=yl(de,g.refValues.current),pe=yl(de,oe);ce!==pe&&x.getFieldSubscribers(de).forEach(Ee=>Ee({previousValues:oe,updatedValues:g.refValues.current}))})},[o]),V=B.useCallback(oe=>{const de=g.refValues.current;g.initialize(oe,()=>t==="uncontrolled"&&S(ce=>ce+1)),L(de)},[L]),D=B.useCallback((oe,de,ce)=>{const pe=Qoe(oe,a),Ee=de instanceof Function?de(yl(oe,g.refValues.current)):de;b.setCalculatedFieldDirty(oe,Ee),p==="change"&&b.setFieldTouched(oe,!0),!pe&&o&&m.clearFieldError(oe),g.setFieldValue({path:oe,value:de,updateState:t==="controlled",subscribers:[...x.getFieldSubscribers(oe),pe?Ae=>{const ge=L6(oe,d,Ae.updatedValues);ge.hasError?m.setFieldError(oe,ge.error):m.clearFieldError(oe)}:null,(ce==null?void 0:ce.forceUpdate)!==!1&&t!=="controlled"?()=>R(Ae=>({...Ae,[oe]:(Ae[oe]||0)+1})):null]})},[l,d]),j=B.useCallback(oe=>{const de=g.refValues.current;g.setValues({values:oe,updateState:t==="controlled"}),L(de)},[l,L]),z=B.useCallback(()=>{const oe=bz(d,g.refValues.current);return m.setErrors(oe.errors),oe},[d]),G=B.useCallback(oe=>{const de=L6(oe,d,g.refValues.current);return de.hasError?m.setFieldError(oe,de.error):m.clearFieldError(oe),de},[d]),ee=(oe,{type:de="input",withError:ce=!0,withFocus:pe=!0,...Ee}={})=>{const ge={onChange:Mut(me=>D(oe,me,{forceUpdate:!1})),"data-path":Koe(e,oe)};return ce&&(ge.error=m.errorsState[oe]),de==="checkbox"?ge[t==="controlled"?"checked":"defaultChecked"]=yl(oe,g.refValues.current):ge[t==="controlled"?"value":"defaultValue"]=yl(oe,g.refValues.current),pe&&(ge.onFocus=()=>b.setFieldTouched(oe,!0),ge.onBlur=()=>{if(Qoe(oe,u)){const me=L6(oe,d,g.refValues.current);me.hasError?m.setFieldError(oe,me.error):m.clearFieldError(oe)}}),Object.assign(ge,f==null?void 0:f({inputProps:ge,field:oe,options:{type:de,withError:ce,withFocus:pe,...Ee},form:J}))},ne=(oe,de)=>ce=>{h==="always"&&(ce==null||ce.preventDefault());const pe=z();if(pe.hasErrors)h==="validation-failed"&&(ce==null||ce.preventDefault()),de==null||de(pe.errors,g.refValues.current,ce);else{const Ee=oe==null?void 0:oe(c(g.refValues.current),ce);Ee instanceof Promise&&(O(!0),Ee.finally(()=>O(!1)))}},ue=oe=>c(oe||g.refValues.current),X=B.useCallback(oe=>{oe.preventDefault(),M()},[]),W=B.useCallback(oe=>oe?!L6(oe,d,g.refValues.current).hasError:!bz(d,g.refValues.current).hasErrors,[d]),te=oe=>`${w}-${oe}-${C[oe]||0}`,q=B.useCallback(oe=>document.querySelector(`[data-path="${Koe(e,oe)}"]`),[]),J={watch:x.watch,initialized:g.initialized.current,values:g.stateValues,getValues:g.getValues,setInitialValues:g.setValuesSnapshot,initialize:V,setValues:j,setFieldValue:D,submitting:I,setSubmitting:O,errors:m.errorsState,setErrors:m.setErrors,setFieldError:m.setFieldError,clearFieldError:m.clearFieldError,clearErrors:m.clearErrors,resetDirty:b.resetDirty,setTouched:b.setTouched,setDirty:b.setDirty,isTouched:b.isTouched,resetTouched:b.resetTouched,isDirty:b.isDirty,getTouched:b.getTouched,getDirty:b.getDirty,reorderListItem:y.reorderListItem,insertListItem:y.insertListItem,removeListItem:y.removeListItem,replaceListItem:y.replaceListItem,reset:M,validate:z,validateField:G,getInputProps:ee,onSubmit:ne,onReset:X,isValid:W,getTransformedValues:ue,key:te,getInputNode:q};return Out(e,J),J}function Yut(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Kut(e){return Yut(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function wwe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Xut=new URLSearchParams(window.location.search),Qut=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=Xut.get(r.paramCapture):r.type==="reactive"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(a=>[a,""])));const o=r.withDontKnow?{[`${r.id}-dontKnow`]:""}:{};n={...n,[r.id]:s,...o}}}),{...n}},Jut=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(s=>s!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const s=[...n.requiredValue].sort(),o=[...r].sort();return s.every((a,u)=>a===o[u])?null:"Incorrect input"}return n.type==="checkbox"?wwe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?(r==null||r==="")&&!i[`${n.id}-dontKnow`]?"Empty input":null:r===null?"Empty input":null}})}),t};function Zut(e,t,n){const[r,i]=B.useState(null),s=_we({initialValues:Qut(e,n),validate:Jut(e)});return B.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Hw(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=wwe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Ewe({horizontal:e,children:t,style:n}){return e?A.jsx(Js,{mt:ot(4),gap:"lg",style:n,children:t}):A.jsx(El,{gap:"md",style:n,children:t})}function elt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u,horizontal:l,withOther:c}=e,f=a.map(x=>typeof x=="string"?{value:x,label:x}:x),[d,h]=B.useState(!1),[p,m]=B.useState(""),{setOtherText:g}=Al(),b=bc();B.useEffect(()=>{b(g({key:e.id,value:p}))},[p,e.id,g,b]);const y=B.useMemo(()=>Hw(e,n,f),[e,n,f]);return A.jsxs(ic.Group,{label:A.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(dc,{text:s,required:o})})]}),description:u,...n,error:y,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[A.jsx(je,{mt:"xs",children:A.jsxs(Ewe,{horizontal:!!l,style:{flexGrow:1},children:[f.map(x=>A.jsx(ic,{disabled:t,value:x.value,label:x.label},x.value)),c&&A.jsx(ic,{disabled:t,value:"__other",checked:d,onClick:x=>h(x.currentTarget.checked),label:l?"Other":A.jsx(ys,{mt:-8,placeholder:"Other",disabled:!d,value:p,onChange:x=>m(x.currentTarget.value)})},"__other")]})}),l&&c&&A.jsx(ys,{mt:"sm",placeholder:"Other",disabled:!d,value:p,onChange:x=>m(x.currentTarget.value),w:216})]})}function tlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return A.jsx(AT,{disabled:t,label:A.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(dc,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:Hw(e,n,c)})}function nlt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return A.jsx(ys.Wrapper,{label:A.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[r&&A.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),A.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(dc,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&A.jsx(b0,{children:Array.isArray(t.value)?t.value.map(a=>A.jsx(b0.Item,{children:a},a)):A.jsx(b0.Item,{children:""})})})}function Swe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f,horizontal:d,withOther:h}=e,p=u.map(S=>typeof S=="string"?{value:S,label:S}:S),[m,g]=B.useState(!1),[b,y]=B.useState(""),{setOtherText:x}=Al(),w=bc();return B.useEffect(()=>{w(x({key:e.id,value:b}))},[b,e.id,x,w]),A.jsxs(ac.Group,{name:`radioInput${e.id}`,label:A.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(dc,{text:o,required:a})})]}),description:f,...n,error:Hw(e,n,p),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[A.jsxs(Js,{gap:"lg",align:"flex-end",mt:d?0:"sm",children:[l?A.jsx(At,{children:l}):null,A.jsxs(Ewe,{horizontal:!!d,style:{flexGrow:1},children:[p.map(S=>A.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":ot(12),flex:s?1:"unset",alignItems:"center"},children:[d&&A.jsx(At,{size:"sm",children:S.label}),A.jsx(ac,{disabled:t,value:S.value,label:S.label,styles:{label:{display:"none"}},onChange:()=>g(!1)}),!d&&A.jsx(At,{size:"sm",children:S.label})]},`${S.value}-${e.id}`)),h&&A.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":ot(12),flex:s?1:"unset",alignItems:"center"},children:[d&&A.jsx(At,{size:"sm",children:"Other"}),A.jsx(ac,{disabled:t,value:"other",checked:m,onClick:S=>g(S.currentTarget.checked),label:!d&&A.jsx(ys,{mt:-8,placeholder:"Other",disabled:!m,value:b,onChange:S=>y(S.currentTarget.value)}),mt:0})]})]}),A.jsx(At,{children:c})]}),d&&h&&A.jsx(ys,{mt:"sm",placeholder:"Other",disabled:!m,value:b,onChange:S=>y(S.currentTarget.value),w:216})]},e.id)}function rlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o,horizontal:!0};return A.jsx(Swe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function ilt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return A.jsx(FW,{disabled:t,placeholder:l,label:A.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(dc,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Hw(e,n)})}const slt="_markLabel_17u7l_1",olt={markLabel:slt};function alt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,[l,c]=B.useMemo(()=>[Math.min(...a.map(d=>d.value)),Math.max(...a.map(d=>d.value))],[a]),f=Hw(e,n);return A.jsx(ys.Wrapper,{label:A.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(dc,{text:s,required:o})})]}),description:u,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:A.jsx(m9,{disabled:t,marks:a,min:l,max:c,...n,h:40,mt:4,classNames:{markLabel:olt.markLabel}})})}function ult({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return A.jsx(Fy,{disabled:t,placeholder:s,label:A.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(dc,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Hw(e,n)})}function llt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return A.jsx(SW,{disabled:t,placeholder:s,label:A.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(dc,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Hw(e,n)})}function clt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return A.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>A.jsx(ic,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function flt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return A.jsx(ac.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:A.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>A.jsx(ac,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function dlt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Al(),a=bc(),{answerOptions:u,questionOptions:l,prompt:c,secondaryText:f,required:d}=e,p=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(w=>({value:w,label:w})):u.map(w=>typeof w=="string"?{value:w,label:w}:w),m=l.map(w=>typeof w=="string"?{value:w,label:w}:w),g=(w,S)=>{const C={type:"radio",questionKey:S,val:w,responseId:e.id};a(s(C))},b=(w,S,C)=>{const R=w.target.checked,I={questionKey:S,responseId:e.id,value:C.value,label:C.label,isChecked:R,choiceOptions:p};a(o(I))},y=p.length,x=m.length;return A.jsxs(A.Fragment,{children:[A.jsxs(An,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),A.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(dc,{text:c,required:d})})]}),A.jsx(At,{c:"dimmed",size:"sm",mt:0,children:f}),A.jsxs(je,{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},m:"md",mt:"xs",children:[A.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),A.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:p.map((w,S)=>A.jsx(At,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:w.label},`choice-${S}-label`))}),A.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${x}, 1fr)`},children:m.map((w,S)=>A.jsx(At,{style:{height:"80px",width:"100%",display:"flex",alignItems:"center",justifyContent:"end",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(S+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,overflowY:"hidden"},ta:"right",p:"sm",miw:140,children:w.label},`question-${S}-label`))}),A.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${x},1fr)`},children:m.map((w,S)=>A.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(S+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?A.jsx(flt,{disabled:r,idx:S,question:w,answer:t,_choices:p,_n:y,onChange:g,response:e}):A.jsx(clt,{disabled:r,idx:S,question:w,answer:t,_choices:p,_n:y,onChange:b})},`question-${S}`))})]})]})}function hlt({response:e,answer:t,storedAnswer:n,index:r,configInUse:i,form:s}){const o=(Object.keys(n||{}).length>0?{value:n[e.id]}:t)||{value:void 0},a=Object.keys(n||{}).length>0,[u]=D1(),c=v1().uiConfig.enumerateQuestions??!1,f=B.useMemo(()=>{if(e.paramCapture){const p=u.get(e.paramCapture);return a||!!p}return a},[a,e.paramCapture,u]),[d,h]=B.useState(!!(n!=null&&n[`${e.id}-dontKnow`])||!1);return B.useEffect(()=>{s.setFieldValue(`${e.id}-dontKnow`,d.toString()),d||s.setFieldValue(e.id,"false")},[d,e.id]),A.jsxs(je,{mb:e.withDivider||i.responseDividers?"xl":"lg",children:[e.type==="numerical"&&A.jsx(ilt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="shortText"&&A.jsx(ult,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="longText"&&A.jsx(llt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="likert"&&A.jsx(rlt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="dropdown"&&A.jsx(tlt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="slider"&&A.jsx(alt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="radio"&&A.jsx(Swe,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="checkbox"&&A.jsx(elt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="reactive"&&A.jsx(nlt,{response:e,answer:o,index:r,enumerateQuestions:c}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&A.jsx(dlt,{disabled:f||d,response:e,answer:o,index:r,enumerateQuestions:c}),e.withDontKnow&&A.jsx(ic,{mt:"xs",disabled:f,label:"I don't know",checked:d,onChange:p=>h(p.currentTarget.checked)}),(e.withDivider||i.responseDividers)&&A.jsx(Zd,{mt:"xl",mb:"xs"})]})}function z8({config:e,location:t,status:n,style:r}){var X;const{storageEngine:i}=Ko(),s=bc(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=Al(),c=mp(),f=B0(),d=n==null?void 0:n.answer,h=Vw(),p=F0(),m=e,g=B.useMemo(()=>{var W;return((W=m==null?void 0:m.response)==null?void 0:W.filter(te=>te.location?te.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),b=B.useMemo(()=>g.map(W=>({...W,required:W.required===void 0?!0:W.required})),[g]),y=Zut(b,c,d||{}),[x,w]=B.useState(void 0),S=Ai(W=>W.reactiveAnswers),C=Ai(W=>W.reactiveProvenance),R=Ai(W=>W.matrixAnswers),I=(m==null?void 0:m.provideFeedback)&&(((X=m==null?void 0:m.correctAnswer)==null?void 0:X.length)||0)>0,O=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[M,L]=B.useState(0),V=(m==null?void 0:m.trainingAttempts)||2,[D,j]=B.useState(!1),z=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");B.useEffect(()=>{const W=b.find(te=>te.type==="reactive");if(S&&W){const te=W.id;y.setValues({...y.values,[te]:S[te]})}},[S]),B.useEffect(()=>{C&&w(C)},[C]),B.useEffect(()=>{const W=b.filter(te=>te.type==="matrix-radio"||te.type==="matrix-checkbox");if(R&&W.length>0){const te={...y.values};W.forEach(q=>{const{id:J}=q;te[J]={...y.getInputProps(J).value,...R[J]}}),y.setValues(te)}},[R]),B.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:y.isValid(),values:Jy(y.values),provenanceGraph:x}))},[y.values,f,c,t,s,o,x]);const[G,ee]=B.useState(Object.fromEntries(b.map(W=>[W.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),ne=(W,te,q,J,oe)=>{ee(de=>({...de,[W]:{visible:te,title:q,message:J,color:oe}}))},ue=()=>{const W=M+1;L(W);const te=Object.fromEntries(b.map(q=>{var de,ce;const J=(ce=(de=m.correctAnswer)==null?void 0:de.find(pe=>pe.id===q.id))==null?void 0:ce.answer,oe=y.values[q.id];return[q.id,Array.isArray(oe)?typeof J=="string"?oe.length===1&&J===oe[0]:oe.length===J.length&&oe.every(pe=>J.includes(pe)):J===oe]}));I&&(b.forEach(q=>{var J;if(te[q.id]&&!((J=G[q.id])!=null&&J.message.includes("You've failed to answer this question correctly")))ne(q.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:q.id,answer:y.values[q.id]}));let oe="";V===-1?oe="Please try again.":W>=V?(oe=`You didn't answer this question correctly after ${V} attempts. ${O?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!O&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./../__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./../__trainingFailed")},5e3)})):V-W===1?oe="Please try again. You have 1 attempt left.":oe=`Please try again. You have ${V-W} attempts left.`,ne(q.id,!0,"Incorrect Answer",oe,"red")}}),j(O&&W>=V||Object.values(te).every(q=>q)&&W<=V))};return A.jsxs("div",{style:r,children:[b.map((W,te)=>{var J,oe;const q=(oe=(J=m.correctAnswer)==null?void 0:J.find(de=>de.id===W.id))==null?void 0:oe.answer;return A.jsx(sr.Fragment,{children:W.hidden?"":A.jsxs(A.Fragment,{children:[A.jsx(hlt,{storedAnswer:d,answer:{...y.getInputProps(W.id,{type:W.type==="checkbox"?"checkbox":"input"})},response:W,index:te+1,configInUse:m,form:y}),G[W.id].visible&&A.jsxs(Yy,{mb:"md",title:G[W.id].title,color:G[W.id].color,children:[G[W.id].message," ",G[W.id].message.includes("Please try again")&&A.jsxs(A.Fragment,{children:[A.jsx("br",{}),A.jsx("br",{}),"If you're unsure"," ",A.jsx(Iw,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),A.jsx("br",{}),A.jsx("br",{}),M>=V&&V>=0&&q&&` The correct answer was: ${q}.`]})]})},`${W.id}-${c}`)}),A.jsxs(Js,{justify:"right",gap:"xs",children:[I&&z&&A.jsx(In,{onClick:()=>ue(),disabled:!y.isValid()||M>=V&&V>=0,children:"Check Answer"}),z&&A.jsx(Put,{disabled:I&&!D||!y.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const oA="@REVISIT_COMMS",plt={minHeight:"500px",width:"100%",border:0};function mlt({currentConfig:e}){const{setreactiveAnswers:t,setreactiveProvenance:n}=Al(),r=bc(),i=J_e(),s=B.useRef(null),o=B.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=B0(),u=B.useCallback((l,c)=>{var f,d;(d=(f=s.current)==null?void 0:f.contentWindow)==null||d.postMessage({error:!1,type:`${oA}/${l}`,iframeId:o,message:c},"*")},[s,o]);return B.useEffect(()=>{const l=c=>{const{data:f}=c;if(typeof f=="object"&&o===f.iframeId)switch(f.type){case`${oA}/WINDOW_READY`:e.parameters&&u("STUDY_DATA",e.parameters);break;case`${oA}/READY`:s.current&&(s.current.style.height=`${f.message.documentHeight}px`);break;case`${oA}/ANSWERS`:r(t(f.message));break;case`${oA}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",l),()=>window.removeEventListener("message",l)},[r,i,o,e,u,t,n]),A.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${Uu}${e.path}?trialid=${a}&id=${o}`,style:plt})}async function XY(e){const n=await(await fetch(`${Uu}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function glt(e){const t=await fetch(`${Uu}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function vb({email:e,path:t}){const n=hp();return A.jsxs(c1,{fluid:!0,my:50,maw:800,mx:"auto",children:[A.jsx(co,{order:2,children:A.jsx(At,{span:!0,c:"orange",children:"404"})}),A.jsxs(At,{children:[A.jsx(At,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),A.jsx(eh,{h:"lg"}),A.jsxs(b0,{children:[A.jsx(b0.Item,{children:A.jsx(At,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),A.jsx(b0.Item,{children:A.jsxs(At,{children:["If you're a participant, please contact the study administrator"," ",e&&A.jsxs(A.Fragment,{children:["at"," ",A.jsxs(Iw,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const ylt={maxWidth:"100%"};function vlt({currentConfig:e}){const t={...ylt,...e.style},[n,r]=B.useState(!0),[i,s]=B.useState(!1);return B.useEffect(()=>{async function o(){const a=await XY(e.path);s(!!a),r(!1)}o()},[e]),n||i?A.jsx(Wb,{mx:"auto",src:`${Uu}${e.path}`,style:t}):A.jsx(vb,{path:e.path})}function Zy(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function blt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function GT(e){let t,n,r;e.length!==2?(t=Zy,n=(a,u)=>Zy(e(a),u),r=(a,u)=>e(a)-u):(t=e===Zy||e===blt?e:xlt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function xlt(){return 0}function Twe(e){return e===null?NaN:+e}function*_lt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Cwe=GT(Zy),bb=Cwe.right,wlt=Cwe.left;GT(Twe).center;function Elt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Slt(e,t){const n=Elt(e,t);return n&&Math.sqrt(n)}function Tlt(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class af{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Joe extends Map{constructor(t,n=Rwe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(xz(this,t))}has(t){return super.has(xz(this,t))}set(t,n){return super.set(Awe(this,t),n)}delete(t){return super.delete(kwe(this,t))}}class V8 extends Set{constructor(t,n=Rwe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(xz(this,t))}add(t){return super.add(Awe(this,t))}delete(t){return super.delete(kwe(this,t))}}function xz({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Awe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function kwe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Rwe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Clt(e,t){return Array.from(t,n=>e[n])}function Alt(e=Zy){if(e===Zy)return Iwe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Iwe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const klt=Math.sqrt(50),Rlt=Math.sqrt(10),Ilt=Math.sqrt(2);function H8(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=klt?10:s>=Rlt?5:s>=Ilt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?H8(e,t,n*2):[a,u,l]}function _z(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?H8(t,e,n):H8(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function wz(e,t,n){return t=+t,e=+e,n=+n,H8(e,t,n)[2]}function xb(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?wz(t,e,n):wz(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function O_(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Ez(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Pwe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Iwe:Alt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));Pwe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(aA(e,n,t),i(e[r],s)>0&&aA(e,n,r);o<a;){for(aA(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?aA(e,n,a):(++a,aA(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function aA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Sz(e,t,n){if(e=Float64Array.from(_lt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Ez(e);if(t>=1)return O_(e);var r,i=(r-1)*t,s=Math.floor(i),o=O_(Pwe(e,s).subarray(0,s+1)),a=Ez(e.subarray(s+1));return o+(a-o)*(i-s)}}function Nwe(e,t,n=Twe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Plt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Dwe(e,t){return Sz(e,.5,t)}function*Nlt(e){for(const t of e)yield*t}function Owe(e){return Array.from(Nlt(e))}function Kd(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Mwe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Dlt(e,...t){e=new V8(e),t=t.map(Olt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Olt(e){return e instanceof V8?e:new V8(e)}function Mlt(...e){const t=new V8;for(const n of e)for(const r of n)t.add(r);return t}var Llt={value:()=>{}};function QY(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new SN(n)}function SN(e){this._=e}function Flt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}SN.prototype=QY.prototype={constructor:SN,on:function(e,t){var n=this._,r=Flt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=$lt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Zoe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Zoe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new SN(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function $lt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Zoe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Llt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Tz="http://www.w3.org/1999/xhtml";const eae={svg:"http://www.w3.org/2000/svg",xhtml:Tz,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function iM(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),eae.hasOwnProperty(t)?{space:eae[t],local:e}:e}function Blt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Tz&&t.documentElement.namespaceURI===Tz?t.createElement(e):t.createElementNS(n,e)}}function jlt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Lwe(e){var t=iM(e);return(t.local?jlt:Blt)(t)}function Ult(){}function JY(e){return e==null?Ult:function(){return this.querySelector(e)}}function zlt(e){typeof e!="function"&&(e=JY(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new lh(r,this._parents)}function Vlt(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Hlt(){return[]}function Fwe(e){return e==null?Hlt:function(){return this.querySelectorAll(e)}}function qlt(e){return function(){return Vlt(e.apply(this,arguments))}}function Wlt(e){typeof e=="function"?e=qlt(e):e=Fwe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new lh(r,i)}function $we(e){return function(){return this.matches(e)}}function Bwe(e){return function(t){return t.matches(e)}}var Glt=Array.prototype.find;function Ylt(e){return function(){return Glt.call(this.children,e)}}function Klt(){return this.firstElementChild}function Xlt(e){return this.select(e==null?Klt:Ylt(typeof e=="function"?e:Bwe(e)))}var Qlt=Array.prototype.filter;function Jlt(){return Array.from(this.children)}function Zlt(e){return function(){return Qlt.call(this.children,e)}}function ect(e){return this.selectAll(e==null?Jlt:Zlt(typeof e=="function"?e:Bwe(e)))}function tct(e){typeof e!="function"&&(e=$we(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new lh(r,this._parents)}function jwe(e){return new Array(e.length)}function nct(){return new lh(this._enter||this._groups.map(jwe),this._parents)}function q8(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}q8.prototype={constructor:q8,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function rct(e){return function(){return e}}function ict(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new q8(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function sct(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new q8(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function oct(e){return e.__data__}function act(e,t){if(!arguments.length)return Array.from(this,oct);var n=t?sct:ict,r=this._parents,i=this._groups;typeof e!="function"&&(e=rct(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=uct(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),b=u[l]=new Array(d);n(c,f,m,g,b,h,t);for(var y=0,x=0,w,S;y<p;++y)if(w=m[y]){for(y>=x&&(x=y+1);!(S=g[x])&&++x<p;);w._next=S||null}}return o=new lh(o,r),o._enter=a,o._exit=u,o}function uct(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function lct(){return new lh(this._exit||this._groups.map(jwe),this._parents)}function cct(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function fct(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new lh(a,this._parents)}function dct(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function hct(e){e||(e=pct);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new lh(i,this._parents).order()}function pct(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function mct(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function gct(){return Array.from(this)}function yct(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function vct(){let e=0;for(const t of this)++e;return e}function bct(){return!this.node()}function xct(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function _ct(e){return function(){this.removeAttribute(e)}}function wct(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ect(e,t){return function(){this.setAttribute(e,t)}}function Sct(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Tct(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Cct(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Act(e,t){var n=iM(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?wct:_ct:typeof t=="function"?n.local?Cct:Tct:n.local?Sct:Ect)(n,t))}function Uwe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function kct(e){return function(){this.style.removeProperty(e)}}function Rct(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ict(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Pct(e,t,n){return arguments.length>1?this.each((t==null?kct:typeof t=="function"?Ict:Rct)(e,t,n??"")):kS(this.node(),e)}function kS(e,t){return e.style.getPropertyValue(t)||Uwe(e).getComputedStyle(e,null).getPropertyValue(t)}function Nct(e){return function(){delete this[e]}}function Dct(e,t){return function(){this[e]=t}}function Oct(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Mct(e,t){return arguments.length>1?this.each((t==null?Nct:typeof t=="function"?Oct:Dct)(e,t)):this.node()[e]}function zwe(e){return e.trim().split(/^|\s+/)}function ZY(e){return e.classList||new Vwe(e)}function Vwe(e){this._node=e,this._names=zwe(e.getAttribute("class")||"")}Vwe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Hwe(e,t){for(var n=ZY(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function qwe(e,t){for(var n=ZY(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Lct(e){return function(){Hwe(this,e)}}function Fct(e){return function(){qwe(this,e)}}function $ct(e,t){return function(){(t.apply(this,arguments)?Hwe:qwe)(this,e)}}function Bct(e,t){var n=zwe(e+"");if(arguments.length<2){for(var r=ZY(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?$ct:t?Lct:Fct)(n,t))}function jct(){this.textContent=""}function Uct(e){return function(){this.textContent=e}}function zct(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Vct(e){return arguments.length?this.each(e==null?jct:(typeof e=="function"?zct:Uct)(e)):this.node().textContent}function Hct(){this.innerHTML=""}function qct(e){return function(){this.innerHTML=e}}function Wct(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Gct(e){return arguments.length?this.each(e==null?Hct:(typeof e=="function"?Wct:qct)(e)):this.node().innerHTML}function Yct(){this.nextSibling&&this.parentNode.appendChild(this)}function Kct(){return this.each(Yct)}function Xct(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qct(){return this.each(Xct)}function Jct(e){var t=typeof e=="function"?e:Lwe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Zct(){return null}function eft(e,t){var n=typeof e=="function"?e:Lwe(e),r=t==null?Zct:typeof t=="function"?t:JY(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function tft(){var e=this.parentNode;e&&e.removeChild(this)}function nft(){return this.each(tft)}function rft(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ift(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sft(e){return this.select(e?ift:rft)}function oft(e){return arguments.length?this.property("__data__",e):this.node().__data__}function aft(e){return function(t){e.call(this,t,this.__data__)}}function uft(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function lft(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function cft(e,t,n){return function(){var r=this.__on,i,s=aft(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function fft(e,t,n){var r=uft(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?cft:lft,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Wwe(e,t,n){var r=Uwe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function dft(e,t){return function(){return Wwe(this,e,t)}}function hft(e,t){return function(){return Wwe(this,e,t.apply(this,arguments))}}function pft(e,t){return this.each((typeof t=="function"?hft:dft)(e,t))}function*mft(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Gwe=[null];function lh(e,t){this._groups=e,this._parents=t}function BR(){return new lh([[document.documentElement]],Gwe)}function gft(){return this}lh.prototype=BR.prototype={constructor:lh,select:zlt,selectAll:Wlt,selectChild:Xlt,selectChildren:ect,filter:tct,data:act,enter:nct,exit:lct,join:cct,merge:fct,selection:gft,order:dct,sort:hct,call:mct,nodes:gct,node:yct,size:vct,empty:bct,each:xct,attr:Act,style:Pct,property:Mct,classed:Bct,text:Vct,html:Gct,raise:Kct,lower:Qct,append:Jct,insert:eft,remove:nft,clone:sft,datum:oft,on:fft,dispatch:pft,[Symbol.iterator]:mft};function Wo(e){return typeof e=="string"?new lh([[document.querySelector(e)]],[document.documentElement]):new lh([[e]],Gwe)}function yft(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Q_(e,t){if(e=yft(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function YT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jR(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Jb(){}var J_=.7,RS=1/J_,KE="\\s*([+-]?\\d+)\\s*",v4="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vft=/^#([0-9a-f]{3,8})$/,bft=new RegExp(`^rgb\\(${KE},${KE},${KE}\\)$`),xft=new RegExp(`^rgb\\(${qm},${qm},${qm}\\)$`),_ft=new RegExp(`^rgba\\(${KE},${KE},${KE},${v4}\\)$`),wft=new RegExp(`^rgba\\(${qm},${qm},${qm},${v4}\\)$`),Eft=new RegExp(`^hsl\\(${v4},${qm},${qm}\\)$`),Sft=new RegExp(`^hsla\\(${v4},${qm},${qm},${v4}\\)$`),tae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};YT(Jb,Z_,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nae,formatHex:nae,formatHex8:Tft,formatHsl:Cft,formatRgb:rae,toString:rae});function nae(){return this.rgb().formatHex()}function Tft(){return this.rgb().formatHex8()}function Cft(){return Ywe(this).formatHsl()}function rae(){return this.rgb().formatRgb()}function Z_(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vft.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?iae(t):n===3?new Ou(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?F6(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?F6(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bft.exec(e))?new Ou(t[1],t[2],t[3],1):(t=xft.exec(e))?new Ou(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_ft.exec(e))?F6(t[1],t[2],t[3],t[4]):(t=wft.exec(e))?F6(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Eft.exec(e))?aae(t[1],t[2]/100,t[3]/100,1):(t=Sft.exec(e))?aae(t[1],t[2]/100,t[3]/100,t[4]):tae.hasOwnProperty(e)?iae(tae[e]):e==="transparent"?new Ou(NaN,NaN,NaN,0):null}function iae(e){return new Ou(e>>16&255,e>>8&255,e&255,1)}function F6(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ou(e,t,n,r)}function eK(e){return e instanceof Jb||(e=Z_(e)),e?(e=e.rgb(),new Ou(e.r,e.g,e.b,e.opacity)):new Ou}function _b(e,t,n,r){return arguments.length===1?eK(e):new Ou(e,t,n,r??1)}function Ou(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}YT(Ou,_b,jR(Jb,{brighter(e){return e=e==null?RS:Math.pow(RS,e),new Ou(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?J_:Math.pow(J_,e),new Ou(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ou(M_(this.r),M_(this.g),M_(this.b),W8(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sae,formatHex:sae,formatHex8:Aft,formatRgb:oae,toString:oae}));function sae(){return`#${C_(this.r)}${C_(this.g)}${C_(this.b)}`}function Aft(){return`#${C_(this.r)}${C_(this.g)}${C_(this.b)}${C_((isNaN(this.opacity)?1:this.opacity)*255)}`}function oae(){const e=W8(this.opacity);return`${e===1?"rgb(":"rgba("}${M_(this.r)}, ${M_(this.g)}, ${M_(this.b)}${e===1?")":`, ${e})`}`}function W8(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function M_(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function C_(e){return e=M_(e),(e<16?"0":"")+e.toString(16)}function aae(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new l0(e,t,n,r)}function Ywe(e){if(e instanceof l0)return new l0(e.h,e.s,e.l,e.opacity);if(e instanceof Jb||(e=Z_(e)),!e)return new l0;if(e instanceof l0)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new l0(o,a,u,e.opacity)}function G8(e,t,n,r){return arguments.length===1?Ywe(e):new l0(e,t,n,r??1)}function l0(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}YT(l0,G8,jR(Jb,{brighter(e){return e=e==null?RS:Math.pow(RS,e),new l0(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?J_:Math.pow(J_,e),new l0(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ou(R$(e>=240?e-240:e+120,i,r),R$(e,i,r),R$(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new l0(uae(this.h),$6(this.s),$6(this.l),W8(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=W8(this.opacity);return`${e===1?"hsl(":"hsla("}${uae(this.h)}, ${$6(this.s)*100}%, ${$6(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uae(e){return e=(e||0)%360,e<0?e+360:e}function $6(e){return Math.max(0,Math.min(1,e||0))}function R$(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Kwe=Math.PI/180,Xwe=180/Math.PI,Y8=18,Qwe=.96422,Jwe=1,Zwe=.82521,e2e=4/29,XE=6/29,t2e=3*XE*XE,kft=XE*XE*XE;function n2e(e){if(e instanceof Wm)return new Wm(e.l,e.a,e.b,e.opacity);if(e instanceof Uy)return r2e(e);e instanceof Ou||(e=eK(e));var t=D$(e.r),n=D$(e.g),r=D$(e.b),i=I$((.2225045*t+.7168786*n+.0606169*r)/Jwe),s,o;return t===n&&n===r?s=o=i:(s=I$((.4360747*t+.3850649*n+.1430804*r)/Qwe),o=I$((.0139322*t+.0971045*n+.7141733*r)/Zwe)),new Wm(116*i-16,500*(s-i),200*(i-o),e.opacity)}function K8(e,t,n,r){return arguments.length===1?n2e(e):new Wm(e,t,n,r??1)}function Wm(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}YT(Wm,K8,jR(Jb,{brighter(e){return new Wm(this.l+Y8*(e??1),this.a,this.b,this.opacity)},darker(e){return new Wm(this.l-Y8*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Qwe*P$(t),e=Jwe*P$(e),n=Zwe*P$(n),new Ou(N$(3.1338561*t-1.6168667*e-.4906146*n),N$(-.9787684*t+1.9161415*e+.033454*n),N$(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function I$(e){return e>kft?Math.pow(e,1/3):e/t2e+e2e}function P$(e){return e>XE?e*e*e:t2e*(e-e2e)}function N$(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function D$(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Rft(e){if(e instanceof Uy)return new Uy(e.h,e.c,e.l,e.opacity);if(e instanceof Wm||(e=n2e(e)),e.a===0&&e.b===0)return new Uy(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Xwe;return new Uy(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function X8(e,t,n,r){return arguments.length===1?Rft(e):new Uy(e,t,n,r??1)}function Uy(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function r2e(e){if(isNaN(e.h))return new Wm(e.l,0,0,e.opacity);var t=e.h*Kwe;return new Wm(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}YT(Uy,X8,jR(Jb,{brighter(e){return new Uy(this.h,this.c,this.l+Y8*(e??1),this.opacity)},darker(e){return new Uy(this.h,this.c,this.l-Y8*(e??1),this.opacity)},rgb(){return r2e(this).rgb()}}));var i2e=-.14861,tK=1.78277,nK=-.29227,sM=-.90649,b4=1.97294,lae=b4*sM,cae=b4*tK,fae=tK*nK-sM*i2e;function Ift(e){if(e instanceof L_)return new L_(e.h,e.s,e.l,e.opacity);e instanceof Ou||(e=eK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(fae*r+lae*t-cae*n)/(fae+lae-cae),s=r-i,o=(b4*(n-i)-nK*s)/sM,a=Math.sqrt(o*o+s*s)/(b4*i*(1-i)),u=a?Math.atan2(o,s)*Xwe-120:NaN;return new L_(u<0?u+360:u,a,i,e.opacity)}function Cz(e,t,n,r){return arguments.length===1?Ift(e):new L_(e,t,n,r??1)}function L_(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}YT(L_,Cz,jR(Jb,{brighter(e){return e=e==null?RS:Math.pow(RS,e),new L_(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?J_:Math.pow(J_,e),new L_(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Kwe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Ou(255*(t+n*(i2e*r+tK*i)),255*(t+n*(nK*r+sM*i)),255*(t+n*(b4*r)),this.opacity)}}));function s2e(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function o2e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return s2e((n-r/t)*t,o,i,s,a)}}function a2e(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return s2e((n-r/t)*t,i,s,o,a)}}const oM=e=>()=>e;function u2e(e,t){return function(n){return e+n*t}}function Pft(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function aM(e,t){var n=t-e;return n?u2e(e,n>180||n<-180?n-360*Math.round(n/360):n):oM(isNaN(e)?t:e)}function Nft(e){return(e=+e)==1?Mu:function(t,n){return n-t?Pft(t,n,e):oM(isNaN(t)?n:t)}}function Mu(e,t){var n=t-e;return n?u2e(e,n):oM(isNaN(e)?t:e)}const x4=function e(t){var n=Nft(t);function r(i,s){var o=n((i=_b(i)).r,(s=_b(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Mu(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function l2e(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=_b(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Dft=l2e(o2e),Oft=l2e(a2e);function rK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function c2e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Mft(e,t){return(c2e(t)?rK:f2e)(e,t)}function f2e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Zb(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function d2e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function qh(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function h2e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Zb(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Az=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,O$=new RegExp(Az.source,"g");function Lft(e){return function(){return e}}function Fft(e){return function(t){return e(t)+""}}function iK(e,t){var n=Az.lastIndex=O$.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Az.exec(e))&&(i=O$.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:qh(r,i)})),n=O$.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Fft(u[0].x):Lft(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Zb(e,t){var n=typeof t,r;return t==null||n==="boolean"?oM(t):(n==="number"?qh:n==="string"?(r=Z_(t))?(t=r,x4):iK:t instanceof Z_?x4:t instanceof Date?d2e:c2e(t)?rK:Array.isArray(t)?f2e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?h2e:qh)(e,t)}function $ft(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Bft(e,t){var n=aM(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function UR(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var dae=180/Math.PI,kz={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function p2e(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*dae,skewX:Math.atan(u)*dae,scaleX:o,scaleY:a}}var B6;function jft(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?kz:p2e(t.a,t.b,t.c,t.d,t.e,t.f)}function Uft(e){return e==null||(B6||(B6=document.createElementNS("http://www.w3.org/2000/svg","g")),B6.setAttribute("transform",e),!(e=B6.transform.baseVal.consolidate()))?kz:(e=e.matrix,p2e(e.a,e.b,e.c,e.d,e.e,e.f))}function m2e(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:qh(l,f)},{i:m-2,x:qh(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:qh(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:qh(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:qh(l,f)},{i:m-2,x:qh(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var g2e=m2e(jft,"px, ","px)","deg)"),y2e=m2e(Uft,", ",")",")"),zft=1e-12;function hae(e){return((e=Math.exp(e))+1/e)/2}function Vft(e){return((e=Math.exp(e))-1/e)/2}function Hft(e){return((e=Math.exp(2*e))-1)/(e+1)}const qft=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,b;if(m<zft)b=Math.log(d/l)/t,g=function(R){return[a+R*h,u+R*p,l*Math.exp(t*R*b)]};else{var y=Math.sqrt(m),x=(d*d-l*l+r*m)/(2*l*n*y),w=(d*d-l*l-r*m)/(2*d*n*y),S=Math.log(Math.sqrt(x*x+1)-x),C=Math.log(Math.sqrt(w*w+1)-w);b=(C-S)/t,g=function(R){var I=R*b,O=hae(S),M=l/(n*y)*(O*Hft(t*I+S)-Vft(S));return[a+M*h,u+M*p,l*O/hae(t*I+S)]}}return g.duration=b*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function v2e(e){return function(t,n){var r=e((t=G8(t)).h,(n=G8(n)).h),i=Mu(t.s,n.s),s=Mu(t.l,n.l),o=Mu(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Wft=v2e(aM);var Gft=v2e(Mu);function Yft(e,t){var n=Mu((e=K8(e)).l,(t=K8(t)).l),r=Mu(e.a,t.a),i=Mu(e.b,t.b),s=Mu(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function b2e(e){return function(t,n){var r=e((t=X8(t)).h,(n=X8(n)).h),i=Mu(t.c,n.c),s=Mu(t.l,n.l),o=Mu(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Kft=b2e(aM);var Xft=b2e(Mu);function x2e(e){return function t(n){n=+n;function r(i,s){var o=e((i=Cz(i)).h,(s=Cz(s)).h),a=Mu(i.s,s.s),u=Mu(i.l,s.l),l=Mu(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Qft=x2e(aM);var Jft=x2e(Mu);function sK(e,t){t===void 0&&(t=e,e=Zb);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Zft(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const edt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Zb,interpolateArray:Mft,interpolateBasis:o2e,interpolateBasisClosed:a2e,interpolateCubehelix:Qft,interpolateCubehelixLong:Jft,interpolateDate:d2e,interpolateDiscrete:$ft,interpolateHcl:Kft,interpolateHclLong:Xft,interpolateHsl:Wft,interpolateHslLong:Gft,interpolateHue:Bft,interpolateLab:Yft,interpolateNumber:qh,interpolateNumberArray:rK,interpolateObject:h2e,interpolateRgb:x4,interpolateRgbBasis:Dft,interpolateRgbBasisClosed:Oft,interpolateRound:UR,interpolateString:iK,interpolateTransformCss:g2e,interpolateTransformSvg:y2e,interpolateZoom:qft,piecewise:sK,quantize:Zft},Symbol.toStringTag,{value:"Module"}));var IS=0,M3=0,uA=0,_2e=1e3,Q8,L3,J8=0,ew=0,uM=0,_4=typeof performance=="object"&&performance.now?performance:Date,w2e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function lM(){return ew||(w2e(tdt),ew=_4.now()+uM)}function tdt(){ew=0}function w4(){this._call=this._time=this._next=null}w4.prototype=oK.prototype={constructor:w4,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?lM():+n)+(t==null?0:+t),!this._next&&L3!==this&&(L3?L3._next=this:Q8=this,L3=this),this._call=e,this._time=n,Rz()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rz())}};function oK(e,t,n){var r=new w4;return r.restart(e,t,n),r}function ndt(){lM(),++IS;for(var e=Q8,t;e;)(t=ew-e._time)>=0&&e._call.call(void 0,t),e=e._next;--IS}function pae(){ew=(J8=_4.now())+uM,IS=M3=0;try{ndt()}finally{IS=0,idt(),ew=0}}function rdt(){var e=_4.now(),t=e-J8;t>_2e&&(uM-=t,J8=e)}function idt(){for(var e,t=Q8,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Q8=n);L3=e,Rz(r)}function Rz(e){if(!IS){M3&&(M3=clearTimeout(M3));var t=e-ew;t>24?(e<1/0&&(M3=setTimeout(pae,e-_4.now()-uM)),uA&&(uA=clearInterval(uA))):(uA||(J8=_4.now(),uA=setInterval(rdt,_2e)),IS=1,w2e(pae))}}function mae(e,t,n){var r=new w4;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function sdt(e,t,n){var r=new w4,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?lM():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var odt=QY("start","end","cancel","interrupt"),adt=[],E2e=0,gae=1,Iz=2,TN=3,yae=4,Pz=5,CN=6;function cM(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;udt(e,n,{name:t,index:r,group:i,on:odt,tween:adt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:E2e})}function aK(e,t){var n=j0(e,t);if(n.state>E2e)throw new Error("too late; already scheduled");return n}function Eg(e,t){var n=j0(e,t);if(n.state>TN)throw new Error("too late; already running");return n}function j0(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function udt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=oK(s,0,n.time);function s(l){n.state=gae,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==gae)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===TN)return mae(o);h.state===yae?(h.state=CN,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=CN,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(mae(function(){n.state===TN&&(n.state=yae,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Iz,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Iz){for(n.state=TN,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Pz,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===Pz&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=CN,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function ldt(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Iz&&r.state<Pz,r.state=CN,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function cdt(e){return this.each(function(){ldt(this,e)})}function fdt(e,t){var n,r;return function(){var i=Eg(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function ddt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Eg(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function hdt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=j0(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?fdt:ddt)(n,e,t))}function uK(e,t,n){var r=e._id;return e.each(function(){var i=Eg(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return j0(i,r).value[t]}}function S2e(e,t){var n;return(typeof t=="number"?qh:t instanceof Z_?x4:(n=Z_(t))?(t=n,x4):iK)(e,t)}function pdt(e){return function(){this.removeAttribute(e)}}function mdt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gdt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function ydt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function vdt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function bdt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function xdt(e,t){var n=iM(e),r=n==="transform"?y2e:S2e;return this.attrTween(e,typeof t=="function"?(n.local?bdt:vdt)(n,r,uK(this,"attr."+e,t)):t==null?(n.local?mdt:pdt)(n):(n.local?ydt:gdt)(n,r,t))}function _dt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function wdt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Edt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&wdt(e,s)),n}return i._value=t,i}function Sdt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&_dt(e,s)),n}return i._value=t,i}function Tdt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=iM(e);return this.tween(n,(r.local?Edt:Sdt)(r,t))}function Cdt(e,t){return function(){aK(this,e).delay=+t.apply(this,arguments)}}function Adt(e,t){return t=+t,function(){aK(this,e).delay=t}}function kdt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cdt:Adt)(t,e)):j0(this.node(),t).delay}function Rdt(e,t){return function(){Eg(this,e).duration=+t.apply(this,arguments)}}function Idt(e,t){return t=+t,function(){Eg(this,e).duration=t}}function Pdt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rdt:Idt)(t,e)):j0(this.node(),t).duration}function Ndt(e,t){if(typeof t!="function")throw new Error;return function(){Eg(this,e).ease=t}}function Ddt(e){var t=this._id;return arguments.length?this.each(Ndt(t,e)):j0(this.node(),t).ease}function Odt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Eg(this,e).ease=n}}function Mdt(e){if(typeof e!="function")throw new Error;return this.each(Odt(this._id,e))}function Ldt(e){typeof e!="function"&&(e=$we(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new b1(r,this._parents,this._name,this._id)}function Fdt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new b1(o,this._parents,this._name,this._id)}function $dt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Bdt(e,t,n){var r,i,s=$dt(t)?aK:Eg;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function jdt(e,t){var n=this._id;return arguments.length<2?j0(this.node(),n).on.on(e):this.each(Bdt(n,e,t))}function Udt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function zdt(){return this.on("end.remove",Udt(this._id))}function Vdt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=JY(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,cM(l[d],t,n,d,l,j0(c,n)));return new b1(s,this._parents,t,n)}function Hdt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fwe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=j0(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&cM(h,t,n,m,d,p);s.push(d),o.push(c)}return new b1(s,o,t,n)}var qdt=BR.prototype.constructor;function Wdt(){return new qdt(this._groups,this._parents)}function Gdt(e,t){var n,r,i;return function(){var s=kS(this,e),o=(this.style.removeProperty(e),kS(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function T2e(e){return function(){this.style.removeProperty(e)}}function Ydt(e,t,n){var r,i=n+"",s;return function(){var o=kS(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Kdt(e,t,n){var r,i,s;return function(){var o=kS(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),kS(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Xdt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Eg(this,e),l=u.on,c=u.value[s]==null?a||(a=T2e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Qdt(e,t,n){var r=(e+="")=="transform"?g2e:S2e;return t==null?this.styleTween(e,Gdt(e,r)).on("end.style."+e,T2e(e)):typeof t=="function"?this.styleTween(e,Kdt(e,r,uK(this,"style."+e,t))).each(Xdt(this._id,e)):this.styleTween(e,Ydt(e,r,t),n).on("end.style."+e,null)}function Jdt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Zdt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Jdt(e,o,n)),r}return s._value=t,s}function eht(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Zdt(e,t,n??""))}function tht(e){return function(){this.textContent=e}}function nht(e){return function(){var t=e(this);this.textContent=t??""}}function rht(e){return this.tween("text",typeof e=="function"?nht(uK(this,"text",e)):tht(e==null?"":e+""))}function iht(e){return function(t){this.textContent=e.call(this,t)}}function sht(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&iht(i)),t}return r._value=e,r}function oht(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,sht(e))}function aht(){for(var e=this._name,t=this._id,n=C2e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=j0(u,t);cM(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new b1(r,this._parents,e,n)}function uht(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Eg(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var lht=0;function b1(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function C2e(){return++lht}var yy=BR.prototype;b1.prototype={constructor:b1,select:Vdt,selectAll:Hdt,selectChild:yy.selectChild,selectChildren:yy.selectChildren,filter:Ldt,merge:Fdt,selection:Wdt,transition:aht,call:yy.call,nodes:yy.nodes,node:yy.node,size:yy.size,empty:yy.empty,each:yy.each,on:jdt,attr:xdt,attrTween:Tdt,style:Qdt,styleTween:eht,text:rht,textTween:oht,remove:zdt,tween:hdt,delay:kdt,duration:Pdt,ease:Ddt,easeVarying:Mdt,end:uht,[Symbol.iterator]:yy[Symbol.iterator]};function cht(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var fht={time:null,delay:0,duration:250,ease:cht};function dht(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function hht(e){var t,n;e instanceof b1?(t=e._id,e=e._name):(t=C2e(),(n=fht).time=lM(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&cM(u,e,t,l,o,n||dht(u,t));return new b1(r,this._parents,e,t)}BR.prototype.interrupt=cdt;BR.prototype.transition=hht;const Nz=Math.PI,Dz=2*Nz,a_=1e-6,pht=Dz-a_;function A2e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function mht(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return A2e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let lK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?A2e:mht(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>a_)if(!(Math.abs(f*u-l*c)>a_)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,b=Math.sqrt(m),y=Math.sqrt(d),x=s*Math.tan((Nz-Math.acos((m+d-g)/(2*b*y)))/2),w=x/y,S=x/b;Math.abs(w-1)>a_&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+S*u},${this._y1=n+S*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>a_||Math.abs(this._y1-c)>a_)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%Dz+Dz),d>pht?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>a_&&this._append`A${r},${r},0,${+(d>=Nz)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function fM(){return new lK}fM.prototype=lK.prototype;const e1=11102230246251565e-32,Gl=134217729,ght=(3+8*e1)*e1;function M$(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function yht(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function zR(e){return new Float64Array(e)}const vht=(3+16*e1)*e1,bht=(2+12*e1)*e1,xht=(9+64*e1)*e1*e1,J2=zR(4),vae=zR(8),bae=zR(12),xae=zR(16),Wc=zR(4);function _ht(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,b,y,x,w,S,C,R,I;const O=e-i,M=n-i,L=t-s,V=r-s;w=O*V,d=Gl*O,h=d-(d-O),p=O-h,d=Gl*V,m=d-(d-V),g=V-m,S=p*g-(w-h*m-p*m-h*g),C=L*M,d=Gl*L,h=d-(d-L),p=L-h,d=Gl*M,m=d-(d-M),g=M-m,R=p*g-(C-h*m-p*m-h*g),b=S-R,f=S-b,J2[0]=S-(b+f)+(f-R),y=w+b,f=y-w,x=w-(y-f)+(b-f),b=x-C,f=x-b,J2[1]=x-(b+f)+(f-C),I=y+b,f=I-y,J2[2]=y-(I-f)+(b-f),J2[3]=I;let D=yht(4,J2),j=bht*o;if(D>=j||-D>=j||(f=e-O,a=e-(O+f)+(f-i),f=n-M,l=n-(M+f)+(f-i),f=t-L,u=t-(L+f)+(f-s),f=r-V,c=r-(V+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(j=xht*o+ght*Math.abs(D),D+=O*c+V*a-(L*l+M*u),D>=j||-D>=j))return D;w=a*V,d=Gl*a,h=d-(d-a),p=a-h,d=Gl*V,m=d-(d-V),g=V-m,S=p*g-(w-h*m-p*m-h*g),C=u*M,d=Gl*u,h=d-(d-u),p=u-h,d=Gl*M,m=d-(d-M),g=M-m,R=p*g-(C-h*m-p*m-h*g),b=S-R,f=S-b,Wc[0]=S-(b+f)+(f-R),y=w+b,f=y-w,x=w-(y-f)+(b-f),b=x-C,f=x-b,Wc[1]=x-(b+f)+(f-C),I=y+b,f=I-y,Wc[2]=y-(I-f)+(b-f),Wc[3]=I;const z=M$(4,J2,4,Wc,vae);w=O*c,d=Gl*O,h=d-(d-O),p=O-h,d=Gl*c,m=d-(d-c),g=c-m,S=p*g-(w-h*m-p*m-h*g),C=L*l,d=Gl*L,h=d-(d-L),p=L-h,d=Gl*l,m=d-(d-l),g=l-m,R=p*g-(C-h*m-p*m-h*g),b=S-R,f=S-b,Wc[0]=S-(b+f)+(f-R),y=w+b,f=y-w,x=w-(y-f)+(b-f),b=x-C,f=x-b,Wc[1]=x-(b+f)+(f-C),I=y+b,f=I-y,Wc[2]=y-(I-f)+(b-f),Wc[3]=I;const G=M$(z,vae,4,Wc,bae);w=a*c,d=Gl*a,h=d-(d-a),p=a-h,d=Gl*c,m=d-(d-c),g=c-m,S=p*g-(w-h*m-p*m-h*g),C=u*l,d=Gl*u,h=d-(d-u),p=u-h,d=Gl*l,m=d-(d-l),g=l-m,R=p*g-(C-h*m-p*m-h*g),b=S-R,f=S-b,Wc[0]=S-(b+f)+(f-R),y=w+b,f=y-w,x=w-(y-f)+(b-f),b=x-C,f=x-b,Wc[1]=x-(b+f)+(f-C),I=y+b,f=I-y,Wc[2]=y-(I-f)+(b-f),Wc[3]=I;const ee=M$(G,bae,4,Wc,xae);return xae[ee-1]}function j6(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=vht*l?u:-_ht(e,t,n,r,i,s,l)}const _ae=Math.pow(2,-52),U6=new Uint32Array(512);class Z8{static from(t,n=Cht,r=Aht){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new Z8(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let O=0;O<o;O++){const M=t[2*O],L=t[2*O+1];M<a&&(a=M),L<u&&(u=L),M>l&&(l=M),L>c&&(c=L),this._ids[O]=O}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let O=0,M=1/0;O<o;O++){const L=L$(f,d,t[2*O],t[2*O+1]);L<M&&(h=O,M=L)}const g=t[2*h],b=t[2*h+1];for(let O=0,M=1/0;O<o;O++){if(O===h)continue;const L=L$(g,b,t[2*O],t[2*O+1]);L<M&&L>0&&(p=O,M=L)}let y=t[2*p],x=t[2*p+1],w=1/0;for(let O=0;O<o;O++){if(O===h||O===p)continue;const M=Sht(g,b,y,x,t[2*O],t[2*O+1]);M<w&&(m=O,w=M)}let S=t[2*m],C=t[2*m+1];if(w===1/0){for(let L=0;L<o;L++)this._dists[L]=t[2*L]-t[0]||t[2*L+1]-t[1];PE(this._ids,this._dists,0,o-1);const O=new Uint32Array(o);let M=0;for(let L=0,V=-1/0;L<o;L++){const D=this._ids[L],j=this._dists[D];j>V&&(O[M++]=D,V=j)}this.hull=O.subarray(0,M),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(j6(g,b,y,x,S,C)<0){const O=p,M=y,L=x;p=m,y=S,x=C,m=O,S=M,C=L}const R=Tht(g,b,y,x,S,C);this._cx=R.x,this._cy=R.y;for(let O=0;O<o;O++)this._dists[O]=L$(t[2*O],t[2*O+1],R.x,R.y);PE(this._ids,this._dists,0,o-1),this._hullStart=h;let I=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,b)]=h,s[this._hashKey(y,x)]=p,s[this._hashKey(S,C)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let O=0,M,L;O<this._ids.length;O++){const V=this._ids[O],D=t[2*V],j=t[2*V+1];if(O>0&&Math.abs(D-M)<=_ae&&Math.abs(j-L)<=_ae||(M=D,L=j,V===h||V===p||V===m))continue;let z=0;for(let X=0,W=this._hashKey(D,j);X<this._hashSize&&(z=s[(W+X)%this._hashSize],!(z!==-1&&z!==r[z]));X++);z=n[z];let G=z,ee;for(;ee=r[G],j6(D,j,t[2*G],t[2*G+1],t[2*ee],t[2*ee+1])>=0;)if(G=ee,G===z){G=-1;break}if(G===-1)continue;let ne=this._addTriangle(G,V,r[G],-1,-1,i[G]);i[V]=this._legalize(ne+2),i[G]=ne,I++;let ue=r[G];for(;ee=r[ue],j6(D,j,t[2*ue],t[2*ue+1],t[2*ee],t[2*ee+1])<0;)ne=this._addTriangle(ue,V,ee,i[V],-1,i[ue]),i[V]=this._legalize(ne+2),r[ue]=ue,I--,ue=ee;if(G===z)for(;ee=n[G],j6(D,j,t[2*ee],t[2*ee+1],t[2*G],t[2*G+1])<0;)ne=this._addTriangle(ee,V,G,-1,i[G],i[ee]),this._legalize(ne+2),i[ee]=ne,r[G]=G,I--,G=ee;this._hullStart=n[V]=G,r[G]=n[ue]=V,r[V]=ue,s[this._hashKey(D,j)]=V,s[this._hashKey(t[2*G],t[2*G+1])]=G}this.hull=new Uint32Array(I);for(let O=0,M=this._hullStart;O<I;O++)this.hull[O]=M,M=r[M];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(wht(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=U6[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(Eht(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const b=r[f];if(b===-1){let x=this._hullStart;do{if(this._hullTri[x]===f){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,b),this._link(a,r[o]),this._link(o,f);const y=l+(a+1)%3;s<U6.length&&(U6[s++]=y)}else{if(s===0)break;t=U6[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function wht(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function L$(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Eht(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function Sht(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function Tht(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function PE(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;lA(e,i,s),t[e[n]]>t[e[r]]&&lA(e,n,r),t[e[s]]>t[e[r]]&&lA(e,s,r),t[e[n]]>t[e[s]]&&lA(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;lA(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(PE(e,t,s,r),PE(e,t,n,o-1)):(PE(e,t,n,o-1),PE(e,t,s,r))}}function lA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Cht(e){return e[0]}function Aht(e){return e[1]}const wae=1e-6;let A_=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>wae||Math.abs(this._y1-s)>wae)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}};class Oz{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let kht=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,b=r.length,y,x;m<b;m+=3,g+=2){const w=r[m]*2,S=r[m+1]*2,C=r[m+2]*2,R=t[w],I=t[w+1],O=t[S],M=t[S+1],L=t[C],V=t[C+1],D=O-R,j=M-I,z=L-R,G=V-I,ee=(D*G-j*z)*2;if(Math.abs(ee)<1e-9){if(s===void 0){s=o=0;for(const ue of n)s+=t[ue*2],o+=t[ue*2+1];s/=n.length,o/=n.length}const ne=1e9*Math.sign((s-R)*G-(o-I)*z);y=(R+L)/2-ne*G,x=(I+V)/2+ne*z}else{const ne=1/ee,ue=D*D+j*j,X=z*z+G*G;y=R+(G*ue-j*X)*ne,x=I+(D*X-z*ue)*ne}a[g]=y,a[g+1]=x}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new A_:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],b=o[p],y=o[p+1];this._renderSegment(m,g,b,y,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new A_:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new A_:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Oz;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,b,y;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,b,y]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[b,y,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(b,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(b,y):i=[b,y]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Rht=2*Math.PI,Z2=Math.pow;function Iht(e){return e[0]}function Pht(e){return e[1]}function Nht(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Dht(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class cK{static from(t,n=Iht,r=Pht,i){return new cK("length"in t?Oht(t,n,r,i):Float64Array.from(Mht(t,n,r,i)))}constructor(t){this._delaunator=new Z8(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Nht(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Dht(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new Z8(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new kht(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=Z2(n-l[t*2],2)+Z2(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=Z2(n-l[p*2],2)+Z2(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&Z2(n-l[h*2],2)+Z2(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new A_:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new A_:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Rht)}return r&&r.value()}renderHull(t){const n=t==null?t=new A_:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Oz;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new A_:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Oz;return this.renderTriangle(t,n),n.value()}}function Oht(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Mht(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Eae={},F$={},$$=34,cA=10,B$=13;function k2e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Lht(e,t){var n=k2e(e);return function(r,i){return t(n(r),i,e)}}function Sae(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Hf(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Fht(e){return e<0?"-"+Hf(-e,6):e>9999?"+"+Hf(e,6):Hf(e,4)}function $ht(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Fht(e.getUTCFullYear())+"-"+Hf(e.getUTCMonth()+1,2)+"-"+Hf(e.getUTCDate(),2)+(i?"T"+Hf(t,2)+":"+Hf(n,2)+":"+Hf(r,2)+"."+Hf(i,3)+"Z":r?"T"+Hf(t,2)+":"+Hf(n,2)+":"+Hf(r,2)+"Z":n||t?"T"+Hf(t,2)+":"+Hf(n,2)+"Z":"")}function Bht(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,b){if(h)return h(g,b-1);p=g,h=d?Lht(g,d):k2e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,b,y=p<=0,x=!1;f.charCodeAt(p-1)===cA&&--p,f.charCodeAt(p-1)===B$&&--p;function w(){if(y)return F$;if(x)return x=!1,Eae;var C,R=m,I;if(f.charCodeAt(R)===$$){for(;m++<p&&f.charCodeAt(m)!==$$||f.charCodeAt(++m)===$$;);return(C=m)>=p?y=!0:(I=f.charCodeAt(m++))===cA?x=!0:I===B$&&(x=!0,f.charCodeAt(m)===cA&&++m),f.slice(R+1,C-1).replace(/""/g,'"')}for(;m<p;){if((I=f.charCodeAt(C=m++))===cA)x=!0;else if(I===B$)x=!0,f.charCodeAt(m)===cA&&++m;else if(I!==n)continue;return f.slice(R,C)}return y=!0,f.slice(R,p)}for(;(b=w())!==F$;){for(var S=[];b!==Eae&&b!==F$;)S.push(b),b=w();d&&(S=d(S,g++))==null||h.push(S)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Sae(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Sae(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?$ht(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function jht(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Uht(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return R2e(this.cover(t,n),t,n,e)}function R2e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,b,y;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[b=g<<1|m]))return i[b]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[b]=o:e._root=o,e;do i=i?i[b]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((b=g<<1|m)===(y=(p>=d)<<1|h>=f));return i[y]=s,i[b]=o,e}function zht(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)R2e(this,o[n],a[n],e[n]);return this}function Vht(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Hht(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function qht(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function tf(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Wht(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new tf(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,b=(a+l)/2;d.push(new tf(h[3],g,b,u,l),new tf(h[2],o,b,g,l),new tf(h[1],g,a,u,b),new tf(h[0],o,a,g,b)),(m=(t>=b)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var y=e-+this._x.call(null,h.data),x=t-+this._y.call(null,h.data),w=y*y+x*x;if(w<n){var S=Math.sqrt(n=w);i=e-S,s=t-S,c=e+S,f=t+S,r=h.data}}return r}function Ght(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,b;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,b=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=s,this)}function Yht(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Kht(){return this._root}function Xht(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Qht(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new tf(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new tf(i,l,c,a,u)),(i=r[2])&&t.push(new tf(i,s,c,l,u)),(i=r[1])&&t.push(new tf(i,l,o,a,c)),(i=r[0])&&t.push(new tf(i,s,o,l,c))}return this}function Jht(e){var t=[],n=[],r;for(this._root&&t.push(new tf(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new tf(s,o,a,c,f)),(s=i[1])&&t.push(new tf(s,c,a,u,f)),(s=i[2])&&t.push(new tf(s,o,f,c,l)),(s=i[3])&&t.push(new tf(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Zht(e){return e[0]}function ept(e){return arguments.length?(this._x=e,this):this._x}function tpt(e){return e[1]}function npt(e){return arguments.length?(this._y=e,this):this._y}function fK(e,t,n){var r=new dK(t??Zht,n??tpt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function dK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Tae(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var hf=fK.prototype=dK.prototype;hf.copy=function(){var e=new dK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Tae(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Tae(r));return e};hf.add=Uht;hf.addAll=zht;hf.cover=Vht;hf.data=Hht;hf.extent=qht;hf.find=Wht;hf.remove=Ght;hf.removeAll=Yht;hf.root=Kht;hf.size=Xht;hf.visit=Qht;hf.visitAfter=Jht;hf.x=ept;hf.y=npt;function rf(e){return function(){return e}}function jv(e){return(e()-.5)*1e-6}function rpt(e){return e.x+e.vx}function ipt(e){return e.y+e.vy}function spt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=rf(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,b=0;b<s;++b)for(f=fK(t,rpt,ipt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(y);function y(x,w,S,C,R){var I=x.data,O=x.r,M=m+O;if(I){if(I.index>d.index){var L=h-I.x-I.vx,V=p-I.y-I.vy,D=L*L+V*V;D<M*M&&(L===0&&(L=jv(r),D+=L*L),V===0&&(V=jv(r),D+=V*V),D=(M-(D=Math.sqrt(D)))/D*i,d.vx+=(L*=D)*(M=(O*=O)/(g+O)),d.vy+=(V*=D)*M,I.vx-=L*(M=1-M),I.vy-=V*M)}return}return w>h+M||C<h-M||S>p+M||R<p-M}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:rf(+l),u(),o):e},o}function opt(e){return e.index}function Cae(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function apt(e){var t=opt,n=f,r,i=rf(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var b=0,y=e.length;b<c;++b)for(var x=0,w,S,C,R,I,O,M;x<y;++x)w=e[x],S=w.source,C=w.target,R=C.x+C.vx-S.x-S.vx||jv(l),I=C.y+C.vy-S.y-S.vy||jv(l),O=Math.sqrt(R*R+I*I),O=(O-s[x])/O*g*r[x],R*=O,I*=O,C.vx-=R*(M=u[x]),C.vy-=I*M,S.vx+=R*(M=1-M),S.vy+=I*M}function h(){if(o){var g,b=o.length,y=e.length,x=new Map(o.map((S,C)=>[t(S,C,o),S])),w;for(g=0,a=new Array(b);g<y;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Cae(x,w.source)),typeof w.target!="object"&&(w.target=Cae(x,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(y);g<y;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(y),p(),s=new Array(y),m()}}function p(){if(o)for(var g=0,b=e.length;g<b;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,b=e.length;g<b;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,b){o=g,l=b,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:rf(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:rf(+g),m(),d):i},d}const upt=1664525,lpt=1013904223,Aae=4294967296;function cpt(){let e=1;return()=>(e=(upt*e+lpt)%Aae)/Aae}function fpt(e){return e.x}function dpt(e){return e.y}var hpt=10,ppt=Math.PI*(3-Math.sqrt(5));function mpt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=oK(f),l=QY("tick","end"),c=cpt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,b=e.length,y;m===void 0&&(m=1);for(var x=0;x<m;++x)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<b;++g)y=e[g],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return t}function h(){for(var m=0,g=e.length,b;m<g;++m){if(b=e[m],b.index=m,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var y=hpt*Math.sqrt(.5+m),x=m*ppt;b.x=y*Math.cos(x),b.y=y*Math.sin(x)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,b){var y=0,x=e.length,w,S,C,R,I;for(b==null?b=1/0:b*=b,y=0;y<x;++y)R=e[y],w=m-R.x,S=g-R.y,C=w*w+S*S,C<b&&(I=R,b=C);return I},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function gpt(){var e,t,n,r,i=rf(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=fK(e,fpt,dpt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,b=0,y,x,w;if(h.length){for(y=x=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,b+=g,y+=g*m.x,x+=g*m.y);h.x=y/b,h.y=x/b}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var b=h.x-t.x,y=h.y-t.y,x=g-p,w=b*b+y*y;if(x*x/u<w)return w<a&&(b===0&&(b=jv(n),w+=b*b),y===0&&(y=jv(n),w+=y*y),w<o&&(w=Math.sqrt(o*w)),t.vx+=b*h.value*r/w,t.vy+=y*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(b===0&&(b=jv(n),w+=b*b),y===0&&(y=jv(n),w+=y*y),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(x=s[h.data.index]*r/w,t.vx+=b*x,t.vy+=y*x);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:rf(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function ypt(e){var t=rf(.1),n,r,i;typeof e!="function"&&(e=rf(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:rf(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:rf(+a),o(),s):e},s}function vpt(e){var t=rf(.1),n,r,i;typeof e!="function"&&(e=rf(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:rf(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:rf(+a),o(),s):e},s}function bpt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function eD(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function PS(e){return e=eD(Math.abs(e)),e?e[1]:NaN}function xpt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function _pt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var wpt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tw(e){if(!(t=wpt.exec(e)))throw new Error("invalid format: "+e);var t;return new hK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}tw.prototype=hK.prototype;function hK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ept(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var I2e;function Spt(e,t){var n=eD(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(I2e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+eD(e,Math.max(0,t+s-1))[0]}function kae(e,t){var n=eD(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Rae={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:bpt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kae(e*100,t),r:kae,s:Spt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Iae(e){return e}var Pae=Array.prototype.map,Nae=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function P2e(e){var t=e.grouping===void 0||e.thousands===void 0?Iae:xpt(Pae.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Iae:_pt(Pae.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=tw(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,b=f.width,y=f.comma,x=f.precision,w=f.trim,S=f.type;S==="n"?(y=!0,S="g"):Rae[S]||(x===void 0&&(x=12),w=!0,S="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",R=m==="$"?r:/[%p]/.test(S)?o:"",I=Rae[S],O=/[defgprs%]/.test(S);x=x===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function M(L){var V=C,D=R,j,z,G;if(S==="c")D=I(L)+D,L="";else{L=+L;var ee=L<0||1/L<0;if(L=isNaN(L)?u:I(Math.abs(L),x),w&&(L=Ept(L)),ee&&+L==0&&p!=="+"&&(ee=!1),V=(ee?p==="("?p:a:p==="-"||p==="("?"":p)+V,D=(S==="s"?Nae[8+I2e/3]:"")+D+(ee&&p==="("?")":""),O){for(j=-1,z=L.length;++j<z;)if(G=L.charCodeAt(j),48>G||G>57){D=(G===46?i+L.slice(j+1):L.slice(j))+D,L=L.slice(0,j);break}}}y&&!g&&(L=t(L,1/0));var ne=V.length+L.length+D.length,ue=ne<b?new Array(b-ne+1).join(d):"";switch(y&&g&&(L=t(ue+L,ue.length?b-D.length:1/0),ue=""),h){case"<":L=V+L+D+ue;break;case"=":L=V+ue+L+D;break;case"^":L=ue.slice(0,ne=ue.length>>1)+V+L+D+ue.slice(ne);break;default:L=ue+V+L+D;break}return s(L)}return M.toString=function(){return f+""},M}function c(f,d){var h=l((f=tw(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(PS(d)/3)))*3,m=Math.pow(10,-p),g=Nae[8+p/3];return function(b){return h(m*b)+g}}return{format:l,formatPrefix:c}}var z6,dM,pK;Tpt({thousands:",",grouping:[3],currency:["$",""]});function Tpt(e){return z6=P2e(e),dM=z6.format,pK=z6.formatPrefix,z6}function N2e(e){return Math.max(0,-PS(Math.abs(e)))}function D2e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(PS(t)/3)))*3-PS(Math.abs(e)))}function O2e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,PS(t)-PS(e))+1}var Yn=1e-6,Mz=1e-12,Wr=Math.PI,qo=Wr/2,tD=Wr/4,lf=Wr*2,ma=180/Wr,zr=Wr/180,hi=Math.abs,KT=Math.atan,tp=Math.atan2,Wn=Math.cos,V6=Math.ceil,M2e=Math.exp,Lz=Math.hypot,nD=Math.log,j$=Math.pow,$n=Math.sin,Yh=Math.sign||function(e){return e>0?1:e<0?-1:0},cf=Math.sqrt,mK=Math.tan;function L2e(e){return e>1?0:e<-1?Wr:Math.acos(e)}function sd(e){return e>1?qo:e<-1?-qo:Math.asin(e)}function bl(){}function rD(e,t){e&&Oae.hasOwnProperty(e.type)&&Oae[e.type](e,t)}var Dae={Feature:function(e,t){rD(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)rD(n[r].geometry,t)}},Oae={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Fz(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Fz(n[r],t,0)},Polygon:function(e,t){Mae(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Mae(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)rD(n[r],t)}};function Fz(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Mae(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Fz(e[n],t,1);t.polygonEnd()}function My(e,t){e&&Dae.hasOwnProperty(e.type)?Dae[e.type](e,t):rD(e,t)}var iD=new af,sD=new af,F2e,$2e,$z,Bz,jz,lg={point:bl,lineStart:bl,lineEnd:bl,polygonStart:function(){iD=new af,lg.lineStart=Cpt,lg.lineEnd=Apt},polygonEnd:function(){var e=+iD;sD.add(e<0?lf+e:e),this.lineStart=this.lineEnd=this.point=bl},sphere:function(){sD.add(lf)}};function Cpt(){lg.point=kpt}function Apt(){B2e(F2e,$2e)}function kpt(e,t){lg.point=B2e,F2e=e,$2e=t,e*=zr,t*=zr,$z=e,Bz=Wn(t=t/2+tD),jz=$n(t)}function B2e(e,t){e*=zr,t*=zr,t=t/2+tD;var n=e-$z,r=n>=0?1:-1,i=r*n,s=Wn(t),o=$n(t),a=jz*o,u=Bz*s+a*Wn(i),l=a*r*$n(i);iD.add(tp(l,u)),$z=e,Bz=s,jz=o}function Rpt(e){return sD=new af,My(e,lg),sD*2}function oD(e){return[tp(e[1],e[0]),sd(e[2])]}function nw(e){var t=e[0],n=e[1],r=Wn(n);return[r*Wn(t),r*$n(t),$n(n)]}function H6(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function NS(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function U$(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function q6(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function aD(e){var t=cf(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var _o,Kf,Uo,Hd,u_,j2e,U2e,QE,kk,Cv,x1,Iy={point:Uz,lineStart:Lae,lineEnd:Fae,polygonStart:function(){Iy.point=V2e,Iy.lineStart=Ipt,Iy.lineEnd=Ppt,kk=new af,lg.polygonStart()},polygonEnd:function(){lg.polygonEnd(),Iy.point=Uz,Iy.lineStart=Lae,Iy.lineEnd=Fae,iD<0?(_o=-(Uo=180),Kf=-(Hd=90)):kk>Yn?Hd=90:kk<-1e-6&&(Kf=-90),x1[0]=_o,x1[1]=Uo},sphere:function(){_o=-(Uo=180),Kf=-(Hd=90)}};function Uz(e,t){Cv.push(x1=[_o=e,Uo=e]),t<Kf&&(Kf=t),t>Hd&&(Hd=t)}function z2e(e,t){var n=nw([e*zr,t*zr]);if(QE){var r=NS(QE,n),i=[r[1],-r[0],0],s=NS(i,r);aD(s),s=oD(s);var o=e-u_,a=o>0?1:-1,u=s[0]*ma*a,l,c=hi(o)>180;c^(a*u_<u&&u<a*e)?(l=s[1]*ma,l>Hd&&(Hd=l)):(u=(u+360)%360-180,c^(a*u_<u&&u<a*e)?(l=-s[1]*ma,l<Kf&&(Kf=l)):(t<Kf&&(Kf=t),t>Hd&&(Hd=t))),c?e<u_?zd(_o,e)>zd(_o,Uo)&&(Uo=e):zd(e,Uo)>zd(_o,Uo)&&(_o=e):Uo>=_o?(e<_o&&(_o=e),e>Uo&&(Uo=e)):e>u_?zd(_o,e)>zd(_o,Uo)&&(Uo=e):zd(e,Uo)>zd(_o,Uo)&&(_o=e)}else Cv.push(x1=[_o=e,Uo=e]);t<Kf&&(Kf=t),t>Hd&&(Hd=t),QE=n,u_=e}function Lae(){Iy.point=z2e}function Fae(){x1[0]=_o,x1[1]=Uo,Iy.point=Uz,QE=null}function V2e(e,t){if(QE){var n=e-u_;kk.add(hi(n)>180?n+(n>0?360:-360):n)}else j2e=e,U2e=t;lg.point(e,t),z2e(e,t)}function Ipt(){lg.lineStart()}function Ppt(){V2e(j2e,U2e),lg.lineEnd(),hi(kk)>Yn&&(_o=-(Uo=180)),x1[0]=_o,x1[1]=Uo,QE=null}function zd(e,t){return(t-=e)<0?t+360:t}function Npt(e,t){return e[0]-t[0]}function $ae(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Dpt(e){var t,n,r,i,s,o,a;if(Hd=Uo=-(_o=Kf=1/0),Cv=[],My(e,Iy),n=Cv.length){for(Cv.sort(Npt),t=1,r=Cv[0],s=[r];t<n;++t)i=Cv[t],$ae(r,i[0])||$ae(r,i[1])?(zd(r[0],i[1])>zd(r[0],r[1])&&(r[1]=i[1]),zd(i[0],r[1])>zd(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=zd(r[1],i[0]))>o&&(o=a,_o=i[0],Uo=r[1])}return Cv=x1=null,_o===1/0||Kf===1/0?[[NaN,NaN],[NaN,NaN]]:[[_o,Kf],[Uo,Hd]]}var F3,uD,lD,cD,fD,dD,hD,pD,zz,Vz,Hz,H2e,q2e,Jc,Zc,ef,p0={sphere:bl,point:gK,lineStart:Bae,lineEnd:jae,polygonStart:function(){p0.lineStart=Lpt,p0.lineEnd=Fpt},polygonEnd:function(){p0.lineStart=Bae,p0.lineEnd=jae}};function gK(e,t){e*=zr,t*=zr;var n=Wn(t);VR(n*Wn(e),n*$n(e),$n(t))}function VR(e,t,n){++F3,lD+=(e-lD)/F3,cD+=(t-cD)/F3,fD+=(n-fD)/F3}function Bae(){p0.point=Opt}function Opt(e,t){e*=zr,t*=zr;var n=Wn(t);Jc=n*Wn(e),Zc=n*$n(e),ef=$n(t),p0.point=Mpt,VR(Jc,Zc,ef)}function Mpt(e,t){e*=zr,t*=zr;var n=Wn(t),r=n*Wn(e),i=n*$n(e),s=$n(t),o=tp(cf((o=Zc*s-ef*i)*o+(o=ef*r-Jc*s)*o+(o=Jc*i-Zc*r)*o),Jc*r+Zc*i+ef*s);uD+=o,dD+=o*(Jc+(Jc=r)),hD+=o*(Zc+(Zc=i)),pD+=o*(ef+(ef=s)),VR(Jc,Zc,ef)}function jae(){p0.point=gK}function Lpt(){p0.point=$pt}function Fpt(){W2e(H2e,q2e),p0.point=gK}function $pt(e,t){H2e=e,q2e=t,e*=zr,t*=zr,p0.point=W2e;var n=Wn(t);Jc=n*Wn(e),Zc=n*$n(e),ef=$n(t),VR(Jc,Zc,ef)}function W2e(e,t){e*=zr,t*=zr;var n=Wn(t),r=n*Wn(e),i=n*$n(e),s=$n(t),o=Zc*s-ef*i,a=ef*r-Jc*s,u=Jc*i-Zc*r,l=Lz(o,a,u),c=sd(l),f=l&&-c/l;zz.add(f*o),Vz.add(f*a),Hz.add(f*u),uD+=c,dD+=c*(Jc+(Jc=r)),hD+=c*(Zc+(Zc=i)),pD+=c*(ef+(ef=s)),VR(Jc,Zc,ef)}function Bpt(e){F3=uD=lD=cD=fD=dD=hD=pD=0,zz=new af,Vz=new af,Hz=new af,My(e,p0);var t=+zz,n=+Vz,r=+Hz,i=Lz(t,n,r);return i<Mz&&(t=dD,n=hD,r=pD,uD<Yn&&(t=lD,n=cD,r=fD),i=Lz(t,n,r),i<Mz)?[NaN,NaN]:[tp(n,t)*ma,sd(r/i)*ma]}function qz(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Wz(e,t){return hi(e)>Wr&&(e-=Math.round(e/lf)*lf),[e,t]}Wz.invert=Wz;function G2e(e,t,n){return(e%=lf)?t||n?qz(zae(e),Vae(t,n)):zae(e):t||n?Vae(t,n):Wz}function Uae(e){return function(t,n){return t+=e,hi(t)>Wr&&(t-=Math.round(t/lf)*lf),[t,n]}}function zae(e){var t=Uae(e);return t.invert=Uae(-e),t}function Vae(e,t){var n=Wn(e),r=$n(e),i=Wn(t),s=$n(t);function o(a,u){var l=Wn(u),c=Wn(a)*l,f=$n(a)*l,d=$n(u),h=d*n+c*r;return[tp(f*i-h*s,c*n-d*r),sd(h*i+f*s)]}return o.invert=function(a,u){var l=Wn(u),c=Wn(a)*l,f=$n(a)*l,d=$n(u),h=d*i-f*s;return[tp(f*i+d*s,c*n+h*r),sd(h*n-c*r)]},o}function jpt(e){e=G2e(e[0]*zr,e[1]*zr,e.length>2?e[2]*zr:0);function t(n){return n=e(n[0]*zr,n[1]*zr),n[0]*=ma,n[1]*=ma,n}return t.invert=function(n){return n=e.invert(n[0]*zr,n[1]*zr),n[0]*=ma,n[1]*=ma,n},t}function Upt(e,t,n,r,i,s){if(n){var o=Wn(t),a=$n(t),u=r*n;i==null?(i=t+r*lf,s=t-u/2):(i=Hae(o,i),s=Hae(o,s),(r>0?i<s:i>s)&&(i+=r*lf));for(var l,c=i;r>0?c>s:c<s;c-=u)l=oD([o,-a*Wn(c),-a*$n(c)]),e.point(l[0],l[1])}}function Hae(e,t){t=nw(t),t[0]-=e,aD(t);var n=L2e(-t[1]);return((-t[2]<0?-n:n)+lf-Yn)%lf}function Y2e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:bl,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function AN(e,t){return hi(e[0]-t[0])<Yn&&hi(e[1]-t[1])<Yn}function W6(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function K2e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],b=p[m],y;if(AN(g,b)){if(!g[2]&&!b[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}b[0]+=2*Yn}s.push(y=new W6(g,p,null,!0)),o.push(y.o=new W6(g,null,y,!1)),s.push(y=new W6(b,p,null,!1)),o.push(y.o=new W6(b,null,y,!0))}}),!!s.length){for(o.sort(t),qae(s),qae(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function qae(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function z$(e){return hi(e[0])<=Wr?e[0]:Yh(e[0])*((hi(e[0])+Wr)%lf-Wr)}function zpt(e,t){var n=z$(t),r=t[1],i=$n(r),s=[$n(n),-Wn(n),0],o=0,a=0,u=new af;i===1?r=qo+Yn:i===-1&&(r=-qo-Yn);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=z$(h),m=h[1]/2+tD,g=$n(m),b=Wn(m),y=0;y<d;++y,p=w,g=C,b=R,h=x){var x=f[y],w=z$(x),S=x[1]/2+tD,C=$n(S),R=Wn(S),I=w-p,O=I>=0?1:-1,M=O*I,L=M>Wr,V=g*C;if(u.add(tp(V*O*$n(M),b*R+V*Wn(M))),o+=L?I+O*lf:I,L^p>=n^w>=n){var D=NS(nw(h),nw(x));aD(D);var j=NS(s,D);aD(j);var z=(L^I>=0?-1:1)*sd(j[2]);(r>z||r===z&&(D[0]||D[1]))&&(a+=L^I>=0?1:-1)}}return(o<-1e-6||o<Yn&&u<-1e-12)^a&1}function X2e(e,t,n,r){return function(i){var s=t(i),o=Y2e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=b,d.lineStart=y,d.lineEnd=x,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=Owe(c);var w=zpt(l,r);c.length?(u||(i.polygonStart(),u=!0),K2e(c,Hpt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,S){e(w,S)&&i.point(w,S)}function p(w,S){s.point(w,S)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function b(w,S){f.push([w,S]),a.point(w,S)}function y(){a.lineStart(),f=[]}function x(){b(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),S=o.result(),C,R=S.length,I,O,M;if(f.pop(),l.push(f),f=null,!!R){if(w&1){if(O=S[0],(I=O.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),C=0;C<I;++C)i.point((M=O[C])[0],M[1]);i.lineEnd()}return}R>1&&w&2&&S.push(S.pop().concat(S.shift())),c.push(S.filter(Vpt))}}return d}}function Vpt(e){return e.length>1}function Hpt(e,t){return((e=e.x)[0]<0?e[1]-qo-Yn:qo-e[1])-((t=t.x)[0]<0?t[1]-qo-Yn:qo-t[1])}const Wae=X2e(function(){return!0},qpt,Gpt,[-Wr,-qo]);function qpt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Wr:-Wr,u=hi(s-t);hi(u-Wr)<Yn?(e.point(t,n=(n+o)/2>0?qo:-qo),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Wr&&(hi(t-r)<Yn&&(t-=r*Yn),hi(s-a)<Yn&&(s-=a*Yn),n=Wpt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Wpt(e,t,n,r){var i,s,o=$n(e-n);return hi(o)>Yn?KT(($n(t)*(s=Wn(r))*$n(n)-$n(r)*(i=Wn(t))*$n(e))/(i*s*o)):(t+r)/2}function Gpt(e,t,n,r){var i;if(e==null)i=n*qo,r.point(-Wr,i),r.point(0,i),r.point(Wr,i),r.point(Wr,0),r.point(Wr,-i),r.point(0,-i),r.point(-Wr,-i),r.point(-Wr,0),r.point(-Wr,i);else if(hi(e[0]-t[0])>Yn){var s=e[0]<t[0]?Wr:-Wr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Ypt(e){var t=Wn(e),n=2*zr,r=t>0,i=hi(t)>Yn;function s(c,f,d,h){Upt(h,e,n,d,c,f)}function o(c,f){return Wn(c)*Wn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,b){var y=[g,b],x,w=o(g,b),S=r?w?0:l(g,b):w?l(g+(g<0?Wr:-Wr),b):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(x=u(f,y),(!x||AN(f,x)||AN(y,x))&&(y[2]=1)),w!==h)m=0,w?(c.lineStart(),x=u(y,f),c.point(x[0],x[1])):(x=u(f,y),c.point(x[0],x[1],2),c.lineEnd()),f=x;else if(i&&f&&r^w){var C;!(S&d)&&(C=u(y,f,!0))&&(m=0,r?(c.lineStart(),c.point(C[0][0],C[0][1]),c.point(C[1][0],C[1][1]),c.lineEnd()):(c.point(C[1][0],C[1][1]),c.lineEnd(),c.lineStart(),c.point(C[0][0],C[0][1],3)))}w&&(!f||!AN(f,y))&&c.point(y[0],y[1]),f=y,h=w,d=S},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=nw(c),p=nw(f),m=[1,0,0],g=NS(h,p),b=H6(g,g),y=g[0],x=b-y*y;if(!x)return!d&&c;var w=t*b/x,S=-t*y/x,C=NS(m,g),R=q6(m,w),I=q6(g,S);U$(R,I);var O=C,M=H6(R,O),L=H6(O,O),V=M*M-L*(H6(R,R)-1);if(!(V<0)){var D=cf(V),j=q6(O,(-M-D)/L);if(U$(j,R),j=oD(j),!d)return j;var z=c[0],G=f[0],ee=c[1],ne=f[1],ue;G<z&&(ue=z,z=G,G=ue);var X=G-z,W=hi(X-Wr)<Yn,te=W||X<Yn;if(!W&&ne<ee&&(ue=ee,ee=ne,ne=ue),te?W?ee+ne>0^j[1]<(hi(j[0]-z)<Yn?ee:ne):ee<=j[1]&&j[1]<=ne:X>Wr^(z<=j[0]&&j[0]<=G)){var q=q6(O,(-M+D)/L);return U$(q,R),[j,oD(q)]}}}function l(c,f){var d=r?e:Wr-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return X2e(o,a,s,r?[0,-e]:[-Wr,e-Wr])}function Kpt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var G6=1e9,Y6=-1e9;function Q2e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return hi(l[0]-e)<Yn?c>0?0:3:hi(l[0]-n)<Yn?c>0?2:1:hi(l[1]-t)<Yn?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=Y2e(),d,h,p,m,g,b,y,x,w,S,C,R={point:I,lineStart:V,lineEnd:D,polygonStart:M,polygonEnd:L};function I(z,G){i(z,G)&&c.point(z,G)}function O(){for(var z=0,G=0,ee=h.length;G<ee;++G)for(var ne=h[G],ue=1,X=ne.length,W=ne[0],te,q,J=W[0],oe=W[1];ue<X;++ue)te=J,q=oe,W=ne[ue],J=W[0],oe=W[1],q<=r?oe>r&&(J-te)*(r-q)>(oe-q)*(e-te)&&++z:oe<=r&&(J-te)*(r-q)<(oe-q)*(e-te)&&--z;return z}function M(){c=f,d=[],h=[],C=!0}function L(){var z=O(),G=C&&z,ee=(d=Owe(d)).length;(G||ee)&&(l.polygonStart(),G&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),ee&&K2e(d,a,z,s,l),l.polygonEnd()),c=l,d=h=p=null}function V(){R.point=j,h&&h.push(p=[]),S=!0,w=!1,y=x=NaN}function D(){d&&(j(m,g),b&&w&&f.rejoin(),d.push(f.result())),R.point=I,w&&c.lineEnd()}function j(z,G){var ee=i(z,G);if(h&&p.push([z,G]),S)m=z,g=G,b=ee,S=!1,ee&&(c.lineStart(),c.point(z,G));else if(ee&&w)c.point(z,G);else{var ne=[y=Math.max(Y6,Math.min(G6,y)),x=Math.max(Y6,Math.min(G6,x))],ue=[z=Math.max(Y6,Math.min(G6,z)),G=Math.max(Y6,Math.min(G6,G))];Kpt(ne,ue,e,t,n,r)?(w||(c.lineStart(),c.point(ne[0],ne[1])),c.point(ue[0],ue[1]),ee||c.lineEnd(),C=!1):ee&&(c.lineStart(),c.point(z,G),C=!1)}y=z,x=G,w=ee}return R}}function Gae(e,t,n){var r=Kd(e,t-Yn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Yae(e,t,n){var r=Kd(e,t-Yn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Xpt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return Kd(V6(r/c)*c,n,c).map(p).concat(Kd(V6(a/f)*f,o,f).map(m)).concat(Kd(V6(t/u)*u,e,u).filter(function(x){return hi(x%c)>Yn}).map(d)).concat(Kd(V6(s/l)*l,i,l).filter(function(x){return hi(x%f)>Yn}).map(h))}return b.lines=function(){return y().map(function(x){return{type:"LineString",coordinates:x}})},b.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},b.extent=function(x){return arguments.length?b.extentMajor(x).extentMinor(x):b.extentMinor()},b.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],a=+x[0][1],o=+x[1][1],r>n&&(x=r,r=n,n=x),a>o&&(x=a,a=o,o=x),b.precision(g)):[[r,a],[n,o]]},b.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],s=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),s>i&&(x=s,s=i,i=x),b.precision(g)):[[t,s],[e,i]]},b.step=function(x){return arguments.length?b.stepMajor(x).stepMinor(x):b.stepMinor()},b.stepMajor=function(x){return arguments.length?(c=+x[0],f=+x[1],b):[c,f]},b.stepMinor=function(x){return arguments.length?(u=+x[0],l=+x[1],b):[u,l]},b.precision=function(x){return arguments.length?(g=+x,d=Gae(s,i,90),h=Yae(t,e,g),p=Gae(a,o,90),m=Yae(r,n,g),b):g},b.extentMajor([[-180,-90+Yn],[180,90-Yn]]).extentMinor([[-180,-80-Yn],[180,80+Yn]])}const E4=e=>e;var V$=new af,Gz=new af,J2e,Z2e,Yz,Kz,Ly={point:bl,lineStart:bl,lineEnd:bl,polygonStart:function(){Ly.lineStart=Qpt,Ly.lineEnd=Zpt},polygonEnd:function(){Ly.lineStart=Ly.lineEnd=Ly.point=bl,V$.add(hi(Gz)),Gz=new af},result:function(){var e=V$/2;return V$=new af,e}};function Qpt(){Ly.point=Jpt}function Jpt(e,t){Ly.point=eEe,J2e=Yz=e,Z2e=Kz=t}function eEe(e,t){Gz.add(Kz*e-Yz*t),Yz=e,Kz=t}function Zpt(){eEe(J2e,Z2e)}var DS=1/0,mD=DS,S4=-DS,gD=S4,yD={point:e0t,lineStart:bl,lineEnd:bl,polygonStart:bl,polygonEnd:bl,result:function(){var e=[[DS,mD],[S4,gD]];return S4=gD=-(mD=DS=1/0),e}};function e0t(e,t){e<DS&&(DS=e),e>S4&&(S4=e),t<mD&&(mD=t),t>gD&&(gD=t)}var Xz=0,Qz=0,$3=0,vD=0,bD=0,NE=0,Jz=0,Zz=0,B3=0,tEe,nEe,Pm,Nm,Gh={point:rw,lineStart:Kae,lineEnd:Xae,polygonStart:function(){Gh.lineStart=r0t,Gh.lineEnd=i0t},polygonEnd:function(){Gh.point=rw,Gh.lineStart=Kae,Gh.lineEnd=Xae},result:function(){var e=B3?[Jz/B3,Zz/B3]:NE?[vD/NE,bD/NE]:$3?[Xz/$3,Qz/$3]:[NaN,NaN];return Xz=Qz=$3=vD=bD=NE=Jz=Zz=B3=0,e}};function rw(e,t){Xz+=e,Qz+=t,++$3}function Kae(){Gh.point=t0t}function t0t(e,t){Gh.point=n0t,rw(Pm=e,Nm=t)}function n0t(e,t){var n=e-Pm,r=t-Nm,i=cf(n*n+r*r);vD+=i*(Pm+e)/2,bD+=i*(Nm+t)/2,NE+=i,rw(Pm=e,Nm=t)}function Xae(){Gh.point=rw}function r0t(){Gh.point=s0t}function i0t(){rEe(tEe,nEe)}function s0t(e,t){Gh.point=rEe,rw(tEe=Pm=e,nEe=Nm=t)}function rEe(e,t){var n=e-Pm,r=t-Nm,i=cf(n*n+r*r);vD+=i*(Pm+e)/2,bD+=i*(Nm+t)/2,NE+=i,i=Nm*e-Pm*t,Jz+=i*(Pm+e),Zz+=i*(Nm+t),B3+=i*3,rw(Pm=e,Nm=t)}function iEe(e){this._context=e}iEe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,lf);break}}},result:bl};var eV=new af,H$,sEe,oEe,j3,U3,T4={point:bl,lineStart:function(){T4.point=o0t},lineEnd:function(){H$&&aEe(sEe,oEe),T4.point=bl},polygonStart:function(){H$=!0},polygonEnd:function(){H$=null},result:function(){var e=+eV;return eV=new af,e}};function o0t(e,t){T4.point=aEe,sEe=j3=e,oEe=U3=t}function aEe(e,t){j3-=e,U3-=t,eV.add(cf(j3*j3+U3*U3)),j3=e,U3=t}let Qae,xD,Jae,Zae;class eue{constructor(t){this._append=t==null?uEe:a0t(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Jae||this._append!==xD){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Jae=r,xD=this._append,Zae=this._,this._=i}this._+=Zae;break}}}result(){const t=this._;return this._="",t.length?t:null}}function uEe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function a0t(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return uEe;if(t!==Qae){const n=10**t;Qae=t,xD=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return xD}function lEe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),My(a,i(s))),s.result()}return o.area=function(a){return My(a,i(Ly)),Ly.result()},o.measure=function(a){return My(a,i(T4)),T4.result()},o.bounds=function(a){return My(a,i(yD)),yD.result()},o.centroid=function(a){return My(a,i(Gh)),Gh.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,E4):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new eue(n)):new iEe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new eue(n)),o},o.projection(e).digits(n).context(t)}function hM(e){return function(t){var n=new tV;for(var r in e)n[r]=e[r];return n.stream=t,n}}function tV(){}tV.prototype={constructor:tV,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function yK(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),My(n,e.stream(yD)),t(yD.result()),r!=null&&e.clipExtent(r),e}function pM(e,t,n){return yK(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function vK(e,t,n){return pM(e,[[0,0],t],n)}function bK(e,t,n){return yK(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function xK(e,t,n){return yK(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var tue=16,u0t=Wn(30*zr);function nue(e,t){return+t?c0t(e,t):l0t(e)}function l0t(e){return hM({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function c0t(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var b=l-r,y=c-i,x=b*b+y*y;if(x>4*t&&m--){var w=o+d,S=a+h,C=u+p,R=cf(w*w+S*S+C*C),I=sd(C/=R),O=hi(hi(C)-1)<Yn||hi(s-f)<Yn?(s+f)/2:tp(S,w),M=e(O,I),L=M[0],V=M[1],D=L-r,j=V-i,z=y*D-b*j;(z*z/x>t||hi((b*D+y*j)/x-.5)>.3||o*d+a*h+u*p<u0t)&&(n(r,i,s,o,a,u,L,V,O,w/=R,S/=R,C,m,g),g.point(L,V),n(L,V,O,w,S,C,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:b,lineStart:y,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=S},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function b(I,O){I=e(I,O),r.point(I[0],I[1])}function y(){f=NaN,g.point=x,r.lineStart()}function x(I,O){var M=nw([I,O]),L=e(I,O);n(f,d,c,h,p,m,f=L[0],d=L[1],c=I,h=M[0],p=M[1],m=M[2],tue,r),r.point(f,d)}function w(){g.point=b,r.lineEnd()}function S(){y(),g.point=C,g.lineEnd=R}function C(I,O){x(i=I,O),s=f,o=d,a=h,u=p,l=m,g.point=x}function R(){n(f,d,c,h,p,m,s,o,i,a,u,l,tue,r),g.lineEnd=w,w()}return g}}var f0t=hM({point:function(e,t){this.stream.point(e*zr,t*zr)}});function d0t(e){return hM({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function h0t(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function rue(e,t,n,r,i,s){if(!s)return h0t(e,t,n,r,i);var o=Wn(s),a=$n(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Sg(e){return cEe(function(){return e})()}function cEe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Wae,g=null,b,y,x,w=E4,S=.5,C,R,I,O,M;function L(z){return I(z[0]*zr,z[1]*zr)}function V(z){return z=I.invert(z[0],z[1]),z&&[z[0]*ma,z[1]*ma]}L.stream=function(z){return O&&M===z?O:O=f0t(d0t(c)(m(C(w(M=z)))))},L.preclip=function(z){return arguments.length?(m=z,p=void 0,j()):m},L.postclip=function(z){return arguments.length?(w=z,g=b=y=x=null,j()):w},L.clipAngle=function(z){return arguments.length?(m=+z?Ypt(p=z*zr):(p=null,Wae),j()):p*ma},L.clipExtent=function(z){return arguments.length?(w=z==null?(g=b=y=x=null,E4):Q2e(g=+z[0][0],b=+z[0][1],y=+z[1][0],x=+z[1][1]),j()):g==null?null:[[g,b],[y,x]]},L.scale=function(z){return arguments.length?(n=+z,D()):n},L.translate=function(z){return arguments.length?(r=+z[0],i=+z[1],D()):[r,i]},L.center=function(z){return arguments.length?(s=z[0]%360*zr,o=z[1]%360*zr,D()):[s*ma,o*ma]},L.rotate=function(z){return arguments.length?(a=z[0]%360*zr,u=z[1]%360*zr,l=z.length>2?z[2]%360*zr:0,D()):[a*ma,u*ma,l*ma]},L.angle=function(z){return arguments.length?(f=z%360*zr,D()):f*ma},L.reflectX=function(z){return arguments.length?(d=z?-1:1,D()):d<0},L.reflectY=function(z){return arguments.length?(h=z?-1:1,D()):h<0},L.precision=function(z){return arguments.length?(C=nue(R,S=z*z),j()):cf(S)},L.fitExtent=function(z,G){return pM(L,z,G)},L.fitSize=function(z,G){return vK(L,z,G)},L.fitWidth=function(z,G){return bK(L,z,G)},L.fitHeight=function(z,G){return xK(L,z,G)};function D(){var z=rue(n,0,0,d,h,f).apply(null,t(s,o)),G=rue(n,r-z[0],i-z[1],d,h,f);return c=G2e(a,u,l),R=qz(t,G),I=qz(c,R),C=nue(R,S),j()}function j(){return O=M=null,L}return function(){return t=e.apply(this,arguments),L.invert=t.invert&&V,D()}}function _K(e){var t=0,n=Wr/3,r=cEe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*zr,n=s[1]*zr):[t*ma,n*ma]},i}function p0t(e){var t=Wn(e);function n(r,i){return[r*t,$n(i)/t]}return n.invert=function(r,i){return[r/t,sd(i*t)]},n}function m0t(e,t){var n=$n(e),r=(n+$n(t))/2;if(hi(r)<Yn)return p0t(e);var i=1+n*(2*r-n),s=cf(i)/r;function o(a,u){var l=cf(i-2*r*$n(u))/r;return[l*$n(a*=r),s-l*Wn(a)]}return o.invert=function(a,u){var l=s-u,c=tp(a,hi(l))*Yh(l);return l*r<0&&(c-=Wr*Yh(a)*Yh(l)),[c/r,sd((i-(a*a+l*l)*r*r)/(2*r))]},o}function _D(){return _K(m0t).scale(155.424).center([0,33.6442])}function fEe(){return _D().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function g0t(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function y0t(){var e,t,n=fEe(),r,i=_D().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=_D().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=g0t([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Yn,m+.12*h+Yn],[p-.214*h-Yn,m+.234*h-Yn]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Yn,m+.166*h+Yn],[p-.115*h-Yn,m+.234*h-Yn]]).stream(l),f()},c.fitExtent=function(d,h){return pM(c,d,h)},c.fitSize=function(d,h){return vK(c,d,h)},c.fitWidth=function(d,h){return bK(c,d,h)},c.fitHeight=function(d,h){return xK(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function dEe(e){return function(t,n){var r=Wn(t),i=Wn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*$n(t),s*$n(n)]}}function HR(e){return function(t,n){var r=cf(t*t+n*n),i=e(r),s=$n(i),o=Wn(i);return[tp(t*s,r*o),sd(r&&n*s/r)]}}var hEe=dEe(function(e){return cf(2/(1+e))});hEe.invert=HR(function(e){return 2*sd(e/2)});function v0t(){return Sg(hEe).scale(124.75).clipAngle(180-.001)}var pEe=dEe(function(e){return(e=L2e(e))&&e/$n(e)});pEe.invert=HR(function(e){return e});function b0t(){return Sg(pEe).scale(79.4188).clipAngle(180-.001)}function mM(e,t){return[e,nD(mK((qo+t)/2))]}mM.invert=function(e,t){return[e,2*KT(M2e(t))-qo]};function x0t(){return mEe(mM).scale(961/lf)}function mEe(e){var t=Sg(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Wr*r(),d=t(jpt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===mM?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function K6(e){return mK((qo+e)/2)}function _0t(e,t){var n=Wn(e),r=e===t?$n(e):nD(n/Wn(t))/nD(K6(t)/K6(e)),i=n*j$(K6(e),r)/r;if(!r)return mM;function s(o,a){i>0?a<-qo+Yn&&(a=-qo+Yn):a>qo-Yn&&(a=qo-Yn);var u=i/j$(K6(a),r);return[u*$n(r*o),i-u*Wn(r*o)]}return s.invert=function(o,a){var u=i-a,l=Yh(r)*cf(o*o+u*u),c=tp(o,hi(u))*Yh(u);return u*r<0&&(c-=Wr*Yh(o)*Yh(u)),[c/r,2*KT(j$(i/l,1/r))-qo]},s}function w0t(){return _K(_0t).scale(109.5).parallels([30,30])}function wD(e,t){return[e,t]}wD.invert=wD;function E0t(){return Sg(wD).scale(152.63)}function S0t(e,t){var n=Wn(e),r=e===t?$n(e):(n-Wn(t))/(t-e),i=n/r+e;if(hi(r)<Yn)return wD;function s(o,a){var u=i-a,l=r*o;return[u*$n(l),i-u*Wn(l)]}return s.invert=function(o,a){var u=i-a,l=tp(o,hi(u))*Yh(u);return u*r<0&&(l-=Wr*Yh(o)*Yh(u)),[l/r,i-Yh(r)*cf(o*o+u*u)]},s}function T0t(){return _K(S0t).scale(131.154).center([0,13.9389])}var Rk=1.340264,Ik=-.081106,Pk=893e-6,Nk=.003796,ED=cf(3)/2,C0t=12;function gEe(e,t){var n=sd(ED*$n(t)),r=n*n,i=r*r*r;return[e*Wn(n)/(ED*(Rk+3*Ik*r+i*(7*Pk+9*Nk*r))),n*(Rk+Ik*r+i*(Pk+Nk*r))]}gEe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<C0t&&(a=n*(Rk+Ik*r+i*(Pk+Nk*r))-t,u=Rk+3*Ik*r+i*(7*Pk+9*Nk*r),n-=o=a/u,r=n*n,i=r*r*r,!(hi(o)<Mz));++s);return[ED*e*(Rk+3*Ik*r+i*(7*Pk+9*Nk*r))/Wn(n),sd($n(n)/ED)]};function A0t(){return Sg(gEe).scale(177.158)}function yEe(e,t){var n=Wn(t),r=Wn(e)*n;return[n*$n(e)/r,$n(t)/r]}yEe.invert=HR(KT);function k0t(){return Sg(yEe).scale(144.049).clipAngle(60)}function R0t(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=hM({point:function(w,S){var C=x([w,S]);this.stream.point(C[0],C[1])}}),m=E4,g,b;function y(){return d=e*r,h=e*i,g=b=null,x}function x(w){var S=w[0]*d,C=w[1]*h;if(s){var R=C*o-S*a;S=S*o+C*a,C=R}return[S+t,C+n]}return x.invert=function(w){var S=w[0]-t,C=w[1]-n;if(s){var R=C*o+S*a;S=S*o-C*a,C=R}return[S/d,C/h]},x.stream=function(w){return g&&b===w?g:g=p(m(b=w))},x.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,y()):m},x.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,E4):Q2e(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),y()):u==null?null:[[u,l],[c,f]]},x.scale=function(w){return arguments.length?(e=+w,y()):e},x.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],y()):[t,n]},x.angle=function(w){return arguments.length?(s=w%360*zr,a=$n(s),o=Wn(s),y()):s*ma},x.reflectX=function(w){return arguments.length?(r=w?-1:1,y()):r<0},x.reflectY=function(w){return arguments.length?(i=w?-1:1,y()):i<0},x.fitExtent=function(w,S){return pM(x,w,S)},x.fitSize=function(w,S){return vK(x,w,S)},x.fitWidth=function(w,S){return bK(x,w,S)},x.fitHeight=function(w,S){return xK(x,w,S)},x}function vEe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}vEe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(hi(i)>Yn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function I0t(){return Sg(vEe).scale(175.295)}function bEe(e,t){return[Wn(t)*$n(e),$n(t)]}bEe.invert=HR(sd);function P0t(){return Sg(bEe).scale(249.5).clipAngle(90+Yn)}function xEe(e,t){var n=Wn(t),r=1+Wn(e)*n;return[n*$n(e)/r,$n(t)/r]}xEe.invert=HR(function(e){return 2*KT(e)});function N0t(){return Sg(xEe).scale(250).clipAngle(142)}function _Ee(e,t){return[nD(mK((qo+t)/2)),-e]}_Ee.invert=function(e,t){return[-t,2*KT(M2e(e))-qo]};function D0t(){var e=mEe(_Ee),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function O0t(e,t){return e.parent===t.parent?1:2}function M0t(e){return e.reduce(L0t,0)/e.length}function L0t(e,t){return e+t.x}function F0t(e){return 1+e.reduce($0t,0)}function $0t(e,t){return Math.max(e,t.y)}function B0t(e){for(var t;t=e.children;)e=t[0];return e}function j0t(e){for(var t;t=e.children;)e=t[t.length-1];return e}function U0t(){var e=O0t,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=M0t(h),d.y=F0t(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=B0t(s),l=j0t(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function z0t(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function V0t(){return this.eachAfter(z0t)}function H0t(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function q0t(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function W0t(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function G0t(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Y0t(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function K0t(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function X0t(e){for(var t=this,n=Q0t(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Q0t(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function J0t(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Z0t(){return Array.from(this)}function emt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function tmt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*nmt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function wK(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=smt)):t===void 0&&(t=imt);for(var n=new OS(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new OS(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(wEe)}function rmt(){return wK(this).eachBefore(omt)}function imt(e){return e.children}function smt(e){return Array.isArray(e)?e[1]:null}function omt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function wEe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function OS(e){this.data=e,this.depth=this.height=0,this.parent=null}OS.prototype=wK.prototype={constructor:OS,count:V0t,each:H0t,eachAfter:W0t,eachBefore:q0t,find:G0t,sum:Y0t,sort:K0t,path:X0t,ancestors:J0t,descendants:Z0t,leaves:emt,links:tmt,copy:rmt,[Symbol.iterator]:nmt};function kN(e){return e==null?null:EEe(e)}function EEe(e){if(typeof e!="function")throw new Error;return e}function m_(){return 0}function SE(e){return function(){return e}}const amt=1664525,umt=1013904223,iue=4294967296;function lmt(){let e=1;return()=>(e=(amt*e+umt)%iue)/iue}function cmt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fmt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function dmt(e,t){for(var n=0,r=(e=fmt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&SEe(o,s)?++n:(o=pmt(i=hmt(i,s)),n=0);return o}function hmt(e,t){var n,r;if(q$(t,e))return[t];for(n=0;n<e.length;++n)if(X6(t,e[n])&&q$(z3(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(X6(z3(e[n],e[r]),t)&&X6(z3(e[n],t),e[r])&&X6(z3(e[r],t),e[n])&&q$(TEe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function X6(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function SEe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function q$(e,t){for(var n=0;n<t.length;++n)if(!SEe(e,t[n]))return!1;return!0}function pmt(e){switch(e.length){case 1:return mmt(e[0]);case 2:return z3(e[0],e[1]);case 3:return TEe(e[0],e[1],e[2])}}function mmt(e){return{x:e.x,y:e.y,r:e.r}}function z3(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function TEe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,b=f-s,y=r*r+i*i-s*s,x=y-o*o-a*a+u*u,w=y-l*l-c*c+f*f,S=h*p-d*m,C=(p*w-m*x)/(S*2)-r,R=(m*g-p*b)/S,I=(h*x-d*w)/(S*2)-i,O=(d*b-h*g)/S,M=R*R+O*O-1,L=2*(s+C*R+I*O),V=C*C+I*I-s*s,D=-(Math.abs(M)>1e-6?(L+Math.sqrt(L*L-4*M*V))/(2*M):V/L);return{x:r+C+R*D,y:i+I+O*D,r:D}}function sue(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function oue(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function aue(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function Q6(e){this._=e,this.next=null,this.previous=null}function gmt(e,t){if(!(s=(e=cmt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;sue(r,n,i=e[2]),n=new Q6(n),r=new Q6(r),i=new Q6(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){sue(n._,r._,i=e[u]),i=new Q6(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(oue(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(oue(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=aue(n);(i=i.next)!==r;)(a=aue(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=dmt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function ymt(e){return Math.sqrt(e.value)}function vmt(){var e=null,t=1,n=1,r=m_;function i(s){const o=lmt();return s.x=t/2,s.y=n/2,e?s.eachBefore(uue(e)).eachAfter(W$(r,.5,o)).eachBefore(lue(1)):s.eachBefore(uue(ymt)).eachAfter(W$(m_,1,o)).eachAfter(W$(r,s.r/Math.min(t,n),o)).eachBefore(lue(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=kN(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:SE(+s),i):r},i}function uue(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function W$(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=gmt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function lue(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function CEe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function qR(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function bmt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(CEe),o}function s(o,a){return function(u){u.children&&qR(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var xmt={depth:-1},cue={},G$={};function _mt(e){return e.id}function wmt(e){return e.parentId}function fue(){var e=_mt,t=wmt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const b=s.map((w,S)=>Emt(n(w,S,i))),y=b.map(due),x=new Set(b).add("");for(const w of y)x.has(w)||(x.add(w),b.push(w),y.push(due(w)),s.push(G$));o=(w,S)=>b[S],a=(w,S)=>y[S]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new OS(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?cue:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===cue)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===G$&&f.children.length===1;)f=f.children[0],--u;for(let b=s.length-1;b>=0&&(h=s[b],h.data===G$);--b)h.data=null}if(f.parent=xmt,f.eachBefore(function(b){b.depth=b.parent.depth+1,--u}).eachBefore(wEe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=kN(i),r):e},r.parentId=function(i){return arguments.length?(t=kN(i),r):t},r.path=function(i){return arguments.length?(n=kN(i),r):n},r}function Emt(e){e=`${e}`;let t=e.length;return nV(e,t-1)&&!nV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function due(e){let t=e.length;if(t<2)return"";for(;--t>1&&!nV(e,t););return e.slice(0,t)}function nV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Smt(e,t){return e.parent===t.parent?1:2}function Y$(e){var t=e.children;return t?t[0]:e.t}function K$(e){var t=e.children;return t?t[t.length-1]:e.t}function Tmt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Cmt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Amt(e,t,n){return e.a.parent===t.parent?e.a:n}function RN(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}RN.prototype=Object.create(OS.prototype);function kmt(e){for(var t=new RN(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new RN(s[o],o)),i.parent=n;return(t.parent=new RN(null,0)).children=[t],t}function Rmt(){var e=Smt,t=1,n=1,r=null;function i(l){var c=kmt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>h.depth&&(h=y)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),b=n/(h.depth||1);l.eachBefore(function(y){y.x=(y.x+m)*g,y.y=y.depth*b})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Cmt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,b=h.m,y=p.m,x=m.m,w;p=K$(p),d=Y$(d),p&&d;)m=Y$(m),h=K$(h),h.a=l,w=p.z+y-d.z-g+e(p._,d._),w>0&&(Tmt(Amt(p,l,f),l,w),g+=w,b+=w),y+=p.m,g+=d.m,x+=m.m,b+=h.m;p&&!K$(h)&&(h.t=p,h.m+=y-b),d&&!Y$(m)&&(m.t=d,m.m+=g-x,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function gM(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var AEe=(1+Math.sqrt(5))/2;function kEe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,b,y,x,w,S,C;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(b=y=g,S=Math.max(p/h,h/p)/(m*e),C=g*g*S,w=Math.max(y/C,C/b);f<d;++f){if(g+=l=a[f].value,l<b&&(b=l),l>y&&(y=l),C=g*g*S,x=Math.max(y/C,C/b),x>w){g-=l;break}w=x}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?qR(u,n,r,i,m?r+=p*g/m:s):gM(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const REe=function e(t){function n(r,i,s,o,a){kEe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(AEe);function Imt(){var e=REe,t=!1,n=1,r=1,i=[0],s=m_,o=m_,a=m_,u=m_,l=m_;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(CEe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,b=d.y1-h;g<p&&(p=g=(p+g)/2),b<m&&(m=b=(m+b)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=b,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,b-=u(d)-h,g<p&&(p=g=(p+g)/2),b<m&&(m=b=(m+b)/2),e(d,p,m,g,b))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=EEe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:SE(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:SE(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:SE(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:SE(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:SE(+d),c):l},c}function Pmt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,b){if(f>=d-1){var y=s[f];y.x0=p,y.y0=m,y.x1=g,y.y1=b;return}for(var x=l[f],w=h/2+x,S=f+1,C=d-1;S<C;){var R=S+C>>>1;l[R]<w?S=R+1:C=R}w-l[S-1]<l[S]-w&&f+1<S&&--S;var I=l[S]-x,O=h-I;if(g-p>b-m){var M=h?(p*O+g*I)/h:g;c(f,S,I,p,m,M,b),c(S,d,O,M,m,g,b)}else{var L=h?(m*O+b*I)/h:b;c(f,S,I,p,m,g,L),c(S,d,O,p,L,g,b)}}}function Nmt(e,t,n,r,i){(e.depth&1?gM:qR)(e,t,n,r,i)}const Dmt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?qR(l,i,s,o,m?s+=(a-s)*l.value/m:a):gM(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=kEe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(AEe);function Tg(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ex(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rV=Symbol("implicit");function EK(){var e=new Joe,t=[],n=[],r=rV;function i(s){let o=e.get(s);if(o===void 0){if(r!==rV)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Joe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return EK(t,n).unknown(r)},Tg.apply(i,arguments),i}function Omt(e){return function(){return e}}function iV(e){return+e}var hue=[0,1];function Zf(e){return e}function sV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Omt(isNaN(t)?NaN:.5)}function Mmt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Lmt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=sV(i,r),s=n(o,s)):(r=sV(r,i),s=n(s,o)),function(a){return s(r(a))}}function Fmt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=sV(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=bb(e,a,1,r)-1;return s[u](i[u](a))}}function WR(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function yM(){var e=hue,t=hue,n=Zb,r,i,s,o=Zf,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Zf&&(o=Mmt(e[0],e[d-1])),a=d>2?Fmt:Lmt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),qh)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,iV),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=UR,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Zf,c()):o!==Zf},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function IEe(){return yM()(Zf,Zf)}function PEe(e,t,n,r){var i=xb(e,t,n),s;switch(r=tw(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=D2e(i,o))&&(r.precision=s),pK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=O2e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=N2e(i))&&(r.precision=s-(r.type==="%")*2);break}}return dM(r)}function qw(e){var t=e.domain;return e.ticks=function(n){var r=t();return _z(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return PEe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=wz(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function vM(){var e=IEe();return e.copy=function(){return WR(e,vM())},Tg.apply(e,arguments),qw(e)}function NEe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,iV),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return NEe(e).unknown(t)},e=arguments.length?Array.from(e,iV):[0,1],qw(n)}function DEe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function pue(e){return Math.log(e)}function mue(e){return Math.exp(e)}function $mt(e){return-Math.log(-e)}function Bmt(e){return-Math.exp(-e)}function jmt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Umt(e){return e===10?jmt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function zmt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function gue(e){return(t,n)=>-e(-t,n)}function SK(e){const t=e(pue,mue),n=t.domain;let r=10,i,s;function o(){return i=zmt(r),s=Umt(r),n()[0]<0?(i=gue(i),s=gue(s),e($mt,Bmt)):e(pue,mue),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let b=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;b.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;b.push(m)}b.length*2<g&&(b=_z(l,c,g))}else b=_z(d,h,Math.min(h-d,g)).map(s);return f?b.reverse():b},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=tw(u)).precision==null&&(u.trim=!0),u=dM(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(DEe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function OEe(){const e=SK(yM()).domain([1,10]);return e.copy=()=>WR(e,OEe()).base(e.base()),Tg.apply(e,arguments),e}function yue(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function vue(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function TK(e){var t=1,n=e(yue(t),vue(t));return n.constant=function(r){return arguments.length?e(yue(t=+r),vue(t)):t},qw(n)}function MEe(){var e=TK(yM());return e.copy=function(){return WR(e,MEe()).constant(e.constant())},Tg.apply(e,arguments)}function bue(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Vmt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Hmt(e){return e<0?-e*e:e*e}function CK(e){var t=e(Zf,Zf),n=1;function r(){return n===1?e(Zf,Zf):n===.5?e(Vmt,Hmt):e(bue(n),bue(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},qw(t)}function AK(){var e=CK(yM());return e.copy=function(){return WR(e,AK()).exponent(e.exponent())},Tg.apply(e,arguments),e}function qmt(){return AK.apply(null,arguments).exponent(.5)}function LEe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=Nwe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[bb(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Zy),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return LEe().domain(e).range(t).unknown(r)},Tg.apply(s,arguments)}function FEe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[bb(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return FEe().domain([e,t]).range(i).unknown(s)},Tg.apply(qw(o),arguments)}function $Ee(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[bb(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return $Ee().domain(e).range(t).unknown(n)},Tg.apply(i,arguments)}const X$=new Date,Q$=new Date;function bu(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>bu(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(X$.setTime(+s),Q$.setTime(+o),e(X$),e(Q$),Math.floor(n(X$,Q$))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const MS=bu(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);MS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?bu(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):MS);MS.range;const zy=1e3,Kh=zy*60,Vy=Kh*60,_1=Vy*24,kK=_1*7,xue=_1*30,J$=_1*365,Hy=bu(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*zy)},(e,t)=>(t-e)/zy,e=>e.getUTCSeconds());Hy.range;const bM=bu(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zy)},(e,t)=>{e.setTime(+e+t*Kh)},(e,t)=>(t-e)/Kh,e=>e.getMinutes());bM.range;const xM=bu(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Kh)},(e,t)=>(t-e)/Kh,e=>e.getUTCMinutes());xM.range;const _M=bu(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zy-e.getMinutes()*Kh)},(e,t)=>{e.setTime(+e+t*Vy)},(e,t)=>(t-e)/Vy,e=>e.getHours());_M.range;const wM=bu(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Vy)},(e,t)=>(t-e)/Vy,e=>e.getUTCHours());wM.range;const t1=bu(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kh)/_1,e=>e.getDate()-1);t1.range;const tb=bu(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_1,e=>e.getUTCDate()-1);tb.range;const BEe=bu(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_1,e=>Math.floor(e/_1));BEe.range;function Ww(e){return bu(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Kh)/kK)}const XT=Ww(0),SD=Ww(1),Wmt=Ww(2),Gmt=Ww(3),LS=Ww(4),Ymt=Ww(5),Kmt=Ww(6);XT.range;SD.range;Wmt.range;Gmt.range;LS.range;Ymt.range;Kmt.range;function Gw(e){return bu(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/kK)}const QT=Gw(0),TD=Gw(1),Xmt=Gw(2),Qmt=Gw(3),FS=Gw(4),Jmt=Gw(5),Zmt=Gw(6);QT.range;TD.range;Xmt.range;Qmt.range;FS.range;Jmt.range;Zmt.range;const C4=bu(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());C4.range;const A4=bu(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());A4.range;const cg=bu(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());cg.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:bu(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});cg.range;const fg=bu(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());fg.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:bu(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});fg.range;function jEe(e,t,n,r,i,s){const o=[[Hy,1,zy],[Hy,5,5*zy],[Hy,15,15*zy],[Hy,30,30*zy],[s,1,Kh],[s,5,5*Kh],[s,15,15*Kh],[s,30,30*Kh],[i,1,Vy],[i,3,3*Vy],[i,6,6*Vy],[i,12,12*Vy],[r,1,_1],[r,2,2*_1],[n,1,kK],[t,1,xue],[t,3,3*xue],[e,1,J$]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=GT(([,,g])=>g).right(o,d);if(h===o.length)return e.every(xb(l/J$,c/J$,f));if(h===0)return MS.every(Math.max(xb(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[egt,tgt]=jEe(fg,A4,QT,BEe,wM,xM),[ngt,rgt]=jEe(cg,C4,XT,t1,_M,bM);function Z$(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function eB(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function fA(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function UEe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=dA(i),c=hA(i),f=dA(s),d=hA(s),h=dA(o),p=hA(o),m=dA(a),g=hA(a),b=dA(u),y=hA(u),x={a:ee,A:ne,b:ue,B:X,c:null,d:Cue,e:Cue,f:Cgt,g:Lgt,G:$gt,H:Egt,I:Sgt,j:Tgt,L:zEe,m:Agt,M:kgt,p:W,q:te,Q:Rue,s:Iue,S:Rgt,u:Igt,U:Pgt,V:Ngt,w:Dgt,W:Ogt,x:null,X:null,y:Mgt,Y:Fgt,Z:Bgt,"%":kue},w={a:q,A:J,b:oe,B:de,c:null,d:Aue,e:Aue,f:Vgt,g:Zgt,G:tyt,H:jgt,I:Ugt,j:zgt,L:HEe,m:Hgt,M:qgt,p:ce,q:pe,Q:Rue,s:Iue,S:Wgt,u:Ggt,U:Ygt,V:Kgt,w:Xgt,W:Qgt,x:null,X:null,y:Jgt,Y:eyt,Z:nyt,"%":kue},S={a:M,A:L,b:V,B:D,c:j,d:Sue,e:Sue,f:bgt,g:Eue,G:wue,H:Tue,I:Tue,j:mgt,L:vgt,m:pgt,M:ggt,p:O,q:hgt,Q:_gt,s:wgt,S:ygt,u:ugt,U:lgt,V:cgt,w:agt,W:fgt,x:z,X:G,y:Eue,Y:wue,Z:dgt,"%":xgt};x.x=C(n,x),x.X=C(r,x),x.c=C(t,x),w.x=C(n,w),w.X=C(r,w),w.c=C(t,w);function C(Ee,Ae){return function(ge){var me=[],Oe=-1,Me=0,Ye=Ee.length,lt,We,nt;for(ge instanceof Date||(ge=new Date(+ge));++Oe<Ye;)Ee.charCodeAt(Oe)===37&&(me.push(Ee.slice(Me,Oe)),(We=_ue[lt=Ee.charAt(++Oe)])!=null?lt=Ee.charAt(++Oe):We=lt==="e"?" ":"0",(nt=Ae[lt])&&(lt=nt(ge,We)),me.push(lt),Me=Oe+1);return me.push(Ee.slice(Me,Oe)),me.join("")}}function R(Ee,Ae){return function(ge){var me=fA(1900,void 0,1),Oe=I(me,Ee,ge+="",0),Me,Ye;if(Oe!=ge.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(Ae&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(Me=eB(fA(me.y,0,1)),Ye=Me.getUTCDay(),Me=Ye>4||Ye===0?TD.ceil(Me):TD(Me),Me=tb.offset(Me,(me.V-1)*7),me.y=Me.getUTCFullYear(),me.m=Me.getUTCMonth(),me.d=Me.getUTCDate()+(me.w+6)%7):(Me=Z$(fA(me.y,0,1)),Ye=Me.getDay(),Me=Ye>4||Ye===0?SD.ceil(Me):SD(Me),Me=t1.offset(Me,(me.V-1)*7),me.y=Me.getFullYear(),me.m=Me.getMonth(),me.d=Me.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),Ye="Z"in me?eB(fA(me.y,0,1)).getUTCDay():Z$(fA(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(Ye+5)%7:me.w+me.U*7-(Ye+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,eB(me)):Z$(me)}}function I(Ee,Ae,ge,me){for(var Oe=0,Me=Ae.length,Ye=ge.length,lt,We;Oe<Me;){if(me>=Ye)return-1;if(lt=Ae.charCodeAt(Oe++),lt===37){if(lt=Ae.charAt(Oe++),We=S[lt in _ue?Ae.charAt(Oe++):lt],!We||(me=We(Ee,ge,me))<0)return-1}else if(lt!=ge.charCodeAt(me++))return-1}return me}function O(Ee,Ae,ge){var me=l.exec(Ae.slice(ge));return me?(Ee.p=c.get(me[0].toLowerCase()),ge+me[0].length):-1}function M(Ee,Ae,ge){var me=h.exec(Ae.slice(ge));return me?(Ee.w=p.get(me[0].toLowerCase()),ge+me[0].length):-1}function L(Ee,Ae,ge){var me=f.exec(Ae.slice(ge));return me?(Ee.w=d.get(me[0].toLowerCase()),ge+me[0].length):-1}function V(Ee,Ae,ge){var me=b.exec(Ae.slice(ge));return me?(Ee.m=y.get(me[0].toLowerCase()),ge+me[0].length):-1}function D(Ee,Ae,ge){var me=m.exec(Ae.slice(ge));return me?(Ee.m=g.get(me[0].toLowerCase()),ge+me[0].length):-1}function j(Ee,Ae,ge){return I(Ee,t,Ae,ge)}function z(Ee,Ae,ge){return I(Ee,n,Ae,ge)}function G(Ee,Ae,ge){return I(Ee,r,Ae,ge)}function ee(Ee){return o[Ee.getDay()]}function ne(Ee){return s[Ee.getDay()]}function ue(Ee){return u[Ee.getMonth()]}function X(Ee){return a[Ee.getMonth()]}function W(Ee){return i[+(Ee.getHours()>=12)]}function te(Ee){return 1+~~(Ee.getMonth()/3)}function q(Ee){return o[Ee.getUTCDay()]}function J(Ee){return s[Ee.getUTCDay()]}function oe(Ee){return u[Ee.getUTCMonth()]}function de(Ee){return a[Ee.getUTCMonth()]}function ce(Ee){return i[+(Ee.getUTCHours()>=12)]}function pe(Ee){return 1+~~(Ee.getUTCMonth()/3)}return{format:function(Ee){var Ae=C(Ee+="",x);return Ae.toString=function(){return Ee},Ae},parse:function(Ee){var Ae=R(Ee+="",!1);return Ae.toString=function(){return Ee},Ae},utcFormat:function(Ee){var Ae=C(Ee+="",w);return Ae.toString=function(){return Ee},Ae},utcParse:function(Ee){var Ae=R(Ee+="",!0);return Ae.toString=function(){return Ee},Ae}}}var _ue={"-":"",_:" ",0:"0"},Hu=/^\s*\d+/,igt=/^%/,sgt=/[\\^$*+?|[\]().{}]/g;function ki(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function ogt(e){return e.replace(sgt,"\\$&")}function dA(e){return new RegExp("^(?:"+e.map(ogt).join("|")+")","i")}function hA(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function agt(e,t,n){var r=Hu.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ugt(e,t,n){var r=Hu.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function lgt(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function cgt(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function fgt(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function wue(e,t,n){var r=Hu.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Eue(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function dgt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function hgt(e,t,n){var r=Hu.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function pgt(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Sue(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function mgt(e,t,n){var r=Hu.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Tue(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ggt(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ygt(e,t,n){var r=Hu.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function vgt(e,t,n){var r=Hu.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function bgt(e,t,n){var r=Hu.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function xgt(e,t,n){var r=igt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function _gt(e,t,n){var r=Hu.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function wgt(e,t,n){var r=Hu.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Cue(e,t){return ki(e.getDate(),t,2)}function Egt(e,t){return ki(e.getHours(),t,2)}function Sgt(e,t){return ki(e.getHours()%12||12,t,2)}function Tgt(e,t){return ki(1+t1.count(cg(e),e),t,3)}function zEe(e,t){return ki(e.getMilliseconds(),t,3)}function Cgt(e,t){return zEe(e,t)+"000"}function Agt(e,t){return ki(e.getMonth()+1,t,2)}function kgt(e,t){return ki(e.getMinutes(),t,2)}function Rgt(e,t){return ki(e.getSeconds(),t,2)}function Igt(e){var t=e.getDay();return t===0?7:t}function Pgt(e,t){return ki(XT.count(cg(e)-1,e),t,2)}function VEe(e){var t=e.getDay();return t>=4||t===0?LS(e):LS.ceil(e)}function Ngt(e,t){return e=VEe(e),ki(LS.count(cg(e),e)+(cg(e).getDay()===4),t,2)}function Dgt(e){return e.getDay()}function Ogt(e,t){return ki(SD.count(cg(e)-1,e),t,2)}function Mgt(e,t){return ki(e.getFullYear()%100,t,2)}function Lgt(e,t){return e=VEe(e),ki(e.getFullYear()%100,t,2)}function Fgt(e,t){return ki(e.getFullYear()%1e4,t,4)}function $gt(e,t){var n=e.getDay();return e=n>=4||n===0?LS(e):LS.ceil(e),ki(e.getFullYear()%1e4,t,4)}function Bgt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ki(t/60|0,"0",2)+ki(t%60,"0",2)}function Aue(e,t){return ki(e.getUTCDate(),t,2)}function jgt(e,t){return ki(e.getUTCHours(),t,2)}function Ugt(e,t){return ki(e.getUTCHours()%12||12,t,2)}function zgt(e,t){return ki(1+tb.count(fg(e),e),t,3)}function HEe(e,t){return ki(e.getUTCMilliseconds(),t,3)}function Vgt(e,t){return HEe(e,t)+"000"}function Hgt(e,t){return ki(e.getUTCMonth()+1,t,2)}function qgt(e,t){return ki(e.getUTCMinutes(),t,2)}function Wgt(e,t){return ki(e.getUTCSeconds(),t,2)}function Ggt(e){var t=e.getUTCDay();return t===0?7:t}function Ygt(e,t){return ki(QT.count(fg(e)-1,e),t,2)}function qEe(e){var t=e.getUTCDay();return t>=4||t===0?FS(e):FS.ceil(e)}function Kgt(e,t){return e=qEe(e),ki(FS.count(fg(e),e)+(fg(e).getUTCDay()===4),t,2)}function Xgt(e){return e.getUTCDay()}function Qgt(e,t){return ki(TD.count(fg(e)-1,e),t,2)}function Jgt(e,t){return ki(e.getUTCFullYear()%100,t,2)}function Zgt(e,t){return e=qEe(e),ki(e.getUTCFullYear()%100,t,2)}function eyt(e,t){return ki(e.getUTCFullYear()%1e4,t,4)}function tyt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?FS(e):FS.ceil(e),ki(e.getUTCFullYear()%1e4,t,4)}function nyt(){return"+0000"}function kue(){return"%"}function Rue(e){return+e}function Iue(e){return Math.floor(+e/1e3)}var eE,RK,WEe,IK,GEe;ryt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ryt(e){return eE=UEe(e),RK=eE.format,WEe=eE.parse,IK=eE.utcFormat,GEe=eE.utcParse,eE}function iyt(e){return new Date(e)}function syt(e){return e instanceof Date?+e:+new Date(+e)}function PK(e,t,n,r,i,s,o,a,u,l){var c=IEe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),b=l("%a %d"),y=l("%b %d"),x=l("%B"),w=l("%Y");function S(C){return(u(C)<C?h:a(C)<C?p:o(C)<C?m:s(C)<C?g:r(C)<C?i(C)<C?b:y:n(C)<C?x:w)(C)}return c.invert=function(C){return new Date(f(C))},c.domain=function(C){return arguments.length?d(Array.from(C,syt)):d().map(iyt)},c.ticks=function(C){var R=d();return e(R[0],R[R.length-1],C??10)},c.tickFormat=function(C,R){return R==null?S:l(R)},c.nice=function(C){var R=d();return(!C||typeof C.range!="function")&&(C=t(R[0],R[R.length-1],C??10)),C?d(DEe(R,C)):c},c.copy=function(){return WR(c,PK(e,t,n,r,i,s,o,a,u,l))},c}function oyt(){return Tg.apply(PK(ngt,rgt,cg,C4,XT,t1,_M,bM,Hy,RK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ayt(){return Tg.apply(PK(egt,tgt,fg,A4,QT,tb,wM,xM,Hy,IK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function EM(){var e=0,t=1,n,r,i,s,o=Zf,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Zb),l.rangeRound=c(UR),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function tx(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function NK(){var e=qw(EM()(Zf));return e.copy=function(){return tx(e,NK())},ex.apply(e,arguments)}function YEe(){var e=SK(EM()).domain([1,10]);return e.copy=function(){return tx(e,YEe()).base(e.base())},ex.apply(e,arguments)}function KEe(){var e=TK(EM());return e.copy=function(){return tx(e,KEe()).constant(e.constant())},ex.apply(e,arguments)}function DK(){var e=CK(EM());return e.copy=function(){return tx(e,DK()).exponent(e.exponent())},ex.apply(e,arguments)}function uyt(){return DK.apply(null,arguments).exponent(.5)}function SM(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Zf,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var b,y,x;return arguments.length?([b,y,x]=g,l=sK(m,[b,y,x]),h):[l(0),l(.5),l(1)]}}return h.range=p(Zb),h.rangeRound=p(UR),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function XEe(){var e=qw(SM()(Zf));return e.copy=function(){return tx(e,XEe())},ex.apply(e,arguments)}function QEe(){var e=SK(SM()).domain([.1,1,10]);return e.copy=function(){return tx(e,QEe()).base(e.base())},ex.apply(e,arguments)}function JEe(){var e=TK(SM());return e.copy=function(){return tx(e,JEe()).constant(e.constant())},ex.apply(e,arguments)}function OK(){var e=CK(SM());return e.copy=function(){return tx(e,OK()).exponent(e.exponent())},ex.apply(e,arguments)}function lyt(){return OK.apply(null,arguments).exponent(.5)}function Cg(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const cyt=Cg("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),fyt=Cg("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),dyt=Cg("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),hyt=Cg("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),pyt=Cg("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),myt=Cg("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),gyt=Cg("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),yyt=Cg("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),vyt=Cg("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),byt=Cg("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Xi(e){return function(){return e}}const Pue=Math.abs,Yl=Math.atan2,Ux=Math.cos,xyt=Math.max,tB=Math.min,vm=Math.sin,k_=Math.sqrt,Kl=1e-12,$S=Math.PI,CD=$S/2,ZEe=2*$S;function _yt(e){return e>1?0:e<-1?$S:Math.acos(e)}function Nue(e){return e>=1?CD:e<=-1?-CD:Math.asin(e)}function TM(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new lK(t)}function wyt(e){return e.innerRadius}function Eyt(e){return e.outerRadius}function Syt(e){return e.startAngle}function Tyt(e){return e.endAngle}function Cyt(e){return e&&e.padAngle}function Ayt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Kl))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function J6(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/k_(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,b=(h+m)/2,y=p-d,x=m-h,w=y*y+x*x,S=i-s,C=d*m-p*h,R=(x<0?-1:1)*k_(xyt(0,S*S*w-C*C)),I=(C*x-y*R)/w,O=(-C*y-x*R)/w,M=(C*x+y*R)/w,L=(-C*y+x*R)/w,V=I-g,D=O-b,j=M-g,z=L-b;return V*V+D*D>j*j+z*z&&(I=M,O=L),{cx:I,cy:O,x01:-c,y01:-f,x11:I*(i/S-1),y11:O*(i/S-1)}}function kyt(){var e=wyt,t=Eyt,n=Xi(0),r=null,i=Syt,s=Tyt,o=Cyt,a=null,u=TM(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-CD,m=s.apply(this,arguments)-CD,g=Pue(m-p),b=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Kl))a.moveTo(0,0);else if(g>ZEe-Kl)a.moveTo(h*Ux(p),h*vm(p)),a.arc(0,0,h,p,m,!b),d>Kl&&(a.moveTo(d*Ux(m),d*vm(m)),a.arc(0,0,d,m,p,b));else{var y=p,x=m,w=p,S=m,C=g,R=g,I=o.apply(this,arguments)/2,O=I>Kl&&(r?+r.apply(this,arguments):k_(d*d+h*h)),M=tB(Pue(h-d)/2,+n.apply(this,arguments)),L=M,V=M,D,j;if(O>Kl){var z=Nue(O/d*vm(I)),G=Nue(O/h*vm(I));(C-=z*2)>Kl?(z*=b?1:-1,w+=z,S-=z):(C=0,w=S=(p+m)/2),(R-=G*2)>Kl?(G*=b?1:-1,y+=G,x-=G):(R=0,y=x=(p+m)/2)}var ee=h*Ux(y),ne=h*vm(y),ue=d*Ux(S),X=d*vm(S);if(M>Kl){var W=h*Ux(x),te=h*vm(x),q=d*Ux(w),J=d*vm(w),oe;if(g<$S)if(oe=Ayt(ee,ne,q,J,W,te,ue,X)){var de=ee-oe[0],ce=ne-oe[1],pe=W-oe[0],Ee=te-oe[1],Ae=1/vm(_yt((de*pe+ce*Ee)/(k_(de*de+ce*ce)*k_(pe*pe+Ee*Ee)))/2),ge=k_(oe[0]*oe[0]+oe[1]*oe[1]);L=tB(M,(d-ge)/(Ae-1)),V=tB(M,(h-ge)/(Ae+1))}else L=V=0}R>Kl?V>Kl?(D=J6(q,J,ee,ne,h,V,b),j=J6(W,te,ue,X,h,V,b),a.moveTo(D.cx+D.x01,D.cy+D.y01),V<M?a.arc(D.cx,D.cy,V,Yl(D.y01,D.x01),Yl(j.y01,j.x01),!b):(a.arc(D.cx,D.cy,V,Yl(D.y01,D.x01),Yl(D.y11,D.x11),!b),a.arc(0,0,h,Yl(D.cy+D.y11,D.cx+D.x11),Yl(j.cy+j.y11,j.cx+j.x11),!b),a.arc(j.cx,j.cy,V,Yl(j.y11,j.x11),Yl(j.y01,j.x01),!b))):(a.moveTo(ee,ne),a.arc(0,0,h,y,x,!b)):a.moveTo(ee,ne),!(d>Kl)||!(C>Kl)?a.lineTo(ue,X):L>Kl?(D=J6(ue,X,W,te,d,-L,b),j=J6(ee,ne,q,J,d,-L,b),a.lineTo(D.cx+D.x01,D.cy+D.y01),L<M?a.arc(D.cx,D.cy,L,Yl(D.y01,D.x01),Yl(j.y01,j.x01),!b):(a.arc(D.cx,D.cy,L,Yl(D.y01,D.x01),Yl(D.y11,D.x11),!b),a.arc(0,0,d,Yl(D.cy+D.y11,D.cx+D.x11),Yl(j.cy+j.y11,j.cx+j.x11),b),a.arc(j.cx,j.cy,L,Yl(j.y11,j.x11),Yl(j.y01,j.x01),!b))):a.arc(0,0,d,S,w,b)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-$S/2;return[Ux(f)*c,vm(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Xi(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Xi(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Xi(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Xi(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Xi(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Xi(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Xi(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function eSe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tSe(e){this._context=e}tSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function MK(e){return new tSe(e)}function nSe(e){return e[0]}function rSe(e){return e[1]}function iSe(e,t){var n=Xi(!0),r=null,i=MK,s=null,o=TM(a);e=typeof e=="function"?e:e===void 0?nSe:Xi(e),t=typeof t=="function"?t:t===void 0?rSe:Xi(t);function a(u){var l,c=(u=eSe(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Xi(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Xi(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Xi(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function sSe(e,t,n){var r=null,i=Xi(!0),s=null,o=MK,a=null,u=TM(l);e=typeof e=="function"?e:e===void 0?nSe:Xi(+e),t=typeof t=="function"?t:Xi(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?rSe:Xi(+n);function l(f){var d,h,p,m=(f=eSe(f)).length,g,b=!1,y,x=new Array(m),w=new Array(m);for(s==null&&(a=o(y=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===b)if(b=!b)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(x[p],w[p]);a.lineEnd(),a.areaEnd()}b&&(x[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):x[d],n?+n(g,d,f):w[d]))}if(y)return a=null,y+""||null}function c(){return iSe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Xi(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Xi(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Xi(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Xi(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Xi(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Xi(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Xi(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const Ryt={draw(e,t){const n=k_(t/$S);e.moveTo(n,0),e.arc(0,0,n,0,ZEe)}};function Iyt(e,t){let n=null,r=TM(i);e=typeof e=="function"?e:Xi(e||Ryt),t=typeof t=="function"?t:Xi(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Xi(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Xi(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function wb(){}function AD(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function CM(e){this._context=e}CM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:AD(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:AD(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Pyt(e){return new CM(e)}function oSe(e){this._context=e}oSe.prototype={areaStart:wb,areaEnd:wb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:AD(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Nyt(e){return new oSe(e)}function aSe(e){this._context=e}aSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:AD(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Dyt(e){return new aSe(e)}function uSe(e,t){this._basis=new CM(e),this._beta=t}uSe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Oyt=function e(t){function n(r){return t===1?new CM(r):new uSe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function kD(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function LK(e,t){this._context=e,this._k=(1-t)/6}LK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:kD(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:kD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Myt=function e(t){function n(r){return new LK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function FK(e,t){this._context=e,this._k=(1-t)/6}FK.prototype={areaStart:wb,areaEnd:wb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:kD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Lyt=function e(t){function n(r){return new FK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function $K(e,t){this._context=e,this._k=(1-t)/6}$K.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:kD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Fyt=function e(t){function n(r){return new $K(r,t)}return n.tension=function(r){return e(+r)},n}(0);function BK(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Kl){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Kl){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function lSe(e,t){this._context=e,this._alpha=t}lSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:BK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $yt=function e(t){function n(r){return t?new lSe(r,t):new LK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function cSe(e,t){this._context=e,this._alpha=t}cSe.prototype={areaStart:wb,areaEnd:wb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:BK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Byt=function e(t){function n(r){return t?new cSe(r,t):new FK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function fSe(e,t){this._context=e,this._alpha=t}fSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:BK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jyt=function e(t){function n(r){return t?new fSe(r,t):new $K(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function dSe(e){this._context=e}dSe.prototype={areaStart:wb,areaEnd:wb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Uyt(e){return new dSe(e)}function Due(e){return e<0?-1:1}function Oue(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Due(s)+Due(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Mue(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function nB(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function RD(e){this._context=e}RD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:nB(this,this._t0,Mue(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,nB(this,Mue(this,n=Oue(this,e,t)),n);break;default:nB(this,this._t0,n=Oue(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function hSe(e){this._context=new pSe(e)}(hSe.prototype=Object.create(RD.prototype)).point=function(e,t){RD.prototype.point.call(this,t,e)};function pSe(e){this._context=e}pSe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function zyt(e){return new RD(e)}function Vyt(e){return new hSe(e)}function mSe(e){this._context=e}mSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Lue(e),i=Lue(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Lue(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Hyt(e){return new mSe(e)}function AM(e,t){this._context=e,this._t=t}AM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function qyt(e){return new AM(e,.5)}function Wyt(e){return new AM(e,0)}function Gyt(e){return new AM(e,1)}function V3(e,t,n){this.k=e,this.x=t,this.y=n}V3.prototype={constructor:V3,scale:function(e){return e===1?this:new V3(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new V3(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};V3.prototype;var H3={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Yyt=H3.exports,Fue;function Kyt(){return Fue||(Fue=1,function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,b=2,y=4,x=8,w=16,S=32,C=64,R=128,I=256,O=512,M=30,L="...",V=800,D=16,j=1,z=2,G=3,ee=1/0,ne=9007199254740991,ue=17976931348623157e292,X=NaN,W=4294967295,te=W-1,q=W>>>1,J=[["ary",R],["bind",g],["bindKey",b],["curry",x],["curryRight",w],["flip",O],["partial",S],["partialRight",C],["rearg",I]],oe="[object Arguments]",de="[object Array]",ce="[object AsyncFunction]",pe="[object Boolean]",Ee="[object Date]",Ae="[object DOMException]",ge="[object Error]",me="[object Function]",Oe="[object GeneratorFunction]",Me="[object Map]",Ye="[object Number]",lt="[object Null]",We="[object Object]",nt="[object Promise]",yt="[object Proxy]",_t="[object RegExp]",It="[object Set]",Et="[object String]",Ke="[object Symbol]",Lt="[object Undefined]",sn="[object WeakMap]",Fe="[object WeakSet]",Qe="[object ArrayBuffer]",wt="[object DataView]",Vt="[object Float32Array]",Wt="[object Float64Array]",bn="[object Int8Array]",Dn="[object Int16Array]",Zn="[object Int32Array]",wr="[object Uint8Array]",Hn="[object Uint8ClampedArray]",nr="[object Uint16Array]",Ei="[object Uint32Array]",Dr=/\b__p \+= '';/g,Co=/\b(__p \+=) '' \+/g,Ji=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Di=/&(?:amp|lt|gt|quot|#39);/g,Zi=/[&<>"']/g,ei=RegExp(Di.source),mo=RegExp(Zi.source),Gu=/<%-([\s\S]+?)%>/g,Sa=/<%([\s\S]+?)%>/g,Ta=/<%=([\s\S]+?)%>/g,Kr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oi=/^\w*$/,si=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zs=/[\\^$.*+?()[\]{}|]/g,Xr=RegExp(Zs.source),Hi=/^\s+/,eo=/\s/,go=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Jo=/\{\n\/\* \[wrapped with (.+)\] \*/,Ca=/,? & /,pd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hr=/[()=,{}\[\]\/\s]/,Pl=/\\(\\)?/g,bs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ka=/\w*$/,Zo=/^[-+]0x[0-9a-f]+$/i,yh=/^0b[01]+$/i,md=/^\[object .+?Constructor\]$/,mf=/^0o[0-7]+$/i,gf=/^(?:0|[1-9]\d*)$/,xc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_c=/($^)/,wc=/['\n\r\u2028\u2029\\]/g,Er="\\ud800-\\udfff",Ec="\\u0300-\\u036f",xs="\\ufe20-\\ufe2f",Xa="\\u20d0-\\u20ff",As=Ec+xs+Xa,Nl="\\u2700-\\u27bf",Sc="a-z\\xdf-\\xf6\\xf8-\\xff",ea="\\xac\\xb1\\xd7\\xf7",qi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ti="\\u2000-\\u206f",rr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ve="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Se=ea+qi+ti+rr,Be="['’]",ze="["+Er+"]",De="["+Se+"]",ht="["+As+"]",kt="\\d+",Nt="["+Nl+"]",Rt="["+Sc+"]",jt="[^"+Er+Se+kt+Nl+Sc+ve+"]",Zt="\\ud83c[\\udffb-\\udfff]",qn="(?:"+ht+"|"+Zt+")",Sn="[^"+Er+"]",lr="(?:\\ud83c[\\udde6-\\uddff]){2}",_n="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+ve+"]",ls="\\u200d",Ao="(?:"+Rt+"|"+jt+")",Dl="(?:"+br+"|"+jt+")",gd="(?:"+Be+"(?:d|ll|m|re|s|t|ve))?",Yu="(?:"+Be+"(?:D|LL|M|RE|S|T|VE))?",yf=qn+"?",to="["+Ie+"]?",Mi="(?:"+ls+"(?:"+[Sn,lr,_n].join("|")+")"+to+yf+")*",ko="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ta="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cr=to+yf+Mi,Aa="(?:"+[Nt,lr,_n].join("|")+")"+cr,ka="(?:"+[Sn+ht+"?",ht,lr,_n,ze].join("|")+")",bp=RegExp(Be,"g"),Ol=RegExp(ht,"g"),ks=RegExp(Zt+"(?="+Zt+")|"+ka+cr,"g"),Rs=RegExp([br+"?"+Rt+"+"+gd+"(?="+[De,br,"$"].join("|")+")",Dl+"+"+Yu+"(?="+[De,br+Ao,"$"].join("|")+")",br+"?"+Ao+"+"+gd,br+"+"+Yu,ta,ko,kt,Aa].join("|"),"g"),yd=RegExp("["+ls+Er+As+Ie+"]"),Tc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ml=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],X0=-1,xr={};xr[Vt]=xr[Wt]=xr[bn]=xr[Dn]=xr[Zn]=xr[wr]=xr[Hn]=xr[nr]=xr[Ei]=!0,xr[oe]=xr[de]=xr[Qe]=xr[pe]=xr[wt]=xr[Ee]=xr[ge]=xr[me]=xr[Me]=xr[Ye]=xr[We]=xr[_t]=xr[It]=xr[Et]=xr[sn]=!1;var Gn={};Gn[oe]=Gn[de]=Gn[Qe]=Gn[wt]=Gn[pe]=Gn[Ee]=Gn[Vt]=Gn[Wt]=Gn[bn]=Gn[Dn]=Gn[Zn]=Gn[Me]=Gn[Ye]=Gn[We]=Gn[_t]=Gn[It]=Gn[Et]=Gn[Ke]=Gn[wr]=Gn[Hn]=Gn[nr]=Gn[Ei]=!0,Gn[ge]=Gn[me]=Gn[sn]=!1;var Cc={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ne={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},rt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hn=parseFloat,ir=parseInt,Or=typeof va=="object"&&va&&va.Object===Object&&va,gi=typeof self=="object"&&self&&self.Object===Object&&self,dn=Or||gi||Function("return this")(),Tr=t&&!t.nodeType&&t,Ir=Tr&&!0&&e&&!e.nodeType&&e,_s=Ir&&Ir.exports===Tr,na=_s&&Or.process,Mr=function(){try{var Ve=Ir&&Ir.require&&Ir.require("util").types;return Ve||na&&na.binding&&na.binding("util")}catch{}}(),js=Mr&&Mr.isArrayBuffer,Li=Mr&&Mr.isDate,no=Mr&&Mr.isMap,Qa=Mr&&Mr.isRegExp,ra=Mr&&Mr.isSet,$g=Mr&&Mr.isTypedArray;function ro(Ve,mt,et){switch(et.length){case 0:return Ve.call(mt);case 1:return Ve.call(mt,et[0]);case 2:return Ve.call(mt,et[0],et[1]);case 3:return Ve.call(mt,et[0],et[1],et[2])}return Ve.apply(mt,et)}function Ac(Ve,mt,et,on){for(var Bn=-1,On=Ve==null?0:Ve.length;++Bn<On;){var Cr=Ve[Bn];mt(on,Cr,et(Cr),Ve)}return on}function oi(Ve,mt){for(var et=-1,on=Ve==null?0:Ve.length;++et<on&&mt(Ve[et],et,Ve)!==!1;);return Ve}function Ro(Ve,mt){for(var et=Ve==null?0:Ve.length;et--&&mt(Ve[et],et,Ve)!==!1;);return Ve}function yi(Ve,mt){for(var et=-1,on=Ve==null?0:Ve.length;++et<on;)if(!mt(Ve[et],et,Ve))return!1;return!0}function Ra(Ve,mt){for(var et=-1,on=Ve==null?0:Ve.length,Bn=0,On=[];++et<on;){var Cr=Ve[et];mt(Cr,et,Ve)&&(On[Bn++]=Cr)}return On}function ia(Ve,mt){var et=Ve==null?0:Ve.length;return!!et&&xd(Ve,mt,0)>-1}function vd(Ve,mt,et){for(var on=-1,Bn=Ve==null?0:Ve.length;++on<Bn;)if(et(mt,Ve[on]))return!0;return!1}function vi(Ve,mt){for(var et=-1,on=Ve==null?0:Ve.length,Bn=Array(on);++et<on;)Bn[et]=mt(Ve[et],et,Ve);return Bn}function Ku(Ve,mt){for(var et=-1,on=mt.length,Bn=Ve.length;++et<on;)Ve[Bn+et]=mt[et];return Ve}function Xu(Ve,mt,et,on){var Bn=-1,On=Ve==null?0:Ve.length;for(on&&On&&(et=Ve[++Bn]);++Bn<On;)et=mt(et,Ve[Bn],Bn,Ve);return et}function Bg(Ve,mt,et,on){var Bn=Ve==null?0:Ve.length;for(on&&Bn&&(et=Ve[--Bn]);Bn--;)et=mt(et,Ve[Bn],Bn,Ve);return et}function bd(Ve,mt){for(var et=-1,on=Ve==null?0:Ve.length;++et<on;)if(mt(Ve[et],et,Ve))return!0;return!1}var jg=le("length");function vf(Ve){return Ve.split("")}function vh(Ve){return Ve.match(pd)||[]}function Ia(Ve,mt,et){var on;return et(Ve,function(Bn,On,Cr){if(mt(Bn,On,Cr))return on=On,!1}),on}function bf(Ve,mt,et,on){for(var Bn=Ve.length,On=et+(on?1:-1);on?On--:++On<Bn;)if(mt(Ve[On],On,Ve))return On;return-1}function xd(Ve,mt,et){return mt===mt?xh(Ve,mt,et):bf(Ve,F,et)}function _u(Ve,mt,et,on){for(var Bn=et-1,On=Ve.length;++Bn<On;)if(on(Ve[Bn],mt))return Bn;return-1}function F(Ve){return Ve!==Ve}function re(Ve,mt){var et=Ve==null?0:Ve.length;return et?Xt(Ve,mt)/et:X}function le(Ve){return function(mt){return mt==null?n:mt[Ve]}}function be(Ve){return function(mt){return Ve==null?n:Ve[mt]}}function Xe(Ve,mt,et,on,Bn){return Bn(Ve,function(On,Cr,er){et=on?(on=!1,On):mt(et,On,Cr,er)}),et}function ut(Ve,mt){var et=Ve.length;for(Ve.sort(mt);et--;)Ve[et]=Ve[et].value;return Ve}function Xt(Ve,mt){for(var et,on=-1,Bn=Ve.length;++on<Bn;){var On=mt(Ve[on]);On!==n&&(et=et===n?On:et+On)}return et}function Lr(Ve,mt){for(var et=-1,on=Array(Ve);++et<Ve;)on[et]=mt(et);return on}function Us(Ve,mt){return vi(mt,function(et){return[et,Ve[et]]})}function Pr(Ve){return Ve&&Ve.slice(0,Zu(Ve)+1).replace(Hi,"")}function ai(Ve){return function(mt){return Ve(mt)}}function cs(Ve,mt){return vi(mt,function(et){return Ve[et]})}function Io(Ve,mt){return Ve.has(mt)}function yo(Ve,mt){for(var et=-1,on=Ve.length;++et<on&&xd(mt,Ve[et],0)>-1;);return et}function vo(Ve,mt){for(var et=Ve.length;et--&&xd(mt,Ve[et],0)>-1;);return et}function Ll(Ve,mt){for(var et=Ve.length,on=0;et--;)Ve[et]===mt&&++on;return on}var H1=be(Cc),mx=be(Ce);function kc(Ve){return"\\"+rt[Ve]}function Qu(Ve,mt){return Ve==null?n:Ve[mt]}function bh(Ve){return yd.test(Ve)}function c2(Ve){return Tc.test(Ve)}function _d(Ve){for(var mt,et=[];!(mt=Ve.next()).done;)et.push(mt.value);return et}function Rc(Ve){var mt=-1,et=Array(Ve.size);return Ve.forEach(function(on,Bn){et[++mt]=[Bn,on]}),et}function Q0(Ve,mt){return function(et){return Ve(mt(et))}}function Ju(Ve,mt){for(var et=-1,on=Ve.length,Bn=0,On=[];++et<on;){var Cr=Ve[et];(Cr===mt||Cr===c)&&(Ve[et]=c,On[Bn++]=et)}return On}function Ic(Ve){var mt=-1,et=Array(Ve.size);return Ve.forEach(function(on){et[++mt]=on}),et}function f2(Ve){var mt=-1,et=Array(Ve.size);return Ve.forEach(function(on){et[++mt]=[on,on]}),et}function xh(Ve,mt,et){for(var on=et-1,Bn=Ve.length;++on<Bn;)if(Ve[on]===mt)return on;return-1}function Fl(Ve,mt,et){for(var on=et+1;on--;)if(Ve[on]===mt)return on;return on}function Pc(Ve){return bh(Ve)?xp(Ve):jg(Ve)}function Po(Ve){return bh(Ve)?gx(Ve):vf(Ve)}function Zu(Ve){for(var mt=Ve.length;mt--&&eo.test(Ve.charAt(mt)););return mt}var q1=be(Ne);function xp(Ve){for(var mt=ks.lastIndex=0;ks.test(Ve);)++mt;return mt}function gx(Ve){return Ve.match(ks)||[]}function yx(Ve){return Ve.match(Rs)||[]}var ws=function Ve(mt){mt=mt==null?dn:wd.defaults(dn.Object(),mt,wd.pick(dn,Ml));var et=mt.Array,on=mt.Date,Bn=mt.Error,On=mt.Function,Cr=mt.Math,er=mt.Object,_h=mt.RegExp,Ug=mt.String,Pa=mt.TypeError,Ed=et.prototype,No=On.prototype,$l=er.prototype,wh=mt["__core-js_shared__"],_p=No.toString,mr=$l.hasOwnProperty,sa=0,Eh=function(){var E=/[^.]+$/.exec(wh&&wh.keys&&wh.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),wp=$l.toString,J0=_p.call(er),vx=dn._,bx=_h("^"+_p.call(mr).replace(Zs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z0=_s?mt.Buffer:n,xf=mt.Symbol,em=mt.Uint8Array,W1=Z0?Z0.allocUnsafe:n,Bl=Q0(er.getPrototypeOf,er),zg=er.create,Sh=$l.propertyIsEnumerable,Vg=Ed.splice,Hg=xf?xf.isConcatSpreadable:n,jl=xf?xf.iterator:n,Th=xf?xf.toStringTag:n,Ep=function(){try{var E=rs(er,"defineProperty");return E({},"",{}),E}catch{}}(),xx=mt.clearTimeout!==dn.clearTimeout&&mt.clearTimeout,Wi=on&&on.now!==dn.Date.now&&on.now,G1=mt.setTimeout!==dn.setTimeout&&mt.setTimeout,Ch=Cr.ceil,_f=Cr.floor,qg=er.getOwnPropertySymbols,Y1=Z0?Z0.isBuffer:n,Sp=mt.isFinite,K1=Ed.join,Tp=Q0(er.keys,er),io=Cr.max,Na=Cr.min,d2=on.now,_x=mt.parseInt,tm=Cr.random,Cp=Ed.reverse,Wg=rs(mt,"DataView"),Ap=rs(mt,"Map"),Gg=rs(mt,"Promise"),Do=rs(mt,"Set"),kp=rs(mt,"WeakMap"),Sd=rs(er,"create"),Yg=kp&&new kp,Rp={},X1=fm(Wg),wf=fm(Ap),Ip=fm(Gg),Ah=fm(Do),Ul=fm(kp),kh=xf?xf.prototype:n,wu=kh?kh.valueOf:n,Kg=kh?kh.toString:n;function ye(E){if(jo(E)&&!Sr(E)&&!(E instanceof Mn)){if(E instanceof Da)return E;if(mr.call(E,"__wrapped__"))return VI(E)}return new Da(E)}var Pp=function(){function E(){}return function(P){if(!xo(P))return{};if(zg)return zg(P);E.prototype=P;var H=new E;return E.prototype=n,H}}();function Nc(){}function Da(E,P){this.__wrapped__=E,this.__actions__=[],this.__chain__=!!P,this.__index__=0,this.__values__=n}ye.templateSettings={escape:Gu,evaluate:Sa,interpolate:Ta,variable:"",imports:{_:ye}},ye.prototype=Nc.prototype,ye.prototype.constructor=ye,Da.prototype=Pp(Nc.prototype),Da.prototype.constructor=Da;function Mn(E){this.__wrapped__=E,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=W,this.__views__=[]}function Oo(){var E=new Mn(this.__wrapped__);return E.__actions__=su(this.__actions__),E.__dir__=this.__dir__,E.__filtered__=this.__filtered__,E.__iteratees__=su(this.__iteratees__),E.__takeCount__=this.__takeCount__,E.__views__=su(this.__views__),E}function Q1(){if(this.__filtered__){var E=new Mn(this);E.__dir__=-1,E.__filtered__=!0}else E=this.clone(),E.__dir__*=-1;return E}function Np(){var E=this.__wrapped__.value(),P=this.__dir__,H=Sr(E),se=P<0,fe=H?E.length:0,_e=EC(0,fe,this.__views__),Re=_e.start,$e=_e.end,Ge=$e-Re,St=se?$e:Re-1,Ct=this.__iteratees__,Mt=Ct.length,fn=0,Nn=Na(Ge,this.__takeCount__);if(!H||!se&&fe==Ge&&Nn==Ge)return zp(E,this.__actions__);var Qn=[];e:for(;Ge--&&fn<Nn;){St+=P;for(var $r=-1,Jn=E[St];++$r<Mt;){var Qr=Ct[$r],li=Qr.iteratee,Ld=Qr.type,zc=li(Jn);if(Ld==z)Jn=zc;else if(!zc){if(Ld==j)continue e;break e}}Qn[fn++]=Jn}return Qn}Mn.prototype=Pp(Nc.prototype),Mn.prototype.constructor=Mn;function Ja(E){var P=-1,H=E==null?0:E.length;for(this.clear();++P<H;){var se=E[P];this.set(se[0],se[1])}}function Gi(){this.__data__=Sd?Sd(null):{},this.size=0}function Fi(E){var P=this.has(E)&&delete this.__data__[E];return this.size-=P?1:0,P}function Ef(E){var P=this.__data__;if(Sd){var H=P[E];return H===u?n:H}return mr.call(P,E)?P[E]:n}function oa(E){var P=this.__data__;return Sd?P[E]!==n:mr.call(P,E)}function Oa(E,P){var H=this.__data__;return this.size+=this.has(E)?0:1,H[E]=Sd&&P===n?u:P,this}Ja.prototype.clear=Gi,Ja.prototype.delete=Fi,Ja.prototype.get=Ef,Ja.prototype.has=oa,Ja.prototype.set=Oa;function Ma(E){var P=-1,H=E==null?0:E.length;for(this.clear();++P<H;){var se=E[P];this.set(se[0],se[1])}}function Dp(){this.__data__=[],this.size=0}function La(E){var P=this.__data__,H=Fa(P,E);if(H<0)return!1;var se=P.length-1;return H==se?P.pop():Vg.call(P,H,1),--this.size,!0}function nm(E){var P=this.__data__,H=Fa(P,E);return H<0?n:P[H][1]}function wx(E){return Fa(this.__data__,E)>-1}function J1(E,P){var H=this.__data__,se=Fa(H,E);return se<0?(++this.size,H.push([E,P])):H[se][1]=P,this}Ma.prototype.clear=Dp,Ma.prototype.delete=La,Ma.prototype.get=nm,Ma.prototype.has=wx,Ma.prototype.set=J1;function Za(E){var P=-1,H=E==null?0:E.length;for(this.clear();++P<H;){var se=E[P];this.set(se[0],se[1])}}function h2(){this.size=0,this.__data__={hash:new Ja,map:new(Ap||Ma),string:new Ja}}function Sf(E){var P=Kn(this,E).delete(E);return this.size-=P?1:0,P}function rm(E){return Kn(this,E).get(E)}function Z1(E){return Kn(this,E).has(E)}function Xg(E,P){var H=Kn(this,E),se=H.size;return H.set(E,P),this.size+=H.size==se?0:1,this}Za.prototype.clear=h2,Za.prototype.delete=Sf,Za.prototype.get=rm,Za.prototype.has=Z1,Za.prototype.set=Xg;function eu(E){var P=-1,H=E==null?0:E.length;for(this.__data__=new Za;++P<H;)this.add(E[P])}function Rh(E){return this.__data__.set(E,u),this}function tu(E){return this.__data__.has(E)}eu.prototype.add=eu.prototype.push=Rh,eu.prototype.has=tu;function aa(E){var P=this.__data__=new Ma(E);this.size=P.size}function Ih(){this.__data__=new Ma,this.size=0}function Ph(E){var P=this.__data__,H=P.delete(E);return this.size=P.size,H}function nu(E){return this.__data__.get(E)}function ru(E){return this.__data__.has(E)}function Nh(E,P){var H=this.__data__;if(H instanceof Ma){var se=H.__data__;if(!Ap||se.length<i-1)return se.push([E,P]),this.size=++H.size,this;H=this.__data__=new Za(se)}return H.set(E,P),this.size=H.size,this}aa.prototype.clear=Ih,aa.prototype.delete=Ph,aa.prototype.get=nu,aa.prototype.has=ru,aa.prototype.set=Nh;function Eu(E,P){var H=Sr(E),se=!H&&jx(E),fe=!H&&!se&&hv(E),_e=!H&&!se&&!fe&&j2(E),Re=H||se||fe||_e,$e=Re?Lr(E.length,Ug):[],Ge=$e.length;for(var St in E)(P||mr.call(E,St))&&!(Re&&(St=="length"||fe&&(St=="offset"||St=="parent")||_e&&(St=="buffer"||St=="byteLength"||St=="byteOffset")||Os(St,Ge)))&&$e.push(St);return $e}function es(E){var P=E.length;return P?E[rl(0,P-1)]:n}function Op(E,P){return _2(su(E),tl(P,0,E.length))}function p2(E){return _2(su(E))}function Dh(E,P,H){(H!==n&&!Kp(E[P],H)||H===n&&!(P in E))&&Dc(E,P,H)}function Is(E,P,H){var se=E[P];(!(mr.call(E,P)&&Kp(se,H))||H===n&&!(P in E))&&Dc(E,P,H)}function Fa(E,P){for(var H=E.length;H--;)if(Kp(E[H][0],P))return H;return-1}function nn(E,P,H,se){return zl(E,function(fe,_e,Re){P(se,fe,H(fe),Re)}),se}function bi(E,P){return E&&Ds(P,ku(P),E)}function el(E,P){return E&&Ds(P,Lf(P),E)}function Dc(E,P,H){P=="__proto__"&&Ep?Ep(E,P,{configurable:!0,enumerable:!0,value:H,writable:!0}):E[P]=H}function ev(E,P){for(var H=-1,se=P.length,fe=et(se),_e=E==null;++H<se;)fe[H]=_e?n:H7(E,P[H]);return fe}function tl(E,P,H){return E===E&&(H!==n&&(E=E<=H?E:H),P!==n&&(E=E>=P?E:P)),E}function ua(E,P,H,se,fe,_e){var Re,$e=P&f,Ge=P&d,St=P&h;if(H&&(Re=fe?H(E,se,fe,_e):H(E)),Re!==n)return Re;if(!xo(E))return E;var Ct=Sr(E);if(Ct){if(Re=Ix(E),!$e)return su(E,Re)}else{var Mt=au(E),fn=Mt==me||Mt==Oe;if(hv(E))return Tx(E,$e);if(Mt==We||Mt==oe||fn&&!fe){if(Re=Ge||fn?{}:uu(E),!$e)return Ge?wC(E,el(Re,E)):lm(E,bi(Re,E))}else{if(!Gn[Mt])return fe?E:{};Re=T7(E,Mt,$e)}}_e||(_e=new aa);var Nn=_e.get(E);if(Nn)return Nn;_e.set(E,Re),ate(E)?E.forEach(function(Jn){Re.add(ua(Jn,P,H,Jn,E,_e))}):ste(E)&&E.forEach(function(Jn,Qr){Re.set(Qr,ua(Jn,P,H,Qr,E,_e))});var Qn=St?Ge?qe:it:Ge?Lf:ku,$r=Ct?n:Qn(E);return oi($r||E,function(Jn,Qr){$r&&(Qr=Jn,Jn=E[Qr]),Is(Re,Qr,ua(Jn,P,H,Qr,E,_e))}),Re}function tv(E){var P=ku(E);return function(H){return im(H,E,P)}}function im(E,P,H){var se=H.length;if(E==null)return!se;for(E=er(E);se--;){var fe=H[se],_e=P[fe],Re=E[fe];if(Re===n&&!(fe in E)||!_e(Re))return!1}return!0}function nv(E,P,H){if(typeof E!="function")throw new Pa(o);return cv(function(){E.apply(n,H)},P)}function Oc(E,P,H,se){var fe=-1,_e=ia,Re=!0,$e=E.length,Ge=[],St=P.length;if(!$e)return Ge;H&&(P=vi(P,ai(H))),se?(_e=vd,Re=!1):P.length>=i&&(_e=Io,Re=!1,P=new eu(P));e:for(;++fe<$e;){var Ct=E[fe],Mt=H==null?Ct:H(Ct);if(Ct=se||Ct!==0?Ct:0,Re&&Mt===Mt){for(var fn=St;fn--;)if(P[fn]===Mt)continue e;Ge.push(Ct)}else _e(P,Mt,se)||Ge.push(Ct)}return Ge}var zl=Lo(Ps),rv=Lo(Oh,!0);function zs(E,P){var H=!0;return zl(E,function(se,fe,_e){return H=!!P(se,fe,_e),H}),H}function la(E,P,H){for(var se=-1,fe=E.length;++se<fe;){var _e=E[se],Re=P(_e);if(Re!=null&&($e===n?Re===Re&&!Md(Re):H(Re,$e)))var $e=Re,Ge=_e}return Ge}function Mc(E,P,H,se){var fe=E.length;for(H=Nr(H),H<0&&(H=-H>fe?0:fe+H),se=se===n||se>fe?fe:Nr(se),se<0&&(se+=fe),se=H>se?0:lte(se);H<se;)E[H++]=P;return E}function Qg(E,P){var H=[];return zl(E,function(se,fe,_e){P(se,fe,_e)&&H.push(se)}),H}function Es(E,P,H,se,fe){var _e=-1,Re=E.length;for(H||(H=v2),fe||(fe=[]);++_e<Re;){var $e=E[_e];P>0&&H($e)?P>1?Es($e,P-1,H,se,fe):Ku(fe,$e):se||(fe[fe.length]=$e)}return fe}var Su=Hp(),sm=Hp(!0);function Ps(E,P){return E&&Su(E,P,ku)}function Oh(E,P){return E&&sm(E,P,ku)}function Mp(E,P){return Ra(P,function(H){return py(E[H])})}function Tf(E,P){P=Pf(P,E);for(var H=0,se=P.length;E!=null&&H<se;)E=E[Nd(P[H++])];return H&&H==se?E:n}function Jg(E,P,H){var se=P(E);return Sr(E)?se:Ku(se,H(E))}function Mo(E){return E==null?E===n?Lt:lt:Th&&Th in er(E)?Br(E):TC(E)}function Lc(E,P){return E>P}function iu(E,P){return E!=null&&mr.call(E,P)}function Cf(E,P){return E!=null&&P in er(E)}function om(E,P,H){return E>=Na(P,H)&&E<io(P,H)}function Lp(E,P,H){for(var se=H?vd:ia,fe=E[0].length,_e=E.length,Re=_e,$e=et(_e),Ge=1/0,St=[];Re--;){var Ct=E[Re];Re&&P&&(Ct=vi(Ct,ai(P))),Ge=Na(Ct.length,Ge),$e[Re]=!H&&(P||fe>=120&&Ct.length>=120)?new eu(Re&&Ct):n}Ct=E[0];var Mt=-1,fn=$e[0];e:for(;++Mt<fe&&St.length<Ge;){var Nn=Ct[Mt],Qn=P?P(Nn):Nn;if(Nn=H||Nn!==0?Nn:0,!(fn?Io(fn,Qn):se(St,Qn,H))){for(Re=_e;--Re;){var $r=$e[Re];if(!($r?Io($r,Qn):se(E[Re],Qn,H)))continue e}fn&&fn.push(Qn),St.push(Nn)}}return St}function nl(E,P,H,se){return Ps(E,function(fe,_e,Re){P(se,H(fe),_e,Re)}),se}function Tu(E,P,H){P=Pf(P,E),E=ja(E,P);var se=E==null?E:E[Nd(sl(P))];return se==null?n:ro(se,E,H)}function am(E){return jo(E)&&Mo(E)==oe}function iv(E){return jo(E)&&Mo(E)==Qe}function Af(E){return jo(E)&&Mo(E)==Ee}function Cu(E,P,H,se,fe){return E===P?!0:E==null||P==null||!jo(E)&&!jo(P)?E!==E&&P!==P:sv(E,P,H,se,Cu,fe)}function sv(E,P,H,se,fe,_e){var Re=Sr(E),$e=Sr(P),Ge=Re?de:au(E),St=$e?de:au(P);Ge=Ge==oe?We:Ge,St=St==oe?We:St;var Ct=Ge==We,Mt=St==We,fn=Ge==St;if(fn&&hv(E)){if(!hv(P))return!1;Re=!0,Ct=!1}if(fn&&!Ct)return _e||(_e=new aa),Re||j2(E)?Ui(E,P,H,se,fe,_e):Si(E,P,Ge,H,se,fe,_e);if(!(H&p)){var Nn=Ct&&mr.call(E,"__wrapped__"),Qn=Mt&&mr.call(P,"__wrapped__");if(Nn||Qn){var $r=Nn?E.value():E,Jn=Qn?P.value():P;return _e||(_e=new aa),fe($r,Jn,H,se,_e)}}return fn?(_e||(_e=new aa),ou(E,P,H,se,fe,_e)):!1}function Zg(E){return jo(E)&&au(E)==Me}function Mh(E,P,H,se){var fe=H.length,_e=fe,Re=!se;if(E==null)return!_e;for(E=er(E);fe--;){var $e=H[fe];if(Re&&$e[2]?$e[1]!==E[$e[0]]:!($e[0]in E))return!1}for(;++fe<_e;){$e=H[fe];var Ge=$e[0],St=E[Ge],Ct=$e[1];if(Re&&$e[2]){if(St===n&&!(Ge in E))return!1}else{var Mt=new aa;if(se)var fn=se(St,Ct,Ge,E,P,Mt);if(!(fn===n?Cu(Ct,St,p|m,se,Mt):fn))return!1}}return!0}function Ss(E){if(!xo(E)||$I(E))return!1;var P=py(E)?bx:md;return P.test(fm(E))}function fr(E){return jo(E)&&Mo(E)==_t}function $i(E){return jo(E)&&au(E)==It}function fs(E){return jo(E)&&r6(E.length)&&!!xr[Mo(E)]}function Ns(E){return typeof E=="function"?E:E==null?Ff:typeof E=="object"?Sr(E)?Bi(E[0],E[1]):kf(E):xte(E)}function Vs(E){if(!Gp(E))return Tp(E);var P=[];for(var H in er(E))mr.call(E,H)&&H!="constructor"&&P.push(H);return P}function Lh(E){if(!xo(E))return UI(E);var P=Gp(E),H=[];for(var se in E)se=="constructor"&&(P||!mr.call(E,se))||H.push(se);return H}function Yi(E,P){return E<P}function Fp(E,P){var H=-1,se=Mf(E)?et(E.length):[];return zl(E,function(fe,_e,Re){se[++H]=P(fe,_e,Re)}),se}function kf(E){var P=Fr(E);return P.length==1&&P[0][2]?b2(P[0][0],P[0][1]):function(H){return H===E||Mh(H,E,P)}}function Bi(E,P){return vn(E)&&Nx(P)?b2(Nd(E),P):function(H){var se=H7(H,E);return se===n&&se===P?q7(H,E):Cu(P,se,p|m)}}function Td(E,P,H,se,fe){E!==P&&Su(P,function(_e,Re){if(fe||(fe=new aa),xo(_e))$p(E,P,Re,H,Td,se,fe);else{var $e=se?se(Bh(E,Re),_e,Re+"",E,P,fe):n;$e===n&&($e=_e),Dh(E,Re,$e)}},Lf)}function $p(E,P,H,se,fe,_e,Re){var $e=Bh(E,H),Ge=Bh(P,H),St=Re.get(Ge);if(St){Dh(E,H,St);return}var Ct=_e?_e($e,Ge,H+"",E,P,Re):n,Mt=Ct===n;if(Mt){var fn=Sr(Ge),Nn=!fn&&hv(Ge),Qn=!fn&&!Nn&&j2(Ge);Ct=Ge,fn||Nn||Qn?Sr($e)?Ct=$e:ha($e)?Ct=su($e):Nn?(Mt=!1,Ct=Tx(Ge,!0)):Qn?(Mt=!1,Ct=Ax(Ge,!0)):Ct=[]:VC(Ge)||jx(Ge)?(Ct=$e,jx($e)?Ct=cte($e):(!xo($e)||py($e))&&(Ct=uu(Ge))):Mt=!1}Mt&&(Re.set(Ge,Ct),fe(Ct,Ge,se,_e,Re),Re.delete(Ge)),Dh(E,H,Ct)}function ca(E,P){var H=E.length;if(H)return P+=P<0?H:0,Os(P,H)?E[P]:n}function Bp(E,P,H){P.length?P=vi(P,function(_e){return Sr(_e)?function(Re){return Tf(Re,_e.length===1?_e[0]:_e)}:_e}):P=[Ff];var se=-1;P=vi(P,ai(Gt()));var fe=Fp(E,function(_e,Re,$e){var Ge=vi(P,function(St){return St(_e)});return{criteria:Ge,index:++se,value:_e}});return ut(fe,function(_e,Re){return _C(_e,Re,H)})}function ey(E,P){return $a(E,P,function(H,se){return q7(E,se)})}function $a(E,P,H){for(var se=-1,fe=P.length,_e={};++se<fe;){var Re=P[se],$e=Tf(E,Re);H($e,Re)&&Rf(_e,Pf(Re,E),$e)}return _e}function Ti(E){return function(P){return Tf(P,E)}}function ds(E,P,H,se){var fe=se?_u:xd,_e=-1,Re=P.length,$e=E;for(E===P&&(P=su(P)),H&&($e=vi(E,ai(H)));++_e<Re;)for(var Ge=0,St=P[_e],Ct=H?H(St):St;(Ge=fe($e,Ct,Ge,se))>-1;)$e!==E&&Vg.call($e,Ge,1),Vg.call(E,Ge,1);return E}function Hs(E,P){for(var H=E?P.length:0,se=H-1;H--;){var fe=P[H];if(H==se||fe!==_e){var _e=fe;Os(fe)?Vg.call(E,fe,1):ry(E,fe)}}return E}function rl(E,P){return E+_f(tm()*(P-E+1))}function Fh(E,P,H,se){for(var fe=-1,_e=io(Ch((P-E)/(H||1)),0),Re=et(_e);_e--;)Re[se?_e:++fe]=E,E+=H;return Re}function Au(E,P){var H="";if(!E||P<1||P>ne)return H;do P%2&&(H+=E),P=_f(P/2),P&&(E+=E);while(P);return H}function dr(E,P){return jc(x2(E,P,Ff),E+"")}function so(E){return es(U2(E))}function ty(E,P){var H=U2(E);return _2(H,tl(P,0,H.length))}function Rf(E,P,H,se){if(!xo(E))return E;P=Pf(P,E);for(var fe=-1,_e=P.length,Re=_e-1,$e=E;$e!=null&&++fe<_e;){var Ge=Nd(P[fe]),St=H;if(Ge==="__proto__"||Ge==="constructor"||Ge==="prototype")return E;if(fe!=Re){var Ct=$e[Ge];St=se?se(Ct,Ge,$e):n,St===n&&(St=xo(Ct)?Ct:Os(P[fe+1])?[]:{})}Is($e,Ge,St),$e=$e[Ge]}return E}var jp=Yg?function(E,P){return Yg.set(E,P),E}:Ff,ts=Ep?function(E,P){return Ep(E,"toString",{configurable:!0,enumerable:!1,value:G7(P),writable:!0})}:Ff;function bo(E){return _2(U2(E))}function ji(E,P,H){var se=-1,fe=E.length;P<0&&(P=-P>fe?0:fe+P),H=H>fe?fe:H,H<0&&(H+=fe),fe=P>H?0:H-P>>>0,P>>>=0;for(var _e=et(fe);++se<fe;)_e[se]=E[se+P];return _e}function Ba(E,P){var H;return zl(E,function(se,fe,_e){return H=P(se,fe,_e),!H}),!!H}function Up(E,P,H){var se=0,fe=E==null?se:E.length;if(typeof P=="number"&&P===P&&fe<=q){for(;se<fe;){var _e=se+fe>>>1,Re=E[_e];Re!==null&&!Md(Re)&&(H?Re<=P:Re<P)?se=_e+1:fe=_e}return fe}return um(E,P,Ff,H)}function um(E,P,H,se){var fe=0,_e=E==null?0:E.length;if(_e===0)return 0;P=H(P);for(var Re=P!==P,$e=P===null,Ge=Md(P),St=P===n;fe<_e;){var Ct=_f((fe+_e)/2),Mt=H(E[Ct]),fn=Mt!==n,Nn=Mt===null,Qn=Mt===Mt,$r=Md(Mt);if(Re)var Jn=se||Qn;else St?Jn=Qn&&(se||fn):$e?Jn=Qn&&fn&&(se||!Nn):Ge?Jn=Qn&&fn&&!Nn&&(se||!$r):Nn||$r?Jn=!1:Jn=se?Mt<=P:Mt<P;Jn?fe=Ct+1:_e=Ct}return Na(_e,te)}function ny(E,P){for(var H=-1,se=E.length,fe=0,_e=[];++H<se;){var Re=E[H],$e=P?P(Re):Re;if(!H||!Kp($e,Ge)){var Ge=$e;_e[fe++]=Re===0?0:Re}}return _e}function Ex(E){return typeof E=="number"?E:Md(E)?X:+E}function qs(E){if(typeof E=="string")return E;if(Sr(E))return vi(E,qs)+"";if(Md(E))return Kg?Kg.call(E):"";var P=E+"";return P=="0"&&1/E==-1/0?"-0":P}function If(E,P,H){var se=-1,fe=ia,_e=E.length,Re=!0,$e=[],Ge=$e;if(H)Re=!1,fe=vd;else if(_e>=i){var St=P?null:He(E);if(St)return Ic(St);Re=!1,fe=Io,Ge=new eu}else Ge=P?[]:$e;e:for(;++se<_e;){var Ct=E[se],Mt=P?P(Ct):Ct;if(Ct=H||Ct!==0?Ct:0,Re&&Mt===Mt){for(var fn=Ge.length;fn--;)if(Ge[fn]===Mt)continue e;P&&Ge.push(Mt),$e.push(Ct)}else fe(Ge,Mt,H)||(Ge!==$e&&Ge.push(Mt),$e.push(Ct))}return $e}function ry(E,P){return P=Pf(P,E),E=ja(E,P),E==null||delete E[Nd(sl(P))]}function iy(E,P,H,se){return Rf(E,P,H(Tf(E,P)),se)}function Fc(E,P,H,se){for(var fe=E.length,_e=se?fe:-1;(se?_e--:++_e<fe)&&P(E[_e],_e,E););return H?ji(E,se?0:_e,se?_e+1:fe):ji(E,se?_e+1:0,se?fe:_e)}function zp(E,P){var H=E;return H instanceof Mn&&(H=H.value()),Xu(P,function(se,fe){return fe.func.apply(fe.thisArg,Ku([se],fe.args))},H)}function sy(E,P,H){var se=E.length;if(se<2)return se?If(E[0]):[];for(var fe=-1,_e=et(se);++fe<se;)for(var Re=E[fe],$e=-1;++$e<se;)$e!=fe&&(_e[fe]=Oc(_e[fe]||Re,E[$e],P,H));return If(Es(_e,1),P,H)}function Vp(E,P,H){for(var se=-1,fe=E.length,_e=P.length,Re={};++se<fe;){var $e=se<_e?P[se]:n;H(Re,E[se],$e)}return Re}function Cd(E){return ha(E)?E:[]}function ov(E){return typeof E=="function"?E:Ff}function Pf(E,P){return Sr(E)?E:vn(E,P)?[E]:kC(Ki(E))}var Sx=dr;function Nf(E,P,H){var se=E.length;return H=H===n?se:H,!P&&H>=se?E:ji(E,P,H)}var Ad=xx||function(E){return dn.clearTimeout(E)};function Tx(E,P){if(P)return E.slice();var H=E.length,se=W1?W1(H):new E.constructor(H);return E.copy(se),se}function $c(E){var P=new E.constructor(E.byteLength);return new em(P).set(new em(E)),P}function Cx(E,P){var H=P?$c(E.buffer):E.buffer;return new E.constructor(H,E.byteOffset,E.byteLength)}function ns(E){var P=new E.constructor(E.source,Ka.exec(E));return P.lastIndex=E.lastIndex,P}function m2(E){return wu?er(wu.call(E)):{}}function Ax(E,P){var H=P?$c(E.buffer):E.buffer;return new E.constructor(H,E.byteOffset,E.length)}function kx(E,P){if(E!==P){var H=E!==n,se=E===null,fe=E===E,_e=Md(E),Re=P!==n,$e=P===null,Ge=P===P,St=Md(P);if(!$e&&!St&&!_e&&E>P||_e&&Re&&Ge&&!$e&&!St||se&&Re&&Ge||!H&&Ge||!fe)return 1;if(!se&&!_e&&!St&&E<P||St&&H&&fe&&!se&&!_e||$e&&H&&fe||!Re&&fe||!Ge)return-1}return 0}function _C(E,P,H){for(var se=-1,fe=E.criteria,_e=P.criteria,Re=fe.length,$e=H.length;++se<Re;){var Ge=kx(fe[se],_e[se]);if(Ge){if(se>=$e)return Ge;var St=H[se];return Ge*(St=="desc"?-1:1)}}return E.index-P.index}function Rx(E,P,H,se){for(var fe=-1,_e=E.length,Re=H.length,$e=-1,Ge=P.length,St=io(_e-Re,0),Ct=et(Ge+St),Mt=!se;++$e<Ge;)Ct[$e]=P[$e];for(;++fe<Re;)(Mt||fe<_e)&&(Ct[H[fe]]=E[fe]);for(;St--;)Ct[$e++]=E[fe++];return Ct}function av(E,P,H,se){for(var fe=-1,_e=E.length,Re=-1,$e=H.length,Ge=-1,St=P.length,Ct=io(_e-$e,0),Mt=et(Ct+St),fn=!se;++fe<Ct;)Mt[fe]=E[fe];for(var Nn=fe;++Ge<St;)Mt[Nn+Ge]=P[Ge];for(;++Re<$e;)(fn||fe<_e)&&(Mt[Nn+H[Re]]=E[fe++]);return Mt}function su(E,P){var H=-1,se=E.length;for(P||(P=et(se));++H<se;)P[H]=E[H];return P}function Ds(E,P,H,se){var fe=!H;H||(H={});for(var _e=-1,Re=P.length;++_e<Re;){var $e=P[_e],Ge=se?se(H[$e],E[$e],$e,H,E):n;Ge===n&&(Ge=E[$e]),fe?Dc(H,$e,Ge):Is(H,$e,Ge)}return H}function lm(E,P){return Ds(E,$o(E),P)}function wC(E,P){return Ds(E,y2(E),P)}function Bc(E,P){return function(H,se){var fe=Sr(H)?Ac:nn,_e=P?P():{};return fe(H,E,Gt(se,2),_e)}}function kd(E){return dr(function(P,H){var se=-1,fe=H.length,_e=fe>1?H[fe-1]:n,Re=fe>2?H[2]:n;for(_e=E.length>3&&typeof _e=="function"?(fe--,_e):n,Re&&il(H[0],H[1],Re)&&(_e=fe<3?n:_e,fe=1),P=er(P);++se<fe;){var $e=H[se];$e&&E(P,$e,se,_e)}return P})}function Lo(E,P){return function(H,se){if(H==null)return H;if(!Mf(H))return E(H,se);for(var fe=H.length,_e=P?fe:-1,Re=er(H);(P?_e--:++_e<fe)&&se(Re[_e],_e,Re)!==!1;);return H}}function Hp(E){return function(P,H,se){for(var fe=-1,_e=er(P),Re=se(P),$e=Re.length;$e--;){var Ge=Re[E?$e:++fe];if(H(_e[Ge],Ge,_e)===!1)break}return P}}function cm(E,P,H){var se=P&g,fe=Wp(E);function _e(){var Re=this&&this!==dn&&this instanceof _e?fe:E;return Re.apply(se?H:this,arguments)}return _e}function oy(E){return function(P){P=Ki(P);var H=bh(P)?Po(P):n,se=H?H[0]:P.charAt(0),fe=H?Nf(H,1).join(""):P.slice(1);return se[E]()+fe}}function qp(E){return function(P){return Xu(vte(yte(P).replace(bp,"")),E,"")}}function Wp(E){return function(){var P=arguments;switch(P.length){case 0:return new E;case 1:return new E(P[0]);case 2:return new E(P[0],P[1]);case 3:return new E(P[0],P[1],P[2]);case 4:return new E(P[0],P[1],P[2],P[3]);case 5:return new E(P[0],P[1],P[2],P[3],P[4]);case 6:return new E(P[0],P[1],P[2],P[3],P[4],P[5]);case 7:return new E(P[0],P[1],P[2],P[3],P[4],P[5],P[6])}var H=Pp(E.prototype),se=E.apply(H,P);return xo(se)?se:H}}function uv(E,P,H){var se=Wp(E);function fe(){for(var _e=arguments.length,Re=et(_e),$e=_e,Ge=kn(fe);$e--;)Re[$e]=arguments[$e];var St=_e<3&&Re[0]!==Ge&&Re[_e-1]!==Ge?[]:Ju(Re,Ge);if(_e-=St.length,_e<H)return ae(E,P,Rd,fe.placeholder,n,Re,St,n,n,H-_e);var Ct=this&&this!==dn&&this instanceof fe?se:E;return ro(Ct,this,Re)}return fe}function $h(E){return function(P,H,se){var fe=er(P);if(!Mf(P)){var _e=Gt(H,3);P=ku(P),H=function($e){return _e(fe[$e],$e,fe)}}var Re=E(P,H,se);return Re>-1?fe[_e?P[Re]:Re]:n}}function ay(E){return Fo(function(P){var H=P.length,se=H,fe=Da.prototype.thru;for(E&&P.reverse();se--;){var _e=P[se];if(typeof _e!="function")throw new Pa(o);if(fe&&!Re&&rn(_e)=="wrapper")var Re=new Da([],!0)}for(se=Re?se:H;++se<H;){_e=P[se];var $e=rn(_e),Ge=$e=="wrapper"?ct(_e):n;Ge&&Px(Ge[0])&&Ge[1]==(R|x|S|I)&&!Ge[4].length&&Ge[9]==1?Re=Re[rn(Ge[0])].apply(Re,Ge[3]):Re=_e.length==1&&Px(_e)?Re[$e]():Re.thru(_e)}return function(){var St=arguments,Ct=St[0];if(Re&&St.length==1&&Sr(Ct))return Re.plant(Ct).value();for(var Mt=0,fn=H?P[Mt].apply(this,St):Ct;++Mt<H;)fn=P[Mt].call(this,fn);return fn}})}function Rd(E,P,H,se,fe,_e,Re,$e,Ge,St){var Ct=P&R,Mt=P&g,fn=P&b,Nn=P&(x|w),Qn=P&O,$r=fn?n:Wp(E);function Jn(){for(var Qr=arguments.length,li=et(Qr),Ld=Qr;Ld--;)li[Ld]=arguments[Ld];if(Nn)var zc=kn(Jn),Fd=Ll(li,zc);if(se&&(li=Rx(li,se,fe,Nn)),_e&&(li=av(li,_e,Re,Nn)),Qr-=Fd,Nn&&Qr<St){var pa=Ju(li,zc);return ae(E,P,Rd,Jn.placeholder,H,li,pa,$e,Ge,St-Qr)}var Xp=Mt?H:this,gy=fn?Xp[E]:E;return Qr=li.length,$e?li=Id(li,$e):Qn&&Qr>1&&li.reverse(),Ct&&Ge<Qr&&(li.length=Ge),this&&this!==dn&&this instanceof Jn&&(gy=$r||Wp(gy)),gy.apply(Xp,li)}return Jn}function g2(E,P){return function(H,se){return nl(H,E,P(se),{})}}function uy(E,P){return function(H,se){var fe;if(H===n&&se===n)return P;if(H!==n&&(fe=H),se!==n){if(fe===n)return se;typeof H=="string"||typeof se=="string"?(H=qs(H),se=qs(se)):(H=Ex(H),se=Ex(se)),fe=E(H,se)}return fe}}function T(E){return Fo(function(P){return P=vi(P,ai(Gt())),dr(function(H){var se=this;return E(P,function(fe){return ro(fe,se,H)})})})}function k(E,P){P=P===n?" ":qs(P);var H=P.length;if(H<2)return H?Au(P,E):P;var se=Au(P,Ch(E/Pc(P)));return bh(P)?Nf(Po(se),0,E).join(""):se.slice(0,E)}function $(E,P,H,se){var fe=P&g,_e=Wp(E);function Re(){for(var $e=-1,Ge=arguments.length,St=-1,Ct=se.length,Mt=et(Ct+Ge),fn=this&&this!==dn&&this instanceof Re?_e:E;++St<Ct;)Mt[St]=se[St];for(;Ge--;)Mt[St++]=arguments[++$e];return ro(fn,fe?H:this,Mt)}return Re}function Y(E){return function(P,H,se){return se&&typeof se!="number"&&il(P,H,se)&&(H=se=n),P=my(P),H===n?(H=P,P=0):H=my(H),se=se===n?P<H?1:-1:my(se),Fh(P,H,se,E)}}function Z(E){return function(P,H){return typeof P=="string"&&typeof H=="string"||(P=jh(P),H=jh(H)),E(P,H)}}function ae(E,P,H,se,fe,_e,Re,$e,Ge,St){var Ct=P&x,Mt=Ct?Re:n,fn=Ct?n:Re,Nn=Ct?_e:n,Qn=Ct?n:_e;P|=Ct?S:C,P&=~(Ct?C:S),P&y||(P&=-4);var $r=[E,P,fe,Nn,Mt,Qn,fn,$e,Ge,St],Jn=H.apply(n,$r);return Px(E)&&CC(Jn,$r),Jn.placeholder=se,AC(Jn,E,P)}function xe(E){var P=Cr[E];return function(H,se){if(H=jh(H),se=se==null?0:Na(Nr(se),292),se&&Sp(H)){var fe=(Ki(H)+"e").split("e"),_e=P(fe[0]+"e"+(+fe[1]+se));return fe=(Ki(_e)+"e").split("e"),+(fe[0]+"e"+(+fe[1]-se))}return P(H)}}var He=Do&&1/Ic(new Do([,-0]))[1]==ee?function(E){return new Do(E)}:X7;function at(E){return function(P){var H=au(P);return H==Me?Rc(P):H==It?f2(P):Us(P,E(P))}}function Ft(E,P,H,se,fe,_e,Re,$e){var Ge=P&b;if(!Ge&&typeof E!="function")throw new Pa(o);var St=se?se.length:0;if(St||(P&=-97,se=fe=n),Re=Re===n?Re:io(Nr(Re),0),$e=$e===n?$e:Nr($e),St-=fe?fe.length:0,P&C){var Ct=se,Mt=fe;se=fe=n}var fn=Ge?n:ct(E),Nn=[E,P,H,se,fe,Ct,Mt,_e,Re,$e];if(fn&&jI(Nn,fn),E=Nn[0],P=Nn[1],H=Nn[2],se=Nn[3],fe=Nn[4],$e=Nn[9]=Nn[9]===n?Ge?0:E.length:io(Nn[9]-St,0),!$e&&P&(x|w)&&(P&=-25),!P||P==g)var Qn=cm(E,P,H);else P==x||P==w?Qn=uv(E,P,$e):(P==S||P==(g|S))&&!fe.length?Qn=$(E,P,H,se):Qn=Rd.apply(n,Nn);var $r=fn?jp:CC;return AC($r(Qn,Nn),E,P)}function yn(E,P,H,se){return E===n||Kp(E,$l[H])&&!mr.call(se,H)?P:E}function tr(E,P,H,se,fe,_e){return xo(E)&&xo(P)&&(_e.set(P,E),Td(E,P,n,tr,_e),_e.delete(P)),E}function an(E){return VC(E)?n:E}function Ui(E,P,H,se,fe,_e){var Re=H&p,$e=E.length,Ge=P.length;if($e!=Ge&&!(Re&&Ge>$e))return!1;var St=_e.get(E),Ct=_e.get(P);if(St&&Ct)return St==P&&Ct==E;var Mt=-1,fn=!0,Nn=H&m?new eu:n;for(_e.set(E,P),_e.set(P,E);++Mt<$e;){var Qn=E[Mt],$r=P[Mt];if(se)var Jn=Re?se($r,Qn,Mt,P,E,_e):se(Qn,$r,Mt,E,P,_e);if(Jn!==n){if(Jn)continue;fn=!1;break}if(Nn){if(!bd(P,function(Qr,li){if(!Io(Nn,li)&&(Qn===Qr||fe(Qn,Qr,H,se,_e)))return Nn.push(li)})){fn=!1;break}}else if(!(Qn===$r||fe(Qn,$r,H,se,_e))){fn=!1;break}}return _e.delete(E),_e.delete(P),fn}function Si(E,P,H,se,fe,_e,Re){switch(H){case wt:if(E.byteLength!=P.byteLength||E.byteOffset!=P.byteOffset)return!1;E=E.buffer,P=P.buffer;case Qe:return!(E.byteLength!=P.byteLength||!_e(new em(E),new em(P)));case pe:case Ee:case Ye:return Kp(+E,+P);case ge:return E.name==P.name&&E.message==P.message;case _t:case Et:return E==P+"";case Me:var $e=Rc;case It:var Ge=se&p;if($e||($e=Ic),E.size!=P.size&&!Ge)return!1;var St=Re.get(E);if(St)return St==P;se|=m,Re.set(E,P);var Ct=Ui($e(E),$e(P),se,fe,_e,Re);return Re.delete(E),Ct;case Ke:if(wu)return wu.call(E)==wu.call(P)}return!1}function ou(E,P,H,se,fe,_e){var Re=H&p,$e=it(E),Ge=$e.length,St=it(P),Ct=St.length;if(Ge!=Ct&&!Re)return!1;for(var Mt=Ge;Mt--;){var fn=$e[Mt];if(!(Re?fn in P:mr.call(P,fn)))return!1}var Nn=_e.get(E),Qn=_e.get(P);if(Nn&&Qn)return Nn==P&&Qn==E;var $r=!0;_e.set(E,P),_e.set(P,E);for(var Jn=Re;++Mt<Ge;){fn=$e[Mt];var Qr=E[fn],li=P[fn];if(se)var Ld=Re?se(li,Qr,fn,P,E,_e):se(Qr,li,fn,E,P,_e);if(!(Ld===n?Qr===li||fe(Qr,li,H,se,_e):Ld)){$r=!1;break}Jn||(Jn=fn=="constructor")}if($r&&!Jn){var zc=E.constructor,Fd=P.constructor;zc!=Fd&&"constructor"in E&&"constructor"in P&&!(typeof zc=="function"&&zc instanceof zc&&typeof Fd=="function"&&Fd instanceof Fd)&&($r=!1)}return _e.delete(E),_e.delete(P),$r}function Fo(E){return jc(x2(E,n,E2),E+"")}function it(E){return Jg(E,ku,$o)}function qe(E){return Jg(E,Lf,y2)}var ct=Yg?function(E){return Yg.get(E)}:X7;function rn(E){for(var P=E.name+"",H=Rp[P],se=mr.call(Rp,P)?H.length:0;se--;){var fe=H[se],_e=fe.func;if(_e==null||_e==E)return fe.name}return P}function kn(E){var P=mr.call(ye,"placeholder")?ye:E;return P.placeholder}function Gt(){var E=ye.iteratee||Y7;return E=E===Y7?Ns:E,arguments.length?E(arguments[0],arguments[1]):E}function Kn(E,P){var H=E.__data__;return lv(P)?H[typeof P=="string"?"string":"hash"]:H.map}function Fr(E){for(var P=ku(E),H=P.length;H--;){var se=P[H],fe=E[se];P[H]=[se,fe,Nx(fe)]}return P}function rs(E,P){var H=Qu(E,P);return Ss(H)?H:n}function Br(E){var P=mr.call(E,Th),H=E[Th];try{E[Th]=n;var se=!0}catch{}var fe=wp.call(E);return se&&(P?E[Th]=H:delete E[Th]),fe}var $o=qg?function(E){return E==null?[]:(E=er(E),Ra(qg(E),function(P){return Sh.call(E,P)}))}:Q7,y2=qg?function(E){for(var P=[];E;)Ku(P,$o(E)),E=Bl(E);return P}:Q7,au=Mo;(Wg&&au(new Wg(new ArrayBuffer(1)))!=wt||Ap&&au(new Ap)!=Me||Gg&&au(Gg.resolve())!=nt||Do&&au(new Do)!=It||kp&&au(new kp)!=sn)&&(au=function(E){var P=Mo(E),H=P==We?E.constructor:n,se=H?fm(H):"";if(se)switch(se){case X1:return wt;case wf:return Me;case Ip:return nt;case Ah:return It;case Ul:return sn}return P});function EC(E,P,H){for(var se=-1,fe=H.length;++se<fe;){var _e=H[se],Re=_e.size;switch(_e.type){case"drop":E+=Re;break;case"dropRight":P-=Re;break;case"take":P=Na(P,E+Re);break;case"takeRight":E=io(E,P-Re);break}}return{start:E,end:P}}function FI(E){var P=E.match(Jo);return P?P[1].split(Ca):[]}function SC(E,P,H){P=Pf(P,E);for(var se=-1,fe=P.length,_e=!1;++se<fe;){var Re=Nd(P[se]);if(!(_e=E!=null&&H(E,Re)))break;E=E[Re]}return _e||++se!=fe?_e:(fe=E==null?0:E.length,!!fe&&r6(fe)&&Os(Re,fe)&&(Sr(E)||jx(E)))}function Ix(E){var P=E.length,H=new E.constructor(P);return P&&typeof E[0]=="string"&&mr.call(E,"index")&&(H.index=E.index,H.input=E.input),H}function uu(E){return typeof E.constructor=="function"&&!Gp(E)?Pp(Bl(E)):{}}function T7(E,P,H){var se=E.constructor;switch(P){case Qe:return $c(E);case pe:case Ee:return new se(+E);case wt:return Cx(E,H);case Vt:case Wt:case bn:case Dn:case Zn:case wr:case Hn:case nr:case Ei:return Ax(E,H);case Me:return new se;case Ye:case Et:return new se(E);case _t:return ns(E);case It:return new se;case Ke:return m2(E)}}function C7(E,P){var H=P.length;if(!H)return E;var se=H-1;return P[se]=(H>1?"& ":"")+P[se],P=P.join(H>2?", ":" "),E.replace(go,`{
/* [wrapped with `+P+`] */
`)}function v2(E){return Sr(E)||jx(E)||!!(Hg&&E&&E[Hg])}function Os(E,P){var H=typeof E;return P=P??ne,!!P&&(H=="number"||H!="symbol"&&gf.test(E))&&E>-1&&E%1==0&&E<P}function il(E,P,H){if(!xo(H))return!1;var se=typeof P;return(se=="number"?Mf(H)&&Os(P,H.length):se=="string"&&P in H)?Kp(H[P],E):!1}function vn(E,P){if(Sr(E))return!1;var H=typeof E;return H=="number"||H=="symbol"||H=="boolean"||E==null||Md(E)?!0:Oi.test(E)||!Kr.test(E)||P!=null&&E in er(P)}function lv(E){var P=typeof E;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?E!=="__proto__":E===null}function Px(E){var P=rn(E),H=ye[P];if(typeof H!="function"||!(P in Mn.prototype))return!1;if(E===H)return!0;var se=ct(H);return!!se&&E===se[0]}function $I(E){return!!Eh&&Eh in E}var A7=wh?py:J7;function Gp(E){var P=E&&E.constructor,H=typeof P=="function"&&P.prototype||$l;return E===H}function Nx(E){return E===E&&!xo(E)}function b2(E,P){return function(H){return H==null?!1:H[E]===P&&(P!==n||E in er(H))}}function BI(E){var P=Yt(E,function(se){return H.size===l&&H.clear(),se}),H=P.cache;return P}function jI(E,P){var H=E[1],se=P[1],fe=H|se,_e=fe<(g|b|R),Re=se==R&&H==x||se==R&&H==I&&E[7].length<=P[8]||se==(R|I)&&P[7].length<=P[8]&&H==x;if(!(_e||Re))return E;se&g&&(E[2]=P[2],fe|=H&g?0:y);var $e=P[3];if($e){var Ge=E[3];E[3]=Ge?Rx(Ge,$e,P[4]):$e,E[4]=Ge?Ju(E[3],c):P[4]}return $e=P[5],$e&&(Ge=E[5],E[5]=Ge?av(Ge,$e,P[6]):$e,E[6]=Ge?Ju(E[5],c):P[6]),$e=P[7],$e&&(E[7]=$e),se&R&&(E[8]=E[8]==null?P[8]:Na(E[8],P[8])),E[9]==null&&(E[9]=P[9]),E[0]=P[0],E[1]=fe,E}function UI(E){var P=[];if(E!=null)for(var H in er(E))P.push(H);return P}function TC(E){return wp.call(E)}function x2(E,P,H){return P=io(P===n?E.length-1:P,0),function(){for(var se=arguments,fe=-1,_e=io(se.length-P,0),Re=et(_e);++fe<_e;)Re[fe]=se[P+fe];fe=-1;for(var $e=et(P+1);++fe<P;)$e[fe]=se[fe];return $e[P]=H(Re),ro(E,this,$e)}}function ja(E,P){return P.length<2?E:Tf(E,ji(P,0,-1))}function Id(E,P){for(var H=E.length,se=Na(P.length,H),fe=su(E);se--;){var _e=P[se];E[se]=Os(_e,H)?fe[_e]:n}return E}function Bh(E,P){if(!(P==="constructor"&&typeof E[P]=="function")&&P!="__proto__")return E[P]}var CC=Pd(jp),cv=G1||function(E,P){return dn.setTimeout(E,P)},jc=Pd(ts);function AC(E,P,H){var se=P+"";return jc(E,C7(se,zI(FI(se),H)))}function Pd(E){var P=0,H=0;return function(){var se=d2(),fe=D-(se-H);if(H=se,fe>0){if(++P>=V)return arguments[0]}else P=0;return E.apply(n,arguments)}}function _2(E,P){var H=-1,se=E.length,fe=se-1;for(P=P===n?se:P;++H<P;){var _e=rl(H,fe),Re=E[_e];E[_e]=E[H],E[H]=Re}return E.length=P,E}var kC=BI(function(E){var P=[];return E.charCodeAt(0)===46&&P.push(""),E.replace(si,function(H,se,fe,_e){P.push(fe?_e.replace(Pl,"$1"):se||H)}),P});function Nd(E){if(typeof E=="string"||Md(E))return E;var P=E+"";return P=="0"&&1/E==-1/0?"-0":P}function fm(E){if(E!=null){try{return _p.call(E)}catch{}try{return E+""}catch{}}return""}function zI(E,P){return oi(J,function(H){var se="_."+H[0];P&H[1]&&!ia(E,se)&&E.push(se)}),E.sort()}function VI(E){if(E instanceof Mn)return E.clone();var P=new Da(E.__wrapped__,E.__chain__);return P.__actions__=su(E.__actions__),P.__index__=E.__index__,P.__values__=E.__values__,P}function w2(E,P,H){(H?il(E,P,H):P===n)?P=1:P=io(Nr(P),0);var se=E==null?0:E.length;if(!se||P<1)return[];for(var fe=0,_e=0,Re=et(Ch(se/P));fe<se;)Re[_e++]=ji(E,fe,fe+=P);return Re}function RC(E){for(var P=-1,H=E==null?0:E.length,se=0,fe=[];++P<H;){var _e=E[P];_e&&(fe[se++]=_e)}return fe}function Df(){var E=arguments.length;if(!E)return[];for(var P=et(E-1),H=arguments[0],se=E;se--;)P[se-1]=arguments[se];return Ku(Sr(H)?su(H):[H],Es(P,1))}var ui=dr(function(E,P){return ha(E)?Oc(E,Es(P,1,ha,!0)):[]}),Ua=dr(function(E,P){var H=sl(P);return ha(H)&&(H=n),ha(E)?Oc(E,Es(P,1,ha,!0),Gt(H,2)):[]}),Bo=dr(function(E,P){var H=sl(P);return ha(H)&&(H=n),ha(E)?Oc(E,Es(P,1,ha,!0),n,H):[]});function lu(E,P,H){var se=E==null?0:E.length;return se?(P=H||P===n?1:Nr(P),ji(E,P<0?0:P,se)):[]}function Uc(E,P,H){var se=E==null?0:E.length;return se?(P=H||P===n?1:Nr(P),P=se-P,ji(E,0,P<0?0:P)):[]}function fv(E,P){return E&&E.length?Fc(E,Gt(P,3),!0,!0):[]}function fa(E,P){return E&&E.length?Fc(E,Gt(P,3),!0):[]}function Dx(E,P,H,se){var fe=E==null?0:E.length;return fe?(H&&typeof H!="number"&&il(E,P,H)&&(H=0,se=fe),Mc(E,P,H,se)):[]}function dm(E,P,H){var se=E==null?0:E.length;if(!se)return-1;var fe=H==null?0:Nr(H);return fe<0&&(fe=io(se+fe,0)),bf(E,Gt(P,3),fe)}function Ox(E,P,H){var se=E==null?0:E.length;if(!se)return-1;var fe=se-1;return H!==n&&(fe=Nr(H),fe=H<0?io(se+fe,0):Na(fe,se-1)),bf(E,Gt(P,3),fe,!0)}function E2(E){var P=E==null?0:E.length;return P?Es(E,1):[]}function Mx(E){var P=E==null?0:E.length;return P?Es(E,ee):[]}function Vl(E,P){var H=E==null?0:E.length;return H?(P=P===n?1:Nr(P),Es(E,P)):[]}function IC(E){for(var P=-1,H=E==null?0:E.length,se={};++P<H;){var fe=E[P];se[fe[0]]=fe[1]}return se}function ly(E){return E&&E.length?E[0]:n}function Yp(E,P,H){var se=E==null?0:E.length;if(!se)return-1;var fe=H==null?0:Nr(H);return fe<0&&(fe=io(se+fe,0)),xd(E,P,fe)}function S2(E){var P=E==null?0:E.length;return P?ji(E,0,-1):[]}var PC=dr(function(E){var P=vi(E,Cd);return P.length&&P[0]===E[0]?Lp(P):[]}),hm=dr(function(E){var P=sl(E),H=vi(E,Cd);return P===sl(H)?P=n:H.pop(),H.length&&H[0]===E[0]?Lp(H,Gt(P,2)):[]}),T2=dr(function(E){var P=sl(E),H=vi(E,Cd);return P=typeof P=="function"?P:n,P&&H.pop(),H.length&&H[0]===E[0]?Lp(H,n,P):[]});function pm(E,P){return E==null?"":K1.call(E,P)}function sl(E){var P=E==null?0:E.length;return P?E[P-1]:n}function Lx(E,P,H){var se=E==null?0:E.length;if(!se)return-1;var fe=se;return H!==n&&(fe=Nr(H),fe=fe<0?io(se+fe,0):Na(fe,se-1)),P===P?Fl(E,P,fe):bf(E,F,fe,!0)}function NC(E,P){return E&&E.length?ca(E,Nr(P)):n}var C2=dr(Fx);function Fx(E,P){return E&&E.length&&P&&P.length?ds(E,P):E}function ol(E,P,H){return E&&E.length&&P&&P.length?ds(E,P,Gt(H,2)):E}function mm(E,P,H){return E&&E.length&&P&&P.length?ds(E,P,n,H):E}var Dd=Fo(function(E,P){var H=E==null?0:E.length,se=ev(E,P);return Hs(E,vi(P,function(fe){return Os(fe,H)?+fe:fe}).sort(kx)),se});function Hl(E,P){var H=[];if(!(E&&E.length))return H;var se=-1,fe=[],_e=E.length;for(P=Gt(P,3);++se<_e;){var Re=E[se];P(Re,se,E)&&(H.push(Re),fe.push(se))}return Hs(E,fe),H}function A2(E){return E==null?E:Cp.call(E)}function DC(E,P,H){var se=E==null?0:E.length;return se?(H&&typeof H!="number"&&il(E,P,H)?(P=0,H=se):(P=P==null?0:Nr(P),H=H===n?se:Nr(H)),ji(E,P,H)):[]}function OC(E,P){return Up(E,P)}function k7(E,P,H){return um(E,P,Gt(H,2))}function gm(E,P){var H=E==null?0:E.length;if(H){var se=Up(E,P);if(se<H&&Kp(E[se],P))return se}return-1}function HI(E,P){return Up(E,P,!0)}function MC(E,P,H){return um(E,P,Gt(H,2),!0)}function cy(E,P){var H=E==null?0:E.length;if(H){var se=Up(E,P,!0)-1;if(Kp(E[se],P))return se}return-1}function LC(E){return E&&E.length?ny(E):[]}function fy(E,P){return E&&E.length?ny(E,Gt(P,2)):[]}function qI(E){var P=E==null?0:E.length;return P?ji(E,1,P):[]}function WI(E,P,H){return E&&E.length?(P=H||P===n?1:Nr(P),ji(E,0,P<0?0:P)):[]}function FC(E,P,H){var se=E==null?0:E.length;return se?(P=H||P===n?1:Nr(P),P=se-P,ji(E,P<0?0:P,se)):[]}function k2(E,P){return E&&E.length?Fc(E,Gt(P,3),!1,!0):[]}function R7(E,P){return E&&E.length?Fc(E,Gt(P,3)):[]}var I7=dr(function(E){return If(Es(E,1,ha,!0))}),GI=dr(function(E){var P=sl(E);return ha(P)&&(P=n),If(Es(E,1,ha,!0),Gt(P,2))}),YI=dr(function(E){var P=sl(E);return P=typeof P=="function"?P:n,If(Es(E,1,ha,!0),n,P)});function dy(E){return E&&E.length?If(E):[]}function P7(E,P){return E&&E.length?If(E,Gt(P,2)):[]}function dv(E,P){return P=typeof P=="function"?P:n,E&&E.length?If(E,n,P):[]}function R2(E){if(!(E&&E.length))return[];var P=0;return E=Ra(E,function(H){if(ha(H))return P=io(H.length,P),!0}),Lr(P,function(H){return vi(E,le(H))})}function Ws(E,P){if(!(E&&E.length))return[];var H=R2(E);return P==null?H:vi(H,function(se){return ro(P,n,se)})}var N7=dr(function(E,P){return ha(E)?Oc(E,P):[]}),KI=dr(function(E){return sy(Ra(E,ha))}),D7=dr(function(E){var P=sl(E);return ha(P)&&(P=n),sy(Ra(E,ha),Gt(P,2))}),O7=dr(function(E){var P=sl(E);return P=typeof P=="function"?P:n,sy(Ra(E,ha),n,P)}),XI=dr(R2);function QI(E,P){return Vp(E||[],P||[],Is)}function M7(E,P){return Vp(E||[],P||[],Rf)}var Of=dr(function(E){var P=E.length,H=P>1?E[P-1]:n;return H=typeof H=="function"?(E.pop(),H):n,Ws(E,H)});function I2(E){var P=ye(E);return P.__chain__=!0,P}function L7(E,P){return P(E),E}function Od(E,P){return P(E)}var P2=Fo(function(E){var P=E.length,H=P?E[0]:0,se=this.__wrapped__,fe=function(_e){return ev(_e,E)};return P>1||this.__actions__.length||!(se instanceof Mn)||!Os(H)?this.thru(fe):(se=se.slice(H,+H+(P?1:0)),se.__actions__.push({func:Od,args:[fe],thisArg:n}),new Da(se,this.__chain__).thru(function(_e){return P&&!_e.length&&_e.push(n),_e}))});function hy(){return I2(this)}function N2(){return new Da(this.value(),this.__chain__)}function $C(){this.__values__===n&&(this.__values__=ute(this.value()));var E=this.__index__>=this.__values__.length,P=E?n:this.__values__[this.__index__++];return{done:E,value:P}}function BC(){return this}function F7(E){for(var P,H=this;H instanceof Nc;){var se=VI(H);se.__index__=0,se.__values__=n,P?fe.__wrapped__=se:P=se;var fe=se;H=H.__wrapped__}return fe.__wrapped__=E,P}function jC(){var E=this.__wrapped__;if(E instanceof Mn){var P=E;return this.__actions__.length&&(P=new Mn(this)),P=P.reverse(),P.__actions__.push({func:Od,args:[A2],thisArg:n}),new Da(P,this.__chain__)}return this.thru(A2)}function $7(){return zp(this.__wrapped__,this.__actions__)}var JI=Bc(function(E,P,H){mr.call(E,H)?++E[H]:Dc(E,H,1)});function ZI(E,P,H){var se=Sr(E)?yi:zs;return H&&il(E,P,H)&&(P=n),se(E,Gt(P,3))}function D2(E,P){var H=Sr(E)?Ra:Qg;return H(E,Gt(P,3))}var O2=$h(dm),e6=$h(Ox);function UC(E,P){return Es($2(E,P),1)}function t6(E,P){return Es($2(E,P),ee)}function zC(E,P,H){return H=H===n?1:Nr(H),Es($2(E,P),H)}function $x(E,P){var H=Sr(E)?oi:zl;return H(E,Gt(P,3))}function M2(E,P){var H=Sr(E)?Ro:rv;return H(E,Gt(P,3))}var L2=Bc(function(E,P,H){mr.call(E,H)?E[H].push(P):Dc(E,H,[P])});function n6(E,P,H,se){E=Mf(E)?E:U2(E),H=H&&!se?Nr(H):0;var fe=E.length;return H<0&&(H=io(fe+H,0)),i6(E)?H<=fe&&E.indexOf(P,H)>-1:!!fe&&xd(E,P,H)>-1}var B7=dr(function(E,P,H){var se=-1,fe=typeof P=="function",_e=Mf(E)?et(E.length):[];return zl(E,function(Re){_e[++se]=fe?ro(P,Re,H):Tu(Re,P,H)}),_e}),F2=Bc(function(E,P,H){Dc(E,H,P)});function $2(E,P){var H=Sr(E)?vi:Fp;return H(E,Gt(P,3))}function Bx(E,P,H,se){return E==null?[]:(Sr(P)||(P=P==null?[]:[P]),H=se?n:H,Sr(H)||(H=H==null?[]:[H]),Bp(E,P,H))}var j7=Bc(function(E,P,H){E[H?0:1].push(P)},function(){return[[],[]]});function B2(E,P,H){var se=Sr(E)?Xu:Xe,fe=arguments.length<3;return se(E,Gt(P,4),H,fe,zl)}function v(E,P,H){var se=Sr(E)?Bg:Xe,fe=arguments.length<3;return se(E,Gt(P,4),H,fe,rv)}function _(E,P){var H=Sr(E)?Ra:Qg;return H(E,Cn(Gt(P,3)))}function N(E){var P=Sr(E)?es:so;return P(E)}function U(E,P,H){(H?il(E,P,H):P===n)?P=1:P=Nr(P);var se=Sr(E)?Op:ty;return se(E,P)}function Q(E){var P=Sr(E)?p2:bo;return P(E)}function ie(E){if(E==null)return 0;if(Mf(E))return i6(E)?Pc(E):E.length;var P=au(E);return P==Me||P==It?E.size:Vs(E).length}function he(E,P,H){var se=Sr(E)?bd:Ba;return H&&il(E,P,H)&&(P=n),se(E,Gt(P,3))}var ke=dr(function(E,P){if(E==null)return[];var H=P.length;return H>1&&il(E,P[0],P[1])?P=[]:H>2&&il(P[0],P[1],P[2])&&(P=[P[0]]),Bp(E,Es(P,1),[])}),Le=Wi||function(){return dn.Date.now()};function st(E,P){if(typeof P!="function")throw new Pa(o);return E=Nr(E),function(){if(--E<1)return P.apply(this,arguments)}}function Ot(E,P,H){return P=H?n:P,P=E&&P==null?E.length:P,Ft(E,R,n,n,n,n,P)}function Ut(E,P){var H;if(typeof P!="function")throw new Pa(o);return E=Nr(E),function(){return--E>0&&(H=P.apply(this,arguments)),E<=1&&(P=n),H}}var Dt=dr(function(E,P,H){var se=g;if(H.length){var fe=Ju(H,kn(Dt));se|=S}return Ft(E,se,P,H,fe)}),pn=dr(function(E,P,H){var se=g|b;if(H.length){var fe=Ju(H,kn(pn));se|=S}return Ft(P,se,E,H,fe)});function En(E,P,H){P=H?n:P;var se=Ft(E,x,n,n,n,n,n,P);return se.placeholder=En.placeholder,se}function Tn(E,P,H){P=H?n:P;var se=Ft(E,w,n,n,n,n,n,P);return se.placeholder=Tn.placeholder,se}function oo(E,P,H){var se,fe,_e,Re,$e,Ge,St=0,Ct=!1,Mt=!1,fn=!0;if(typeof E!="function")throw new Pa(o);P=jh(P)||0,xo(H)&&(Ct=!!H.leading,Mt="maxWait"in H,_e=Mt?io(jh(H.maxWait)||0,P):_e,fn="trailing"in H?!!H.trailing:fn);function Nn(pa){var Xp=se,gy=fe;return se=fe=n,St=pa,Re=E.apply(gy,Xp),Re}function Qn(pa){return St=pa,$e=cv(Qr,P),Ct?Nn(pa):Re}function $r(pa){var Xp=pa-Ge,gy=pa-St,_te=P-Xp;return Mt?Na(_te,_e-gy):_te}function Jn(pa){var Xp=pa-Ge,gy=pa-St;return Ge===n||Xp>=P||Xp<0||Mt&&gy>=_e}function Qr(){var pa=Le();if(Jn(pa))return li(pa);$e=cv(Qr,$r(pa))}function li(pa){return $e=n,fn&&se?Nn(pa):(se=fe=n,Re)}function Ld(){$e!==n&&Ad($e),St=0,se=Ge=fe=$e=n}function zc(){return $e===n?Re:li(Le())}function Fd(){var pa=Le(),Xp=Jn(pa);if(se=arguments,fe=this,Ge=pa,Xp){if($e===n)return Qn(Ge);if(Mt)return Ad($e),$e=cv(Qr,P),Nn(Ge)}return $e===n&&($e=cv(Qr,P)),Re}return Fd.cancel=Ld,Fd.flush=zc,Fd}var Je=dr(function(E,P){return nv(E,1,P)}),Ue=dr(function(E,P,H){return nv(E,jh(P)||0,H)});function tt(E){return Ft(E,O)}function Yt(E,P){if(typeof E!="function"||P!=null&&typeof P!="function")throw new Pa(o);var H=function(){var se=arguments,fe=P?P.apply(this,se):se[0],_e=H.cache;if(_e.has(fe))return _e.get(fe);var Re=E.apply(this,se);return H.cache=_e.set(fe,Re)||_e,Re};return H.cache=new(Yt.Cache||Za),H}Yt.Cache=Za;function Cn(E){if(typeof E!="function")throw new Pa(o);return function(){var P=arguments;switch(P.length){case 0:return!E.call(this);case 1:return!E.call(this,P[0]);case 2:return!E.call(this,P[0],P[1]);case 3:return!E.call(this,P[0],P[1],P[2])}return!E.apply(this,P)}}function jn(E){return Ut(2,E)}var Un=Sx(function(E,P){P=P.length==1&&Sr(P[0])?vi(P[0],ai(Gt())):vi(Es(P,1),ai(Gt()));var H=P.length;return dr(function(se){for(var fe=-1,_e=Na(se.length,H);++fe<_e;)se[fe]=P[fe].call(this,se[fe]);return ro(E,this,se)})}),Xn=dr(function(E,P){var H=Ju(P,kn(Xn));return Ft(E,S,n,P,H)}),da=dr(function(E,P){var H=Ju(P,kn(da));return Ft(E,C,n,P,H)}),xi=Fo(function(E,P){return Ft(E,I,n,n,n,P)});function ym(E,P){if(typeof E!="function")throw new Pa(o);return P=P===n?P:Nr(P),dr(E,P)}function U7(E,P){if(typeof E!="function")throw new Pa(o);return P=P==null?0:io(Nr(P),0),dr(function(H){var se=H[P],fe=Nf(H,0,P);return se&&Ku(fe,se),ro(E,this,fe)})}function nPe(E,P,H){var se=!0,fe=!0;if(typeof E!="function")throw new Pa(o);return xo(H)&&(se="leading"in H?!!H.leading:se,fe="trailing"in H?!!H.trailing:fe),oo(E,P,{leading:se,maxWait:P,trailing:fe})}function rPe(E){return Ot(E,1)}function iPe(E,P){return Xn(ov(P),E)}function sPe(){if(!arguments.length)return[];var E=arguments[0];return Sr(E)?E:[E]}function oPe(E){return ua(E,h)}function aPe(E,P){return P=typeof P=="function"?P:n,ua(E,h,P)}function uPe(E){return ua(E,f|h)}function lPe(E,P){return P=typeof P=="function"?P:n,ua(E,f|h,P)}function cPe(E,P){return P==null||im(E,P,ku(P))}function Kp(E,P){return E===P||E!==E&&P!==P}var fPe=Z(Lc),dPe=Z(function(E,P){return E>=P}),jx=am(function(){return arguments}())?am:function(E){return jo(E)&&mr.call(E,"callee")&&!Sh.call(E,"callee")},Sr=et.isArray,hPe=js?ai(js):iv;function Mf(E){return E!=null&&r6(E.length)&&!py(E)}function ha(E){return jo(E)&&Mf(E)}function pPe(E){return E===!0||E===!1||jo(E)&&Mo(E)==pe}var hv=Y1||J7,mPe=Li?ai(Li):Af;function gPe(E){return jo(E)&&E.nodeType===1&&!VC(E)}function yPe(E){if(E==null)return!0;if(Mf(E)&&(Sr(E)||typeof E=="string"||typeof E.splice=="function"||hv(E)||j2(E)||jx(E)))return!E.length;var P=au(E);if(P==Me||P==It)return!E.size;if(Gp(E))return!Vs(E).length;for(var H in E)if(mr.call(E,H))return!1;return!0}function vPe(E,P){return Cu(E,P)}function bPe(E,P,H){H=typeof H=="function"?H:n;var se=H?H(E,P):n;return se===n?Cu(E,P,n,H):!!se}function z7(E){if(!jo(E))return!1;var P=Mo(E);return P==ge||P==Ae||typeof E.message=="string"&&typeof E.name=="string"&&!VC(E)}function xPe(E){return typeof E=="number"&&Sp(E)}function py(E){if(!xo(E))return!1;var P=Mo(E);return P==me||P==Oe||P==ce||P==yt}function ite(E){return typeof E=="number"&&E==Nr(E)}function r6(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=ne}function xo(E){var P=typeof E;return E!=null&&(P=="object"||P=="function")}function jo(E){return E!=null&&typeof E=="object"}var ste=no?ai(no):Zg;function _Pe(E,P){return E===P||Mh(E,P,Fr(P))}function wPe(E,P,H){return H=typeof H=="function"?H:n,Mh(E,P,Fr(P),H)}function EPe(E){return ote(E)&&E!=+E}function SPe(E){if(A7(E))throw new Bn(s);return Ss(E)}function TPe(E){return E===null}function CPe(E){return E==null}function ote(E){return typeof E=="number"||jo(E)&&Mo(E)==Ye}function VC(E){if(!jo(E)||Mo(E)!=We)return!1;var P=Bl(E);if(P===null)return!0;var H=mr.call(P,"constructor")&&P.constructor;return typeof H=="function"&&H instanceof H&&_p.call(H)==J0}var V7=Qa?ai(Qa):fr;function APe(E){return ite(E)&&E>=-9007199254740991&&E<=ne}var ate=ra?ai(ra):$i;function i6(E){return typeof E=="string"||!Sr(E)&&jo(E)&&Mo(E)==Et}function Md(E){return typeof E=="symbol"||jo(E)&&Mo(E)==Ke}var j2=$g?ai($g):fs;function kPe(E){return E===n}function RPe(E){return jo(E)&&au(E)==sn}function IPe(E){return jo(E)&&Mo(E)==Fe}var PPe=Z(Yi),NPe=Z(function(E,P){return E<=P});function ute(E){if(!E)return[];if(Mf(E))return i6(E)?Po(E):su(E);if(jl&&E[jl])return _d(E[jl]());var P=au(E),H=P==Me?Rc:P==It?Ic:U2;return H(E)}function my(E){if(!E)return E===0?E:0;if(E=jh(E),E===ee||E===-1/0){var P=E<0?-1:1;return P*ue}return E===E?E:0}function Nr(E){var P=my(E),H=P%1;return P===P?H?P-H:P:0}function lte(E){return E?tl(Nr(E),0,W):0}function jh(E){if(typeof E=="number")return E;if(Md(E))return X;if(xo(E)){var P=typeof E.valueOf=="function"?E.valueOf():E;E=xo(P)?P+"":P}if(typeof E!="string")return E===0?E:+E;E=Pr(E);var H=yh.test(E);return H||mf.test(E)?ir(E.slice(2),H?2:8):Zo.test(E)?X:+E}function cte(E){return Ds(E,Lf(E))}function DPe(E){return E?tl(Nr(E),-9007199254740991,ne):E===0?E:0}function Ki(E){return E==null?"":qs(E)}var OPe=kd(function(E,P){if(Gp(P)||Mf(P)){Ds(P,ku(P),E);return}for(var H in P)mr.call(P,H)&&Is(E,H,P[H])}),fte=kd(function(E,P){Ds(P,Lf(P),E)}),s6=kd(function(E,P,H,se){Ds(P,Lf(P),E,se)}),MPe=kd(function(E,P,H,se){Ds(P,ku(P),E,se)}),LPe=Fo(ev);function FPe(E,P){var H=Pp(E);return P==null?H:bi(H,P)}var $Pe=dr(function(E,P){E=er(E);var H=-1,se=P.length,fe=se>2?P[2]:n;for(fe&&il(P[0],P[1],fe)&&(se=1);++H<se;)for(var _e=P[H],Re=Lf(_e),$e=-1,Ge=Re.length;++$e<Ge;){var St=Re[$e],Ct=E[St];(Ct===n||Kp(Ct,$l[St])&&!mr.call(E,St))&&(E[St]=_e[St])}return E}),BPe=dr(function(E){return E.push(n,tr),ro(dte,n,E)});function jPe(E,P){return Ia(E,Gt(P,3),Ps)}function UPe(E,P){return Ia(E,Gt(P,3),Oh)}function zPe(E,P){return E==null?E:Su(E,Gt(P,3),Lf)}function VPe(E,P){return E==null?E:sm(E,Gt(P,3),Lf)}function HPe(E,P){return E&&Ps(E,Gt(P,3))}function qPe(E,P){return E&&Oh(E,Gt(P,3))}function WPe(E){return E==null?[]:Mp(E,ku(E))}function GPe(E){return E==null?[]:Mp(E,Lf(E))}function H7(E,P,H){var se=E==null?n:Tf(E,P);return se===n?H:se}function YPe(E,P){return E!=null&&SC(E,P,iu)}function q7(E,P){return E!=null&&SC(E,P,Cf)}var KPe=g2(function(E,P,H){P!=null&&typeof P.toString!="function"&&(P=wp.call(P)),E[P]=H},G7(Ff)),XPe=g2(function(E,P,H){P!=null&&typeof P.toString!="function"&&(P=wp.call(P)),mr.call(E,P)?E[P].push(H):E[P]=[H]},Gt),QPe=dr(Tu);function ku(E){return Mf(E)?Eu(E):Vs(E)}function Lf(E){return Mf(E)?Eu(E,!0):Lh(E)}function JPe(E,P){var H={};return P=Gt(P,3),Ps(E,function(se,fe,_e){Dc(H,P(se,fe,_e),se)}),H}function ZPe(E,P){var H={};return P=Gt(P,3),Ps(E,function(se,fe,_e){Dc(H,fe,P(se,fe,_e))}),H}var eNe=kd(function(E,P,H){Td(E,P,H)}),dte=kd(function(E,P,H,se){Td(E,P,H,se)}),tNe=Fo(function(E,P){var H={};if(E==null)return H;var se=!1;P=vi(P,function(_e){return _e=Pf(_e,E),se||(se=_e.length>1),_e}),Ds(E,qe(E),H),se&&(H=ua(H,f|d|h,an));for(var fe=P.length;fe--;)ry(H,P[fe]);return H});function nNe(E,P){return hte(E,Cn(Gt(P)))}var rNe=Fo(function(E,P){return E==null?{}:ey(E,P)});function hte(E,P){if(E==null)return{};var H=vi(qe(E),function(se){return[se]});return P=Gt(P),$a(E,H,function(se,fe){return P(se,fe[0])})}function iNe(E,P,H){P=Pf(P,E);var se=-1,fe=P.length;for(fe||(fe=1,E=n);++se<fe;){var _e=E==null?n:E[Nd(P[se])];_e===n&&(se=fe,_e=H),E=py(_e)?_e.call(E):_e}return E}function sNe(E,P,H){return E==null?E:Rf(E,P,H)}function oNe(E,P,H,se){return se=typeof se=="function"?se:n,E==null?E:Rf(E,P,H,se)}var pte=at(ku),mte=at(Lf);function aNe(E,P,H){var se=Sr(E),fe=se||hv(E)||j2(E);if(P=Gt(P,4),H==null){var _e=E&&E.constructor;fe?H=se?new _e:[]:xo(E)?H=py(_e)?Pp(Bl(E)):{}:H={}}return(fe?oi:Ps)(E,function(Re,$e,Ge){return P(H,Re,$e,Ge)}),H}function uNe(E,P){return E==null?!0:ry(E,P)}function lNe(E,P,H){return E==null?E:iy(E,P,ov(H))}function cNe(E,P,H,se){return se=typeof se=="function"?se:n,E==null?E:iy(E,P,ov(H),se)}function U2(E){return E==null?[]:cs(E,ku(E))}function fNe(E){return E==null?[]:cs(E,Lf(E))}function dNe(E,P,H){return H===n&&(H=P,P=n),H!==n&&(H=jh(H),H=H===H?H:0),P!==n&&(P=jh(P),P=P===P?P:0),tl(jh(E),P,H)}function hNe(E,P,H){return P=my(P),H===n?(H=P,P=0):H=my(H),E=jh(E),om(E,P,H)}function pNe(E,P,H){if(H&&typeof H!="boolean"&&il(E,P,H)&&(P=H=n),H===n&&(typeof P=="boolean"?(H=P,P=n):typeof E=="boolean"&&(H=E,E=n)),E===n&&P===n?(E=0,P=1):(E=my(E),P===n?(P=E,E=0):P=my(P)),E>P){var se=E;E=P,P=se}if(H||E%1||P%1){var fe=tm();return Na(E+fe*(P-E+hn("1e-"+((fe+"").length-1))),P)}return rl(E,P)}var mNe=qp(function(E,P,H){return P=P.toLowerCase(),E+(H?gte(P):P)});function gte(E){return W7(Ki(E).toLowerCase())}function yte(E){return E=Ki(E),E&&E.replace(xc,H1).replace(Ol,"")}function gNe(E,P,H){E=Ki(E),P=qs(P);var se=E.length;H=H===n?se:tl(Nr(H),0,se);var fe=H;return H-=P.length,H>=0&&E.slice(H,fe)==P}function yNe(E){return E=Ki(E),E&&mo.test(E)?E.replace(Zi,mx):E}function vNe(E){return E=Ki(E),E&&Xr.test(E)?E.replace(Zs,"\\$&"):E}var bNe=qp(function(E,P,H){return E+(H?"-":"")+P.toLowerCase()}),xNe=qp(function(E,P,H){return E+(H?" ":"")+P.toLowerCase()}),_Ne=oy("toLowerCase");function wNe(E,P,H){E=Ki(E),P=Nr(P);var se=P?Pc(E):0;if(!P||se>=P)return E;var fe=(P-se)/2;return k(_f(fe),H)+E+k(Ch(fe),H)}function ENe(E,P,H){E=Ki(E),P=Nr(P);var se=P?Pc(E):0;return P&&se<P?E+k(P-se,H):E}function SNe(E,P,H){E=Ki(E),P=Nr(P);var se=P?Pc(E):0;return P&&se<P?k(P-se,H)+E:E}function TNe(E,P,H){return H||P==null?P=0:P&&(P=+P),_x(Ki(E).replace(Hi,""),P||0)}function CNe(E,P,H){return(H?il(E,P,H):P===n)?P=1:P=Nr(P),Au(Ki(E),P)}function ANe(){var E=arguments,P=Ki(E[0]);return E.length<3?P:P.replace(E[1],E[2])}var kNe=qp(function(E,P,H){return E+(H?"_":"")+P.toLowerCase()});function RNe(E,P,H){return H&&typeof H!="number"&&il(E,P,H)&&(P=H=n),H=H===n?W:H>>>0,H?(E=Ki(E),E&&(typeof P=="string"||P!=null&&!V7(P))&&(P=qs(P),!P&&bh(E))?Nf(Po(E),0,H):E.split(P,H)):[]}var INe=qp(function(E,P,H){return E+(H?" ":"")+W7(P)});function PNe(E,P,H){return E=Ki(E),H=H==null?0:tl(Nr(H),0,E.length),P=qs(P),E.slice(H,H+P.length)==P}function NNe(E,P,H){var se=ye.templateSettings;H&&il(E,P,H)&&(P=n),E=Ki(E),P=s6({},P,se,yn);var fe=s6({},P.imports,se.imports,yn),_e=ku(fe),Re=cs(fe,_e),$e,Ge,St=0,Ct=P.interpolate||_c,Mt="__p += '",fn=_h((P.escape||_c).source+"|"+Ct.source+"|"+(Ct===Ta?bs:_c).source+"|"+(P.evaluate||_c).source+"|$","g"),Nn="//# sourceURL="+(mr.call(P,"sourceURL")?(P.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++X0+"]")+`
`;E.replace(fn,function(Jn,Qr,li,Ld,zc,Fd){return li||(li=Ld),Mt+=E.slice(St,Fd).replace(wc,kc),Qr&&($e=!0,Mt+=`' +
__e(`+Qr+`) +
'`),zc&&(Ge=!0,Mt+=`';
`+zc+`;
__p += '`),li&&(Mt+=`' +
((__t = (`+li+`)) == null ? '' : __t) +
'`),St=Fd+Jn.length,Jn}),Mt+=`';
`;var Qn=mr.call(P,"variable")&&P.variable;if(!Qn)Mt=`with (obj) {
`+Mt+`
}
`;else if(Hr.test(Qn))throw new Bn(a);Mt=(Ge?Mt.replace(Dr,""):Mt).replace(Co,"$1").replace(Ji,"$1;"),Mt="function("+(Qn||"obj")+`) {
`+(Qn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($e?", __e = _.escape":"")+(Ge?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Mt+`return __p
}`;var $r=bte(function(){return On(_e,Nn+"return "+Mt).apply(n,Re)});if($r.source=Mt,z7($r))throw $r;return $r}function DNe(E){return Ki(E).toLowerCase()}function ONe(E){return Ki(E).toUpperCase()}function MNe(E,P,H){if(E=Ki(E),E&&(H||P===n))return Pr(E);if(!E||!(P=qs(P)))return E;var se=Po(E),fe=Po(P),_e=yo(se,fe),Re=vo(se,fe)+1;return Nf(se,_e,Re).join("")}function LNe(E,P,H){if(E=Ki(E),E&&(H||P===n))return E.slice(0,Zu(E)+1);if(!E||!(P=qs(P)))return E;var se=Po(E),fe=vo(se,Po(P))+1;return Nf(se,0,fe).join("")}function FNe(E,P,H){if(E=Ki(E),E&&(H||P===n))return E.replace(Hi,"");if(!E||!(P=qs(P)))return E;var se=Po(E),fe=yo(se,Po(P));return Nf(se,fe).join("")}function $Ne(E,P){var H=M,se=L;if(xo(P)){var fe="separator"in P?P.separator:fe;H="length"in P?Nr(P.length):H,se="omission"in P?qs(P.omission):se}E=Ki(E);var _e=E.length;if(bh(E)){var Re=Po(E);_e=Re.length}if(H>=_e)return E;var $e=H-Pc(se);if($e<1)return se;var Ge=Re?Nf(Re,0,$e).join(""):E.slice(0,$e);if(fe===n)return Ge+se;if(Re&&($e+=Ge.length-$e),V7(fe)){if(E.slice($e).search(fe)){var St,Ct=Ge;for(fe.global||(fe=_h(fe.source,Ki(Ka.exec(fe))+"g")),fe.lastIndex=0;St=fe.exec(Ct);)var Mt=St.index;Ge=Ge.slice(0,Mt===n?$e:Mt)}}else if(E.indexOf(qs(fe),$e)!=$e){var fn=Ge.lastIndexOf(fe);fn>-1&&(Ge=Ge.slice(0,fn))}return Ge+se}function BNe(E){return E=Ki(E),E&&ei.test(E)?E.replace(Di,q1):E}var jNe=qp(function(E,P,H){return E+(H?" ":"")+P.toUpperCase()}),W7=oy("toUpperCase");function vte(E,P,H){return E=Ki(E),P=H?n:P,P===n?c2(E)?yx(E):vh(E):E.match(P)||[]}var bte=dr(function(E,P){try{return ro(E,n,P)}catch(H){return z7(H)?H:new Bn(H)}}),UNe=Fo(function(E,P){return oi(P,function(H){H=Nd(H),Dc(E,H,Dt(E[H],E))}),E});function zNe(E){var P=E==null?0:E.length,H=Gt();return E=P?vi(E,function(se){if(typeof se[1]!="function")throw new Pa(o);return[H(se[0]),se[1]]}):[],dr(function(se){for(var fe=-1;++fe<P;){var _e=E[fe];if(ro(_e[0],this,se))return ro(_e[1],this,se)}})}function VNe(E){return tv(ua(E,f))}function G7(E){return function(){return E}}function HNe(E,P){return E==null||E!==E?P:E}var qNe=ay(),WNe=ay(!0);function Ff(E){return E}function Y7(E){return Ns(typeof E=="function"?E:ua(E,f))}function GNe(E){return kf(ua(E,f))}function YNe(E,P){return Bi(E,ua(P,f))}var KNe=dr(function(E,P){return function(H){return Tu(H,E,P)}}),XNe=dr(function(E,P){return function(H){return Tu(E,H,P)}});function K7(E,P,H){var se=ku(P),fe=Mp(P,se);H==null&&!(xo(P)&&(fe.length||!se.length))&&(H=P,P=E,E=this,fe=Mp(P,ku(P)));var _e=!(xo(H)&&"chain"in H)||!!H.chain,Re=py(E);return oi(fe,function($e){var Ge=P[$e];E[$e]=Ge,Re&&(E.prototype[$e]=function(){var St=this.__chain__;if(_e||St){var Ct=E(this.__wrapped__),Mt=Ct.__actions__=su(this.__actions__);return Mt.push({func:Ge,args:arguments,thisArg:E}),Ct.__chain__=St,Ct}return Ge.apply(E,Ku([this.value()],arguments))})}),E}function QNe(){return dn._===this&&(dn._=vx),this}function X7(){}function JNe(E){return E=Nr(E),dr(function(P){return ca(P,E)})}var ZNe=T(vi),e8e=T(yi),t8e=T(bd);function xte(E){return vn(E)?le(Nd(E)):Ti(E)}function n8e(E){return function(P){return E==null?n:Tf(E,P)}}var r8e=Y(),i8e=Y(!0);function Q7(){return[]}function J7(){return!1}function s8e(){return{}}function o8e(){return""}function a8e(){return!0}function u8e(E,P){if(E=Nr(E),E<1||E>ne)return[];var H=W,se=Na(E,W);P=Gt(P),E-=W;for(var fe=Lr(se,P);++H<E;)P(H);return fe}function l8e(E){return Sr(E)?vi(E,Nd):Md(E)?[E]:su(kC(Ki(E)))}function c8e(E){var P=++sa;return Ki(E)+P}var f8e=uy(function(E,P){return E+P},0),d8e=xe("ceil"),h8e=uy(function(E,P){return E/P},1),p8e=xe("floor");function m8e(E){return E&&E.length?la(E,Ff,Lc):n}function g8e(E,P){return E&&E.length?la(E,Gt(P,2),Lc):n}function y8e(E){return re(E,Ff)}function v8e(E,P){return re(E,Gt(P,2))}function b8e(E){return E&&E.length?la(E,Ff,Yi):n}function x8e(E,P){return E&&E.length?la(E,Gt(P,2),Yi):n}var _8e=uy(function(E,P){return E*P},1),w8e=xe("round"),E8e=uy(function(E,P){return E-P},0);function S8e(E){return E&&E.length?Xt(E,Ff):0}function T8e(E,P){return E&&E.length?Xt(E,Gt(P,2)):0}return ye.after=st,ye.ary=Ot,ye.assign=OPe,ye.assignIn=fte,ye.assignInWith=s6,ye.assignWith=MPe,ye.at=LPe,ye.before=Ut,ye.bind=Dt,ye.bindAll=UNe,ye.bindKey=pn,ye.castArray=sPe,ye.chain=I2,ye.chunk=w2,ye.compact=RC,ye.concat=Df,ye.cond=zNe,ye.conforms=VNe,ye.constant=G7,ye.countBy=JI,ye.create=FPe,ye.curry=En,ye.curryRight=Tn,ye.debounce=oo,ye.defaults=$Pe,ye.defaultsDeep=BPe,ye.defer=Je,ye.delay=Ue,ye.difference=ui,ye.differenceBy=Ua,ye.differenceWith=Bo,ye.drop=lu,ye.dropRight=Uc,ye.dropRightWhile=fv,ye.dropWhile=fa,ye.fill=Dx,ye.filter=D2,ye.flatMap=UC,ye.flatMapDeep=t6,ye.flatMapDepth=zC,ye.flatten=E2,ye.flattenDeep=Mx,ye.flattenDepth=Vl,ye.flip=tt,ye.flow=qNe,ye.flowRight=WNe,ye.fromPairs=IC,ye.functions=WPe,ye.functionsIn=GPe,ye.groupBy=L2,ye.initial=S2,ye.intersection=PC,ye.intersectionBy=hm,ye.intersectionWith=T2,ye.invert=KPe,ye.invertBy=XPe,ye.invokeMap=B7,ye.iteratee=Y7,ye.keyBy=F2,ye.keys=ku,ye.keysIn=Lf,ye.map=$2,ye.mapKeys=JPe,ye.mapValues=ZPe,ye.matches=GNe,ye.matchesProperty=YNe,ye.memoize=Yt,ye.merge=eNe,ye.mergeWith=dte,ye.method=KNe,ye.methodOf=XNe,ye.mixin=K7,ye.negate=Cn,ye.nthArg=JNe,ye.omit=tNe,ye.omitBy=nNe,ye.once=jn,ye.orderBy=Bx,ye.over=ZNe,ye.overArgs=Un,ye.overEvery=e8e,ye.overSome=t8e,ye.partial=Xn,ye.partialRight=da,ye.partition=j7,ye.pick=rNe,ye.pickBy=hte,ye.property=xte,ye.propertyOf=n8e,ye.pull=C2,ye.pullAll=Fx,ye.pullAllBy=ol,ye.pullAllWith=mm,ye.pullAt=Dd,ye.range=r8e,ye.rangeRight=i8e,ye.rearg=xi,ye.reject=_,ye.remove=Hl,ye.rest=ym,ye.reverse=A2,ye.sampleSize=U,ye.set=sNe,ye.setWith=oNe,ye.shuffle=Q,ye.slice=DC,ye.sortBy=ke,ye.sortedUniq=LC,ye.sortedUniqBy=fy,ye.split=RNe,ye.spread=U7,ye.tail=qI,ye.take=WI,ye.takeRight=FC,ye.takeRightWhile=k2,ye.takeWhile=R7,ye.tap=L7,ye.throttle=nPe,ye.thru=Od,ye.toArray=ute,ye.toPairs=pte,ye.toPairsIn=mte,ye.toPath=l8e,ye.toPlainObject=cte,ye.transform=aNe,ye.unary=rPe,ye.union=I7,ye.unionBy=GI,ye.unionWith=YI,ye.uniq=dy,ye.uniqBy=P7,ye.uniqWith=dv,ye.unset=uNe,ye.unzip=R2,ye.unzipWith=Ws,ye.update=lNe,ye.updateWith=cNe,ye.values=U2,ye.valuesIn=fNe,ye.without=N7,ye.words=vte,ye.wrap=iPe,ye.xor=KI,ye.xorBy=D7,ye.xorWith=O7,ye.zip=XI,ye.zipObject=QI,ye.zipObjectDeep=M7,ye.zipWith=Of,ye.entries=pte,ye.entriesIn=mte,ye.extend=fte,ye.extendWith=s6,K7(ye,ye),ye.add=f8e,ye.attempt=bte,ye.camelCase=mNe,ye.capitalize=gte,ye.ceil=d8e,ye.clamp=dNe,ye.clone=oPe,ye.cloneDeep=uPe,ye.cloneDeepWith=lPe,ye.cloneWith=aPe,ye.conformsTo=cPe,ye.deburr=yte,ye.defaultTo=HNe,ye.divide=h8e,ye.endsWith=gNe,ye.eq=Kp,ye.escape=yNe,ye.escapeRegExp=vNe,ye.every=ZI,ye.find=O2,ye.findIndex=dm,ye.findKey=jPe,ye.findLast=e6,ye.findLastIndex=Ox,ye.findLastKey=UPe,ye.floor=p8e,ye.forEach=$x,ye.forEachRight=M2,ye.forIn=zPe,ye.forInRight=VPe,ye.forOwn=HPe,ye.forOwnRight=qPe,ye.get=H7,ye.gt=fPe,ye.gte=dPe,ye.has=YPe,ye.hasIn=q7,ye.head=ly,ye.identity=Ff,ye.includes=n6,ye.indexOf=Yp,ye.inRange=hNe,ye.invoke=QPe,ye.isArguments=jx,ye.isArray=Sr,ye.isArrayBuffer=hPe,ye.isArrayLike=Mf,ye.isArrayLikeObject=ha,ye.isBoolean=pPe,ye.isBuffer=hv,ye.isDate=mPe,ye.isElement=gPe,ye.isEmpty=yPe,ye.isEqual=vPe,ye.isEqualWith=bPe,ye.isError=z7,ye.isFinite=xPe,ye.isFunction=py,ye.isInteger=ite,ye.isLength=r6,ye.isMap=ste,ye.isMatch=_Pe,ye.isMatchWith=wPe,ye.isNaN=EPe,ye.isNative=SPe,ye.isNil=CPe,ye.isNull=TPe,ye.isNumber=ote,ye.isObject=xo,ye.isObjectLike=jo,ye.isPlainObject=VC,ye.isRegExp=V7,ye.isSafeInteger=APe,ye.isSet=ate,ye.isString=i6,ye.isSymbol=Md,ye.isTypedArray=j2,ye.isUndefined=kPe,ye.isWeakMap=RPe,ye.isWeakSet=IPe,ye.join=pm,ye.kebabCase=bNe,ye.last=sl,ye.lastIndexOf=Lx,ye.lowerCase=xNe,ye.lowerFirst=_Ne,ye.lt=PPe,ye.lte=NPe,ye.max=m8e,ye.maxBy=g8e,ye.mean=y8e,ye.meanBy=v8e,ye.min=b8e,ye.minBy=x8e,ye.stubArray=Q7,ye.stubFalse=J7,ye.stubObject=s8e,ye.stubString=o8e,ye.stubTrue=a8e,ye.multiply=_8e,ye.nth=NC,ye.noConflict=QNe,ye.noop=X7,ye.now=Le,ye.pad=wNe,ye.padEnd=ENe,ye.padStart=SNe,ye.parseInt=TNe,ye.random=pNe,ye.reduce=B2,ye.reduceRight=v,ye.repeat=CNe,ye.replace=ANe,ye.result=iNe,ye.round=w8e,ye.runInContext=Ve,ye.sample=N,ye.size=ie,ye.snakeCase=kNe,ye.some=he,ye.sortedIndex=OC,ye.sortedIndexBy=k7,ye.sortedIndexOf=gm,ye.sortedLastIndex=HI,ye.sortedLastIndexBy=MC,ye.sortedLastIndexOf=cy,ye.startCase=INe,ye.startsWith=PNe,ye.subtract=E8e,ye.sum=S8e,ye.sumBy=T8e,ye.template=NNe,ye.times=u8e,ye.toFinite=my,ye.toInteger=Nr,ye.toLength=lte,ye.toLower=DNe,ye.toNumber=jh,ye.toSafeInteger=DPe,ye.toString=Ki,ye.toUpper=ONe,ye.trim=MNe,ye.trimEnd=LNe,ye.trimStart=FNe,ye.truncate=$Ne,ye.unescape=BNe,ye.uniqueId=c8e,ye.upperCase=jNe,ye.upperFirst=W7,ye.each=$x,ye.eachRight=M2,ye.first=ly,K7(ye,function(){var E={};return Ps(ye,function(P,H){mr.call(ye.prototype,H)||(E[H]=P)}),E}(),{chain:!1}),ye.VERSION=r,oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(E){ye[E].placeholder=ye}),oi(["drop","take"],function(E,P){Mn.prototype[E]=function(H){H=H===n?1:io(Nr(H),0);var se=this.__filtered__&&!P?new Mn(this):this.clone();return se.__filtered__?se.__takeCount__=Na(H,se.__takeCount__):se.__views__.push({size:Na(H,W),type:E+(se.__dir__<0?"Right":"")}),se},Mn.prototype[E+"Right"]=function(H){return this.reverse()[E](H).reverse()}}),oi(["filter","map","takeWhile"],function(E,P){var H=P+1,se=H==j||H==G;Mn.prototype[E]=function(fe){var _e=this.clone();return _e.__iteratees__.push({iteratee:Gt(fe,3),type:H}),_e.__filtered__=_e.__filtered__||se,_e}}),oi(["head","last"],function(E,P){var H="take"+(P?"Right":"");Mn.prototype[E]=function(){return this[H](1).value()[0]}}),oi(["initial","tail"],function(E,P){var H="drop"+(P?"":"Right");Mn.prototype[E]=function(){return this.__filtered__?new Mn(this):this[H](1)}}),Mn.prototype.compact=function(){return this.filter(Ff)},Mn.prototype.find=function(E){return this.filter(E).head()},Mn.prototype.findLast=function(E){return this.reverse().find(E)},Mn.prototype.invokeMap=dr(function(E,P){return typeof E=="function"?new Mn(this):this.map(function(H){return Tu(H,E,P)})}),Mn.prototype.reject=function(E){return this.filter(Cn(Gt(E)))},Mn.prototype.slice=function(E,P){E=Nr(E);var H=this;return H.__filtered__&&(E>0||P<0)?new Mn(H):(E<0?H=H.takeRight(-E):E&&(H=H.drop(E)),P!==n&&(P=Nr(P),H=P<0?H.dropRight(-P):H.take(P-E)),H)},Mn.prototype.takeRightWhile=function(E){return this.reverse().takeWhile(E).reverse()},Mn.prototype.toArray=function(){return this.take(W)},Ps(Mn.prototype,function(E,P){var H=/^(?:filter|find|map|reject)|While$/.test(P),se=/^(?:head|last)$/.test(P),fe=ye[se?"take"+(P=="last"?"Right":""):P],_e=se||/^find/.test(P);fe&&(ye.prototype[P]=function(){var Re=this.__wrapped__,$e=se?[1]:arguments,Ge=Re instanceof Mn,St=$e[0],Ct=Ge||Sr(Re),Mt=function(Qr){var li=fe.apply(ye,Ku([Qr],$e));return se&&fn?li[0]:li};Ct&&H&&typeof St=="function"&&St.length!=1&&(Ge=Ct=!1);var fn=this.__chain__,Nn=!!this.__actions__.length,Qn=_e&&!fn,$r=Ge&&!Nn;if(!_e&&Ct){Re=$r?Re:new Mn(this);var Jn=E.apply(Re,$e);return Jn.__actions__.push({func:Od,args:[Mt],thisArg:n}),new Da(Jn,fn)}return Qn&&$r?E.apply(this,$e):(Jn=this.thru(Mt),Qn?se?Jn.value()[0]:Jn.value():Jn)})}),oi(["pop","push","shift","sort","splice","unshift"],function(E){var P=Ed[E],H=/^(?:push|sort|unshift)$/.test(E)?"tap":"thru",se=/^(?:pop|shift)$/.test(E);ye.prototype[E]=function(){var fe=arguments;if(se&&!this.__chain__){var _e=this.value();return P.apply(Sr(_e)?_e:[],fe)}return this[H](function(Re){return P.apply(Sr(Re)?Re:[],fe)})}}),Ps(Mn.prototype,function(E,P){var H=ye[P];if(H){var se=H.name+"";mr.call(Rp,se)||(Rp[se]=[]),Rp[se].push({name:P,func:H})}}),Rp[Rd(n,b).name]=[{name:"wrapper",func:n}],Mn.prototype.clone=Oo,Mn.prototype.reverse=Q1,Mn.prototype.value=Np,ye.prototype.at=P2,ye.prototype.chain=hy,ye.prototype.commit=N2,ye.prototype.next=$C,ye.prototype.plant=F7,ye.prototype.reverse=jC,ye.prototype.toJSON=ye.prototype.valueOf=ye.prototype.value=$7,ye.prototype.first=ye.prototype.head,jl&&(ye.prototype[jl]=BC),ye},wd=ws();Ir?((Ir.exports=wd)._=wd,Tr._=wd):dn._=wd}).call(Yyt)}(H3,H3.exports)),H3.exports}var gSe=Kyt();const GR=gc(gSe);function Xyt({parameters:e,setAnswer:t}){const n=B.useRef(null),{image:r,question:i,tiles:s,example:o,ourDefinition:a}=e,[u,l]=B.useState({width:0,height:0}),[c,f]=B.useState(s.map(h=>({...h,clicked:!1,unClicked:!1}))),d=B.useRef(null);return B.useEffect(()=>{const h=new Image;h.src=r,h.onload=()=>{const p=d.current,m=window.innerHeight-p.getBoundingClientRect().top,g=window.innerWidth-p.getBoundingClientRect().left,b=h.width/h.height;let y,x;m*b<=g?(x=m,y=m*b):(y=g,x=g/b),l({width:y,height:x,multiplier:y/h.width})}},[r]),B.useEffect(()=>{const h=Wo(n.current),p=u.multiplier;h.select("g").selectAll("rect").data(c).join("rect").attr("x",m=>m.x*p).attr("y",m=>m.y*p).attr("width",m=>m.width*p).attr("height",m=>m.height*p).attr("stroke","black").attr("stroke-width",2).attr("cursor","pointer").attr("fill","#e6e6e6").attr("opacity",m=>m.clicked?0:.5).on("click",(m,g)=>{const b=GR.cloneDeep(c),y=b.findIndex(x=>x.x===g.x&&x.y===g.y);b[y].clicked&&(b[y].unClicked=!0),b[y].clicked=!b[y].clicked,f(b),t({status:!0,answers:{patches:JSON.stringify({patches:b.filter(x=>x.clicked||x.unClicked),multiplier:u.multiplier,question:i})}})}).on("mouseover",(m,g)=>{Wo(m.target).attr("stroke","blue").attr("stroke-width",2)}).on("mouseout",(m,g)=>{Wo(m.target).attr("stroke","gray").attr("stroke-width",.5)})},[c,t,u]),A.jsxs("div",{children:[o&&A.jsx("h1",{children:"Example Question"}),o?A.jsx("div",{children:A.jsx("h3",{children:i})}):A.jsxs("div",{children:[A.jsxs("h3",{children:["Please annotate ",A.jsx("u",{children:"minimum patches"})," that ",A.jsx("span",{style:{color:"red"},children:" must be revealed "})," for people to ",A.jsx("span",{style:{color:"red"},children:"confidently"})," answer the question below, assuming that people ",A.jsx("span",{style:{color:"red"},children:"cannot"})," see the blocked area.",A.jsx("br",{}),"Then provide your answer for the question."]}),A.jsxs("h3",{children:["Q: ",i]})]}),A.jsx(je,{ref:d,className:"ImageWrapper",style:{width:"100%",display:"block"},children:A.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[A.jsx("image",{href:r,width:u.width,height:u.height}),A.jsx("g",{id:"rectangles"})]})})]})}const Qyt=Object.freeze(Object.defineProperty({__proto__:null,default:Xyt},Symbol.toStringTag,{value:"Module"}));function Jyt({parameters:e,setAnswer:t}){const n=B.useRef(null),{image:r,question:i,radius_count:s,example:o}=e,[a,u]=B.useState([]),[l,c]=B.useState({width:0,height:0}),f=B.useRef(null),[d,h]=B.useState(0);B.useEffect(()=>{const m=new Image;m.src=r,m.onload=()=>{const g=f.current,b=window.innerHeight-g.getBoundingClientRect().top,y=window.innerWidth-g.getBoundingClientRect().left,x=m.width/m.height;let w,S;b*x<=y?(S=b,w=b*x):(w=y,S=y/x),c({width:w,height:S,multiplier:w/m.width}),h((w+S)/4/s)}},[r]);const p=B.useCallback(m=>{const g=Wo(n.current),b=Q_(m,g.node()),y={x:b[0],y:b[1]},x=[...a,y];u(x),t({status:!0,answers:{circles:JSON.stringify({circles:x.map(w=>({x:parseInt(w.x/l.multiplier),y:parseInt(w.y/l.multiplier)})),radius:d/l.multiplier,multiplier:l.multiplier,question:i})}})},[a,t,l]);return A.jsxs("div",{children:[o&&A.jsx("h1",{children:"Example Question"}),o?A.jsx("div",{children:A.jsx("h3",{children:i})}):A.jsxs("div",{children:[A.jsx("h3",{children:"Please click on regions that you wish to reveal. Then provide your answer for the question."}),A.jsxs("h3",{children:["Q: ",i]})]}),A.jsx(je,{ref:f,className:"ImageWrapper",style:{width:"100%",display:"block"},children:A.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:l.width,height:l.height,onClick:p,children:[A.jsxs("defs",{children:[A.jsxs("filter",{id:"imageBlurFilter",children:[A.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"11"}),A.jsx("feComponentTransfer",{children:A.jsx("feFuncA",{type:"table",tableValues:"1 1"})})]}),A.jsxs("mask",{id:"unblurMask",children:[A.jsx("rect",{width:"100%",height:"100%",fill:"white"}),a.length>0&&A.jsx("circle",{cx:a[a.length-1].x,cy:a[a.length-1].y,r:d,fill:"black"},0)]})]}),A.jsx("image",{href:r,width:l.width,height:l.height}),A.jsx("image",{href:r,width:l.width,height:l.height,filter:"url(#imageBlurFilter)",mask:"url(#unblurMask)"}),a.length>0&&A.jsx("circle",{cx:a[a.length-1].x,cy:a[a.length-1].y,r:d,fill:"transparent",stroke:"red"},0)]})})]})}const Zyt=Object.freeze(Object.defineProperty({__proto__:null,default:Jyt},Symbol.toStringTag,{value:"Module"}));function JE({value:e,setValue:t,leftLabel:n="",rightLabel:r="",min:i=-1,max:s=1,step:o=.01,tickInterval:a=.2,center:u=0}){const l=(e-i)/(s-i)*100,c=(u-i)/(s-i)*100,f=e>=u?`linear-gradient(
          to right,
          lightgray 0%,
          lightgray ${c}%,
          #228BE6 ${c}%,
          #228BE6 ${l}%,
          lightgray ${l}%,
          lightgray 100%
        )`:`linear-gradient(
          to right,
          lightgray 0%,
          lightgray ${l}%,
          #228BE6 ${l}%,
          #228BE6 ${c}%,
          lightgray ${c}%,
          lightgray 100%
        )`,d=[];for(let h=u;h<=s;h+=a)d.push(h);for(let h=u-a;h>=i;h-=a)d.push(h);return A.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"600px",margin:"50px auto"},children:[A.jsx("input",{type:"range",min:i,max:s,step:o,value:e,onChange:h=>t(parseFloat(h.target.value)),style:{width:"100%",appearance:"none",height:"8px",borderRadius:"4px",background:f,outline:"none",transition:"background 0.2s"}}),A.jsx("style",{children:`
          input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            background: white;
            border: 3px solid black;
            border-radius: 50%;
            cursor: pointer;
          }
          input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: white;
            border: 3px solid black;
            border-radius: 50%;
            cursor: pointer;
          }
        `}),A.jsx("div",{style:{position:"relative",display:"flex",justifyContent:"space-between",width:"100%",marginTop:"10px",fontSize:"14px",color:"gray"},children:d.map((h,p)=>A.jsxs("span",{style:{position:"absolute",left:`${(h-i)/(s-i)*100}%`,transform:"translateX(-50%)",top:"15px"},children:[" ",A.jsxs(A.Fragment,{children:[h.toFixed(1),A.jsx("br",{}),p===d.length-1&&n,p===3&&r]})]},h))})]})}const e1t=Object.freeze(Object.defineProperty({__proto__:null,default:JE},Symbol.toStringTag,{value:"Module"}));function c0(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Eb(e){return!!e&&!!e[lo]}function w1(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===l1t}(e)||Array.isArray(e)||!!e[Hue]||!!(!((t=e.constructor)===null||t===void 0)&&t[Hue])||jK(e)||UK(e))}function iw(e,t,n){n===void 0&&(n=!1),JT(e)===0?(n?Object.keys:eS)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function JT(e){var t=e[lo];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:jK(e)?2:UK(e)?3:0}function ZE(e,t){return JT(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function t1t(e,t){return JT(e)===2?e.get(t):e[t]}function ySe(e,t,n){var r=JT(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function vSe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function jK(e){return a1t&&e instanceof Map}function UK(e){return u1t&&e instanceof Set}function l_(e){return e.o||e.t}function zK(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=xSe(e);delete t[lo];for(var n=eS(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function VK(e,t){return t===void 0&&(t=!1),HK(e)||Eb(e)||!w1(e)||(JT(e)>1&&(e.set=e.add=e.clear=e.delete=n1t),Object.freeze(e),t&&iw(e,function(n,r){return VK(r,!0)},!0)),e}function n1t(){c0(2)}function HK(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Gm(e){var t=lV[e];return t||c0(18,e),t}function r1t(e,t){lV[e]||(lV[e]=t)}function oV(){return k4}function rB(e,t){t&&(Gm("Patches"),e.u=[],e.s=[],e.v=t)}function ID(e){aV(e),e.p.forEach(i1t),e.p=null}function aV(e){e===k4&&(k4=e.l)}function $ue(e){return k4={p:[],l:k4,h:e,m:!0,_:0}}function i1t(e){var t=e[lo];t.i===0||t.i===1?t.j():t.g=!0}function iB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Gm("ES5").S(t,e,r),r?(n[lo].P&&(ID(t),c0(4)),w1(e)&&(e=PD(t,e),t.l||ND(t,e)),t.u&&Gm("Patches").M(n[lo].t,e,t.u,t.s)):e=PD(t,n,[]),ID(t),t.u&&t.v(t.u,t.s),e!==bSe?e:void 0}function PD(e,t,n){if(HK(t))return t;var r=t[lo];if(!r)return iw(t,function(a,u){return Bue(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return ND(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=zK(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),iw(s,function(a,u){return Bue(e,r,i,a,u,n,o)}),ND(e,i,!1),n&&e.u&&Gm("Patches").N(r,n,e.u,e.s)}return r.o}function Bue(e,t,n,r,i,s,o){if(Eb(i)){var a=PD(e,i,s&&t&&t.i!==3&&!ZE(t.R,r)?s.concat(r):void 0);if(ySe(n,r,a),!Eb(a))return;e.m=!1}else o&&n.add(i);if(w1(i)&&!HK(i)){if(!e.h.D&&e._<1)return;PD(e,i),t&&t.A.l||ND(e,i)}}function ND(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&VK(t,n)}function sB(e,t){var n=e[lo];return(n?l_(n):e)[t]}function jue(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Fv(e){e.P||(e.P=!0,e.l&&Fv(e.l))}function oB(e){e.o||(e.o=zK(e.t))}function uV(e,t,n){var r=jK(t)?Gm("MapSet").F(t,n):UK(t)?Gm("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:oV(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=R4;o&&(u=[a],l=q3);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Gm("ES5").J(t,n);return(n?n.A:oV()).p.push(r),r}function s1t(e){return Eb(e)||c0(22,e),function t(n){if(!w1(n))return n;var r,i=n[lo],s=JT(n);if(i){if(!i.P&&(i.i<4||!Gm("ES5").K(i)))return i.t;i.I=!0,r=Uue(n,s),i.I=!1}else r=Uue(n,s);return iw(r,function(o,a){i&&t1t(i.t,o)===a||ySe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Uue(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return zK(e)}function o1t(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[lo];return R4.get(u,s)},set:function(u){var l=this[lo];R4.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][lo];if(!a.P)switch(a.i){case 5:r(a)&&Fv(a);break;case 4:n(a)&&Fv(a)}}}function n(s){for(var o=s.t,a=s.k,u=eS(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==lo){var f=o[c];if(f===void 0&&!ZE(o,c))return!0;var d=a[c],h=d&&d[lo];if(h?h.t!==f:!vSe(d,f))return!0}}var p=!!o[lo];return u.length!==eS(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};r1t("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=xSe(f);delete p[lo];for(var m=eS(p),g=0;g<m.length;g++){var b=m[g];p[b]=e(b,c||!!p[b].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:oV(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,lo,{value:l,writable:!0}),u},S:function(s,o,a){a?Eb(o)&&o[lo].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[lo];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)iw(d,function(x){x!==lo&&(f[x]!==void 0||ZE(f,x)?h[x]||u(d[x]):(h[x]=!0,Fv(c)))}),iw(f,function(x){d[x]!==void 0||ZE(d,x)||(h[x]=!1,Fv(c))});else if(p===5){if(r(c)&&(Fv(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var b=Math.min(d.length,f.length),y=0;y<b;y++)d.hasOwnProperty(y)||(h[y]=!0),h[y]===void 0&&u(d[y])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var zue,k4,qK=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",a1t=typeof Map<"u",u1t=typeof Set<"u",Vue=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",bSe=qK?Symbol.for("immer-nothing"):((zue={})["immer-nothing"]=!0,zue),Hue=qK?Symbol.for("immer-draftable"):"__$immer_draftable",lo=qK?Symbol.for("immer-state"):"__$immer_state",l1t=""+Object.prototype.constructor,eS=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,xSe=Object.getOwnPropertyDescriptors||function(e){var t={};return eS(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},lV={},R4={get:function(e,t){if(t===lo)return e;var n=l_(e);if(!ZE(n,t))return function(i,s,o){var a,u=jue(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!w1(r)?r:r===sB(e.t,t)?(oB(e),e.o[t]=uV(e.A.h,r,e)):r},has:function(e,t){return t in l_(e)},ownKeys:function(e){return Reflect.ownKeys(l_(e))},set:function(e,t,n){var r=jue(l_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=sB(l_(e),t),s=i==null?void 0:i[lo];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(vSe(n,i)&&(n!==void 0||ZE(e.t,t)))return!0;oB(e),Fv(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return sB(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,oB(e),Fv(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=l_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){c0(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){c0(12)}},q3={};iw(R4,function(e,t){q3[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),q3.deleteProperty=function(e,t){return q3.set.call(this,e,t,void 0)},q3.set=function(e,t,n){return R4.set.call(this,e[0],t,n,e[0])};var c1t=function(){function e(n){var r=this;this.O=Vue,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var b=arguments.length,y=Array(b>1?b-1:0),x=1;x<b;x++)y[x-1]=arguments[x];return u.produce(m,function(w){var S;return(S=s).call.apply(S,[g,w].concat(y))})}}var l;if(typeof s!="function"&&c0(6),o!==void 0&&typeof o!="function"&&c0(7),w1(i)){var c=$ue(r),f=uV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?ID(c):aV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return rB(c,o),iB(m,c)},function(m){throw ID(c),m}):(rB(c,o),iB(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===bSe&&(l=void 0),r.D&&VK(l,!0),o){var h=[],p=[];Gm("Patches").M(i,l,h,p),o(h,p)}return l}c0(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){w1(n)||c0(8),Eb(n)&&(n=s1t(n));var r=$ue(this),i=uV(this,n,void 0);return i[lo].C=!0,aV(r),i},t.finishDraft=function(n,r){var i=n&&n[lo],s=i.A;return rB(s,r),iB(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Vue&&c0(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Gm("Patches").$;return Eb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),ch=new c1t,_Se=ch.produce;ch.produceWithPatches.bind(ch);ch.setAutoFreeze.bind(ch);ch.setUseProxies.bind(ch);ch.applyPatches.bind(ch);ch.createDraft.bind(ch);ch.finishDraft.bind(ch);function I4(e){"@babel/helpers - typeof";return I4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I4(e)}function f1t(e,t){if(I4(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(I4(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d1t(e){var t=f1t(e,"string");return I4(t)=="symbol"?t:t+""}function h1t(e,t,n){return(t=d1t(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function que(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?que(Object(n),!0).forEach(function(r){h1t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):que(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ql(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Gue=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),aB=function(){return Math.random().toString(36).substring(7).split("").join(".")},DD={INIT:"@@redux/INIT"+aB(),REPLACE:"@@redux/REPLACE"+aB(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+aB()}};function p1t(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function wSe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ql(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ql(1));return n(wSe)(e,t)}if(typeof e!="function")throw new Error(Ql(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Ql(3));return s}function f(m){if(typeof m!="function")throw new Error(Ql(4));if(u)throw new Error(Ql(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Ql(6));g=!1,l();var y=a.indexOf(m);a.splice(y,1),o=null}}}function d(m){if(!p1t(m))throw new Error(Ql(7));if(typeof m.type>"u")throw new Error(Ql(8));if(u)throw new Error(Ql(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,b=0;b<g.length;b++){var y=g[b];y()}return m}function h(m){if(typeof m!="function")throw new Error(Ql(10));i=m,d({type:DD.REPLACE})}function p(){var m,g=f;return m={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Ql(11));function x(){y.next&&y.next(c())}x();var w=g(x);return{unsubscribe:w}}},m[Gue]=function(){return this},m}return d({type:DD.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Gue]=p,r}function m1t(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:DD.INIT});if(typeof r>"u")throw new Error(Ql(12));if(typeof n(void 0,{type:DD.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ql(13))})}function g1t(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{m1t(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Ql(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function OD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function y1t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Ql(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=OD.apply(void 0,a)(i.dispatch),Wue(Wue({},i),{},{dispatch:s})}}}function ESe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var cV=ESe();cV.withExtraArgument=ESe;var SSe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YR=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},sw=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},v1t=Object.defineProperty,b1t=Object.defineProperties,x1t=Object.getOwnPropertyDescriptors,Yue=Object.getOwnPropertySymbols,_1t=Object.prototype.hasOwnProperty,w1t=Object.prototype.propertyIsEnumerable,Kue=function(e,t,n){return t in e?v1t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},nb=function(e,t){for(var n in t||(t={}))_1t.call(t,n)&&Kue(e,n,t[n]);if(Yue)for(var r=0,i=Yue(t);r<i.length;r++){var n=i[r];w1t.call(t,n)&&Kue(e,n,t[n])}return e},uB=function(e,t){return b1t(e,x1t(t))},KR=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},E1t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?OD:OD.apply(null,arguments)};function TSe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var S1t=function(e){return e&&typeof e.match=="function"};function Ym(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return nb(nb({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function T1t(e){return TSe(e)&&"type"in e}var C1t=function(e){SSe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,sw([void 0],n[0].concat(this)))):new(t.bind.apply(t,sw([void 0],n.concat(this))))},t}(Array),A1t=function(e){SSe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,sw([void 0],n[0].concat(this)))):new(t.bind.apply(t,sw([void 0],n.concat(this))))},t}(Array);function fV(e){return w1(e)?_Se(e,function(){}):e}function k1t(e){return typeof e=="boolean"}function R1t(){return function(t){return I1t(t)}}function I1t(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new C1t;return n&&(k1t(n)?r.push(cV):r.push(cV.withExtraArgument(n.extraArgument))),r}function P1t(e){var t=R1t(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(TSe(i))h=g1t(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=y1t.apply(void 0,p),g=OD;u&&(g=E1t(nb({trace:!1},typeof u=="object"&&u)));var b=new A1t(m),y=b;Array.isArray(d)?y=sw([m],d):typeof d=="function"&&(y=d(b));var x=g.apply(void 0,y);return wSe(h,c,x)}function CSe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function N1t(e){return typeof e=="function"}function D1t(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?CSe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(N1t(e))u=function(){return fV(e())};else{var l=fV(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=sw([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Eb(p)){var g=p,b=m(g,d);return b===void 0?p:b}else{if(w1(p))return _Se(p,function(y){return m(y,d)});var b=m(p,d);if(b===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return p},f)}return c.getInitialState=u,c}function O1t(e,t){return e+"/"+t}function M1t(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:fV(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=O1t(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Ym(d,p):Ym(d)});function u(){var c=typeof e.extraReducers=="function"?CSe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,b=nb(nb({},d),o);return D1t(n,function(y){for(var x in b)y.addCase(x,b[x]);for(var w=0,S=p;w<S.length;w++){var C=S[w];y.addMatcher(C.matcher,C.reducer)}g&&y.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var L1t="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ASe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=L1t[Math.random()*64|0];return t},F1t=["name","message","stack","code"],lB=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Xue=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),$1t=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=F1t;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Ym(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:uB(nb({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Ym(t+"/pending",function(l,c,f){return{payload:void 0,meta:uB(nb({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Ym(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||$1t)(l||"Rejected"),meta:uB(nb({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):ASe(),p=new a,m;function g(y){m=y,p.abort()}var b=function(){return KR(this,null,function(){var y,x,w,S,C,R,I;return YR(this,function(O){switch(O.label){case 0:return O.trys.push([0,4,,5]),S=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,l,{getState:f,extra:d}),j1t(S)?[4,S]:[3,2];case 1:S=O.sent(),O.label=2;case 2:if(S===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(M,L){return p.signal.addEventListener("abort",function(){return L({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(x=r==null?void 0:r.getPendingMeta)==null?void 0:x.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([C,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(M,L){return new lB(M,L)},fulfillWithValue:function(M,L){return new Xue(M,L)}})).then(function(M){if(M instanceof lB)throw M;return M instanceof Xue?i(M.payload,h,l,M.meta):i(M,h,l)})])];case 3:return w=O.sent(),[3,5];case 4:return R=O.sent(),w=R instanceof lB?o(null,h,l,R.payload,R.meta):o(R,h,l),[3,5];case 5:return I=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,I||c(w),[2,w]}})})}();return Object.assign(b,{abort:g,requestId:h,arg:l,unwrap:function(){return b.then(B1t)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function B1t(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function j1t(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var U1t=function(e,t){return S1t(e)?e.match(t):e(t)};function Que(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return U1t(r,n)})}}var WK=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},dV=function(){},kSe=function(e,t){return t===void 0&&(t=dV),e.catch(t),e},RSe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},tS=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},z1t="task",ISe="listener",PSe="completed",GK="cancelled",V1t="task-"+GK,H1t="task-"+PSe,NSe=ISe+"-"+GK,q1t=ISe+"-"+PSe,kM=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=z1t+" "+GK+" (reason: "+t+")"}return e}(),nS=function(e){if(e.aborted)throw new kM(e.reason)};function DSe(e,t){var n=dV;return new Promise(function(r,i){var s=function(){return i(new kM(e.reason))};if(e.aborted){s();return}n=RSe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=dV})}var W1t=function(e,t){return KR(void 0,null,function(){var n,r;return YR(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof kM?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},MD=function(e){return function(t){return kSe(DSe(e,t).then(function(n){return nS(e),n}))}},OSe=function(e){var t=MD(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},G1t=Object.assign,Jue={},XR="listenerMiddleware",Y1t=function(e,t){var n=function(r){return RSe(e,function(){return tS(r,e.reason)})};return function(r,i){WK(r,"taskExecutor");var s=new AbortController;n(s);var o=W1t(function(){return KR(void 0,null,function(){var a;return YR(this,function(u){switch(u.label){case 0:return nS(e),nS(s.signal),[4,r({pause:MD(s.signal),delay:OSe(s.signal),signal:s.signal})];case 1:return a=u.sent(),nS(s.signal),[2,a]}})})},function(){return tS(s,H1t)});return i!=null&&i.autoJoin&&t.push(o),{result:MD(e)(o),cancel:function(){tS(s,V1t)}}}},K1t=function(e,t){var n=function(r,i){return KR(void 0,null,function(){var s,o,a,u;return YR(this,function(l){switch(l.label){case 0:nS(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,DSe(t,Promise.race(a))];case 2:return u=l.sent(),nS(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return kSe(n(r,i))}},MSe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Ym(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return WK(s,"options.listener"),{predicate:i,type:t,effect:s}},X1t=function(e){var t=MSe(e),n=t.type,r=t.predicate,i=t.effect,s=ASe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},hV=function(e){e.pending.forEach(function(t){tS(t,NSe)})},Q1t=function(e){return function(){e.forEach(hV),e.clear()}},Zue=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},J1t=Ym(XR+"/add"),Z1t=Ym(XR+"/removeAll"),evt=Ym(XR+"/remove"),tvt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,sw([XR+"/error"],e))};function nvt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?tvt:i;WK(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&hV(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=X1t(h)),o(p)},l=function(h){var p=MSe(h),m=p.type,g=p.effect,b=p.predicate,y=a(function(x){var w=typeof m=="string"?x.type===m:x.predicate===b;return w&&x.effect===g});return y&&(y.unsubscribe(),h.cancelActive&&hV(y)),!!y},c=function(h,p,m,g){return KR(t,null,function(){var b,y,x,w;return YR(this,function(S){switch(S.label){case 0:b=new AbortController,y=K1t(u,b.signal),x=[],S.label=1;case 1:return S.trys.push([1,3,4,6]),h.pending.add(b),[4,Promise.resolve(h.effect(p,G1t({},m,{getOriginalState:g,condition:function(C,R){return y(C,R).then(Boolean)},take:y,delay:OSe(b.signal),pause:MD(b.signal),extra:r,signal:b.signal,fork:Y1t(b.signal,x),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(C,R,I){C!==b&&(tS(C,NSe),I.delete(C))})}})))];case 2:return S.sent(),[3,6];case 3:return w=S.sent(),w instanceof kM||Zue(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(x)];case 5:return S.sent(),tS(b,q1t),h.pending.delete(b),[7];case 6:return[2]}})})},f=Q1t(n),d=function(h){return function(p){return function(m){if(!T1t(m))return p(m);if(J1t.match(m))return u(m.payload);if(Z1t.match(m)){f();return}if(evt.match(m))return l(m.payload);var g=h.getState(),b=function(){if(g===Jue)throw new Error(XR+": getOriginalState can only be called synchronously");return g},y;try{if(y=p(m),n.size>0)for(var x=h.getState(),w=Array.from(n.values()),S=0,C=w;S<C.length;S++){var R=C[S],I=!1;try{I=R.predicate(m,x,g)}catch(O){I=!1,Zue(s,O,{raisedBy:"predicate"})}I&&c(R,m,h,b)}}finally{g=Jue}return y}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var ele;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);o1t();function rvt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let Z6;const ivt=new Uint8Array(16);function svt(){if(!Z6&&(Z6=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Z6))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Z6(ivt)}const cl=[];for(let e=0;e<256;++e)cl.push((e+256).toString(16).slice(1));function ovt(e,t=0){return(cl[e[t+0]]+cl[e[t+1]]+cl[e[t+2]]+cl[e[t+3]]+"-"+cl[e[t+4]]+cl[e[t+5]]+"-"+cl[e[t+6]]+cl[e[t+7]]+"-"+cl[e[t+8]]+cl[e[t+9]]+"-"+cl[e[t+10]]+cl[e[t+11]]+cl[e[t+12]]+cl[e[t+13]]+cl[e[t+14]]+cl[e[t+15]]).toLowerCase()}const avt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),tle={randomUUID:avt};function nle(e,t,n){if(tle.randomUUID&&!e)return tle.randomUUID();e=e||{};const r=e.random||(e.rng||svt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ovt(r)}class Km{static get(){let t=nle();for(;this.ids.has(t);)t=nle();return this.ids.set(t,!0),t}}Km.ids=new Map;function w0(e){return"parent"in e}function uvt(e){return!w0(e)}function lvt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Km.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Km.get(),createdOn:Date.now(),val:r}]:[];return{id:Km.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function cvt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Km.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Km.get(),createdOn:Date.now(),val:s}]:[];return{id:Km.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Ho(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=bvt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ow(e){return!!e&&!!e[fh]}function Sb(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===xvt}(e)||Array.isArray(e)||!!e[Dk]||!!(!((t=e.constructor)===null||t===void 0)&&t[Dk])||RM(e)||IM(e))}function BS(e,t,n){n===void 0&&(n=!1),Tb(e)===0?(n?Object.keys:ZK)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Tb(e){var t=e[fh];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:RM(e)?2:IM(e)?3:0}function P4(e,t){return Tb(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function IN(e,t){return Tb(e)===2?e.get(t):e[t]}function LSe(e,t,n){var r=Tb(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function fvt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function RM(e){return yvt&&e instanceof Map}function IM(e){return vvt&&e instanceof Set}function c_(e){return e.o||e.t}function YK(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=_vt(e);delete t[fh];for(var n=ZK(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function KK(e,t){return t===void 0&&(t=!1),XK(e)||ow(e)||!Sb(e)||(Tb(e)>1&&(e.set=e.add=e.clear=e.delete=dvt),Object.freeze(e),t&&BS(e,function(n,r){return KK(r,!0)},!0)),e}function dvt(){Ho(2)}function XK(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Xm(e){var t=yV[e];return t||Ho(18,e),t}function hvt(e,t){yV[e]||(yV[e]=t)}function rle(){return{}.NODE_ENV==="production"||jS||Ho(0),jS}function cB(e,t){t&&(Xm("Patches"),e.u=[],e.s=[],e.v=t)}function LD(e){pV(e),e.p.forEach(pvt),e.p=null}function pV(e){e===jS&&(jS=e.l)}function ile(e){return jS={p:[],l:jS,h:e,m:!0,_:0}}function pvt(e){var t=e[fh];t.i===0||t.i===1?t.j():t.O=!0}function fB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Xm("ES5").S(t,e,r),r?(n[fh].P&&(LD(t),Ho(4)),Sb(e)&&(e=FD(t,e),t.l||$D(t,e)),t.u&&Xm("Patches").M(n[fh].t,e,t.u,t.s)):e=FD(t,n,[]),LD(t),t.u&&t.v(t.u,t.s),e!==JK?e:void 0}function FD(e,t,n){if(XK(t))return t;var r=t[fh];if(!r)return BS(t,function(s,o){return sle(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return $D(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=YK(r.k):r.o;BS(r.i===3?new Set(i):i,function(s,o){return sle(e,r,i,s,o,n)}),$D(e,i,!1),n&&e.u&&Xm("Patches").R(r,n,e.u,e.s)}return r.o}function sle(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Ho(5),ow(i)){var o=FD(e,i,s&&t&&t.i!==3&&!P4(t.D,r)?s.concat(r):void 0);if(LSe(n,r,o),!ow(o))return;e.m=!1}if(Sb(i)&&!XK(i)){if(!e.h.F&&e._<1)return;FD(e,i),t&&t.A.l||$D(e,i)}}function $D(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&KK(t,n)}function dB(e,t){var n=e[fh];return(n?c_(n):e)[t]}function ole(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function mV(e){e.P||(e.P=!0,e.l&&mV(e.l))}function hB(e){e.o||(e.o=YK(e.t))}function gV(e,t,n){var r=RM(t)?Xm("MapSet").N(t,n):IM(t)?Xm("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:rle(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=vV;o&&(u=[a],l=W3);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Xm("ES5").J(t,n);return(n?n.A:rle()).p.push(r),r}function mvt(e){return ow(e)||Ho(22,e),function t(n){if(!Sb(n))return n;var r,i=n[fh],s=Tb(n);if(i){if(!i.P&&(i.i<4||!Xm("ES5").K(i)))return i.t;i.I=!0,r=ale(n,s),i.I=!1}else r=ale(n,s);return BS(r,function(o,a){i&&IN(i.t,o)===a||LSe(r,o,t(a))}),s===3?new Set(r):r}(e)}function ale(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return YK(e)}function gvt(){function e(r){if(!Sb(r))return r;if(Array.isArray(r))return r.map(e);if(RM(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(IM(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return P4(r,Dk)&&(i[Dk]=r[Dk]),i}function t(r){return ow(r)?e(r):r}var n="add";hvt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Tb(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Ho(24),typeof u=="function"&&f==="prototype"&&Ho(24),typeof(u=IN(u,f))!="object"&&Ho(15,o.join("/"))}var d=Tb(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Ho(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Ho(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;BS(a.D,function(h,p){var m=IN(f,h),g=IN(d,h),b=p?P4(f,h)?"replace":n:"remove";if(m!==g||b!=="replace"){var y=u.concat(h);l.push(b==="remove"?{op:b,path:y}:{op:b,path:y,value:g}),c.push(b===n?{op:"remove",path:y}:b==="remove"?{op:n,path:y,value:t(m)}:{op:"replace",path:y,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var b=u.concat([g]);l.push({op:"replace",path:b,value:t(h[g])}),c.push({op:"replace",path:b,value:t(f[g])})}for(var y=f.length;y<h.length;y++){var x=u.concat([y]);l.push({op:n,path:x,value:t(h[y])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===JK?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var ule,jS,QK=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",yvt=typeof Map<"u",vvt=typeof Set<"u",lle=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",JK=QK?Symbol.for("immer-nothing"):((ule={})["immer-nothing"]=!0,ule),Dk=QK?Symbol.for("immer-draftable"):"__$immer_draftable",fh=QK?Symbol.for("immer-state"):"__$immer_state",bvt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},xvt=""+Object.prototype.constructor,ZK=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,_vt=Object.getOwnPropertyDescriptors||function(e){var t={};return ZK(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},yV={},vV={get:function(e,t){if(t===fh)return e;var n=c_(e);if(!P4(n,t))return function(i,s,o){var a,u=ole(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Sb(r)?r:r===dB(e.t,t)?(hB(e),e.o[t]=gV(e.A.h,r,e)):r},has:function(e,t){return t in c_(e)},ownKeys:function(e){return Reflect.ownKeys(c_(e))},set:function(e,t,n){var r=ole(c_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=dB(c_(e),t),s=i==null?void 0:i[fh];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(fvt(n,i)&&(n!==void 0||P4(e.t,t)))return!0;hB(e),mV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return dB(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,hB(e),mV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=c_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Ho(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ho(12)}},W3={};BS(vV,function(e,t){W3[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),W3.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ho(13),W3.set.call(this,e,t,void 0)},W3.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ho(14),vV.set.call(this,e[0],t,n,e[0])};var wvt=function(){function e(n){var r=this;this.g=lle,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var b=arguments.length,y=Array(b>1?b-1:0),x=1;x<b;x++)y[x-1]=arguments[x];return u.produce(m,function(w){var S;return(S=s).call.apply(S,[g,w].concat(y))})}}var l;if(typeof s!="function"&&Ho(6),o!==void 0&&typeof o!="function"&&Ho(7),Sb(i)){var c=ile(r),f=gV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?LD(c):pV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return cB(c,o),fB(m,c)},function(m){throw LD(c),m}):(cB(c,o),fB(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===JK&&(l=void 0),r.F&&KK(l,!0),o){var h=[],p=[];Xm("Patches").M(i,l,h,p),o(h,p)}return l}Ho(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Sb(n)||Ho(8),ow(n)&&(n=mvt(n));var r=ile(this),i=gV(this,n,void 0);return i[fh].C=!0,pV(r),i},t.finishDraft=function(n,r){var i=n&&n[fh];({}).NODE_ENV!=="production"&&(i&&i.C||Ho(9),i.I&&Ho(10));var s=i.A;return cB(s,r),fB(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!lle&&Ho(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Xm("Patches").$;return ow(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),dh=new wvt,Evt=dh.produce;dh.produceWithPatches.bind(dh);dh.setAutoFreeze.bind(dh);dh.setUseProxies.bind(dh);dh.applyPatches.bind(dh);dh.createDraft.bind(dh);dh.finishDraft.bind(dh);function Svt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=lvt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return M1t({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Km.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Km.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function Tvt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=Svt(e),s=nvt();s.startListening({matcher:Que(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Que(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=P1t({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Km.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Cvt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Avt=Object.prototype.hasOwnProperty;function bV(e,t){return Avt.call(e,t)}function xV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)bV(e,i)&&r.push(i);return r}function ed(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function _V(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function f_(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function FSe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function wV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(wV(e[t]))return!0}else if(typeof e=="object"){for(var r=xV(e),i=r.length,s=0;s<i;s++)if(wV(e[r[s]]))return!0}}return!1}function cle(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var $Se=function(e){Cvt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,cle(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=cle(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),zo=$Se,kvt=ed,DE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=BD(n,this.path);r&&(r=ed(r));var i=F_(n,{op:"remove",path:this.from}).removed;return F_(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=BD(n,this.from);return F_(n,{op:"add",path:this.path,value:ed(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:N4(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Rvt={add:function(e,t,n){return _V(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:DE.move,copy:DE.copy,test:DE.test,_get:DE._get};function BD(e,t){if(t=="")return e;var n={op:"_get",path:t};return F_(e,n),n.value}function F_(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):jD(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=BD(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=N4(e,t.value),o.test===!1)throw new zo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new zo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=ed(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=jD;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=FSe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!_V(h))throw new zo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);_V(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new zo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=Rvt[t.op].call(t,l,h,e);if(o.test===!1)throw new zo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=DE[t.op].call(t,l,h,e);if(o.test===!1)throw new zo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new zo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function PM(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new zo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=ed(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=F_(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function Ivt(e,t,n){var r=F_(e,t);if(r.test===!1)throw new zo("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function jD(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new zo("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(DE[e.op]){if(typeof e.path!="string")throw new zo("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new zo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new zo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new zo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&wV(e.value))throw new zo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new zo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new zo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=BSe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new zo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new zo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function BSe(e,t,n){try{if(!Array.isArray(e))throw new zo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)PM(ed(t),ed(e),n||!0);else{n=n||jD;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof zo)return i;throw i}}function N4(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!N4(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!N4(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Pvt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:zo,_areEquals:N4,applyOperation:F_,applyPatch:PM,applyReducer:Ivt,deepClone:kvt,getValueByPointer:BD,validate:BSe,validator:jD},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var eX=new WeakMap,Nvt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Dvt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Ovt(e){return eX.get(e)}function Mvt(e,t){return e.observers.get(t)}function Lvt(e,t){e.observers.delete(t.callback)}function Fvt(e,t){t.unobserve()}function $vt(e,t){var n=[],r,i=Ovt(e);if(!i)i=new Nvt(e),eX.set(e,i);else{var s=Mvt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=ed(e),t){r.callback=t,r.next=null;var o=function(){EV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){EV(r),clearTimeout(r.next),Lvt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Dvt(t,r)),r}function EV(e,t){t===void 0&&(t=!1);var n=eX.get(e.object);tX(n.value,e.object,e.patches,"",t),e.patches.length&&PM(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function tX(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=xV(t),o=xV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(bV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?tX(c,f,n,r+"/"+f_(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+f_(l),value:ed(c)}),n.push({op:"replace",path:r+"/"+f_(l),value:ed(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+f_(l),value:ed(c)}),n.push({op:"remove",path:r+"/"+f_(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!bV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+f_(l),value:ed(t[l])})}}}function jSe(e,t,n){n===void 0&&(n=!1);var r=[];return tX(e,t,r,"",n),r}const Bvt=Object.freeze(Object.defineProperty({__proto__:null,compare:jSe,generate:EV,observe:$vt,unobserve:Fvt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Pvt,Bvt,{JsonPatchError:$Se,deepClone:ed,escapePathComponent:f_,unescapePathComponent:FSe});var G3=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(G3||{});function PN(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=USe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=PN(i,t);return PM(a,ed(o),!0,!1).newDocument}function jvt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function Yw({registry:e,initialState:t}){let n=!1;const r=rvt(),i=Tvt(t);function s(c){return i.backend.nodes[c]}r.listen(G3.TRAVERSAL_START,()=>{n=!0}),r.listen(G3.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return PN(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const b=PN(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const y=jSe(b,f);if(jvt(f,y)==="checkpoint")g={type:"checkpoint",val:f};else{const x=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:y,checkpointRef:x}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=cvt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=PN(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(G3.TRAVERSAL_START);const f=USe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);zvt(p,m)?w0(p)&&d.push(...p.sideEffects.undo):w0(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(G3.TRAVERSAL_END)},undo(){const{current:c}=i;return w0(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return zSe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function Uvt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;w0(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)w0(r)&&(r=n[r.parent]),w0(i)&&(i=n[i.parent]);return r.id}function USe(e,t,n){const r=Uvt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),w0(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),w0(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function zvt(e,t){if(w0(e)&&e.parent===t.id)return!0;if(w0(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function zSe(e,t){return{...e,children:e.children.map(n=>zSe(t[n],t)),name:`${e.label}`}}gvt();function Vvt(e){return e.length===2?Evt(e):e}class O1{static create(){return new O1}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:Vvt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Ym(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}function Hvt({parameters:e,setAnswer:t}){const n=B.useRef(null),{image:r,radius:i,example:s,seconds:o,correlation:a,label:u,X:l,Y:c}=e,[f,d]=B.useState([]),[h,p]=B.useState({width:0,height:0}),[m,g]=B.useState("belief"),[b,y]=B.useState(i),x=B.useRef(null),[w,S]=B.useState(4),[C,R]=B.useState(0),[I,O]=B.useState(0),[M,L]=B.useState(!1),[V,D]=B.useState(null),{actions:j,trrack:z}=B.useMemo(()=>{const te=O1.create(),q=te.register("click",(oe,de)=>(oe.clickRecord=de,oe)),J=Yw({registry:te,initialState:{clickRecord:{}}});return{actions:{clickAction:q},trrack:J}},[]);B.useEffect(()=>{if(m!=="scatter")return;const te=setTimeout(()=>{g("corrafter")},o*1e3);return()=>clearTimeout(te)},[m,o]);const G=B.useCallback(te=>{t({answers:{status:!0,answer:JSON.stringify({clicked:f,corrBefore:C,corrActual:a,corrAfter:te,belief:(w-1)/6})},provenanceGraph:z.graph.backend}),O(te)},[f,C,a,z,t,w]);B.useEffect(()=>{if(m!=="scatter")return;const te=new Image;te.src=r,te.onload=()=>{const q=x.current,J=window.innerHeight-q.getBoundingClientRect().top,oe=window.innerWidth-q.getBoundingClientRect().left,de=te.width/te.height;let ce,pe;J*de<=oe?(pe=J,ce=J*de):(ce=oe,pe=oe/de);const Ee=ce/te.width;p({width:ce,height:pe,multiplier:Ee}),y(i*Ee)}},[r,m,i]);const ee=B.useCallback((te,q)=>{const J={x:parseInt(te),y:parseInt(q)};d(de=>[...de,J]);const oe={x:J.x,y:J.y,radius:b,multiplier:h.multiplier};z.apply("click",j.clickAction(oe))},[b,h,z,j]),ne=B.useMemo(()=>GR.debounce((te,q)=>{ee(te,q)},200),[ee]);B.useEffect(()=>()=>ne.cancel(),[ne]);const ue=B.useCallback(te=>{const q=Wo(n.current),J=Q_(te,q.node());L(!0),D({x:parseInt(J[0]),y:parseInt(J[1])}),ne(J[0],J[1])},[ne]),X=B.useCallback(te=>{if(!M)return;const q=Wo(n.current),J=Q_(te,q.node());D({x:parseInt(J[0]),y:parseInt(J[1])}),ne(J[0],J[1])},[M,ne]),W=B.useCallback(te=>{M&&(L(!1),ne.flush())},[M,ne]);return A.jsxs("div",{children:[s&&A.jsx("h1",{style:{color:"red"},children:"Example Question"}),m==="scatter"&&A.jsxs("div",{children:[A.jsx("h3",{children:"Explore the scatterplot of the two variables"}),A.jsxs("h3",{children:["X: ",l,"    /    Y: ",c]}),A.jsx("h3",{}),A.jsx(je,{ref:x,className:"ImageWrapper",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:A.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:h.width,height:h.height,onMouseDown:ue,onMouseMove:X,onMouseUp:W,onMouseLeave:W,children:[A.jsxs("defs",{children:[A.jsx("filter",{id:"imageBlurFilter",children:A.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:17})}),A.jsxs("mask",{id:"unblurMask",children:[A.jsx("rect",{width:"100%",height:"100%",fill:"white"}),A.jsx("rect",{x:"0",y:"0",width:"13.1%",height:"100%",fill:"black"}),A.jsx("rect",{x:"0",y:"89%",width:"100%",height:"12.8%",fill:"black"}),V&&A.jsx("circle",{cx:V.x,cy:V.y,r:b,fill:"black"},0)]})]}),A.jsx("image",{href:r,width:h.width,height:h.height}),A.jsx("image",{href:r,width:h.width,height:h.height,filter:"url(#imageBlurFilter)",mask:"url(#unblurMask)"}),V&&A.jsx("circle",{cx:V.x,cy:V.y,r:b,fill:"transparent",stroke:"red"},0),A.jsx("rect",{x:"0",y:"0",width:h.width,height:h.height,fill:"transparent",stroke:"black",strokeWidth:"1"})]})})]}),m==="corrbefore"&&A.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[A.jsx("h3",{children:"Predict the correlation of the two variables below:"}),A.jsxs("h3",{children:["X: ",l]}),A.jsxs("h3",{children:["Y: ",c]}),A.jsx(JE,{value:C,setValue:R,min:-1,max:1,step:.01,tickInterval:.2}),A.jsx(In,{float:"right",onClick:()=>g("scatter"),children:"Done"})]}),m==="corrafter"&&A.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[A.jsx("h3",{children:"Estimate the correlation of the scatterplot."}),A.jsx(JE,{value:I,setValue:G,min:-1,max:1,step:.01,tickInterval:.2})]}),m==="belief"&&A.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[A.jsx("h3",{children:"How much do you believe about this statement?"}),A.jsx("h3",{children:u}),A.jsx("div",{style:{marginBottom:100},children:A.jsx(JE,{value:w,setValue:S,leftLabel:"Not at all",rightLabel:"Completely",min:1,max:7,step:1,tickInterval:1,center:4})}),A.jsx(In,{onClick:()=>g("corrbefore"),children:"Done"})]})]})}const qvt=Object.freeze(Object.defineProperty({__proto__:null,default:Hvt},Symbol.toStringTag,{value:"Module"}));function Wvt({parameters:e,setAnswer:t}){const n=B.useRef(null),{image:r,label:i,X:s,Y:o}=e,[a,u]=B.useState([]),[l,c]=B.useState({width:0,height:0}),[f,d]=B.useState("remember","draw","report"),[h,p]=B.useState(0),[m,g]=B.useState(4),b=B.useRef(null),{actions:y,trrack:x}=B.useMemo(()=>{const C=O1.create(),R=C.register("click",(O,M)=>(O.clickRecord=M,O)),I=Yw({registry:C,initialState:{clickRecord:{timestamp:new Date().getTime()}}});return{actions:{clickAction:R},trrack:I}},[]),w=B.useCallback(C=>{t({answers:{status:!0,answer:JSON.stringify({clicked:a,remember:m,corrAfter:C})},provenanceGraph:x.graph.backend}),p(C)},[a,x,t]);B.useEffect(()=>{if(f!=="draw")return;const C=new Image;C.src=r,C.onload=()=>{const R=b.current,I=window.innerHeight-R.getBoundingClientRect().top,O=window.innerWidth-R.getBoundingClientRect().left,M=C.width/C.height;let L,V;I*M<=O?(V=I,L=I*M):(L=O,V=O/M);const D=L/C.width;c({width:L,height:V,multiplier:D})}},[r,f]);const S=B.useCallback(C=>{const R=Wo(n.current),I=Q_(C,R.node()),O={x:parseInt(I[0]),y:parseInt(I[1])},M=[...a,O];u(M);const L={x:O.x,y:O.y,multiplier:l.multiplier};x.apply("click",y.clickAction(L))},[a,l,x,y]);return A.jsxs("div",{children:[f==="draw"&&A.jsxs("div",{children:[A.jsxs("h3",{children:["Please draw the scatterplot you recall. You have ",20-a.length," points left to draw."]}),A.jsxs(je,{ref:b,className:"ImageWrapper",style:{display:"flex",justifyContent:"center",width:"100%"},children:[A.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:l.width,height:l.height,onClick:S,style:{border:"1px solid black",marginRight:10},children:[A.jsx("image",{href:r,width:l.width,height:l.height}),a.map(C=>A.jsx("circle",{cx:C.x,cy:C.y,r:5,fill:"black",stroke:"black"},0))]}),A.jsx(In,{disabled:a.length<20,onClick:()=>d("corrafter"),children:"Done"})]})]}),f==="corrafter"&&A.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[A.jsx("h3",{children:"Estimate the correlation of the scatterplot."}),A.jsxs("h3",{children:["X: ",s]}),A.jsxs("h3",{children:["Y: ",o]}),A.jsx(JE,{value:h,setValue:w,min:-1,max:1,step:.01,tickInterval:.2})]}),f==="remember"&&A.jsxs("div",{style:{width:"50%",margin:"50px auto"},children:[A.jsx("h3",{children:"How much do you remember about this scatterplot that you've seen?"}),A.jsxs("h3",{children:["X: ",s]}),A.jsxs("h3",{children:["Y: ",o]}),A.jsx("div",{style:{marginBottom:30,marginTop:100},children:A.jsx(m9,{value:m,onChange:g,min:1,max:7,defaultValue:4,size:"xl",color:"blue",step:"0.01",marks:[{value:1,label:"Definitely No"},{value:2,label:""},{value:3,label:""},{value:4,label:""},{value:5,label:""},{value:6,label:""},{value:7,label:"Definitely Yes"}]})}),A.jsx(In,{onClick:()=>d("draw"),children:"Done"})]})]})}const Gvt=Object.freeze(Object.defineProperty({__proto__:null,default:Wvt},Symbol.toStringTag,{value:"Module"}));function Yvt({parameters:e,setAnswer:t}){const n=B.useRef(null),{image:r,radius:i,example:s,correlation:o,seconds:a}=e,[u,l]=B.useState({width:0,height:0}),[c,f]=B.useState("scatter"),[d,h]=B.useState(i),p=B.useRef(null),[m,g]=B.useState(0);B.useEffect(()=>{const x=setTimeout(()=>{f("slider")},a*1e3);return()=>clearTimeout(x)},[]);const b=B.useCallback(()=>{t({answers:{status:!0,answer:JSON.stringify({corr_est:m,corr_act:o})}})},[m,t]),y=()=>{b(),f("feedback")};return B.useEffect(()=>{const x=new Image;x.src=r,x.onload=()=>{const w=p.current,S=window.innerHeight-w.getBoundingClientRect().top,C=window.innerWidth-w.getBoundingClientRect().left,R=x.width/x.height;let I,O;S*R<=C?(O=S,I=S*R):(I=C,O=C/R);const M=I/x.width;l({width:I,height:O,multiplier:M}),h(i*M)}},[r]),A.jsxs("div",{children:[s&&A.jsx("div",{children:A.jsx("h1",{style:{color:"red"},children:"Example Question"})}),c==="scatter"&&A.jsx(je,{ref:p,className:"ImageWrapper",style:{display:"flex",justifyContent:"center",width:"100%"},children:A.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[A.jsx("image",{href:r,width:u.width,height:u.height}),A.jsx("rect",{x:"0",y:"0",width:u.width,height:u.height,fill:"transparent",stroke:"black",strokeWidth:"1"})]})}),c==="slider"&&A.jsxs("div",{style:{width:"80%",margin:"50px auto"},children:[A.jsx("h2",{children:"Predict the Correlation!"}),A.jsx(JE,{value:m,setValue:g,min:-1,max:1,step:.01,tickInterval:.2}),A.jsx(In,{sx:{mt:2},onClick:y,children:"Done"})]}),c==="feedback"&&A.jsxs("div",{children:[A.jsxs("h2",{children:["Your estimation: ",m]}),A.jsxs("h2",{children:["Actual correlation: ",o.toFixed(2)]})]})]})}const Kvt=Object.freeze(Object.defineProperty({__proto__:null,default:Yvt},Symbol.toStringTag,{value:"Module"})),VSe=({tool:e,setTool:t,undo:n,clearAll:r})=>A.jsxs(je,{sx:{width:250,backgroundColor:"#f8f9fa",padding:20,borderRight:"1px solid #ddd",display:"flex",flexDirection:"column",gap:20},children:[A.jsx(co,{order:4,align:"center",sx:{fontWeight:700},children:"Toolbox"}),A.jsx(Zd,{my:"sm"}),A.jsxs(El,{spacing:"sm",children:[A.jsx(At,{weight:500,children:"Fill Type"}),A.jsx(Js,{children:A.jsxs(ac.Group,{name:"fillType",value:e,onChange:i=>{t(i)},children:[A.jsx(je,{mb:"sm",children:A.jsx(ac,{value:"stroke",label:"Stroke Fill"})}),A.jsx(je,{mb:"sm",children:A.jsx(ac,{value:"polygon",label:"Polygon Fill"})})]})})]}),A.jsx(Zd,{my:"md"}),A.jsxs(El,{spacing:"xs",children:[A.jsx(At,{weight:500,children:"Actions"}),A.jsx(In,{color:"gray",variant:"light",onClick:n,children:"Undo"}),A.jsx(In,{color:"red",variant:"light",onClick:r,children:"Clear All"})]}),A.jsx(Zd,{my:"md"}),A.jsxs(El,{spacing:"xs",children:[A.jsx(At,{size:"xl",children:"Tool Tips"}),A.jsxs(At,{size:"md",children:[A.jsx("b",{children:"Stroke Fill:"})," Draw shape by clicking and dragging."]}),A.jsxs(At,{size:"md",children:[A.jsx("b",{children:"Polygon Fill:"})," Click multiple points to draw a polygon. ",A.jsx("u",{children:"Double click"})," to close the polygon."]})]})]}),Xvt=Object.freeze(Object.defineProperty({__proto__:null,default:VSe},Symbol.toStringTag,{value:"Module"}));var pB,fle;function Qvt(){if(fle)return pB;fle=1;var e=A1();return pB=function(n,r,i){const s=e.useRef("loading"),o=e.useRef(),[a,u]=e.useState(0),l=e.useRef(),c=e.useRef(),f=e.useRef();return(l.current!==n||c.current!==r||f.current!==i)&&(s.current="loading",o.current=void 0,l.current=n,c.current=r,f.current=i),e.useLayoutEffect(function(){if(!n)return;var d=document.createElement("img");function h(){s.current="loaded",o.current=d,u(Math.random())}function p(){s.current="failed",o.current=void 0,u(Math.random())}return d.addEventListener("load",h),d.addEventListener("error",p),r&&(d.crossOrigin=r),i&&(d.referrerPolicy=i),d.src=n,function(){d.removeEventListener("load",h),d.removeEventListener("error",p)}},[n,r,i]),[o.current,s.current]},pB}var Jvt=Qvt();const HSe=gc(Jvt);var NN={exports:{}},pA={},mB={},gB={},dle;function Vr(){return dle||(dle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof va<"u"?va:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.18",isBrowser:n(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return e.Konva.angleDeg?i*t:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var i;return(i=e.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(i){e.glob.Konva=i}};const r=i=>{e.Konva[i.prototype.getClassName()]=i};e._registerNode=r,e.Konva._injectGlobal(e.Konva)}(gB)),gB}var yB={},hle;function Qo(){return hle||(hle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=Vr();class n{constructor(w=[1,0,0,1,0,0]){this.dirty=!1,this.m=w&&w.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(w){w.m[0]=this.m[0],w.m[1]=this.m[1],w.m[2]=this.m[2],w.m[3]=this.m[3],w.m[4]=this.m[4],w.m[5]=this.m[5]}point(w){const S=this.m;return{x:S[0]*w.x+S[2]*w.y+S[4],y:S[1]*w.x+S[3]*w.y+S[5]}}translate(w,S){return this.m[4]+=this.m[0]*w+this.m[2]*S,this.m[5]+=this.m[1]*w+this.m[3]*S,this}scale(w,S){return this.m[0]*=w,this.m[1]*=w,this.m[2]*=S,this.m[3]*=S,this}rotate(w){const S=Math.cos(w),C=Math.sin(w),R=this.m[0]*S+this.m[2]*C,I=this.m[1]*S+this.m[3]*C,O=this.m[0]*-C+this.m[2]*S,M=this.m[1]*-C+this.m[3]*S;return this.m[0]=R,this.m[1]=I,this.m[2]=O,this.m[3]=M,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(w,S){const C=this.m[0]+this.m[2]*S,R=this.m[1]+this.m[3]*S,I=this.m[2]+this.m[0]*w,O=this.m[3]+this.m[1]*w;return this.m[0]=C,this.m[1]=R,this.m[2]=I,this.m[3]=O,this}multiply(w){const S=this.m[0]*w.m[0]+this.m[2]*w.m[1],C=this.m[1]*w.m[0]+this.m[3]*w.m[1],R=this.m[0]*w.m[2]+this.m[2]*w.m[3],I=this.m[1]*w.m[2]+this.m[3]*w.m[3],O=this.m[0]*w.m[4]+this.m[2]*w.m[5]+this.m[4],M=this.m[1]*w.m[4]+this.m[3]*w.m[5]+this.m[5];return this.m[0]=S,this.m[1]=C,this.m[2]=R,this.m[3]=I,this.m[4]=O,this.m[5]=M,this}invert(){const w=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),S=this.m[3]*w,C=-this.m[1]*w,R=-this.m[2]*w,I=this.m[0]*w,O=w*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=w*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=S,this.m[1]=C,this.m[2]=R,this.m[3]=I,this.m[4]=O,this.m[5]=M,this}getMatrix(){return this.m}decompose(){const w=this.m[0],S=this.m[1],C=this.m[2],R=this.m[3],I=this.m[4],O=this.m[5],M=w*R-S*C,L={x:I,y:O,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(w!=0||S!=0){const V=Math.sqrt(w*w+S*S);L.rotation=S>0?Math.acos(w/V):-Math.acos(w/V),L.scaleX=V,L.scaleY=M/V,L.skewX=(w*C+S*R)/M,L.skewY=0}else if(C!=0||R!=0){const V=Math.sqrt(C*C+R*R);L.rotation=Math.PI/2-(R>0?Math.acos(-C/V):-Math.acos(C/V)),L.scaleX=M/V,L.scaleY=V,L.skewX=0,L.skewY=(w*C+S*R)/M}return L.rotation=e.Util._getRotation(L.rotation),L}}e.Transform=n;const r="[object Array]",i="[object Number]",s="[object String]",o="[object Boolean]",a=Math.PI/180,u=180/Math.PI,l="#",c="",f="0",d="Konva warning: ",h="Konva error: ",p="rgb(",m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},g=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let b=[];const y=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(x){setTimeout(x,60)};e.Util={_isElement(x){return!!(x&&x.nodeType==1)},_isFunction(x){return!!(x&&x.constructor&&x.call&&x.apply)},_isPlainObject(x){return!!x&&x.constructor===Object},_isArray(x){return Object.prototype.toString.call(x)===r},_isNumber(x){return Object.prototype.toString.call(x)===i&&!isNaN(x)&&isFinite(x)},_isString(x){return Object.prototype.toString.call(x)===s},_isBoolean(x){return Object.prototype.toString.call(x)===o},isObject(x){return x instanceof Object},isValidSelector(x){if(typeof x!="string")return!1;const w=x[0];return w==="#"||w==="."||w===w.toUpperCase()},_sign(x){return x===0||x>0?1:-1},requestAnimFrame(x){b.push(x),b.length===1&&y(function(){const w=b;b=[],w.forEach(function(S){S()})})},createCanvasElement(){const x=document.createElement("canvas");try{x.style=x.style||{}}catch{}return x},createImageElement(){return document.createElement("img")},_isInDocument(x){for(;x=x.parentNode;)if(x==document)return!0;return!1},_urlToImage(x,w){const S=e.Util.createImageElement();S.onload=function(){w(S)},S.src=x},_rgbToHex(x,w,S){return((1<<24)+(x<<16)+(w<<8)+S).toString(16).slice(1)},_hexToRgb(x){x=x.replace(l,c);const w=parseInt(x,16);return{r:w>>16&255,g:w>>8&255,b:w&255}},getRandomColor(){let x=(Math.random()*16777215<<0).toString(16);for(;x.length<6;)x=f+x;return l+x},getRGB(x){let w;return x in m?(w=m[x],{r:w[0],g:w[1],b:w[2]}):x[0]===l?this._hexToRgb(x.substring(1)):x.substr(0,4)===p?(w=g.exec(x.replace(/ /g,"")),{r:parseInt(w[1],10),g:parseInt(w[2],10),b:parseInt(w[3],10)}):{r:0,g:0,b:0}},colorToRGBA(x){return x=x||"black",e.Util._namedColorToRBA(x)||e.Util._hex3ColorToRGBA(x)||e.Util._hex4ColorToRGBA(x)||e.Util._hex6ColorToRGBA(x)||e.Util._hex8ColorToRGBA(x)||e.Util._rgbColorToRGBA(x)||e.Util._rgbaColorToRGBA(x)||e.Util._hslColorToRGBA(x)},_namedColorToRBA(x){const w=m[x.toLowerCase()];return w?{r:w[0],g:w[1],b:w[2],a:1}:null},_rgbColorToRGBA(x){if(x.indexOf("rgb(")===0){x=x.match(/rgb\(([^)]+)\)/)[1];const w=x.split(/ *, */).map(Number);return{r:w[0],g:w[1],b:w[2],a:1}}},_rgbaColorToRGBA(x){if(x.indexOf("rgba(")===0){x=x.match(/rgba\(([^)]+)\)/)[1];const w=x.split(/ *, */).map((S,C)=>S.slice(-1)==="%"?C===3?parseInt(S)/100:parseInt(S)/100*255:Number(S));return{r:w[0],g:w[1],b:w[2],a:w[3]}}},_hex8ColorToRGBA(x){if(x[0]==="#"&&x.length===9)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:parseInt(x.slice(7,9),16)/255}},_hex6ColorToRGBA(x){if(x[0]==="#"&&x.length===7)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:1}},_hex4ColorToRGBA(x){if(x[0]==="#"&&x.length===5)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:parseInt(x[4]+x[4],16)/255}},_hex3ColorToRGBA(x){if(x[0]==="#"&&x.length===4)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:1}},_hslColorToRGBA(x){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(x)){const[w,...S]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(x),C=Number(S[0])/360,R=Number(S[1])/100,I=Number(S[2])/100;let O,M,L;if(R===0)return L=I*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};I<.5?O=I*(1+R):O=I+R-I*R;const V=2*I-O,D=[0,0,0];for(let j=0;j<3;j++)M=C+1/3*-(j-1),M<0&&M++,M>1&&M--,6*M<1?L=V+(O-V)*6*M:2*M<1?L=O:3*M<2?L=V+(O-V)*(2/3-M)*6:L=V,D[j]=L*255;return{r:Math.round(D[0]),g:Math.round(D[1]),b:Math.round(D[2]),a:1}}},haveIntersection(x,w){return!(w.x>x.x+x.width||w.x+w.width<x.x||w.y>x.y+x.height||w.y+w.height<x.y)},cloneObject(x){const w={};for(const S in x)this._isPlainObject(x[S])?w[S]=this.cloneObject(x[S]):this._isArray(x[S])?w[S]=this.cloneArray(x[S]):w[S]=x[S];return w},cloneArray(x){return x.slice(0)},degToRad(x){return x*a},radToDeg(x){return x*u},_degToRad(x){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(x)},_radToDeg(x){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(x)},_getRotation(x){return t.Konva.angleDeg?e.Util.radToDeg(x):x},_capitalize(x){return x.charAt(0).toUpperCase()+x.slice(1)},throw(x){throw new Error(h+x)},error(x){console.error(h+x)},warn(x){t.Konva.showWarnings&&console.warn(d+x)},each(x,w){for(const S in x)w(S,x[S])},_inRange(x,w,S){return w<=x&&x<S},_getProjectionToSegment(x,w,S,C,R,I){let O,M,L;const V=(x-S)*(x-S)+(w-C)*(w-C);if(V==0)O=x,M=w,L=(R-S)*(R-S)+(I-C)*(I-C);else{const D=((R-x)*(S-x)+(I-w)*(C-w))/V;D<0?(O=x,M=w,L=(x-R)*(x-R)+(w-I)*(w-I)):D>1?(O=S,M=C,L=(S-R)*(S-R)+(C-I)*(C-I)):(O=x+D*(S-x),M=w+D*(C-w),L=(O-R)*(O-R)+(M-I)*(M-I))}return[O,M,L]},_getProjectionToLine(x,w,S){const C=e.Util.cloneObject(x);let R=Number.MAX_VALUE;return w.forEach(function(I,O){if(!S&&O===w.length-1)return;const M=w[(O+1)%w.length],L=e.Util._getProjectionToSegment(I.x,I.y,M.x,M.y,x.x,x.y),V=L[0],D=L[1],j=L[2];j<R&&(C.x=V,C.y=D,R=j)}),C},_prepareArrayForTween(x,w,S){const C=[],R=[];if(x.length>w.length){const O=w;w=x,x=O}for(let O=0;O<x.length;O+=2)C.push({x:x[O],y:x[O+1]});for(let O=0;O<w.length;O+=2)R.push({x:w[O],y:w[O+1]});const I=[];return R.forEach(function(O){const M=e.Util._getProjectionToLine(O,C,S);I.push(M.x),I.push(M.y)}),I},_prepareToStringify(x){let w;x.visitedByCircularReferenceRemoval=!0;for(const S in x)if(x.hasOwnProperty(S)&&x[S]&&typeof x[S]=="object"){if(w=Object.getOwnPropertyDescriptor(x,S),x[S].visitedByCircularReferenceRemoval||e.Util._isElement(x[S]))if(w.configurable)delete x[S];else return null;else if(e.Util._prepareToStringify(x[S])===null)if(w.configurable)delete x[S];else return null}return delete x.visitedByCircularReferenceRemoval,x},_assign(x,w){for(const S in w)x[S]=w[S];return x},_getFirstPointerId(x){return x.touches?x.changedTouches[0].identifier:x.pointerId||999},releaseCanvas(...x){t.Konva.releaseCanvasOnDestroy&&x.forEach(w=>{w.width=0,w.height=0})},drawRoundedRectPath(x,w,S,C){let R=0,I=0,O=0,M=0;typeof C=="number"?R=I=O=M=Math.min(C,w/2,S/2):(R=Math.min(C[0]||0,w/2,S/2),I=Math.min(C[1]||0,w/2,S/2),M=Math.min(C[2]||0,w/2,S/2),O=Math.min(C[3]||0,w/2,S/2)),x.moveTo(R,0),x.lineTo(w-I,0),x.arc(w-I,I,I,Math.PI*3/2,0,!1),x.lineTo(w,S-M),x.arc(w-M,S-M,M,0,Math.PI/2,!1),x.lineTo(O,S),x.arc(O,S-O,O,Math.PI/2,Math.PI,!1),x.lineTo(0,R),x.arc(R,R,R,Math.PI,Math.PI*3/2,!1)}}}(yB)),yB}var mA={},vB={},Uf={},ple;function Zr(){if(ple)return Uf;ple=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.RGBComponent=r,Uf.alphaComponent=i,Uf.getNumberValidator=s,Uf.getNumberOrArrayOfNumbersValidator=o,Uf.getNumberOrAutoValidator=a,Uf.getStringValidator=u,Uf.getStringOrGradientValidator=l,Uf.getFunctionValidator=c,Uf.getNumberArrayValidator=f,Uf.getBooleanValidator=d,Uf.getComponentValidator=h;const e=Vr(),t=Qo();function n(p){return t.Util._isString(p)?'"'+p+'"':Object.prototype.toString.call(p)==="[object Number]"||t.Util._isBoolean(p)?p:Object.prototype.toString.call(p)}function r(p){return p>255?255:p<0?0:Math.round(p)}function i(p){return p>1?1:p<1e-4?1e-4:p}function s(){if(e.Konva.isUnminified)return function(p,m){return t.Util._isNumber(p)||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a number.'),p}}function o(p){if(e.Konva.isUnminified)return function(m,g){let b=t.Util._isNumber(m),y=t.Util._isArray(m)&&m.length==p;return!b&&!y&&t.Util.warn(n(m)+' is a not valid value for "'+g+'" attribute. The value should be a number or Array<number>('+p+")"),m}}function a(){if(e.Konva.isUnminified)return function(p,m){var g=t.Util._isNumber(p),b=p==="auto";return g||b||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a number or "auto".'),p}}function u(){if(e.Konva.isUnminified)return function(p,m){return t.Util._isString(p)||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a string.'),p}}function l(){if(e.Konva.isUnminified)return function(p,m){const g=t.Util._isString(p),b=Object.prototype.toString.call(p)==="[object CanvasGradient]"||p&&p.addColorStop;return g||b||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a string or a native gradient.'),p}}function c(){if(e.Konva.isUnminified)return function(p,m){return t.Util._isFunction(p)||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a function.'),p}}function f(){if(e.Konva.isUnminified)return function(p,m){const g=Int8Array?Object.getPrototypeOf(Int8Array):null;return g&&p instanceof g||(t.Util._isArray(p)?p.forEach(function(b){t.Util._isNumber(b)||t.Util.warn('"'+m+'" attribute has non numeric element '+b+". Make sure that all elements are numbers.")}):t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a array of numbers.')),p}}function d(){if(e.Konva.isUnminified)return function(p,m){var g=p===!0||p===!1;return g||t.Util.warn(n(p)+' is a not valid value for "'+m+'" attribute. The value should be a boolean.'),p}}function h(p){if(e.Konva.isUnminified)return function(m,g){return m==null||t.Util.isObject(m)||t.Util.warn(n(m)+' is a not valid value for "'+g+'" attribute. The value should be an object with properties '+p),m}}return Uf}var mle;function Yr(){return mle||(mle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=Qo(),n=Zr(),r="get",i="set";e.Factory={addGetterSetter(s,o,a,u,l){e.Factory.addGetter(s,o,a),e.Factory.addSetter(s,o,u,l),e.Factory.addOverloadedGetterSetter(s,o)},addGetter(s,o,a){var u=r+t.Util._capitalize(o);s.prototype[u]=s.prototype[u]||function(){const l=this.attrs[o];return l===void 0?a:l}},addSetter(s,o,a,u){var l=i+t.Util._capitalize(o);s.prototype[l]||e.Factory.overWriteSetter(s,o,a,u)},overWriteSetter(s,o,a,u){var l=i+t.Util._capitalize(o);s.prototype[l]=function(c){return a&&c!==void 0&&c!==null&&(c=a.call(this,c,o)),this._setAttr(o,c),u&&u.call(this),this}},addComponentsGetterSetter(s,o,a,u,l){const c=a.length,f=t.Util._capitalize,d=r+f(o),h=i+f(o);s.prototype[d]=function(){const m={};for(let g=0;g<c;g++){const b=a[g];m[b]=this.getAttr(o+f(b))}return m};const p=(0,n.getComponentValidator)(a);s.prototype[h]=function(m){const g=this.attrs[o];u&&(m=u.call(this,m,o)),p&&p.call(this,m,o);for(const b in m)m.hasOwnProperty(b)&&this._setAttr(o+f(b),m[b]);return m||a.forEach(b=>{this._setAttr(o+f(b),void 0)}),this._fireChangeEvent(o,g,m),l&&l.call(this),this},e.Factory.addOverloadedGetterSetter(s,o)},addOverloadedGetterSetter(s,o){var a=t.Util._capitalize(o),u=i+a,l=r+a;s.prototype[o]=function(){return arguments.length?(this[u](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter(s,o,a,u){t.Util.error("Adding deprecated "+o);const l=r+t.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[l]=function(){t.Util.error(c);const f=this.attrs[o];return f===void 0?a:f},e.Factory.addSetter(s,o,u,function(){t.Util.error(c)}),e.Factory.addOverloadedGetterSetter(s,o)},backCompat(s,o){t.Util.each(o,function(a,u){const l=s.prototype[u],c=r+t.Util._capitalize(a),f=i+t.Util._capitalize(a);function d(){l.apply(this,arguments),t.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+u+'" instead.')}s.prototype[a]=d,s.prototype[c]=d,s.prototype[f]=d})},afterSetFilter(){this._filterUpToDate=!1}}}(vB)),vB}var vy={},by={},gle;function qSe(){if(gle)return by;gle=1,Object.defineProperty(by,"__esModule",{value:!0}),by.HitContext=by.SceneContext=by.Context=void 0;const e=Qo(),t=Vr();function n(b){const y=[],x=b.length,w=e.Util;for(let S=0;S<x;S++){let C=b[S];w._isNumber(C)?C=Math.round(C*1e3)/1e3:w._isString(C)||(C=C+""),y.push(C)}return y}const r=",",i="(",s=")",o="([",a="])",u=";",l="()",c="=",f=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],d=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],h=100;class p{constructor(y){this.canvas=y,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(y){y.fillEnabled()&&this._fill(y)}_fill(y){}strokeShape(y){y.hasStroke()&&this._stroke(y)}_stroke(y){}fillStrokeShape(y){y.attrs.fillAfterStrokeEnabled?(this.strokeShape(y),this.fillShape(y)):(this.fillShape(y),this.strokeShape(y))}getTrace(y,x){let w=this.traceArr,S=w.length,C="",R,I,O,M;for(R=0;R<S;R++)I=w[R],O=I.method,O?(M=I.args,C+=O,y?C+=l:e.Util._isArray(M[0])?C+=o+M.join(r)+a:(x&&(M=M.map(L=>typeof L=="number"?Math.floor(L):L)),C+=i+M.join(r)+s)):(C+=I.property,y||(C+=c+I.val)),C+=u;return C}clearTrace(){this.traceArr=[]}_trace(y){let x=this.traceArr,w;x.push(y),w=x.length,w>=h&&x.shift()}reset(){const y=this.getCanvas().getPixelRatio();this.setTransform(1*y,0,0,1*y,0,0)}getCanvas(){return this.canvas}clear(y){const x=this.getCanvas();y?this.clearRect(y.x||0,y.y||0,y.width||0,y.height||0):this.clearRect(0,0,x.getWidth()/x.pixelRatio,x.getHeight()/x.pixelRatio)}_applyLineCap(y){const x=y.attrs.lineCap;x&&this.setAttr("lineCap",x)}_applyOpacity(y){const x=y.getAbsoluteOpacity();x!==1&&this.setAttr("globalAlpha",x)}_applyLineJoin(y){const x=y.attrs.lineJoin;x&&this.setAttr("lineJoin",x)}setAttr(y,x){this._context[y]=x}arc(y,x,w,S,C,R){this._context.arc(y,x,w,S,C,R)}arcTo(y,x,w,S,C){this._context.arcTo(y,x,w,S,C)}beginPath(){this._context.beginPath()}bezierCurveTo(y,x,w,S,C,R){this._context.bezierCurveTo(y,x,w,S,C,R)}clearRect(y,x,w,S){this._context.clearRect(y,x,w,S)}clip(...y){this._context.clip.apply(this._context,y)}closePath(){this._context.closePath()}createImageData(y,x){const w=arguments;if(w.length===2)return this._context.createImageData(y,x);if(w.length===1)return this._context.createImageData(y)}createLinearGradient(y,x,w,S){return this._context.createLinearGradient(y,x,w,S)}createPattern(y,x){return this._context.createPattern(y,x)}createRadialGradient(y,x,w,S,C,R){return this._context.createRadialGradient(y,x,w,S,C,R)}drawImage(y,x,w,S,C,R,I,O,M){const L=arguments,V=this._context;L.length===3?V.drawImage(y,x,w):L.length===5?V.drawImage(y,x,w,S,C):L.length===9&&V.drawImage(y,x,w,S,C,R,I,O,M)}ellipse(y,x,w,S,C,R,I,O){this._context.ellipse(y,x,w,S,C,R,I,O)}isPointInPath(y,x,w,S){return w?this._context.isPointInPath(w,y,x,S):this._context.isPointInPath(y,x,S)}fill(...y){this._context.fill.apply(this._context,y)}fillRect(y,x,w,S){this._context.fillRect(y,x,w,S)}strokeRect(y,x,w,S){this._context.strokeRect(y,x,w,S)}fillText(y,x,w,S){S?this._context.fillText(y,x,w,S):this._context.fillText(y,x,w)}measureText(y){return this._context.measureText(y)}getImageData(y,x,w,S){return this._context.getImageData(y,x,w,S)}lineTo(y,x){this._context.lineTo(y,x)}moveTo(y,x){this._context.moveTo(y,x)}rect(y,x,w,S){this._context.rect(y,x,w,S)}roundRect(y,x,w,S,C){this._context.roundRect(y,x,w,S,C)}putImageData(y,x,w){this._context.putImageData(y,x,w)}quadraticCurveTo(y,x,w,S){this._context.quadraticCurveTo(y,x,w,S)}restore(){this._context.restore()}rotate(y){this._context.rotate(y)}save(){this._context.save()}scale(y,x){this._context.scale(y,x)}setLineDash(y){this._context.setLineDash?this._context.setLineDash(y):"mozDash"in this._context?this._context.mozDash=y:"webkitLineDash"in this._context&&(this._context.webkitLineDash=y)}getLineDash(){return this._context.getLineDash()}setTransform(y,x,w,S,C,R){this._context.setTransform(y,x,w,S,C,R)}stroke(y){y?this._context.stroke(y):this._context.stroke()}strokeText(y,x,w,S){this._context.strokeText(y,x,w,S)}transform(y,x,w,S,C,R){this._context.transform(y,x,w,S,C,R)}translate(y,x){this._context.translate(y,x)}_enableTrace(){let y=this,x=f.length,w=this.setAttr,S,C;const R=function(I){let O=y[I],M;y[I]=function(){return C=n(Array.prototype.slice.call(arguments,0)),M=O.apply(y,arguments),y._trace({method:I,args:C}),M}};for(S=0;S<x;S++)R(f[S]);y.setAttr=function(){w.apply(y,arguments);const I=arguments[0];let O=arguments[1];(I==="shadowOffsetX"||I==="shadowOffsetY"||I==="shadowBlur")&&(O=O/this.canvas.getPixelRatio()),y._trace({property:I,val:O})}}_applyGlobalCompositeOperation(y){const x=y.attrs.globalCompositeOperation;!x||x==="source-over"||this.setAttr("globalCompositeOperation",x)}}by.Context=p,d.forEach(function(b){Object.defineProperty(p.prototype,b,{get(){return this._context[b]},set(y){this._context[b]=y}})});class m extends p{constructor(y,{willReadFrequently:x=!1}={}){super(y),this._context=y._canvas.getContext("2d",{willReadFrequently:x})}_fillColor(y){const x=y.fill();this.setAttr("fillStyle",x),y._fillFunc(this)}_fillPattern(y){this.setAttr("fillStyle",y._getFillPattern()),y._fillFunc(this)}_fillLinearGradient(y){const x=y._getLinearGradient();x&&(this.setAttr("fillStyle",x),y._fillFunc(this))}_fillRadialGradient(y){const x=y._getRadialGradient();x&&(this.setAttr("fillStyle",x),y._fillFunc(this))}_fill(y){const x=y.fill(),w=y.getFillPriority();if(x&&w==="color"){this._fillColor(y);return}const S=y.getFillPatternImage();if(S&&w==="pattern"){this._fillPattern(y);return}const C=y.getFillLinearGradientColorStops();if(C&&w==="linear-gradient"){this._fillLinearGradient(y);return}const R=y.getFillRadialGradientColorStops();if(R&&w==="radial-gradient"){this._fillRadialGradient(y);return}x?this._fillColor(y):S?this._fillPattern(y):C?this._fillLinearGradient(y):R&&this._fillRadialGradient(y)}_strokeLinearGradient(y){const x=y.getStrokeLinearGradientStartPoint(),w=y.getStrokeLinearGradientEndPoint(),S=y.getStrokeLinearGradientColorStops(),C=this.createLinearGradient(x.x,x.y,w.x,w.y);if(S){for(let R=0;R<S.length;R+=2)C.addColorStop(S[R],S[R+1]);this.setAttr("strokeStyle",C)}}_stroke(y){const x=y.dash(),w=y.getStrokeScaleEnabled();if(y.hasStroke()){if(!w){this.save();const C=this.getCanvas().getPixelRatio();this.setTransform(C,0,0,C,0,0)}this._applyLineCap(y),x&&y.dashEnabled()&&(this.setLineDash(x),this.setAttr("lineDashOffset",y.dashOffset())),this.setAttr("lineWidth",y.strokeWidth()),y.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),y.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(y):this.setAttr("strokeStyle",y.stroke()),y._strokeFunc(this),w||this.restore()}}_applyShadow(y){var x,w,S;const C=(x=y.getShadowRGBA())!==null&&x!==void 0?x:"black",R=(w=y.getShadowBlur())!==null&&w!==void 0?w:5,I=(S=y.getShadowOffset())!==null&&S!==void 0?S:{x:0,y:0},O=y.getAbsoluteScale(),M=this.canvas.getPixelRatio(),L=O.x*M,V=O.y*M;this.setAttr("shadowColor",C),this.setAttr("shadowBlur",R*Math.min(Math.abs(L),Math.abs(V))),this.setAttr("shadowOffsetX",I.x*L),this.setAttr("shadowOffsetY",I.y*V)}}by.SceneContext=m;class g extends p{constructor(y){super(y),this._context=y._canvas.getContext("2d",{willReadFrequently:!0})}_fill(y){this.save(),this.setAttr("fillStyle",y.colorKey),y._fillFuncHit(this),this.restore()}strokeShape(y){y.hasHitStroke()&&this._stroke(y)}_stroke(y){if(y.hasHitStroke()){const x=y.getStrokeScaleEnabled();if(!x){this.save();const C=this.getCanvas().getPixelRatio();this.setTransform(C,0,0,C,0,0)}this._applyLineCap(y);const w=y.hitStrokeWidth(),S=w==="auto"?y.strokeWidth():w;this.setAttr("lineWidth",S),this.setAttr("strokeStyle",y.colorKey),y._strokeFuncHit(this),x||this.restore()}}}return by.HitContext=g,by}var yle;function NM(){if(yle)return vy;yle=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.HitCanvas=vy.SceneCanvas=vy.Canvas=void 0;const e=Qo(),t=qSe(),n=Vr(),r=Yr(),i=Zr();let s;function o(){if(s)return s;const c=e.Util.createCanvasElement(),f=c.getContext("2d");return s=function(){const d=n.Konva._global.devicePixelRatio||1,h=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;return d/h}(),e.Util.releaseCanvas(c),s}class a{constructor(f){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const h=(f||{}).pixelRatio||n.Konva.pixelRatio||o();this.pixelRatio=h,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(f){const d=this.pixelRatio;this.pixelRatio=f,this.setSize(this.getWidth()/d,this.getHeight()/d)}setWidth(f){this.width=this._canvas.width=f*this.pixelRatio,this._canvas.style.width=f+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}setHeight(f){this.height=this._canvas.height=f*this.pixelRatio,this._canvas.style.height=f+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}getWidth(){return this.width}getHeight(){return this.height}setSize(f,d){this.setWidth(f||0),this.setHeight(d||0)}toDataURL(f,d){try{return this._canvas.toDataURL(f,d)}catch{try{return this._canvas.toDataURL()}catch(p){return e.Util.error("Unable to get data URL. "+p.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}vy.Canvas=a,r.Factory.addGetterSetter(a,"pixelRatio",void 0,(0,i.getNumberValidator)());class u extends a{constructor(f={width:0,height:0,willReadFrequently:!1}){super(f),this.context=new t.SceneContext(this,{willReadFrequently:f.willReadFrequently}),this.setSize(f.width,f.height)}}vy.SceneCanvas=u;class l extends a{constructor(f={width:0,height:0}){super(f),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(f.width,f.height)}}return vy.HitCanvas=l,vy}var bB={},vle;function nX(){return vle||(vle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Vr(),n=Qo();e.DD={get isDragging(){let r=!1;return e.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return e.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];e.DD._dragElements.forEach((s,o)=>{const{node:a}=s,u=a.getStage();u.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=n.Util._getFirstPointerId(r));const l=u._changedPointerPositions.find(c=>c.id===s.pointerId);if(l){if(s.dragStatus!=="dragging"){const c=a.dragDistance();if(Math.max(Math.abs(l.x-s.startPointerPos.x),Math.abs(l.y-s.startPointerPos.y))<c||(a.startDrag({evt:r}),!a.isDragging()))return}a._setDragPosition(r,s),i.push(a)}}),i.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const i=[];e.DD._dragElements.forEach(s=>{const{node:o}=s,a=o.getStage();if(r&&a.setPointersPositions(r),!a._changedPointerPositions.find(c=>c.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,s.dragStatus="stopped");const l=s.node.getLayer()||s.node instanceof t.Konva.Stage&&s.node;l&&i.indexOf(l)===-1&&i.push(l)}),i.forEach(s=>{s.draw()})},_endDragAfter(r){e.DD._dragElements.forEach((i,s)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&e.DD._dragElements.delete(s)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))}(bB)),bB}var ble;function wa(){if(ble)return mA;ble=1,Object.defineProperty(mA,"__esModule",{value:!0}),mA.Node=void 0;const e=Qo(),t=Yr(),n=NM(),r=Vr(),i=nX(),s=Zr(),o="absoluteOpacity",a="allEventListeners",u="absoluteTransform",l="absoluteScale",c="canvas",f="Change",d="children",h="konva",p="listening",m="mouseenter",g="mouseleave",b="set",y="Shape",x=" ",w="stage",S="transform",C="Stage",R="visible",I=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(x);let O=1;class M{constructor(D){this._id=O++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(D),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(D){(D===S||D===u)&&this._cache.get(D)?this._cache.get(D).dirty=!0:D?this._cache.delete(D):this._cache.clear()}_getCache(D,j){let z=this._cache.get(D);return(z===void 0||(D===S||D===u)&&z.dirty===!0)&&(z=j.call(this),this._cache.set(D,z)),z}_calculate(D,j,z){if(!this._attachedDepsListeners.get(D)){const G=j.map(ee=>ee+"Change.konva").join(x);this.on(G,()=>{this._clearCache(D)}),this._attachedDepsListeners.set(D,!0)}return this._getCache(D,z)}_getCanvasCache(){return this._cache.get(c)}_clearSelfAndDescendantCache(D){this._clearCache(D),D===u&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(c)){const{scene:D,filter:j,hit:z}=this._cache.get(c);e.Util.releaseCanvas(D,j,z),this._cache.delete(c)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(D){const j=D||{};let z={};(j.x===void 0||j.y===void 0||j.width===void 0||j.height===void 0)&&(z=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let G=Math.ceil(j.width||z.width),ee=Math.ceil(j.height||z.height),ne=j.pixelRatio,ue=j.x===void 0?Math.floor(z.x):j.x,X=j.y===void 0?Math.floor(z.y):j.y,W=j.offset||0,te=j.drawBorder||!1,q=j.hitCanvasPixelRatio||1;if(!G||!ee){e.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const J=Math.abs(Math.round(z.x)-ue)>.5?1:0,oe=Math.abs(Math.round(z.y)-X)>.5?1:0;G+=W*2+J,ee+=W*2+oe,ue-=W,X-=W;const de=new n.SceneCanvas({pixelRatio:ne,width:G,height:ee}),ce=new n.SceneCanvas({pixelRatio:ne,width:0,height:0,willReadFrequently:!0}),pe=new n.HitCanvas({pixelRatio:q,width:G,height:ee}),Ee=de.getContext(),Ae=pe.getContext();return pe.isCache=!0,de.isCache=!0,this._cache.delete(c),this._filterUpToDate=!1,j.imageSmoothingEnabled===!1&&(de.getContext()._context.imageSmoothingEnabled=!1,ce.getContext()._context.imageSmoothingEnabled=!1),Ee.save(),Ae.save(),Ee.translate(-ue,-X),Ae.translate(-ue,-X),this._isUnderCache=!0,this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(l),this.drawScene(de,this),this.drawHit(pe,this),this._isUnderCache=!1,Ee.restore(),Ae.restore(),te&&(Ee.save(),Ee.beginPath(),Ee.rect(0,0,G,ee),Ee.closePath(),Ee.setAttr("strokeStyle","red"),Ee.setAttr("lineWidth",5),Ee.stroke(),Ee.restore()),this._cache.set(c,{scene:de,filter:ce,hit:pe,x:ue,y:X}),this._requestDraw(),this}isCached(){return this._cache.has(c)}getClientRect(D){throw new Error('abstract "getClientRect" method call')}_transformedRect(D,j){const z=[{x:D.x,y:D.y},{x:D.x+D.width,y:D.y},{x:D.x+D.width,y:D.y+D.height},{x:D.x,y:D.y+D.height}];let G=1/0,ee=1/0,ne=-1/0,ue=-1/0;const X=this.getAbsoluteTransform(j);return z.forEach(function(W){const te=X.point(W);G===void 0&&(G=ne=te.x,ee=ue=te.y),G=Math.min(G,te.x),ee=Math.min(ee,te.y),ne=Math.max(ne,te.x),ue=Math.max(ue,te.y)}),{x:G,y:ee,width:ne-G,height:ue-ee}}_drawCachedSceneCanvas(D){D.save(),D._applyOpacity(this),D._applyGlobalCompositeOperation(this);const j=this._getCanvasCache();D.translate(j.x,j.y);const z=this._getCachedSceneCanvas(),G=z.pixelRatio;D.drawImage(z._canvas,0,0,z.width/G,z.height/G),D.restore()}_drawCachedHitCanvas(D){const j=this._getCanvasCache(),z=j.hit;D.save(),D.translate(j.x,j.y),D.drawImage(z._canvas,0,0,z.width/z.pixelRatio,z.height/z.pixelRatio),D.restore()}_getCachedSceneCanvas(){let D=this.filters(),j=this._getCanvasCache(),z=j.scene,G=j.filter,ee=G.getContext(),ne,ue,X,W;if(D){if(!this._filterUpToDate){const te=z.pixelRatio;G.setSize(z.width/z.pixelRatio,z.height/z.pixelRatio);try{for(ne=D.length,ee.clear(),ee.drawImage(z._canvas,0,0,z.getWidth()/te,z.getHeight()/te),ue=ee.getImageData(0,0,G.getWidth(),G.getHeight()),X=0;X<ne;X++){if(W=D[X],typeof W!="function"){e.Util.error("Filter should be type of function, but got "+typeof W+" instead. Please check correct filters");continue}W.call(this,ue),ee.putImageData(ue,0,0)}}catch(q){e.Util.error("Unable to apply filter. "+q.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return G}return z}on(D,j){if(this._cache&&this._cache.delete(a),arguments.length===3)return this._delegate.apply(this,arguments);let z=D.split(x),G=z.length,ee,ne,ue,X,W;for(ee=0;ee<G;ee++)ne=z[ee],ue=ne.split("."),X=ue[0],W=ue[1]||"",this.eventListeners[X]||(this.eventListeners[X]=[]),this.eventListeners[X].push({name:W,handler:j});return this}off(D,j){let z=(D||"").split(x),G=z.length,ee,ne,ue,X,W,te;if(this._cache&&this._cache.delete(a),!D)for(ne in this.eventListeners)this._off(ne);for(ee=0;ee<G;ee++)if(ue=z[ee],X=ue.split("."),W=X[0],te=X[1],W)this.eventListeners[W]&&this._off(W,te,j);else for(ne in this.eventListeners)this._off(ne,te,j);return this}dispatchEvent(D){const j={target:this,type:D.type,evt:D};return this.fire(D.type,j),this}addEventListener(D,j){return this.on(D,function(z){j.call(this,z.evt)}),this}removeEventListener(D){return this.off(D),this}_delegate(D,j,z){const G=this;this.on(D,function(ee){const ne=ee.target.findAncestors(j,!0,G);for(let ue=0;ue<ne.length;ue++)ee=e.Util.cloneObject(ee),ee.currentTarget=ne[ue],z.call(ne[ue],ee)})}remove(){return this.isDragging()&&this.stopDrag(),i.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(w),this._clearSelfAndDescendantCache(R),this._clearSelfAndDescendantCache(p)}_remove(){this._clearCaches();const D=this.getParent();D&&D.children&&(D.children.splice(this.index,1),D._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(D){const j="get"+e.Util._capitalize(D);return e.Util._isFunction(this[j])?this[j]():this.attrs[D]}getAncestors(){let D=this.getParent(),j=[];for(;D;)j.push(D),D=D.getParent();return j}getAttrs(){return this.attrs||{}}setAttrs(D){return this._batchTransformChanges(()=>{let j,z;if(!D)return this;for(j in D)j!==d&&(z=b+e.Util._capitalize(j),e.Util._isFunction(this[z])?this[z](D[j]):this._setAttr(j,D[j]))}),this}isListening(){return this._getCache(p,this._isListening)}_isListening(D){if(!this.listening())return!1;const z=this.getParent();return z&&z!==D&&this!==D?z._isListening(D):!0}isVisible(){return this._getCache(R,this._isVisible)}_isVisible(D){if(!this.visible())return!1;const z=this.getParent();return z&&z!==D&&this!==D?z._isVisible(D):!0}shouldDrawHit(D,j=!1){if(D)return this._isVisible(D)&&this._isListening(D);const z=this.getLayer();let G=!1;i.DD._dragElements.forEach(ne=>{ne.dragStatus==="dragging"&&(ne.node.nodeType==="Stage"||ne.node.getLayer()===z)&&(G=!0)});const ee=!j&&!r.Konva.hitOnDragEnabled&&(G||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!ee}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let D=this.getDepth(),j=this,z=0,G,ee,ne,ue;function X(te){for(G=[],ee=te.length,ne=0;ne<ee;ne++)ue=te[ne],z++,ue.nodeType!==y&&(G=G.concat(ue.getChildren().slice())),ue._id===j._id&&(ne=ee);G.length>0&&G[0].getDepth()<=D&&X(G)}const W=this.getStage();return j.nodeType!==C&&W&&X(W.getChildren()),z}getDepth(){let D=0,j=this.parent;for(;j;)D++,j=j.parent;return D}_batchTransformChanges(D){this._batchingTransformChange=!0,D(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(S),this._clearSelfAndDescendantCache(u)),this._needClearTransformCache=!1}setPosition(D){return this._batchTransformChanges(()=>{this.x(D.x),this.y(D.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const D=this.getStage();if(!D)return null;const j=D.getPointerPosition();if(!j)return null;const z=this.getAbsoluteTransform().copy();return z.invert(),z.point(j)}getAbsolutePosition(D){let j=!1,z=this.parent;for(;z;){if(z.isCached()){j=!0;break}z=z.parent}j&&!D&&(D=!0);const G=this.getAbsoluteTransform(D).getMatrix(),ee=new e.Transform,ne=this.offset();return ee.m=G.slice(),ee.translate(ne.x,ne.y),ee.getTranslation()}setAbsolutePosition(D){const{x:j,y:z,...G}=this._clearTransform();this.attrs.x=j,this.attrs.y=z,this._clearCache(S);const ee=this._getAbsoluteTransform().copy();return ee.invert(),ee.translate(D.x,D.y),D={x:this.attrs.x+ee.getTranslation().x,y:this.attrs.y+ee.getTranslation().y},this._setTransform(G),this.setPosition({x:D.x,y:D.y}),this._clearCache(S),this._clearSelfAndDescendantCache(u),this}_setTransform(D){let j;for(j in D)this.attrs[j]=D[j]}_clearTransform(){const D={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,D}move(D){let j=D.x,z=D.y,G=this.x(),ee=this.y();return j!==void 0&&(G+=j),z!==void 0&&(ee+=z),this.setPosition({x:G,y:ee}),this}_eachAncestorReverse(D,j){let z=[],G=this.getParent(),ee,ne;if(!(j&&j._id===this._id)){for(z.unshift(this);G&&(!j||G._id!==j._id);)z.unshift(G),G=G.parent;for(ee=z.length,ne=0;ne<ee;ne++)D(z[ne])}}rotate(D){return this.rotation(this.rotation()+D),this}moveToTop(){if(!this.parent)return e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const D=this.index,j=this.parent.getChildren().length;return D<j-1?(this.parent.children.splice(D,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return e.Util.warn("Node has no parent. moveUp function is ignored."),!1;const D=this.index,j=this.parent.getChildren().length;return D<j-1?(this.parent.children.splice(D,1),this.parent.children.splice(D+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return e.Util.warn("Node has no parent. moveDown function is ignored."),!1;const D=this.index;return D>0?(this.parent.children.splice(D,1),this.parent.children.splice(D-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const D=this.index;return D>0?(this.parent.children.splice(D,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(D){if(!this.parent)return e.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(D<0||D>=this.parent.children.length)&&e.Util.warn("Unexpected value "+D+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const j=this.index;return this.parent.children.splice(j,1),this.parent.children.splice(D,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let D=this.opacity();const j=this.getParent();return j&&!j._isUnderCache&&(D*=j.getAbsoluteOpacity()),D}moveTo(D){return this.getParent()!==D&&(this._remove(),D.add(this)),this}toObject(){let D=this.getAttrs(),j,z,G,ee,ne;const ue={attrs:{},className:this.getClassName()};for(j in D)z=D[j],ne=e.Util.isObject(z)&&!e.Util._isPlainObject(z)&&!e.Util._isArray(z),!ne&&(G=typeof this[j]=="function"&&this[j],delete D[j],ee=G?G.call(this):null,D[j]=z,ee!==z&&(ue.attrs[j]=z));return e.Util._prepareToStringify(ue)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(D,j,z){const G=[];j&&this._isMatch(D)&&G.push(this);let ee=this.parent;for(;ee;){if(ee===z)return G;ee._isMatch(D)&&G.push(ee),ee=ee.parent}return G}isAncestorOf(D){return!1}findAncestor(D,j,z){return this.findAncestors(D,j,z)[0]}_isMatch(D){if(!D)return!1;if(typeof D=="function")return D(this);let j=D.replace(/ /g,"").split(","),z=j.length,G,ee;for(G=0;G<z;G++)if(ee=j[G],e.Util.isValidSelector(ee)||(e.Util.warn('Selector "'+ee+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),e.Util.warn("Konva is awesome, right?")),ee.charAt(0)==="#"){if(this.id()===ee.slice(1))return!0}else if(ee.charAt(0)==="."){if(this.hasName(ee.slice(1)))return!0}else if(this.className===ee||this.nodeType===ee)return!0;return!1}getLayer(){const D=this.getParent();return D?D.getLayer():null}getStage(){return this._getCache(w,this._getStage)}_getStage(){const D=this.getParent();return D?D.getStage():null}fire(D,j={},z){return j.target=j.target||this,z?this._fireAndBubble(D,j):this._fire(D,j),this}getAbsoluteTransform(D){return D?this._getAbsoluteTransform(D):this._getCache(u,this._getAbsoluteTransform)}_getAbsoluteTransform(D){let j;if(D)return j=new e.Transform,this._eachAncestorReverse(function(z){const G=z.transformsEnabled();G==="all"?j.multiply(z.getTransform()):G==="position"&&j.translate(z.x()-z.offsetX(),z.y()-z.offsetY())},D),j;{j=this._cache.get(u)||new e.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(j):j.reset();const z=this.transformsEnabled();if(z==="all")j.multiply(this.getTransform());else if(z==="position"){const G=this.attrs.x||0,ee=this.attrs.y||0,ne=this.attrs.offsetX||0,ue=this.attrs.offsetY||0;j.translate(G-ne,ee-ue)}return j.dirty=!1,j}}getAbsoluteScale(D){let j=this;for(;j;)j._isUnderCache&&(D=j),j=j.getParent();const G=this.getAbsoluteTransform(D).decompose();return{x:G.scaleX,y:G.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(S,this._getTransform)}_getTransform(){var D,j;const z=this._cache.get(S)||new e.Transform;z.reset();const G=this.x(),ee=this.y(),ne=r.Konva.getAngle(this.rotation()),ue=(D=this.attrs.scaleX)!==null&&D!==void 0?D:1,X=(j=this.attrs.scaleY)!==null&&j!==void 0?j:1,W=this.attrs.skewX||0,te=this.attrs.skewY||0,q=this.attrs.offsetX||0,J=this.attrs.offsetY||0;return(G!==0||ee!==0)&&z.translate(G,ee),ne!==0&&z.rotate(ne),(W!==0||te!==0)&&z.skew(W,te),(ue!==1||X!==1)&&z.scale(ue,X),(q!==0||J!==0)&&z.translate(-1*q,-1*J),z.dirty=!1,z}clone(D){let j=e.Util.cloneObject(this.attrs),z,G,ee,ne,ue;for(z in D)j[z]=D[z];const X=new this.constructor(j);for(z in this.eventListeners)for(G=this.eventListeners[z],ee=G.length,ne=0;ne<ee;ne++)ue=G[ne],ue.name.indexOf(h)<0&&(X.eventListeners[z]||(X.eventListeners[z]=[]),X.eventListeners[z].push(ue));return X}_toKonvaCanvas(D){D=D||{};const j=this.getClientRect(),z=this.getStage(),G=D.x!==void 0?D.x:Math.floor(j.x),ee=D.y!==void 0?D.y:Math.floor(j.y),ne=D.pixelRatio||1,ue=new n.SceneCanvas({width:D.width||Math.ceil(j.width)||(z?z.width():0),height:D.height||Math.ceil(j.height)||(z?z.height():0),pixelRatio:ne}),X=ue.getContext(),W=new n.SceneCanvas({width:ue.width/ue.pixelRatio+Math.abs(G),height:ue.height/ue.pixelRatio+Math.abs(ee),pixelRatio:ue.pixelRatio});return D.imageSmoothingEnabled===!1&&(X._context.imageSmoothingEnabled=!1),X.save(),(G||ee)&&X.translate(-1*G,-1*ee),this.drawScene(ue,void 0,W),X.restore(),ue}toCanvas(D){return this._toKonvaCanvas(D)._canvas}toDataURL(D){D=D||{};const j=D.mimeType||null,z=D.quality||null,G=this._toKonvaCanvas(D).toDataURL(j,z);return D.callback&&D.callback(G),G}toImage(D){return new Promise((j,z)=>{try{const G=D==null?void 0:D.callback;G&&delete D.callback,e.Util._urlToImage(this.toDataURL(D),function(ee){j(ee),G==null||G(ee)})}catch(G){z(G)}})}toBlob(D){return new Promise((j,z)=>{try{const G=D==null?void 0:D.callback;G&&delete D.callback,this.toCanvas(D).toBlob(ee=>{j(ee),G==null||G(ee)},D==null?void 0:D.mimeType,D==null?void 0:D.quality)}catch(G){z(G)}})}setSize(D){return this.width(D.width),this.height(D.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(D,j,z){let G=this.eventListeners[D],ee,ne,ue;for(ee=0;ee<G.length;ee++)if(ne=G[ee].name,ue=G[ee].handler,(ne!=="konva"||j==="konva")&&(!j||ne===j)&&(!z||z===ue)){if(G.splice(ee,1),G.length===0){delete this.eventListeners[D];break}ee--}}_fireChangeEvent(D,j,z){this._fire(D+f,{oldVal:j,newVal:z})}addName(D){if(!this.hasName(D)){const j=this.name(),z=j?j+" "+D:D;this.name(z)}return this}hasName(D){if(!D)return!1;const j=this.name();return j?(j||"").split(/\s/g).indexOf(D)!==-1:!1}removeName(D){const j=(this.name()||"").split(/\s/g),z=j.indexOf(D);return z!==-1&&(j.splice(z,1),this.name(j.join(" "))),this}setAttr(D,j){const z=this[b+e.Util._capitalize(D)];return e.Util._isFunction(z)?z.call(this,j):this._setAttr(D,j),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const D=this.getLayer()||this.getStage();D==null||D.batchDraw()}}_setAttr(D,j){const z=this.attrs[D];z===j&&!e.Util.isObject(j)||(j==null?delete this.attrs[D]:this.attrs[D]=j,this._shouldFireChangeEvents&&this._fireChangeEvent(D,z,j),this._requestDraw())}_setComponentAttr(D,j,z){let G;z!==void 0&&(G=this.attrs[D],G||(this.attrs[D]=this.getAttr(D)),this.attrs[D][j]=z,this._fireChangeEvent(D,G,z))}_fireAndBubble(D,j,z){if(j&&this.nodeType===y&&(j.target=this),!((D===m||D===g)&&(z&&(this===z||this.isAncestorOf&&this.isAncestorOf(z))||this.nodeType==="Stage"&&!z))){this._fire(D,j);const ee=(D===m||D===g)&&z&&z.isAncestorOf&&z.isAncestorOf(this)&&!z.isAncestorOf(this.parent);(j&&!j.cancelBubble||!j)&&this.parent&&this.parent.isListening()&&!ee&&(z&&z.parent?this._fireAndBubble.call(this.parent,D,j,z):this._fireAndBubble.call(this.parent,D,j))}}_getProtoListeners(D){var j,z,G;const ee=(j=this._cache.get(a))!==null&&j!==void 0?j:{};let ne=ee==null?void 0:ee[D];if(ne===void 0){ne=[];let ue=Object.getPrototypeOf(this);for(;ue;){const X=(G=(z=ue.eventListeners)===null||z===void 0?void 0:z[D])!==null&&G!==void 0?G:[];ne.push(...X),ue=Object.getPrototypeOf(ue)}ee[D]=ne,this._cache.set(a,ee)}return ne}_fire(D,j){j=j||{},j.currentTarget=this,j.type=D;const z=this._getProtoListeners(D);if(z)for(var G=0;G<z.length;G++)z[G].handler.call(this,j);const ee=this.eventListeners[D];if(ee)for(var G=0;G<ee.length;G++)ee[G].handler.call(this,j)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(D){const j=D?D.pointerId:void 0,z=this.getStage(),G=this.getAbsolutePosition();if(!z)return;const ee=z._getPointerById(j)||z._changedPointerPositions[0]||G;i.DD._dragElements.set(this._id,{node:this,startPointerPos:ee,offset:{x:ee.x-G.x,y:ee.y-G.y},dragStatus:"ready",pointerId:j})}startDrag(D,j=!0){i.DD._dragElements.has(this._id)||this._createDragElement(D);const z=i.DD._dragElements.get(this._id);z.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:D&&D.evt},j)}_setDragPosition(D,j){const z=this.getStage()._getPointerById(j.pointerId);if(!z)return;let G={x:z.x-j.offset.x,y:z.y-j.offset.y};const ee=this.dragBoundFunc();if(ee!==void 0){const ne=ee.call(this,G,D);ne?G=ne:e.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==G.x||this._lastPos.y!==G.y)&&(this.setAbsolutePosition(G),this._requestDraw()),this._lastPos=G}stopDrag(D){const j=i.DD._dragElements.get(this._id);j&&(j.dragStatus="stopped"),i.DD._endDragBefore(D),i.DD._endDragAfter(D)}setDraggable(D){this._setAttr("draggable",D),this._dragChange()}isDragging(){const D=i.DD._dragElements.get(this._id);return D?D.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(D){if(!(!(D.evt.button!==void 0)||r.Konva.dragButtons.indexOf(D.evt.button)>=0)||this.isDragging())return;let G=!1;i.DD._dragElements.forEach(ee=>{this.isAncestorOf(ee.node)&&(G=!0)}),G||this._createDragElement(D)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const j=i.DD._dragElements.get(this._id),z=j&&j.dragStatus==="dragging",G=j&&j.dragStatus==="ready";z?this.stopDrag():G&&i.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(D={x:0,y:0}){const j=this.getStage();if(!j)return!1;const z={x:-D.x,y:-D.y,width:j.width()+2*D.x,height:j.height()+2*D.y};return e.Util.haveIntersection(z,this.getClientRect())}static create(D,j){return e.Util._isString(D)&&(D=JSON.parse(D)),this._createNode(D,j)}static _createNode(D,j){let z=M.prototype.getClassName.call(D),G=D.children,ee,ne,ue;j&&(D.attrs.container=j),r.Konva[z]||(e.Util.warn('Can not find a node with class name "'+z+'". Fallback to "Shape".'),z="Shape");const X=r.Konva[z];if(ee=new X(D.attrs),G)for(ne=G.length,ue=0;ue<ne;ue++)ee.add(M._createNode(G[ue]));return ee}}mA.Node=M,M.prototype.nodeType="Node",M.prototype._attrsAffectingSize=[],M.prototype.eventListeners={},M.prototype.on.call(M.prototype,I,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(S),this._clearSelfAndDescendantCache(u)}),M.prototype.on.call(M.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(R)}),M.prototype.on.call(M.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(p)}),M.prototype.on.call(M.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o)});const L=t.Factory.addGetterSetter;return L(M,"zIndex"),L(M,"absolutePosition"),L(M,"position"),L(M,"x",0,(0,s.getNumberValidator)()),L(M,"y",0,(0,s.getNumberValidator)()),L(M,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),L(M,"opacity",1,(0,s.getNumberValidator)()),L(M,"name","",(0,s.getStringValidator)()),L(M,"id","",(0,s.getStringValidator)()),L(M,"rotation",0,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(M,"scale",["x","y"]),L(M,"scaleX",1,(0,s.getNumberValidator)()),L(M,"scaleY",1,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(M,"skew",["x","y"]),L(M,"skewX",0,(0,s.getNumberValidator)()),L(M,"skewY",0,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(M,"offset",["x","y"]),L(M,"offsetX",0,(0,s.getNumberValidator)()),L(M,"offsetY",0,(0,s.getNumberValidator)()),L(M,"dragDistance",void 0,(0,s.getNumberValidator)()),L(M,"width",0,(0,s.getNumberValidator)()),L(M,"height",0,(0,s.getNumberValidator)()),L(M,"listening",!0,(0,s.getBooleanValidator)()),L(M,"preventDefault",!0,(0,s.getBooleanValidator)()),L(M,"filters",void 0,function(V){return this._filterUpToDate=!1,V}),L(M,"visible",!0,(0,s.getBooleanValidator)()),L(M,"transformsEnabled","all",(0,s.getStringValidator)()),L(M,"size"),L(M,"dragBoundFunc"),L(M,"draggable",!1,(0,s.getBooleanValidator)()),t.Factory.backCompat(M,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),mA}var gA={},xle;function DM(){if(xle)return gA;xle=1,Object.defineProperty(gA,"__esModule",{value:!0}),gA.Container=void 0;const e=Yr(),t=wa(),n=Zr();let r=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){if(!s)return this.children||[];const o=this.children||[],a=[];return o.forEach(function(u){s(u)&&a.push(u)}),a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(let a=0;a<s.length;a++)this.add(s[a]);return this}const o=s[0];return o.getParent()?(o.moveTo(this),this):(this._validateAdd(o),o.index=this.getChildren().length,o.parent=this,o._clearCaches(),this.getChildren().push(o),this._fire("add",{child:o}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){const o=this._generalFind(s,!0);return o.length>0?o[0]:void 0}_generalFind(s,o){const a=[];return this._descendants(u=>{const l=u._isMatch(s);return l&&a.push(u),!!(l&&o)}),a}_descendants(s){let o=!1;const a=this.getChildren();for(const u of a){if(o=s(u),o)return!0;if(u.hasChildren()&&(o=u._descendants(s),o))return!0}return!1}toObject(){const s=t.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(o=>{s.children.push(o.toObject())}),s}isAncestorOf(s){let o=s.getParent();for(;o;){if(o._id===this._id)return!0;o=o.getParent()}return!1}clone(s){const o=t.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(a){o.add(a.clone())}),o}getAllIntersections(s){const o=[];return this.find("Shape").forEach(a=>{a.isVisible()&&a.intersects(s)&&o.push(a)}),o}_clearSelfAndDescendantCache(s){var o;super._clearSelfAndDescendantCache(s),!this.isCached()&&((o=this.children)===null||o===void 0||o.forEach(function(a){a._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(o,a){o.index=a}),this._requestDraw()}drawScene(s,o,a){const u=this.getLayer(),l=s||u&&u.getCanvas(),c=l&&l.getContext(),f=this._getCanvasCache(),d=f&&f.scene,h=l&&l.isCache;if(!this.isVisible()&&!h)return this;if(d){c.save();const p=this.getAbsoluteTransform(o).getMatrix();c.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,o,a);return this}drawHit(s,o){if(!this.shouldDrawHit(o))return this;const a=this.getLayer(),u=s||a&&a.hitCanvas,l=u&&u.getContext(),c=this._getCanvasCache();if(c&&c.hit){l.save();const d=this.getAbsoluteTransform(o).getMatrix();l.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",u,o);return this}_drawChildren(s,o,a,u){var l;const c=o&&o.getContext(),f=this.clipWidth(),d=this.clipHeight(),h=this.clipFunc(),p=typeof f=="number"&&typeof d=="number"||h,m=a===this;if(p){c.save();const b=this.getAbsoluteTransform(a);let y=b.getMatrix();c.transform(y[0],y[1],y[2],y[3],y[4],y[5]),c.beginPath();let x;if(h)x=h.call(this,c,this);else{const w=this.clipX(),S=this.clipY();c.rect(w||0,S||0,f,d)}c.clip.apply(c,x),y=b.copy().invert().getMatrix(),c.transform(y[0],y[1],y[2],y[3],y[4],y[5])}const g=!m&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";g&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(b){b[s](o,a,u)}),g&&c.restore(),p&&c.restore()}getClientRect(s={}){var o;const a=s.skipTransform,u=s.relativeTo;let l,c,f,d,h={x:1/0,y:1/0,width:0,height:0};const p=this;(o=this.children)===null||o===void 0||o.forEach(function(b){if(!b.visible())return;const y=b.getClientRect({relativeTo:p,skipShadow:s.skipShadow,skipStroke:s.skipStroke});y.width===0&&y.height===0||(l===void 0?(l=y.x,c=y.y,f=y.x+y.width,d=y.y+y.height):(l=Math.min(l,y.x),c=Math.min(c,y.y),f=Math.max(f,y.x+y.width),d=Math.max(d,y.y+y.height)))});const m=this.find("Shape");let g=!1;for(let b=0;b<m.length;b++)if(m[b]._isVisible(this)){g=!0;break}return g&&l!==void 0?h={x:l,y:c,width:f-l,height:d-c}:h={x:0,y:0,width:0,height:0},a?h:this._transformedRect(h,u)}};return gA.Container=r,e.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(r,"clipX",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipY",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipWidth",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipHeight",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipFunc"),gA}var xB={},gv={},_le;function WSe(){if(_le)return gv;_le=1,Object.defineProperty(gv,"__esModule",{value:!0}),gv.getCapturedShape=r,gv.createEvent=i,gv.hasPointerCapture=s,gv.setPointerCapture=o,gv.releaseCapture=a;const e=Vr(),t=new Map,n=e.Konva._global.PointerEvent!==void 0;function r(u){return t.get(u)}function i(u){return{evt:u,pointerId:u.pointerId}}function s(u,l){return t.get(u)===l}function o(u,l){a(u),l.getStage()&&(t.set(u,l),n&&l._fire("gotpointercapture",i(new PointerEvent("gotpointercapture"))))}function a(u,l){const c=t.get(u);if(!c)return;const f=c.getStage();f&&f.content,t.delete(u),n&&c._fire("lostpointercapture",i(new PointerEvent("lostpointercapture")))}return gv}var wle;function Zvt(){return wle||(wle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=Qo(),n=Yr(),r=DM(),i=Vr(),s=NM(),o=nX(),a=Vr(),u=WSe(),l="Stage",c="string",f="px",d="mouseout",h="mouseleave",p="mouseover",m="mouseenter",g="mousemove",b="mousedown",y="mouseup",x="pointermove",w="pointerdown",S="pointerup",C="pointercancel",R="lostpointercapture",I="pointerout",O="pointerleave",M="pointerover",L="pointerenter",V="contextmenu",D="touchstart",j="touchend",z="touchmove",G="touchcancel",ee="wheel",ne=5,ue=[[m,"_pointerenter"],[b,"_pointerdown"],[g,"_pointermove"],[y,"_pointerup"],[h,"_pointerleave"],[D,"_pointerdown"],[z,"_pointermove"],[j,"_pointerup"],[G,"_pointercancel"],[p,"_pointerover"],[ee,"_wheel"],[V,"_contextmenu"],[w,"_pointerdown"],[x,"_pointermove"],[S,"_pointerup"],[C,"_pointercancel"],[R,"_lostpointercapture"]],X={mouse:{[I]:d,[O]:h,[M]:p,[L]:m,[x]:g,[w]:b,[S]:y,[C]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[I]:"touchout",[O]:"touchleave",[M]:"touchover",[L]:"touchenter",[x]:z,[w]:D,[S]:j,[C]:G,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[I]:I,[O]:O,[M]:M,[L]:L,[x]:x,[w]:w,[S]:S,[C]:C,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},W=de=>de.indexOf("pointer")>=0?"pointer":de.indexOf("touch")>=0?"touch":"mouse",te=de=>{const ce=W(de);if(ce==="pointer")return i.Konva.pointerEventsEnabled&&X.pointer;if(ce==="touch")return X.touch;if(ce==="mouse")return X.mouse};function q(de={}){return(de.clipFunc||de.clipWidth||de.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),de}const J="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class oe extends r.Container{constructor(ce){super(q(ce)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{q(this.attrs)}),this._checkVisibility()}_validateAdd(ce){const pe=ce.getType()==="Layer",Ee=ce.getType()==="FastLayer";pe||Ee||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const ce=this.visible()?"":"none";this.content.style.display=ce}setContainer(ce){if(typeof ce===c){if(ce.charAt(0)==="."){const Ee=ce.slice(1);ce=document.getElementsByClassName(Ee)[0]}else{var pe;ce.charAt(0)!=="#"?pe=ce:pe=ce.slice(1),ce=document.getElementById(pe)}if(!ce)throw"Can not find container in document with id "+pe}return this._setAttr("container",ce),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),ce.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const ce=this.children,pe=ce.length;for(let Ee=0;Ee<pe;Ee++)ce[Ee].clear();return this}clone(ce){return ce||(ce={}),ce.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,ce)}destroy(){super.destroy();const ce=this.content;ce&&t.Util._isInDocument(ce)&&this.container().removeChild(ce);const pe=e.stages.indexOf(this);return pe>-1&&e.stages.splice(pe,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const ce=this._pointerPositions[0]||this._changedPointerPositions[0];return ce?{x:ce.x,y:ce.y}:(t.Util.warn(J),null)}_getPointerById(ce){return this._pointerPositions.find(pe=>pe.id===ce)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(ce){ce=ce||{},ce.x=ce.x||0,ce.y=ce.y||0,ce.width=ce.width||this.width(),ce.height=ce.height||this.height();const pe=new s.SceneCanvas({width:ce.width,height:ce.height,pixelRatio:ce.pixelRatio||1}),Ee=pe.getContext()._context,Ae=this.children;return(ce.x||ce.y)&&Ee.translate(-1*ce.x,-1*ce.y),Ae.forEach(function(ge){if(!ge.isVisible())return;const me=ge._toKonvaCanvas(ce);Ee.drawImage(me._canvas,ce.x,ce.y,me.getWidth()/me.getPixelRatio(),me.getHeight()/me.getPixelRatio())}),pe}getIntersection(ce){if(!ce)return null;const pe=this.children,Ee=pe.length,Ae=Ee-1;for(let ge=Ae;ge>=0;ge--){const me=pe[ge].getIntersection(ce);if(me)return me}return null}_resizeDOM(){const ce=this.width(),pe=this.height();this.content&&(this.content.style.width=ce+f,this.content.style.height=pe+f),this.bufferCanvas.setSize(ce,pe),this.bufferHitCanvas.setSize(ce,pe),this.children.forEach(Ee=>{Ee.setSize({width:ce,height:pe}),Ee.draw()})}add(ce,...pe){if(arguments.length>1){for(let Ae=0;Ae<arguments.length;Ae++)this.add(arguments[Ae]);return this}super.add(ce);const Ee=this.children.length;return Ee>ne&&t.Util.warn("The stage has "+Ee+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),ce.setSize({width:this.width(),height:this.height()}),ce.draw(),i.Konva.isBrowser&&this.content.appendChild(ce.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(ce){return u.hasPointerCapture(ce,this)}setPointerCapture(ce){u.setPointerCapture(ce,this)}releaseCapture(ce){u.releaseCapture(ce,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&ue.forEach(([ce,pe])=>{this.content.addEventListener(ce,Ee=>{this[pe](Ee)},{passive:!1})})}_pointerenter(ce){this.setPointersPositions(ce);const pe=te(ce.type);pe&&this._fire(pe.pointerenter,{evt:ce,target:this,currentTarget:this})}_pointerover(ce){this.setPointersPositions(ce);const pe=te(ce.type);pe&&this._fire(pe.pointerover,{evt:ce,target:this,currentTarget:this})}_getTargetShape(ce){let pe=this[ce+"targetShape"];return pe&&!pe.getStage()&&(pe=null),pe}_pointerleave(ce){const pe=te(ce.type),Ee=W(ce.type);if(!pe)return;this.setPointersPositions(ce);const Ae=this._getTargetShape(Ee),ge=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;Ae&&ge?(Ae._fireAndBubble(pe.pointerout,{evt:ce}),Ae._fireAndBubble(pe.pointerleave,{evt:ce}),this._fire(pe.pointerleave,{evt:ce,target:this,currentTarget:this}),this[Ee+"targetShape"]=null):ge&&(this._fire(pe.pointerleave,{evt:ce,target:this,currentTarget:this}),this._fire(pe.pointerout,{evt:ce,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(ce){const pe=te(ce.type),Ee=W(ce.type);if(!pe)return;this.setPointersPositions(ce);let Ae=!1;this._changedPointerPositions.forEach(ge=>{const me=this.getIntersection(ge);if(o.DD.justDragged=!1,i.Konva["_"+Ee+"ListenClick"]=!0,!me||!me.isListening()){this[Ee+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&me.setPointerCapture(ge.id),this[Ee+"ClickStartShape"]=me,me._fireAndBubble(pe.pointerdown,{evt:ce,pointerId:ge.id}),Ae=!0;const Oe=ce.type.indexOf("touch")>=0;me.preventDefault()&&ce.cancelable&&Oe&&ce.preventDefault()}),Ae||this._fire(pe.pointerdown,{evt:ce,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(ce){const pe=te(ce.type),Ee=W(ce.type);if(!pe||(i.Konva.isDragging()&&o.DD.node.preventDefault()&&ce.cancelable&&ce.preventDefault(),this.setPointersPositions(ce),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const ge={};let me=!1;const Oe=this._getTargetShape(Ee);this._changedPointerPositions.forEach(Me=>{const Ye=u.getCapturedShape(Me.id)||this.getIntersection(Me),lt=Me.id,We={evt:ce,pointerId:lt},nt=Oe!==Ye;if(nt&&Oe&&(Oe._fireAndBubble(pe.pointerout,{...We},Ye),Oe._fireAndBubble(pe.pointerleave,{...We},Ye)),Ye){if(ge[Ye._id])return;ge[Ye._id]=!0}Ye&&Ye.isListening()?(me=!0,nt&&(Ye._fireAndBubble(pe.pointerover,{...We},Oe),Ye._fireAndBubble(pe.pointerenter,{...We},Oe),this[Ee+"targetShape"]=Ye),Ye._fireAndBubble(pe.pointermove,{...We})):Oe&&(this._fire(pe.pointerover,{evt:ce,target:this,currentTarget:this,pointerId:lt}),this[Ee+"targetShape"]=null)}),me||this._fire(pe.pointermove,{evt:ce,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(ce){const pe=te(ce.type),Ee=W(ce.type);if(!pe)return;this.setPointersPositions(ce);const Ae=this[Ee+"ClickStartShape"],ge=this[Ee+"ClickEndShape"],me={};let Oe=!1;this._changedPointerPositions.forEach(Me=>{const Ye=u.getCapturedShape(Me.id)||this.getIntersection(Me);if(Ye){if(Ye.releaseCapture(Me.id),me[Ye._id])return;me[Ye._id]=!0}const lt=Me.id,We={evt:ce,pointerId:lt};let nt=!1;i.Konva["_"+Ee+"InDblClickWindow"]?(nt=!0,clearTimeout(this[Ee+"DblTimeout"])):o.DD.justDragged||(i.Konva["_"+Ee+"InDblClickWindow"]=!0,clearTimeout(this[Ee+"DblTimeout"])),this[Ee+"DblTimeout"]=setTimeout(function(){i.Konva["_"+Ee+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),Ye&&Ye.isListening()?(Oe=!0,this[Ee+"ClickEndShape"]=Ye,Ye._fireAndBubble(pe.pointerup,{...We}),i.Konva["_"+Ee+"ListenClick"]&&Ae&&Ae===Ye&&(Ye._fireAndBubble(pe.pointerclick,{...We}),nt&&ge&&ge===Ye&&Ye._fireAndBubble(pe.pointerdblclick,{...We}))):(this[Ee+"ClickEndShape"]=null,i.Konva["_"+Ee+"ListenClick"]&&this._fire(pe.pointerclick,{evt:ce,target:this,currentTarget:this,pointerId:lt}),nt&&this._fire(pe.pointerdblclick,{evt:ce,target:this,currentTarget:this,pointerId:lt}))}),Oe||this._fire(pe.pointerup,{evt:ce,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+Ee+"ListenClick"]=!1,ce.cancelable&&Ee!=="touch"&&Ee!=="pointer"&&ce.preventDefault()}_contextmenu(ce){this.setPointersPositions(ce);const pe=this.getIntersection(this.getPointerPosition());pe&&pe.isListening()?pe._fireAndBubble(V,{evt:ce}):this._fire(V,{evt:ce,target:this,currentTarget:this})}_wheel(ce){this.setPointersPositions(ce);const pe=this.getIntersection(this.getPointerPosition());pe&&pe.isListening()?pe._fireAndBubble(ee,{evt:ce}):this._fire(ee,{evt:ce,target:this,currentTarget:this})}_pointercancel(ce){this.setPointersPositions(ce);const pe=u.getCapturedShape(ce.pointerId)||this.getIntersection(this.getPointerPosition());pe&&pe._fireAndBubble(S,u.createEvent(ce)),u.releaseCapture(ce.pointerId)}_lostpointercapture(ce){u.releaseCapture(ce.pointerId)}setPointersPositions(ce){const pe=this._getContentPosition();let Ee=null,Ae=null;ce=ce||window.event,ce.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(ce.touches,ge=>{this._pointerPositions.push({id:ge.identifier,x:(ge.clientX-pe.left)/pe.scaleX,y:(ge.clientY-pe.top)/pe.scaleY})}),Array.prototype.forEach.call(ce.changedTouches||ce.touches,ge=>{this._changedPointerPositions.push({id:ge.identifier,x:(ge.clientX-pe.left)/pe.scaleX,y:(ge.clientY-pe.top)/pe.scaleY})})):(Ee=(ce.clientX-pe.left)/pe.scaleX,Ae=(ce.clientY-pe.top)/pe.scaleY,this.pointerPos={x:Ee,y:Ae},this._pointerPositions=[{x:Ee,y:Ae,id:t.Util._getFirstPointerId(ce)}],this._changedPointerPositions=[{x:Ee,y:Ae,id:t.Util._getFirstPointerId(ce)}])}_setPointerPosition(ce){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(ce)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const ce=this.content.getBoundingClientRect();return{top:ce.top,left:ce.left,scaleX:ce.width/this.content.clientWidth||1,scaleY:ce.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const ce=this.container();if(!ce)throw"Stage has no container. A container is required.";ce.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),ce.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(ce){ce.batchDraw()}),this}}e.Stage=oe,oe.prototype.nodeType=l,(0,a._registerNode)(oe),n.Factory.addGetterSetter(oe,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(de=>{de.batchDraw()})})}(xB)),xB}var yA={},_B={},Ele;function qu(){return Ele||(Ele=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=Vr(),n=Qo(),r=Yr(),i=wa(),s=Zr(),o=Vr(),a=WSe(),u="hasShadow",l="shadowRGBA",c="patternImage",f="linearGradient",d="radialGradient";let h;function p(){return h||(h=n.Util.createCanvasElement().getContext("2d"),h)}e.shapes={};function m(O){const M=this.attrs.fillRule;M?O.fill(M):O.fill()}function g(O){O.stroke()}function b(O){const M=this.attrs.fillRule;M?O.fill(M):O.fill()}function y(O){O.stroke()}function x(){this._clearCache(u)}function w(){this._clearCache(l)}function S(){this._clearCache(c)}function C(){this._clearCache(f)}function R(){this._clearCache(d)}class I extends i.Node{constructor(M){super(M);let L;for(;L=n.Util.getRandomColor(),!(L&&!(L in e.shapes)););this.colorKey=L,e.shapes[L]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(u,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const L=p().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const V=new n.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(t.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const D=V.getMatrix(),j=typeof DOMMatrix>"u"?{a:D[0],b:D[1],c:D[2],d:D[3],e:D[4],f:D[5]}:new DOMMatrix(D);L.setTransform(j)}return L}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){const M=this.fillLinearGradientColorStops();if(M){const L=p(),V=this.fillLinearGradientStartPoint(),D=this.fillLinearGradientEndPoint(),j=L.createLinearGradient(V.x,V.y,D.x,D.y);for(let z=0;z<M.length;z+=2)j.addColorStop(M[z],M[z+1]);return j}}_getRadialGradient(){return this._getCache(d,this.__getRadialGradient)}__getRadialGradient(){const M=this.fillRadialGradientColorStops();if(M){const L=p(),V=this.fillRadialGradientStartPoint(),D=this.fillRadialGradientEndPoint(),j=L.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),D.x,D.y,this.fillRadialGradientEndRadius());for(let z=0;z<M.length;z+=2)j.addColorStop(M[z],M[z+1]);return j}}getShadowRGBA(){return this._getCache(l,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const M=n.Util.colorToRGBA(this.shadowColor());if(M)return"rgba("+M.r+","+M.g+","+M.b+","+M.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const M=this.hitStrokeWidth();return M==="auto"?this.hasStroke():this.strokeEnabled()&&!!M}intersects(M){const L=this.getStage();if(!L)return!1;const V=L.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(M.x),Math.round(M.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(M){var L;if(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0?L:!0))return!1;const D=M||this.hasFill(),j=this.hasStroke(),z=this.getAbsoluteOpacity()!==1;if(D&&j&&z)return!0;const G=this.hasShadow(),ee=this.shadowForStrokeEnabled();return!!(D&&j&&G&&ee)}setStrokeHitEnabled(M){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),M?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const M=this.size();return{x:this._centroid?-M.width/2:0,y:this._centroid?-M.height/2:0,width:M.width,height:M.height}}getClientRect(M={}){let L=!1,V=this.getParent();for(;V;){if(V.isCached()){L=!0;break}V=V.getParent()}const D=M.skipTransform,j=M.relativeTo||L&&this.getStage()||void 0,z=this.getSelfRect(),ee=!M.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,ne=z.width+ee,ue=z.height+ee,X=!M.skipShadow&&this.hasShadow(),W=X?this.shadowOffsetX():0,te=X?this.shadowOffsetY():0,q=ne+Math.abs(W),J=ue+Math.abs(te),oe=X&&this.shadowBlur()||0,de=q+oe*2,ce=J+oe*2,pe={width:de,height:ce,x:-(ee/2+oe)+Math.min(W,0)+z.x,y:-(ee/2+oe)+Math.min(te,0)+z.y};return D?pe:this._transformedRect(pe,j)}drawScene(M,L,V){const D=this.getLayer();let j=M||D.getCanvas(),z=j.getContext(),G=this._getCanvasCache(),ee=this.getSceneFunc(),ne=this.hasShadow(),ue,X;const W=j.isCache,te=L===this;if(!this.isVisible()&&!te)return this;if(G){z.save();const J=this.getAbsoluteTransform(L).getMatrix();return z.transform(J[0],J[1],J[2],J[3],J[4],J[5]),this._drawCachedSceneCanvas(z),z.restore(),this}if(!ee)return this;if(z.save(),this._useBufferCanvas()&&!W){ue=this.getStage();const J=V||ue.bufferCanvas;X=J.getContext(),X.clear(),X.save(),X._applyLineJoin(this);var q=this.getAbsoluteTransform(L).getMatrix();X.transform(q[0],q[1],q[2],q[3],q[4],q[5]),ee.call(this,X,this),X.restore();const oe=J.pixelRatio;ne&&z._applyShadow(this),z._applyOpacity(this),z._applyGlobalCompositeOperation(this),z.drawImage(J._canvas,0,0,J.width/oe,J.height/oe)}else{if(z._applyLineJoin(this),!te){var q=this.getAbsoluteTransform(L).getMatrix();z.transform(q[0],q[1],q[2],q[3],q[4],q[5]),z._applyOpacity(this),z._applyGlobalCompositeOperation(this)}ne&&z._applyShadow(this),ee.call(this,z,this)}return z.restore(),this}drawHit(M,L,V=!1){if(!this.shouldDrawHit(L,V))return this;const D=this.getLayer(),j=M||D.hitCanvas,z=j&&j.getContext(),G=this.hitFunc()||this.sceneFunc(),ee=this._getCanvasCache(),ne=ee&&ee.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),ne){z.save();const X=this.getAbsoluteTransform(L).getMatrix();return z.transform(X[0],X[1],X[2],X[3],X[4],X[5]),this._drawCachedHitCanvas(z),z.restore(),this}if(!G)return this;if(z.save(),z._applyLineJoin(this),!(this===L)){const X=this.getAbsoluteTransform(L).getMatrix();z.transform(X[0],X[1],X[2],X[3],X[4],X[5])}return G.call(this,z,this),z.restore(),this}drawHitFromCache(M=0){const L=this._getCanvasCache(),V=this._getCachedSceneCanvas(),D=L.hit,j=D.getContext(),z=D.getWidth(),G=D.getHeight();j.clear(),j.drawImage(V._canvas,0,0,z,G);try{const ee=j.getImageData(0,0,z,G),ne=ee.data,ue=ne.length,X=n.Util._hexToRgb(this.colorKey);for(let W=0;W<ue;W+=4)ne[W+3]>M?(ne[W]=X.r,ne[W+1]=X.g,ne[W+2]=X.b,ne[W+3]=255):ne[W+3]=0;j.putImageData(ee,0,0)}catch(ee){n.Util.error("Unable to draw hit graph from cached scene canvas. "+ee.message)}return this}hasPointerCapture(M){return a.hasPointerCapture(M,this)}setPointerCapture(M){a.setPointerCapture(M,this)}releaseCapture(M){a.releaseCapture(M,this)}}e.Shape=I,I.prototype._fillFunc=m,I.prototype._strokeFunc=g,I.prototype._fillFuncHit=b,I.prototype._strokeFuncHit=y,I.prototype._centroid=!1,I.prototype.nodeType="Shape",(0,o._registerNode)(I),I.prototype.eventListeners={},I.prototype.on.call(I.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),I.prototype.on.call(I.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",S),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",C),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",R),r.Factory.addGetterSetter(I,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(I,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(I,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(I,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(I,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(I,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(I,"lineJoin"),r.Factory.addGetterSetter(I,"lineCap"),r.Factory.addGetterSetter(I,"sceneFunc"),r.Factory.addGetterSetter(I,"hitFunc"),r.Factory.addGetterSetter(I,"dash"),r.Factory.addGetterSetter(I,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(I,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(I,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(I,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillPatternImage"),r.Factory.addGetterSetter(I,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(I,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(I,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(I,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(I,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(I,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(I,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(I,"fillEnabled",!0),r.Factory.addGetterSetter(I,"strokeEnabled",!0),r.Factory.addGetterSetter(I,"shadowEnabled",!0),r.Factory.addGetterSetter(I,"dashEnabled",!0),r.Factory.addGetterSetter(I,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(I,"fillPriority","color"),r.Factory.addComponentsGetterSetter(I,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(I,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(I,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(I,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(I,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(I,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(I,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(I,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(I,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(I,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(I,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(I,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(I,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(I,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(I,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(I,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(I,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(I,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(I,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(I,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(I,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(I,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(I,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(I,"fillPatternRotation",0),r.Factory.addGetterSetter(I,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(I,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(_B)),_B}var Sle;function GSe(){if(Sle)return yA;Sle=1,Object.defineProperty(yA,"__esModule",{value:!0}),yA.Layer=void 0;const e=Qo(),t=DM(),n=wa(),r=Yr(),i=NM(),s=Zr(),o=qu(),a=Vr(),u="#",l="beforeDraw",c="draw",f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],d=f.length;class h extends t.Container{constructor(m){super(m),this.canvas=new i.SceneCanvas,this.hitCanvas=new i.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(m){return this.getContext().clear(m),this.getHitCanvas().getContext().clear(m),this}setZIndex(m){super.setZIndex(m);const g=this.getStage();return g&&g.content&&(g.content.removeChild(this.getNativeCanvasElement()),m<g.children.length-1?g.content.insertBefore(this.getNativeCanvasElement(),g.children[m+1].getCanvas()._canvas):g.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const m=this.getStage();return m&&m.content&&(m.content.removeChild(this.getNativeCanvasElement()),m.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const g=this.getStage();return!g||!g.content?!1:(g.content.removeChild(this.getNativeCanvasElement()),this.index<g.children.length-1?g.content.insertBefore(this.getNativeCanvasElement(),g.children[this.index+1].getCanvas()._canvas):g.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const m=this.getStage();if(m){const g=m.children;m.content&&(m.content.removeChild(this.getNativeCanvasElement()),m.content.insertBefore(this.getNativeCanvasElement(),g[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const m=this.getStage();if(m){const g=m.children;m.content&&(m.content.removeChild(this.getNativeCanvasElement()),m.content.insertBefore(this.getNativeCanvasElement(),g[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const m=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),m&&m.parentNode&&e.Util._isInDocument(m)&&m.parentNode.removeChild(m),this}getStage(){return this.parent}setSize({width:m,height:g}){return this.canvas.setSize(m,g),this.hitCanvas.setSize(m,g),this._setSmoothEnabled(),this}_validateAdd(m){const g=m.getType();g!=="Group"&&g!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(m){return m=m||{},m.width=m.width||this.getWidth(),m.height=m.height||this.getHeight(),m.x=m.x!==void 0?m.x:this.x(),m.y=m.y!==void 0?m.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,m)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(m){if(!this.isListening()||!this.isVisible())return null;let g=1,b=!1;for(;;){for(let y=0;y<d;y++){const x=f[y],w=this._getIntersection({x:m.x+x.x*g,y:m.y+x.y*g}),S=w.shape;if(S)return S;if(b=!!w.antialiased,!w.antialiased)break}if(b)g+=1;else return null}}_getIntersection(m){const g=this.hitCanvas.pixelRatio,b=this.hitCanvas.context.getImageData(Math.round(m.x*g),Math.round(m.y*g),1,1).data,y=b[3];if(y===255){const x=e.Util._rgbToHex(b[0],b[1],b[2]),w=o.shapes[u+x];return w?{shape:w}:{antialiased:!0}}else if(y>0)return{antialiased:!0};return{}}drawScene(m,g){const b=this.getLayer(),y=m||b&&b.getCanvas();return this._fire(l,{node:this}),this.clearBeforeDraw()&&y.getContext().clear(),t.Container.prototype.drawScene.call(this,y,g),this._fire(c,{node:this}),this}drawHit(m,g){const b=this.getLayer(),y=m||b&&b.hitCanvas;return b&&b.clearBeforeDraw()&&b.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,y,g),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(m){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(m)}getHitGraphEnabled(m){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const m=this.parent;!!this.hitCanvas._canvas.parentNode?m.content.removeChild(this.hitCanvas._canvas):m.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return yA.Layer=h,h.prototype.nodeType="Layer",(0,a._registerNode)(h),r.Factory.addGetterSetter(h,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(h,"clearBeforeDraw",!0),r.Factory.addGetterSetter(h,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),yA}var vA={},Tle;function ebt(){if(Tle)return vA;Tle=1,Object.defineProperty(vA,"__esModule",{value:!0}),vA.FastLayer=void 0;const e=Qo(),t=GSe(),n=Vr();let r=class extends t.Layer{constructor(s){super(s),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return vA.FastLayer=r,r.prototype.nodeType="FastLayer",(0,n._registerNode)(r),vA}var bA={},Cle;function rX(){if(Cle)return bA;Cle=1,Object.defineProperty(bA,"__esModule",{value:!0}),bA.Group=void 0;const e=Qo(),t=DM(),n=Vr();class r extends t.Container{_validateAdd(s){const o=s.getType();o!=="Group"&&o!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")}}return bA.Group=r,r.prototype.nodeType="Group",(0,n._registerNode)(r),bA}var xA={},Ale;function iX(){if(Ale)return xA;Ale=1,Object.defineProperty(xA,"__esModule",{value:!0}),xA.Animation=void 0;const e=Vr(),t=Qo(),n=function(){return e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return new Date().getTime()}}();let r=class TE{constructor(s,o){this.id=TE.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=s,this.setLayers(o)}setLayers(s){let o=[];return s&&(o=Array.isArray(s)?s:[s]),this.layers=o,this}getLayers(){return this.layers}addLayer(s){const o=this.layers,a=o.length;for(let u=0;u<a;u++)if(o[u]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const o=TE.animations,a=o.length;for(let u=0;u<a;u++)if(o[u].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),TE._addAnimation(this),this}stop(){return TE._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const o=s.id,a=this.animations,u=a.length;for(let l=0;l<u;l++)if(a[l].id===o){this.animations.splice(l,1);break}}static _runFrames(){const s={},o=this.animations;for(let a=0;a<o.length;a++){const u=o[a],l=u.layers,c=u.func;u._updateFrameObject(n());const f=l.length;let d;if(c?d=c.call(u,u.frame)!==!1:d=!0,!!d)for(let h=0;h<f;h++){const p=l[h];p._id!==void 0&&(s[p._id]=p)}}for(const a in s)s.hasOwnProperty(a)&&s[a].batchDraw()}static _animationLoop(){const s=TE;s.animations.length?(s._runFrames(),t.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return xA.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,xA}var wB={},kle;function tbt(){return kle||(kle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=Qo(),n=iX(),r=wa(),i=Vr(),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,u=3,l=["fill","stroke","shadowColor"];let c=0;class f{constructor(p,m,g,b,y,x,w){this.prop=p,this.propFunc=m,this.begin=b,this._pos=b,this.duration=x,this._change=0,this.prevPos=0,this.yoyo=w,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=g,this._change=y-this.begin,this.pause()}fire(p){const m=this[p];m&&m()}setTime(p){p>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():p<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=p,this.update())}getTime(){return this._time}setPosition(p){this.prevPos=this._pos,this.propFunc(p),this._pos=p}getPosition(p){return p===void 0&&(p=this._time),this.func(p,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=u,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(p){this.pause(),this._time=p,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const p=this.getTimer()-this._startTime;this.state===a?this.setTime(p):this.state===u&&this.setTime(this.duration-p)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class d{constructor(p){const m=this,g=p.node,b=g._id,y=p.easing||e.Easings.Linear,x=!!p.yoyo;let w,S;typeof p.duration>"u"?w=.3:p.duration===0?w=.001:w=p.duration,this.node=g,this._id=c++;const C=g.getLayer()||(g instanceof i.Konva.Stage?g.getLayers():null);C||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){m.tween.onEnterFrame()},C),this.tween=new f(S,function(R){m._tweenFunc(R)},y,0,1,w*1e3,x),this._addListeners(),d.attrs[b]||(d.attrs[b]={}),d.attrs[b][this._id]||(d.attrs[b][this._id]={}),d.tweens[b]||(d.tweens[b]={});for(S in p)s[S]===void 0&&this._addAttr(S,p[S]);this.reset(),this.onFinish=p.onFinish,this.onReset=p.onReset,this.onUpdate=p.onUpdate}_addAttr(p,m){const g=this.node,b=g._id;let y,x,w,S,C;const R=d.tweens[b][p];R&&delete d.attrs[b][R][p];let I=g.getAttr(p);if(t.Util._isArray(m))if(y=[],x=Math.max(m.length,I.length),p==="points"&&m.length!==I.length&&(m.length>I.length?(S=I,I=t.Util._prepareArrayForTween(I,m,g.closed())):(w=m,m=t.Util._prepareArrayForTween(m,I,g.closed()))),p.indexOf("fill")===0)for(let O=0;O<x;O++)if(O%2===0)y.push(m[O]-I[O]);else{const M=t.Util.colorToRGBA(I[O]);C=t.Util.colorToRGBA(m[O]),I[O]=M,y.push({r:C.r-M.r,g:C.g-M.g,b:C.b-M.b,a:C.a-M.a})}else for(let O=0;O<x;O++)y.push(m[O]-I[O]);else l.indexOf(p)!==-1?(I=t.Util.colorToRGBA(I),C=t.Util.colorToRGBA(m),y={r:C.r-I.r,g:C.g-I.g,b:C.b-I.b,a:C.a-I.a}):y=m-I;d.attrs[b][this._id][p]={start:I,diff:y,end:m,trueEnd:w,trueStart:S},d.tweens[b][p]=this._id}_tweenFunc(p){const m=this.node,g=d.attrs[m._id][this._id];let b,y,x,w,S,C,R,I;for(b in g){if(y=g[b],x=y.start,w=y.diff,I=y.end,t.Util._isArray(x))if(S=[],R=Math.max(x.length,I.length),b.indexOf("fill")===0)for(C=0;C<R;C++)C%2===0?S.push((x[C]||0)+w[C]*p):S.push("rgba("+Math.round(x[C].r+w[C].r*p)+","+Math.round(x[C].g+w[C].g*p)+","+Math.round(x[C].b+w[C].b*p)+","+(x[C].a+w[C].a*p)+")");else for(C=0;C<R;C++)S.push((x[C]||0)+w[C]*p);else l.indexOf(b)!==-1?S="rgba("+Math.round(x.r+w.r*p)+","+Math.round(x.g+w.g*p)+","+Math.round(x.b+w.b*p)+","+(x.a+w.a*p)+")":S=x+w*p;m.setAttr(b,S)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const p=this.node,m=d.attrs[p._id][this._id];m.points&&m.points.trueEnd&&p.setAttr("points",m.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const p=this.node,m=d.attrs[p._id][this._id];m.points&&m.points.trueStart&&p.points(m.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(p){return this.tween.seek(p*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const p=this.node._id,m=this._id,g=d.tweens[p];this.pause();for(const b in g)delete d.tweens[p][b];delete d.attrs[p][m]}}e.Tween=d,d.attrs={},d.tweens={},r.Node.prototype.to=function(h){const p=h.onFinish;h.node=this,h.onFinish=function(){this.destroy(),p&&p()},new d(h).play()},e.Easings={BackEaseIn(h,p,m,g){return m*(h/=g)*h*((1.70158+1)*h-1.70158)+p},BackEaseOut(h,p,m,g){return m*((h=h/g-1)*h*((1.70158+1)*h+1.70158)+1)+p},BackEaseInOut(h,p,m,g){let b=1.70158;return(h/=g/2)<1?m/2*(h*h*(((b*=1.525)+1)*h-b))+p:m/2*((h-=2)*h*(((b*=1.525)+1)*h+b)+2)+p},ElasticEaseIn(h,p,m,g,b,y){let x=0;return h===0?p:(h/=g)===1?p+m:(y||(y=g*.3),!b||b<Math.abs(m)?(b=m,x=y/4):x=y/(2*Math.PI)*Math.asin(m/b),-(b*Math.pow(2,10*(h-=1))*Math.sin((h*g-x)*(2*Math.PI)/y))+p)},ElasticEaseOut(h,p,m,g,b,y){let x=0;return h===0?p:(h/=g)===1?p+m:(y||(y=g*.3),!b||b<Math.abs(m)?(b=m,x=y/4):x=y/(2*Math.PI)*Math.asin(m/b),b*Math.pow(2,-10*h)*Math.sin((h*g-x)*(2*Math.PI)/y)+m+p)},ElasticEaseInOut(h,p,m,g,b,y){let x=0;return h===0?p:(h/=g/2)===2?p+m:(y||(y=g*(.3*1.5)),!b||b<Math.abs(m)?(b=m,x=y/4):x=y/(2*Math.PI)*Math.asin(m/b),h<1?-.5*(b*Math.pow(2,10*(h-=1))*Math.sin((h*g-x)*(2*Math.PI)/y))+p:b*Math.pow(2,-10*(h-=1))*Math.sin((h*g-x)*(2*Math.PI)/y)*.5+m+p)},BounceEaseOut(h,p,m,g){return(h/=g)<1/2.75?m*(7.5625*h*h)+p:h<2/2.75?m*(7.5625*(h-=1.5/2.75)*h+.75)+p:h<2.5/2.75?m*(7.5625*(h-=2.25/2.75)*h+.9375)+p:m*(7.5625*(h-=2.625/2.75)*h+.984375)+p},BounceEaseIn(h,p,m,g){return m-e.Easings.BounceEaseOut(g-h,0,m,g)+p},BounceEaseInOut(h,p,m,g){return h<g/2?e.Easings.BounceEaseIn(h*2,0,m,g)*.5+p:e.Easings.BounceEaseOut(h*2-g,0,m,g)*.5+m*.5+p},EaseIn(h,p,m,g){return m*(h/=g)*h+p},EaseOut(h,p,m,g){return-m*(h/=g)*(h-2)+p},EaseInOut(h,p,m,g){return(h/=g/2)<1?m/2*h*h+p:-m/2*(--h*(h-2)-1)+p},StrongEaseIn(h,p,m,g){return m*(h/=g)*h*h*h*h+p},StrongEaseOut(h,p,m,g){return m*((h=h/g-1)*h*h*h*h+1)+p},StrongEaseInOut(h,p,m,g){return(h/=g/2)<1?m/2*h*h*h*h*h+p:m/2*((h-=2)*h*h*h*h+2)+p},Linear(h,p,m,g){return m*h/g+p}}}(wB)),wB}var Rle;function SV(){return Rle||(Rle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Vr(),n=Qo(),r=wa(),i=DM(),s=Zvt(),o=GSe(),a=ebt(),u=rX(),l=nX(),c=qu(),f=iX(),d=tbt(),h=qSe(),p=NM();e.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:u.Group,DD:l.DD,Shape:c.Shape,shapes:c.shapes,Animation:f.Animation,Tween:d.Tween,Easings:d.Easings,Context:h.Context,Canvas:p.Canvas}),e.default=e.Konva}(mB)),mB}var _A={},Ile;function nbt(){if(Ile)return _A;Ile=1,Object.defineProperty(_A,"__esModule",{value:!0}),_A.Arc=void 0;const e=Yr(),t=qu(),n=Vr(),r=Zr(),i=Vr();let s=class extends t.Shape{_sceneFunc(a){const u=n.Konva.getAngle(this.angle()),l=this.clockwise();a.beginPath(),a.arc(0,0,this.outerRadius(),0,u,l),a.arc(0,0,this.innerRadius(),u,0,!l),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}getSelfRect(){const a=this.innerRadius(),u=this.outerRadius(),l=this.clockwise(),c=n.Konva.getAngle(l?360-this.angle():this.angle()),f=Math.cos(Math.min(c,Math.PI)),d=1,h=Math.sin(Math.min(Math.max(Math.PI,c),3*Math.PI/2)),p=Math.sin(Math.min(c,Math.PI/2)),m=f*(f>0?a:u),g=d*u,b=h*(h>0?a:u),y=p*(p>0?u:a);return{x:m,y:l?-1*y:b,width:g-m,height:y-b}}};return _A.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(s),e.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"clockwise",!1,(0,r.getBooleanValidator)()),_A}var wA={},EA={},Ple;function YSe(){if(Ple)return EA;Ple=1,Object.defineProperty(EA,"__esModule",{value:!0}),EA.Line=void 0;const e=Yr(),t=Vr(),n=qu(),r=Zr();function i(a,u,l,c,f,d,h){const p=Math.sqrt(Math.pow(l-a,2)+Math.pow(c-u,2)),m=Math.sqrt(Math.pow(f-l,2)+Math.pow(d-c,2)),g=h*p/(p+m),b=h*m/(p+m),y=l-g*(f-a),x=c-g*(d-u),w=l+b*(f-a),S=c+b*(d-u);return[y,x,w,S]}function s(a,u){const l=a.length,c=[];for(let f=2;f<l-2;f+=2){const d=i(a[f-2],a[f-1],a[f],a[f+1],a[f+2],a[f+3],u);isNaN(d[0])||(c.push(d[0]),c.push(d[1]),c.push(a[f]),c.push(a[f+1]),c.push(d[2]),c.push(d[3]))}return c}class o extends n.Shape{constructor(u){super(u),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(u){let l=this.points(),c=l.length,f=this.tension(),d=this.closed(),h=this.bezier(),p,m,g;if(c){if(u.beginPath(),u.moveTo(l[0],l[1]),f!==0&&c>4){for(p=this.getTensionPoints(),m=p.length,g=d?0:4,d||u.quadraticCurveTo(p[0],p[1],p[2],p[3]);g<m-2;)u.bezierCurveTo(p[g++],p[g++],p[g++],p[g++],p[g++],p[g++]);d||u.quadraticCurveTo(p[m-2],p[m-1],l[c-2],l[c-1])}else if(h)for(g=2;g<c;)u.bezierCurveTo(l[g++],l[g++],l[g++],l[g++],l[g++],l[g++]);else for(g=2;g<c;g+=2)u.lineTo(l[g],l[g+1]);d?(u.closePath(),u.fillStrokeShape(this)):u.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){const u=this.points(),l=u.length,c=this.tension(),f=i(u[l-2],u[l-1],u[0],u[1],u[2],u[3],c),d=i(u[l-4],u[l-3],u[l-2],u[l-1],u[0],u[1],c),h=s(u,c);return[f[2],f[3]].concat(h).concat([d[0],d[1],u[l-2],u[l-1],d[2],d[3],f[0],f[1],u[0],u[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let u=this.points();if(u.length<4)return{x:u[0]||0,y:u[1]||0,width:0,height:0};this.tension()!==0?u=[u[0],u[1],...this._getTensionPoints(),u[u.length-2],u[u.length-1]]:u=this.points();let l=u[0],c=u[0],f=u[1],d=u[1],h,p;for(let m=0;m<u.length/2;m++)h=u[m*2],p=u[m*2+1],l=Math.min(l,h),c=Math.max(c,h),f=Math.min(f,p),d=Math.max(d,p);return{x:l,y:f,width:c-l,height:d-f}}}return EA.Line=o,o.prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(o),e.Factory.addGetterSetter(o,"closed",!1),e.Factory.addGetterSetter(o,"bezier",!1),e.Factory.addGetterSetter(o,"tension",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(o,"points",[],(0,r.getNumberArrayValidator)()),EA}var SA={},EB={},Nle;function rbt(){return Nle||(Nle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(o,a,u)=>{let l,c;const d=u/2;l=0;for(let h=0;h<20;h++)c=d*e.tValues[20][h]+d,l+=e.cValues[20][h]*r(o,a,c);return d*l};e.getCubicArcLength=t;const n=(o,a,u)=>{u===void 0&&(u=1);const l=o[0]-2*o[1]+o[2],c=a[0]-2*a[1]+a[2],f=2*o[1]-2*o[0],d=2*a[1]-2*a[0],h=4*(l*l+c*c),p=4*(l*f+c*d),m=f*f+d*d;if(h===0)return u*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const g=p/(2*h),b=m/h,y=u+g,x=b-g*g,w=y*y+x>0?Math.sqrt(y*y+x):0,S=g*g+x>0?Math.sqrt(g*g+x):0,C=g+Math.sqrt(g*g+x)!==0?x*Math.log(Math.abs((y+w)/(g+S))):0;return Math.sqrt(h)/2*(y*w-g*S+C)};e.getQuadraticArcLength=n;function r(o,a,u){const l=i(1,u,o),c=i(1,u,a),f=l*l+c*c;return Math.sqrt(f)}const i=(o,a,u)=>{const l=u.length-1;let c,f;if(l===0)return 0;if(o===0){f=0;for(let d=0;d<=l;d++)f+=e.binomialCoefficients[l][d]*Math.pow(1-a,l-d)*Math.pow(a,d)*u[d];return f}else{c=new Array(l);for(let d=0;d<l;d++)c[d]=l*(u[d+1]-u[d]);return i(o-1,a,c)}},s=(o,a,u)=>{let l=1,c=o/a,f=(o-u(c))/a,d=0;for(;l>.001;){const h=u(c+f),p=Math.abs(o-h)/a;if(p<l)l=p,c+=f;else{const m=u(c-f),g=Math.abs(o-m)/a;g<l?(l=g,c-=f):f/=2}if(d++,d>500)break}return c};e.t2length=s}(EB)),EB}var Dle;function sX(){if(Dle)return SA;Dle=1,Object.defineProperty(SA,"__esModule",{value:!0}),SA.Path=void 0;const e=Yr(),t=qu(),n=Vr(),r=rbt();let i=class Vf extends t.Shape{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Vf.parsePathData(this.data()),this.pathLength=Vf.getPathLength(this.dataArray)}_sceneFunc(o){const a=this.dataArray;o.beginPath();let u=!1;for(let w=0;w<a.length;w++){const S=a[w].command,C=a[w].points;switch(S){case"L":o.lineTo(C[0],C[1]);break;case"M":o.moveTo(C[0],C[1]);break;case"C":o.bezierCurveTo(C[0],C[1],C[2],C[3],C[4],C[5]);break;case"Q":o.quadraticCurveTo(C[0],C[1],C[2],C[3]);break;case"A":var l=C[0],c=C[1],f=C[2],d=C[3],h=C[4],p=C[5],m=C[6],g=C[7],b=f>d?f:d,y=f>d?1:f/d,x=f>d?d/f:1;o.translate(l,c),o.rotate(m),o.scale(y,x),o.arc(0,0,b,h,h+p,1-g),o.scale(1/y,1/x),o.rotate(-m),o.translate(-l,-c);break;case"z":u=!0,o.closePath();break}}!u&&!this.hasFill()?o.strokeShape(this):o.fillStrokeShape(this)}getSelfRect(){let o=[];this.dataArray.forEach(function(h){if(h.command==="A"){const p=h.points[4],m=h.points[5],g=h.points[4]+m;let b=Math.PI/180;if(Math.abs(p-g)<b&&(b=Math.abs(p-g)),m<0)for(let y=p-b;y>g;y-=b){const x=Vf.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],y,0);o.push(x.x,x.y)}else for(let y=p+b;y<g;y+=b){const x=Vf.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],y,0);o.push(x.x,x.y)}}else if(h.command==="C")for(let p=0;p<=1;p+=.01){const m=Vf.getPointOnCubicBezier(p,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);o.push(m.x,m.y)}else o=o.concat(h.points)});let a=o[0],u=o[0],l=o[1],c=o[1],f,d;for(let h=0;h<o.length/2;h++)f=o[h*2],d=o[h*2+1],isNaN(f)||(a=Math.min(a,f),u=Math.max(u,f)),isNaN(d)||(l=Math.min(l,d),c=Math.max(c,d));return{x:a,y:l,width:u-a,height:c-l}}getLength(){return this.pathLength}getPointAtLength(o){return Vf.getPointAtLengthOfDataArray(o,this.dataArray)}static getLineLength(o,a,u,l){return Math.sqrt((u-o)*(u-o)+(l-a)*(l-a))}static getPathLength(o){let a=0;for(let u=0;u<o.length;++u)a+=o[u].pathLength;return a}static getPointAtLengthOfDataArray(o,a){let u,l=0,c=a.length;if(!c)return null;for(;l<c&&o>a[l].pathLength;)o-=a[l].pathLength,++l;if(l===c)return u=a[l-1].points.slice(-2),{x:u[0],y:u[1]};if(o<.01)return u=a[l].points.slice(0,2),{x:u[0],y:u[1]};const f=a[l],d=f.points;switch(f.command){case"L":return Vf.getPointOnLine(o,f.start.x,f.start.y,d[0],d[1]);case"C":return Vf.getPointOnCubicBezier((0,r.t2length)(o,Vf.getPathLength(a),w=>(0,r.getCubicArcLength)([f.start.x,d[0],d[2],d[4]],[f.start.y,d[1],d[3],d[5]],w)),f.start.x,f.start.y,d[0],d[1],d[2],d[3],d[4],d[5]);case"Q":return Vf.getPointOnQuadraticBezier((0,r.t2length)(o,Vf.getPathLength(a),w=>(0,r.getQuadraticArcLength)([f.start.x,d[0],d[2]],[f.start.y,d[1],d[3]],w)),f.start.x,f.start.y,d[0],d[1],d[2],d[3]);case"A":var h=d[0],p=d[1],m=d[2],g=d[3],b=d[4],y=d[5],x=d[6];return b+=y*o/f.pathLength,Vf.getPointOnEllipticalArc(h,p,m,g,b,x)}return null}static getPointOnLine(o,a,u,l,c,f,d){f=f??a,d=d??u;const h=this.getLineLength(a,u,l,c);if(h<1e-10)return{x:a,y:u};if(l===a)return{x:f,y:d+(c>u?o:-o)};const p=(c-u)/(l-a),m=Math.sqrt(o*o/(1+p*p))*(l<a?-1:1),g=p*m;if(Math.abs(d-u-p*(f-a))<1e-10)return{x:f+m,y:d+g};const b=((f-a)*(l-a)+(d-u)*(c-u))/(h*h),y=a+b*(l-a),x=u+b*(c-u),w=this.getLineLength(f,d,y,x),S=Math.sqrt(o*o-w*w),C=Math.sqrt(S*S/(1+p*p))*(l<a?-1:1),R=p*C;return{x:y+C,y:x+R}}static getPointOnCubicBezier(o,a,u,l,c,f,d,h,p){function m(S){return S*S*S}function g(S){return 3*S*S*(1-S)}function b(S){return 3*S*(1-S)*(1-S)}function y(S){return(1-S)*(1-S)*(1-S)}const x=h*m(o)+f*g(o)+l*b(o)+a*y(o),w=p*m(o)+d*g(o)+c*b(o)+u*y(o);return{x,y:w}}static getPointOnQuadraticBezier(o,a,u,l,c,f,d){function h(y){return y*y}function p(y){return 2*y*(1-y)}function m(y){return(1-y)*(1-y)}const g=f*h(o)+l*p(o)+a*m(o),b=d*h(o)+c*p(o)+u*m(o);return{x:g,y:b}}static getPointOnEllipticalArc(o,a,u,l,c,f){const d=Math.cos(f),h=Math.sin(f),p={x:u*Math.cos(c),y:l*Math.sin(c)};return{x:o+(p.x*d-p.y*h),y:a+(p.x*h+p.y*d)}}static parsePathData(o){if(!o)return[];let a=o;const u=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];a=a.replace(new RegExp(" ","g"),",");for(var l=0;l<u.length;l++)a=a.replace(new RegExp(u[l],"g"),"|"+u[l]);const c=a.split("|"),f=[],d=[];let h=0,p=0;const m=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let g;for(l=1;l<c.length;l++){let D=c[l],j=D.charAt(0);for(D=D.slice(1),d.length=0;g=m.exec(D);)d.push(g[0]);const z=[];for(let G=0,ee=d.length;G<ee;G++){if(d[G]==="00"){z.push(0,0);continue}const ne=parseFloat(d[G]);isNaN(ne)?z.push(0):z.push(ne)}for(;z.length>0&&!isNaN(z[0]);){let G="",ee=[];const ne=h,ue=p;var b,y,x,w,S,C,R,I,O,M;switch(j){case"l":h+=z.shift(),p+=z.shift(),G="L",ee.push(h,p);break;case"L":h=z.shift(),p=z.shift(),ee.push(h,p);break;case"m":var L=z.shift(),V=z.shift();if(h+=L,p+=V,G="M",f.length>2&&f[f.length-1].command==="z"){for(let X=f.length-2;X>=0;X--)if(f[X].command==="M"){h=f[X].points[0]+L,p=f[X].points[1]+V;break}}ee.push(h,p),j="l";break;case"M":h=z.shift(),p=z.shift(),G="M",ee.push(h,p),j="L";break;case"h":h+=z.shift(),G="L",ee.push(h,p);break;case"H":h=z.shift(),G="L",ee.push(h,p);break;case"v":p+=z.shift(),G="L",ee.push(h,p);break;case"V":p=z.shift(),G="L",ee.push(h,p);break;case"C":ee.push(z.shift(),z.shift(),z.shift(),z.shift()),h=z.shift(),p=z.shift(),ee.push(h,p);break;case"c":ee.push(h+z.shift(),p+z.shift(),h+z.shift(),p+z.shift()),h+=z.shift(),p+=z.shift(),G="C",ee.push(h,p);break;case"S":y=h,x=p,b=f[f.length-1],b.command==="C"&&(y=h+(h-b.points[2]),x=p+(p-b.points[3])),ee.push(y,x,z.shift(),z.shift()),h=z.shift(),p=z.shift(),G="C",ee.push(h,p);break;case"s":y=h,x=p,b=f[f.length-1],b.command==="C"&&(y=h+(h-b.points[2]),x=p+(p-b.points[3])),ee.push(y,x,h+z.shift(),p+z.shift()),h+=z.shift(),p+=z.shift(),G="C",ee.push(h,p);break;case"Q":ee.push(z.shift(),z.shift()),h=z.shift(),p=z.shift(),ee.push(h,p);break;case"q":ee.push(h+z.shift(),p+z.shift()),h+=z.shift(),p+=z.shift(),G="Q",ee.push(h,p);break;case"T":y=h,x=p,b=f[f.length-1],b.command==="Q"&&(y=h+(h-b.points[0]),x=p+(p-b.points[1])),h=z.shift(),p=z.shift(),G="Q",ee.push(y,x,h,p);break;case"t":y=h,x=p,b=f[f.length-1],b.command==="Q"&&(y=h+(h-b.points[0]),x=p+(p-b.points[1])),h+=z.shift(),p+=z.shift(),G="Q",ee.push(y,x,h,p);break;case"A":w=z.shift(),S=z.shift(),C=z.shift(),R=z.shift(),I=z.shift(),O=h,M=p,h=z.shift(),p=z.shift(),G="A",ee=this.convertEndpointToCenterParameterization(O,M,h,p,R,I,w,S,C);break;case"a":w=z.shift(),S=z.shift(),C=z.shift(),R=z.shift(),I=z.shift(),O=h,M=p,h+=z.shift(),p+=z.shift(),G="A",ee=this.convertEndpointToCenterParameterization(O,M,h,p,R,I,w,S,C);break}f.push({command:G||j,points:ee,start:{x:ne,y:ue},pathLength:this.calcLength(ne,ue,G||j,ee)})}(j==="z"||j==="Z")&&f.push({command:"z",points:[],start:void 0,pathLength:0})}return f}static calcLength(o,a,u,l){let c,f,d,h;const p=Vf;switch(u){case"L":return p.getLineLength(o,a,l[0],l[1]);case"C":return(0,r.getCubicArcLength)([o,l[0],l[2],l[4]],[a,l[1],l[3],l[5]],1);case"Q":return(0,r.getQuadraticArcLength)([o,l[0],l[2]],[a,l[1],l[3]],1);case"A":c=0;var m=l[4],g=l[5],b=l[4]+g,y=Math.PI/180;if(Math.abs(m-b)<y&&(y=Math.abs(m-b)),f=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],m,0),g<0)for(h=m-y;h>b;h-=y)d=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],h,0),c+=p.getLineLength(f.x,f.y,d.x,d.y),f=d;else for(h=m+y;h<b;h+=y)d=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],h,0),c+=p.getLineLength(f.x,f.y,d.x,d.y),f=d;return d=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],b,0),c+=p.getLineLength(f.x,f.y,d.x,d.y),c}return 0}static convertEndpointToCenterParameterization(o,a,u,l,c,f,d,h,p){const m=p*(Math.PI/180),g=Math.cos(m)*(o-u)/2+Math.sin(m)*(a-l)/2,b=-1*Math.sin(m)*(o-u)/2+Math.cos(m)*(a-l)/2,y=g*g/(d*d)+b*b/(h*h);y>1&&(d*=Math.sqrt(y),h*=Math.sqrt(y));let x=Math.sqrt((d*d*(h*h)-d*d*(b*b)-h*h*(g*g))/(d*d*(b*b)+h*h*(g*g)));c===f&&(x*=-1),isNaN(x)&&(x=0);const w=x*d*b/h,S=x*-h*g/d,C=(o+u)/2+Math.cos(m)*w-Math.sin(m)*S,R=(a+l)/2+Math.sin(m)*w+Math.cos(m)*S,I=function(z){return Math.sqrt(z[0]*z[0]+z[1]*z[1])},O=function(z,G){return(z[0]*G[0]+z[1]*G[1])/(I(z)*I(G))},M=function(z,G){return(z[0]*G[1]<z[1]*G[0]?-1:1)*Math.acos(O(z,G))},L=M([1,0],[(g-w)/d,(b-S)/h]),V=[(g-w)/d,(b-S)/h],D=[(-1*g-w)/d,(-1*b-S)/h];let j=M(V,D);return O(V,D)<=-1&&(j=Math.PI),O(V,D)>=1&&(j=0),f===0&&j>0&&(j=j-2*Math.PI),f===1&&j<0&&(j=j+2*Math.PI),[C,R,d,h,L,j,m,f]}};return SA.Path=i,i.prototype.className="Path",i.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(i),e.Factory.addGetterSetter(i,"data"),SA}var Ole;function ibt(){if(Ole)return wA;Ole=1,Object.defineProperty(wA,"__esModule",{value:!0}),wA.Arrow=void 0;const e=Yr(),t=YSe(),n=Zr(),r=Vr(),i=sX();let s=class extends t.Line{_sceneFunc(a){super._sceneFunc(a);const u=Math.PI*2,l=this.points();let c=l;const f=this.tension()!==0&&l.length>4;f&&(c=this.getTensionPoints());const d=this.pointerLength(),h=l.length;let p,m;if(f){const y=[c[c.length-4],c[c.length-3],c[c.length-2],c[c.length-1],l[h-2],l[h-1]],x=i.Path.calcLength(c[c.length-4],c[c.length-3],"C",y),w=i.Path.getPointOnQuadraticBezier(Math.min(1,1-d/x),y[0],y[1],y[2],y[3],y[4],y[5]);p=l[h-2]-w.x,m=l[h-1]-w.y}else p=l[h-2]-l[h-4],m=l[h-1]-l[h-3];const g=(Math.atan2(m,p)+u)%u,b=this.pointerWidth();this.pointerAtEnding()&&(a.save(),a.beginPath(),a.translate(l[h-2],l[h-1]),a.rotate(g),a.moveTo(0,0),a.lineTo(-d,b/2),a.lineTo(-d,-b/2),a.closePath(),a.restore(),this.__fillStroke(a)),this.pointerAtBeginning()&&(a.save(),a.beginPath(),a.translate(l[0],l[1]),f?(p=(c[0]+c[2])/2-l[0],m=(c[1]+c[3])/2-l[1]):(p=l[2]-l[0],m=l[3]-l[1]),a.rotate((Math.atan2(-m,-p)+u)%u),a.moveTo(0,0),a.lineTo(-d,b/2),a.lineTo(-d,-b/2),a.closePath(),a.restore(),this.__fillStroke(a))}__fillStroke(a){const u=this.dashEnabled();u&&(this.attrs.dashEnabled=!1,a.setLineDash([])),a.fillStrokeShape(this),u&&(this.attrs.dashEnabled=!0)}getSelfRect(){const a=super.getSelfRect(),u=this.pointerWidth()/2;return{x:a.x,y:a.y-u,width:a.width,height:a.height+u*2}}};return wA.Arrow=s,s.prototype.className="Arrow",(0,r._registerNode)(s),e.Factory.addGetterSetter(s,"pointerLength",10,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"pointerWidth",10,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"pointerAtBeginning",!1),e.Factory.addGetterSetter(s,"pointerAtEnding",!0),wA}var TA={},Mle;function sbt(){if(Mle)return TA;Mle=1,Object.defineProperty(TA,"__esModule",{value:!0}),TA.Circle=void 0;const e=Yr(),t=qu(),n=Zr(),r=Vr();class i extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}}return TA.Circle=i,i.prototype._centroid=!0,i.prototype.className="Circle",i.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"radius",0,(0,n.getNumberValidator)()),TA}var CA={},Lle;function obt(){if(Lle)return CA;Lle=1,Object.defineProperty(CA,"__esModule",{value:!0}),CA.Ellipse=void 0;const e=Yr(),t=qu(),n=Zr(),r=Vr();let i=class extends t.Shape{_sceneFunc(o){const a=this.radiusX(),u=this.radiusY();o.beginPath(),o.save(),a!==u&&o.scale(1,u/a),o.arc(0,0,a,0,Math.PI*2,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}};return CA.Ellipse=i,i.prototype.className="Ellipse",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(i),e.Factory.addComponentsGetterSetter(i,"radius",["x","y"]),e.Factory.addGetterSetter(i,"radiusX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"radiusY",0,(0,n.getNumberValidator)()),CA}var AA={},Fle;function abt(){if(Fle)return AA;Fle=1,Object.defineProperty(AA,"__esModule",{value:!0}),AA.Image=void 0;const e=Qo(),t=Yr(),n=qu(),r=Vr(),i=Zr();class s extends n.Shape{constructor(a){super(a),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const a=this.image();a&&a.complete||a&&a.readyState===4||a&&a.addEventListener&&a.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const a=!!this.cornerRadius(),u=this.hasShadow();return a&&u?!0:super._useBufferCanvas(!0)}_sceneFunc(a){const u=this.getWidth(),l=this.getHeight(),c=this.cornerRadius(),f=this.attrs.image;let d;if(f){const h=this.attrs.cropWidth,p=this.attrs.cropHeight;h&&p?d=[f,this.cropX(),this.cropY(),h,p,0,0,u,l]:d=[f,0,0,u,l]}(this.hasFill()||this.hasStroke()||c)&&(a.beginPath(),c?e.Util.drawRoundedRectPath(a,u,l,c):a.rect(0,0,u,l),a.closePath(),a.fillStrokeShape(this)),f&&(c&&a.clip(),a.drawImage.apply(a,d))}_hitFunc(a){const u=this.width(),l=this.height(),c=this.cornerRadius();a.beginPath(),c?e.Util.drawRoundedRectPath(a,u,l,c):a.rect(0,0,u,l),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,u;return(a=this.attrs.width)!==null&&a!==void 0?a:(u=this.image())===null||u===void 0?void 0:u.width}getHeight(){var a,u;return(a=this.attrs.height)!==null&&a!==void 0?a:(u=this.image())===null||u===void 0?void 0:u.height}static fromURL(a,u,l=null){const c=e.Util.createImageElement();c.onload=function(){const f=new s({image:c});u(f)},c.onerror=l,c.crossOrigin="Anonymous",c.src=a}}return AA.Image=s,s.prototype.className="Image",(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(s,"image"),t.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(s,"cropX",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropY",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropWidth",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropHeight",0,(0,i.getNumberValidator)()),AA}var zx={},$le;function ubt(){if($le)return zx;$le=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.Tag=zx.Label=void 0;const e=Yr(),t=qu(),n=rX(),r=Zr(),i=Vr(),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],o="Change.konva",a="none",u="up",l="right",c="down",f="left",d=s.length;class h extends n.Group{constructor(g){super(g),this.on("add.konva",function(b){this._addListeners(b.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(g){let b=this,y;const x=function(){b._sync()};for(y=0;y<d;y++)g.on(s[y]+o,x)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let g=this.getText(),b=this.getTag(),y,x,w,S,C,R,I;if(g&&b){switch(y=g.width(),x=g.height(),w=b.pointerDirection(),S=b.pointerWidth(),I=b.pointerHeight(),C=0,R=0,w){case u:C=y/2,R=-1*I;break;case l:C=y+S,R=x/2;break;case c:C=y/2,R=x+I;break;case f:C=-1*S,R=x/2;break}b.setAttrs({x:-1*C,y:-1*R,width:y,height:x}),g.setAttrs({x:-1*C,y:-1*R})}}}zx.Label=h,h.prototype.className="Label",(0,i._registerNode)(h);class p extends t.Shape{_sceneFunc(g){const b=this.width(),y=this.height(),x=this.pointerDirection(),w=this.pointerWidth(),S=this.pointerHeight(),C=this.cornerRadius();let R=0,I=0,O=0,M=0;typeof C=="number"?R=I=O=M=Math.min(C,b/2,y/2):(R=Math.min(C[0]||0,b/2,y/2),I=Math.min(C[1]||0,b/2,y/2),M=Math.min(C[2]||0,b/2,y/2),O=Math.min(C[3]||0,b/2,y/2)),g.beginPath(),g.moveTo(R,0),x===u&&(g.lineTo((b-w)/2,0),g.lineTo(b/2,-1*S),g.lineTo((b+w)/2,0)),g.lineTo(b-I,0),g.arc(b-I,I,I,Math.PI*3/2,0,!1),x===l&&(g.lineTo(b,(y-S)/2),g.lineTo(b+w,y/2),g.lineTo(b,(y+S)/2)),g.lineTo(b,y-M),g.arc(b-M,y-M,M,0,Math.PI/2,!1),x===c&&(g.lineTo((b+w)/2,y),g.lineTo(b/2,y+S),g.lineTo((b-w)/2,y)),g.lineTo(O,y),g.arc(O,y-O,O,Math.PI/2,Math.PI,!1),x===f&&(g.lineTo(0,(y+S)/2),g.lineTo(-1*w,y/2),g.lineTo(0,(y-S)/2)),g.lineTo(0,R),g.arc(R,R,R,Math.PI,Math.PI*3/2,!1),g.closePath(),g.fillStrokeShape(this)}getSelfRect(){let g=0,b=0,y=this.pointerWidth(),x=this.pointerHeight(),w=this.pointerDirection(),S=this.width(),C=this.height();return w===u?(b-=x,C+=x):w===c?C+=x:w===f?(g-=y*1.5,S+=y):w===l&&(S+=y*1.5),{x:g,y:b,width:S,height:C}}}return zx.Tag=p,p.prototype.className="Tag",(0,i._registerNode)(p),e.Factory.addGetterSetter(p,"pointerDirection",a),e.Factory.addGetterSetter(p,"pointerWidth",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(p,"pointerHeight",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(p,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),zx}var kA={},Ble;function KSe(){if(Ble)return kA;Ble=1,Object.defineProperty(kA,"__esModule",{value:!0}),kA.Rect=void 0;const e=Yr(),t=qu(),n=Vr(),r=Qo(),i=Zr();let s=class extends t.Shape{_sceneFunc(a){const u=this.cornerRadius(),l=this.width(),c=this.height();a.beginPath(),u?r.Util.drawRoundedRectPath(a,l,c,u):a.rect(0,0,l,c),a.closePath(),a.fillStrokeShape(this)}};return kA.Rect=s,s.prototype.className="Rect",(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),kA}var RA={},jle;function lbt(){if(jle)return RA;jle=1,Object.defineProperty(RA,"__esModule",{value:!0}),RA.RegularPolygon=void 0;const e=Yr(),t=qu(),n=Zr(),r=Vr();let i=class extends t.Shape{_sceneFunc(o){const a=this._getPoints();o.beginPath(),o.moveTo(a[0].x,a[0].y);for(let u=1;u<a.length;u++)o.lineTo(a[u].x,a[u].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,a=this.attrs.radius||0,u=[];for(let l=0;l<o;l++)u.push({x:a*Math.sin(l*2*Math.PI/o),y:-1*a*Math.cos(l*2*Math.PI/o)});return u}getSelfRect(){const o=this._getPoints();let a=o[0].x,u=o[0].y,l=o[0].x,c=o[0].y;return o.forEach(f=>{a=Math.min(a,f.x),u=Math.max(u,f.x),l=Math.min(l,f.y),c=Math.max(c,f.y)}),{x:a,y:l,width:u-a,height:c-l}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return RA.RegularPolygon=i,i.prototype.className="RegularPolygon",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"sides",0,(0,n.getNumberValidator)()),RA}var IA={},Ule;function cbt(){if(Ule)return IA;Ule=1,Object.defineProperty(IA,"__esModule",{value:!0}),IA.Ring=void 0;const e=Yr(),t=qu(),n=Zr(),r=Vr(),i=Math.PI*2;let s=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.innerRadius(),0,i,!1),a.moveTo(this.outerRadius(),0),a.arc(0,0,this.outerRadius(),i,0,!0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return IA.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(s),e.Factory.addGetterSetter(s,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,n.getNumberValidator)()),IA}var PA={},zle;function fbt(){if(zle)return PA;zle=1,Object.defineProperty(PA,"__esModule",{value:!0}),PA.Sprite=void 0;const e=Yr(),t=qu(),n=iX(),r=Zr(),i=Vr();let s=class extends t.Shape{constructor(a){super(a),this._updated=!0,this.anim=new n.Animation(()=>{const u=this._updated;return this._updated=!1,u}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(a){const u=this.animation(),l=this.frameIndex(),c=l*4,f=this.animations()[u],d=this.frameOffsets(),h=f[c+0],p=f[c+1],m=f[c+2],g=f[c+3],b=this.image();if((this.hasFill()||this.hasStroke())&&(a.beginPath(),a.rect(0,0,m,g),a.closePath(),a.fillStrokeShape(this)),b)if(d){const y=d[u],x=l*2;a.drawImage(b,h,p,m,g,y[x+0],y[x+1],m,g)}else a.drawImage(b,h,p,m,g,0,0,m,g)}_hitFunc(a){const u=this.animation(),l=this.frameIndex(),c=l*4,f=this.animations()[u],d=this.frameOffsets(),h=f[c+2],p=f[c+3];if(a.beginPath(),d){const m=d[u],g=l*2;a.rect(m[g+0],m[g+1],h,p)}else a.rect(0,0,h,p);a.closePath(),a.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const a=this.frameIndex(),u=this.animation(),l=this.animations(),c=l[u],f=c.length/4;a<f-1?this.frameIndex(a+1):this.frameIndex(0)}};return PA.Sprite=s,s.prototype.className="Sprite",(0,i._registerNode)(s),e.Factory.addGetterSetter(s,"animation"),e.Factory.addGetterSetter(s,"animations"),e.Factory.addGetterSetter(s,"frameOffsets"),e.Factory.addGetterSetter(s,"image"),e.Factory.addGetterSetter(s,"frameIndex",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"frameRate",17,(0,r.getNumberValidator)()),e.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),PA}var NA={},Vle;function dbt(){if(Vle)return NA;Vle=1,Object.defineProperty(NA,"__esModule",{value:!0}),NA.Star=void 0;const e=Yr(),t=qu(),n=Zr(),r=Vr();let i=class extends t.Shape{_sceneFunc(o){const a=this.innerRadius(),u=this.outerRadius(),l=this.numPoints();o.beginPath(),o.moveTo(0,0-u);for(let c=1;c<l*2;c++){const f=c%2===0?u:a,d=f*Math.sin(c*Math.PI/l),h=-1*f*Math.cos(c*Math.PI/l);o.lineTo(d,h)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return NA.Star=i,i.prototype.className="Star",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"numPoints",5,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"outerRadius",0,(0,n.getNumberValidator)()),NA}var tE={},Hle;function XSe(){if(Hle)return tE;Hle=1,Object.defineProperty(tE,"__esModule",{value:!0}),tE.Text=void 0,tE.stringToArray=o;const e=Qo(),t=Yr(),n=qu(),r=Vr(),i=Zr(),s=Vr();function o(te){return[...te].reduce((q,J,oe,de)=>{if(new RegExp("\\p{Emoji}","u").test(J)){const ce=de[oe+1];ce&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(ce)?(q.push(J+ce),de[oe+1]=""):q.push(J)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(J+(de[oe+1]||""))?q.push(J+de[oe+1]):oe>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(J)?q[q.length-1]+=J:J&&q.push(J);return q},[])}const a="auto",u="center",l="inherit",c="justify",f="Change.konva",d="2d",h="-",p="left",m="text",g="Text",b="top",y="bottom",x="middle",w="normal",S="px ",C=" ",R="right",I="rtl",O="word",M="char",L="none",V="…",D=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],j=D.length;function z(te){return te.split(",").map(q=>{q=q.trim();const J=q.indexOf(" ")>=0,oe=q.indexOf('"')>=0||q.indexOf("'")>=0;return J&&!oe&&(q=`"${q}"`),q}).join(", ")}let G;function ee(){return G||(G=e.Util.createCanvasElement().getContext(d),G)}function ne(te){te.fillText(this._partialText,this._partialTextX,this._partialTextY)}function ue(te){te.setAttr("miterLimit",2),te.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function X(te){return te=te||{},!te.fillLinearGradientColorStops&&!te.fillRadialGradientColorStops&&!te.fillPatternImage&&(te.fill=te.fill||"black"),te}let W=class extends n.Shape{constructor(q){super(X(q)),this._partialTextX=0,this._partialTextY=0;for(let J=0;J<j;J++)this.on(D[J]+f,this._setTextData);this._setTextData()}_sceneFunc(q){const J=this.textArr,oe=J.length;if(!this.text())return;let de=this.padding(),ce=this.fontSize(),pe=this.lineHeight()*ce,Ee=this.verticalAlign(),Ae=this.direction(),ge=0,me=this.align(),Oe=this.getWidth(),Me=this.letterSpacing(),Ye=this.fill(),lt=this.textDecoration(),We=lt.indexOf("underline")!==-1,nt=lt.indexOf("line-through")!==-1,yt;Ae=Ae===l?q.direction:Ae;let _t=pe/2,It=x;if(r.Konva._fixTextRendering){const Wt=this.measureSize("M");It="alphabetic",_t=(Wt.fontBoundingBoxAscent-Wt.fontBoundingBoxDescent)/2+pe/2}var Et=0,Ke=0;for(Ae===I&&q.setAttr("direction",Ae),q.setAttr("font",this._getContextFont()),q.setAttr("textBaseline",It),q.setAttr("textAlign",p),Ee===x?ge=(this.getHeight()-oe*pe-de*2)/2:Ee===y&&(ge=this.getHeight()-oe*pe-de*2),q.translate(de,ge+de),yt=0;yt<oe;yt++){var Et=0,Ke=0,Lt=J[yt],sn=Lt.text,Fe=Lt.width,Qe=Lt.lastInParagraph,wt,Vt;if(q.save(),me===R?Et+=Oe-Fe-de*2:me===u&&(Et+=(Oe-Fe-de*2)/2),We){q.save(),q.beginPath();const Dn=r.Konva._fixTextRendering?Math.round(ce/4):Math.round(ce/2),Zn=Et,wr=_t+Ke+Dn;q.moveTo(Zn,wr),wt=sn.split(" ").length-1,Vt=me===c&&!Qe?Oe-de*2:Fe,q.lineTo(Zn+Math.round(Vt),wr),q.lineWidth=ce/15;const Hn=this._getLinearGradient();q.strokeStyle=Hn||Ye,q.stroke(),q.restore()}if(nt){q.save(),q.beginPath();const Dn=r.Konva._fixTextRendering?-Math.round(ce/4):0;q.moveTo(Et,_t+Ke+Dn),wt=sn.split(" ").length-1,Vt=me===c&&!Qe?Oe-de*2:Fe,q.lineTo(Et+Math.round(Vt),_t+Ke+Dn),q.lineWidth=ce/15;const Zn=this._getLinearGradient();q.strokeStyle=Zn||Ye,q.stroke(),q.restore()}if(Ae!==I&&(Me!==0||me===c)){wt=sn.split(" ").length-1;const Dn=o(sn);for(let Zn=0;Zn<Dn.length;Zn++){const wr=Dn[Zn];wr===" "&&!Qe&&me===c&&(Et+=(Oe-de*2-Fe)/wt),this._partialTextX=Et,this._partialTextY=_t+Ke,this._partialText=wr,q.fillStrokeShape(this),Et+=this.measureSize(wr).width+Me}}else Me!==0&&q.setAttr("letterSpacing",`${Me}px`),this._partialTextX=Et,this._partialTextY=_t+Ke,this._partialText=sn,q.fillStrokeShape(this);q.restore(),oe>1&&(_t+=pe)}}_hitFunc(q){const J=this.getWidth(),oe=this.getHeight();q.beginPath(),q.rect(0,0,J,oe),q.closePath(),q.fillStrokeShape(this)}setText(q){const J=e.Util._isString(q)?q:q==null?"":q+"";return this._setAttr(m,J),this}getWidth(){return this.attrs.width===a||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===a||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(q){var J,oe,de,ce,pe,Ee,Ae,ge,me,Oe,Me;let Ye=ee(),lt=this.fontSize(),We;Ye.save(),Ye.font=this._getContextFont(),We=Ye.measureText(q),Ye.restore();const nt=lt/100;return{actualBoundingBoxAscent:(J=We.actualBoundingBoxAscent)!==null&&J!==void 0?J:71.58203125*nt,actualBoundingBoxDescent:(oe=We.actualBoundingBoxDescent)!==null&&oe!==void 0?oe:0,actualBoundingBoxLeft:(de=We.actualBoundingBoxLeft)!==null&&de!==void 0?de:-7.421875*nt,actualBoundingBoxRight:(ce=We.actualBoundingBoxRight)!==null&&ce!==void 0?ce:75.732421875*nt,alphabeticBaseline:(pe=We.alphabeticBaseline)!==null&&pe!==void 0?pe:0,emHeightAscent:(Ee=We.emHeightAscent)!==null&&Ee!==void 0?Ee:100*nt,emHeightDescent:(Ae=We.emHeightDescent)!==null&&Ae!==void 0?Ae:-20*nt,fontBoundingBoxAscent:(ge=We.fontBoundingBoxAscent)!==null&&ge!==void 0?ge:91*nt,fontBoundingBoxDescent:(me=We.fontBoundingBoxDescent)!==null&&me!==void 0?me:21*nt,hangingBaseline:(Oe=We.hangingBaseline)!==null&&Oe!==void 0?Oe:72.80000305175781*nt,ideographicBaseline:(Me=We.ideographicBaseline)!==null&&Me!==void 0?Me:-21*nt,width:We.width,height:lt}}_getContextFont(){return this.fontStyle()+C+this.fontVariant()+C+(this.fontSize()+S)+z(this.fontFamily())}_addTextLine(q){this.align()===c&&(q=q.trim());const oe=this._getTextWidth(q);return this.textArr.push({text:q,width:oe,lastInParagraph:!1})}_getTextWidth(q){const J=this.letterSpacing(),oe=q.length;return ee().measureText(q).width+J*oe}_setTextData(){let q=this.text().split(`
`),J=+this.fontSize(),oe=0,de=this.lineHeight()*J,ce=this.attrs.width,pe=this.attrs.height,Ee=ce!==a&&ce!==void 0,Ae=pe!==a&&pe!==void 0,ge=this.padding(),me=ce-ge*2,Oe=pe-ge*2,Me=0,Ye=this.wrap(),lt=Ye!==L,We=Ye!==M&&lt,nt=this.ellipsis();this.textArr=[],ee().font=this._getContextFont();const yt=nt?this._getTextWidth(V):0;for(let _t=0,It=q.length;_t<It;++_t){let Et=q[_t],Ke=this._getTextWidth(Et);if(Ee&&Ke>me)for(;Et.length>0;){let Lt=0,sn=o(Et).length,Fe="",Qe=0;for(;Lt<sn;){const wt=Lt+sn>>>1,Vt=o(Et),Wt=Vt.slice(0,wt+1).join(""),bn=this._getTextWidth(Wt)+yt;bn<=me?(Lt=wt+1,Fe=Wt,Qe=bn):sn=wt}if(Fe){if(We){const Wt=o(Et),bn=o(Fe),Dn=Wt[bn.length],Zn=Dn===C||Dn===h;let wr;if(Zn&&Qe<=me)wr=bn.length;else{const Hn=bn.lastIndexOf(C),nr=bn.lastIndexOf(h);wr=Math.max(Hn,nr)+1}wr>0&&(Lt=wr,Fe=Wt.slice(0,Lt).join(""),Qe=this._getTextWidth(Fe))}if(Fe=Fe.trimRight(),this._addTextLine(Fe),oe=Math.max(oe,Qe),Me+=de,this._shouldHandleEllipsis(Me)){this._tryToAddEllipsisToLastLine();break}if(Et=o(Et).slice(Lt).join("").trimLeft(),Et.length>0&&(Ke=this._getTextWidth(Et),Ke<=me)){this._addTextLine(Et),Me+=de,oe=Math.max(oe,Ke);break}}else break}else this._addTextLine(Et),Me+=de,oe=Math.max(oe,Ke),this._shouldHandleEllipsis(Me)&&_t<It-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Ae&&Me+de>Oe)break}this.textHeight=J,this.textWidth=oe}_shouldHandleEllipsis(q){const J=+this.fontSize(),oe=this.lineHeight()*J,de=this.attrs.height,ce=de!==a&&de!==void 0,pe=this.padding(),Ee=de-pe*2;return!(this.wrap()!==L)||ce&&q+oe>Ee}_tryToAddEllipsisToLastLine(){const q=this.attrs.width,J=q!==a&&q!==void 0,oe=this.padding(),de=q-oe*2,ce=this.ellipsis(),pe=this.textArr[this.textArr.length-1];!pe||!ce||(J&&(this._getTextWidth(pe.text+V)<de||(pe.text=pe.text.slice(0,pe.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(pe.text+V))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const q=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,J=this.hasShadow();return q&&J?!0:super._useBufferCanvas()}};return tE.Text=W,W.prototype._fillFunc=ne,W.prototype._strokeFunc=ue,W.prototype.className=g,W.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(W),t.Factory.overWriteSetter(W,"width",(0,i.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(W,"height",(0,i.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(W,"direction",l),t.Factory.addGetterSetter(W,"fontFamily","Arial"),t.Factory.addGetterSetter(W,"fontSize",12,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(W,"fontStyle",w),t.Factory.addGetterSetter(W,"fontVariant",w),t.Factory.addGetterSetter(W,"padding",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(W,"align",p),t.Factory.addGetterSetter(W,"verticalAlign",b),t.Factory.addGetterSetter(W,"lineHeight",1,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(W,"wrap",O),t.Factory.addGetterSetter(W,"ellipsis",!1,(0,i.getBooleanValidator)()),t.Factory.addGetterSetter(W,"letterSpacing",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(W,"text","",(0,i.getStringValidator)()),t.Factory.addGetterSetter(W,"textDecoration",""),tE}var DA={},qle;function hbt(){if(qle)return DA;qle=1,Object.defineProperty(DA,"__esModule",{value:!0}),DA.TextPath=void 0;const e=Qo(),t=Yr(),n=qu(),r=sX(),i=XSe(),s=Zr(),o=Vr(),a="",u="normal";function l(d){d.fillText(this.partialText,0,0)}function c(d){d.strokeText(this.partialText,0,0)}let f=class extends n.Shape{constructor(h){super(h),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(h){if(!this.attrs.data)return null;const p=this.pathLength;return h-1>p?null:r.Path.getPointAtLengthOfDataArray(h,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(h){h.setAttr("font",this._getContextFont()),h.setAttr("textBaseline",this.textBaseline()),h.setAttr("textAlign","left"),h.save();const p=this.textDecoration(),m=this.fill(),g=this.fontSize(),b=this.glyphInfo;p==="underline"&&h.beginPath();for(let y=0;y<b.length;y++){h.save();const x=b[y].p0;h.translate(x.x,x.y),h.rotate(b[y].rotation),this.partialText=b[y].text,h.fillStrokeShape(this),p==="underline"&&(y===0&&h.moveTo(0,g/2+1),h.lineTo(g,g/2+1)),h.restore()}p==="underline"&&(h.strokeStyle=m,h.lineWidth=g/20,h.stroke()),h.restore()}_hitFunc(h){h.beginPath();const p=this.glyphInfo;if(p.length>=1){const m=p[0].p0;h.moveTo(m.x,m.y)}for(let m=0;m<p.length;m++){const g=p[m].p1;h.lineTo(g.x,g.y)}h.setAttr("lineWidth",this.fontSize()),h.setAttr("strokeStyle",this.colorKey),h.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(h){return i.Text.prototype.setText.call(this,h)}_getContextFont(){return i.Text.prototype._getContextFont.call(this)}_getTextSize(h){const m=this.dummyCanvas.getContext("2d");m.save(),m.font=this._getContextFont();const g=m.measureText(h);return m.restore(),{width:g.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:h,height:p}=this._getTextSize(this.attrs.text);if(this.textWidth=h,this.textHeight=p,this.glyphInfo=[],!this.attrs.data)return null;const m=this.letterSpacing(),g=this.align(),b=this.kerningFunc(),y=Math.max(this.textWidth+((this.attrs.text||"").length-1)*m,0);let x=0;g==="center"&&(x=Math.max(0,this.pathLength/2-y/2)),g==="right"&&(x=Math.max(0,this.pathLength-y));const w=(0,i.stringToArray)(this.text());let S=x;for(let C=0;C<w.length;C++){const R=this._getPointAtLength(S);if(!R)return;let I=this._getTextSize(w[C]).width+m;if(w[C]===" "&&g==="justify"){const j=this.text().split(" ").length-1;I+=(this.pathLength-y)/j}const O=this._getPointAtLength(S+I);if(!O)return;const M=r.Path.getLineLength(R.x,R.y,O.x,O.y);let L=0;if(b)try{L=b(w[C-1],w[C])*this.fontSize()}catch{L=0}R.x+=L,O.x+=L,this.textWidth+=L;const V=r.Path.getPointOnLine(L+M/2,R.x,R.y,O.x,O.y),D=Math.atan2(O.y-R.y,O.x-R.x);this.glyphInfo.push({transposeX:V.x,transposeY:V.y,text:w[C],rotation:D,p0:R,p1:O}),S+=I}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const h=[];this.glyphInfo.forEach(function(S){h.push(S.p0.x),h.push(S.p0.y),h.push(S.p1.x),h.push(S.p1.y)});let p=h[0]||0,m=h[0]||0,g=h[1]||0,b=h[1]||0,y,x;for(let S=0;S<h.length/2;S++)y=h[S*2],x=h[S*2+1],p=Math.min(p,y),m=Math.max(m,y),g=Math.min(g,x),b=Math.max(b,x);const w=this.fontSize();return{x:p-w/2,y:g-w/2,width:m-p+w,height:b-g+w}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return DA.TextPath=f,f.prototype._fillFunc=l,f.prototype._strokeFunc=c,f.prototype._fillFuncHit=l,f.prototype._strokeFuncHit=c,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,o._registerNode)(f),t.Factory.addGetterSetter(f,"data"),t.Factory.addGetterSetter(f,"fontFamily","Arial"),t.Factory.addGetterSetter(f,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(f,"fontStyle",u),t.Factory.addGetterSetter(f,"align","left"),t.Factory.addGetterSetter(f,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(f,"textBaseline","middle"),t.Factory.addGetterSetter(f,"fontVariant",u),t.Factory.addGetterSetter(f,"text",a),t.Factory.addGetterSetter(f,"textDecoration",""),t.Factory.addGetterSetter(f,"kerningFunc",void 0),DA}var OA={},Wle;function pbt(){if(Wle)return OA;Wle=1,Object.defineProperty(OA,"__esModule",{value:!0}),OA.Transformer=void 0;const e=Qo(),t=Yr(),n=wa(),r=qu(),i=KSe(),s=rX(),o=Vr(),a=Zr(),u=Vr(),l="tr-konva",c=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(I=>I+`.${l}`).join(" "),f="nodesRect",d=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],h={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},p="ontouchstart"in o.Konva._global;function m(I,O,M){if(I==="rotater")return M;O+=e.Util.degToRad(h[I]||0);const L=(e.Util.radToDeg(O)%360+360)%360;return e.Util._inRange(L,315+22.5,360)||e.Util._inRange(L,0,22.5)?"ns-resize":e.Util._inRange(L,45-22.5,45+22.5)?"nesw-resize":e.Util._inRange(L,90-22.5,90+22.5)?"ew-resize":e.Util._inRange(L,135-22.5,135+22.5)?"nwse-resize":e.Util._inRange(L,180-22.5,180+22.5)?"ns-resize":e.Util._inRange(L,225-22.5,225+22.5)?"nesw-resize":e.Util._inRange(L,270-22.5,270+22.5)?"ew-resize":e.Util._inRange(L,315-22.5,315+22.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+L),"pointer")}const g=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function b(I){return{x:I.x+I.width/2*Math.cos(I.rotation)+I.height/2*Math.sin(-I.rotation),y:I.y+I.height/2*Math.cos(I.rotation)+I.width/2*Math.sin(I.rotation)}}function y(I,O,M){const L=M.x+(I.x-M.x)*Math.cos(O)-(I.y-M.y)*Math.sin(O),V=M.y+(I.x-M.x)*Math.sin(O)+(I.y-M.y)*Math.cos(O);return{...I,rotation:I.rotation+O,x:L,y:V}}function x(I,O){const M=b(I);return y(I,O,M)}function w(I,O,M){let L=O;for(let V=0;V<I.length;V++){const D=o.Konva.getAngle(I[V]),j=Math.abs(D-O)%(Math.PI*2);Math.min(j,Math.PI*2-j)<M&&(L=D)}return L}let S=0,C=class extends s.Group{constructor(O){super(O),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(c,this.update),this.getNode()&&this.update()}attachTo(O){return this.setNode(O),this}setNode(O){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([O])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return l+this._id}setNodes(O=[]){this._nodes&&this._nodes.length&&this.detach();const M=O.filter(V=>V.isAncestorOf(this)?(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=O=M,O.length===1&&this.useSingleNodeRotation()?this.rotation(O[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(V=>{const D=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},j=V._attrsAffectingSize.map(z=>z+"Change."+this._getEventNamespace()).join(" ");V.on(j,D),V.on(d.map(z=>z+`.${this._getEventNamespace()}`).join(" "),D),V.on(`absoluteTransformChange.${this._getEventNamespace()}`,D),this._proxyDrag(V)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(O){let M;O.on(`dragstart.${this._getEventNamespace()}`,L=>{M=O.getAbsolutePosition(),!this.isDragging()&&O!==this.findOne(".back")&&this.startDrag(L,!1)}),O.on(`dragmove.${this._getEventNamespace()}`,L=>{if(!M)return;const V=O.getAbsolutePosition(),D=V.x-M.x,j=V.y-M.y;this.nodes().forEach(z=>{if(z===O||z.isDragging())return;const G=z.getAbsolutePosition();z.setAbsolutePosition({x:G.x+D,y:G.y+j}),z.startDrag(L)}),M=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(O=>{O.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(O,M=this.rotation(),L){const V=O.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),D=O.getAbsoluteScale(L),j=O.getAbsolutePosition(L),z=V.x*D.x-O.offsetX()*D.x,G=V.y*D.y-O.offsetY()*D.y,ee=(o.Konva.getAngle(O.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),ne={x:j.x+z*Math.cos(ee)+G*Math.sin(-ee),y:j.y+G*Math.cos(ee)+z*Math.sin(ee),width:V.width*D.x,height:V.height*D.y,rotation:ee};return y(ne,-o.Konva.getAngle(M),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const M=[];this.nodes().map(ee=>{const ne=ee.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ue=[{x:ne.x,y:ne.y},{x:ne.x+ne.width,y:ne.y},{x:ne.x+ne.width,y:ne.y+ne.height},{x:ne.x,y:ne.y+ne.height}],X=ee.getAbsoluteTransform();ue.forEach(function(W){const te=X.point(W);M.push(te)})});const L=new e.Transform;L.rotate(-o.Konva.getAngle(this.rotation()));let V=1/0,D=1/0,j=-1/0,z=-1/0;M.forEach(function(ee){const ne=L.point(ee);V===void 0&&(V=j=ne.x,D=z=ne.y),V=Math.min(V,ne.x),D=Math.min(D,ne.y),j=Math.max(j,ne.x),z=Math.max(z,ne.y)}),L.invert();const G=L.point({x:V,y:D});return{x:G.x,y:G.y,width:j-V,height:z-D,rotation:o.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),g.forEach(O=>{this._createAnchor(O)}),this._createAnchor("rotater")}_createAnchor(O){const M=new i.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:O+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:p?10:"auto"}),L=this;M.on("mousedown touchstart",function(V){L._handleMouseDown(V)}),M.on("dragstart",V=>{M.stopDrag(),V.cancelBubble=!0}),M.on("dragend",V=>{V.cancelBubble=!0}),M.on("mouseenter",()=>{const V=o.Konva.getAngle(this.rotation()),D=this.rotateAnchorCursor(),j=m(O,V,D);M.getStage().content&&(M.getStage().content.style.cursor=j),this._cursorChange=!0}),M.on("mouseout",()=>{M.getStage().content&&(M.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(M)}_createBack(){const O=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(M,L){const V=L.getParent(),D=V.padding();M.beginPath(),M.rect(-D,-D,L.width()+D*2,L.height()+D*2),M.moveTo(L.width()/2,-D),V.rotateEnabled()&&V.rotateLineVisible()&&M.lineTo(L.width()/2,-V.rotateAnchorOffset()*e.Util._sign(L.height())-D),M.fillStrokeShape(L)},hitFunc:(M,L)=>{if(!this.shouldOverdrawWholeArea())return;const V=this.padding();M.beginPath(),M.rect(-V,-V,L.width()+V*2,L.height()+V*2),M.fillStrokeShape(L)}});this.add(O),this._proxyDrag(O),O.on("dragstart",M=>{M.cancelBubble=!0}),O.on("dragmove",M=>{M.cancelBubble=!0}),O.on("dragend",M=>{M.cancelBubble=!0}),this.on("dragmove",M=>{this.update()})}_handleMouseDown(O){if(this._transforming)return;this._movingAnchorName=O.target.name().split(" ")[0];const M=this._getNodeRect(),L=M.width,V=M.height,D=Math.sqrt(Math.pow(L,2)+Math.pow(V,2));this.sin=Math.abs(V/D),this.cos=Math.abs(L/D),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const j=O.target.getAbsolutePosition(),z=O.target.getStage().getPointerPosition();this._anchorDragOffset={x:z.x-j.x,y:z.y-j.y},S++,this._fire("transformstart",{evt:O.evt,target:this.getNode()}),this._nodes.forEach(G=>{G._fire("transformstart",{evt:O.evt,target:G})})}_handleMouseMove(O){let M,L,V;const D=this.findOne("."+this._movingAnchorName),j=D.getStage();j.setPointersPositions(O);const z=j.getPointerPosition();let G={x:z.x-this._anchorDragOffset.x,y:z.y-this._anchorDragOffset.y};const ee=D.getAbsolutePosition();this.anchorDragBoundFunc()&&(G=this.anchorDragBoundFunc()(ee,G,O)),D.setAbsolutePosition(G);const ne=D.getAbsolutePosition();if(ee.x===ne.x&&ee.y===ne.y)return;if(this._movingAnchorName==="rotater"){const Ee=this._getNodeRect();M=D.x()-Ee.width/2,L=-D.y()+Ee.height/2;let Ae=Math.atan2(-L,M)+Math.PI/2;Ee.height<0&&(Ae-=Math.PI);const me=o.Konva.getAngle(this.rotation())+Ae,Oe=o.Konva.getAngle(this.rotationSnapTolerance()),Ye=w(this.rotationSnaps(),me,Oe)-Ee.rotation,lt=x(Ee,Ye);this._fitNodesInto(lt,O);return}const ue=this.shiftBehavior();let X;ue==="inverted"?X=this.keepRatio()&&!O.shiftKey:ue==="none"?X=this.keepRatio():X=this.keepRatio()||O.shiftKey;var oe=this.centeredScaling()||O.altKey;if(this._movingAnchorName==="top-left"){if(X){var W=oe?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};V=Math.sqrt(Math.pow(W.x-D.x(),2)+Math.pow(W.y-D.y(),2));var te=this.findOne(".top-left").x()>W.x?-1:1,q=this.findOne(".top-left").y()>W.y?-1:1;M=V*this.cos*te,L=V*this.sin*q,this.findOne(".top-left").x(W.x-M),this.findOne(".top-left").y(W.y-L)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(D.y());else if(this._movingAnchorName==="top-right"){if(X){var W=oe?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};V=Math.sqrt(Math.pow(D.x()-W.x,2)+Math.pow(W.y-D.y(),2));var te=this.findOne(".top-right").x()<W.x?-1:1,q=this.findOne(".top-right").y()>W.y?-1:1;M=V*this.cos*te,L=V*this.sin*q,this.findOne(".top-right").x(W.x+M),this.findOne(".top-right").y(W.y-L)}var J=D.position();this.findOne(".top-left").y(J.y),this.findOne(".bottom-right").x(J.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(D.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(D.x());else if(this._movingAnchorName==="bottom-left"){if(X){var W=oe?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};V=Math.sqrt(Math.pow(W.x-D.x(),2)+Math.pow(D.y()-W.y,2));var te=W.x<D.x()?-1:1,q=D.y()<W.y?-1:1;M=V*this.cos*te,L=V*this.sin*q,D.x(W.x-M),D.y(W.y+L)}J=D.position(),this.findOne(".top-left").x(J.x),this.findOne(".bottom-right").y(J.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(D.y());else if(this._movingAnchorName==="bottom-right"){if(X){var W=oe?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};V=Math.sqrt(Math.pow(D.x()-W.x,2)+Math.pow(D.y()-W.y,2));var te=this.findOne(".bottom-right").x()<W.x?-1:1,q=this.findOne(".bottom-right").y()<W.y?-1:1;M=V*this.cos*te,L=V*this.sin*q,this.findOne(".bottom-right").x(W.x+M),this.findOne(".bottom-right").y(W.y+L)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var oe=this.centeredScaling()||O.altKey;if(oe){const Ee=this.findOne(".top-left"),Ae=this.findOne(".bottom-right"),ge=Ee.x(),me=Ee.y(),Oe=this.getWidth()-Ae.x(),Me=this.getHeight()-Ae.y();Ae.move({x:-ge,y:-me}),Ee.move({x:Oe,y:Me})}const de=this.findOne(".top-left").getAbsolutePosition();M=de.x,L=de.y;const ce=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),pe=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:M,y:L,width:ce,height:pe,rotation:o.Konva.getAngle(this.rotation())},O)}_handleMouseUp(O){this._removeEvents(O)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(O){var M;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const L=this.getNode();S--,this._fire("transformend",{evt:O,target:L}),(M=this.getLayer())===null||M===void 0||M.batchDraw(),L&&this._nodes.forEach(V=>{var D;V._fire("transformend",{evt:O,target:V}),(D=V.getLayer())===null||D===void 0||D.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(O,M){const L=this._getNodeRect(),V=1;if(e.Util._inRange(O.width,-this.padding()*2-V,V)){this.update();return}if(e.Util._inRange(O.height,-this.padding()*2-V,V)){this.update();return}const D=new e.Transform;if(D.rotate(o.Konva.getAngle(this.rotation())),this._movingAnchorName&&O.width<0&&this._movingAnchorName.indexOf("left")>=0){const X=D.point({x:-this.padding()*2,y:0});O.x+=X.x,O.y+=X.y,O.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y}else if(this._movingAnchorName&&O.width<0&&this._movingAnchorName.indexOf("right")>=0){const X=D.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,O.width+=this.padding()*2}if(this._movingAnchorName&&O.height<0&&this._movingAnchorName.indexOf("top")>=0){const X=D.point({x:0,y:-this.padding()*2});O.x+=X.x,O.y+=X.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,O.height+=this.padding()*2}else if(this._movingAnchorName&&O.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const X=D.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,O.height+=this.padding()*2}if(this.boundBoxFunc()){const X=this.boundBoxFunc()(L,O);X?O=X:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const j=1e7,z=new e.Transform;z.translate(L.x,L.y),z.rotate(L.rotation),z.scale(L.width/j,L.height/j);const G=new e.Transform,ee=O.width/j,ne=O.height/j;this.flipEnabled()===!1?(G.translate(O.x,O.y),G.rotate(O.rotation),G.translate(O.width<0?O.width:0,O.height<0?O.height:0),G.scale(Math.abs(ee),Math.abs(ne))):(G.translate(O.x,O.y),G.rotate(O.rotation),G.scale(ee,ne));const ue=G.multiply(z.invert());this._nodes.forEach(X=>{var W;const te=X.getParent().getAbsoluteTransform(),q=X.getTransform().copy();q.translate(X.offsetX(),X.offsetY());const J=new e.Transform;J.multiply(te.copy().invert()).multiply(ue).multiply(te).multiply(q);const oe=J.decompose();X.setAttrs(oe),(W=X.getLayer())===null||W===void 0||W.batchDraw()}),this.rotation(e.Util._getRotation(O.rotation)),this._nodes.forEach(X=>{this._fire("transform",{evt:M,target:X}),X._fire("transform",{evt:M,target:X})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(O,M){this.findOne(O).setAttrs(M)}update(){var O;const M=this._getNodeRect();this.rotation(e.Util._getRotation(M.rotation));const L=M.width,V=M.height,D=this.enabledAnchors(),j=this.resizeEnabled(),z=this.padding(),G=this.anchorSize(),ee=this.find("._anchor");ee.forEach(ue=>{ue.setAttrs({width:G,height:G,offsetX:G/2,offsetY:G/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:G/2+z,offsetY:G/2+z,visible:j&&D.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:L/2,y:0,offsetY:G/2+z,visible:j&&D.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:L,y:0,offsetX:G/2-z,offsetY:G/2+z,visible:j&&D.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:V/2,offsetX:G/2+z,visible:j&&D.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:L,y:V/2,offsetX:G/2-z,visible:j&&D.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:V,offsetX:G/2+z,offsetY:G/2-z,visible:j&&D.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:L/2,y:V,offsetY:G/2-z,visible:j&&D.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:L,y:V,offsetX:G/2-z,offsetY:G/2-z,visible:j&&D.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:L/2,y:-this.rotateAnchorOffset()*e.Util._sign(V)-z,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:L,height:V,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const ne=this.anchorStyleFunc();ne&&ee.forEach(ue=>{ne(ue)}),(O=this.getLayer())===null||O===void 0||O.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const O=this.findOne("."+this._movingAnchorName);O&&O.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(O){return n.Node.prototype.clone.call(this,O)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};OA.Transformer=C,C.isTransforming=()=>S>0;function R(I){return I instanceof Array||e.Util.warn("enabledAnchors value should be an array"),I instanceof Array&&I.forEach(function(O){g.indexOf(O)===-1&&e.Util.warn("Unknown anchor name: "+O+". Available names are: "+g.join(", "))}),I||[]}return C.prototype.className="Transformer",(0,u._registerNode)(C),t.Factory.addGetterSetter(C,"enabledAnchors",g,R),t.Factory.addGetterSetter(C,"flipEnabled",!0,(0,a.getBooleanValidator)()),t.Factory.addGetterSetter(C,"resizeEnabled",!0),t.Factory.addGetterSetter(C,"anchorSize",10,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"rotateEnabled",!0),t.Factory.addGetterSetter(C,"rotateLineVisible",!0),t.Factory.addGetterSetter(C,"rotationSnaps",[]),t.Factory.addGetterSetter(C,"rotateAnchorOffset",50,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(C,"rotationSnapTolerance",5,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"borderEnabled",!0),t.Factory.addGetterSetter(C,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(C,"anchorStrokeWidth",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"anchorFill","white"),t.Factory.addGetterSetter(C,"anchorCornerRadius",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(C,"borderStrokeWidth",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"borderDash"),t.Factory.addGetterSetter(C,"keepRatio",!0),t.Factory.addGetterSetter(C,"shiftBehavior","default"),t.Factory.addGetterSetter(C,"centeredScaling",!1),t.Factory.addGetterSetter(C,"ignoreStroke",!1),t.Factory.addGetterSetter(C,"padding",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"nodes"),t.Factory.addGetterSetter(C,"node"),t.Factory.addGetterSetter(C,"boundBoxFunc"),t.Factory.addGetterSetter(C,"anchorDragBoundFunc"),t.Factory.addGetterSetter(C,"anchorStyleFunc"),t.Factory.addGetterSetter(C,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(C,"useSingleNodeRotation",!0),t.Factory.backCompat(C,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),OA}var MA={},Gle;function mbt(){if(Gle)return MA;Gle=1,Object.defineProperty(MA,"__esModule",{value:!0}),MA.Wedge=void 0;const e=Yr(),t=qu(),n=Vr(),r=Zr(),i=Vr();let s=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return MA.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"clockwise",!1),e.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),MA}var LA={},Yle;function gbt(){if(Yle)return LA;Yle=1,Object.defineProperty(LA,"__esModule",{value:!0}),LA.Blur=void 0;const e=Yr(),t=wa(),n=Zr();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(u,l){const c=u.data,f=u.width,d=u.height;let h,p,m,g,b,y,x,w,S,C,R,I,O,M,L,V,D,j,z,G,ee,ne,ue,X;const W=l+l+1,te=f-1,q=d-1,J=l+1,oe=J*(J+1)/2,de=new r,ce=i[l],pe=s[l];let Ee=null,Ae=de,ge=null,me=null;for(m=1;m<W;m++)Ae=Ae.next=new r,m===J&&(Ee=Ae);for(Ae.next=de,x=y=0,p=0;p<d;p++){for(V=D=j=z=w=S=C=R=0,I=J*(G=c[y]),O=J*(ee=c[y+1]),M=J*(ne=c[y+2]),L=J*(ue=c[y+3]),w+=oe*G,S+=oe*ee,C+=oe*ne,R+=oe*ue,Ae=de,m=0;m<J;m++)Ae.r=G,Ae.g=ee,Ae.b=ne,Ae.a=ue,Ae=Ae.next;for(m=1;m<J;m++)g=y+((te<m?te:m)<<2),w+=(Ae.r=G=c[g])*(X=J-m),S+=(Ae.g=ee=c[g+1])*X,C+=(Ae.b=ne=c[g+2])*X,R+=(Ae.a=ue=c[g+3])*X,V+=G,D+=ee,j+=ne,z+=ue,Ae=Ae.next;for(ge=de,me=Ee,h=0;h<f;h++)c[y+3]=ue=R*ce>>pe,ue!==0?(ue=255/ue,c[y]=(w*ce>>pe)*ue,c[y+1]=(S*ce>>pe)*ue,c[y+2]=(C*ce>>pe)*ue):c[y]=c[y+1]=c[y+2]=0,w-=I,S-=O,C-=M,R-=L,I-=ge.r,O-=ge.g,M-=ge.b,L-=ge.a,g=x+((g=h+l+1)<te?g:te)<<2,V+=ge.r=c[g],D+=ge.g=c[g+1],j+=ge.b=c[g+2],z+=ge.a=c[g+3],w+=V,S+=D,C+=j,R+=z,ge=ge.next,I+=G=me.r,O+=ee=me.g,M+=ne=me.b,L+=ue=me.a,V-=G,D-=ee,j-=ne,z-=ue,me=me.next,y+=4;x+=f}for(h=0;h<f;h++){for(D=j=z=V=S=C=R=w=0,y=h<<2,I=J*(G=c[y]),O=J*(ee=c[y+1]),M=J*(ne=c[y+2]),L=J*(ue=c[y+3]),w+=oe*G,S+=oe*ee,C+=oe*ne,R+=oe*ue,Ae=de,m=0;m<J;m++)Ae.r=G,Ae.g=ee,Ae.b=ne,Ae.a=ue,Ae=Ae.next;for(b=f,m=1;m<=l;m++)y=b+h<<2,w+=(Ae.r=G=c[y])*(X=J-m),S+=(Ae.g=ee=c[y+1])*X,C+=(Ae.b=ne=c[y+2])*X,R+=(Ae.a=ue=c[y+3])*X,V+=G,D+=ee,j+=ne,z+=ue,Ae=Ae.next,m<q&&(b+=f);for(y=h,ge=de,me=Ee,p=0;p<d;p++)g=y<<2,c[g+3]=ue=R*ce>>pe,ue>0?(ue=255/ue,c[g]=(w*ce>>pe)*ue,c[g+1]=(S*ce>>pe)*ue,c[g+2]=(C*ce>>pe)*ue):c[g]=c[g+1]=c[g+2]=0,w-=I,S-=O,C-=M,R-=L,I-=ge.r,O-=ge.g,M-=ge.b,L-=ge.a,g=h+((g=p+J)<q?g:q)*f<<2,w+=V+=ge.r=c[g],S+=D+=ge.g=c[g+1],C+=j+=ge.b=c[g+2],R+=z+=ge.a=c[g+3],ge=ge.next,I+=G=me.r,O+=ee=me.g,M+=ne=me.b,L+=ue=me.a,V-=G,D-=ee,j-=ne,z-=ue,me=me.next,y+=f}}const a=function(l){const c=Math.round(this.blurRadius());c>0&&o(l,c)};return LA.Blur=a,e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),LA}var FA={},Kle;function ybt(){if(Kle)return FA;Kle=1,Object.defineProperty(FA,"__esModule",{value:!0}),FA.Brighten=void 0;const e=Yr(),t=wa(),n=Zr(),r=function(i){const s=this.brightness()*255,o=i.data,a=o.length;for(let u=0;u<a;u+=4)o[u]+=s,o[u+1]+=s,o[u+2]+=s};return FA.Brighten=r,e.Factory.addGetterSetter(t.Node,"brightness",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),FA}var $A={},Xle;function vbt(){if(Xle)return $A;Xle=1,Object.defineProperty($A,"__esModule",{value:!0}),$A.Contrast=void 0;const e=Yr(),t=wa(),n=Zr(),r=function(i){const s=Math.pow((this.contrast()+100)/100,2),o=i.data,a=o.length;let u=150,l=150,c=150;for(let f=0;f<a;f+=4)u=o[f],l=o[f+1],c=o[f+2],u/=255,u-=.5,u*=s,u+=.5,u*=255,l/=255,l-=.5,l*=s,l+=.5,l*=255,c/=255,c-=.5,c*=s,c+=.5,c*=255,u=u<0?0:u>255?255:u,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,o[f]=u,o[f+1]=l,o[f+2]=c};return $A.Contrast=r,e.Factory.addGetterSetter(t.Node,"contrast",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),$A}var BA={},Qle;function bbt(){if(Qle)return BA;Qle=1,Object.defineProperty(BA,"__esModule",{value:!0}),BA.Emboss=void 0;const e=Yr(),t=wa(),n=Qo(),r=Zr(),i=function(s){const o=this.embossStrength()*10,a=this.embossWhiteLevel()*255,u=this.embossDirection(),l=this.embossBlend(),c=s.data,f=s.width,d=s.height,h=f*4;let p=0,m=0,g=d;switch(u){case"top-left":p=-1,m=-1;break;case"top":p=-1,m=0;break;case"top-right":p=-1,m=1;break;case"right":p=0,m=1;break;case"bottom-right":p=1,m=1;break;case"bottom":p=1,m=0;break;case"bottom-left":p=1,m=-1;break;case"left":p=0,m=-1;break;default:n.Util.error("Unknown emboss direction: "+u)}do{const b=(g-1)*h;let y=p;g+y<1&&(y=0),g+y>d&&(y=0);const x=(g-1+y)*f*4;let w=f;do{const S=b+(w-1)*4;let C=m;w+C<1&&(C=0),w+C>f&&(C=0);const R=x+(w-1+C)*4,I=c[S]-c[R],O=c[S+1]-c[R+1],M=c[S+2]-c[R+2];let L=I;const V=L>0?L:-L,D=O>0?O:-O,j=M>0?M:-M;if(D>V&&(L=O),j>V&&(L=M),L*=o,l){const z=c[S]+L,G=c[S+1]+L,ee=c[S+2]+L;c[S]=z>255?255:z<0?0:z,c[S+1]=G>255?255:G<0?0:G,c[S+2]=ee>255?255:ee<0?0:ee}else{let z=a-L;z<0?z=0:z>255&&(z=255),c[S]=c[S+1]=c[S+2]=z}}while(--w)}while(--g)};return BA.Emboss=i,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),BA}var jA={},Jle;function xbt(){if(Jle)return jA;Jle=1,Object.defineProperty(jA,"__esModule",{value:!0}),jA.Enhance=void 0;const e=Yr(),t=wa(),n=Zr();function r(s,o,a,u,l){const c=a-o,f=l-u;if(c===0)return u+f/2;if(f===0)return u;let d=(s-o)/c;return d=f*d+u,d}const i=function(s){const o=s.data,a=o.length;let u=o[0],l=u,c,f=o[1],d=f,h,p=o[2],m=p,g;const b=this.enhance();if(b===0)return;for(let L=0;L<a;L+=4)c=o[L+0],c<u?u=c:c>l&&(l=c),h=o[L+1],h<f?f=h:h>d&&(d=h),g=o[L+2],g<p?p=g:g>m&&(m=g);l===u&&(l=255,u=0),d===f&&(d=255,f=0),m===p&&(m=255,p=0);let y,x,w,S,C,R,I,O,M;b>0?(x=l+b*(255-l),w=u-b*(u-0),C=d+b*(255-d),R=f-b*(f-0),O=m+b*(255-m),M=p-b*(p-0)):(y=(l+u)*.5,x=l+b*(l-y),w=u+b*(u-y),S=(d+f)*.5,C=d+b*(d-S),R=f+b*(f-S),I=(m+p)*.5,O=m+b*(m-I),M=p+b*(p-I));for(let L=0;L<a;L+=4)o[L+0]=r(o[L+0],u,l,w,x),o[L+1]=r(o[L+1],f,d,R,C),o[L+2]=r(o[L+2],p,m,M,O)};return jA.Enhance=i,e.Factory.addGetterSetter(t.Node,"enhance",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),jA}var UA={},Zle;function _bt(){if(Zle)return UA;Zle=1,Object.defineProperty(UA,"__esModule",{value:!0}),UA.Grayscale=void 0;const e=function(t){const n=t.data,r=n.length;for(let i=0;i<r;i+=4){const s=.34*n[i]+.5*n[i+1]+.16*n[i+2];n[i]=s,n[i+1]=s,n[i+2]=s}};return UA.Grayscale=e,UA}var zA={},ece;function wbt(){if(ece)return zA;ece=1,Object.defineProperty(zA,"__esModule",{value:!0}),zA.HSL=void 0;const e=Yr(),t=wa(),n=Zr();e.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter);const r=function(i){const s=i.data,o=s.length,a=1,u=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,f=a*u*Math.cos(l*Math.PI/180),d=a*u*Math.sin(l*Math.PI/180),h=.299*a+.701*f+.167*d,p=.587*a-.587*f+.33*d,m=.114*a-.114*f-.497*d,g=.299*a-.299*f-.328*d,b=.587*a+.413*f+.035*d,y=.114*a-.114*f+.293*d,x=.299*a-.3*f+1.25*d,w=.587*a-.586*f-1.05*d,S=.114*a+.886*f-.2*d;let C,R,I,O;for(let M=0;M<o;M+=4)C=s[M+0],R=s[M+1],I=s[M+2],O=s[M+3],s[M+0]=h*C+p*R+m*I+c,s[M+1]=g*C+b*R+y*I+c,s[M+2]=x*C+w*R+S*I+c,s[M+3]=O};return zA.HSL=r,zA}var VA={},tce;function Ebt(){if(tce)return VA;tce=1,Object.defineProperty(VA,"__esModule",{value:!0}),VA.HSV=void 0;const e=Yr(),t=wa(),n=Zr(),r=function(i){const s=i.data,o=s.length,a=Math.pow(2,this.value()),u=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=a*u*Math.cos(l*Math.PI/180),f=a*u*Math.sin(l*Math.PI/180),d=.299*a+.701*c+.167*f,h=.587*a-.587*c+.33*f,p=.114*a-.114*c-.497*f,m=.299*a-.299*c-.328*f,g=.587*a+.413*c+.035*f,b=.114*a-.114*c+.293*f,y=.299*a-.3*c+1.25*f,x=.587*a-.586*c-1.05*f,w=.114*a+.886*c-.2*f;let S,C,R,I;for(let O=0;O<o;O+=4)S=s[O+0],C=s[O+1],R=s[O+2],I=s[O+3],s[O+0]=d*S+h*C+p*R,s[O+1]=m*S+g*C+b*R,s[O+2]=y*S+x*C+w*R,s[O+3]=I};return VA.HSV=r,e.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),VA}var HA={},nce;function Sbt(){if(nce)return HA;nce=1,Object.defineProperty(HA,"__esModule",{value:!0}),HA.Invert=void 0;const e=function(t){const n=t.data,r=n.length;for(let i=0;i<r;i+=4)n[i]=255-n[i],n[i+1]=255-n[i+1],n[i+2]=255-n[i+2]};return HA.Invert=e,HA}var qA={},rce;function Tbt(){if(rce)return qA;rce=1,Object.defineProperty(qA,"__esModule",{value:!0}),qA.Kaleidoscope=void 0;const e=Yr(),t=wa(),n=Qo(),r=Zr(),i=function(a,u,l){const c=a.data,f=u.data,d=a.width,h=a.height,p=l.polarCenterX||d/2,m=l.polarCenterY||h/2;let g=Math.sqrt(p*p+m*m),b=d-p,y=h-m;const x=Math.sqrt(b*b+y*y);g=x>g?x:g;const w=h,S=d,C=360/S*Math.PI/180;for(let R=0;R<S;R+=1){const I=Math.sin(R*C),O=Math.cos(R*C);for(let M=0;M<w;M+=1){b=Math.floor(p+g*M/w*O),y=Math.floor(m+g*M/w*I);let L=(y*d+b)*4;const V=c[L+0],D=c[L+1],j=c[L+2],z=c[L+3];L=(R+M*d)*4,f[L+0]=V,f[L+1]=D,f[L+2]=j,f[L+3]=z}}},s=function(a,u,l){const c=a.data,f=u.data,d=a.width,h=a.height,p=l.polarCenterX||d/2,m=l.polarCenterY||h/2;let g=Math.sqrt(p*p+m*m),b=d-p,y=h-m;const x=Math.sqrt(b*b+y*y);g=x>g?x:g;const w=h,S=d,C=0;let R,I;for(b=0;b<d;b+=1)for(y=0;y<h;y+=1){const O=b-p,M=y-m,L=Math.sqrt(O*O+M*M)*w/g;let V=(Math.atan2(M,O)*180/Math.PI+360+C)%360;V=V*S/360,R=Math.floor(V),I=Math.floor(L);let D=(I*d+R)*4;const j=c[D+0],z=c[D+1],G=c[D+2],ee=c[D+3];D=(y*d+b)*4,f[D+0]=j,f[D+1]=z,f[D+2]=G,f[D+3]=ee}},o=function(a){const u=a.width,l=a.height;let c,f,d,h,p,m,g,b,y,x,w=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),C=Math.floor(u*(S%360)/360);if(w<1)return;const R=n.Util.createCanvasElement();R.width=u,R.height=l;const I=R.getContext("2d").getImageData(0,0,u,l);n.Util.releaseCanvas(R),i(a,I,{polarCenterX:u/2,polarCenterY:l/2});let O=u/Math.pow(2,w);for(;O<=8;)O=O*2,w-=1;O=Math.ceil(O);let M=O,L=0,V=M,D=1;for(C+O>u&&(L=M,V=0,D=-1),f=0;f<l;f+=1)for(c=L;c!==V;c+=D)d=Math.round(c+C)%u,y=(u*f+d)*4,p=I.data[y+0],m=I.data[y+1],g=I.data[y+2],b=I.data[y+3],x=(u*f+c)*4,I.data[x+0]=p,I.data[x+1]=m,I.data[x+2]=g,I.data[x+3]=b;for(f=0;f<l;f+=1)for(M=Math.floor(O),h=0;h<w;h+=1){for(c=0;c<M+1;c+=1)y=(u*f+c)*4,p=I.data[y+0],m=I.data[y+1],g=I.data[y+2],b=I.data[y+3],x=(u*f+M*2-c-1)*4,I.data[x+0]=p,I.data[x+1]=m,I.data[x+2]=g,I.data[x+3]=b;M*=2}s(I,a,{polarRotation:0})};return qA.Kaleidoscope=o,e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),qA}var WA={},ice;function Cbt(){if(ice)return WA;ice=1,Object.defineProperty(WA,"__esModule",{value:!0}),WA.Mask=void 0;const e=Yr(),t=wa(),n=Zr();function r(d,h,p){let m=(p*d.width+h)*4;const g=[];return g.push(d.data[m++],d.data[m++],d.data[m++],d.data[m++]),g}function i(d,h){return Math.sqrt(Math.pow(d[0]-h[0],2)+Math.pow(d[1]-h[1],2)+Math.pow(d[2]-h[2],2))}function s(d){const h=[0,0,0];for(let p=0;p<d.length;p++)h[0]+=d[p][0],h[1]+=d[p][1],h[2]+=d[p][2];return h[0]/=d.length,h[1]/=d.length,h[2]/=d.length,h}function o(d,h){const p=r(d,0,0),m=r(d,d.width-1,0),g=r(d,0,d.height-1),b=r(d,d.width-1,d.height-1),y=h||10;if(i(p,m)<y&&i(m,b)<y&&i(b,g)<y&&i(g,p)<y){const x=s([m,p,b,g]),w=[];for(let S=0;S<d.width*d.height;S++){const C=i(x,[d.data[S*4],d.data[S*4+1],d.data[S*4+2]]);w[S]=C<y?0:255}return w}}function a(d,h){for(let p=0;p<d.width*d.height;p++)d.data[4*p+3]=h[p]}function u(d,h,p){const m=[1,1,1,1,0,1,1,1,1],g=Math.round(Math.sqrt(m.length)),b=Math.floor(g/2),y=[];for(let x=0;x<p;x++)for(let w=0;w<h;w++){const S=x*h+w;let C=0;for(let R=0;R<g;R++)for(let I=0;I<g;I++){const O=x+R-b,M=w+I-b;if(O>=0&&O<p&&M>=0&&M<h){const L=O*h+M,V=m[R*g+I];C+=d[L]*V}}y[S]=C===255*8?255:0}return y}function l(d,h,p){const m=[1,1,1,1,1,1,1,1,1],g=Math.round(Math.sqrt(m.length)),b=Math.floor(g/2),y=[];for(let x=0;x<p;x++)for(let w=0;w<h;w++){const S=x*h+w;let C=0;for(let R=0;R<g;R++)for(let I=0;I<g;I++){const O=x+R-b,M=w+I-b;if(O>=0&&O<p&&M>=0&&M<h){const L=O*h+M,V=m[R*g+I];C+=d[L]*V}}y[S]=C>=255*4?255:0}return y}function c(d,h,p){const m=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],g=Math.round(Math.sqrt(m.length)),b=Math.floor(g/2),y=[];for(let x=0;x<p;x++)for(let w=0;w<h;w++){const S=x*h+w;let C=0;for(let R=0;R<g;R++)for(let I=0;I<g;I++){const O=x+R-b,M=w+I-b;if(O>=0&&O<p&&M>=0&&M<h){const L=O*h+M,V=m[R*g+I];C+=d[L]*V}}y[S]=C}return y}const f=function(d){const h=this.threshold();let p=o(d,h);return p&&(p=u(p,d.width,d.height),p=l(p,d.width,d.height),p=c(p,d.width,d.height),a(d,p)),d};return WA.Mask=f,e.Factory.addGetterSetter(t.Node,"threshold",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),WA}var GA={},sce;function Abt(){if(sce)return GA;sce=1,Object.defineProperty(GA,"__esModule",{value:!0}),GA.Noise=void 0;const e=Yr(),t=wa(),n=Zr(),r=function(i){const s=this.noise()*255,o=i.data,a=o.length,u=s/2;for(let l=0;l<a;l+=4)o[l+0]+=u-2*u*Math.random(),o[l+1]+=u-2*u*Math.random(),o[l+2]+=u-2*u*Math.random()};return GA.Noise=r,e.Factory.addGetterSetter(t.Node,"noise",.2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),GA}var YA={},oce;function kbt(){if(oce)return YA;oce=1,Object.defineProperty(YA,"__esModule",{value:!0}),YA.Pixelate=void 0;const e=Yr(),t=Qo(),n=wa(),r=Zr(),i=function(s){let o=Math.ceil(this.pixelSize()),a=s.width,u=s.height,l,c,f,d,h,p,m,g=Math.ceil(a/o),b=Math.ceil(u/o),y,x,w,S,C,R,I,O=s.data;if(o<=0){t.Util.error("pixelSize value can not be <= 0");return}for(C=0;C<g;C+=1)for(R=0;R<b;R+=1){for(d=0,h=0,p=0,m=0,y=C*o,x=y+o,w=R*o,S=w+o,I=0,l=y;l<x;l+=1)if(!(l>=a))for(c=w;c<S;c+=1)c>=u||(f=(a*c+l)*4,d+=O[f+0],h+=O[f+1],p+=O[f+2],m+=O[f+3],I+=1);for(d=d/I,h=h/I,p=p/I,m=m/I,l=y;l<x;l+=1)if(!(l>=a))for(c=w;c<S;c+=1)c>=u||(f=(a*c+l)*4,O[f+0]=d,O[f+1]=h,O[f+2]=p,O[f+3]=m)}};return YA.Pixelate=i,e.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),YA}var KA={},ace;function Rbt(){if(ace)return KA;ace=1,Object.defineProperty(KA,"__esModule",{value:!0}),KA.Posterize=void 0;const e=Yr(),t=wa(),n=Zr(),r=function(i){const s=Math.round(this.levels()*254)+1,o=i.data,a=o.length,u=255/s;for(let l=0;l<a;l+=1)o[l]=Math.floor(o[l]/u)*u};return KA.Posterize=r,e.Factory.addGetterSetter(t.Node,"levels",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),KA}var XA={},uce;function Ibt(){if(uce)return XA;uce=1,Object.defineProperty(XA,"__esModule",{value:!0}),XA.RGB=void 0;const e=Yr(),t=wa(),n=Zr(),r=function(i){const s=i.data,o=s.length,a=this.red(),u=this.green(),l=this.blue();for(let c=0;c<o;c+=4){const f=(.34*s[c]+.5*s[c+1]+.16*s[c+2])/255;s[c]=f*a,s[c+1]=f*u,s[c+2]=f*l,s[c+3]=s[c+3]}};return XA.RGB=r,e.Factory.addGetterSetter(t.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,e.Factory.afterSetFilter),XA}var QA={},lce;function Pbt(){if(lce)return QA;lce=1,Object.defineProperty(QA,"__esModule",{value:!0}),QA.RGBA=void 0;const e=Yr(),t=wa(),n=Zr(),r=function(i){const s=i.data,o=s.length,a=this.red(),u=this.green(),l=this.blue(),c=this.alpha();for(let f=0;f<o;f+=4){const d=1-c;s[f]=a*c+s[f]*d,s[f+1]=u*c+s[f+1]*d,s[f+2]=l*c+s[f+2]*d}};return QA.RGBA=r,e.Factory.addGetterSetter(t.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(i){return this._filterUpToDate=!1,i>1?1:i<0?0:i}),QA}var JA={},cce;function Nbt(){if(cce)return JA;cce=1,Object.defineProperty(JA,"__esModule",{value:!0}),JA.Sepia=void 0;const e=function(t){const n=t.data,r=n.length;for(let i=0;i<r;i+=4){const s=n[i+0],o=n[i+1],a=n[i+2];n[i+0]=Math.min(255,s*.393+o*.769+a*.189),n[i+1]=Math.min(255,s*.349+o*.686+a*.168),n[i+2]=Math.min(255,s*.272+o*.534+a*.131)}};return JA.Sepia=e,JA}var ZA={},fce;function Dbt(){if(fce)return ZA;fce=1,Object.defineProperty(ZA,"__esModule",{value:!0}),ZA.Solarize=void 0;const e=function(t){const n=t.data,r=t.width,i=t.height,s=r*4;let o=i;do{const a=(o-1)*s;let u=r;do{const l=a+(u-1)*4;let c=n[l],f=n[l+1],d=n[l+2];c>127&&(c=255-c),f>127&&(f=255-f),d>127&&(d=255-d),n[l]=c,n[l+1]=f,n[l+2]=d}while(--u)}while(--o)};return ZA.Solarize=e,ZA}var e3={},dce;function Obt(){if(dce)return e3;dce=1,Object.defineProperty(e3,"__esModule",{value:!0}),e3.Threshold=void 0;const e=Yr(),t=wa(),n=Zr(),r=function(i){const s=this.threshold()*255,o=i.data,a=o.length;for(let u=0;u<a;u+=1)o[u]=o[u]<s?0:255};return e3.Threshold=r,e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e3}var hce;function Mbt(){if(hce)return pA;hce=1,Object.defineProperty(pA,"__esModule",{value:!0}),pA.Konva=void 0;const e=SV(),t=nbt(),n=ibt(),r=sbt(),i=obt(),s=abt(),o=ubt(),a=YSe(),u=sX(),l=KSe(),c=lbt(),f=cbt(),d=fbt(),h=dbt(),p=XSe(),m=hbt(),g=pbt(),b=mbt(),y=gbt(),x=ybt(),w=vbt(),S=bbt(),C=xbt(),R=_bt(),I=wbt(),O=Ebt(),M=Sbt(),L=Tbt(),V=Cbt(),D=Abt(),j=kbt(),z=Rbt(),G=Ibt(),ee=Pbt(),ne=Nbt(),ue=Dbt(),X=Obt();return pA.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:n.Arrow,Circle:r.Circle,Ellipse:i.Ellipse,Image:s.Image,Label:o.Label,Tag:o.Tag,Line:a.Line,Path:u.Path,Rect:l.Rect,RegularPolygon:c.RegularPolygon,Ring:f.Ring,Sprite:d.Sprite,Star:h.Star,Text:p.Text,TextPath:m.TextPath,Transformer:g.Transformer,Wedge:b.Wedge,Filters:{Blur:y.Blur,Brighten:x.Brighten,Contrast:w.Contrast,Emboss:S.Emboss,Enhance:C.Enhance,Grayscale:R.Grayscale,HSL:I.HSL,HSV:O.HSV,Invert:M.Invert,Kaleidoscope:L.Kaleidoscope,Mask:V.Mask,Noise:D.Noise,Pixelate:j.Pixelate,Posterize:z.Posterize,RGB:G.RGB,RGBA:ee.RGBA,Sepia:ne.Sepia,Solarize:ue.Solarize,Threshold:X.Threshold}}),pA}var Lbt=NN.exports,pce;function Fbt(){if(pce)return NN.exports;pce=1,Object.defineProperty(Lbt,"__esModule",{value:!0});const e=Mbt();return NN.exports=e.Konva,NN.exports}Fbt();var e5={exports:{}},mce;function $bt(){return mce||(mce=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var n=SV();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=SV();e.exports=r.Konva}(e5,e5.exports)),e5.exports}var Bbt=$bt();const D4=gc(Bbt);var SB={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TB,gce;function jbt(){return gce||(gce=1,TB=function(t){var n={},r=A1(),i=uq(),s=Object.assign;function o(T){for(var k="https://reactjs.org/docs/error-decoder.html?invariant="+T,$=1;$<arguments.length;$++)k+="&args[]="+encodeURIComponent(arguments[$]);return"Minified React error #"+T+"; visit "+k+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),S=Symbol.iterator;function C(T){return T===null||typeof T!="object"?null:(T=S&&T[S]||T["@@iterator"],typeof T=="function"?T:null)}function R(T){if(T==null)return null;if(typeof T=="function")return T.displayName||T.name||null;if(typeof T=="string")return T;switch(T){case c:return"Fragment";case l:return"Portal";case d:return"Profiler";case f:return"StrictMode";case g:return"Suspense";case b:return"SuspenseList"}if(typeof T=="object")switch(T.$$typeof){case p:return(T.displayName||"Context")+".Consumer";case h:return(T._context.displayName||"Context")+".Provider";case m:var k=T.render;return T=T.displayName,T||(T=k.displayName||k.name||"",T=T!==""?"ForwardRef("+T+")":"ForwardRef"),T;case y:return k=T.displayName||null,k!==null?k:R(T.type)||"Memo";case x:k=T._payload,T=T._init;try{return R(T(k))}catch{}}return null}function I(T){var k=T.type;switch(T.tag){case 24:return"Cache";case 9:return(k.displayName||"Context")+".Consumer";case 10:return(k._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return T=k.render,T=T.displayName||T.name||"",k.displayName||(T!==""?"ForwardRef("+T+")":"ForwardRef");case 7:return"Fragment";case 5:return k;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(k);case 8:return k===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof k=="function")return k.displayName||k.name||null;if(typeof k=="string")return k}return null}function O(T){var k=T,$=T;if(T.alternate)for(;k.return;)k=k.return;else{T=k;do k=T,k.flags&4098&&($=k.return),T=k.return;while(T)}return k.tag===3?$:null}function M(T){if(O(T)!==T)throw Error(o(188))}function L(T){var k=T.alternate;if(!k){if(k=O(T),k===null)throw Error(o(188));return k!==T?null:T}for(var $=T,Y=k;;){var Z=$.return;if(Z===null)break;var ae=Z.alternate;if(ae===null){if(Y=Z.return,Y!==null){$=Y;continue}break}if(Z.child===ae.child){for(ae=Z.child;ae;){if(ae===$)return M(Z),T;if(ae===Y)return M(Z),k;ae=ae.sibling}throw Error(o(188))}if($.return!==Y.return)$=Z,Y=ae;else{for(var xe=!1,He=Z.child;He;){if(He===$){xe=!0,$=Z,Y=ae;break}if(He===Y){xe=!0,Y=Z,$=ae;break}He=He.sibling}if(!xe){for(He=ae.child;He;){if(He===$){xe=!0,$=ae,Y=Z;break}if(He===Y){xe=!0,Y=ae,$=Z;break}He=He.sibling}if(!xe)throw Error(o(189))}}if($.alternate!==Y)throw Error(o(190))}if($.tag!==3)throw Error(o(188));return $.stateNode.current===$?T:k}function V(T){return T=L(T),T!==null?D(T):null}function D(T){if(T.tag===5||T.tag===6)return T;for(T=T.child;T!==null;){var k=D(T);if(k!==null)return k;T=T.sibling}return null}function j(T){if(T.tag===5||T.tag===6)return T;for(T=T.child;T!==null;){if(T.tag!==4){var k=j(T);if(k!==null)return k}T=T.sibling}return null}var z=Array.isArray,G=t.getPublicInstance,ee=t.getRootHostContext,ne=t.getChildHostContext,ue=t.prepareForCommit,X=t.resetAfterCommit,W=t.createInstance,te=t.appendInitialChild,q=t.finalizeInitialChildren,J=t.prepareUpdate,oe=t.shouldSetTextContent,de=t.createTextInstance,ce=t.scheduleTimeout,pe=t.cancelTimeout,Ee=t.noTimeout,Ae=t.isPrimaryRenderer,ge=t.supportsMutation,me=t.supportsPersistence,Oe=t.supportsHydration,Me=t.getInstanceFromNode,Ye=t.preparePortalMount,lt=t.getCurrentEventPriority,We=t.detachDeletedInstance,nt=t.supportsMicrotasks,yt=t.scheduleMicrotask,_t=t.supportsTestSelectors,It=t.findFiberRoot,Et=t.getBoundingRect,Ke=t.getTextContent,Lt=t.isHiddenSubtree,sn=t.matchAccessibilityRole,Fe=t.setFocusIfFocusable,Qe=t.setupIntersectionObserver,wt=t.appendChild,Vt=t.appendChildToContainer,Wt=t.commitTextUpdate,bn=t.commitMount,Dn=t.commitUpdate,Zn=t.insertBefore,wr=t.insertInContainerBefore,Hn=t.removeChild,nr=t.removeChildFromContainer,Ei=t.resetTextContent,Dr=t.hideInstance,Co=t.hideTextInstance,Ji=t.unhideInstance,Di=t.unhideTextInstance,Zi=t.clearContainer,ei=t.cloneInstance,mo=t.createContainerChildSet,Gu=t.appendChildToContainerChildSet,Sa=t.finalizeContainerChildren,Ta=t.replaceContainerChildren,Kr=t.cloneHiddenInstance,Oi=t.cloneHiddenTextInstance,si=t.canHydrateInstance,Zs=t.canHydrateTextInstance,Xr=t.canHydrateSuspenseInstance,Hi=t.isSuspenseInstancePending,eo=t.isSuspenseInstanceFallback,go=t.getSuspenseInstanceFallbackErrorDetails,Jo=t.registerSuspenseInstanceRetry,Ca=t.getNextHydratableSibling,pd=t.getFirstHydratableChild,Hr=t.getFirstHydratableChildWithinContainer,Pl=t.getFirstHydratableChildWithinSuspenseInstance,bs=t.hydrateInstance,Ka=t.hydrateTextInstance,Zo=t.hydrateSuspenseInstance,yh=t.getNextHydratableInstanceAfterSuspenseInstance,md=t.commitHydratedContainer,mf=t.commitHydratedSuspenseInstance,gf=t.clearSuspenseBoundary,xc=t.clearSuspenseBoundaryFromContainer,_c=t.shouldDeleteUnhydratedTailInstances,wc=t.didNotMatchHydratedContainerTextInstance,Er=t.didNotMatchHydratedTextInstance,Ec;function xs(T){if(Ec===void 0)try{throw Error()}catch($){var k=$.stack.trim().match(/\n( *(at )?)/);Ec=k&&k[1]||""}return`
`+Ec+T}var Xa=!1;function As(T,k){if(!T||Xa)return"";Xa=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(k)if(k=function(){throw Error()},Object.defineProperty(k.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(k,[])}catch(Ft){var Y=Ft}Reflect.construct(T,[],k)}else{try{k.call()}catch(Ft){Y=Ft}T.call(k.prototype)}else{try{throw Error()}catch(Ft){Y=Ft}T()}}catch(Ft){if(Ft&&Y&&typeof Ft.stack=="string"){for(var Z=Ft.stack.split(`
`),ae=Y.stack.split(`
`),xe=Z.length-1,He=ae.length-1;1<=xe&&0<=He&&Z[xe]!==ae[He];)He--;for(;1<=xe&&0<=He;xe--,He--)if(Z[xe]!==ae[He]){if(xe!==1||He!==1)do if(xe--,He--,0>He||Z[xe]!==ae[He]){var at=`
`+Z[xe].replace(" at new "," at ");return T.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",T.displayName)),at}while(1<=xe&&0<=He);break}}}finally{Xa=!1,Error.prepareStackTrace=$}return(T=T?T.displayName||T.name:"")?xs(T):""}var Nl=Object.prototype.hasOwnProperty,Sc=[],ea=-1;function qi(T){return{current:T}}function ti(T){0>ea||(T.current=Sc[ea],Sc[ea]=null,ea--)}function rr(T,k){ea++,Sc[ea]=T.current,T.current=k}var ve={},Ie=qi(ve),Se=qi(!1),Be=ve;function ze(T,k){var $=T.type.contextTypes;if(!$)return ve;var Y=T.stateNode;if(Y&&Y.__reactInternalMemoizedUnmaskedChildContext===k)return Y.__reactInternalMemoizedMaskedChildContext;var Z={},ae;for(ae in $)Z[ae]=k[ae];return Y&&(T=T.stateNode,T.__reactInternalMemoizedUnmaskedChildContext=k,T.__reactInternalMemoizedMaskedChildContext=Z),Z}function De(T){return T=T.childContextTypes,T!=null}function ht(){ti(Se),ti(Ie)}function kt(T,k,$){if(Ie.current!==ve)throw Error(o(168));rr(Ie,k),rr(Se,$)}function Nt(T,k,$){var Y=T.stateNode;if(k=k.childContextTypes,typeof Y.getChildContext!="function")return $;Y=Y.getChildContext();for(var Z in Y)if(!(Z in k))throw Error(o(108,I(T)||"Unknown",Z));return s({},$,Y)}function Rt(T){return T=(T=T.stateNode)&&T.__reactInternalMemoizedMergedChildContext||ve,Be=Ie.current,rr(Ie,T),rr(Se,Se.current),!0}function jt(T,k,$){var Y=T.stateNode;if(!Y)throw Error(o(169));$?(T=Nt(T,k,Be),Y.__reactInternalMemoizedMergedChildContext=T,ti(Se),ti(Ie),rr(Ie,T)):ti(Se),rr(Se,$)}var Zt=Math.clz32?Math.clz32:lr,qn=Math.log,Sn=Math.LN2;function lr(T){return T>>>=0,T===0?32:31-(qn(T)/Sn|0)|0}var _n=64,br=4194304;function ls(T){switch(T&-T){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return T&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return T&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return T}}function Ao(T,k){var $=T.pendingLanes;if($===0)return 0;var Y=0,Z=T.suspendedLanes,ae=T.pingedLanes,xe=$&268435455;if(xe!==0){var He=xe&~Z;He!==0?Y=ls(He):(ae&=xe,ae!==0&&(Y=ls(ae)))}else xe=$&~Z,xe!==0?Y=ls(xe):ae!==0&&(Y=ls(ae));if(Y===0)return 0;if(k!==0&&k!==Y&&!(k&Z)&&(Z=Y&-Y,ae=k&-k,Z>=ae||Z===16&&(ae&4194240)!==0))return k;if(Y&4&&(Y|=$&16),k=T.entangledLanes,k!==0)for(T=T.entanglements,k&=Y;0<k;)$=31-Zt(k),Z=1<<$,Y|=T[$],k&=~Z;return Y}function Dl(T,k){switch(T){case 1:case 2:case 4:return k+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return k+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gd(T,k){for(var $=T.suspendedLanes,Y=T.pingedLanes,Z=T.expirationTimes,ae=T.pendingLanes;0<ae;){var xe=31-Zt(ae),He=1<<xe,at=Z[xe];at===-1?(!(He&$)||He&Y)&&(Z[xe]=Dl(He,k)):at<=k&&(T.expiredLanes|=He),ae&=~He}}function Yu(T){return T=T.pendingLanes&-1073741825,T!==0?T:T&1073741824?1073741824:0}function yf(){var T=_n;return _n<<=1,!(_n&4194240)&&(_n=64),T}function to(T){for(var k=[],$=0;31>$;$++)k.push(T);return k}function Mi(T,k,$){T.pendingLanes|=k,k!==536870912&&(T.suspendedLanes=0,T.pingedLanes=0),T=T.eventTimes,k=31-Zt(k),T[k]=$}function ko(T,k){var $=T.pendingLanes&~k;T.pendingLanes=k,T.suspendedLanes=0,T.pingedLanes=0,T.expiredLanes&=k,T.mutableReadLanes&=k,T.entangledLanes&=k,k=T.entanglements;var Y=T.eventTimes;for(T=T.expirationTimes;0<$;){var Z=31-Zt($),ae=1<<Z;k[Z]=0,Y[Z]=-1,T[Z]=-1,$&=~ae}}function ta(T,k){var $=T.entangledLanes|=k;for(T=T.entanglements;$;){var Y=31-Zt($),Z=1<<Y;Z&k|T[Y]&k&&(T[Y]|=k),$&=~Z}}var cr=0;function Aa(T){return T&=-T,1<T?4<T?T&268435455?16:536870912:4:1}var ka=i.unstable_scheduleCallback,bp=i.unstable_cancelCallback,Ol=i.unstable_shouldYield,ks=i.unstable_requestPaint,Rs=i.unstable_now,yd=i.unstable_ImmediatePriority,Tc=i.unstable_UserBlockingPriority,Ml=i.unstable_NormalPriority,X0=i.unstable_IdlePriority,xr=null,Gn=null;function Cc(T){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(xr,T,void 0,(T.current.flags&128)===128)}catch{}}function Ce(T,k){return T===k&&(T!==0||1/T===1/k)||T!==T&&k!==k}var Ne=typeof Object.is=="function"?Object.is:Ce,rt=null,hn=!1,ir=!1;function Or(T){rt===null?rt=[T]:rt.push(T)}function gi(T){hn=!0,Or(T)}function dn(){if(!ir&&rt!==null){ir=!0;var T=0,k=cr;try{var $=rt;for(cr=1;T<$.length;T++){var Y=$[T];do Y=Y(!0);while(Y!==null)}rt=null,hn=!1}catch(Z){throw rt!==null&&(rt=rt.slice(T+1)),ka(yd,dn),Z}finally{cr=k,ir=!1}}return null}var Tr=[],Ir=0,_s=null,na=0,Mr=[],js=0,Li=null,no=1,Qa="";function ra(T,k){Tr[Ir++]=na,Tr[Ir++]=_s,_s=T,na=k}function $g(T,k,$){Mr[js++]=no,Mr[js++]=Qa,Mr[js++]=Li,Li=T;var Y=no;T=Qa;var Z=32-Zt(Y)-1;Y&=~(1<<Z),$+=1;var ae=32-Zt(k)+Z;if(30<ae){var xe=Z-Z%5;ae=(Y&(1<<xe)-1).toString(32),Y>>=xe,Z-=xe,no=1<<32-Zt(k)+Z|$<<Z|Y,Qa=ae+T}else no=1<<ae|$<<Z|Y,Qa=T}function ro(T){T.return!==null&&(ra(T,1),$g(T,1,0))}function Ac(T){for(;T===_s;)_s=Tr[--Ir],Tr[Ir]=null,na=Tr[--Ir],Tr[Ir]=null;for(;T===Li;)Li=Mr[--js],Mr[js]=null,Qa=Mr[--js],Mr[js]=null,no=Mr[--js],Mr[js]=null}var oi=null,Ro=null,yi=!1,Ra=!1,ia=null;function vd(T,k){var $=Ds(5,null,null,0);$.elementType="DELETED",$.stateNode=k,$.return=T,k=T.deletions,k===null?(T.deletions=[$],T.flags|=16):k.push($)}function vi(T,k){switch(T.tag){case 5:return k=si(k,T.type,T.pendingProps),k!==null?(T.stateNode=k,oi=T,Ro=pd(k),!0):!1;case 6:return k=Zs(k,T.pendingProps),k!==null?(T.stateNode=k,oi=T,Ro=null,!0):!1;case 13:if(k=Xr(k),k!==null){var $=Li!==null?{id:no,overflow:Qa}:null;return T.memoizedState={dehydrated:k,treeContext:$,retryLane:1073741824},$=Ds(18,null,null,0),$.stateNode=k,$.return=T,T.child=$,oi=T,Ro=null,!0}return!1;default:return!1}}function Ku(T){return(T.mode&1)!==0&&(T.flags&128)===0}function Xu(T){if(yi){var k=Ro;if(k){var $=k;if(!vi(T,k)){if(Ku(T))throw Error(o(418));k=Ca($);var Y=oi;k&&vi(T,k)?vd(Y,$):(T.flags=T.flags&-4097|2,yi=!1,oi=T)}}else{if(Ku(T))throw Error(o(418));T.flags=T.flags&-4097|2,yi=!1,oi=T}}}function Bg(T){for(T=T.return;T!==null&&T.tag!==5&&T.tag!==3&&T.tag!==13;)T=T.return;oi=T}function bd(T){if(!Oe||T!==oi)return!1;if(!yi)return Bg(T),yi=!0,!1;if(T.tag!==3&&(T.tag!==5||_c(T.type)&&!oe(T.type,T.memoizedProps))){var k=Ro;if(k){if(Ku(T))throw jg(),Error(o(418));for(;k;)vd(T,k),k=Ca(k)}}if(Bg(T),T.tag===13){if(!Oe)throw Error(o(316));if(T=T.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(o(317));Ro=yh(T)}else Ro=oi?Ca(T.stateNode):null;return!0}function jg(){for(var T=Ro;T;)T=Ca(T)}function vf(){Oe&&(Ro=oi=null,Ra=yi=!1)}function vh(T){ia===null?ia=[T]:ia.push(T)}var Ia=a.ReactCurrentBatchConfig;function bf(T,k){if(Ne(T,k))return!0;if(typeof T!="object"||T===null||typeof k!="object"||k===null)return!1;var $=Object.keys(T),Y=Object.keys(k);if($.length!==Y.length)return!1;for(Y=0;Y<$.length;Y++){var Z=$[Y];if(!Nl.call(k,Z)||!Ne(T[Z],k[Z]))return!1}return!0}function xd(T){switch(T.tag){case 5:return xs(T.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 2:case 15:return T=As(T.type,!1),T;case 11:return T=As(T.type.render,!1),T;case 1:return T=As(T.type,!0),T;default:return""}}function _u(T,k,$){if(T=$.ref,T!==null&&typeof T!="function"&&typeof T!="object"){if($._owner){if($=$._owner,$){if($.tag!==1)throw Error(o(309));var Y=$.stateNode}if(!Y)throw Error(o(147,T));var Z=Y,ae=""+T;return k!==null&&k.ref!==null&&typeof k.ref=="function"&&k.ref._stringRef===ae?k.ref:(k=function(xe){var He=Z.refs;xe===null?delete He[ae]:He[ae]=xe},k._stringRef=ae,k)}if(typeof T!="string")throw Error(o(284));if(!$._owner)throw Error(o(290,T))}return T}function F(T,k){throw T=Object.prototype.toString.call(k),Error(o(31,T==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":T))}function re(T){var k=T._init;return k(T._payload)}function le(T){function k(it,qe){if(T){var ct=it.deletions;ct===null?(it.deletions=[qe],it.flags|=16):ct.push(qe)}}function $(it,qe){if(!T)return null;for(;qe!==null;)k(it,qe),qe=qe.sibling;return null}function Y(it,qe){for(it=new Map;qe!==null;)qe.key!==null?it.set(qe.key,qe):it.set(qe.index,qe),qe=qe.sibling;return it}function Z(it,qe){return it=Bc(it,qe),it.index=0,it.sibling=null,it}function ae(it,qe,ct){return it.index=ct,T?(ct=it.alternate,ct!==null?(ct=ct.index,ct<qe?(it.flags|=2,qe):ct):(it.flags|=2,qe)):(it.flags|=1048576,qe)}function xe(it){return T&&it.alternate===null&&(it.flags|=2),it}function He(it,qe,ct,rn){return qe===null||qe.tag!==6?(qe=cm(ct,it.mode,rn),qe.return=it,qe):(qe=Z(qe,ct),qe.return=it,qe)}function at(it,qe,ct,rn){var kn=ct.type;return kn===c?yn(it,qe,ct.props.children,rn,ct.key):qe!==null&&(qe.elementType===kn||typeof kn=="object"&&kn!==null&&kn.$$typeof===x&&re(kn)===qe.type)?(rn=Z(qe,ct.props),rn.ref=_u(it,qe,ct),rn.return=it,rn):(rn=kd(ct.type,ct.key,ct.props,null,it.mode,rn),rn.ref=_u(it,qe,ct),rn.return=it,rn)}function Ft(it,qe,ct,rn){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==ct.containerInfo||qe.stateNode.implementation!==ct.implementation?(qe=oy(ct,it.mode,rn),qe.return=it,qe):(qe=Z(qe,ct.children||[]),qe.return=it,qe)}function yn(it,qe,ct,rn,kn){return qe===null||qe.tag!==7?(qe=Lo(ct,it.mode,rn,kn),qe.return=it,qe):(qe=Z(qe,ct),qe.return=it,qe)}function tr(it,qe,ct){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return qe=cm(""+qe,it.mode,ct),qe.return=it,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case u:return ct=kd(qe.type,qe.key,qe.props,null,it.mode,ct),ct.ref=_u(it,null,qe),ct.return=it,ct;case l:return qe=oy(qe,it.mode,ct),qe.return=it,qe;case x:var rn=qe._init;return tr(it,rn(qe._payload),ct)}if(z(qe)||C(qe))return qe=Lo(qe,it.mode,ct,null),qe.return=it,qe;F(it,qe)}return null}function an(it,qe,ct,rn){var kn=qe!==null?qe.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number")return kn!==null?null:He(it,qe,""+ct,rn);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case u:return ct.key===kn?at(it,qe,ct,rn):null;case l:return ct.key===kn?Ft(it,qe,ct,rn):null;case x:return kn=ct._init,an(it,qe,kn(ct._payload),rn)}if(z(ct)||C(ct))return kn!==null?null:yn(it,qe,ct,rn,null);F(it,ct)}return null}function Ui(it,qe,ct,rn,kn){if(typeof rn=="string"&&rn!==""||typeof rn=="number")return it=it.get(ct)||null,He(qe,it,""+rn,kn);if(typeof rn=="object"&&rn!==null){switch(rn.$$typeof){case u:return it=it.get(rn.key===null?ct:rn.key)||null,at(qe,it,rn,kn);case l:return it=it.get(rn.key===null?ct:rn.key)||null,Ft(qe,it,rn,kn);case x:var Gt=rn._init;return Ui(it,qe,ct,Gt(rn._payload),kn)}if(z(rn)||C(rn))return it=it.get(ct)||null,yn(qe,it,rn,kn,null);F(qe,rn)}return null}function Si(it,qe,ct,rn){for(var kn=null,Gt=null,Kn=qe,Fr=qe=0,rs=null;Kn!==null&&Fr<ct.length;Fr++){Kn.index>Fr?(rs=Kn,Kn=null):rs=Kn.sibling;var Br=an(it,Kn,ct[Fr],rn);if(Br===null){Kn===null&&(Kn=rs);break}T&&Kn&&Br.alternate===null&&k(it,Kn),qe=ae(Br,qe,Fr),Gt===null?kn=Br:Gt.sibling=Br,Gt=Br,Kn=rs}if(Fr===ct.length)return $(it,Kn),yi&&ra(it,Fr),kn;if(Kn===null){for(;Fr<ct.length;Fr++)Kn=tr(it,ct[Fr],rn),Kn!==null&&(qe=ae(Kn,qe,Fr),Gt===null?kn=Kn:Gt.sibling=Kn,Gt=Kn);return yi&&ra(it,Fr),kn}for(Kn=Y(it,Kn);Fr<ct.length;Fr++)rs=Ui(Kn,it,Fr,ct[Fr],rn),rs!==null&&(T&&rs.alternate!==null&&Kn.delete(rs.key===null?Fr:rs.key),qe=ae(rs,qe,Fr),Gt===null?kn=rs:Gt.sibling=rs,Gt=rs);return T&&Kn.forEach(function($o){return k(it,$o)}),yi&&ra(it,Fr),kn}function ou(it,qe,ct,rn){var kn=C(ct);if(typeof kn!="function")throw Error(o(150));if(ct=kn.call(ct),ct==null)throw Error(o(151));for(var Gt=kn=null,Kn=qe,Fr=qe=0,rs=null,Br=ct.next();Kn!==null&&!Br.done;Fr++,Br=ct.next()){Kn.index>Fr?(rs=Kn,Kn=null):rs=Kn.sibling;var $o=an(it,Kn,Br.value,rn);if($o===null){Kn===null&&(Kn=rs);break}T&&Kn&&$o.alternate===null&&k(it,Kn),qe=ae($o,qe,Fr),Gt===null?kn=$o:Gt.sibling=$o,Gt=$o,Kn=rs}if(Br.done)return $(it,Kn),yi&&ra(it,Fr),kn;if(Kn===null){for(;!Br.done;Fr++,Br=ct.next())Br=tr(it,Br.value,rn),Br!==null&&(qe=ae(Br,qe,Fr),Gt===null?kn=Br:Gt.sibling=Br,Gt=Br);return yi&&ra(it,Fr),kn}for(Kn=Y(it,Kn);!Br.done;Fr++,Br=ct.next())Br=Ui(Kn,it,Fr,Br.value,rn),Br!==null&&(T&&Br.alternate!==null&&Kn.delete(Br.key===null?Fr:Br.key),qe=ae(Br,qe,Fr),Gt===null?kn=Br:Gt.sibling=Br,Gt=Br);return T&&Kn.forEach(function(y2){return k(it,y2)}),yi&&ra(it,Fr),kn}function Fo(it,qe,ct,rn){if(typeof ct=="object"&&ct!==null&&ct.type===c&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case u:e:{for(var kn=ct.key,Gt=qe;Gt!==null;){if(Gt.key===kn){if(kn=ct.type,kn===c){if(Gt.tag===7){$(it,Gt.sibling),qe=Z(Gt,ct.props.children),qe.return=it,it=qe;break e}}else if(Gt.elementType===kn||typeof kn=="object"&&kn!==null&&kn.$$typeof===x&&re(kn)===Gt.type){$(it,Gt.sibling),qe=Z(Gt,ct.props),qe.ref=_u(it,Gt,ct),qe.return=it,it=qe;break e}$(it,Gt);break}else k(it,Gt);Gt=Gt.sibling}ct.type===c?(qe=Lo(ct.props.children,it.mode,rn,ct.key),qe.return=it,it=qe):(rn=kd(ct.type,ct.key,ct.props,null,it.mode,rn),rn.ref=_u(it,qe,ct),rn.return=it,it=rn)}return xe(it);case l:e:{for(Gt=ct.key;qe!==null;){if(qe.key===Gt)if(qe.tag===4&&qe.stateNode.containerInfo===ct.containerInfo&&qe.stateNode.implementation===ct.implementation){$(it,qe.sibling),qe=Z(qe,ct.children||[]),qe.return=it,it=qe;break e}else{$(it,qe);break}else k(it,qe);qe=qe.sibling}qe=oy(ct,it.mode,rn),qe.return=it,it=qe}return xe(it);case x:return Gt=ct._init,Fo(it,qe,Gt(ct._payload),rn)}if(z(ct))return Si(it,qe,ct,rn);if(C(ct))return ou(it,qe,ct,rn);F(it,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"?(ct=""+ct,qe!==null&&qe.tag===6?($(it,qe.sibling),qe=Z(qe,ct),qe.return=it,it=qe):($(it,qe),qe=cm(ct,it.mode,rn),qe.return=it,it=qe),xe(it)):$(it,qe)}return Fo}var be=le(!0),Xe=le(!1),ut=qi(null),Xt=null,Lr=null,Us=null;function Pr(){Us=Lr=Xt=null}function ai(T,k,$){Ae?(rr(ut,k._currentValue),k._currentValue=$):(rr(ut,k._currentValue2),k._currentValue2=$)}function cs(T){var k=ut.current;ti(ut),Ae?T._currentValue=k:T._currentValue2=k}function Io(T,k,$){for(;T!==null;){var Y=T.alternate;if((T.childLanes&k)!==k?(T.childLanes|=k,Y!==null&&(Y.childLanes|=k)):Y!==null&&(Y.childLanes&k)!==k&&(Y.childLanes|=k),T===$)break;T=T.return}}function yo(T,k){Xt=T,Us=Lr=null,T=T.dependencies,T!==null&&T.firstContext!==null&&(T.lanes&k&&(Mn=!0),T.firstContext=null)}function vo(T){var k=Ae?T._currentValue:T._currentValue2;if(Us!==T)if(T={context:T,memoizedValue:k,next:null},Lr===null){if(Xt===null)throw Error(o(308));Lr=T,Xt.dependencies={lanes:0,firstContext:T}}else Lr=Lr.next=T;return k}var Ll=null;function H1(T){Ll===null?Ll=[T]:Ll.push(T)}function mx(T,k,$,Y){var Z=k.interleaved;return Z===null?($.next=$,H1(k)):($.next=Z.next,Z.next=$),k.interleaved=$,kc(T,Y)}function kc(T,k){T.lanes|=k;var $=T.alternate;for($!==null&&($.lanes|=k),$=T,T=T.return;T!==null;)T.childLanes|=k,$=T.alternate,$!==null&&($.childLanes|=k),$=T,T=T.return;return $.tag===3?$.stateNode:null}var Qu=!1;function bh(T){T.updateQueue={baseState:T.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c2(T,k){T=T.updateQueue,k.updateQueue===T&&(k.updateQueue={baseState:T.baseState,firstBaseUpdate:T.firstBaseUpdate,lastBaseUpdate:T.lastBaseUpdate,shared:T.shared,effects:T.effects})}function _d(T,k){return{eventTime:T,lane:k,tag:0,payload:null,callback:null,next:null}}function Rc(T,k,$){var Y=T.updateQueue;if(Y===null)return null;if(Y=Y.shared,fr&2){var Z=Y.pending;return Z===null?k.next=k:(k.next=Z.next,Z.next=k),Y.pending=k,kc(T,$)}return Z=Y.interleaved,Z===null?(k.next=k,H1(Y)):(k.next=Z.next,Z.next=k),Y.interleaved=k,kc(T,$)}function Q0(T,k,$){if(k=k.updateQueue,k!==null&&(k=k.shared,($&4194240)!==0)){var Y=k.lanes;Y&=T.pendingLanes,$|=Y,k.lanes=$,ta(T,$)}}function Ju(T,k){var $=T.updateQueue,Y=T.alternate;if(Y!==null&&(Y=Y.updateQueue,$===Y)){var Z=null,ae=null;if($=$.firstBaseUpdate,$!==null){do{var xe={eventTime:$.eventTime,lane:$.lane,tag:$.tag,payload:$.payload,callback:$.callback,next:null};ae===null?Z=ae=xe:ae=ae.next=xe,$=$.next}while($!==null);ae===null?Z=ae=k:ae=ae.next=k}else Z=ae=k;$={baseState:Y.baseState,firstBaseUpdate:Z,lastBaseUpdate:ae,shared:Y.shared,effects:Y.effects},T.updateQueue=$;return}T=$.lastBaseUpdate,T===null?$.firstBaseUpdate=k:T.next=k,$.lastBaseUpdate=k}function Ic(T,k,$,Y){var Z=T.updateQueue;Qu=!1;var ae=Z.firstBaseUpdate,xe=Z.lastBaseUpdate,He=Z.shared.pending;if(He!==null){Z.shared.pending=null;var at=He,Ft=at.next;at.next=null,xe===null?ae=Ft:xe.next=Ft,xe=at;var yn=T.alternate;yn!==null&&(yn=yn.updateQueue,He=yn.lastBaseUpdate,He!==xe&&(He===null?yn.firstBaseUpdate=Ft:He.next=Ft,yn.lastBaseUpdate=at))}if(ae!==null){var tr=Z.baseState;xe=0,yn=Ft=at=null,He=ae;do{var an=He.lane,Ui=He.eventTime;if((Y&an)===an){yn!==null&&(yn=yn.next={eventTime:Ui,lane:0,tag:He.tag,payload:He.payload,callback:He.callback,next:null});e:{var Si=T,ou=He;switch(an=k,Ui=$,ou.tag){case 1:if(Si=ou.payload,typeof Si=="function"){tr=Si.call(Ui,tr,an);break e}tr=Si;break e;case 3:Si.flags=Si.flags&-65537|128;case 0:if(Si=ou.payload,an=typeof Si=="function"?Si.call(Ui,tr,an):Si,an==null)break e;tr=s({},tr,an);break e;case 2:Qu=!0}}He.callback!==null&&He.lane!==0&&(T.flags|=64,an=Z.effects,an===null?Z.effects=[He]:an.push(He))}else Ui={eventTime:Ui,lane:an,tag:He.tag,payload:He.payload,callback:He.callback,next:null},yn===null?(Ft=yn=Ui,at=tr):yn=yn.next=Ui,xe|=an;if(He=He.next,He===null){if(He=Z.shared.pending,He===null)break;an=He,He=an.next,an.next=null,Z.lastBaseUpdate=an,Z.shared.pending=null}}while(!0);if(yn===null&&(at=tr),Z.baseState=at,Z.firstBaseUpdate=Ft,Z.lastBaseUpdate=yn,k=Z.shared.interleaved,k!==null){Z=k;do xe|=Z.lane,Z=Z.next;while(Z!==k)}else ae===null&&(Z.shared.lanes=0);kf|=xe,T.lanes=xe,T.memoizedState=tr}}function f2(T,k,$){if(T=k.effects,k.effects=null,T!==null)for(k=0;k<T.length;k++){var Y=T[k],Z=Y.callback;if(Z!==null){if(Y.callback=null,Y=$,typeof Z!="function")throw Error(o(191,Z));Z.call(Y)}}}var xh={},Fl=qi(xh),Pc=qi(xh),Po=qi(xh);function Zu(T){if(T===xh)throw Error(o(174));return T}function q1(T,k){rr(Po,k),rr(Pc,T),rr(Fl,xh),T=ee(k),ti(Fl),rr(Fl,T)}function xp(){ti(Fl),ti(Pc),ti(Po)}function gx(T){var k=Zu(Po.current),$=Zu(Fl.current);k=ne($,T.type,k),$!==k&&(rr(Pc,T),rr(Fl,k))}function yx(T){Pc.current===T&&(ti(Fl),ti(Pc))}var ws=qi(0);function wd(T){for(var k=T;k!==null;){if(k.tag===13){var $=k.memoizedState;if($!==null&&($=$.dehydrated,$===null||Hi($)||eo($)))return k}else if(k.tag===19&&k.memoizedProps.revealOrder!==void 0){if(k.flags&128)return k}else if(k.child!==null){k.child.return=k,k=k.child;continue}if(k===T)break;for(;k.sibling===null;){if(k.return===null||k.return===T)return null;k=k.return}k.sibling.return=k.return,k=k.sibling}return null}var Ve=[];function mt(){for(var T=0;T<Ve.length;T++){var k=Ve[T];Ae?k._workInProgressVersionPrimary=null:k._workInProgressVersionSecondary=null}Ve.length=0}var et=a.ReactCurrentDispatcher,on=a.ReactCurrentBatchConfig,Bn=0,On=null,Cr=null,er=null,_h=!1,Ug=!1,Pa=0,Ed=0;function No(){throw Error(o(321))}function $l(T,k){if(k===null)return!1;for(var $=0;$<k.length&&$<T.length;$++)if(!Ne(T[$],k[$]))return!1;return!0}function wh(T,k,$,Y,Z,ae){if(Bn=ae,On=k,k.memoizedState=null,k.updateQueue=null,k.lanes=0,et.current=T===null||T.memoizedState===null?Wg:Ap,T=$(Y,Z),Ug){ae=0;do{if(Ug=!1,Pa=0,25<=ae)throw Error(o(301));ae+=1,er=Cr=null,k.updateQueue=null,et.current=Gg,T=$(Y,Z)}while(Ug)}if(et.current=Cp,k=Cr!==null&&Cr.next!==null,Bn=0,er=Cr=On=null,_h=!1,k)throw Error(o(300));return T}function _p(){var T=Pa!==0;return Pa=0,T}function mr(){var T={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?On.memoizedState=er=T:er=er.next=T,er}function sa(){if(Cr===null){var T=On.alternate;T=T!==null?T.memoizedState:null}else T=Cr.next;var k=er===null?On.memoizedState:er.next;if(k!==null)er=k,Cr=T;else{if(T===null)throw Error(o(310));Cr=T,T={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},er===null?On.memoizedState=er=T:er=er.next=T}return er}function Eh(T,k){return typeof k=="function"?k(T):k}function wp(T){var k=sa(),$=k.queue;if($===null)throw Error(o(311));$.lastRenderedReducer=T;var Y=Cr,Z=Y.baseQueue,ae=$.pending;if(ae!==null){if(Z!==null){var xe=Z.next;Z.next=ae.next,ae.next=xe}Y.baseQueue=Z=ae,$.pending=null}if(Z!==null){ae=Z.next,Y=Y.baseState;var He=xe=null,at=null,Ft=ae;do{var yn=Ft.lane;if((Bn&yn)===yn)at!==null&&(at=at.next={lane:0,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null}),Y=Ft.hasEagerState?Ft.eagerState:T(Y,Ft.action);else{var tr={lane:yn,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null};at===null?(He=at=tr,xe=Y):at=at.next=tr,On.lanes|=yn,kf|=yn}Ft=Ft.next}while(Ft!==null&&Ft!==ae);at===null?xe=Y:at.next=He,Ne(Y,k.memoizedState)||(Mn=!0),k.memoizedState=Y,k.baseState=xe,k.baseQueue=at,$.lastRenderedState=Y}if(T=$.interleaved,T!==null){Z=T;do ae=Z.lane,On.lanes|=ae,kf|=ae,Z=Z.next;while(Z!==T)}else Z===null&&($.lanes=0);return[k.memoizedState,$.dispatch]}function J0(T){var k=sa(),$=k.queue;if($===null)throw Error(o(311));$.lastRenderedReducer=T;var Y=$.dispatch,Z=$.pending,ae=k.memoizedState;if(Z!==null){$.pending=null;var xe=Z=Z.next;do ae=T(ae,xe.action),xe=xe.next;while(xe!==Z);Ne(ae,k.memoizedState)||(Mn=!0),k.memoizedState=ae,k.baseQueue===null&&(k.baseState=ae),$.lastRenderedState=ae}return[ae,Y]}function vx(){}function bx(T,k){var $=On,Y=sa(),Z=k(),ae=!Ne(Y.memoizedState,Z);if(ae&&(Y.memoizedState=Z,Mn=!0),Y=Y.queue,Ep(em.bind(null,$,Y,T),[T]),Y.getSnapshot!==k||ae||er!==null&&er.memoizedState.tag&1){if($.flags|=2048,Sh(9,xf.bind(null,$,Y,Z,k),void 0,null),$i===null)throw Error(o(349));Bn&30||Z0($,k,Z)}return Z}function Z0(T,k,$){T.flags|=16384,T={getSnapshot:k,value:$},k=On.updateQueue,k===null?(k={lastEffect:null,stores:null},On.updateQueue=k,k.stores=[T]):($=k.stores,$===null?k.stores=[T]:$.push(T))}function xf(T,k,$,Y){k.value=$,k.getSnapshot=Y,W1(k)&&Bl(T)}function em(T,k,$){return $(function(){W1(k)&&Bl(T)})}function W1(T){var k=T.getSnapshot;T=T.value;try{var $=k();return!Ne(T,$)}catch{return!0}}function Bl(T){var k=kc(T,1);k!==null&&ji(k,T,1,-1)}function zg(T){var k=mr();return typeof T=="function"&&(T=T()),k.memoizedState=k.baseState=T,T={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eh,lastRenderedState:T},k.queue=T,T=T.dispatch=Na.bind(null,On,T),[k.memoizedState,T]}function Sh(T,k,$,Y){return T={tag:T,create:k,destroy:$,deps:Y,next:null},k=On.updateQueue,k===null?(k={lastEffect:null,stores:null},On.updateQueue=k,k.lastEffect=T.next=T):($=k.lastEffect,$===null?k.lastEffect=T.next=T:(Y=$.next,$.next=T,T.next=Y,k.lastEffect=T)),T}function Vg(){return sa().memoizedState}function Hg(T,k,$,Y){var Z=mr();On.flags|=T,Z.memoizedState=Sh(1|k,$,void 0,Y===void 0?null:Y)}function jl(T,k,$,Y){var Z=sa();Y=Y===void 0?null:Y;var ae=void 0;if(Cr!==null){var xe=Cr.memoizedState;if(ae=xe.destroy,Y!==null&&$l(Y,xe.deps)){Z.memoizedState=Sh(k,$,ae,Y);return}}On.flags|=T,Z.memoizedState=Sh(1|k,$,ae,Y)}function Th(T,k){return Hg(8390656,8,T,k)}function Ep(T,k){return jl(2048,8,T,k)}function xx(T,k){return jl(4,2,T,k)}function Wi(T,k){return jl(4,4,T,k)}function G1(T,k){if(typeof k=="function")return T=T(),k(T),function(){k(null)};if(k!=null)return T=T(),k.current=T,function(){k.current=null}}function Ch(T,k,$){return $=$!=null?$.concat([T]):null,jl(4,4,G1.bind(null,k,T),$)}function _f(){}function qg(T,k){var $=sa();k=k===void 0?null:k;var Y=$.memoizedState;return Y!==null&&k!==null&&$l(k,Y[1])?Y[0]:($.memoizedState=[T,k],T)}function Y1(T,k){var $=sa();k=k===void 0?null:k;var Y=$.memoizedState;return Y!==null&&k!==null&&$l(k,Y[1])?Y[0]:(T=T(),$.memoizedState=[T,k],T)}function Sp(T,k,$){return Bn&21?(Ne($,k)||($=yf(),On.lanes|=$,kf|=$,T.baseState=!0),k):(T.baseState&&(T.baseState=!1,Mn=!0),T.memoizedState=$)}function K1(T,k){var $=cr;cr=$!==0&&4>$?$:4,T(!0);var Y=on.transition;on.transition={};try{T(!1),k()}finally{cr=$,on.transition=Y}}function Tp(){return sa().memoizedState}function io(T,k,$){var Y=bo(T);if($={lane:Y,action:$,hasEagerState:!1,eagerState:null,next:null},d2(T))_x(k,$);else if($=mx(T,k,$,Y),$!==null){var Z=ts();ji($,T,Y,Z),tm($,k,Y)}}function Na(T,k,$){var Y=bo(T),Z={lane:Y,action:$,hasEagerState:!1,eagerState:null,next:null};if(d2(T))_x(k,Z);else{var ae=T.alternate;if(T.lanes===0&&(ae===null||ae.lanes===0)&&(ae=k.lastRenderedReducer,ae!==null))try{var xe=k.lastRenderedState,He=ae(xe,$);if(Z.hasEagerState=!0,Z.eagerState=He,Ne(He,xe)){var at=k.interleaved;at===null?(Z.next=Z,H1(k)):(Z.next=at.next,at.next=Z),k.interleaved=Z;return}}catch{}finally{}$=mx(T,k,Z,Y),$!==null&&(Z=ts(),ji($,T,Y,Z),tm($,k,Y))}}function d2(T){var k=T.alternate;return T===On||k!==null&&k===On}function _x(T,k){Ug=_h=!0;var $=T.pending;$===null?k.next=k:(k.next=$.next,$.next=k),T.pending=k}function tm(T,k,$){if($&4194240){var Y=k.lanes;Y&=T.pendingLanes,$|=Y,k.lanes=$,ta(T,$)}}var Cp={readContext:vo,useCallback:No,useContext:No,useEffect:No,useImperativeHandle:No,useInsertionEffect:No,useLayoutEffect:No,useMemo:No,useReducer:No,useRef:No,useState:No,useDebugValue:No,useDeferredValue:No,useTransition:No,useMutableSource:No,useSyncExternalStore:No,useId:No,unstable_isNewReconciler:!1},Wg={readContext:vo,useCallback:function(T,k){return mr().memoizedState=[T,k===void 0?null:k],T},useContext:vo,useEffect:Th,useImperativeHandle:function(T,k,$){return $=$!=null?$.concat([T]):null,Hg(4194308,4,G1.bind(null,k,T),$)},useLayoutEffect:function(T,k){return Hg(4194308,4,T,k)},useInsertionEffect:function(T,k){return Hg(4,2,T,k)},useMemo:function(T,k){var $=mr();return k=k===void 0?null:k,T=T(),$.memoizedState=[T,k],T},useReducer:function(T,k,$){var Y=mr();return k=$!==void 0?$(k):k,Y.memoizedState=Y.baseState=k,T={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:T,lastRenderedState:k},Y.queue=T,T=T.dispatch=io.bind(null,On,T),[Y.memoizedState,T]},useRef:function(T){var k=mr();return T={current:T},k.memoizedState=T},useState:zg,useDebugValue:_f,useDeferredValue:function(T){return mr().memoizedState=T},useTransition:function(){var T=zg(!1),k=T[0];return T=K1.bind(null,T[1]),mr().memoizedState=T,[k,T]},useMutableSource:function(){},useSyncExternalStore:function(T,k,$){var Y=On,Z=mr();if(yi){if($===void 0)throw Error(o(407));$=$()}else{if($=k(),$i===null)throw Error(o(349));Bn&30||Z0(Y,k,$)}Z.memoizedState=$;var ae={value:$,getSnapshot:k};return Z.queue=ae,Th(em.bind(null,Y,ae,T),[T]),Y.flags|=2048,Sh(9,xf.bind(null,Y,ae,$,k),void 0,null),$},useId:function(){var T=mr(),k=$i.identifierPrefix;if(yi){var $=Qa,Y=no;$=(Y&~(1<<32-Zt(Y)-1)).toString(32)+$,k=":"+k+"R"+$,$=Pa++,0<$&&(k+="H"+$.toString(32)),k+=":"}else $=Ed++,k=":"+k+"r"+$.toString(32)+":";return T.memoizedState=k},unstable_isNewReconciler:!1},Ap={readContext:vo,useCallback:qg,useContext:vo,useEffect:Ep,useImperativeHandle:Ch,useInsertionEffect:xx,useLayoutEffect:Wi,useMemo:Y1,useReducer:wp,useRef:Vg,useState:function(){return wp(Eh)},useDebugValue:_f,useDeferredValue:function(T){var k=sa();return Sp(k,Cr.memoizedState,T)},useTransition:function(){var T=wp(Eh)[0],k=sa().memoizedState;return[T,k]},useMutableSource:vx,useSyncExternalStore:bx,useId:Tp,unstable_isNewReconciler:!1},Gg={readContext:vo,useCallback:qg,useContext:vo,useEffect:Ep,useImperativeHandle:Ch,useInsertionEffect:xx,useLayoutEffect:Wi,useMemo:Y1,useReducer:J0,useRef:Vg,useState:function(){return J0(Eh)},useDebugValue:_f,useDeferredValue:function(T){var k=sa();return Cr===null?k.memoizedState=T:Sp(k,Cr.memoizedState,T)},useTransition:function(){var T=J0(Eh)[0],k=sa().memoizedState;return[T,k]},useMutableSource:vx,useSyncExternalStore:bx,useId:Tp,unstable_isNewReconciler:!1};function Do(T,k){if(T&&T.defaultProps){k=s({},k),T=T.defaultProps;for(var $ in T)k[$]===void 0&&(k[$]=T[$]);return k}return k}function kp(T,k,$,Y){k=T.memoizedState,$=$(Y,k),$=$==null?k:s({},k,$),T.memoizedState=$,T.lanes===0&&(T.updateQueue.baseState=$)}var Sd={isMounted:function(T){return(T=T._reactInternals)?O(T)===T:!1},enqueueSetState:function(T,k,$){T=T._reactInternals;var Y=ts(),Z=bo(T),ae=_d(Y,Z);ae.payload=k,$!=null&&(ae.callback=$),k=Rc(T,ae,Z),k!==null&&(ji(k,T,Z,Y),Q0(k,T,Z))},enqueueReplaceState:function(T,k,$){T=T._reactInternals;var Y=ts(),Z=bo(T),ae=_d(Y,Z);ae.tag=1,ae.payload=k,$!=null&&(ae.callback=$),k=Rc(T,ae,Z),k!==null&&(ji(k,T,Z,Y),Q0(k,T,Z))},enqueueForceUpdate:function(T,k){T=T._reactInternals;var $=ts(),Y=bo(T),Z=_d($,Y);Z.tag=2,k!=null&&(Z.callback=k),k=Rc(T,Z,Y),k!==null&&(ji(k,T,Y,$),Q0(k,T,Y))}};function Yg(T,k,$,Y,Z,ae,xe){return T=T.stateNode,typeof T.shouldComponentUpdate=="function"?T.shouldComponentUpdate(Y,ae,xe):k.prototype&&k.prototype.isPureReactComponent?!bf($,Y)||!bf(Z,ae):!0}function Rp(T,k,$){var Y=!1,Z=ve,ae=k.contextType;return typeof ae=="object"&&ae!==null?ae=vo(ae):(Z=De(k)?Be:Ie.current,Y=k.contextTypes,ae=(Y=Y!=null)?ze(T,Z):ve),k=new k($,ae),T.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=Sd,T.stateNode=k,k._reactInternals=T,Y&&(T=T.stateNode,T.__reactInternalMemoizedUnmaskedChildContext=Z,T.__reactInternalMemoizedMaskedChildContext=ae),k}function X1(T,k,$,Y){T=k.state,typeof k.componentWillReceiveProps=="function"&&k.componentWillReceiveProps($,Y),typeof k.UNSAFE_componentWillReceiveProps=="function"&&k.UNSAFE_componentWillReceiveProps($,Y),k.state!==T&&Sd.enqueueReplaceState(k,k.state,null)}function wf(T,k,$,Y){var Z=T.stateNode;Z.props=$,Z.state=T.memoizedState,Z.refs={},bh(T);var ae=k.contextType;typeof ae=="object"&&ae!==null?Z.context=vo(ae):(ae=De(k)?Be:Ie.current,Z.context=ze(T,ae)),Z.state=T.memoizedState,ae=k.getDerivedStateFromProps,typeof ae=="function"&&(kp(T,k,ae,$),Z.state=T.memoizedState),typeof k.getDerivedStateFromProps=="function"||typeof Z.getSnapshotBeforeUpdate=="function"||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(k=Z.state,typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount(),k!==Z.state&&Sd.enqueueReplaceState(Z,Z.state,null),Ic(T,$,Z,Y),Z.state=T.memoizedState),typeof Z.componentDidMount=="function"&&(T.flags|=4194308)}function Ip(T,k){try{var $="",Y=k;do $+=xd(Y),Y=Y.return;while(Y);var Z=$}catch(ae){Z=`
Error generating stack: `+ae.message+`
`+ae.stack}return{value:T,source:k,stack:Z,digest:null}}function Ah(T,k,$){return{value:T,source:null,stack:$??null,digest:k??null}}function Ul(T,k){try{console.error(k.value)}catch($){setTimeout(function(){throw $})}}var kh=typeof WeakMap=="function"?WeakMap:Map;function wu(T,k,$){$=_d(-1,$),$.tag=3,$.payload={element:null};var Y=k.value;return $.callback=function(){ds||(ds=!0,Hs=Y),Ul(T,k)},$}function Kg(T,k,$){$=_d(-1,$),$.tag=3;var Y=T.type.getDerivedStateFromError;if(typeof Y=="function"){var Z=k.value;$.payload=function(){return Y(Z)},$.callback=function(){Ul(T,k)}}var ae=T.stateNode;return ae!==null&&typeof ae.componentDidCatch=="function"&&($.callback=function(){Ul(T,k),typeof Y!="function"&&(rl===null?rl=new Set([this]):rl.add(this));var xe=k.stack;this.componentDidCatch(k.value,{componentStack:xe!==null?xe:""})}),$}function ye(T,k,$){var Y=T.pingCache;if(Y===null){Y=T.pingCache=new kh;var Z=new Set;Y.set(k,Z)}else Z=Y.get(k),Z===void 0&&(Z=new Set,Y.set(k,Z));Z.has($)||(Z.add($),T=m2.bind(null,T,k,$),k.then(T,T))}function Pp(T){do{var k;if((k=T.tag===13)&&(k=T.memoizedState,k=k!==null?k.dehydrated!==null:!0),k)return T;T=T.return}while(T!==null);return null}function Nc(T,k,$,Y,Z){return T.mode&1?(T.flags|=65536,T.lanes=Z,T):(T===k?T.flags|=65536:(T.flags|=128,$.flags|=131072,$.flags&=-52805,$.tag===1&&($.alternate===null?$.tag=17:(k=_d(-1,1),k.tag=2,Rc($,k,1))),$.lanes|=1),T)}var Da=a.ReactCurrentOwner,Mn=!1;function Oo(T,k,$,Y){k.child=T===null?Xe(k,null,$,Y):be(k,T.child,$,Y)}function Q1(T,k,$,Y,Z){$=$.render;var ae=k.ref;return yo(k,Z),Y=wh(T,k,$,Y,ae,Z),$=_p(),T!==null&&!Mn?(k.updateQueue=T.updateQueue,k.flags&=-2053,T.lanes&=~Z,eu(T,k,Z)):(yi&&$&&ro(k),k.flags|=1,Oo(T,k,Y,Z),k.child)}function Np(T,k,$,Y,Z){if(T===null){var ae=$.type;return typeof ae=="function"&&!lm(ae)&&ae.defaultProps===void 0&&$.compare===null&&$.defaultProps===void 0?(k.tag=15,k.type=ae,Ja(T,k,ae,Y,Z)):(T=kd($.type,null,Y,k,k.mode,Z),T.ref=k.ref,T.return=k,k.child=T)}if(ae=T.child,!(T.lanes&Z)){var xe=ae.memoizedProps;if($=$.compare,$=$!==null?$:bf,$(xe,Y)&&T.ref===k.ref)return eu(T,k,Z)}return k.flags|=1,T=Bc(ae,Y),T.ref=k.ref,T.return=k,k.child=T}function Ja(T,k,$,Y,Z){if(T!==null){var ae=T.memoizedProps;if(bf(ae,Y)&&T.ref===k.ref)if(Mn=!1,k.pendingProps=Y=ae,(T.lanes&Z)!==0)T.flags&131072&&(Mn=!0);else return k.lanes=T.lanes,eu(T,k,Z)}return Ef(T,k,$,Y,Z)}function Gi(T,k,$){var Y=k.pendingProps,Z=Y.children,ae=T!==null?T.memoizedState:null;if(Y.mode==="hidden")if(!(k.mode&1))k.memoizedState={baseLanes:0,cachePool:null,transitions:null},rr(Lh,Vs),Vs|=$;else{if(!($&1073741824))return T=ae!==null?ae.baseLanes|$:$,k.lanes=k.childLanes=1073741824,k.memoizedState={baseLanes:T,cachePool:null,transitions:null},k.updateQueue=null,rr(Lh,Vs),Vs|=T,null;k.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y=ae!==null?ae.baseLanes:$,rr(Lh,Vs),Vs|=Y}else ae!==null?(Y=ae.baseLanes|$,k.memoizedState=null):Y=$,rr(Lh,Vs),Vs|=Y;return Oo(T,k,Z,$),k.child}function Fi(T,k){var $=k.ref;(T===null&&$!==null||T!==null&&T.ref!==$)&&(k.flags|=512,k.flags|=2097152)}function Ef(T,k,$,Y,Z){var ae=De($)?Be:Ie.current;return ae=ze(k,ae),yo(k,Z),$=wh(T,k,$,Y,ae,Z),Y=_p(),T!==null&&!Mn?(k.updateQueue=T.updateQueue,k.flags&=-2053,T.lanes&=~Z,eu(T,k,Z)):(yi&&Y&&ro(k),k.flags|=1,Oo(T,k,$,Z),k.child)}function oa(T,k,$,Y,Z){if(De($)){var ae=!0;Rt(k)}else ae=!1;if(yo(k,Z),k.stateNode===null)Xg(T,k),Rp(k,$,Y),wf(k,$,Y,Z),Y=!0;else if(T===null){var xe=k.stateNode,He=k.memoizedProps;xe.props=He;var at=xe.context,Ft=$.contextType;typeof Ft=="object"&&Ft!==null?Ft=vo(Ft):(Ft=De($)?Be:Ie.current,Ft=ze(k,Ft));var yn=$.getDerivedStateFromProps,tr=typeof yn=="function"||typeof xe.getSnapshotBeforeUpdate=="function";tr||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(He!==Y||at!==Ft)&&X1(k,xe,Y,Ft),Qu=!1;var an=k.memoizedState;xe.state=an,Ic(k,Y,xe,Z),at=k.memoizedState,He!==Y||an!==at||Se.current||Qu?(typeof yn=="function"&&(kp(k,$,yn,Y),at=k.memoizedState),(He=Qu||Yg(k,$,He,Y,an,at,Ft))?(tr||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(k.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(k.flags|=4194308),k.memoizedProps=Y,k.memoizedState=at),xe.props=Y,xe.state=at,xe.context=Ft,Y=He):(typeof xe.componentDidMount=="function"&&(k.flags|=4194308),Y=!1)}else{xe=k.stateNode,c2(T,k),He=k.memoizedProps,Ft=k.type===k.elementType?He:Do(k.type,He),xe.props=Ft,tr=k.pendingProps,an=xe.context,at=$.contextType,typeof at=="object"&&at!==null?at=vo(at):(at=De($)?Be:Ie.current,at=ze(k,at));var Ui=$.getDerivedStateFromProps;(yn=typeof Ui=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(He!==tr||an!==at)&&X1(k,xe,Y,at),Qu=!1,an=k.memoizedState,xe.state=an,Ic(k,Y,xe,Z);var Si=k.memoizedState;He!==tr||an!==Si||Se.current||Qu?(typeof Ui=="function"&&(kp(k,$,Ui,Y),Si=k.memoizedState),(Ft=Qu||Yg(k,$,Ft,Y,an,Si,at)||!1)?(yn||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(Y,Si,at),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(Y,Si,at)),typeof xe.componentDidUpdate=="function"&&(k.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(k.flags|=1024)):(typeof xe.componentDidUpdate!="function"||He===T.memoizedProps&&an===T.memoizedState||(k.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||He===T.memoizedProps&&an===T.memoizedState||(k.flags|=1024),k.memoizedProps=Y,k.memoizedState=Si),xe.props=Y,xe.state=Si,xe.context=at,Y=Ft):(typeof xe.componentDidUpdate!="function"||He===T.memoizedProps&&an===T.memoizedState||(k.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||He===T.memoizedProps&&an===T.memoizedState||(k.flags|=1024),Y=!1)}return Oa(T,k,$,Y,ae,Z)}function Oa(T,k,$,Y,Z,ae){Fi(T,k);var xe=(k.flags&128)!==0;if(!Y&&!xe)return Z&&jt(k,$,!1),eu(T,k,ae);Y=k.stateNode,Da.current=k;var He=xe&&typeof $.getDerivedStateFromError!="function"?null:Y.render();return k.flags|=1,T!==null&&xe?(k.child=be(k,T.child,null,ae),k.child=be(k,null,He,ae)):Oo(T,k,He,ae),k.memoizedState=Y.state,Z&&jt(k,$,!0),k.child}function Ma(T){var k=T.stateNode;k.pendingContext?kt(T,k.pendingContext,k.pendingContext!==k.context):k.context&&kt(T,k.context,!1),q1(T,k.containerInfo)}function Dp(T,k,$,Y,Z){return vf(),vh(Z),k.flags|=256,Oo(T,k,$,Y),k.child}var La={dehydrated:null,treeContext:null,retryLane:0};function nm(T){return{baseLanes:T,cachePool:null,transitions:null}}function wx(T,k,$){var Y=k.pendingProps,Z=ws.current,ae=!1,xe=(k.flags&128)!==0,He;if((He=xe)||(He=T!==null&&T.memoizedState===null?!1:(Z&2)!==0),He?(ae=!0,k.flags&=-129):(T===null||T.memoizedState!==null)&&(Z|=1),rr(ws,Z&1),T===null)return Xu(k),T=k.memoizedState,T!==null&&(T=T.dehydrated,T!==null)?(k.mode&1?eo(T)?k.lanes=8:k.lanes=1073741824:k.lanes=1,null):(xe=Y.children,T=Y.fallback,ae?(Y=k.mode,ae=k.child,xe={mode:"hidden",children:xe},!(Y&1)&&ae!==null?(ae.childLanes=0,ae.pendingProps=xe):ae=Hp(xe,Y,0,null),T=Lo(T,Y,$,null),ae.return=k,T.return=k,ae.sibling=T,k.child=ae,k.child.memoizedState=nm($),k.memoizedState=La,T):J1(k,xe));if(Z=T.memoizedState,Z!==null&&(He=Z.dehydrated,He!==null))return h2(T,k,xe,Y,He,Z,$);if(ae){ae=Y.fallback,xe=k.mode,Z=T.child,He=Z.sibling;var at={mode:"hidden",children:Y.children};return!(xe&1)&&k.child!==Z?(Y=k.child,Y.childLanes=0,Y.pendingProps=at,k.deletions=null):(Y=Bc(Z,at),Y.subtreeFlags=Z.subtreeFlags&14680064),He!==null?ae=Bc(He,ae):(ae=Lo(ae,xe,$,null),ae.flags|=2),ae.return=k,Y.return=k,Y.sibling=ae,k.child=Y,Y=ae,ae=k.child,xe=T.child.memoizedState,xe=xe===null?nm($):{baseLanes:xe.baseLanes|$,cachePool:null,transitions:xe.transitions},ae.memoizedState=xe,ae.childLanes=T.childLanes&~$,k.memoizedState=La,Y}return ae=T.child,T=ae.sibling,Y=Bc(ae,{mode:"visible",children:Y.children}),!(k.mode&1)&&(Y.lanes=$),Y.return=k,Y.sibling=null,T!==null&&($=k.deletions,$===null?(k.deletions=[T],k.flags|=16):$.push(T)),k.child=Y,k.memoizedState=null,Y}function J1(T,k){return k=Hp({mode:"visible",children:k},T.mode,0,null),k.return=T,T.child=k}function Za(T,k,$,Y){return Y!==null&&vh(Y),be(k,T.child,null,$),T=J1(k,k.pendingProps.children),T.flags|=2,k.memoizedState=null,T}function h2(T,k,$,Y,Z,ae,xe){if($)return k.flags&256?(k.flags&=-257,Y=Ah(Error(o(422))),Za(T,k,xe,Y)):k.memoizedState!==null?(k.child=T.child,k.flags|=128,null):(ae=Y.fallback,Z=k.mode,Y=Hp({mode:"visible",children:Y.children},Z,0,null),ae=Lo(ae,Z,xe,null),ae.flags|=2,Y.return=k,ae.return=k,Y.sibling=ae,k.child=Y,k.mode&1&&be(k,T.child,null,xe),k.child.memoizedState=nm(xe),k.memoizedState=La,ae);if(!(k.mode&1))return Za(T,k,xe,null);if(eo(Z))return Y=go(Z).digest,ae=Error(o(419)),Y=Ah(ae,Y,void 0),Za(T,k,xe,Y);if($=(xe&T.childLanes)!==0,Mn||$){if(Y=$i,Y!==null){switch(xe&-xe){case 4:Z=2;break;case 16:Z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Z=32;break;case 536870912:Z=268435456;break;default:Z=0}Z=Z&(Y.suspendedLanes|xe)?0:Z,Z!==0&&Z!==ae.retryLane&&(ae.retryLane=Z,kc(T,Z),ji(Y,T,Z,-1))}return Vp(),Y=Ah(Error(o(421))),Za(T,k,xe,Y)}return Hi(Z)?(k.flags|=128,k.child=T.child,k=kx.bind(null,T),Jo(Z,k),null):(T=ae.treeContext,Oe&&(Ro=Pl(Z),oi=k,yi=!0,ia=null,Ra=!1,T!==null&&(Mr[js++]=no,Mr[js++]=Qa,Mr[js++]=Li,no=T.id,Qa=T.overflow,Li=k)),k=J1(k,Y.children),k.flags|=4096,k)}function Sf(T,k,$){T.lanes|=k;var Y=T.alternate;Y!==null&&(Y.lanes|=k),Io(T.return,k,$)}function rm(T,k,$,Y,Z){var ae=T.memoizedState;ae===null?T.memoizedState={isBackwards:k,rendering:null,renderingStartTime:0,last:Y,tail:$,tailMode:Z}:(ae.isBackwards=k,ae.rendering=null,ae.renderingStartTime=0,ae.last=Y,ae.tail=$,ae.tailMode=Z)}function Z1(T,k,$){var Y=k.pendingProps,Z=Y.revealOrder,ae=Y.tail;if(Oo(T,k,Y.children,$),Y=ws.current,Y&2)Y=Y&1|2,k.flags|=128;else{if(T!==null&&T.flags&128)e:for(T=k.child;T!==null;){if(T.tag===13)T.memoizedState!==null&&Sf(T,$,k);else if(T.tag===19)Sf(T,$,k);else if(T.child!==null){T.child.return=T,T=T.child;continue}if(T===k)break e;for(;T.sibling===null;){if(T.return===null||T.return===k)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}Y&=1}if(rr(ws,Y),!(k.mode&1))k.memoizedState=null;else switch(Z){case"forwards":for($=k.child,Z=null;$!==null;)T=$.alternate,T!==null&&wd(T)===null&&(Z=$),$=$.sibling;$=Z,$===null?(Z=k.child,k.child=null):(Z=$.sibling,$.sibling=null),rm(k,!1,Z,$,ae);break;case"backwards":for($=null,Z=k.child,k.child=null;Z!==null;){if(T=Z.alternate,T!==null&&wd(T)===null){k.child=Z;break}T=Z.sibling,Z.sibling=$,$=Z,Z=T}rm(k,!0,$,null,ae);break;case"together":rm(k,!1,null,null,void 0);break;default:k.memoizedState=null}return k.child}function Xg(T,k){!(k.mode&1)&&T!==null&&(T.alternate=null,k.alternate=null,k.flags|=2)}function eu(T,k,$){if(T!==null&&(k.dependencies=T.dependencies),kf|=k.lanes,!($&k.childLanes))return null;if(T!==null&&k.child!==T.child)throw Error(o(153));if(k.child!==null){for(T=k.child,$=Bc(T,T.pendingProps),k.child=$,$.return=k;T.sibling!==null;)T=T.sibling,$=$.sibling=Bc(T,T.pendingProps),$.return=k;$.sibling=null}return k.child}function Rh(T,k,$){switch(k.tag){case 3:Ma(k),vf();break;case 5:gx(k);break;case 1:De(k.type)&&Rt(k);break;case 4:q1(k,k.stateNode.containerInfo);break;case 10:ai(k,k.type._context,k.memoizedProps.value);break;case 13:var Y=k.memoizedState;if(Y!==null)return Y.dehydrated!==null?(rr(ws,ws.current&1),k.flags|=128,null):$&k.child.childLanes?wx(T,k,$):(rr(ws,ws.current&1),T=eu(T,k,$),T!==null?T.sibling:null);rr(ws,ws.current&1);break;case 19:if(Y=($&k.childLanes)!==0,T.flags&128){if(Y)return Z1(T,k,$);k.flags|=128}var Z=k.memoizedState;if(Z!==null&&(Z.rendering=null,Z.tail=null,Z.lastEffect=null),rr(ws,ws.current),Y)break;return null;case 22:case 23:return k.lanes=0,Gi(T,k,$)}return eu(T,k,$)}function tu(T){T.flags|=4}function aa(T,k){if(T!==null&&T.child===k.child)return!0;if(k.flags&16)return!1;for(T=k.child;T!==null;){if(T.flags&12854||T.subtreeFlags&12854)return!1;T=T.sibling}return!0}var Ih,Ph,nu,ru;if(ge)Ih=function(T,k){for(var $=k.child;$!==null;){if($.tag===5||$.tag===6)te(T,$.stateNode);else if($.tag!==4&&$.child!==null){$.child.return=$,$=$.child;continue}if($===k)break;for(;$.sibling===null;){if($.return===null||$.return===k)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},Ph=function(){},nu=function(T,k,$,Y,Z){if(T=T.memoizedProps,T!==Y){var ae=k.stateNode,xe=Zu(Fl.current);$=J(ae,$,T,Y,Z,xe),(k.updateQueue=$)&&tu(k)}},ru=function(T,k,$,Y){$!==Y&&tu(k)};else if(me){Ih=function(T,k,$,Y){for(var Z=k.child;Z!==null;){if(Z.tag===5){var ae=Z.stateNode;$&&Y&&(ae=Kr(ae,Z.type,Z.memoizedProps,Z)),te(T,ae)}else if(Z.tag===6)ae=Z.stateNode,$&&Y&&(ae=Oi(ae,Z.memoizedProps,Z)),te(T,ae);else if(Z.tag!==4){if(Z.tag===22&&Z.memoizedState!==null)ae=Z.child,ae!==null&&(ae.return=Z),Ih(T,Z,!0,!0);else if(Z.child!==null){Z.child.return=Z,Z=Z.child;continue}}if(Z===k)break;for(;Z.sibling===null;){if(Z.return===null||Z.return===k)return;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}};var Nh=function(T,k,$,Y){for(var Z=k.child;Z!==null;){if(Z.tag===5){var ae=Z.stateNode;$&&Y&&(ae=Kr(ae,Z.type,Z.memoizedProps,Z)),Gu(T,ae)}else if(Z.tag===6)ae=Z.stateNode,$&&Y&&(ae=Oi(ae,Z.memoizedProps,Z)),Gu(T,ae);else if(Z.tag!==4){if(Z.tag===22&&Z.memoizedState!==null)ae=Z.child,ae!==null&&(ae.return=Z),Nh(T,Z,!0,!0);else if(Z.child!==null){Z.child.return=Z,Z=Z.child;continue}}if(Z===k)break;for(;Z.sibling===null;){if(Z.return===null||Z.return===k)return;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}};Ph=function(T,k){var $=k.stateNode;if(!aa(T,k)){T=$.containerInfo;var Y=mo(T);Nh(Y,k,!1,!1),$.pendingChildren=Y,tu(k),Sa(T,Y)}},nu=function(T,k,$,Y,Z){var ae=T.stateNode,xe=T.memoizedProps;if((T=aa(T,k))&&xe===Y)k.stateNode=ae;else{var He=k.stateNode,at=Zu(Fl.current),Ft=null;xe!==Y&&(Ft=J(He,$,xe,Y,Z,at)),T&&Ft===null?k.stateNode=ae:(ae=ei(ae,Ft,$,xe,Y,k,T,He),q(ae,$,Y,Z,at)&&tu(k),k.stateNode=ae,T?tu(k):Ih(ae,k,!1,!1))}},ru=function(T,k,$,Y){$!==Y?(T=Zu(Po.current),$=Zu(Fl.current),k.stateNode=de(Y,T,$,k),tu(k)):k.stateNode=T.stateNode}}else Ph=function(){},nu=function(){},ru=function(){};function Eu(T,k){if(!yi)switch(T.tailMode){case"hidden":k=T.tail;for(var $=null;k!==null;)k.alternate!==null&&($=k),k=k.sibling;$===null?T.tail=null:$.sibling=null;break;case"collapsed":$=T.tail;for(var Y=null;$!==null;)$.alternate!==null&&(Y=$),$=$.sibling;Y===null?k||T.tail===null?T.tail=null:T.tail.sibling=null:Y.sibling=null}}function es(T){var k=T.alternate!==null&&T.alternate.child===T.child,$=0,Y=0;if(k)for(var Z=T.child;Z!==null;)$|=Z.lanes|Z.childLanes,Y|=Z.subtreeFlags&14680064,Y|=Z.flags&14680064,Z.return=T,Z=Z.sibling;else for(Z=T.child;Z!==null;)$|=Z.lanes|Z.childLanes,Y|=Z.subtreeFlags,Y|=Z.flags,Z.return=T,Z=Z.sibling;return T.subtreeFlags|=Y,T.childLanes=$,k}function Op(T,k,$){var Y=k.pendingProps;switch(Ac(k),k.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return es(k),null;case 1:return De(k.type)&&ht(),es(k),null;case 3:return $=k.stateNode,xp(),ti(Se),ti(Ie),mt(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),(T===null||T.child===null)&&(bd(k)?tu(k):T===null||T.memoizedState.isDehydrated&&!(k.flags&256)||(k.flags|=1024,ia!==null&&(ny(ia),ia=null))),Ph(T,k),es(k),null;case 5:yx(k),$=Zu(Po.current);var Z=k.type;if(T!==null&&k.stateNode!=null)nu(T,k,Z,Y,$),T.ref!==k.ref&&(k.flags|=512,k.flags|=2097152);else{if(!Y){if(k.stateNode===null)throw Error(o(166));return es(k),null}if(T=Zu(Fl.current),bd(k)){if(!Oe)throw Error(o(175));T=bs(k.stateNode,k.type,k.memoizedProps,$,T,k,!Ra),k.updateQueue=T,T!==null&&tu(k)}else{var ae=W(Z,Y,$,T,k);Ih(ae,k,!1,!1),k.stateNode=ae,q(ae,Z,Y,$,T)&&tu(k)}k.ref!==null&&(k.flags|=512,k.flags|=2097152)}return es(k),null;case 6:if(T&&k.stateNode!=null)ru(T,k,T.memoizedProps,Y);else{if(typeof Y!="string"&&k.stateNode===null)throw Error(o(166));if(T=Zu(Po.current),$=Zu(Fl.current),bd(k)){if(!Oe)throw Error(o(176));if(T=k.stateNode,$=k.memoizedProps,(Y=Ka(T,$,k,!Ra))&&(Z=oi,Z!==null))switch(Z.tag){case 3:wc(Z.stateNode.containerInfo,T,$,(Z.mode&1)!==0);break;case 5:Er(Z.type,Z.memoizedProps,Z.stateNode,T,$,(Z.mode&1)!==0)}Y&&tu(k)}else k.stateNode=de(Y,T,$,k)}return es(k),null;case 13:if(ti(ws),Y=k.memoizedState,T===null||T.memoizedState!==null&&T.memoizedState.dehydrated!==null){if(yi&&Ro!==null&&k.mode&1&&!(k.flags&128))jg(),vf(),k.flags|=98560,Z=!1;else if(Z=bd(k),Y!==null&&Y.dehydrated!==null){if(T===null){if(!Z)throw Error(o(318));if(!Oe)throw Error(o(344));if(Z=k.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(o(317));Zo(Z,k)}else vf(),!(k.flags&128)&&(k.memoizedState=null),k.flags|=4;es(k),Z=!1}else ia!==null&&(ny(ia),ia=null),Z=!0;if(!Z)return k.flags&65536?k:null}return k.flags&128?(k.lanes=$,k):($=Y!==null,$!==(T!==null&&T.memoizedState!==null)&&$&&(k.child.flags|=8192,k.mode&1&&(T===null||ws.current&1?Yi===0&&(Yi=3):Vp())),k.updateQueue!==null&&(k.flags|=4),es(k),null);case 4:return xp(),Ph(T,k),T===null&&Ye(k.stateNode.containerInfo),es(k),null;case 10:return cs(k.type._context),es(k),null;case 17:return De(k.type)&&ht(),es(k),null;case 19:if(ti(ws),Z=k.memoizedState,Z===null)return es(k),null;if(Y=(k.flags&128)!==0,ae=Z.rendering,ae===null)if(Y)Eu(Z,!1);else{if(Yi!==0||T!==null&&T.flags&128)for(T=k.child;T!==null;){if(ae=wd(T),ae!==null){for(k.flags|=128,Eu(Z,!1),T=ae.updateQueue,T!==null&&(k.updateQueue=T,k.flags|=4),k.subtreeFlags=0,T=$,$=k.child;$!==null;)Y=$,Z=T,Y.flags&=14680066,ae=Y.alternate,ae===null?(Y.childLanes=0,Y.lanes=Z,Y.child=null,Y.subtreeFlags=0,Y.memoizedProps=null,Y.memoizedState=null,Y.updateQueue=null,Y.dependencies=null,Y.stateNode=null):(Y.childLanes=ae.childLanes,Y.lanes=ae.lanes,Y.child=ae.child,Y.subtreeFlags=0,Y.deletions=null,Y.memoizedProps=ae.memoizedProps,Y.memoizedState=ae.memoizedState,Y.updateQueue=ae.updateQueue,Y.type=ae.type,Z=ae.dependencies,Y.dependencies=Z===null?null:{lanes:Z.lanes,firstContext:Z.firstContext}),$=$.sibling;return rr(ws,ws.current&1|2),k.child}T=T.sibling}Z.tail!==null&&Rs()>ey&&(k.flags|=128,Y=!0,Eu(Z,!1),k.lanes=4194304)}else{if(!Y)if(T=wd(ae),T!==null){if(k.flags|=128,Y=!0,T=T.updateQueue,T!==null&&(k.updateQueue=T,k.flags|=4),Eu(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!ae.alternate&&!yi)return es(k),null}else 2*Rs()-Z.renderingStartTime>ey&&$!==1073741824&&(k.flags|=128,Y=!0,Eu(Z,!1),k.lanes=4194304);Z.isBackwards?(ae.sibling=k.child,k.child=ae):(T=Z.last,T!==null?T.sibling=ae:k.child=ae,Z.last=ae)}return Z.tail!==null?(k=Z.tail,Z.rendering=k,Z.tail=k.sibling,Z.renderingStartTime=Rs(),k.sibling=null,T=ws.current,rr(ws,Y?T&1|2:T&1),k):(es(k),null);case 22:case 23:return iy(),$=k.memoizedState!==null,T!==null&&T.memoizedState!==null!==$&&(k.flags|=8192),$&&k.mode&1?Vs&1073741824&&(es(k),ge&&k.subtreeFlags&6&&(k.flags|=8192)):es(k),null;case 24:return null;case 25:return null}throw Error(o(156,k.tag))}function p2(T,k){switch(Ac(k),k.tag){case 1:return De(k.type)&&ht(),T=k.flags,T&65536?(k.flags=T&-65537|128,k):null;case 3:return xp(),ti(Se),ti(Ie),mt(),T=k.flags,T&65536&&!(T&128)?(k.flags=T&-65537|128,k):null;case 5:return yx(k),null;case 13:if(ti(ws),T=k.memoizedState,T!==null&&T.dehydrated!==null){if(k.alternate===null)throw Error(o(340));vf()}return T=k.flags,T&65536?(k.flags=T&-65537|128,k):null;case 19:return ti(ws),null;case 4:return xp(),null;case 10:return cs(k.type._context),null;case 22:case 23:return iy(),null;case 24:return null;default:return null}}var Dh=!1,Is=!1,Fa=typeof WeakSet=="function"?WeakSet:Set,nn=null;function bi(T,k){var $=T.ref;if($!==null)if(typeof $=="function")try{$(null)}catch(Y){ns(T,k,Y)}else $.current=null}function el(T,k,$){try{$()}catch(Y){ns(T,k,Y)}}var Dc=!1;function ev(T,k){for(ue(T.containerInfo),nn=k;nn!==null;)if(T=nn,k=T.child,(T.subtreeFlags&1028)!==0&&k!==null)k.return=T,nn=k;else for(;nn!==null;){T=nn;try{var $=T.alternate;if(T.flags&1024)switch(T.tag){case 0:case 11:case 15:break;case 1:if($!==null){var Y=$.memoizedProps,Z=$.memoizedState,ae=T.stateNode,xe=ae.getSnapshotBeforeUpdate(T.elementType===T.type?Y:Do(T.type,Y),Z);ae.__reactInternalSnapshotBeforeUpdate=xe}break;case 3:ge&&Zi(T.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(He){ns(T,T.return,He)}if(k=T.sibling,k!==null){k.return=T.return,nn=k;break}nn=T.return}return $=Dc,Dc=!1,$}function tl(T,k,$){var Y=k.updateQueue;if(Y=Y!==null?Y.lastEffect:null,Y!==null){var Z=Y=Y.next;do{if((Z.tag&T)===T){var ae=Z.destroy;Z.destroy=void 0,ae!==void 0&&el(k,$,ae)}Z=Z.next}while(Z!==Y)}}function ua(T,k){if(k=k.updateQueue,k=k!==null?k.lastEffect:null,k!==null){var $=k=k.next;do{if(($.tag&T)===T){var Y=$.create;$.destroy=Y()}$=$.next}while($!==k)}}function tv(T){var k=T.ref;if(k!==null){var $=T.stateNode;switch(T.tag){case 5:T=G($);break;default:T=$}typeof k=="function"?k(T):k.current=T}}function im(T){var k=T.alternate;k!==null&&(T.alternate=null,im(k)),T.child=null,T.deletions=null,T.sibling=null,T.tag===5&&(k=T.stateNode,k!==null&&We(k)),T.stateNode=null,T.return=null,T.dependencies=null,T.memoizedProps=null,T.memoizedState=null,T.pendingProps=null,T.stateNode=null,T.updateQueue=null}function nv(T){return T.tag===5||T.tag===3||T.tag===4}function Oc(T){e:for(;;){for(;T.sibling===null;){if(T.return===null||nv(T.return))return null;T=T.return}for(T.sibling.return=T.return,T=T.sibling;T.tag!==5&&T.tag!==6&&T.tag!==18;){if(T.flags&2||T.child===null||T.tag===4)continue e;T.child.return=T,T=T.child}if(!(T.flags&2))return T.stateNode}}function zl(T,k,$){var Y=T.tag;if(Y===5||Y===6)T=T.stateNode,k?wr($,T,k):Vt($,T);else if(Y!==4&&(T=T.child,T!==null))for(zl(T,k,$),T=T.sibling;T!==null;)zl(T,k,$),T=T.sibling}function rv(T,k,$){var Y=T.tag;if(Y===5||Y===6)T=T.stateNode,k?Zn($,T,k):wt($,T);else if(Y!==4&&(T=T.child,T!==null))for(rv(T,k,$),T=T.sibling;T!==null;)rv(T,k,$),T=T.sibling}var zs=null,la=!1;function Mc(T,k,$){for($=$.child;$!==null;)Qg(T,k,$),$=$.sibling}function Qg(T,k,$){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(xr,$)}catch{}switch($.tag){case 5:Is||bi($,k);case 6:if(ge){var Y=zs,Z=la;zs=null,Mc(T,k,$),zs=Y,la=Z,zs!==null&&(la?nr(zs,$.stateNode):Hn(zs,$.stateNode))}else Mc(T,k,$);break;case 18:ge&&zs!==null&&(la?xc(zs,$.stateNode):gf(zs,$.stateNode));break;case 4:ge?(Y=zs,Z=la,zs=$.stateNode.containerInfo,la=!0,Mc(T,k,$),zs=Y,la=Z):(me&&(Y=$.stateNode.containerInfo,Z=mo(Y),Ta(Y,Z)),Mc(T,k,$));break;case 0:case 11:case 14:case 15:if(!Is&&(Y=$.updateQueue,Y!==null&&(Y=Y.lastEffect,Y!==null))){Z=Y=Y.next;do{var ae=Z,xe=ae.destroy;ae=ae.tag,xe!==void 0&&(ae&2||ae&4)&&el($,k,xe),Z=Z.next}while(Z!==Y)}Mc(T,k,$);break;case 1:if(!Is&&(bi($,k),Y=$.stateNode,typeof Y.componentWillUnmount=="function"))try{Y.props=$.memoizedProps,Y.state=$.memoizedState,Y.componentWillUnmount()}catch(He){ns($,k,He)}Mc(T,k,$);break;case 21:Mc(T,k,$);break;case 22:$.mode&1?(Is=(Y=Is)||$.memoizedState!==null,Mc(T,k,$),Is=Y):Mc(T,k,$);break;default:Mc(T,k,$)}}function Es(T){var k=T.updateQueue;if(k!==null){T.updateQueue=null;var $=T.stateNode;$===null&&($=T.stateNode=new Fa),k.forEach(function(Y){var Z=_C.bind(null,T,Y);$.has(Y)||($.add(Y),Y.then(Z,Z))})}}function Su(T,k){var $=k.deletions;if($!==null)for(var Y=0;Y<$.length;Y++){var Z=$[Y];try{var ae=T,xe=k;if(ge){var He=xe;e:for(;He!==null;){switch(He.tag){case 5:zs=He.stateNode,la=!1;break e;case 3:zs=He.stateNode.containerInfo,la=!0;break e;case 4:zs=He.stateNode.containerInfo,la=!0;break e}He=He.return}if(zs===null)throw Error(o(160));Qg(ae,xe,Z),zs=null,la=!1}else Qg(ae,xe,Z);var at=Z.alternate;at!==null&&(at.return=null),Z.return=null}catch(Ft){ns(Z,k,Ft)}}if(k.subtreeFlags&12854)for(k=k.child;k!==null;)sm(k,T),k=k.sibling}function sm(T,k){var $=T.alternate,Y=T.flags;switch(T.tag){case 0:case 11:case 14:case 15:if(Su(k,T),Ps(T),Y&4){try{tl(3,T,T.return),ua(3,T)}catch(an){ns(T,T.return,an)}try{tl(5,T,T.return)}catch(an){ns(T,T.return,an)}}break;case 1:Su(k,T),Ps(T),Y&512&&$!==null&&bi($,$.return);break;case 5:if(Su(k,T),Ps(T),Y&512&&$!==null&&bi($,$.return),ge){if(T.flags&32){var Z=T.stateNode;try{Ei(Z)}catch(an){ns(T,T.return,an)}}if(Y&4&&(Z=T.stateNode,Z!=null)){var ae=T.memoizedProps;if($=$!==null?$.memoizedProps:ae,Y=T.type,k=T.updateQueue,T.updateQueue=null,k!==null)try{Dn(Z,k,Y,$,ae,T)}catch(an){ns(T,T.return,an)}}}break;case 6:if(Su(k,T),Ps(T),Y&4&&ge){if(T.stateNode===null)throw Error(o(162));Z=T.stateNode,ae=T.memoizedProps,$=$!==null?$.memoizedProps:ae;try{Wt(Z,$,ae)}catch(an){ns(T,T.return,an)}}break;case 3:if(Su(k,T),Ps(T),Y&4){if(ge&&Oe&&$!==null&&$.memoizedState.isDehydrated)try{md(k.containerInfo)}catch(an){ns(T,T.return,an)}if(me){Z=k.containerInfo,ae=k.pendingChildren;try{Ta(Z,ae)}catch(an){ns(T,T.return,an)}}}break;case 4:if(Su(k,T),Ps(T),Y&4&&me){ae=T.stateNode,Z=ae.containerInfo,ae=ae.pendingChildren;try{Ta(Z,ae)}catch(an){ns(T,T.return,an)}}break;case 13:Su(k,T),Ps(T),Z=T.child,Z.flags&8192&&(ae=Z.memoizedState!==null,Z.stateNode.isHidden=ae,!ae||Z.alternate!==null&&Z.alternate.memoizedState!==null||(Bp=Rs())),Y&4&&Es(T);break;case 22:var xe=$!==null&&$.memoizedState!==null;if(T.mode&1?(Is=($=Is)||xe,Su(k,T),Is=$):Su(k,T),Ps(T),Y&8192){if($=T.memoizedState!==null,(T.stateNode.isHidden=$)&&!xe&&T.mode&1)for(nn=T,Y=T.child;Y!==null;){for(k=nn=Y;nn!==null;){xe=nn;var He=xe.child;switch(xe.tag){case 0:case 11:case 14:case 15:tl(4,xe,xe.return);break;case 1:bi(xe,xe.return);var at=xe.stateNode;if(typeof at.componentWillUnmount=="function"){var Ft=xe,yn=xe.return;try{var tr=Ft;at.props=tr.memoizedProps,at.state=tr.memoizedState,at.componentWillUnmount()}catch(an){ns(Ft,yn,an)}}break;case 5:bi(xe,xe.return);break;case 22:if(xe.memoizedState!==null){Jg(k);continue}}He!==null?(He.return=xe,nn=He):Jg(k)}Y=Y.sibling}if(ge){e:if(Y=null,ge)for(k=T;;){if(k.tag===5){if(Y===null){Y=k;try{Z=k.stateNode,$?Dr(Z):Ji(k.stateNode,k.memoizedProps)}catch(an){ns(T,T.return,an)}}}else if(k.tag===6){if(Y===null)try{ae=k.stateNode,$?Co(ae):Di(ae,k.memoizedProps)}catch(an){ns(T,T.return,an)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===T)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===T)break e;for(;k.sibling===null;){if(k.return===null||k.return===T)break e;Y===k&&(Y=null),k=k.return}Y===k&&(Y=null),k.sibling.return=k.return,k=k.sibling}}}break;case 19:Su(k,T),Ps(T),Y&4&&Es(T);break;case 21:break;default:Su(k,T),Ps(T)}}function Ps(T){var k=T.flags;if(k&2){try{if(ge){e:{for(var $=T.return;$!==null;){if(nv($)){var Y=$;break e}$=$.return}throw Error(o(160))}switch(Y.tag){case 5:var Z=Y.stateNode;Y.flags&32&&(Ei(Z),Y.flags&=-33);var ae=Oc(T);rv(T,ae,Z);break;case 3:case 4:var xe=Y.stateNode.containerInfo,He=Oc(T);zl(T,He,xe);break;default:throw Error(o(161))}}}catch(at){ns(T,T.return,at)}T.flags&=-3}k&4096&&(T.flags&=-4097)}function Oh(T,k,$){nn=T,Mp(T)}function Mp(T,k,$){for(var Y=(T.mode&1)!==0;nn!==null;){var Z=nn,ae=Z.child;if(Z.tag===22&&Y){var xe=Z.memoizedState!==null||Dh;if(!xe){var He=Z.alternate,at=He!==null&&He.memoizedState!==null||Is;He=Dh;var Ft=Is;if(Dh=xe,(Is=at)&&!Ft)for(nn=Z;nn!==null;)xe=nn,at=xe.child,xe.tag===22&&xe.memoizedState!==null?Mo(Z):at!==null?(at.return=xe,nn=at):Mo(Z);for(;ae!==null;)nn=ae,Mp(ae),ae=ae.sibling;nn=Z,Dh=He,Is=Ft}Tf(T)}else Z.subtreeFlags&8772&&ae!==null?(ae.return=Z,nn=ae):Tf(T)}}function Tf(T){for(;nn!==null;){var k=nn;if(k.flags&8772){var $=k.alternate;try{if(k.flags&8772)switch(k.tag){case 0:case 11:case 15:Is||ua(5,k);break;case 1:var Y=k.stateNode;if(k.flags&4&&!Is)if($===null)Y.componentDidMount();else{var Z=k.elementType===k.type?$.memoizedProps:Do(k.type,$.memoizedProps);Y.componentDidUpdate(Z,$.memoizedState,Y.__reactInternalSnapshotBeforeUpdate)}var ae=k.updateQueue;ae!==null&&f2(k,ae,Y);break;case 3:var xe=k.updateQueue;if(xe!==null){if($=null,k.child!==null)switch(k.child.tag){case 5:$=G(k.child.stateNode);break;case 1:$=k.child.stateNode}f2(k,xe,$)}break;case 5:var He=k.stateNode;$===null&&k.flags&4&&bn(He,k.type,k.memoizedProps,k);break;case 6:break;case 4:break;case 12:break;case 13:if(Oe&&k.memoizedState===null){var at=k.alternate;if(at!==null){var Ft=at.memoizedState;if(Ft!==null){var yn=Ft.dehydrated;yn!==null&&mf(yn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Is||k.flags&512&&tv(k)}catch(tr){ns(k,k.return,tr)}}if(k===T){nn=null;break}if($=k.sibling,$!==null){$.return=k.return,nn=$;break}nn=k.return}}function Jg(T){for(;nn!==null;){var k=nn;if(k===T){nn=null;break}var $=k.sibling;if($!==null){$.return=k.return,nn=$;break}nn=k.return}}function Mo(T){for(;nn!==null;){var k=nn;try{switch(k.tag){case 0:case 11:case 15:var $=k.return;try{ua(4,k)}catch(at){ns(k,$,at)}break;case 1:var Y=k.stateNode;if(typeof Y.componentDidMount=="function"){var Z=k.return;try{Y.componentDidMount()}catch(at){ns(k,Z,at)}}var ae=k.return;try{tv(k)}catch(at){ns(k,ae,at)}break;case 5:var xe=k.return;try{tv(k)}catch(at){ns(k,xe,at)}}}catch(at){ns(k,k.return,at)}if(k===T){nn=null;break}var He=k.sibling;if(He!==null){He.return=k.return,nn=He;break}nn=k.return}}var Lc=0,iu=1,Cf=2,om=3,Lp=4;if(typeof Symbol=="function"&&Symbol.for){var nl=Symbol.for;Lc=nl("selector.component"),iu=nl("selector.has_pseudo_class"),Cf=nl("selector.role"),om=nl("selector.test_id"),Lp=nl("selector.text")}function Tu(T){var k=Me(T);if(k!=null){if(typeof k.memoizedProps["data-testname"]!="string")throw Error(o(364));return k}if(T=It(T),T===null)throw Error(o(362));return T.stateNode.current}function am(T,k){switch(k.$$typeof){case Lc:if(T.type===k.value)return!0;break;case iu:e:{k=k.value,T=[T,0];for(var $=0;$<T.length;){var Y=T[$++],Z=T[$++],ae=k[Z];if(Y.tag!==5||!Lt(Y)){for(;ae!=null&&am(Y,ae);)Z++,ae=k[Z];if(Z===k.length){k=!0;break e}else for(Y=Y.child;Y!==null;)T.push(Y,Z),Y=Y.sibling}}k=!1}return k;case Cf:if(T.tag===5&&sn(T.stateNode,k.value))return!0;break;case Lp:if((T.tag===5||T.tag===6)&&(T=Ke(T),T!==null&&0<=T.indexOf(k.value)))return!0;break;case om:if(T.tag===5&&(T=T.memoizedProps["data-testname"],typeof T=="string"&&T.toLowerCase()===k.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function iv(T){switch(T.$$typeof){case Lc:return"<"+(R(T.value)||"Unknown")+">";case iu:return":has("+(iv(T)||"")+")";case Cf:return'[role="'+T.value+'"]';case Lp:return'"'+T.value+'"';case om:return'[data-testname="'+T.value+'"]';default:throw Error(o(365))}}function Af(T,k){var $=[];T=[T,0];for(var Y=0;Y<T.length;){var Z=T[Y++],ae=T[Y++],xe=k[ae];if(Z.tag!==5||!Lt(Z)){for(;xe!=null&&am(Z,xe);)ae++,xe=k[ae];if(ae===k.length)$.push(Z);else for(Z=Z.child;Z!==null;)T.push(Z,ae),Z=Z.sibling}}return $}function Cu(T,k){if(!_t)throw Error(o(363));T=Tu(T),T=Af(T,k),k=[],T=Array.from(T);for(var $=0;$<T.length;){var Y=T[$++];if(Y.tag===5)Lt(Y)||k.push(Y.stateNode);else for(Y=Y.child;Y!==null;)T.push(Y),Y=Y.sibling}return k}var sv=Math.ceil,Zg=a.ReactCurrentDispatcher,Mh=a.ReactCurrentOwner,Ss=a.ReactCurrentBatchConfig,fr=0,$i=null,fs=null,Ns=0,Vs=0,Lh=qi(0),Yi=0,Fp=null,kf=0,Bi=0,Td=0,$p=null,ca=null,Bp=0,ey=1/0,$a=null;function Ti(){ey=Rs()+500}var ds=!1,Hs=null,rl=null,Fh=!1,Au=null,dr=0,so=0,ty=null,Rf=-1,jp=0;function ts(){return fr&6?Rs():Rf!==-1?Rf:Rf=Rs()}function bo(T){return T.mode&1?fr&2&&Ns!==0?Ns&-Ns:Ia.transition!==null?(jp===0&&(jp=yf()),jp):(T=cr,T!==0?T:lt()):1}function ji(T,k,$,Y){if(50<so)throw so=0,ty=null,Error(o(185));Mi(T,$,Y),(!(fr&2)||T!==$i)&&(T===$i&&(!(fr&2)&&(Bi|=$),Yi===4&&qs(T,Ns)),Ba(T,Y),$===1&&fr===0&&!(k.mode&1)&&(Ti(),hn&&dn()))}function Ba(T,k){var $=T.callbackNode;gd(T,k);var Y=Ao(T,T===$i?Ns:0);if(Y===0)$!==null&&bp($),T.callbackNode=null,T.callbackPriority=0;else if(k=Y&-Y,T.callbackPriority!==k){if($!=null&&bp($),k===1)T.tag===0?gi(If.bind(null,T)):Or(If.bind(null,T)),nt?yt(function(){!(fr&6)&&dn()}):ka(yd,dn),$=null;else{switch(Aa(Y)){case 1:$=yd;break;case 4:$=Tc;break;case 16:$=Ml;break;case 536870912:$=X0;break;default:$=Ml}$=av($,Up.bind(null,T))}T.callbackPriority=k,T.callbackNode=$}}function Up(T,k){if(Rf=-1,jp=0,fr&6)throw Error(o(327));var $=T.callbackNode;if($c()&&T.callbackNode!==$)return null;var Y=Ao(T,T===$i?Ns:0);if(Y===0)return null;if(Y&30||Y&T.expiredLanes||k)k=Cd(T,Y);else{k=Y;var Z=fr;fr|=2;var ae=sy();($i!==T||Ns!==k)&&($a=null,Ti(),Fc(T,k));do try{Pf();break}catch(He){zp(T,He)}while(!0);Pr(),Zg.current=ae,fr=Z,fs!==null?k=0:($i=null,Ns=0,k=Yi)}if(k!==0){if(k===2&&(Z=Yu(T),Z!==0&&(Y=Z,k=um(T,Z))),k===1)throw $=Fp,Fc(T,0),qs(T,Y),Ba(T,Rs()),$;if(k===6)qs(T,Y);else{if(Z=T.current.alternate,!(Y&30)&&!Ex(Z)&&(k=Cd(T,Y),k===2&&(ae=Yu(T),ae!==0&&(Y=ae,k=um(T,ae))),k===1))throw $=Fp,Fc(T,0),qs(T,Y),Ba(T,Rs()),$;switch(T.finishedWork=Z,T.finishedLanes=Y,k){case 0:case 1:throw Error(o(345));case 2:Ad(T,ca,$a);break;case 3:if(qs(T,Y),(Y&130023424)===Y&&(k=Bp+500-Rs(),10<k)){if(Ao(T,0)!==0)break;if(Z=T.suspendedLanes,(Z&Y)!==Y){ts(),T.pingedLanes|=T.suspendedLanes&Z;break}T.timeoutHandle=ce(Ad.bind(null,T,ca,$a),k);break}Ad(T,ca,$a);break;case 4:if(qs(T,Y),(Y&4194240)===Y)break;for(k=T.eventTimes,Z=-1;0<Y;){var xe=31-Zt(Y);ae=1<<xe,xe=k[xe],xe>Z&&(Z=xe),Y&=~ae}if(Y=Z,Y=Rs()-Y,Y=(120>Y?120:480>Y?480:1080>Y?1080:1920>Y?1920:3e3>Y?3e3:4320>Y?4320:1960*sv(Y/1960))-Y,10<Y){T.timeoutHandle=ce(Ad.bind(null,T,ca,$a),Y);break}Ad(T,ca,$a);break;case 5:Ad(T,ca,$a);break;default:throw Error(o(329))}}}return Ba(T,Rs()),T.callbackNode===$?Up.bind(null,T):null}function um(T,k){var $=$p;return T.current.memoizedState.isDehydrated&&(Fc(T,k).flags|=256),T=Cd(T,k),T!==2&&(k=ca,ca=$,k!==null&&ny(k)),T}function ny(T){ca===null?ca=T:ca.push.apply(ca,T)}function Ex(T){for(var k=T;;){if(k.flags&16384){var $=k.updateQueue;if($!==null&&($=$.stores,$!==null))for(var Y=0;Y<$.length;Y++){var Z=$[Y],ae=Z.getSnapshot;Z=Z.value;try{if(!Ne(ae(),Z))return!1}catch{return!1}}}if($=k.child,k.subtreeFlags&16384&&$!==null)$.return=k,k=$;else{if(k===T)break;for(;k.sibling===null;){if(k.return===null||k.return===T)return!0;k=k.return}k.sibling.return=k.return,k=k.sibling}}return!0}function qs(T,k){for(k&=~Td,k&=~Bi,T.suspendedLanes|=k,T.pingedLanes&=~k,T=T.expirationTimes;0<k;){var $=31-Zt(k),Y=1<<$;T[$]=-1,k&=~Y}}function If(T){if(fr&6)throw Error(o(327));$c();var k=Ao(T,0);if(!(k&1))return Ba(T,Rs()),null;var $=Cd(T,k);if(T.tag!==0&&$===2){var Y=Yu(T);Y!==0&&(k=Y,$=um(T,Y))}if($===1)throw $=Fp,Fc(T,0),qs(T,k),Ba(T,Rs()),$;if($===6)throw Error(o(345));return T.finishedWork=T.current.alternate,T.finishedLanes=k,Ad(T,ca,$a),Ba(T,Rs()),null}function ry(T){Au!==null&&Au.tag===0&&!(fr&6)&&$c();var k=fr;fr|=1;var $=Ss.transition,Y=cr;try{if(Ss.transition=null,cr=1,T)return T()}finally{cr=Y,Ss.transition=$,fr=k,!(fr&6)&&dn()}}function iy(){Vs=Lh.current,ti(Lh)}function Fc(T,k){T.finishedWork=null,T.finishedLanes=0;var $=T.timeoutHandle;if($!==Ee&&(T.timeoutHandle=Ee,pe($)),fs!==null)for($=fs.return;$!==null;){var Y=$;switch(Ac(Y),Y.tag){case 1:Y=Y.type.childContextTypes,Y!=null&&ht();break;case 3:xp(),ti(Se),ti(Ie),mt();break;case 5:yx(Y);break;case 4:xp();break;case 13:ti(ws);break;case 19:ti(ws);break;case 10:cs(Y.type._context);break;case 22:case 23:iy()}$=$.return}if($i=T,fs=T=Bc(T.current,null),Ns=Vs=k,Yi=0,Fp=null,Td=Bi=kf=0,ca=$p=null,Ll!==null){for(k=0;k<Ll.length;k++)if($=Ll[k],Y=$.interleaved,Y!==null){$.interleaved=null;var Z=Y.next,ae=$.pending;if(ae!==null){var xe=ae.next;ae.next=Z,Y.next=xe}$.pending=Y}Ll=null}return T}function zp(T,k){do{var $=fs;try{if(Pr(),et.current=Cp,_h){for(var Y=On.memoizedState;Y!==null;){var Z=Y.queue;Z!==null&&(Z.pending=null),Y=Y.next}_h=!1}if(Bn=0,er=Cr=On=null,Ug=!1,Pa=0,Mh.current=null,$===null||$.return===null){Yi=1,Fp=k,fs=null;break}e:{var ae=T,xe=$.return,He=$,at=k;if(k=Ns,He.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var Ft=at,yn=He,tr=yn.tag;if(!(yn.mode&1)&&(tr===0||tr===11||tr===15)){var an=yn.alternate;an?(yn.updateQueue=an.updateQueue,yn.memoizedState=an.memoizedState,yn.lanes=an.lanes):(yn.updateQueue=null,yn.memoizedState=null)}var Ui=Pp(xe);if(Ui!==null){Ui.flags&=-257,Nc(Ui,xe,He,ae,k),Ui.mode&1&&ye(ae,Ft,k),k=Ui,at=Ft;var Si=k.updateQueue;if(Si===null){var ou=new Set;ou.add(at),k.updateQueue=ou}else Si.add(at);break e}else{if(!(k&1)){ye(ae,Ft,k),Vp();break e}at=Error(o(426))}}else if(yi&&He.mode&1){var Fo=Pp(xe);if(Fo!==null){!(Fo.flags&65536)&&(Fo.flags|=256),Nc(Fo,xe,He,ae,k),vh(Ip(at,He));break e}}ae=at=Ip(at,He),Yi!==4&&(Yi=2),$p===null?$p=[ae]:$p.push(ae),ae=xe;do{switch(ae.tag){case 3:ae.flags|=65536,k&=-k,ae.lanes|=k;var it=wu(ae,at,k);Ju(ae,it);break e;case 1:He=at;var qe=ae.type,ct=ae.stateNode;if(!(ae.flags&128)&&(typeof qe.getDerivedStateFromError=="function"||ct!==null&&typeof ct.componentDidCatch=="function"&&(rl===null||!rl.has(ct)))){ae.flags|=65536,k&=-k,ae.lanes|=k;var rn=Kg(ae,He,k);Ju(ae,rn);break e}}ae=ae.return}while(ae!==null)}Nf($)}catch(kn){k=kn,fs===$&&$!==null&&(fs=$=$.return);continue}break}while(!0)}function sy(){var T=Zg.current;return Zg.current=Cp,T===null?Cp:T}function Vp(){(Yi===0||Yi===3||Yi===2)&&(Yi=4),$i===null||!(kf&268435455)&&!(Bi&268435455)||qs($i,Ns)}function Cd(T,k){var $=fr;fr|=2;var Y=sy();($i!==T||Ns!==k)&&($a=null,Fc(T,k));do try{ov();break}catch(Z){zp(T,Z)}while(!0);if(Pr(),fr=$,Zg.current=Y,fs!==null)throw Error(o(261));return $i=null,Ns=0,Yi}function ov(){for(;fs!==null;)Sx(fs)}function Pf(){for(;fs!==null&&!Ol();)Sx(fs)}function Sx(T){var k=Rx(T.alternate,T,Vs);T.memoizedProps=T.pendingProps,k===null?Nf(T):fs=k,Mh.current=null}function Nf(T){var k=T;do{var $=k.alternate;if(T=k.return,k.flags&32768){if($=p2($,k),$!==null){$.flags&=32767,fs=$;return}if(T!==null)T.flags|=32768,T.subtreeFlags=0,T.deletions=null;else{Yi=6,fs=null;return}}else if($=Op($,k,Vs),$!==null){fs=$;return}if(k=k.sibling,k!==null){fs=k;return}fs=k=T}while(k!==null);Yi===0&&(Yi=5)}function Ad(T,k,$){var Y=cr,Z=Ss.transition;try{Ss.transition=null,cr=1,Tx(T,k,$,Y)}finally{Ss.transition=Z,cr=Y}return null}function Tx(T,k,$,Y){do $c();while(Au!==null);if(fr&6)throw Error(o(327));$=T.finishedWork;var Z=T.finishedLanes;if($===null)return null;if(T.finishedWork=null,T.finishedLanes=0,$===T.current)throw Error(o(177));T.callbackNode=null,T.callbackPriority=0;var ae=$.lanes|$.childLanes;if(ko(T,ae),T===$i&&(fs=$i=null,Ns=0),!($.subtreeFlags&2064)&&!($.flags&2064)||Fh||(Fh=!0,av(Ml,function(){return $c(),null})),ae=($.flags&15990)!==0,$.subtreeFlags&15990||ae){ae=Ss.transition,Ss.transition=null;var xe=cr;cr=1;var He=fr;fr|=4,Mh.current=null,ev(T,$),sm($,T),X(T.containerInfo),T.current=$,Oh($),ks(),fr=He,cr=xe,Ss.transition=ae}else T.current=$;if(Fh&&(Fh=!1,Au=T,dr=Z),ae=T.pendingLanes,ae===0&&(rl=null),Cc($.stateNode),Ba(T,Rs()),k!==null)for(Y=T.onRecoverableError,$=0;$<k.length;$++)Z=k[$],Y(Z.value,{componentStack:Z.stack,digest:Z.digest});if(ds)throw ds=!1,T=Hs,Hs=null,T;return dr&1&&T.tag!==0&&$c(),ae=T.pendingLanes,ae&1?T===ty?so++:(so=0,ty=T):so=0,dn(),null}function $c(){if(Au!==null){var T=Aa(dr),k=Ss.transition,$=cr;try{if(Ss.transition=null,cr=16>T?16:T,Au===null)var Y=!1;else{if(T=Au,Au=null,dr=0,fr&6)throw Error(o(331));var Z=fr;for(fr|=4,nn=T.current;nn!==null;){var ae=nn,xe=ae.child;if(nn.flags&16){var He=ae.deletions;if(He!==null){for(var at=0;at<He.length;at++){var Ft=He[at];for(nn=Ft;nn!==null;){var yn=nn;switch(yn.tag){case 0:case 11:case 15:tl(8,yn,ae)}var tr=yn.child;if(tr!==null)tr.return=yn,nn=tr;else for(;nn!==null;){yn=nn;var an=yn.sibling,Ui=yn.return;if(im(yn),yn===Ft){nn=null;break}if(an!==null){an.return=Ui,nn=an;break}nn=Ui}}}var Si=ae.alternate;if(Si!==null){var ou=Si.child;if(ou!==null){Si.child=null;do{var Fo=ou.sibling;ou.sibling=null,ou=Fo}while(ou!==null)}}nn=ae}}if(ae.subtreeFlags&2064&&xe!==null)xe.return=ae,nn=xe;else e:for(;nn!==null;){if(ae=nn,ae.flags&2048)switch(ae.tag){case 0:case 11:case 15:tl(9,ae,ae.return)}var it=ae.sibling;if(it!==null){it.return=ae.return,nn=it;break e}nn=ae.return}}var qe=T.current;for(nn=qe;nn!==null;){xe=nn;var ct=xe.child;if(xe.subtreeFlags&2064&&ct!==null)ct.return=xe,nn=ct;else e:for(xe=qe;nn!==null;){if(He=nn,He.flags&2048)try{switch(He.tag){case 0:case 11:case 15:ua(9,He)}}catch(kn){ns(He,He.return,kn)}if(He===xe){nn=null;break e}var rn=He.sibling;if(rn!==null){rn.return=He.return,nn=rn;break e}nn=He.return}}if(fr=Z,dn(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(xr,T)}catch{}Y=!0}return Y}finally{cr=$,Ss.transition=k}}return!1}function Cx(T,k,$){k=Ip($,k),k=wu(T,k,1),T=Rc(T,k,1),k=ts(),T!==null&&(Mi(T,1,k),Ba(T,k))}function ns(T,k,$){if(T.tag===3)Cx(T,T,$);else for(;k!==null;){if(k.tag===3){Cx(k,T,$);break}else if(k.tag===1){var Y=k.stateNode;if(typeof k.type.getDerivedStateFromError=="function"||typeof Y.componentDidCatch=="function"&&(rl===null||!rl.has(Y))){T=Ip($,T),T=Kg(k,T,1),k=Rc(k,T,1),T=ts(),k!==null&&(Mi(k,1,T),Ba(k,T));break}}k=k.return}}function m2(T,k,$){var Y=T.pingCache;Y!==null&&Y.delete(k),k=ts(),T.pingedLanes|=T.suspendedLanes&$,$i===T&&(Ns&$)===$&&(Yi===4||Yi===3&&(Ns&130023424)===Ns&&500>Rs()-Bp?Fc(T,0):Td|=$),Ba(T,k)}function Ax(T,k){k===0&&(T.mode&1?(k=br,br<<=1,!(br&130023424)&&(br=4194304)):k=1);var $=ts();T=kc(T,k),T!==null&&(Mi(T,k,$),Ba(T,$))}function kx(T){var k=T.memoizedState,$=0;k!==null&&($=k.retryLane),Ax(T,$)}function _C(T,k){var $=0;switch(T.tag){case 13:var Y=T.stateNode,Z=T.memoizedState;Z!==null&&($=Z.retryLane);break;case 19:Y=T.stateNode;break;default:throw Error(o(314))}Y!==null&&Y.delete(k),Ax(T,$)}var Rx;Rx=function(T,k,$){if(T!==null)if(T.memoizedProps!==k.pendingProps||Se.current)Mn=!0;else{if(!(T.lanes&$)&&!(k.flags&128))return Mn=!1,Rh(T,k,$);Mn=!!(T.flags&131072)}else Mn=!1,yi&&k.flags&1048576&&$g(k,na,k.index);switch(k.lanes=0,k.tag){case 2:var Y=k.type;Xg(T,k),T=k.pendingProps;var Z=ze(k,Ie.current);yo(k,$),Z=wh(null,k,Y,T,Z,$);var ae=_p();return k.flags|=1,typeof Z=="object"&&Z!==null&&typeof Z.render=="function"&&Z.$$typeof===void 0?(k.tag=1,k.memoizedState=null,k.updateQueue=null,De(Y)?(ae=!0,Rt(k)):ae=!1,k.memoizedState=Z.state!==null&&Z.state!==void 0?Z.state:null,bh(k),Z.updater=Sd,k.stateNode=Z,Z._reactInternals=k,wf(k,Y,T,$),k=Oa(null,k,Y,!0,ae,$)):(k.tag=0,yi&&ae&&ro(k),Oo(null,k,Z,$),k=k.child),k;case 16:Y=k.elementType;e:{switch(Xg(T,k),T=k.pendingProps,Z=Y._init,Y=Z(Y._payload),k.type=Y,Z=k.tag=wC(Y),T=Do(Y,T),Z){case 0:k=Ef(null,k,Y,T,$);break e;case 1:k=oa(null,k,Y,T,$);break e;case 11:k=Q1(null,k,Y,T,$);break e;case 14:k=Np(null,k,Y,Do(Y.type,T),$);break e}throw Error(o(306,Y,""))}return k;case 0:return Y=k.type,Z=k.pendingProps,Z=k.elementType===Y?Z:Do(Y,Z),Ef(T,k,Y,Z,$);case 1:return Y=k.type,Z=k.pendingProps,Z=k.elementType===Y?Z:Do(Y,Z),oa(T,k,Y,Z,$);case 3:e:{if(Ma(k),T===null)throw Error(o(387));Y=k.pendingProps,ae=k.memoizedState,Z=ae.element,c2(T,k),Ic(k,Y,null,$);var xe=k.memoizedState;if(Y=xe.element,Oe&&ae.isDehydrated)if(ae={element:Y,isDehydrated:!1,cache:xe.cache,pendingSuspenseBoundaries:xe.pendingSuspenseBoundaries,transitions:xe.transitions},k.updateQueue.baseState=ae,k.memoizedState=ae,k.flags&256){Z=Ip(Error(o(423)),k),k=Dp(T,k,Y,$,Z);break e}else if(Y!==Z){Z=Ip(Error(o(424)),k),k=Dp(T,k,Y,$,Z);break e}else for(Oe&&(Ro=Hr(k.stateNode.containerInfo),oi=k,yi=!0,ia=null,Ra=!1),$=Xe(k,null,Y,$),k.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling;else{if(vf(),Y===Z){k=eu(T,k,$);break e}Oo(T,k,Y,$)}k=k.child}return k;case 5:return gx(k),T===null&&Xu(k),Y=k.type,Z=k.pendingProps,ae=T!==null?T.memoizedProps:null,xe=Z.children,oe(Y,Z)?xe=null:ae!==null&&oe(Y,ae)&&(k.flags|=32),Fi(T,k),Oo(T,k,xe,$),k.child;case 6:return T===null&&Xu(k),null;case 13:return wx(T,k,$);case 4:return q1(k,k.stateNode.containerInfo),Y=k.pendingProps,T===null?k.child=be(k,null,Y,$):Oo(T,k,Y,$),k.child;case 11:return Y=k.type,Z=k.pendingProps,Z=k.elementType===Y?Z:Do(Y,Z),Q1(T,k,Y,Z,$);case 7:return Oo(T,k,k.pendingProps,$),k.child;case 8:return Oo(T,k,k.pendingProps.children,$),k.child;case 12:return Oo(T,k,k.pendingProps.children,$),k.child;case 10:e:{if(Y=k.type._context,Z=k.pendingProps,ae=k.memoizedProps,xe=Z.value,ai(k,Y,xe),ae!==null)if(Ne(ae.value,xe)){if(ae.children===Z.children&&!Se.current){k=eu(T,k,$);break e}}else for(ae=k.child,ae!==null&&(ae.return=k);ae!==null;){var He=ae.dependencies;if(He!==null){xe=ae.child;for(var at=He.firstContext;at!==null;){if(at.context===Y){if(ae.tag===1){at=_d(-1,$&-$),at.tag=2;var Ft=ae.updateQueue;if(Ft!==null){Ft=Ft.shared;var yn=Ft.pending;yn===null?at.next=at:(at.next=yn.next,yn.next=at),Ft.pending=at}}ae.lanes|=$,at=ae.alternate,at!==null&&(at.lanes|=$),Io(ae.return,$,k),He.lanes|=$;break}at=at.next}}else if(ae.tag===10)xe=ae.type===k.type?null:ae.child;else if(ae.tag===18){if(xe=ae.return,xe===null)throw Error(o(341));xe.lanes|=$,He=xe.alternate,He!==null&&(He.lanes|=$),Io(xe,$,k),xe=ae.sibling}else xe=ae.child;if(xe!==null)xe.return=ae;else for(xe=ae;xe!==null;){if(xe===k){xe=null;break}if(ae=xe.sibling,ae!==null){ae.return=xe.return,xe=ae;break}xe=xe.return}ae=xe}Oo(T,k,Z.children,$),k=k.child}return k;case 9:return Z=k.type,Y=k.pendingProps.children,yo(k,$),Z=vo(Z),Y=Y(Z),k.flags|=1,Oo(T,k,Y,$),k.child;case 14:return Y=k.type,Z=Do(Y,k.pendingProps),Z=Do(Y.type,Z),Np(T,k,Y,Z,$);case 15:return Ja(T,k,k.type,k.pendingProps,$);case 17:return Y=k.type,Z=k.pendingProps,Z=k.elementType===Y?Z:Do(Y,Z),Xg(T,k),k.tag=1,De(Y)?(T=!0,Rt(k)):T=!1,yo(k,$),Rp(k,Y,Z),wf(k,Y,Z,$),Oa(null,k,Y,!0,T,$);case 19:return Z1(T,k,$);case 22:return Gi(T,k,$)}throw Error(o(156,k.tag))};function av(T,k){return ka(T,k)}function su(T,k,$,Y){this.tag=T,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=k,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(T,k,$,Y){return new su(T,k,$,Y)}function lm(T){return T=T.prototype,!(!T||!T.isReactComponent)}function wC(T){if(typeof T=="function")return lm(T)?1:0;if(T!=null){if(T=T.$$typeof,T===m)return 11;if(T===y)return 14}return 2}function Bc(T,k){var $=T.alternate;return $===null?($=Ds(T.tag,k,T.key,T.mode),$.elementType=T.elementType,$.type=T.type,$.stateNode=T.stateNode,$.alternate=T,T.alternate=$):($.pendingProps=k,$.type=T.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=T.flags&14680064,$.childLanes=T.childLanes,$.lanes=T.lanes,$.child=T.child,$.memoizedProps=T.memoizedProps,$.memoizedState=T.memoizedState,$.updateQueue=T.updateQueue,k=T.dependencies,$.dependencies=k===null?null:{lanes:k.lanes,firstContext:k.firstContext},$.sibling=T.sibling,$.index=T.index,$.ref=T.ref,$}function kd(T,k,$,Y,Z,ae){var xe=2;if(Y=T,typeof T=="function")lm(T)&&(xe=1);else if(typeof T=="string")xe=5;else e:switch(T){case c:return Lo($.children,Z,ae,k);case f:xe=8,Z|=8;break;case d:return T=Ds(12,$,k,Z|2),T.elementType=d,T.lanes=ae,T;case g:return T=Ds(13,$,k,Z),T.elementType=g,T.lanes=ae,T;case b:return T=Ds(19,$,k,Z),T.elementType=b,T.lanes=ae,T;case w:return Hp($,Z,ae,k);default:if(typeof T=="object"&&T!==null)switch(T.$$typeof){case h:xe=10;break e;case p:xe=9;break e;case m:xe=11;break e;case y:xe=14;break e;case x:xe=16,Y=null;break e}throw Error(o(130,T==null?T:typeof T,""))}return k=Ds(xe,$,k,Z),k.elementType=T,k.type=Y,k.lanes=ae,k}function Lo(T,k,$,Y){return T=Ds(7,T,Y,k),T.lanes=$,T}function Hp(T,k,$,Y){return T=Ds(22,T,Y,k),T.elementType=w,T.lanes=$,T.stateNode={isHidden:!1},T}function cm(T,k,$){return T=Ds(6,T,null,k),T.lanes=$,T}function oy(T,k,$){return k=Ds(4,T.children!==null?T.children:[],T.key,k),k.lanes=$,k.stateNode={containerInfo:T.containerInfo,pendingChildren:null,implementation:T.implementation},k}function qp(T,k,$,Y,Z){this.tag=k,this.containerInfo=T,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ee,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=to(0),this.expirationTimes=to(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=to(0),this.identifierPrefix=Y,this.onRecoverableError=Z,Oe&&(this.mutableSourceEagerHydrationData=null)}function Wp(T,k,$,Y,Z,ae,xe,He,at){return T=new qp(T,k,$,He,at),k===1?(k=1,ae===!0&&(k|=8)):k=0,ae=Ds(3,null,null,k),T.current=ae,ae.stateNode=T,ae.memoizedState={element:Y,isDehydrated:$,cache:null,transitions:null,pendingSuspenseBoundaries:null},bh(ae),T}function uv(T){if(!T)return ve;T=T._reactInternals;e:{if(O(T)!==T||T.tag!==1)throw Error(o(170));var k=T;do{switch(k.tag){case 3:k=k.stateNode.context;break e;case 1:if(De(k.type)){k=k.stateNode.__reactInternalMemoizedMergedChildContext;break e}}k=k.return}while(k!==null);throw Error(o(171))}if(T.tag===1){var $=T.type;if(De($))return Nt(T,$,k)}return k}function $h(T){var k=T._reactInternals;if(k===void 0)throw typeof T.render=="function"?Error(o(188)):(T=Object.keys(T).join(","),Error(o(268,T)));return T=V(k),T===null?null:T.stateNode}function ay(T,k){if(T=T.memoizedState,T!==null&&T.dehydrated!==null){var $=T.retryLane;T.retryLane=$!==0&&$<k?$:k}}function Rd(T,k){ay(T,k),(T=T.alternate)&&ay(T,k)}function g2(T){return T=V(T),T===null?null:T.stateNode}function uy(){return null}return n.attemptContinuousHydration=function(T){if(T.tag===13){var k=kc(T,134217728);if(k!==null){var $=ts();ji(k,T,134217728,$)}Rd(T,134217728)}},n.attemptDiscreteHydration=function(T){if(T.tag===13){var k=kc(T,1);if(k!==null){var $=ts();ji(k,T,1,$)}Rd(T,1)}},n.attemptHydrationAtCurrentPriority=function(T){if(T.tag===13){var k=bo(T),$=kc(T,k);if($!==null){var Y=ts();ji($,T,k,Y)}Rd(T,k)}},n.attemptSynchronousHydration=function(T){switch(T.tag){case 3:var k=T.stateNode;if(k.current.memoizedState.isDehydrated){var $=ls(k.pendingLanes);$!==0&&(ta(k,$|1),Ba(k,Rs()),!(fr&6)&&(Ti(),dn()))}break;case 13:ry(function(){var Y=kc(T,1);if(Y!==null){var Z=ts();ji(Y,T,1,Z)}}),Rd(T,1)}},n.batchedUpdates=function(T,k){var $=fr;fr|=1;try{return T(k)}finally{fr=$,fr===0&&(Ti(),hn&&dn())}},n.createComponentSelector=function(T){return{$$typeof:Lc,value:T}},n.createContainer=function(T,k,$,Y,Z,ae,xe){return Wp(T,k,!1,null,$,Y,Z,ae,xe)},n.createHasPseudoClassSelector=function(T){return{$$typeof:iu,value:T}},n.createHydrationContainer=function(T,k,$,Y,Z,ae,xe,He,at){return T=Wp($,Y,!0,T,Z,ae,xe,He,at),T.context=uv(null),$=T.current,Y=ts(),Z=bo($),ae=_d(Y,Z),ae.callback=k??null,Rc($,ae,Z),T.current.lanes=Z,Mi(T,Z,Y),Ba(T,Y),T},n.createPortal=function(T,k,$){var Y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:Y==null?null:""+Y,children:T,containerInfo:k,implementation:$}},n.createRoleSelector=function(T){return{$$typeof:Cf,value:T}},n.createTestNameSelector=function(T){return{$$typeof:om,value:T}},n.createTextSelector=function(T){return{$$typeof:Lp,value:T}},n.deferredUpdates=function(T){var k=cr,$=Ss.transition;try{return Ss.transition=null,cr=16,T()}finally{cr=k,Ss.transition=$}},n.discreteUpdates=function(T,k,$,Y,Z){var ae=cr,xe=Ss.transition;try{return Ss.transition=null,cr=1,T(k,$,Y,Z)}finally{cr=ae,Ss.transition=xe,fr===0&&Ti()}},n.findAllNodes=Cu,n.findBoundingRects=function(T,k){if(!_t)throw Error(o(363));k=Cu(T,k),T=[];for(var $=0;$<k.length;$++)T.push(Et(k[$]));for(k=T.length-1;0<k;k--){$=T[k];for(var Y=$.x,Z=Y+$.width,ae=$.y,xe=ae+$.height,He=k-1;0<=He;He--)if(k!==He){var at=T[He],Ft=at.x,yn=Ft+at.width,tr=at.y,an=tr+at.height;if(Y>=Ft&&ae>=tr&&Z<=yn&&xe<=an){T.splice(k,1);break}else if(Y!==Ft||$.width!==at.width||an<ae||tr>xe){if(!(ae!==tr||$.height!==at.height||yn<Y||Ft>Z)){Ft>Y&&(at.width+=Ft-Y,at.x=Y),yn<Z&&(at.width=Z-Ft),T.splice(k,1);break}}else{tr>ae&&(at.height+=tr-ae,at.y=ae),an<xe&&(at.height=xe-tr),T.splice(k,1);break}}}return T},n.findHostInstance=$h,n.findHostInstanceWithNoPortals=function(T){return T=L(T),T=T!==null?j(T):null,T===null?null:T.stateNode},n.findHostInstanceWithWarning=function(T){return $h(T)},n.flushControlled=function(T){var k=fr;fr|=1;var $=Ss.transition,Y=cr;try{Ss.transition=null,cr=1,T()}finally{cr=Y,Ss.transition=$,fr=k,fr===0&&(Ti(),dn())}},n.flushPassiveEffects=$c,n.flushSync=ry,n.focusWithin=function(T,k){if(!_t)throw Error(o(363));for(T=Tu(T),k=Af(T,k),k=Array.from(k),T=0;T<k.length;){var $=k[T++];if(!Lt($)){if($.tag===5&&Fe($.stateNode))return!0;for($=$.child;$!==null;)k.push($),$=$.sibling}}return!1},n.getCurrentUpdatePriority=function(){return cr},n.getFindAllNodesFailureDescription=function(T,k){if(!_t)throw Error(o(363));var $=0,Y=[];T=[Tu(T),0];for(var Z=0;Z<T.length;){var ae=T[Z++],xe=T[Z++],He=k[xe];if((ae.tag!==5||!Lt(ae))&&(am(ae,He)&&(Y.push(iv(He)),xe++,xe>$&&($=xe)),xe<k.length))for(ae=ae.child;ae!==null;)T.push(ae,xe),ae=ae.sibling}if($<k.length){for(T=[];$<k.length;$++)T.push(iv(k[$]));return`findAllNodes was able to match part of the selector:
  `+(Y.join(" > ")+`

No matching component was found for:
  `)+T.join(" > ")}return null},n.getPublicRootInstance=function(T){if(T=T.current,!T.child)return null;switch(T.child.tag){case 5:return G(T.child.stateNode);default:return T.child.stateNode}},n.injectIntoDevTools=function(T){if(T={bundleType:T.bundleType,version:T.version,rendererPackageName:T.rendererPackageName,rendererConfig:T.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:g2,findFiberByHostInstance:T.findFiberByHostInstance||uy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")T=!1;else{var k=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(k.isDisabled||!k.supportsFiber)T=!0;else{try{xr=k.inject(T),Gn=k}catch{}T=!!k.checkDCE}}return T},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(T,k,$,Y){if(!_t)throw Error(o(363));T=Cu(T,k);var Z=Qe(T,$,Y).disconnect;return{disconnect:function(){Z()}}},n.registerMutableSourceForHydration=function(T,k){var $=k._getVersion;$=$(k._source),T.mutableSourceEagerHydrationData==null?T.mutableSourceEagerHydrationData=[k,$]:T.mutableSourceEagerHydrationData.push(k,$)},n.runWithPriority=function(T,k){var $=cr;try{return cr=T,k()}finally{cr=$}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(T,k,$,Y){var Z=k.current,ae=ts(),xe=bo(Z);return $=uv($),k.context===null?k.context=$:k.pendingContext=$,k=_d(ae,xe),k.payload={element:T},Y=Y===void 0?null:Y,Y!==null&&(k.callback=Y),T=Rc(Z,k,xe),T!==null&&(ji(T,Z,xe,ae),Q0(T,Z,xe)),xe},n}),TB}var yce;function Ubt(){return yce||(yce=1,SB.exports=jbt()),SB.exports}var zbt=Ubt();const Vbt=gc(zbt);var CB={exports:{}},yv={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vce;function Hbt(){return vce||(vce=1,yv.ConcurrentRoot=1,yv.ContinuousEventPriority=4,yv.DefaultEventPriority=16,yv.DiscreteEventPriority=1,yv.IdleEventPriority=536870912,yv.LegacyRoot=0),yv}var bce;function qbt(){return bce||(bce=1,CB.exports=Hbt()),CB.exports}var QSe=qbt(),Wbt=Vr();const xce={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let _ce=!1,wce=!1;const oX=".react-konva-event",Gbt=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Ybt=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Kbt={};function OM(e,t,n=Kbt){if(!_ce&&"zIndex"in t&&(console.warn(Ybt),_ce=!0),!wce&&t.draggable){var r=t.x!==void 0||t.y!==void 0,i=t.onDragEnd||t.onDragMove;r&&!i&&(console.warn(Gbt),wce=!0)}for(var s in n)if(!xce[s]){var o=s.slice(0,2)==="on",a=n[s]!==t[s];if(o&&a){var u=s.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),e.off(u,n[s])}var l=!t.hasOwnProperty(s);l&&e.setAttr(s,void 0)}var c=t._useStrictMode,f={},d=!1;const h={};for(var s in t)if(!xce[s]){var o=s.slice(0,2)==="on",p=n[s]!==t[s];if(o&&p){var u=s.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),t[s]&&(h[u]=t[s])}!o&&(t[s]!==n[s]||c&&t[s]!==e.getAttr(s))&&(d=!0,f[s]=t[s])}d&&(e.setAttrs(f),nx(e));for(var u in h)e.on(u+oX,h[u])}function nx(e){if(!Wbt.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var AB=uq();const JSe={},Xbt={};D4.Node.prototype._applyProps=OM;function Qbt(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),nx(e)}function Jbt(e,t,n){let r=D4[e];r||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=D4.Group);const i={},s={};for(var o in t){var a=o.slice(0,2)==="on";a?s[o]=t[o]:i[o]=t[o]}const u=new r(i);return OM(u,s),u}function Zbt(e,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function ext(e,t,n){return!1}function txt(e){return e}function nxt(){return null}function rxt(){return null}function ixt(e,t,n,r){return Xbt}function sxt(){}function oxt(e){}function axt(e,t){return!1}function uxt(){return JSe}function lxt(){return JSe}const cxt=setTimeout,fxt=clearTimeout,dxt=-1;function hxt(e,t){return!1}const pxt=!1,mxt=!0,gxt=!0;function yxt(e,t){t.parent===e?t.moveToTop():e.add(t),nx(e)}function vxt(e,t){t.parent===e?t.moveToTop():e.add(t),nx(e)}function ZSe(e,t,n){t._remove(),e.add(t),t.setZIndex(n.getZIndex()),nx(e)}function bxt(e,t,n){ZSe(e,t,n)}function xxt(e,t){t.destroy(),t.off(oX),nx(e)}function _xt(e,t){t.destroy(),t.off(oX),nx(e)}function wxt(e,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function Ext(e,t,n){}function Sxt(e,t,n,r,i){OM(e,i,r)}function Txt(e){e.hide(),nx(e)}function Cxt(e){}function Axt(e,t){(t.visible==null||t.visible)&&e.show()}function kxt(e,t){}function Rxt(e){}function Ixt(){}const Pxt=()=>QSe.DefaultEventPriority,Nxt=Object.freeze(Object.defineProperty({__proto__:null,appendChild:yxt,appendChildToContainer:vxt,appendInitialChild:Qbt,cancelTimeout:fxt,clearContainer:Rxt,commitMount:Ext,commitTextUpdate:wxt,commitUpdate:Sxt,createInstance:Jbt,createTextInstance:Zbt,detachDeletedInstance:Ixt,finalizeInitialChildren:ext,getChildHostContext:lxt,getCurrentEventPriority:Pxt,getPublicInstance:txt,getRootHostContext:uxt,hideInstance:Txt,hideTextInstance:Cxt,idlePriority:AB.unstable_IdlePriority,insertBefore:ZSe,insertInContainerBefore:bxt,isPrimaryRenderer:pxt,noTimeout:dxt,now:AB.unstable_now,prepareForCommit:nxt,preparePortalMount:rxt,prepareUpdate:ixt,removeChild:xxt,removeChildFromContainer:_xt,resetAfterCommit:sxt,resetTextContent:oxt,run:AB.unstable_runWithPriority,scheduleTimeout:cxt,shouldDeprioritizeSubtree:axt,shouldSetTextContent:hxt,supportsMutation:gxt,unhideInstance:Axt,unhideTextInstance:kxt,warnsIfNotActing:mxt},Symbol.toStringTag,{value:"Module"}));var Dxt=Object.defineProperty,Oxt=Object.defineProperties,Mxt=Object.getOwnPropertyDescriptors,Ece=Object.getOwnPropertySymbols,Lxt=Object.prototype.hasOwnProperty,Fxt=Object.prototype.propertyIsEnumerable,Sce=(e,t,n)=>t in e?Dxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tce=(e,t)=>{for(var n in t||(t={}))Lxt.call(t,n)&&Sce(e,n,t[n]);if(Ece)for(var n of Ece(t))Fxt.call(t,n)&&Sce(e,n,t[n]);return e},$xt=(e,t)=>Oxt(e,Mxt(t)),Cce,Ace;typeof window<"u"&&((Cce=window.document)!=null&&Cce.createElement||((Ace=window.navigator)==null?void 0:Ace.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function eTe(e,t,n){if(!e)return;if(n(e)===!0)return e;let r=e.child;for(;r;){const i=eTe(r,t,n);if(i)return i;r=r.sibling}}function tTe(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const kce=console.error;console.error=function(){const e=[...arguments].join("");if(e!=null&&e.startsWith("Warning:")&&e.includes("useContext")){console.error=kce;return}return kce.apply(this,arguments)};const aX=tTe(B.createContext(null));class nTe extends B.Component{render(){return B.createElement(aX.Provider,{value:this._reactInternals},this.props.children)}}function Bxt(){const e=B.useContext(aX);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=B.useId();return B.useMemo(()=>{for(const r of[e,e==null?void 0:e.alternate]){if(!r)continue;const i=eTe(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(i)return i}},[e,t])}function jxt(){const e=Bxt(),[t]=B.useState(()=>new Map);t.clear();let n=e;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==aX&&!t.has(i)&&t.set(i,B.useContext(tTe(i)))}n=n.return}return t}function Uxt(){const e=jxt();return B.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>B.createElement(t,null,B.createElement(n.Provider,$xt(Tce({},r),{value:e.get(n)}))),t=>B.createElement(nTe,Tce({},t))),[e])}function zxt(e){const t=sr.useRef({});return sr.useLayoutEffect(()=>{t.current=e}),sr.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const Vxt=e=>{const t=sr.useRef(),n=sr.useRef(),r=sr.useRef(),i=zxt(e),s=Uxt(),o=a=>{const{forwardedRef:u}=e;u&&(typeof u=="function"?u(a):u.current=a)};return sr.useLayoutEffect(()=>(n.current=new D4.Stage({width:e.width,height:e.height,container:t.current}),o(n.current),r.current=Y3.createContainer(n.current,QSe.LegacyRoot,!1,null),Y3.updateContainer(sr.createElement(s,{},e.children),r.current),()=>{D4.isBrowser&&(o(null),Y3.updateContainer(null,r.current,null),n.current.destroy())}),[]),sr.useLayoutEffect(()=>{o(n.current),OM(n.current,e,i),Y3.updateContainer(sr.createElement(s,{},e.children),r.current,null)}),sr.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},rTe="Layer",iTe="Circle",rS="Line",sTe="Image",Y3=Vbt(Nxt);Y3.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:sr.version,rendererPackageName:"react-konva"});const oTe=sr.forwardRef((e,t)=>sr.createElement(nTe,{},sr.createElement(Vxt,{...e,forwardedRef:t})));var t5={},n5={},kB,Rce;function Hxt(){if(Rce)return kB;Rce=1,kB=function(i,s,o){var a=document.head||document.getElementsByTagName("head")[0],u=document.createElement("script");typeof s=="function"&&(o=s,s={}),s=s||{},o=o||function(){},u.type=s.type||"text/javascript",u.charset=s.charset||"utf8",u.async="async"in s?!!s.async:!0,u.src=i,s.attrs&&e(u,s.attrs),s.text&&(u.text=""+s.text);var l="onload"in u?t:n;l(u,o),u.onload||t(u,o),a.appendChild(u)};function e(r,i){for(var s in i)r.setAttribute(s,i[s])}function t(r,i){r.onload=function(){this.onerror=this.onload=null,i(null,r)},r.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+this.src),r)}}function n(r,i){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,i(null,r))}}return kB}var r5={},Ice;function aTe(){if(Ice)return r5;Ice=1,Object.defineProperty(r5,"__esModule",{value:!0});var e=A1(),t=n(e);function n(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(s[o]=i[o]);return s.default=i,s}var r=t.createContext({MathJax:null,registerNode:function(){}});return r5.default=r,r5}var Pce;function qxt(){if(Pce)return n5;Pce=1,Object.defineProperty(n5,"__esModule",{value:!0});var e=function(){function h(p,m){for(var g=0;g<m.length;g++){var b=m[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}return function(p,m,g){return m&&h(p.prototype,m),g&&h(p,g),p}}(),t=A1(),n=u(t),r=Hxt(),i=a(r),s=aTe(),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function u(h){if(h&&h.__esModule)return h;var p={};if(h!=null)for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(p[m]=h[m]);return p.default=h,p}function l(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function c(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function f(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var d=function(h){f(p,h);function p(m){l(this,p);var g=c(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,m));return g.hasNodes=!1,g.loaded=!1,g.registerNode=function(){g.hasNodes=!0},g.load=function(){var b=g.props.script;if(!(g.loaded||!g.hasNodes)){if(g.loaded=!0,!b){g.onLoad(null);return}(0,i.default)(b,g.onLoad)}},g.onLoad=function(b){var y=g.props.options;MathJax.Hub.Config(y),g.setState({MathJax})},g.state={MathJax:null,registerNode:g.registerNode},g}return e(p,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentDidUpdate",value:function(){this.load()}},{key:"render",value:function(){var g=this.props.children;return n.createElement(o.default.Provider,{value:this.state},g)}}]),p}(n.Component);return d.defaultProps={script:"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML",options:{tex2jax:{inlineMath:[]},showMathMenu:!1,showMathMenuMSIE:!1}},n5.default=d,n5}var i5={},s5={},Nce;function Wxt(){if(Nce)return s5;Nce=1,Object.defineProperty(s5,"__esModule",{value:!0});var e=[],t=[],n=!1;function r(s,o,a){e.push(o),t.push(a),n||(n=!0,setTimeout(function(){return i(s)},0))}function i(s){s.Hub.Queue(function(){var o=s.Hub.elementScripts;s.Hub.elementScripts=function(a){return e};try{return s.Hub.Process(null,function(){t.forEach(function(a){a()}),e=[],t=[],n=!1})}catch(a){throw a}finally{s.Hub.elementScripts=o}})}return s5.default=r,s5}var Dce;function Gxt(){if(Dce)return i5;Dce=1,Object.defineProperty(i5,"__esModule",{value:!0});var e=Object.assign||function(g){for(var b=1;b<arguments.length;b++){var y=arguments[b];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(g[x]=y[x])}return g},t=function(){function g(b,y){for(var x=0;x<y.length;x++){var w=y[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,y,x){return y&&g(b.prototype,y),x&&g(b,x),b}}(),n=A1(),r=l(n),i=aTe(),s=u(i),o=Wxt(),a=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function l(g){if(g&&g.__esModule)return g;var b={};if(g!=null)for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(b[y]=g[y]);return b.default=g,b}function c(g,b){var y={};for(var x in g)b.indexOf(x)>=0||Object.prototype.hasOwnProperty.call(g,x)&&(y[x]=g[x]);return y}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function h(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var p=function(g){h(b,g);function b(){var y,x,w,S;f(this,b);for(var C=arguments.length,R=Array(C),I=0;I<C;I++)R[I]=arguments[I];return S=(x=(w=d(this,(y=b.__proto__||Object.getPrototypeOf(b)).call.apply(y,[this].concat(R))),w),w.container=r.createRef(),x),d(w,S)}return t(b,[{key:"componentDidMount",value:function(){this.typeset()}},{key:"componentDidUpdate",value:function(x){var w=x.inline!=this.props.inline;this.typeset(w)}},{key:"componentWillUnmount",value:function(){this.clear()}},{key:"clear",value:function(){var x=this.props.MathJax;if(!(!this.script||!x)){var w=x.Hub.getJaxFor(this.script);w&&w.Remove()}}},{key:"typeset",value:function(x){var w=this,S=this.props,C=S.MathJax,R=S.formula,I=S.onRender;if(C)if(x&&this.clear(),!x&&this.script)C.Hub.Queue(function(){var M=C.Hub.getJaxFor(w.script);if(M)M.Text(R,I);else{var L=w.setScriptText(R);(0,a.default)(C,L,I)}});else{var O=this.setScriptText(R);(0,a.default)(C,O,I)}}},{key:"setScriptText",value:function(x){var w=this.props.inline;return this.script||(this.script=document.createElement("script"),this.script.type="math/tex; "+(w?"":"mode=display"),this.container.current.appendChild(this.script)),"text"in this.script?this.script.text=x:this.script.textContent=x,this.script}},{key:"render",value:function(){var x=this.props;x.MathJax,x.formula,x.inline,x.onRender;var w=c(x,["MathJax","formula","inline","onRender"]);return this.props.inline?r.createElement("span",e({ref:this.container},w)):r.createElement("div",e({ref:this.container},w))}}]),b}(r.Component);p.defaultProps={inline:!1,onRender:function(){}};var m=function(g){h(b,g);function b(){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return t(b,[{key:"render",value:function(){var x=this;return r.createElement(s.default.Consumer,null,function(w){var S=w.MathJax,C=w.registerNode;return C(),S?r.createElement(p,e({},x.props,{MathJax:S})):null})}}]),b}(r.PureComponent);return i5.default=m,i5}var Oce;function Yxt(){if(Oce)return t5;Oce=1,Object.defineProperty(t5,"__esModule",{value:!0});var e=qxt(),t=i(e),n=Gxt(),r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}var s={Provider:t.default,Node:r.default};return t5.default=s,t5}Yxt();function Kxt({parameters:e,setAnswer:t}){const{image:n,question:r,example:i}=e,[s,o]=B.useState("stroke"),[a,u]=B.useState({width:0,height:0}),l=B.useRef(null),[c,f]=B.useState([]),[d,h]=B.useState([]),[p,m]=B.useState(!1),g=B.useRef(null),[b]=HSe(n),y=B.useCallback(L=>{const V=L.map(D=>({...D,points:D.points.map(j=>parseInt(j/a.multiplier))}));t({status:!0,answers:{annotations:JSON.stringify({annotations:V,multiplier:a.multiplier,question:r})}})},[t,c,a]),x=L=>{L!==s&&(h([]),m(!1)),o(L)},w=()=>{const L=c.slice(0,-1);f(L),y(L),h([]),m(!1)},S=()=>{f([]),h([]),m(!1),y([])},C=L=>{if(s==="polygon")return;m(!0);const D=g.current.getPointerPosition(),j=parseInt(D.x),z=parseInt(D.y);h([j,z])},R=L=>{if(s==="polygon"||!p)return;const D=g.current.getPointerPosition(),j=parseInt(D.x),z=parseInt(D.y);h(G=>[...G,j,z])},I=L=>{if(s==="polygon")return;m(!1);const V=[...c,{tool:"stroke",points:d}];f(V),y(V),h([])},O=L=>{if(s!=="polygon")return;const D=g.current.getPointerPosition(),j=parseInt(D.x),z=parseInt(D.y);h(G=>[...G,j,z])},M=L=>{if(s!=="polygon")return;const V=[...c,{tool:"polygon",points:d}];f(V),y(V),h([])};return B.useEffect(()=>{const L=new Image;L.src=n,L.onload=()=>{const V=l.current,D=window.innerHeight-V.getBoundingClientRect().top,j=window.innerWidth-V.getBoundingClientRect().left,z=L.width/L.height;let G,ee;D*z<=j?(ee=D,G=D*z):(G=j,ee=j/z);const ne=G/L.width;u({width:G,height:ee,multiplier:ne})}},[n]),A.jsxs("div",{children:[i&&A.jsx("h1",{children:"Example Question"}),i?A.jsx("div",{children:A.jsx("h3",{children:r})}):A.jsxs("div",{children:[A.jsxs("h3",{children:["Please identify and annotate the regions that are ",A.jsx("span",{style:{color:"red"},children:"important"})," for answering the question below. Then provide your answer for the question."]}),A.jsxs("h3",{children:["Q: ",r]})]}),A.jsxs(je,{ref:l,className:"ImageWrapper",style:{width:"100%",display:"flex"},children:[A.jsx(je,{style:{width:"250px",backgroundColor:"#f4f4f4",padding:"20px",borderRight:"1px solid #ddd",boxSizing:"border-box",flexShrink:0},children:A.jsx(VSe,{tool:s,setTool:x,undo:w,clearAll:S})}),A.jsx(oTe,{ref:g,width:a.width,height:a.height,onMouseDown:C,onMouseMove:R,onMouseUp:I,onClick:O,onDblClick:M,style:{border:"1px solid black"},children:A.jsxs(rTe,{children:[b&&A.jsx(sTe,{image:b,width:a.width,height:a.height}),c.map((L,V)=>{const{tool:D,points:j}=L,z=D==="polygon";return A.jsx(rS,{points:j,stroke:z?"blue":"red",strokeWidth:2,closed:!0,fill:z?"rgba(0, 0, 255, 0.3)":"rgba(255, 0, 0, 0.3)"},V)}),d.length>0&&s==="polygon"&&A.jsx(rS,{points:d,stroke:"blue",strokeWidth:2,closed:d.length>3,fill:d.length>3?"rgba(0, 150, 255, 0.3)":null}),d.length>0&&s==="stroke"&&A.jsx(rS,{points:d,stroke:"red",strokeWidth:2,closed:!0,fill:"rgba(255, 150, 0, 0.3)"}),s==="polygon"&&d.length>0&&A.jsx(iTe,{x:d[d.length-2],y:d[d.length-1],radius:5,fill:"red"})]})})]})]})}const Xxt=Object.freeze(Object.defineProperty({__proto__:null,default:Kxt},Symbol.toStringTag,{value:"Module"}));function Qxt({parameters:e,setAnswer:t}){const n=B.useRef(null),{image:r,question:i,radius:s}=e,[o,a]=B.useState(null),[u,l]=B.useState([]),[c,f]=B.useState({width:0,height:0}),d=B.useRef(null),{actions:h,trrack:p}=B.useMemo(()=>{const g=O1.create(),b=g.register("click",(x,w)=>(x.clickRecord=w,x)),y=Yw({registry:g,initialState:{clickRecord:{timestamp:new Date().getTime()}}});return{actions:{clickAction:b},trrack:y}},[]),m=B.useCallback(g=>{const b=Wo(n.current),y=Q_(g,b.node()),x={x:parseInt(y[0]),y:parseInt(y[1])};a(x);const w={x:x.x,y:x.y,radius:s,multiplier:c.multiplier};p.apply("click",h.clickAction(w));const S=[...u,w];l(S),t({status:!0,provenanceGraph:p.graph.backend,answers:{answer:JSON.stringify(S)}})},[h,p,o,t,c,i,u]);return B.useEffect(()=>{const g=new Image;g.src=r,g.onload=()=>{const b=d.current,y=window.innerHeight-b.getBoundingClientRect().top,x=window.innerWidth-b.getBoundingClientRect().left,w=g.width/g.height;let S,C;y*w<=x?(C=y,S=y*w):(S=x,C=x/w),f({width:S,height:C,multiplier:S/g.width})}},[r]),A.jsxs("div",{children:[A.jsx("h3",{children:"Click on the image to reveal"}),A.jsx(je,{ref:d,className:"ImageWrapper",style:{width:"100%",display:"block"},children:A.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:c.width,height:c.height,onClick:m,style:{border:"1px solid black"},children:[A.jsxs("defs",{children:[A.jsxs("filter",{id:"imageBlurFilter",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[A.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),A.jsx("feComponentTransfer",{children:A.jsx("feFuncA",{type:"linear",slope:"2.5"})})]}),A.jsxs("mask",{id:"unblurMask",children:[A.jsx("rect",{width:"100%",height:"100%",fill:"white"}),o&&A.jsx("circle",{cx:o.x,cy:o.y,r:s,fill:"black"},0)]})]}),A.jsx("image",{href:r,width:c.width,height:c.height}),A.jsx("image",{href:r,width:c.width,height:c.height,filter:"url(#imageBlurFilter)",mask:"url(#unblurMask)"}),o&&A.jsx("circle",{cx:o.x,cy:o.y,r:s,fill:"transparent",stroke:"red"},0)]})})]})}const Jxt=Object.freeze(Object.defineProperty({__proto__:null,default:Qxt},Symbol.toStringTag,{value:"Module"}));function Zxt({parameters:e,setAnswer:t}){const n=B.useRef(null),{image:r,question:i,radius:s}=e,[o,a]=B.useState(null),[u,l]=B.useState({width:0,height:0}),c=B.useRef(null),{actions:f,trrack:d}=B.useMemo(()=>{const p=O1.create(),m=p.register("click",(b,y)=>(b.clickRecord=y,b)),g=Yw({registry:p,initialState:{clickRecord:{timestamp:new Date().getTime()}}});return{actions:{clickAction:m},trrack:g}},[]),h=B.useCallback(p=>{const m=Wo(n.current),g=Q_(p,m.node()),b={x:g[0],y:g[1]};a(b);const y={x:b.x,y:b.y,radius:s,multiplier:u.multiplier};d.apply("click",f.clickAction(y)),t({status:!0,provenanceGraph:d.graph.backend,answers:{}})},[f,d,o,t,u,i]);return B.useEffect(()=>{const p=new Image;p.src=r,p.onload=()=>{const m=c.current,g=window.innerHeight-m.getBoundingClientRect().top,b=window.innerWidth-m.getBoundingClientRect().left,y=p.width/p.height;let x,w;g*y<=b?(w=g,x=g*y):(x=b,w=b/y),l({width:x,height:w,multiplier:x/p.width})}},[r]),A.jsxs("div",{children:[A.jsx("h3",{children:"Click on the image to reveal"}),A.jsx(je,{ref:c,className:"ImageWrapper",style:{width:"100%",display:"block"},children:A.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,onClick:h,style:{border:"1px solid black"},children:[A.jsxs("defs",{children:[A.jsxs("filter",{id:"imageBlurFilter",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[A.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),A.jsx("feComponentTransfer",{children:A.jsx("feFuncA",{type:"linear",slope:"2.5"})})]}),A.jsxs("mask",{id:"unblurMask",children:[A.jsx("rect",{width:"100%",height:"100%",fill:"white"}),o&&A.jsx("circle",{cx:o.x,cy:o.y,r:s,fill:"black"},0)]})]}),A.jsx("image",{href:r,width:u.width,height:u.height}),A.jsx("image",{href:r,width:u.width,height:u.height,filter:"url(#imageBlurFilter)",mask:"url(#unblurMask)"}),o&&A.jsx("circle",{cx:o.x,cy:o.y,r:s,fill:"transparent",stroke:"red"},0)]})})]})}const e_t=Object.freeze(Object.defineProperty({__proto__:null,default:Zxt},Symbol.toStringTag,{value:"Module"}));function t_t({parameters:e,setAnswer:t}){const n=B.useRef(null),{image:r,question:i,x_grids:s,y_grids:o}=e,[a,u]=B.useState({width:0,height:0}),[l,c]=B.useState([]),[f,d]=B.useState({x:-1,y:-1,width:0,height:0}),h=B.useRef(null),{actions:p,trrack:m}=B.useMemo(()=>{const b=O1.create(),y=b.register("click",(w,S)=>(w.clickRecord=S,w)),x=Yw({registry:b,initialState:{clickRecord:{timestamp:new Date().getTime()}}});return{actions:{clickAction:y},trrack:x}},[]),g=B.useCallback(b=>{m.apply("click",p.clickAction(b)),t({status:!0,provenanceGraph:m.graph.backend,answers:{}})},[p,m,t,a.multiplier,i]);return B.useEffect(()=>{const b=new Image;b.src=r,b.onload=()=>{const y=h.current,x=window.innerHeight-y.getBoundingClientRect().top,w=window.innerWidth-y.getBoundingClientRect().left,S=b.width/b.height;let C,R;x*S<=w?(R=x,C=x*S):(C=w,R=w/S),u({width:C,height:R,multiplier:C/b.width});let I=s,O=o;s.includes(0)||(I=[0,...s]),o.includes(0)||(O=[0,...o]);const M=[];for(let L=0;L<I.length;L++)for(let V=0;V<O.length;V++){let D,j;L+1===I.length?D=b.width-I[L]:D=I[L+1]-I[L],V+1===O.length?j=b.height-O[V]:j=O[V+1]-O[V],M.push({x:I[L],y:O[V],width:D,height:j})}c(M)}},[r]),B.useEffect(()=>{const b=Wo(n.current),y=a.multiplier;b.select("g").selectAll("rect").data(l).join("rect").attr("x",x=>x.x*y).attr("y",x=>x.y*y).attr("width",x=>x.width*y).attr("height",x=>x.height*y).attr("stroke",x=>x.x==f.x&x.y==f.y?"blue":"gray").attr("stroke-width",x=>x.x==f.x&x.y==f.y?1:.5).attr("cursor","pointer").attr("fill","transparent").on("click",(x,w)=>{const S={...w,timestamp:new Date().getTime()};d(S),g(S)}).on("mouseover",(x,w)=>{w.x==f.x&w.y==f.y||Wo(x.target).attr("stroke","black").attr("stroke-width",1)}).on("mouseout",(x,w)=>{w.x==f.x&w.y==f.y||Wo(x.target).attr("stroke","gray").attr("stroke-width",.5)})},[l,t,a,f]),A.jsxs("div",{children:[A.jsx("h3",{children:"Click on the image to reveal"}),A.jsx(je,{ref:h,className:"ImageWrapper",style:{width:"100%",display:"block"},children:A.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:a.width,height:a.height,children:[A.jsxs("defs",{children:[A.jsxs("filter",{id:"imageBlurFilter",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[A.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),A.jsx("feComponentTransfer",{children:A.jsx("feFuncA",{type:"linear",slope:"2.5"})})]}),A.jsxs("mask",{id:"unblurMask",children:[A.jsx("rect",{width:"100%",height:"100%",fill:"white"}),A.jsx("rect",{x:f.x*a.multiplier,y:f.y*a.multiplier,width:f.width*a.multiplier,height:f.height*a.multiplier,fill:"black"},0)]})]}),A.jsx("image",{href:r,width:a.width,height:a.height}),A.jsx("image",{href:r,width:a.width,height:a.height,filter:"url(#imageBlurFilter)",mask:"url(#unblurMask)"}),A.jsx("g",{id:"rectangles"})]})})]})}const n_t=Object.freeze(Object.defineProperty({__proto__:null,default:t_t},Symbol.toStringTag,{value:"Module"}));function r_t({parameters:e,setAnswer:t}){const n=B.useRef(null),{image:r,question:i,x_grids:s,y_grids:o,example:a}=e,[u,l]=B.useState({width:0,height:0}),[c,f]=B.useState([]),d=B.useRef(null);return B.useEffect(()=>{const h=new Image;h.src=r,h.onload=()=>{const p=d.current,m=window.innerHeight-p.getBoundingClientRect().top,g=window.innerWidth-p.getBoundingClientRect().left,b=h.width/h.height;let y,x;m*b<=g?(x=m,y=m*b):(y=g,x=g/b),l({width:y,height:x,multiplier:y/h.width});let w=s,S=o;s.includes(0)||(w=[0,...s]),o.includes(0)||(S=[0,...o]);const C=[];for(let R=0;R<w.length;R++)for(let I=0;I<S.length;I++){let O,M;R+1===w.length?O=h.width-w[R]:O=w[R+1]-w[R],I+1===S.length?M=h.height-S[I]:M=S[I+1]-S[I],C.push({x:w[R],y:S[I],width:O,height:M,clicked:!1,unClicked:!1})}f(C)}},[r]),B.useEffect(()=>{const h=Wo(n.current),p=u.multiplier;h.select("g").selectAll("rect").data(c).join("rect").attr("x",m=>m.x*p).attr("y",m=>m.y*p).attr("width",m=>m.width*p).attr("height",m=>m.height*p).attr("stroke","black").attr("stroke-width",2).attr("cursor","pointer").attr("fill","#e6e6e6").attr("opacity",m=>m.clicked?0:.5).on("click",(m,g)=>{const b=GR.cloneDeep(c),y=b.findIndex(x=>x.x===g.x&&x.y===g.y);b[y].clicked&&(b[y].unClicked=!0),b[y].clicked=!b[y].clicked,f(b),t({status:!0,answers:{patches:JSON.stringify({patches:b.filter(x=>x.clicked||x.unClicked),multiplier:u.multiplier,question:i})}})}).on("mouseover",(m,g)=>{Wo(m.target).attr("stroke","blue").attr("stroke-width",2)}).on("mouseout",(m,g)=>{Wo(m.target).attr("stroke","gray").attr("stroke-width",.5)})},[c,t,u]),A.jsxs("div",{children:[a&&A.jsx("h1",{children:"Example Question"}),a?A.jsx("div",{children:A.jsx("h3",{children:i})}):A.jsxs("div",{children:[A.jsxs("h3",{children:["Please annotate ",A.jsx("u",{children:"minimum patches"})," that ",A.jsx("span",{style:{color:"red"},children:" must be revealed "})," for people to ",A.jsx("span",{style:{color:"red"},children:"confidently"})," answer the question below, assuming that people ",A.jsx("span",{style:{color:"red"},children:"cannot"})," see the blocked area. Then provide your answer for the question."]}),A.jsxs("h3",{children:["Q: ",i]})]}),A.jsx(je,{ref:d,className:"ImageWrapper",style:{width:"100%",display:"block"},children:A.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[A.jsxs("defs",{children:[A.jsxs("filter",{id:"imageBlurFilter",children:[A.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"17"}),A.jsx("feComponentTransfer",{children:A.jsx("feFuncA",{type:"table",tableValues:"1 1"})})]}),A.jsxs("mask",{id:"unblurMask",children:[A.jsx("rect",{width:"100%",height:"100%",fill:"white"}),c.filter(h=>h.clicked).map((h,p)=>A.jsx("rect",{x:h.x*u.multiplier,y:h.y*u.multiplier,width:h.width*u.multiplier,height:h.height*u.multiplier,fill:"black"},p))]})]}),A.jsx("image",{href:r,width:u.width,height:u.height}),A.jsx("g",{id:"rectangles"})]})})]})}const i_t=Object.freeze(Object.defineProperty({__proto__:null,default:r_t},Symbol.toStringTag,{value:"Module"})),uTe=({tool:e,setTool:t,undo:n,clearAll:r})=>A.jsxs(je,{sx:{width:250,backgroundColor:"#f8f9fa",padding:20,borderRight:"1px solid #ddd",display:"flex",flexDirection:"column",gap:20},children:[A.jsx(co,{order:4,align:"center",sx:{fontWeight:700},children:"Toolbox"}),A.jsx(Zd,{my:"sm"}),A.jsxs(El,{spacing:"sm",children:[A.jsx(At,{weight:500,children:"Fill Type"}),A.jsx(Js,{children:A.jsxs(ac.Group,{name:"fillType",value:e,onChange:i=>{t(i)},children:[A.jsx(je,{mb:"sm",children:A.jsx(ac,{value:"stroke",label:"Stroke Fill"})}),A.jsx(je,{mb:"sm",children:A.jsx(ac,{value:"polygon",label:"Polygon Fill"})})]})})]}),A.jsx(Zd,{my:"md"}),A.jsxs(El,{spacing:"xs",children:[A.jsx(At,{weight:500,children:"Actions"}),A.jsx(In,{color:"gray",variant:"light",onClick:n,children:"Undo"}),A.jsx(In,{color:"red",variant:"light",onClick:r,children:"Clear All"})]}),A.jsx(Zd,{my:"md"}),A.jsxs(El,{spacing:"xs",children:[A.jsx(At,{size:"xl",children:"Tool Tips"}),A.jsxs(At,{size:"md",children:[A.jsx("b",{children:"Stroke Fill:"})," Draw shape by clicking and dragging."]}),A.jsxs(At,{size:"md",children:[A.jsx("b",{children:"Polygon Fill:"})," Click multiple points to draw a polygon. ",A.jsx("u",{children:"Double click"})," to close the polygon."]})]})]}),s_t=Object.freeze(Object.defineProperty({__proto__:null,default:uTe},Symbol.toStringTag,{value:"Module"}));function o_t({parameters:e,setAnswer:t}){const n=B.useRef(null),{image:r,question:i,radius_count:s,example:o}=e,[a,u]=B.useState([]),[l,c]=B.useState({width:0,height:0}),f=B.useRef(null),[d,h]=B.useState(0);B.useEffect(()=>{const m=new Image;m.src=r,m.onload=()=>{const g=f.current,b=window.innerHeight-g.getBoundingClientRect().top,y=window.innerWidth-g.getBoundingClientRect().left,x=m.width/m.height;let w,S;b*x<=y?(S=b,w=b*x):(w=y,S=y/x),c({width:w,height:S,multiplier:w/m.width}),h((w+S)/4/s)}},[r]);const p=B.useCallback(m=>{const g=Wo(n.current),b=Q_(m,g.node()),y={x:b[0],y:b[1]},x=[...a,y];u(x),t({status:!0,answers:{circles:JSON.stringify({circles:x.map(w=>({x:parseInt(w.x/l.multiplier),y:parseInt(w.y/l.multiplier)})),radius:d/l.multiplier,multiplier:l.multiplier,question:i})}})},[a,t,l]);return A.jsxs("div",{children:[o&&A.jsx("h1",{children:"Example Question"}),o?A.jsx("div",{children:A.jsx("h3",{children:i})}):A.jsxs("div",{children:[A.jsx("h3",{children:"Please click on regions that you wish to reveal. Then provide your answer for the question."}),A.jsxs("h3",{children:["Q: ",i]})]}),A.jsx(je,{ref:f,className:"ImageWrapper",style:{width:"100%",display:"block"},children:A.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:l.width,height:l.height,onClick:p,children:[A.jsxs("defs",{children:[A.jsxs("filter",{id:"imageBlurFilter",children:[A.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"11"}),A.jsx("feComponentTransfer",{children:A.jsx("feFuncA",{type:"table",tableValues:"1 1"})})]}),A.jsxs("mask",{id:"unblurMask",children:[A.jsx("rect",{width:"100%",height:"100%",fill:"white"}),a.length>0&&A.jsx("circle",{cx:a[a.length-1].x,cy:a[a.length-1].y,r:d,fill:"black"},0)]})]}),A.jsx("image",{href:r,width:l.width,height:l.height}),A.jsx("image",{href:r,width:l.width,height:l.height,filter:"url(#imageBlurFilter)",mask:"url(#unblurMask)"}),a.length>0&&A.jsx("circle",{cx:a[a.length-1].x,cy:a[a.length-1].y,r:d,fill:"transparent",stroke:"red"},0)]})})]})}const a_t=Object.freeze(Object.defineProperty({__proto__:null,default:o_t},Symbol.toStringTag,{value:"Module"}));function u_t({parameters:e,setAnswer:t}){const n=B.useRef(null),{image:r,question:i,x_grids:s,y_grids:o,example:a}=e,[u,l]=B.useState({width:0,height:0}),[c,f]=B.useState([]),d=B.useRef(null);return B.useEffect(()=>{const h=new Image;h.src=r,h.onload=()=>{const p=d.current,m=window.innerHeight-p.getBoundingClientRect().top,g=window.innerWidth-p.getBoundingClientRect().left,b=h.width/h.height;let y,x;m*b<=g?(x=m,y=m*b):(y=g,x=g/b),l({width:y,height:x,multiplier:y/h.width});let w=s,S=o;s.includes(0)||(w=[0,...s]),o.includes(0)||(S=[0,...o]);const C=[];for(let R=0;R<w.length;R++)for(let I=0;I<S.length;I++){let O,M;R+1===w.length?O=h.width-w[R]:O=w[R+1]-w[R],I+1===S.length?M=h.height-S[I]:M=S[I+1]-S[I],C.push({x:w[R],y:S[I],width:O,height:M,clicked:!1,unClicked:!1})}f(C)}},[r]),B.useEffect(()=>{const h=Wo(n.current),p=u.multiplier;h.select("g").selectAll("rect").data(c).join("rect").attr("x",m=>m.x*p).attr("y",m=>m.y*p).attr("width",m=>m.width*p).attr("height",m=>m.height*p).attr("stroke","gray").attr("stroke-width",.5).attr("cursor","pointer").attr("fill",m=>m.clicked?"transparent":"#e6e6e6").attr("opacity",1).on("click",(m,g)=>{const b=GR.cloneDeep(c),y=b.findIndex(x=>x.x===g.x&&x.y===g.y);b[y].clicked&&(b[y].unClicked=!0),b[y].clicked=!b[y].clicked,f(b),t({status:!0,answers:{patches:JSON.stringify({patches:b.filter(x=>x.clicked||x.unClicked),multiplier:u.multiplier,question:i})}})}).on("mouseover",(m,g)=>{Wo(m.target).attr("stroke","blue").attr("stroke-width",2)}).on("mouseout",(m,g)=>{Wo(m.target).attr("stroke","gray").attr("stroke-width",.5)})},[c,t,u]),A.jsxs("div",{children:[a&&A.jsx("h1",{children:"Example Question"}),a?A.jsx("div",{children:A.jsx("h3",{children:i})}):A.jsxs("div",{children:[A.jsxs("h3",{children:["Please annotate ",A.jsx("u",{children:"minimum patches"})," that ",A.jsx("span",{style:{color:"red"},children:" must be revealed "})," for people to ",A.jsx("span",{style:{color:"red"},children:"confidently"})," answer the question below. Then provide your answer for the question."]}),A.jsxs("h3",{children:["Q: ",i]})]}),A.jsx(je,{ref:d,className:"ImageWrapper",style:{width:"100%",display:"block"},children:A.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[A.jsxs("defs",{children:[A.jsxs("filter",{id:"imageBlurFilter",children:[A.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"17"}),A.jsx("feComponentTransfer",{children:A.jsx("feFuncA",{type:"table",tableValues:"1 1"})})]}),A.jsxs("mask",{id:"unblurMask",children:[A.jsx("rect",{width:"100%",height:"100%",fill:"white"}),c.filter(h=>h.clicked).map((h,p)=>A.jsx("rect",{x:h.x*u.multiplier,y:h.y*u.multiplier,width:h.width*u.multiplier,height:h.height*u.multiplier,fill:"black"},p))]})]}),A.jsx("image",{href:r,width:u.width,height:u.height}),A.jsx("g",{id:"rectangles"})]})})]})}const l_t=Object.freeze(Object.defineProperty({__proto__:null,default:u_t},Symbol.toStringTag,{value:"Module"}));function c_t({parameters:e,setAnswer:t}){const{image:n,question:r,example:i}=e,[s,o]=B.useState("stroke"),[a,u]=B.useState({width:0,height:0}),l=B.useRef(null),[c,f]=B.useState([]),[d,h]=B.useState([]),[p,m]=B.useState(!1),g=B.useRef(null),[b]=HSe(n),y=B.useCallback(L=>{const V=L.map(D=>({...D,points:D.points.map(j=>parseInt(j/a.multiplier))}));t({status:!0,answers:{annotations:JSON.stringify({annotations:V,multiplier:a.multiplier,question:r})}})},[t,c,a]),x=L=>{L!==s&&(f([]),h([]),m(!1)),o(L)},w=()=>{const L=c.slice(0,-1);f(L),y(L),h([]),m(!1)},S=()=>{f([]),h([]),m(!1),y([])},C=L=>{if(s==="polygon")return;m(!0);const D=g.current.getPointerPosition(),j=parseInt(D.x),z=parseInt(D.y);h([j,z])},R=L=>{if(s==="polygon"||!p)return;const D=g.current.getPointerPosition(),j=parseInt(D.x),z=parseInt(D.y);h(G=>[...G,j,z])},I=L=>{if(s==="polygon")return;m(!1);const V=[...c,{tool:"stroke",points:d}];f(V),y(V),h([])},O=L=>{if(s!=="polygon")return;const D=g.current.getPointerPosition(),j=parseInt(D.x),z=parseInt(D.y);h(G=>[...G,j,z])},M=L=>{if(s!=="polygon")return;const V=[...c,{tool:"polygon",points:d}];f(V),y(V),h([])};return B.useEffect(()=>{const L=new Image;L.src=n,L.onload=()=>{const V=l.current,D=window.innerHeight-V.getBoundingClientRect().top,j=window.innerWidth-V.getBoundingClientRect().left,z=L.width/L.height;let G,ee;D*z<=j?(ee=D,G=D*z):(G=j,ee=j/z);const ne=G/L.width;u({width:G,height:ee,multiplier:ne})}},[n]),A.jsxs("div",{children:[i&&A.jsx("h1",{children:"Example Question"}),i?A.jsx("div",{children:A.jsx("h3",{children:r})}):A.jsxs("div",{children:[A.jsxs("h3",{children:["Please identify and annotate the regions that are ",A.jsx("span",{style:{color:"red"},children:"important"})," for answering the question below. Then provide your answer for the question."]}),A.jsxs("h3",{children:["Q: ",r]})]}),A.jsxs(je,{ref:l,className:"ImageWrapper",style:{width:"100%",display:"flex"},children:[A.jsx(je,{style:{width:"250px",backgroundColor:"#f4f4f4",padding:"20px",borderRight:"1px solid #ddd",boxSizing:"border-box",flexShrink:0},children:A.jsx(uTe,{tool:s,setTool:x,undo:w,clearAll:S})}),A.jsx(oTe,{ref:g,width:a.width,height:a.height,onMouseDown:C,onMouseMove:R,onMouseUp:I,onClick:O,onDblClick:M,style:{border:"1px solid black"},children:A.jsxs(rTe,{children:[b&&A.jsx(sTe,{image:b,width:a.width,height:a.height}),c.map((L,V)=>{const{tool:D,points:j}=L,z=D==="polygon";return A.jsx(rS,{points:j,stroke:z?"blue":"red",strokeWidth:2,closed:!0,fill:z?"rgba(0, 0, 255, 0.3)":"rgba(255, 0, 0, 0.3)"},V)}),d.length>0&&s==="polygon"&&A.jsx(rS,{points:d,stroke:"blue",strokeWidth:2,closed:d.length>3,fill:d.length>3?"rgba(0, 150, 255, 0.3)":null}),d.length>0&&s==="stroke"&&A.jsx(rS,{points:d,stroke:"red",strokeWidth:2,closed:!0,fill:"rgba(255, 150, 0, 0.3)"}),s==="polygon"&&d.length>0&&A.jsx(iTe,{x:d[d.length-2],y:d[d.length-1],radius:5,fill:"red"})]})})]})]})}const f_t=Object.freeze(Object.defineProperty({__proto__:null,default:c_t},Symbol.toStringTag,{value:"Module"}));function d_t({parameters:e,setAnswer:t}){const n=B.useRef(null),{image:r,question:i,tiles:s,example:o,ourDefinition:a}=e,[u,l]=B.useState({width:0,height:0}),[c,f]=B.useState(s.map(h=>({...h,clicked:!1}))),d=B.useRef(null);return B.useEffect(()=>{const h=new Image;h.src=r,h.onload=()=>{const p=d.current,m=window.innerHeight-p.getBoundingClientRect().top,g=window.innerWidth-p.getBoundingClientRect().left,b=h.width/h.height;let y,x;m*b<=g?(x=m,y=m*b):(y=g,x=g/b),l({width:y,height:x,multiplier:y/h.width})}},[r]),B.useEffect(()=>{const h=Wo(n.current),p=u.multiplier;h.select("g").selectAll("rect").data(c).join("rect").attr("x",m=>m.x*p).attr("y",m=>m.y*p).attr("width",m=>m.width*p).attr("height",m=>m.height*p).attr("stroke","gray").attr("stroke-width",.5).attr("cursor","pointer").attr("fill",m=>m.clicked?"transparent":"#e6e6e6").attr("opacity",1).on("click",(m,g)=>{const b=GR.cloneDeep(c),y=b.findIndex(x=>x.x===g.x&&x.y===g.y);b[y].clicked=!b[y].clicked,f(b),t({status:!0,answers:{patches:JSON.stringify({patches:b.filter(x=>x.clicked),multiplier:u.multiplier,question:i})}})}).on("mouseover",(m,g)=>{Wo(m.target).attr("stroke","blue").attr("stroke-width",2)}).on("mouseout",(m,g)=>{Wo(m.target).attr("stroke","gray").attr("stroke-width",.5)})},[c,t,u]),A.jsxs("div",{children:[o&&A.jsx("h1",{children:"Example Question"}),o?A.jsx("div",{children:A.jsx("h3",{children:i})}):A.jsxs("div",{children:[A.jsxs("h3",{children:["Please annotate ",A.jsx("u",{children:"minimum patches"})," that ",A.jsx("span",{style:{color:"red"},children:" must be revealed "})," for people to ",A.jsx("span",{style:{color:"red"},children:"confidently"})," answer the question below. Then provide your answer for the question."]}),A.jsxs("h3",{children:["Q: ",i]})]}),A.jsx(je,{ref:d,className:"ImageWrapper",style:{width:"100%",display:"block"},children:A.jsxs("svg",{id:"clickAccuracySvg",ref:n,width:u.width,height:u.height,children:[A.jsx("image",{href:r,width:u.width,height:u.height}),A.jsx("g",{id:"rectangles"})]})})]})}const h_t=Object.freeze(Object.defineProperty({__proto__:null,default:d_t},Symbol.toStringTag,{value:"Module"}));class p_t extends sr.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?A.jsx(At,{children:this.state.error.toString()}):this.props.children}}const Mce=Object.assign({"../public/adaptive_blur/assets/tilegrid.jsx":Qyt,"../public/bubble/assets/bubble.jsx":Zyt,"../public/gaze/assets/Slider.jsx":e1t,"../public/gaze/assets/bubble.jsx":qvt,"../public/gaze/assets/draw.jsx":Gvt,"../public/gaze/assets/plain.jsx":Kvt,"../public/importAnnot/assets/ToolBox.jsx":Xvt,"../public/importAnnot/assets/importantannot.jsx":Xxt,"../public/literacy/assets/bubble.jsx":Jxt,"../public/literacy/assets/bubble_prev.jsx":e_t,"../public/literacy/assets/grid.jsx":n_t,"../public/static_blur/assets/grid.jsx":i_t,"../public/tools/assets/ToolBox.jsx":s_t,"../public/tools/assets/bubble.jsx":a_t,"../public/tools/assets/grid.jsx":l_t,"../public/tools/assets/importantannot.jsx":f_t,"../public/tools/assets/tilegrid.jsx":h_t});function m_t({currentConfig:e,provState:t}){const n=mp(),r=B0(),i=`../public/${e.path}`,s=i in Mce?Mce[i].default:null,o=bc(),{updateResponseBlockValidation:a,setreactiveAnswers:u}=Al(),l=B.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return A.jsx(B.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:s?A.jsx(p_t,{children:A.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):A.jsx(vb,{path:e.path})})}function g_t({currentConfig:e}){const[t,n]=B.useState(""),[r,i]=B.useState(!0);return B.useEffect(()=>{async function s(){const o=await XY(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?A.jsx(dc,{text:t}):A.jsx(vb,{path:e.path})}function ZT(e){return e.baseComponent!==void 0}function lTe(){const e=mp(),{setAlertModal:t}=Al(),n=bc();B.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Lce=Object.prototype.hasOwnProperty;function Fce(e,t,n){for(n of e.keys())if(Ok(n,t))return n}function Ok(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Ok(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Fce(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Fce(t,i),!i)||!Ok(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Lce.call(e,n)&&++r&&!Lce.call(t,n)||!(n in t)||!Ok(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function y_t(e){var t=B.useRef(e),n=B.useRef(0);return Ok(e,t.current)||(t.current=e,n.current+=1),B.useMemo(function(){return t.current},[n.current])}function v_t(e,t){return B.useEffect(e,y_t(t))}const UD=(e,t=null)=>{const[n,r]=B.useState("idle"),[i,s]=B.useState(null),[o,a]=B.useState(null),u=B.useRef(null),l=B.useRef(!1);B.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=B.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return v_t(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function cTe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const b_t="_root_1spq0_1",x_t="_description_1spq0_9",__t="_title_1spq0_10",w_t="_closeButton_1spq0_14",E_t={root:b_t,description:x_t,title:__t,closeButton:w_t},O4=e=>{const{title:t,message:n,color:r}=e;Dw.show({title:t,message:n,position:"top-center",classNames:E_t,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},$ce=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],fTe=["participantId","trialId","trialOrder","responseId"];function uX(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function S_t(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(k0(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=ZT(u)&&u.baseComponent&&n.baseComponents?GY({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=cTe(s);return Object.entries(s.answer).map(([h,p])=>{var b,y;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(x=>x.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const x=(y=(b=l.correctAnswer)==null?void 0:b.find(w=>w.id===h))==null?void 0:y.answer;m.correctAnswer=typeof x=="object"?JSON.stringify(x):x}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function T_t(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...fTe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await S_t(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function C_t({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=B.useState([...$ce].filter(p=>p!=="meta")),a=Ko(),{value:u,status:l,error:c}=UD(T_t,[s,r,a.storageEngine,i]),f=B.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);uX(p,n)},[n,u]),d=B.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),O4({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=B.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return A.jsxs(Eo,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[A.jsx(OW,{searchable:!0,nothingFoundMessage:"Property not found",data:[...$ce],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:A.jsx(nVe,{}),variant:"filled"}),A.jsx(eh,{h:"md"}),A.jsxs(je,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?A.jsxs(zn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[A.jsx(zn.Thead,{children:A.jsx(zn.Tr,{children:u.header.map(p=>A.jsx(zn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:A.jsxs(An,{direction:"row",justify:"space-between",align:"center",children:[p,!fTe.includes(p)&&A.jsx(Vb,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:A.jsx(vR,{size:16})})]})},p))})}),A.jsx(zn.Tbody,{children:u.rows.slice(0,5).map((p,m)=>A.jsx(zn.Tr,{children:u.header.map(g=>A.jsx(zn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):l==="error"&&c?A.jsx(Yy,{variant:"light",children:c.message}):null,A.jsx(oh,{visible:l==="pending"||l==="idle"})]}),A.jsx(eh,{h:"sm"}),A.jsx(An,{justify:"center",fz:"sm",c:"dimmed",children:A.jsx(At,{children:h})}),A.jsx(eh,{h:"md"}),A.jsxs(Js,{justify:"right",children:[A.jsx(In,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),A.jsx(In,{leftSection:A.jsx(D1e,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&A.jsx(In,{onClick:d,children:A.jsx(Wze,{})})]})]})}function A_t(){const e=v1(),{storageEngine:t}=Ko(),n=Ai(x=>x.answers),r=WT(),[i,s]=B.useState(!1);B.useEffect(()=>{if(r){s(!0);return}const x=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(x))},1e3)},[]),lTe();const[o,a]=B.useState(),[u,l]=B.useState(""),c=e.studyMetadata.title.replace(" ","_");B.useEffect(()=>{async function x(){if(t){const w=await t.getCurrentParticipantId(),S=await t.getParticipantData();l(w),a(S)}}x()},[t]);const f=B.useCallback(async()=>{uX(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,m]=B.useState(Math.floor(h/1e3));B.useEffect(()=>{if(i){const x=setInterval(()=>{m(w=>w-1)},1e3);return p<=0?(d&&f(),clearInterval(x),()=>clearInterval(x)):()=>clearInterval(x)}return()=>{}},[d,i,p,f]);const g=Vw(),[b,y]=B.useState(!1);return B.useEffect(()=>{(async()=>{if(t){const w=await t.getModes(g);y(w.dataCollectionEnabled)}})()},[t,g]),A.jsx(l1,{style:{height:"100%"},children:A.jsx(An,{direction:"column",children:i||!b?e.uiConfig.studyEndMsg?A.jsx(dc,{text:e.uiConfig.studyEndMsg}):A.jsx(At,{size:"xl",display:"block",children:"Thank you for completing the study. You may close this window now."}):A.jsxs(A.Fragment,{children:[A.jsx(At,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),A.jsx(eh,{h:"lg"}),A.jsx(l1,{children:A.jsx(xg,{color:"blue"})})]})})})}function k_t(){return A.jsx(At,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function R_t(){return A.jsx(At,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const Bce={};function TV(e,t){e===void 0&&(e=Bce),t===void 0&&(t=Bce);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var I_t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),P_t=Object.prototype.hasOwnProperty;function CV(e,t){return P_t.call(e,t)}function AV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)CV(e,i)&&r.push(i);return r}function Xd(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function kV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function d_(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function dTe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function RV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(RV(e[t]))return!0}else if(typeof e=="object"){for(var r=AV(e),i=r.length,s=0;s<i;s++)if(RV(e[r[s]]))return!0}}return!1}function jce(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var hTe=function(e){I_t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,jce(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=jce(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Vo=hTe,N_t=Xd,OE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=zD(n,this.path);r&&(r=Xd(r));var i=$_(n,{op:"remove",path:this.from}).removed;return $_(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=zD(n,this.from);return $_(n,{op:"add",path:this.path,value:Xd(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:M4(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},D_t={add:function(e,t,n){return kV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:OE.move,copy:OE.copy,test:OE.test,_get:OE._get};function zD(e,t){if(t=="")return e;var n={op:"_get",path:t};return $_(e,n),n.value}function $_(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):VD(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=zD(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=M4(e,t.value),o.test===!1)throw new Vo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Vo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Xd(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=VD;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=dTe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!kV(h))throw new Vo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);kV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Vo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=D_t[t.op].call(t,l,h,e);if(o.test===!1)throw new Vo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=OE[t.op].call(t,l,h,e);if(o.test===!1)throw new Vo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Vo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function MM(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Vo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Xd(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=$_(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function O_t(e,t,n){var r=$_(e,t);if(r.test===!1)throw new Vo("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function VD(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Vo("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(OE[e.op]){if(typeof e.path!="string")throw new Vo("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Vo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Vo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Vo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&RV(e.value))throw new Vo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Vo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Vo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=pTe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Vo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Vo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function pTe(e,t,n){try{if(!Array.isArray(e))throw new Vo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)MM(Xd(t),Xd(e),n||!0);else{n=n||VD;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Vo)return i;throw i}}function M4(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!M4(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!M4(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const M_t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Vo,_areEquals:M4,applyOperation:$_,applyPatch:MM,applyReducer:O_t,deepClone:N_t,getValueByPointer:zD,validate:pTe,validator:VD},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var lX=new WeakMap,L_t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),F_t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function $_t(e){return lX.get(e)}function B_t(e,t){return e.observers.get(t)}function j_t(e,t){e.observers.delete(t.callback)}function U_t(e,t){t.unobserve()}function z_t(e,t){var n=[],r,i=$_t(e);if(!i)i=new L_t(e),lX.set(e,i);else{var s=B_t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Xd(e),t){r.callback=t,r.next=null;var o=function(){IV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){IV(r),clearTimeout(r.next),j_t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new F_t(t,r)),r}function IV(e,t){t===void 0&&(t=!1);var n=lX.get(e.object);cX(n.value,e.object,e.patches,"",t),e.patches.length&&MM(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function cX(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=AV(t),o=AV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(CV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?cX(c,f,n,r+"/"+d_(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+d_(l),value:Xd(c)}),n.push({op:"replace",path:r+"/"+d_(l),value:Xd(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+d_(l),value:Xd(c)}),n.push({op:"remove",path:r+"/"+d_(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!CV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+d_(l),value:Xd(t[l])})}}}function V_t(e,t,n){n===void 0&&(n=!1);var r=[];return cX(e,t,r,"",n),r}const H_t=Object.freeze(Object.defineProperty({__proto__:null,compare:V_t,generate:IV,observe:z_t,unobserve:U_t},Symbol.toStringTag,{value:"Module"}));Object.assign({},M_t,H_t,{JsonPatchError:hTe,deepClone:Xd,escapePathComponent:d_,unescapePathComponent:dTe});var RB,Uce;function q_t(){if(Uce)return RB;Uce=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return RB=function(n,r){var i,s,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,function a(u,l,c){var f,d,h,p,m,g,b,y,x,w,S,C;if(u&&typeof u.toJSON=="function"&&(u=u.toJSON()),S=JSON.stringify(u,o),S===void 0)return S;if(b=s-l.length-c,S.length<=b&&(x=S.replace(e,function(R,I){return I||R+" "}),x.length<=b))return x;if(o!=null&&(u=JSON.parse(S),o=void 0),typeof u=="object"&&u!==null){if(y=l+i,h=[],d=0,Array.isArray(u))for(w="[",f="]",b=u.length;d<b;d++)h.push(a(u[d],y,d===b-1?0:1)||"null");else for(w="{",f="}",g=Object.keys(u),b=g.length;d<b;d++)p=g[d],m=JSON.stringify(p)+": ",C=a(u[p],y,m.length+(d===b-1?0:1)),C!==void 0&&h.push(m+C);if(h.length>0)return[w,i+h.join(`,
`+y),f].join(`
`+l)}return S}(n,"",0)},RB}var W_t=q_t();const IB=gc(W_t);function dd(e,t,n){return e.fields=t||[],e.fname=n,e}function Go(e){return e==null?null:e.fname}function uc(e){return e==null?null:e.fields}function mTe(e){return e.length===1?G_t(e[0]):Y_t(e)}const G_t=e=>function(t){return t[e]},Y_t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function vt(e){throw Error(e)}function Ag(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||vt("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&vt("Access path missing closing bracket: "+e),r&&vt("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function np(e,t,n){const r=Ag(e);return e=r.length===1?r[0]:e,dd((n&&n.get||mTe)(r),[e],t||e)}const QR=np("id"),pc=dd(e=>e,[],"identity"),$v=dd(()=>0,[],"zero"),eC=dd(()=>1,[],"one"),rp=dd(()=>!0,[],"true"),wv=dd(()=>!1,[],"false");function K_t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const gTe=0,fX=1,dX=2,yTe=3,vTe=4;function hX(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:K_t,r=e||gTe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=fX&&n(t||"error","ERROR",arguments),this},warn(){return r>=dX&&n(t||"warn","WARN",arguments),this},info(){return r>=yTe&&n(t||"log","INFO",arguments),this},debug(){return r>=vTe&&n(t||"log","DEBUG",arguments),this}}}var xt=Array.isArray;function un(e){return e===Object(e)}const zce=e=>e!=="__proto__";function tC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=X_t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;nC(r,s,i[s],o)}return r},{})}function nC(e,t,n,r){if(!zce(t))return;let i,s;if(un(n)&&!xt(n)){s=un(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?nC(s,i,n[i]):zce(i)&&(s[i]=n[i])}else e[t]=n}function X_t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function pi(e){return e[e.length-1]}function sc(e){return e==null||e===""?null:+e}const bTe=e=>t=>e*Math.exp(t),xTe=e=>t=>Math.log(e*t),_Te=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),wTe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,HD=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function LM(e,t,n,r){const i=n(e[0]),s=n(pi(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function ETe(e,t){return LM(e,t,sc,pc)}function STe(e,t){var n=Math.sign(e[0]);return LM(e,t,xTe(n),bTe(n))}function TTe(e,t,n){return LM(e,t,HD(n),HD(1/n))}function CTe(e,t,n){return LM(e,t,_Te(n),wTe(n))}function FM(e,t,n,r,i){const s=r(e[0]),o=r(pi(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function pX(e,t,n){return FM(e,t,n,sc,pc)}function mX(e,t,n){const r=Math.sign(e[0]);return FM(e,t,n,xTe(r),bTe(r))}function qD(e,t,n,r){return FM(e,t,n,HD(r),HD(1/r))}function gX(e,t,n,r){return FM(e,t,n,_Te(r),wTe(r))}function ATe(e){return 1+~~(new Date(e).getMonth()/3)}function kTe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ln(e){return e!=null?xt(e)?e:[e]:[]}function RTe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Rr(e){return typeof e=="function"}const Q_t="descending";function yX(e,t,n){n=n||{},t=ln(t)||[];const r=[],i=[],s={},o=n.comparator||J_t;return ln(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===Q_t?-1:1),i.push(a=Rr(a)?a:np(a,null,n)),(uc(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:dd(o(i,r),Object.keys(s))}const $M=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),J_t=(e,t)=>e.length===1?Z_t(e[0],t[0]):ewt(e,t,e.length),Z_t=(e,t)=>function(n,r){return $M(e(n),e(r))*t},ewt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=$M(s(r),s(i));return o*t[a]});function mc(e){return Rr(e)?e:()=>e}function vX(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function kr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function dg(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function ITe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const twt=Object.prototype.hasOwnProperty;function gn(e,t){return twt.call(e,t)}const o5={};function rC(e){let t={},n;function r(s){return gn(t,s)&&t[s]!==o5}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===o5&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=o5),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==o5&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function PTe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=pi(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function en(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),kr(r,n)}function ME(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function rx(e){return typeof e=="boolean"}function rb(e){return Object.prototype.toString.call(e)==="[object Date]"}function NTe(e){return e&&Rr(e[Symbol.iterator])}function Ri(e){return typeof e=="number"}function DTe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function cn(e){return typeof e=="string"}function bX(e,t,n){e&&(e=t?ln(e).map(a=>a.replace(/\\(.)/g,"$1")):ln(e));const r=e&&e.length,i=n&&n.get||mTe,s=a=>i(t?[a]:Ag(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return dd(o,e,"key")}function OTe(e,t){const n=e[0],r=pi(e),i=+t;return i?i===1?r:n+i*(r-n):n}const nwt=1e4;function MTe(e){e=+e||nwt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>gn(t,o)||gn(n,o),get:o=>gn(t,o)?t[o]:gn(n,o)?s(o,n[o]):void 0,set:(o,a)=>gn(t,o)?t[o]=a:s(o,a)}}function LTe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function K3(e,t){let n="";for(;--t>=0;)n+=e;return n}function FTe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?K3(i,o)+s:r==="center"?K3(i,~~(o/2))+s+K3(i,Math.ceil(o/2)):s+K3(i,o)}function JR(e){return e&&pi(e)-e[0]||0}function Jt(e){return xt(e)?"["+e.map(Jt)+"]":un(e)||cn(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function xX(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const rwt=e=>Ri(e)||rb(e)?e:Date.parse(e);function _X(e,t){return t=t||rwt,e==null||e===""?null:t(e)}function wX(e){return e==null||e===""?null:e+""}function R0(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function $Te(e,t,n,r){const i=r??"…",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Av(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function iwt(e){return e}function swt(e){if(e==null)return iwt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function owt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function awt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Vce(e,n)})}:Vce(e,t)}function Vce(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=BTe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function BTe(e,t){var n=swt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&owt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function uwt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function lwt(e){return BTe(e,cwt.apply(this,arguments))}function cwt(e,t,n){var r,i,s;if(arguments.length>1)r=fwt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:uwt(e,r)}}function fwt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Sl="year",od="quarter",lc="month",du="week",ad="date",nc="day",hg="dayofyear",hh="hours",ph="minutes",ip="seconds",I0="milliseconds",EX=[Sl,od,lc,du,ad,nc,hg,hh,ph,ip,I0],PB=EX.reduce((e,t,n)=>(e[t]=1+n,e),{});function SX(e){const t=ln(e).slice(),n={};return t.length||vt("Missing time unit."),t.forEach(i=>{gn(PB,i)?n[i]=1:vt(`Invalid time unit: ${i}.`)}),(n[du]||n[nc]?1:0)+(n[od]||n[lc]||n[ad]?1:0)+(n[hg]?1:0)>1&&vt(`Incompatible time units: ${e}`),t.sort((i,s)=>PB[i]-PB[s]),t}const dwt={[Sl]:"%Y ",[od]:"Q%q ",[lc]:"%b ",[ad]:"%d ",[du]:"W%U ",[nc]:"%a ",[hg]:"%j ",[hh]:"%H:00",[ph]:"00:%M",[ip]:":%S",[I0]:".%L",[`${Sl}-${lc}`]:"%Y-%m ",[`${Sl}-${lc}-${ad}`]:"%Y-%m-%d ",[`${hh}-${ph}`]:"%H:%M"};function jTe(e,t){const n=kr({},dwt,t),r=SX(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const g_=new Date;function TX(e){return g_.setFullYear(e),g_.setMonth(0),g_.setDate(1),g_.setHours(0,0,0,0),g_}function UTe(e){return VTe(new Date(e))}function zTe(e){return PV(new Date(e))}function VTe(e){return t1.count(TX(e.getFullYear())-1,e)}function PV(e){return XT.count(TX(e.getFullYear())-1,e)}function NV(e){return TX(e).getDay()}function hwt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function HTe(e){return WTe(new Date(e))}function qTe(e){return DV(new Date(e))}function WTe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return tb.count(t-1,e)}function DV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return QT.count(t-1,e)}function OV(e){return g_.setTime(Date.UTC(e,0,1)),g_.getUTCDay()}function pwt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function GTe(e,t,n,r,i){const s=t||1,o=pi(e),a=(b,y,x)=>(x=x||b,mwt(n[x],r[x],b===o&&s,y)),u=new Date,l=R0(e),c=l[Sl]?a(Sl):mc(2012),f=l[lc]?a(lc):l[od]?a(od):$v,d=l[du]&&l[nc]?a(nc,1,du+nc):l[du]?a(du,1):l[nc]?a(nc,1):l[ad]?a(ad,1):l[hg]?a(hg,1):eC,h=l[hh]?a(hh):$v,p=l[ph]?a(ph):$v,m=l[ip]?a(ip):$v,g=l[I0]?a(I0):$v;return function(b){u.setTime(+b);const y=c(u);return i(y,f(u),d(u,y),h(u),p(u),m(u),g(u))}}function mwt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function US(e,t,n){return t+e*7-(n+6)%7}const gwt={[Sl]:e=>e.getFullYear(),[od]:e=>Math.floor(e.getMonth()/3),[lc]:e=>e.getMonth(),[ad]:e=>e.getDate(),[hh]:e=>e.getHours(),[ph]:e=>e.getMinutes(),[ip]:e=>e.getSeconds(),[I0]:e=>e.getMilliseconds(),[hg]:e=>VTe(e),[du]:e=>PV(e),[du+nc]:(e,t)=>US(PV(e),e.getDay(),NV(t)),[nc]:(e,t)=>US(1,e.getDay(),NV(t))},ywt={[od]:e=>3*e,[du]:(e,t)=>US(e,0,NV(t))};function YTe(e,t){return GTe(e,t||1,gwt,ywt,hwt)}const vwt={[Sl]:e=>e.getUTCFullYear(),[od]:e=>Math.floor(e.getUTCMonth()/3),[lc]:e=>e.getUTCMonth(),[ad]:e=>e.getUTCDate(),[hh]:e=>e.getUTCHours(),[ph]:e=>e.getUTCMinutes(),[ip]:e=>e.getUTCSeconds(),[I0]:e=>e.getUTCMilliseconds(),[hg]:e=>WTe(e),[du]:e=>DV(e),[nc]:(e,t)=>US(1,e.getUTCDay(),OV(t)),[du+nc]:(e,t)=>US(DV(e),e.getUTCDay(),OV(t))},bwt={[od]:e=>3*e,[du]:(e,t)=>US(e,0,OV(t))};function KTe(e,t){return GTe(e,t||1,vwt,bwt,pwt)}const xwt={[Sl]:cg,[od]:C4.every(3),[lc]:C4,[du]:XT,[ad]:t1,[nc]:t1,[hg]:t1,[hh]:_M,[ph]:bM,[ip]:Hy,[I0]:MS},_wt={[Sl]:fg,[od]:A4.every(3),[lc]:A4,[du]:QT,[ad]:tb,[nc]:tb,[hg]:tb,[hh]:wM,[ph]:xM,[ip]:Hy,[I0]:MS};function iC(e){return xwt[e]}function sC(e){return _wt[e]}function XTe(e,t,n){return e?e.offset(t,n):void 0}function QTe(e,t,n){return XTe(iC(e),t,n)}function JTe(e,t,n){return XTe(sC(e),t,n)}function ZTe(e,t,n,r){return e?e.range(t,n,r):void 0}function eCe(e,t,n,r){return ZTe(iC(e),t,n,r)}function tCe(e,t,n,r){return ZTe(sC(e),t,n,r)}const X3=1e3,Q3=X3*60,J3=Q3*60,BM=J3*24,wwt=BM*7,Hce=BM*30,MV=BM*365,nCe=[Sl,lc,ad,hh,ph,ip,I0],Z3=nCe.slice(0,-1),ek=Z3.slice(0,-1),tk=ek.slice(0,-1),Ewt=tk.slice(0,-1),Swt=[Sl,du],qce=[Sl,lc],rCe=[Sl],t3=[[Z3,1,X3],[Z3,5,5*X3],[Z3,15,15*X3],[Z3,30,30*X3],[ek,1,Q3],[ek,5,5*Q3],[ek,15,15*Q3],[ek,30,30*Q3],[tk,1,J3],[tk,3,3*J3],[tk,6,6*J3],[tk,12,12*J3],[Ewt,1,BM],[Swt,1,wwt],[qce,1,Hce],[qce,3,3*Hce],[rCe,1,MV]];function iCe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(JR(t))/n;let i=GT(a=>a[2]).right(t3,r),s,o;return i===t3.length?(s=rCe,o=xb(t[0]/MV,t[1]/MV,n)):i?(i=t3[r/t3[i-1][2]<t3[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=nCe,o=Math.max(xb(t[0],t[1],n),1)),{units:s,step:o}}function nk(e){const t={};return n=>t[n]||(t[n]=e(n))}function Twt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=Cwt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function Cwt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function sCe(e){const t=nk(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=tw(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Twt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=tw(o??",f");const a=xb(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=D2e(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=O2e(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=N2e(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let LV;oCe();function oCe(){return LV=sCe({format:dM,formatPrefix:pK})}function aCe(e){return sCe(P2e(e))}function WD(e){return arguments.length?LV=aCe(e):LV}function Wce(e,t,n){n=n||{},un(n)||vt(`Invalid time multi-format specifier: ${n}`);const r=t(ip),i=t(ph),s=t(hh),o=t(ad),a=t(du),u=t(lc),l=t(od),c=t(Sl),f=e(n[I0]||".%L"),d=e(n[ip]||":%S"),h=e(n[ph]||"%I:%M"),p=e(n[hh]||"%I %p"),m=e(n[ad]||n[nc]||"%a %d"),g=e(n[du]||"%b %d"),b=e(n[lc]||"%B"),y=e(n[od]||"%B"),x=e(n[Sl]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?b:y:x)(w)}function uCe(e){const t=nk(e.format),n=nk(e.utcFormat);return{timeFormat:r=>cn(r)?t(r):Wce(t,iC,r),utcFormat:r=>cn(r)?n(r):Wce(n,sC,r),timeParse:nk(e.parse),utcParse:nk(e.utcParse)}}let FV;lCe();function lCe(){return FV=uCe({format:RK,parse:WEe,utcFormat:IK,utcParse:GEe})}function cCe(e){return uCe(UEe(e))}function L4(e){return arguments.length?FV=cCe(e):FV}const $V=(e,t)=>kr({},e,t);function fCe(e,t){const n=e?aCe(e):WD(),r=t?cCe(t):L4();return $V(n,r)}function CX(e,t){const n=arguments.length;return n&&n!==2&&vt("defaultLocale expects either zero or two arguments."),n?$V(WD(e),L4(t)):$V(WD(),L4())}function Awt(){return oCe(),lCe(),CX()}const kwt=/^(data:|([A-Za-z]+:)?\/\/)/,Rwt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Iwt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Gce="file://";function Pwt(e,t){return n=>({options:n||{},sanitize:Dwt,load:Nwt,fileAccess:!1,file:Owt(t),http:Lwt(e)})}async function Nwt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function Dwt(e,t){t=kr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=Rwt.test(e.replace(Iwt,""));(e==null||typeof e!="string"||!a)&&vt("Sanitize failure, invalid URI: "+Jt(e));const u=kwt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Gce))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Gce.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function Owt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):Mwt}async function Mwt(){vt("No file system access.")}function Lwt(e){return e?async function(t,n){const r=kr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Rr(s[i])?s[i]():s.text():vt(s.status+""+s.statusText)}:Fwt}async function Fwt(){vt("No HTTP fetch method available.")}const $wt=e=>e!=null&&e===e,Bwt=e=>e==="true"||e==="false"||e===!0||e===!1,jwt=e=>!Number.isNaN(Date.parse(e)),dCe=e=>!Number.isNaN(+e)&&!(e instanceof Date),Uwt=e=>dCe(e)&&Number.isInteger(+e),BV={boolean:xX,integer:sc,number:sc,date:_X,string:wX,unknown:pc},a5=[Bwt,Uwt,dCe,jwt],zwt=["boolean","integer","number","date"];function hCe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=a5.length,i=a5.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&$wt(u)&&!a5[a](u)&&(i[a]=0,++o,o===a5.length))return"string";return zwt[i.reduce((s,o)=>s===0?o:s,0)-1]}function pCe(e,t){return t.reduce((n,r)=>(n[r]=hCe(e,r),n),{})}function Yce(e){const t=function(n,r){const i={delimiter:e};return AX(n,r?kr(r,i):i)};return t.responseType="text",t}function AX(e,t){return t.header&&(e=t.header.map(Jt).join(t.delimiter)+`
`+e),Bht(t.delimiter).parse(e+"")}AX.responseType="text";function Vwt(e){return typeof Buffer=="function"&&Rr(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function kX(e,t){const n=t&&t.property?np(t.property):pc;return un(e)&&!Vwt(e)?Hwt(n(e),t):n(JSON.parse(e))}kX.responseType="json";function Hwt(e,t){return!xt(e)&&NTe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const qwt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function mCe(e,t){let n,r,i,s;return e=kX(e,t),t&&t.feature?(n=awt,i=t.feature):t&&t.mesh?(n=lwt,i=t.mesh,s=qwt[t.filter]):vt("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):vt("Invalid TopoJSON object: "+i),r&&r.features||[r]}mCe.responseType="json";const DN={dsv:AX,csv:Yce(","),tsv:Yce("	"),json:kX,topojson:mCe};function RX(e,t){return arguments.length>1?(DN[e]=t,this):gn(DN,e)?DN[e]:null}function gCe(e){const t=RX(e);return t&&t.responseType||"text"}function yCe(e,t,n,r){t=t||{};const i=RX(t.type||"json");return i||vt("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Wwt(e,t.parse,n,r),gn(e,"columns")&&delete e.columns,e}function Wwt(e,t,n,r){if(!e.length)return;const i=L4();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=pCe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!BV[p])throw Error("Illegal format pattern: "+h+":"+p);return BV[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const jM=Pwt(typeof fetch<"u"&&fetch,null);function UM(e){const t=e||pc,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function ON(e,t){try{await t(e)}catch(n){e.error(n)}}const vCe=Symbol("vega_id");let Gwt=1;function zM(e){return!!(e&&Fn(e))}function Fn(e){return e[vCe]}function bCe(e,t){return e[vCe]=t,e}function Vi(e){const t=e===Object(e)?e:{data:e};return Fn(t)?t:bCe(t,Gwt++)}function IX(e){return VM(e,Vi({}))}function VM(e,t){for(const n in e)t[n]=e[n];return t}function xCe(e,t){return bCe(t,Fn(e))}function Kw(e,t){return e?t?(n,r)=>e(n,r)||Fn(t(n))-Fn(t(r)):(n,r)=>e(n,r)||Fn(n)-Fn(r):null}function _Ce(e){return e&&e.constructor===Xw}function Xw(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Xw,insert(a){const u=ln(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Rr(a)?r:t,l=ln(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:mc(l)};return Rr(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Rr(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Fn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Fn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(y=>{p(y)&&(l[Fn(y)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Fn(m),l[g]?l[g]=1:a.add.push(Vi(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Fn(m)]<0&&a.rem.push(m);function b(y,x,w){w?y[x]=w(y):a.encode=x,o||(c[Fn(y)]=y)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Fn(m)],g>0&&(b(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(y=>{p(y)&&l[Fn(y)]>0&&b(y,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(y=>l[Fn(y)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const MN="_:mod:_";function HM(){Object.defineProperty(this,MN,{writable:!0,value:{}})}HM.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[MN];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=xt(n)?1+n.length:-1),i},modified(e,t){const n=this[MN];if(arguments.length){if(xt(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[MN]={},this}};let Ywt=0;const Kwt="pulse",Xwt=new HM,Qwt=1,Jwt=2;function Ts(e,t,n,r){this.id=++Ywt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Kce(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ts.prototype={targets(){return this._targets||(this._targets=UM(QR))},set(e){return this.value!==e?(this.value=e,1):0},skip:Kce(Qwt),modified:Kce(Jwt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new HM,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Ts?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===Kwt)ln(a).forEach(f=>{f instanceof Ts?f!==this&&(f.targets().add(this),s.push(f)):vt("Pulse parameters must be operator instances.")}),this.source=a;else if(xt(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||Xwt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Zwt(e,t,n,r){let i=1,s;return e instanceof Ts?s=e:e&&e.prototype instanceof Ts?s=new e:Rr(e)?s=new Ts(null,e):(i=0,s=new Ts(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function e2t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let t2t=0;function qM(e,t,n){this.id=++t2t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ev(e,t,n){return new qM(e,t,n)}qM.prototype={_filter:rp,_apply:pc,targets(){return this._targets||(this._targets=UM(QR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ev(e);return this.targets().add(t),t},apply(e){const t=Ev(null,e);return this.targets().add(t),t},merge(){const e=Ev();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ev();return this.targets().add(Ev(null,null,vX(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ev(null,null,()=>n=!0)),t.targets().add(Ev(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=rp,this._targets=null}};function n2t(e,t,n,r){const i=this,s=Ev(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ln(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function r2t(e,t){const n=this.locale();return yCe(e,t,n.timeParse,n.utcParse)}function i2t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function s2t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:gCe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function o2t(e,t,n){const r=this,i=r._pending||a2t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(rp).insert(s.data||[])),i.done(),s}function a2t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const u2t={skip:!0};function l2t(e,t,n,r,i){return(e instanceof Ts?f2t:c2t)(this,e,t,n,r,i),this}function c2t(e,t,n,r,i,s){const o=kr({},s,u2t);let a,u;Rr(n)||(n=mc(n)),r===void 0?a=l=>e.touch(n(l)):Rr(r)?(u=new Ts(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;_Ce(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function f2t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Ts(null,d2t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function d2t(e,t){return t=Rr(t)?t:mc(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function h2t(e){e.rank=++this._rank}function p2t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&vt("Cycle detected in dataflow graph.")}const GD={},Tm=1,kv=2,ky=4,m2t=Tm|kv,Xce=Tm|ky,nE=Tm|kv|ky,Qce=8,n3=16,Jce=32,Zce=64;function ib(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function NB(e,t){const n=[];return Av(e,t,r=>n.push(r)),n}function efe(e,t){const n={};return e.visit(t,r=>{n[Fn(r)]=1}),r=>n[Fn(r)]?null:r}function u5(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}ib.prototype={StopPropagation:GD,ADD:Tm,REM:kv,MOD:ky,ADD_REM:m2t,ADD_MOD:Xce,ALL:nE,REFLOW:Qce,SOURCE:n3,NO_SOURCE:Jce,NO_FIELDS:Zce,fork(e){return new ib(this.dataflow).init(this,e)},clone(){const e=this.fork(nE);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(nE|n3)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new ib(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Zce)&&(n.fields=e.fields),t&Tm?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&kv?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&ky?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Jce?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||nE;return t&Tm&&this.add.length||t&kv&&this.rem.length||t&ky&&this.mod.length},reflow(e){if(e)return this.fork(nE).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(ky,efe(this,Tm))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return xt(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?xt(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Tm&&(n.addF=u5(n.addF,t)),e&kv&&(n.remF=u5(n.remF,t)),e&ky&&(n.modF=u5(n.modF,t)),e&n3&&(n.srcF=u5(n.srcF,t)),n},materialize(e){e=e||nE;const t=this;return e&Tm&&t.addF&&(t.add=NB(t.add,t.addF),t.addF=null),e&kv&&t.remF&&(t.rem=NB(t.rem,t.remF),t.remF=null),e&ky&&t.modF&&(t.mod=NB(t.mod,t.modF),t.modF=null),e&n3&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&n3)return Av(n.source,n.srcF,r),n;e&Tm&&Av(n.add,n.addF,r),e&kv&&Av(n.rem,n.remF,r),e&ky&&Av(n.mod,n.modF,r);const i=n.source;if(e&Qce&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Av(i,efe(n,Xce),r):Av(i,n.srcF,r))}return n}};function PX(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}en(PX,ib,{fork(e){const t=new ib(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?xt(e)?e.some(r=>n[r]):n[e]:0},filter(){vt("MultiPulse does not support filtering.")},materialize(){vt("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function g2t(e,t,n){const r=this,i=[];if(r._pulse)return wCe(r);if(r._pending&&await r._pending,t&&await ON(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new ib(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=UM(QR);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=GD),u!==GD&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await ON(r,c[f].callback)}return n&&await ON(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function y2t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function v2t(e,t,n){return this._pulse?wCe(this):(this.evaluate(e,t,n),this)}function b2t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function wCe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function x2t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function _2t(e,t){const n=e.source,r=this._clock;return n&&xt(n)?new PX(this,r,n.map(i=>i.pulse),t):this._input[e.id]||w2t(this._pulse,n&&n.pulse)}function w2t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==GD&&(e.source=t.source),e)}const NX={skip:!1,force:!1};function E2t(e,t){const n=t||NX;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function S2t(e,t,n){const r=n||NX;return(e.set(t)||r.force)&&this.touch(e,r),this}function T2t(e,t,n){this.touch(e,n||NX);const r=new ib(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function C2t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),ECe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,A2t(t,0,e)):r=n,r}}}function ECe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function A2t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,ECe(e,r,t,n)}function iS(){this.logger(hX()),this.logLevel(fX),this._clock=0,this._rank=0,this._locale=CX();try{this._loader=jM()}catch{}this._touched=UM(QR),this._input={},this._pulse=null,this._heap=C2t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function r3(e){return function(){return this._log[e].apply(this,arguments)}}iS.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:r3("error"),warn:r3("warn"),info:r3("info"),debug:r3("debug"),logLevel:r3("level"),cleanThreshold:1e4,add:Zwt,connect:e2t,rank:h2t,rerank:p2t,pulse:T2t,touch:E2t,update:S2t,changeset:Xw,ingest:i2t,parse:r2t,preload:o2t,request:s2t,events:n2t,on:l2t,evaluate:g2t,run:v2t,runAsync:y2t,runAfter:b2t,_enqueue:x2t,_getPulse:_2t};function pt(e,t){Ts.call(this,e,null,t)}en(pt,Ts,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const zS={};function SCe(e){const t=TCe(e);return t&&t.Definition||null}function TCe(e){return e=e&&e.toLowerCase(),gn(zS,e)?zS[e]:null}function*CCe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function DX(e,t,n){const r=Float64Array.from(CCe(e,n));return r.sort(Zy),t.map(i=>Nwe(r,i))}function OX(e,t){return DX(e,[.25,.5,.75],t)}function MX(e,t){const n=e.length,r=Slt(e,t),i=OX(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function ACe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var sp=Math.random;function k2t(e){sp=e}function kCe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(CCe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(sp()*s)];c[l]=a/s}return c.sort(Zy),[Sz(c,n/2),Sz(c,1-n/2)]}function RCe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?R2t(s,t+t/4):s}function R2t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function I2t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function P2t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*sp())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const ICe=Math.sqrt(2*Math.PI),N2t=Math.SQRT2;let i3=NaN;function WM(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(i3===i3)n=i3,i3=NaN;else{do n=sp()*2-1,r=sp()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,i3=r*s}return e+n*t}function LX(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*ICe)}function GM(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function YM(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*N2t*D2t(2*e-1)}function D2t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function FX(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>WM(n,r),pdf:s=>LX(s,n,r),cdf:s=>GM(s,n,r),icdf:s=>YM(s,n,r)};return i.mean(e).stdev(t)}function $X(e,t){const n=FX();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=MX(e)),i):t},sample(){return e[~~(sp()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function BX(e,t){return e=e||0,t=t??1,Math.exp(e+WM()*t)}function jX(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*ICe*e)}function UX(e,t,n){return GM(Math.log(e),t,n)}function zX(e,t,n){return Math.exp(YM(e,t,n))}function PCe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>BX(n,r),pdf:s=>jX(s,n,r),cdf:s=>UX(s,n,r),icdf:s=>zX(s,n,r)};return i.mean(e).stdev(t)}function NCe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=sp();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function VX(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*sp()}function HX(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function qX(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function WX(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function DCe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>VX(n,r),pdf:s=>HX(s,n,r),cdf:s=>qX(s,n,r),icdf:s=>WX(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function GX(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function ZR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function KM(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function eI(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function oC(e,t,n,r,i){let s=0,o=0;return eI(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function YX(e,t,n){let r=0,i=0,s=0,o=0,a=0;eI(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=ZR(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:oC(e,t,n,i,l)}}function OCe(e,t,n){let r=0,i=0,s=0,o=0,a=0;eI(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=ZR(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:oC(e,t,n,i,l)}}function MCe(e,t,n){const[r,i,s,o]=KM(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;eI(e,t,n,(y,x)=>{d=r[f++],h=Math.log(x),p=d*x,a+=(x*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=ZR(u/o,a/o,l/o,c/o),b=y=>Math.exp(m+g*(y-s));return{coef:[Math.exp(m-g*s),g],predict:b,rSquared:oC(e,t,n,o,b)}}function LCe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;eI(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=ZR(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:oC(e,t,n,a,c)}}function KX(e,t,n){const[r,i,s,o]=KM(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const b=c-u*u,y=u*b-l*l,x=(d*u-f*l)/y,w=(f*b-d*l)/y,S=-x*u,C=R=>(R=R-s,x*R*R+w*R+S+o);return{coef:[S-w*s+x*s*s+o,w-2*x*s,x],predict:C,rSquared:oC(e,t,n,o,C)}}function FCe(e,t,n,r){if(r===0)return GX(e,t,n);if(r===1)return YX(e,t,n);if(r===2)return KX(e,t,n);const[i,s,o,a]=KM(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const b=M2t(c),y=x=>{x-=o;let w=a+b[0]+b[1]*x+b[2]*x*x;for(d=3;d<f;++d)w+=b[d]*Math.pow(x,d);return w};return{coef:O2t(f,b,-o,a),predict:y,rSquared:oC(e,t,n,a,y)}}function O2t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function M2t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const tfe=2,nfe=1e-12;function $Ce(e,t,n,r){const[i,s,o,a]=KM(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=tfe;){const p=[0,l-1];for(let g=0;g<u;++g){const b=i[g],y=p[0],x=p[1],w=b-i[y]>i[x]-b?y:x;let S=0,C=0,R=0,I=0,O=0;const M=1/Math.abs(i[w]-b||1);for(let D=y;D<=x;++D){const j=i[D],z=s[D],G=L2t(Math.abs(b-j)*M)*d[D],ee=j*G;S+=G,C+=ee,R+=z*G,I+=z*ee,O+=j*ee}const[L,V]=ZR(C/S,R/S,I/S,O/S);c[g]=L+V*b,f[g]=Math.abs(s[g]-c[g]),F2t(i,g+1,p)}if(h===tfe)break;const m=Dwe(f);if(Math.abs(m)<nfe)break;for(let g=0,b,y;g<u;++g)b=f[g]/(6*m),d[g]=b>=1?nfe:(y=1-b*b)*y}return $2t(i,c,o,a)}function L2t(e){return(e=1-e*e*e)*e*e}function F2t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function $2t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const B2t=.5*Math.PI/180;function XM(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=j2t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&U2t(f,m,d,h,p)>B2t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function j2t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function U2t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function z2t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function jV(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:z2t(e)}function BCe(e,t,n){return n||e+(t?"_"+t:"")}const DB=()=>{},V2t={init:DB,add:DB,rem:DB,idx:0},F4={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},tI=Object.keys(F4).filter(e=>e!=="__count__");function H2t(e,t){return(n,r)=>kr({name:e,aggregate_param:r,out:n||e},V2t,t)}[...tI,"__count__"].forEach(e=>{F4[e]=H2t(e,F4[e])});function jCe(e,t,n){return F4[e](n,t)}function UCe(e,t){return e.idx-t.idx}function q2t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=F4[i]())})};return e.forEach(n),Object.values(t).sort(UCe)}function W2t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function G2t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Y2t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function K2t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function zCe(e,t){const n=t||pc,r=q2t(e),i=e.slice().sort(UCe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=W2t,s.prototype.add=G2t,s.prototype.rem=Y2t,s.prototype.set=K2t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function XX(e){this._key=e?np(e):Fn,this.reset()}const Il=XX.prototype;Il.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Il.add=function(e){this._add.push(e)};Il.rem=function(e){this._rem.push(e)};Il.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Il.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",gn(n,s)||(n[s]=1,++i);return i};Il.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=ITe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Il.argmin=function(e){return this.extent(e)[0]||{}};Il.argmax=function(e){return this.extent(e)[1]||{}};Il.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Il.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Il.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=OX(this.values(),e),this._get=e),this._q};Il.q1=function(e){return this.quartile(e)[0]};Il.q2=function(e){return this.quartile(e)[1]};Il.q3=function(e){return this.quartile(e)[2]};Il.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=kCe(this.values(),1e3,.05,e),this._get=e),this._ci};Il.ci0=function(e){return this.ci(e)[0]};Il.ci1=function(e){return this.ci(e)[1]};function Cb(e){pt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Cb.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:tI},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};en(Cb,pt,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(y){const x=ln(uc(y)),w=x.length;let S=0,C;for(;S<w;++S)r[C=x[S]]||(r[C]=1,t.push(C))}this._dims=ln(e.groupby),this._dnames=this._dims.map(y=>{const x=Go(y);return i(y),n.push(x),x}),this.cellkey=e.key?e.key:jV(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,b;for(l!==o.length&&vt("Unmatched number of fields and aggregate ops."),b=0;b<l;++b){if(f=s[b],d=o[b],h=a[b]||null,f==null&&d!=="count"&&vt("Null aggregate field specified."),m=Go(f),g=BCe(d,m,u[b]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(jCe(d,h,g))}return this._measures=this._measures.map(y=>zCe(y,y.field)),Object.create(null)},cellkey:jV(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new XX),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?xCe(t.tuple,s):Vi(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const X2t=1e-14;function QX(e){pt.call(this,null,e)}QX.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};en(QX,pt,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(uc(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=ACe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=sc(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(X2t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=dd(u,uc(t),e.name||"bin_"+Go(t))}});function VCe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?LTe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function JX(e){pt.call(this,[],e)}JX.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};en(JX,pt,{transform(e,t){const n=t.fork(t.ALL),r=VCe(Fn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Kw(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function HCe(e){Ts.call(this,null,Q2t,e)}en(HCe,Ts);function Q2t(e){return this.value&&!e.modified()?this.value:yX(e.fields,e.orders)}function ZX(e){pt.call(this,null,e)}ZX.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function J2t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}en(ZX,pt,{transform(e,t){const n=f=>d=>{for(var h=J2t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Vi({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function eQ(e){pt.call(this,null,e)}eQ.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};en(eQ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=Z2t(a,i,s,e.filter||rp)):n.mod=a,n.source=this.value,n.modifies(r)}});function Z2t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Vi(s)),s={},s[t]=l);return i}const rfe={kde:$X,mixture:NCe,normal:FX,lognormal:PCe,uniform:DCe},eEt="distributions",ife="function",tEt="field";function qCe(e,t){const n=e[ife];gn(rfe,n)||vt("Unknown distribution function: "+n);const r=rfe[n]();for(const i in e)i===tEt?r.data((e.from||t()).map(e[i])):i===eEt?r[i](e[i].map(s=>qCe(s,t))):typeof r[i]===ife&&r[i](e[i]);return r}function tQ(e){pt.call(this,null,e)}const WCe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],nEt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:WCe},{name:"weights",type:"number",array:!0}]};tQ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:WCe.concat(nEt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};en(tQ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=qCe(e.distribution,rEt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&vt("Invalid density method: "+o),!e.extent&&!r.data&&vt("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||dg(r.data()),l=XM(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Vi(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function rEt(e){return()=>e.materialize(e.SOURCE).source}function GCe(e,t){return e?e.map((n,r)=>t[r]||Go(n)):null}function nQ(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const YCe="bin";function rQ(e){pt.call(this,null,e)}rQ.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:YCe}]};const iEt=(e,t)=>JR(dg(e,t))/30;en(rQ,pt,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=nQ(t.source,e.groupby,pc),i=e.smooth||!1,s=e.field,o=e.step||iEt(n,s),a=Kw((p,m)=>s(p)-s(m)),u=e.as||YCe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of RCe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function KCe(e){Ts.call(this,null,sEt,e),this.modified(!0)}en(KCe,Ts);function sEt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:dd(n=>t(n,e),uc(t),Go(t))}function iQ(e){pt.call(this,[void 0,void 0],e)}iQ.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};en(iQ,pt,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=sc(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Go(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function sQ(e,t){Ts.call(this,e),this.parent=t,this.count=0}en(sQ,Ts,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function QM(e){pt.call(this,{},e),this._keys=rC();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}en(QM,pt,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=gn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new sQ(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Fn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Fn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Fn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Fn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Fn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function XCe(e){Ts.call(this,null,oEt,e)}en(XCe,Ts);function oEt(e){return this.value&&!e.modified()?this.value:xt(e.name)?ln(e.name).map(t=>np(t)):np(e.name,e.as)}function oQ(e){pt.call(this,rC(),e)}oQ.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};en(oQ,pt,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Fn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Fn(f),1)});function c(f){const d=Fn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function aQ(e){pt.call(this,[],e)}aQ.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};en(aQ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=GCe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=IX(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function uQ(e){pt.call(this,[],e)}uQ.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};en(uQ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Go),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=IX(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function lQ(e){pt.call(this,null,e)}lQ.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};en(lQ,pt,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function QCe(e){pt.call(this,[],e)}en(QCe,pt,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Vi(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const l5={value:"value",median:Dwe,mean:Plt,min:Ez,max:O_},aEt=[];function cQ(e){pt.call(this,[],e)}cQ.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function uEt(e){var t=e.method||l5.value,n;if(l5[t]==null)vt("Unrecognized imputation method: "+t);else return t===l5.value?(n=e.value!==void 0?e.value:0,()=>n):l5[t]}function lEt(e){const t=e.field;return n=>n?t(n):NaN}en(cQ,pt,{transform(e,t){var n=t.fork(t.ALL),r=uEt(e),i=lEt(e),s=Go(e.field),o=Go(e.key),a=(e.groupby||[]).map(Go),u=cEt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,b,y,x,w,S;for(g=0,x=u.length;g<x;++g)for(d=u[g],p=d.values,h=NaN,y=0;y<f;++y)if(d[y]==null){for(m=u.domain[y],S={_impute:!0},b=0,w=p.length;b<w;++b)S[a[b]]=p[b];S[o]=m,S[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Vi(S))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function cEt(e,t,n,r){var i=b=>b(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((b,y)=>a[b]=y+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):aEt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function fQ(e){Cb.call(this,e)}fQ.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:tI},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};en(fQ,Cb,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{kr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function dQ(e){pt.call(this,null,e)}dQ.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};en(dQ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=nQ(r,e.groupby,e.field),s=(e.groupby||[]).map(Go),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&vt("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=dg(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=$X(h,o)[a],m=e.counts?h.length:1,g=c||dg(h);XM(p,g,f,d).forEach(b=>{const y={};for(let x=0;x<s.length;++x)y[s[x]]=h.dims[x];y[u[0]]=b[0],y[u[1]]=b[1]*m,l.push(Vi(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function JCe(e){Ts.call(this,null,fEt,e)}en(JCe,Ts);function fEt(e){return this.value&&!e.modified()?this.value:bX(e.fields,e.flat)}function ZCe(e){pt.call(this,[],e),this._pending=null}en(ZCe,pt,{transform(e,t){const n=t.dataflow;return this._pending?OB(this,t,this._pending):dEt(e)?t.StopPropagation:e.values?OB(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ln(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>OB(this,t,ln(r.data)))}});function dEt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function OB(e,t,n){n.forEach(Vi);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function hQ(e){pt.call(this,{},e)}hQ.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};en(hQ,pt,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&vt('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&vt('The "as" parameter has too few output field names.'),c=c||i.map(Go),f=function(p){for(var m=0,g=0,b,y;m<a;++m)if(y=r.get(n[m](p)),y==null)for(b=0;b<d;++b,++g)p[c[g]]=s;else for(b=0;b<d;++b,++g)p[c[g]]=i[b](y)}):(c||vt("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function eAe(e){Ts.call(this,null,hEt,e)}en(eAe,Ts);function hEt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function tAe(e){Ts.call(this,null,pEt,e)}en(tAe,Ts);function pEt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function nAe(e){pt.call(this,null,e)}en(nAe,pt,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function pQ(e){Cb.call(this,e)}pQ.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:tI,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};en(pQ,Cb,{_transform:Cb.prototype.transform,transform(e,t){return this._transform(mEt(e,t),t)}});function mEt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=uc(n).concat(uc(r)),o=yEt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>gEt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function gEt(e,t,n,r){return dd(i=>t(i)===e?n(i):NaN,r,e+"")}function yEt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort($M),t?i.slice(0,t):i}function rAe(e){QM.call(this,e)}en(rAe,QM,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Fn(s),n,t,s);return(e.modified("field")||r&&t.modified(uc(r)))&&vt("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Vi(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function mQ(e){pt.call(this,null,e)}mQ.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};en(mQ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=GCe(e.fields,e.as||[]),s=r?(a,u)=>vEt(a,u,r,i):VM;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Fn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Vi({}));o[Fn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Fn(a)]))}),n}});function vEt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function iAe(e){pt.call(this,null,e)}en(iAe,pt,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function gQ(e){pt.call(this,null,e)}gQ.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const bEt=1e-14;en(gQ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=nQ(i,e.groupby,e.field),o=(e.groupby||[]).map(Go),a=[],u=e.step||.01,l=e.probs||Kd(u/2,1-bEt,u),c=l.length;return s.forEach(f=>{const d=DX(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Vi(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function sAe(e){pt.call(this,null,e)}en(sAe,pt,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Fn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=IX(i);r[Fn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Fn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function yQ(e){pt.call(this,[],e),this.count=0}yQ.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};en(yQ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Fn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*sp()),d<o.length&&d>=u&&(f=o[d],s[Fn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Fn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Fn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Fn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Fn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Fn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Fn(c)])),this.count=a,this.value=n.source=o,n}});function vQ(e){pt.call(this,null,e)}vQ.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};en(vQ,pt,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Kd(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Vi(s)}),n.add=t.add.concat(this.value),n}});function oAe(e){pt.call(this,null,e),this.modified(!0)}en(oAe,pt,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function bQ(e){pt.call(this,null,e)}const aAe=["unit0","unit1"];bQ.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:EX,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:aAe}]};en(bQ,pt,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?sC:iC)(s.unit).offset,a=e.as||aAe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(uc(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,b;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=b=s(m),r&&(p[l]=b=o(g,c)),g<f&&(f=g),b>d&&(d=b))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:iCe({extent:e.extent||dg(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=SX(r),o=this.value||{},a=(n?KTe:YTe)(s,i);return a.unit=pi(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function uAe(e){pt.call(this,rC(),e)}en(uAe,pt,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function lAe(e){pt.call(this,null,e)}en(lAe,pt,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Kw(e.sort)):t.source).map(e.field))}});function xEt(e,t,n,r){const i=$4[e](t,n);return{init:i.init||$v,update:function(s,o){o[r]=i.next(s)}}}const $4={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=$4.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||vt("ntile num must be greater than zero.");const n=$4.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||vt("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=_Et(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function _Et(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const wEt=Object.keys($4);function cAe(e){const t=ln(e.ops),n=ln(e.fields),r=ln(e.params),i=ln(e.aggregate_params),s=ln(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){ln(uc(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],b=r[m],y=i[m]||null,x=Go(g),w=BCe(p,x,s[m]);if(h(g),o.push(w),gn($4,p))a.push(xEt(p,g,b,w));else{if(g==null&&p!=="count"&&vt("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let S=l[x];S||(S=l[x]=[],S.field=g,f.push(S)),S.push(jCe(p,y,w))}}),(c.length||f.length)&&(this.cell=EEt(f,c,d)),this.inputs=Object.keys(u)}const fAe=cAe.prototype;fAe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};fAe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function EEt(e,t,n){e=e.map(u=>zCe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new XX;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function xQ(e){pt.call(this,{},e),this._mlen=0,this._mods=[]}xQ.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:wEt.concat(tI)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};en(xQ,pt,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Kw(e.sort),i=jV(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new cAe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)SEt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=VCe(Fn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function SEt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?GT(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||mc(-1)};t.init();for(let f=0;f<u;++f)TEt(c,o,f,u),s&&CEt(c,l),t.update(c,a[f])}function TEt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function CEt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const AEt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Cb,bin:QX,collect:JX,compare:HCe,countpattern:ZX,cross:eQ,density:tQ,dotbin:rQ,expression:KCe,extent:iQ,facet:QM,field:XCe,filter:oQ,flatten:aQ,fold:uQ,formula:lQ,generate:QCe,impute:cQ,joinaggregate:fQ,kde:dQ,key:JCe,load:ZCe,lookup:hQ,multiextent:eAe,multivalues:tAe,params:nAe,pivot:pQ,prefacet:rAe,project:mQ,proxy:iAe,quantile:gQ,relay:sAe,sample:yQ,sequence:vQ,sieve:oAe,subflow:sQ,timeunit:bQ,tupleindex:uAe,values:lAe,window:xQ},Symbol.toStringTag,{value:"Module"}));function sb(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const kEt=()=>typeof Image<"u"?Image:null;function _Q(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const REt="identity",VS="linear",E1="log",nI="pow",rI="sqrt",JM="symlog",aw="time",uw="utc",Qm="sequential",aC="diverging",HS="quantile",ZM="quantize",eL="threshold",wQ="ordinal",UV="point",dAe="band",EQ="bin-ordinal",xu="continuous",iI="discrete",sI="discretizing",gp="interpolating",SQ="temporal";function IEt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function PEt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function TQ(){const e=EK().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=_Q(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Kd(f).map(b=>m+i*b);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],b,y,x;if(!(m!==m||g!==g)&&(g<m&&(x=m,m=g,g=x),!(g<h[0]||m>r[1-d])))return b=Math.max(0,bb(h,m)-1),y=m===g?b:bb(h,g)-1,m-h[b]>s+1e-10&&++b,d&&(x=b,b=p-y,y=p-x),b>y?void 0:t().slice(b,y+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return TQ().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function hAe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return hAe(t())},e}function NEt(){return hAe(TQ().paddingInner(1))}var DEt=Array.prototype.map;function OEt(e){return DEt.call(e,sc)}const MEt=Array.prototype.slice;function pAe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(bb(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=OEt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=MEt.call(r),n):t.slice()},n.tickFormat=function(r,i){return PEe(e[0],pi(e),r??10,i)},n.copy=function(){return pAe().domain(n.domain()).range(n.range())},n}const YD=new Map,mAe=Symbol("vega_scale");function gAe(e){return e[mAe]=!0,e}function LEt(e){return e&&e[mAe]===!0}function FEt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?IEt(s):s.invertExtent?PEt(s):void 0),s.type=e,gAe(s)};return r.metadata=R0(ln(n)),r}function Ii(e,t,n){return arguments.length>1?(YD.set(e,FEt(e,t,n)),this):yAe(e)?YD.get(e):void 0}Ii(REt,NEe);Ii(VS,vM,xu);Ii(E1,OEe,[xu,E1]);Ii(nI,AK,xu);Ii(rI,qmt,xu);Ii(JM,MEe,xu);Ii(aw,oyt,[xu,SQ]);Ii(uw,ayt,[xu,SQ]);Ii(Qm,NK,[xu,gp]);Ii(`${Qm}-${VS}`,NK,[xu,gp]);Ii(`${Qm}-${E1}`,YEe,[xu,gp,E1]);Ii(`${Qm}-${nI}`,DK,[xu,gp]);Ii(`${Qm}-${rI}`,uyt,[xu,gp]);Ii(`${Qm}-${JM}`,KEe,[xu,gp]);Ii(`${aC}-${VS}`,XEe,[xu,gp]);Ii(`${aC}-${E1}`,QEe,[xu,gp,E1]);Ii(`${aC}-${nI}`,OK,[xu,gp]);Ii(`${aC}-${rI}`,lyt,[xu,gp]);Ii(`${aC}-${JM}`,JEe,[xu,gp]);Ii(HS,LEe,[sI,HS]);Ii(ZM,FEe,sI);Ii(eL,$Ee,sI);Ii(EQ,pAe,[iI,sI]);Ii(wQ,EK,iI);Ii(dAe,TQ,iI);Ii(UV,NEt,iI);function yAe(e){return YD.has(e)}function Qw(e,t){const n=YD.get(e);return n&&n.metadata[t]}function CQ(e){return Qw(e,xu)}function qS(e){return Qw(e,iI)}function zV(e){return Qw(e,sI)}function vAe(e){return Qw(e,E1)}function $Et(e){return Qw(e,SQ)}function bAe(e){return Qw(e,gp)}function xAe(e){return Qw(e,HS)}const BEt=["clamp","base","constant","exponent"];function _Ae(e,t){const n=t[0],r=pi(t)-n;return function(i){return e(n+i*r)}}function tL(e,t,n){return sK(AQ(t||"rgb",n),e)}function wAe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function EAe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?mc(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=Ii(s)().domain([t,n]).range([0,1]),BEt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function AQ(e,t){const n=edt[jEt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function jEt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const UEt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},zEt={accent:fyt,category10:cyt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:dyt,observable10:hyt,paired:pyt,pastel1:myt,pastel2:gyt,set1:yyt,set2:vyt,set3:byt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function SAe(e){if(xt(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function TAe(e,t){for(const n in e)kQ(n,t(e[n]))}const sfe={};TAe(zEt,SAe);TAe(UEt,e=>tL(SAe(e)));function kQ(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(sfe[e]=t,this):sfe[e]}const LN="symbol",VEt="discrete",HEt="gradient",qEt=e=>xt(e)?e.map(t=>String(t)):String(e),WEt=(e,t)=>e[1]-t[1],GEt=(e,t)=>t[1]-e[1];function RQ(e,t,n){let r;return Ri(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(JR(e.domain())/n||1)+1))),un(t)&&(r=t.step,t=t.interval),cn(t)&&(t=e.type===aw?iC(t):e.type==uw?sC(t):vt("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function CAe(e,t,n){let r=e.range(),i=r[0],s=pi(r),o=WEt;if(i>s&&(r=s,s=i,i=r,o=GEt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],pi(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function IQ(e,t){return e.bins?CAe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function AAe(e,t,n,r,i,s){const o=t.type;let a=qEt;if(o===aw||i===aw)a=e.timeFormat(r);else if(o===uw||i===uw)a=e.utcFormat(r);else if(vAe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=kAe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function kAe(e,t,n){const r=IQ(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const VV={[HS]:"quantiles",[ZM]:"thresholds",[eL]:"domain"},RAe={[HS]:"quantiles",[ZM]:"domain"};function IAe(e,t){return e.bins?XEt(e.bins):e.type===E1?kAe(e,t,!0):VV[e.type]?KEt(e[VV[e.type]]()):IQ(e,t)}function YEt(e,t,n){const r=t[RAe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function KEt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function XEt(e){const t=e.slice(0,-1);return t.max=pi(e),t}const QEt=e=>VV[e.type]||e.bins;function PAe(e,t,n,r,i,s,o){const a=RAe[t.type]&&s!==aw&&s!==uw?YEt(e,t,i):AAe(e,t,n,i,s,o);return r===LN&&QEt(t)?JEt(a):r===VEt?ZEt(a):eSt(a)}const JEt=e=>(t,n,r)=>{const i=ofe(r[n+1],ofe(r.max,1/0)),s=afe(t,e),o=afe(i,e);return s&&o?s+" – "+o:o?"< "+o:"≥ "+s},ofe=(e,t)=>e??t,ZEt=e=>(t,n)=>n?e(t):null,eSt=e=>t=>e(t),afe=(e,t)=>Number.isFinite(e)?t(e):null;function tSt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+pi(t),s=i-r;if(e.type===eL){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function nSt(e,t,n,r){const i=r||t.type;return cn(n)&&$Et(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===aw?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===uw?e.utcFormat("%A, %d %B %Y, %X UTC"):PAe(e,t,5,null,n,r,!0)}function NAe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=nSt(e,t,n.format,n.formatType);if(zV(t.type)){const s=IAe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(qS(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(pi(s))}`}}let DAe=0;function rSt(){DAe=0}const KD="p_";function PQ(e){return e&&e.gradient}function OAe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?KD:"";return i||(i=e.id="gradient_"+DAe++,r==="radial"?(e.x1=bm(e.x1,.5),e.y1=bm(e.y1,.5),e.r1=bm(e.r1,0),e.x2=bm(e.x2,.5),e.y2=bm(e.y2,.5),e.r2=bm(e.r2,.5),s=KD):(e.x1=bm(e.x1,0),e.y1=bm(e.y1,0),e.x2=bm(e.x2,1),e.y2=bm(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function bm(e,t){return e??t}function MAe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const ufe={basis:{curve:Pyt},"basis-closed":{curve:Nyt},"basis-open":{curve:Dyt},bundle:{curve:Oyt,tension:"beta",value:.85},cardinal:{curve:Myt,tension:"tension",value:0},"cardinal-open":{curve:Fyt,tension:"tension",value:0},"cardinal-closed":{curve:Lyt,tension:"tension",value:0},"catmull-rom":{curve:$yt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Byt,tension:"alpha",value:.5},"catmull-rom-open":{curve:jyt,tension:"alpha",value:.5},linear:{curve:MK},"linear-closed":{curve:Uyt},monotone:{horizontal:Vyt,vertical:zyt},natural:{curve:Hyt},step:{curve:qyt},"step-after":{curve:Gyt},"step-before":{curve:Wyt}};function NQ(e,t,n){var r=gn(ufe,e)&&ufe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const iSt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},sSt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,oSt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,aSt=/^((\s+,?\s*)|(,\s*))/,uSt=/^[01]/;function WS(e){const t=[];return(e.match(sSt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=iSt[s],a=lSt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function lSt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?uSt:oSt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(aSt);u!==null&&(i+=u[0].length)}return r}const Ab=Math.PI/180,cSt=1e-14,y_=Math.PI/2,Dm=Math.PI*2,rE=Math.sqrt(3)/2;var MB={},LB={},LAe=[].join;function fSt(e,t,n,r,i,s,o,a,u){const l=LAe.call(arguments);if(MB[l])return MB[l];const c=o*Ab,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,b=f/n,y=-f/r,x=d/r,w=g*a+b*u,S=y*a+x*u,C=g*e+b*t,R=y*e+x*t;let O=1/((C-w)*(C-w)+(R-S)*(R-S))-.25;O<0&&(O=0);let M=Math.sqrt(O);s==i&&(M=-M);const L=.5*(w+C)-M*(R-S),V=.5*(S+R)+M*(C-w),D=Math.atan2(S-V,w-L);let z=Math.atan2(R-V,C-L)-D;z<0&&s===1?z+=Dm:z>0&&s===0&&(z-=Dm);const G=Math.ceil(Math.abs(z/(y_+.001))),ee=[];for(let ne=0;ne<G;++ne){const ue=D+ne*z/G,X=D+(ne+1)*z/G;ee[ne]=[L,V,ue,X,n,r,f,d]}return MB[l]=ee}function dSt(e){const t=LAe.call(e);if(LB[t])return LB[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),b=Math.sin(s),y=.5*(s-i),x=Math.sin(y*.5),w=8/3*x*x/Math.sin(y),S=n+p-w*m,C=r+m+w*p,R=n+g,I=r+b,O=R+w*b,M=I-w*g;return LB[t]=[c*S+f*C,d*S+h*C,c*O+f*M,d*O+h*M,c*R+f*I,d*R+h*I]}const Uh=["l",0,0,0,0,0,0,0];function hSt(e,t,n){const r=Uh[0]=e[0];if(r==="a"||r==="A")Uh[1]=t*e[1],Uh[2]=n*e[2],Uh[3]=e[3],Uh[4]=e[4],Uh[5]=e[5],Uh[6]=t*e[6],Uh[7]=n*e[7];else if(r==="h"||r==="H")Uh[1]=t*e[1];else if(r==="v"||r==="V")Uh[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Uh[i]=(i%2==1?t:n)*e[i];return Uh}function B4(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,b=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var y=0,x=t.length;y<x;++y){switch(o=t[y],(i!==1||s!==1)&&(o=hSt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,b=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,b=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":lfe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":lfe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=b,e.closePath();break}a=o}}function lfe(e,t,n,r){const i=fSt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=dSt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const cfe=.5773502691896257,ffe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Dm)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=rE*n,i=r-n*cfe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=rE*n,i=r-n*cfe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=rE*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=rE*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=rE*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=rE*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function FAe(e){return gn(ffe,e)?ffe[e]:pSt(e)}var FB={};function pSt(e){if(!gn(FB,e)){const t=WS(e);FB[e]={draw:function(n,r){B4(n,t,0,0,Math.sqrt(r)/2)}}}return FB[e]}const vv=.448084975506;function mSt(e){return e.x}function gSt(e){return e.y}function ySt(e){return e.width}function vSt(e){return e.height}function xy(e){return typeof e=="function"?e:()=>+e}function c5(e,t,n){return Math.max(t,Math.min(e,n))}function $Ae(){var e=mSt,t=gSt,n=ySt,r=vSt,i=xy(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),b=+r.call(this,c),y=Math.min(g,b)/2,x=c5(+i.call(this,c),0,y),w=c5(+s.call(this,c),0,y),S=c5(+o.call(this,c),0,y),C=c5(+a.call(this,c),0,y);if(u||(u=h=fM()),x<=0&&w<=0&&S<=0&&C<=0)u.rect(p,m,g,b);else{var R=p+g,I=m+b;u.moveTo(p+x,m),u.lineTo(R-w,m),u.bezierCurveTo(R-vv*w,m,R,m+vv*w,R,m+w),u.lineTo(R,I-C),u.bezierCurveTo(R,I-vv*C,R-vv*C,I,R-C,I),u.lineTo(p+S,I),u.bezierCurveTo(p+vv*S,I,p,I-vv*S,p,I-S),u.lineTo(p,m+x),u.bezierCurveTo(p,m+vv*x,p+vv*x,m,p+x,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=xy(c),l):e},l.y=function(c){return arguments.length?(t=xy(c),l):t},l.width=function(c){return arguments.length?(n=xy(c),l):n},l.height=function(c){return arguments.length?(r=xy(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=xy(c),s=f!=null?xy(f):i,a=d!=null?xy(d):i,o=h!=null?xy(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function BAe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var b=Math.hypot(m,g),y=(m/=b)*u,x=(g/=b)*u,w=Math.atan2(g,m);i.moveTo(o-y,a-x),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+y,a+x),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Dm);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=fM()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function oI(e,t){return e??t}const aI=e=>e.x||0,uI=e=>e.y||0,bSt=e=>e.width||0,xSt=e=>e.height||0,_St=e=>(e.x||0)+(e.width||0),wSt=e=>(e.y||0)+(e.height||0),ESt=e=>e.startAngle||0,SSt=e=>e.endAngle||0,TSt=e=>e.padAngle||0,CSt=e=>e.innerRadius||0,ASt=e=>e.outerRadius||0,kSt=e=>e.cornerRadius||0,RSt=e=>oI(e.cornerRadiusTopLeft,e.cornerRadius)||0,ISt=e=>oI(e.cornerRadiusTopRight,e.cornerRadius)||0,PSt=e=>oI(e.cornerRadiusBottomRight,e.cornerRadius)||0,NSt=e=>oI(e.cornerRadiusBottomLeft,e.cornerRadius)||0,DSt=e=>oI(e.size,64),OSt=e=>e.size||1,nL=e=>e.defined!==!1,MSt=e=>FAe(e.shape||"circle"),LSt=kyt().startAngle(ESt).endAngle(SSt).padAngle(TSt).innerRadius(CSt).outerRadius(ASt).cornerRadius(kSt),FSt=sSe().x(aI).y1(uI).y0(wSt).defined(nL),$St=sSe().y(uI).x1(aI).x0(_St).defined(nL),BSt=iSe().x(aI).y(uI).defined(nL),jSt=$Ae().x(aI).y(uI).width(bSt).height(xSt).cornerRadius(RSt,ISt,PSt,NSt),USt=Iyt().type(MSt).size(DSt),zSt=BAe().x(aI).y(uI).defined(nL).size(OSt);function DQ(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function VSt(e,t){return LSt.context(e)(t)}function HSt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?$St:FSt).curve(NQ(r,n.orient,n.tension)).context(e)(t)}function qSt(e,t){const n=t[0],r=n.interpolate||"linear";return BSt.curve(NQ(r,n.orient,n.tension)).context(e)(t)}function uC(e,t,n,r){return jSt.context(e)(t,n,r)}function WSt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function GSt(e,t){return USt.context(e)(t)}function YSt(e,t){return zSt.context(e)(t)}var jAe=1;function UAe(){jAe=1}function OQ(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+jAe++),o=i.clipping[s]||(i.clipping[s]={id:s});return Rr(r)?o.path=r(null):DQ(n)?o.path=uC(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Wa(e){this.clear(),e&&this.union(e)}Wa.prototype={clone(){return new Wa(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function rL(e){this.mark=e,this.bounds=this.bounds||new Wa}function iL(e){rL.call(this,e),this.items=this.items||[]}en(iL,rL);class zAe{constructor(t){this._pending=0,this._loader=t||jM()}pending(){return this._pending}sanitizeURL(t){const n=this;return dfe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(s3(n),r)).catch(()=>(s3(n),null))}loadImage(t){const n=this,r=kEt();return dfe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=gn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>s3(n),o.onerror=()=>s3(n),o.src=s,o}).catch(i=>(s3(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function dfe(e){e._pending+=1}function s3(e){e._pending-=1}function M1(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?KSt(t,r):0))}return e}function KSt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const XSt=Dm-1e-8;let sL,FN,$N,R_,HV,BN,qV,WV;const Uv=(e,t)=>sL.add(e,t),jN=(e,t)=>Uv(FN=e,$N=t),hfe=e=>Uv(e,sL.y1),pfe=e=>Uv(sL.x1,e),v_=(e,t)=>HV*e+qV*t,b_=(e,t)=>BN*e+WV*t,$B=(e,t)=>Uv(v_(e,t),b_(e,t)),BB=(e,t)=>jN(v_(e,t),b_(e,t));function lI(e,t){return sL=e,t?(R_=t*Ab,HV=WV=Math.cos(R_),BN=Math.sin(R_),qV=-BN):(HV=WV=1,R_=BN=qV=0),QSt}const QSt={beginPath(){},closePath(){},moveTo:BB,lineTo:BB,rect(e,t,n,r){R_?($B(e+n,t),$B(e+n,t+r),$B(e,t+r),BB(e,t)):(Uv(e+n,t+r),jN(e,t))},quadraticCurveTo(e,t,n,r){const i=v_(e,t),s=b_(e,t),o=v_(n,r),a=b_(n,r);mfe(FN,i,o,hfe),mfe($N,s,a,pfe),jN(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=v_(e,t),a=b_(e,t),u=v_(n,r),l=b_(n,r),c=v_(i,s),f=b_(i,s);gfe(FN,o,u,c,hfe),gfe($N,a,l,f,pfe),jN(c,f)},arc(e,t,n,r,i,s){if(r+=R_,i+=R_,FN=n*Math.cos(i)+e,$N=n*Math.sin(i)+t,Math.abs(i-r)>XSt)Uv(e-n,t-n),Uv(e+n,t+n);else{const o=l=>Uv(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Dm,r<0&&(r+=Dm),i=i%Dm,i<0&&(i+=Dm),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Dm,a=r-r%y_,u=0;u<4&&a>i;++u,a-=y_)o(a);else for(a=r-r%y_+y_,u=0;u<4&&a<i;++u,a=a+y_)o(a)}}};function mfe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function gfe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>cSt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(yfe(u,e,t,n,r)),0<l&&l<1&&i(yfe(l,e,t,n,r))}function yfe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var ob=(ob=sb(1,1))?ob.getContext("2d"):null;const GV=new Wa;function MQ(e){return function(t,n){if(!ob)return!0;e(ob,t),GV.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=GV;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(ob.isPointInPath(u,a))return!0;return!1}}function LQ(e,t){return t.contains(e.x||0,e.y||0)}function VAe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(GV.set(n,r,n+i,r+s))}function HAe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return LE(t,n,r,i,s)}function LE(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function GS(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Zp(e,t){return e??t}function vfe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function JSt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Zp(t.x1,.5)*r,n.y1+Zp(t.y1,.5)*i,Math.max(r,i)*Zp(t.r1,0),n.x1+Zp(t.x2,.5)*r,n.y1+Zp(t.y2,.5)*i,Math.max(r,i)*Zp(t.r2,.5));else{const o=Zp(t.x1,0),a=Zp(t.y1,0),u=Zp(t.x2,1),l=Zp(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=sb(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=vfe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return vfe(s,t.stops)}function qAe(e,t,n){return PQ(n)?JSt(e,n,t.bounds):n}function XD(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=qAe(e,t,t.fill),!0):!1}var ZSt=[];function YS(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=qAe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||ZSt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function eTt(e,t){return e.zindex-t.zindex||e.index-t.index}function FQ(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(eTt)}function P0(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=FQ(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function QD(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=FQ(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function $Q(e){return function(t,n,r){P0(n,i=>{(!r||r.intersects(i.bounds))&&WAe(e,t,i,i)})}}function tTt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&WAe(e,t,n.items[0],n.items)}}function WAe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(GS(t,n),n.fill&&XD(t,n,i)&&t.fill(),n.stroke&&YS(t,n,i)&&t.stroke()))}function oL(e){return e=e||rp,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,QD(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function cI(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function BQ(e){return oL(cI(e))}function B_(e,t){return"translate("+e+","+t+")"}function jQ(e){return"rotate("+e+")"}function nTt(e,t){return"scale("+e+","+t+")"}function GAe(e){return B_(e.x||0,e.y||0)}function rTt(e){return B_(e.x||0,e.y||0)+(e.angle?" "+jQ(e.angle):"")}function iTt(e){return B_(e.x||0,e.y||0)+(e.angle?" "+jQ(e.angle):"")+(e.scaleX||e.scaleY?" "+nTt(e.scaleX||1,e.scaleY||1):"")}function UQ(e,t,n){function r(o,a){o("transform",rTt(a)),o("d",t(null,a))}function i(o,a){return t(lI(o,a.angle),a),M1(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Ab),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:$Q(s),pick:BQ(s),isect:n||MQ(s)}}var sTt=UQ("arc",VSt);function oTt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function aTt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function uTt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function zQ(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(lI(u),c),M1(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=cI(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:tTt(s),pick:a,isect:LQ,tip:n}}var lTt=zQ("area",HSt,oTt);function cTt(e,t){var n=t.clip;e.save(),Rr(n)?(e.beginPath(),n(e),e.clip()):YAe(e,t.group)}function YAe(e,t){e.beginPath(),DQ(t)?uC(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function KAe(e){const t=Zp(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function fTt(e,t){e("transform",GAe(t))}function XAe(e,t){const n=KAe(t);e("d",uC(null,t,n,n))}function dTt(e,t){e("class","background"),e("aria-hidden",!0),XAe(e,t)}function hTt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?XAe(e,t):e("d","")}function pTt(e,t,n){const r=t.clip?OQ(n,t,t):null;e("clip-path",r)}function mTt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),M1(e,t),e.translate(t.x||0,t.y||0)}function j4(e,t,n,r){const i=KAe(t);e.beginPath(),uC(e,t,(n||0)+i,(r||0)+i)}const gTt=cI(j4),yTt=cI(j4,!1),vTt=cI(j4,!0);function bTt(e,t,n,r){P0(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(j4(e,i,s,o),GS(e,i),i.fill&&XD(e,i,u)&&e.fill(),i.stroke&&!a&&YS(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&YAe(e,i),n&&n.translate(-s,-o),P0(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(j4(e,i,s,o),GS(e,i),YS(e,i,u)&&e.stroke())})}function xTt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return QD(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&DQ(u)&&!vTt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,b=t.interactive!==!1;return b&&g&&u.stroke&&yTt(e,u,o,a)?(e.restore(),u):(l=QD(u,y=>_Tt(y,c,f)?this.pick(y,n,r,c,f):null),!l&&b&&(u.fill||!g&&u.stroke)&&gTt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function _Tt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var wTt={type:"group",tag:"g",nested:!1,attr:fTt,bound:mTt,draw:bTt,pick:xTt,isect:VAe,content:pTt,background:dTt,foreground:hTt},U4={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function VQ(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function HQ(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function qQ(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function aL(e,t){return e==="center"?t/2:e==="right"?t:0}function uL(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function ETt(e,t,n){const r=VQ(t,n),i=HQ(t,r),s=qQ(t,r),o=(t.x||0)-aL(t.align,i),a=(t.y||0)-uL(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,U4["xmlns:xlink"],"xlink:href"),e("transform",B_(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function STt(e,t){const n=t.image,r=HQ(t,n),i=qQ(t,n),s=(t.x||0)-aL(t.align,r),o=(t.y||0)-uL(t.baseline,i);return e.set(s,o,s+r,o+i)}function TTt(e,t,n){P0(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=VQ(r,this);let s=HQ(r,i),o=qQ(r,i);if(s===0||o===0)return;let a=(r.x||0)-aL(r.align,s),u=(r.y||0)-uL(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(GS(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var CTt={type:"image",tag:"image",nested:!1,attr:ETt,bound:STt,draw:TTt,pick:oL(),isect:rp,get:VQ,xOffset:aL,yOffset:uL},ATt=zQ("line",qSt,aTt);function kTt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",iTt(t)),e("d",t.path)}function UN(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Ab,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=WS(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),B4(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):B4(e,u,r,i,s,o)}function RTt(e,t){return UN(lI(e,t.angle),t)?e.set(0,0,0,0):M1(e,t,!0)}var ITt={type:"path",tag:"path",nested:!1,attr:kTt,bound:RTt,draw:$Q(UN),pick:BQ(UN),isect:MQ(UN)};function PTt(e,t){e("d",uC(null,t))}function NTt(e,t){var n,r;return M1(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function bfe(e,t){e.beginPath(),uC(e,t)}var DTt={type:"rect",tag:"path",nested:!1,attr:PTt,bound:NTt,draw:$Q(bfe),pick:BQ(bfe),isect:VAe};function OTt(e,t){e("transform",GAe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function MTt(e,t){var n,r;return M1(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function QAe(e,t,n){var r,i,s,o;return t.stroke&&YS(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function LTt(e,t,n){P0(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&QAe(e,r,i)&&(GS(e,r),e.stroke())}})}function FTt(e,t,n,r){return e.isPointInStroke?QAe(e,t,1)&&e.isPointInStroke(n,r):!1}var $Tt={type:"rule",tag:"line",nested:!1,attr:OTt,bound:MTt,draw:LTt,pick:oL(FTt),isect:HAe},BTt=UQ("shape",WSt),jTt=UQ("symbol",GSt,LQ);const xfe=MTe();var nh={height:kg,measureWidth:WQ,estimateWidth:JD,width:JD,canvas:JAe};JAe(!0);function JAe(e){nh.width=e&&ob?WQ:JD}function JD(e,t){return ZAe(Rb(e,t),kg(e))}function ZAe(e,t){return~~(.8*e.length*t)}function WQ(e,t){return kg(e)<=0||!(t=Rb(e,t))?0:e3e(t,lL(e))}function e3e(e,t){const n=`(${t}) ${e}`;let r=xfe.get(n);return r===void 0&&(ob.font=t,r=ob.measureText(e).width,xfe.set(n,r)),r}function kg(e){return e.fontSize!=null?+e.fontSize||0:11}function kb(e){return e.lineHeight!=null?e.lineHeight:kg(e)+2}function UTt(e){return xt(e)?e.length>1?e:e[0]:e}function fI(e){return UTt(e.lineBreak&&e.text&&!xt(e.text)?e.text.split(e.lineBreak):e.text)}function GQ(e){const t=fI(e);return(xt(t)?t.length-1:0)*kb(e)}function Rb(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?VTt(e,n):n}function zTt(e){if(nh.width===WQ){const t=lL(e);return n=>e3e(n,t)}else if(nh.width===JD){const t=kg(e);return n=>ZAe(n,t)}else return t=>nh.width(e,t)}function VTt(e,t){var n=+e.limit,r=zTt(e);if(r(t)<n)return t;var i=e.ellipsis||"…",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function dI(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function lL(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+kg(e)+"px "+dI(e,t)}function YQ(e){var t=e.baseline,n=kg(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*kb(e):t==="line-bottom"?.29*n-.5*kb(e):0)}const HTt={left:"start",center:"middle",right:"end"},Mk=new Wa;function cL(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-y_,t+=r*Math.cos(i),n+=r*Math.sin(i)),Mk.x1=t,Mk.y1=n,Mk}function qTt(e,t){var n=t.dx||0,r=(t.dy||0)+YQ(t),i=cL(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",HTt[t.align]||"start"),a?(u=B_(s,o)+" "+jQ(a),(n||r)&&(u+=" "+B_(n,r))):u=B_(s+n,o+r),e("transform",u)}function KQ(e,t,n){var r=nh.height(t),i=t.align,s=cL(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+YQ(t)-Math.round(.8*r),c=fI(t),f;if(xt(c)?(r+=kb(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,nh.width(t,h)),0)):f=nh.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Ab,o,a);else if(n===2)return e.rotatedPoints(t.angle*Ab,o,a);return e}function WTt(e,t,n){P0(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=lL(r),e.textAlign=r.align||"left",s=cL(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Ab),o=a=0),o+=r.dx||0,a+=(r.dy||0)+YQ(r),c=fI(r),GS(e,r),xt(c))for(l=kb(r),u=0;u<c.length;++u)f=Rb(r,c[u]),r.fill&&XD(e,r,i)&&e.fillText(f,o,a),r.stroke&&YS(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Rb(r,c),r.fill&&XD(e,r,i)&&e.fillText(f,o,a),r.stroke&&YS(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function GTt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=cL(t),a=o.x1,u=o.y1,l=KQ(Mk,t,1),c=-t.angle*Ab,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function YTt(e,t){const n=KQ(Mk,e,2);return LE(t,n[0],n[1],n[2],n[3])||LE(t,n[0],n[1],n[4],n[5])||LE(t,n[4],n[5],n[6],n[7])||LE(t,n[2],n[3],n[6],n[7])}var KTt={type:"text",tag:"text",nested:!1,attr:qTt,bound:KQ,draw:WTt,pick:oL(GTt),isect:YTt},XTt=zQ("trail",YSt,uTt),mh={arc:sTt,area:lTt,group:wTt,image:CTt,line:ATt,path:ITt,rect:DTt,rule:$Tt,shape:BTt,symbol:jTt,text:KTt,trail:XTt};function YV(e,t,n){var r=mh[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Wa),e,n)}var _fe={mark:null};function t3e(e,t,n){var r=mh[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(_fe.mark=e,l=_fe),c=YV(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Wa,o)for(a=0,u=s.length;a<u;++a)t.union(YV(s[a],i,n));return e.bounds=t}const QTt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function n3e(e,t){return JSON.stringify(e,QTt,t)}function r3e(e){const t=typeof e=="string"?JSON.parse(e):e;return i3e(t)}function i3e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&i3e(n[i]);return t&&t3e(e),e}class s3e{constructor(t){arguments.length?this.root=r3e(t):(this.root=wfe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new iL(this.root)])}toJSON(t){return n3e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=wfe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function wfe(e,t){const n={bounds:new Wa,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function zv(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function XQ(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function fu(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=zv(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Wh(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function o3e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function fL(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function JTt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=mh[i.marktype]).tip){for(o=fL(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let QQ=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||jM(),this._tooltip=n||ZTt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=zv(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=JTt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function ZTt(e,t,n,r){e.element().setAttribute("title",r||"")}class hI{constructor(t){this._el=null,this._bgcolor=null,this._loader=new zAe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const eCt="keydown",tCt="keypress",nCt="keyup",a3e="dragenter",zN="dragleave",u3e="dragover",KV="pointerdown",rCt="pointerup",ZD="pointermove",VN="pointerout",l3e="pointerover",XV="mousedown",iCt="mouseup",c3e="mousemove",eO="mouseout",f3e="mouseover",tO="click",sCt="dblclick",oCt="wheel",d3e="mousewheel",nO="touchstart",rO="touchmove",iO="touchend",aCt=[eCt,tCt,nCt,a3e,zN,u3e,KV,rCt,ZD,VN,l3e,XV,iCt,c3e,eO,f3e,tO,sCt,oCt,d3e,nO,rO,iO],QV=ZD,Lk=eO,JV=tO;class pI extends QQ{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=aCt,this.pointermove=Sfe([ZD,c3e],[l3e,f3e],[VN,eO]),this.dragover=Sfe([u3e],[a3e],[zN]),this.pointerout=Tfe([VN,eO]),this.dragleave=Tfe([zN])}initialize(t,n,r){return this._canvas=t&&XQ(t,"canvas"),[tO,XV,KV,ZD,VN,zN].forEach(i=>Efe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(d3e,t)}pointerdown(t){this._down=this._active,this.fire(KV,t)}mousedown(t){this._down=this._active,this.fire(XV,t)}click(t){this._down===this._active&&(this.fire(tO,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(nO,t,!0)}touchmove(t){this.fire(rO,t,!0)}touchend(t){this.fire(iO,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===JV&&i&&i.href?this.handleHref(n,i,i.href):(t===QV||t===Lk)&&this.handleTooltip(n,i,t!==Lk),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Efe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=fL(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return mh[t.marktype].pick.call(this,o,t,n,r,i,s)}}const uCt=e=>e===nO||e===rO||e===iO?[nO,rO,iO]:[e];function Efe(e,t){uCt(t).forEach(n=>lCt(e,n))}function lCt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function rk(e,t,n){t.forEach(r=>e.fire(r,n))}function Sfe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?rk(this,e,r):((!i||!i.exit)&&rk(this,n,r),this._active=s,rk(this,t,r),rk(this,e,r))}}function Tfe(e){return function(t){rk(this,e,t),this._active=null}}function cCt(){return typeof window<"u"&&window.devicePixelRatio||1}function fCt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?cCt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class sO extends hI{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Wa,this._tempb=new Wa}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:sb(1,1,this._options.type),t&&this._canvas&&(Wh(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)fCt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||vt("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=dCt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):hCt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=mh[n.marktype];n.clip&&cTt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const dCt=(e,t,n)=>new Wa().set(0,0,t,n).translate(-e[0],-e[1]);function hCt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class h3e extends QQ{constructor(t,n){super(t,n);const r=this;r._hrefHandler=jB(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=jB(r,(i,s)=>{r.handleTooltip(i,s,i.type!==Lk)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(JV,this._hrefHandler),i.removeEventListener(QV,this._tooltipHandler),i.removeEventListener(Lk,this._tooltipHandler)),this._svg=i=t&&XQ(t,"svg"),i&&(i.addEventListener(JV,this._hrefHandler),i.addEventListener(QV,this._tooltipHandler),i.addEventListener(Lk,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:jB(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const jB=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},p3e="aria-hidden",JQ="aria-label",ZQ="role",eJ="aria-roledescription",m3e="graphics-object",tJ="graphics-symbol",g3e=(e,t,n)=>({[ZQ]:e,[eJ]:t,[JQ]:n||void 0}),pCt=R0(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Cfe={axis:{desc:"axis",caption:yCt},legend:{desc:"legend",caption:vCt},"title-text":{desc:"title",caption:e=>`Title text '${kfe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${kfe(e)}'`}},Afe={ariaRole:ZQ,ariaRoleDescription:eJ,description:JQ};function y3e(e,t){const n=t.aria===!1;if(e(p3e,n||void 0),n||t.description==null)for(const r in Afe)e(Afe[r],void 0);else{const r=t.mark.marktype;e(JQ,t.description),e(ZQ,t.ariaRole||(r==="group"?m3e:tJ)),e(eJ,t.ariaRoleDescription||`${r} mark`)}}function v3e(e){return e.aria===!1?{[p3e]:!0}:pCt[e.role]?null:Cfe[e.role]?gCt(e,Cfe[e.role]):mCt(e)}function mCt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return g3e(n?m3e:tJ,`${t} mark container`,e.description)}function gCt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return g3e(t.role||tJ,t.desc,n.description||r(n))}catch{return null}}function kfe(e){return ln(e.text).join(" ")}function yCt(e){const t=e.datum,n=e.orient,r=t.title?b3e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${qS(a)?"discrete":a} scale with ${NAe(o,s,e)}`}function vCt(e){const t=e.datum,n=t.title?b3e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return xCt(r)+(n?` titled '${n}'`:"")+` for ${bCt(s)} with ${NAe(u,a,e)}`}function b3e(e){try{return ln(pi(e.items).items[0].text).join(" ")}catch{return null}}function bCt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+pi(e)}function xCt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const x3e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),_Ct=e=>x3e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function nJ(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${_Ct(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=x3e(u),a),toString:()=>e};return a}const _3e=e=>w3e(nJ(),e)+"";function w3e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):w3e(e,r)}return e.close()}const oO={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},aO={blend:"mix-blend-mode"},E3e={fill:"none","stroke-miterlimit":10},o3=0,Rfe="http://www.w3.org/2000/xmlns/",cu=U4.xmlns;class rJ extends hI{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=fu(t,0,"svg",cu),this._svg.setAttributeNS(Rfe,"xmlns",cu),this._svg.setAttributeNS(Rfe,"xmlns:xlink",U4["xmlns:xlink"]),this._svg.setAttribute("version",U4.version),this._svg.setAttribute("class","marks"),Wh(t,1),this._root=fu(this._svg,o3,"g",cu),Vv(this._root,E3e),Wh(this._svg,o3+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Vv(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=fu(t,o3,"rect",cu),Vv(r,{width:this._width,height:this._height,fill:n}));const i=_3e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Wh(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=mh[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Ife(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Ife(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=mh[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Pfe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Wh(c,0),n._svg;c.setAttribute("class",o3e(n));const f=v3e(n);for(const m in f)Kc(c,m,f[m]);l||Kc(c,"pointer-events",u),Kc(c,"clip-path",n.clip?OQ(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),b=Pfe(m,c,d,a.tag,s);g&&(this._update(a,b,m),l&&SCt(this,b,m,i)),d=b,++h};return a.nested?n.items.length&&p(n.items[0]):P0(n,p),Wh(c,h),c}_update(t,n,r){qy=n,Jl=n.__values__,y3e(Fk,r),t.attr(Fk,r,this);const i=CCt[t.type];i&&i.call(this,t,n,r),qy&&this.style(qy,r)}style(t,n){if(n!=null){for(const r in oO){let i=r==="font"?dI(n):n[r];if(i===Jl[r])continue;const s=oO[r];i==null?t.removeAttribute(s):(PQ(i)&&(i=OAe(i,this._defs.gradient,S3e())),t.setAttribute(s,i+"")),Jl[r]=i}for(const r in aO)HN(t,aO[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=fu(t,o3+1,"defs",cu)),i=wCt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=fu(t,o3+1,"defs",cu)),i=ECt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Wh(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Ife(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function wCt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=fu(e,n++,"pattern",cu);Vv(o,{id:KD+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=fu(o,0,"rect",cu),Vv(o,{width:1,height:1,fill:`url(${S3e()}#${t.id})`}),e=fu(e,n++,"radialGradient",cu),Vv(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=fu(e,n++,"linearGradient",cu),Vv(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=fu(e,r,"stop",cu),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Wh(e,r),n}function ECt(e,t,n){let r;return e=fu(e,n,"clipPath",cu),e.setAttribute("id",t.id),t.path?(r=fu(e,0,"path",cu),r.setAttribute("d",t.path)):(r=fu(e,0,"rect",cu),Vv(r,{x:0,y:0,width:t.width,height:t.height})),Wh(e,1),n+1}function SCt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;P0(n,o=>{i=e.mark(t,o,i,r),++s}),Wh(t,1+s)}function Pfe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=zv(o,r,cu),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=zv(o,"path",cu);s.appendChild(a),a.__data__=e;const u=zv(o,"g",cu);s.appendChild(u),u.__data__=e;const l=zv(o,"path",cu);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||TCt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function TCt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let qy=null,Jl=null;const CCt={group(e,t,n){const r=qy=t.childNodes[2];Jl=r.__values__,e.foreground(Fk,n,this),Jl=t.__values__,qy=t.childNodes[1],e.content(Fk,n,this);const i=qy=t.childNodes[0];e.background(Fk,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Jl.events&&(Kc(r,"pointer-events",s),Kc(i,"pointer-events",s),Jl.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Kc(r,"display",null),this.style(i,n),Kc(i,"stroke",null),o&&(n.fill=null),Jl=r.__values__,this.style(r,n),o&&(n.fill=o),qy=null}else Kc(r,"display","none")},image(e,t,n){n.smooth===!1?(HN(t,"image-rendering","optimizeSpeed"),HN(t,"image-rendering","pixelated")):HN(t,"image-rendering",null)},text(e,t,n){const r=fI(n);let i,s,o,a;xt(r)?(s=r.map(u=>Rb(n,u)),i=s.join(`
`),i!==Jl.text&&(Wh(t,0),o=t.ownerDocument,a=kb(n),s.forEach((u,l)=>{const c=zv(o,"tspan",cu);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Jl.text=i)):(s=Rb(n,r),s!==Jl.text&&(t.textContent=s,Jl.text=s)),Kc(t,"font-family",dI(n)),Kc(t,"font-size",kg(n)+"px"),Kc(t,"font-style",n.fontStyle),Kc(t,"font-variant",n.fontVariant),Kc(t,"font-weight",n.fontWeight)}};function Fk(e,t,n){t!==Jl[e]&&(n?ACt(qy,e,t,n):Kc(qy,e,t),Jl[e]=t)}function HN(e,t,n){n!==Jl[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Jl[t]=n)}function Vv(e,t){for(const n in t)Kc(e,n,t[n])}function Kc(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function ACt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function S3e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class T3e extends hI{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=nJ();n.open("svg",kr({},U4,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",E3e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=mh[n.marktype],i=r.tag,s=[y3e,r.attr];t.open("g",{class:o3e(n),"clip-path":n.clip?OQ(this,n,n.group):null},v3e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=fI(a);if(xt(l)){const c={x:0,dy:kb(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Rb(a,l[f])).close()}else t.text(Rb(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),P0(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):P0(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&kCt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:KD+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function kCt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=dI(t),e["font-size"]=kg(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in oO){let a=t[o];const u=oO[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(PQ(a)&&(a=OAe(a,i.gradient,"")),e[u]=a)}for(const o in aO){const a=t[o];a!=null&&(s=s||[],s.push(`${aO[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const r0={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function RCt(e){r0.svgMarkTypes=e.svgMarkTypes??["text"],r0.svgOnTop=e.svgOnTop??!0,r0.debug=e.debug??!1}class ZV extends hI{constructor(t){super(t),this._svgRenderer=new rJ(t),this._canvasRenderer=new sO(t)}initialize(t,n,r,i,s){this._root_el=fu(t,0,"div");const o=fu(this._root_el,0,"div"),a=fu(this._root_el,1,"div");return this._root_el.style.position="relative",r0.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=r0.svgOnTop?a:o,this._canvasEl=r0.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return r0.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!r0.svgMarkTypes.includes(s));this._svgRenderer.render(t,r0.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return r0.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class C3e extends pI{constructor(t,n){super(t,n)}initialize(t,n,r){const i=fu(fu(t,0,"div"),r0.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const A3e="canvas",k3e="hybrid",R3e="png",I3e="svg",P3e="none",Hv={Canvas:A3e,PNG:R3e,SVG:I3e,Hybrid:k3e,None:P3e},lw={};lw[A3e]=lw[R3e]={renderer:sO,headless:sO,handler:pI};lw[I3e]={renderer:rJ,headless:T3e,handler:h3e};lw[k3e]={renderer:ZV,headless:ZV,handler:C3e};lw[P3e]={};function dL(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(lw[e]=t,this):lw[e]}function N3e(e,t,n){const r=[],i=new Wa().union(t),s=e.marktype;return s?D3e(e,i,n,r):s==="group"?O3e(e,i,n,r):vt("Intersect scene must be mark node or group item.")}function D3e(e,t,n,r){if(ICt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)O3e(i[a],t,n,r);else for(const u=mh[s].isect;a<o;++a){const l=i[a];M3e(l,t,u)&&r.push(l)}}return r}function ICt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function O3e(e,t,n,r){n&&n(e.mark)&&M3e(e,t,mh.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)D3e(i[u],t,n,r);t.translate(o,a)}return r}function M3e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const UB=new Wa;function L3e(e){const t=e.clip;if(Rr(t))t(lI(UB.clear()));else if(t)UB.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(UB)}const PCt=1e-9;function iJ(e,t,n){return e===t?!0:n==="path"?F3e(e,t):e instanceof Date&&t instanceof Date?+e==+t:Ri(e)&&Ri(t)?Math.abs(e-t)<=PCt:!e||!t||!un(e)&&!un(t)?e==t:NCt(e,t)}function F3e(e,t){return iJ(WS(e),WS(t))}function NCt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!iJ(e[i],t[i],i))return!1;return typeof e==typeof t}function DCt(){UAe(),rSt()}const KS="top",f0="left",m0="right",Ib="bottom",OCt="top-left",MCt="top-right",LCt="bottom-left",FCt="bottom-right",sJ="start",eH="middle",Qc="end",$Ct="x",BCt="y",hL="group",oJ="axis",aJ="title",jCt="frame",UCt="scope",uJ="legend",$3e="row-header",B3e="row-footer",j3e="row-title",U3e="column-header",z3e="column-footer",V3e="column-title",zCt="padding",VCt="symbol",H3e="fit",q3e="fit-x",W3e="fit-y",HCt="pad",lJ="none",f5="all",tH="each",cJ="flush",qv="column",Wv="row";function G3e(e){pt.call(this,null,e)}en(G3e,pt,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=mh[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=d5(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===hL||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(d5(l,o))),r.role){case oJ:case uJ:case aJ:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(d5(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(d5(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return L3e(r),t.modifies("bounds")}});function d5(e,t,n){return t(e.bounds.clear(),e,n)}const Nfe=":vega_identifier:";function fJ(e){pt.call(this,0,e)}fJ.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};en(fJ,pt,{transform(e,t){const n=qCt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function qCt(e){return e._signals[Nfe]||(e._signals[Nfe]=e.add(0))}function Y3e(e){pt.call(this,null,e)}en(Y3e,pt,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,WCt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===hL?iL:rL;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function WCt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function K3e(e){pt.call(this,null,e)}const Dfe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!X3e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},X3e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Ofe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(X3e(i,s=e[n].bounds,t))return!0},GCt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},YCt=(e,t,n)=>{var r=e.range(),i=new Wa;return t===KS||t===Ib?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Mfe=e=>(e.forEach(t=>t.opacity=1),e),Lfe=(e,t)=>e.reflow(t.modified()).modifies("opacity");en(K3e,pt,{transform(e,t){const n=Dfe[e.method]||Dfe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Mfe(i),t=Lfe(t,e)),t;if(i=i.filter(GCt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Mfe(i),t=Lfe(t,e),s.length>=3&&Ofe(s,r)){do s=n(s,r);while(s.length>=3&&Ofe(s,r));s.length<3&&!pi(i).opacity&&(s.length>1&&(pi(s).opacity=0),pi(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=YCt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function Q3e(e){pt.call(this,null,e)}en(Q3e,pt,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Xl=new Wa;function FE(e,t,n){return e[t]===n?0:(e[t]=n,1)}function KCt(e){var t=e.items[0].orient;return t===f0||t===m0}function XCt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function QCt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=XCt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,b=p&&GQ(p),y=0,x=0,w,S;switch(Xl.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case KS:y=f||0,x=-c,S=Math.max(d,Math.min(h,-g.y1)),g.add(0,-S).add(l,0),p&&h5(e,p,S,m,b,0,-1,g);break;case f0:y=-c,x=f||0,S=Math.max(d,Math.min(h,-g.x1)),g.add(-S,0).add(0,l),p&&h5(e,p,S,m,b,1,-1,g);break;case m0:y=n+c,x=f||0,S=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(S,l),p&&h5(e,p,S,m,b,1,1,g);break;case Ib:y=f||0,x=r+c,S=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,S),p&&h5(e,p,S,m,0,0,1,g);break;default:y=i.x,x=i.y}return M1(g.translate(y,x),i),FE(i,"x",y+o)|FE(i,"y",x+o)&&(i.bounds=Xl,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function h5(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Ffe=(e,t)=>Math.floor(Math.min(e,t)),$fe=(e,t)=>Math.ceil(Math.max(e,t));function JCt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===hL)switch(i.role){case oJ:case uJ:case aJ:break;case $3e:o.rowheaders.push(...s);break;case B3e:o.rowfooters.push(...s);break;case U3e:o.colheaders.push(...s);break;case z3e:o.colfooters.push(...s);break;case j3e:o.rowtitle=s[0];break;case V3e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function ZCt(e){return new Wa().set(0,0,e.width||0,e.height||0)}function eAt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function uo(e,t,n){const r=un(e)?e[t]:e;return r??(n!==void 0?n:0)}function Bfe(e){return e<0?Math.ceil(-e):0}function J3e(e,t,n){var r=!n.nodirty,i=n.bounds===cJ?ZCt:eAt,s=Xl.set(0,0,0,0),o=uo(n.align,qv),a=uo(n.align,Wv),u=uo(n.padding,qv),l=uo(n.padding,Wv),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),b=Array(f),y=0,x=Array(d),w=Array(d),S=Array(d),C,R,I,O,M,L,V,D,j,z,G;for(R=0;R<c;++R)p[R]=0;for(R=0;R<f;++R)b[R]=0;for(R=0;R<d;++R)L=t[R],M=S[R]=i(L),L.x=L.x||0,x[R]=0,L.y=L.y||0,w[R]=0,I=R%c,O=~~(R/c),m=Math.max(m,V=Math.ceil(M.x2)),y=Math.max(y,D=Math.ceil(M.y2)),p[I]=Math.max(p[I],V),b[O]=Math.max(b[O],D),h[R]=u+Bfe(M.x1),g[R]=l+Bfe(M.y1),r&&e.dirty(t[R]);for(R=0;R<d;++R)R%c===0&&(h[R]=0),R<c&&(g[R]=0);if(o===tH)for(I=1;I<c;++I){for(G=0,R=I;R<d;R+=c)G<h[R]&&(G=h[R]);for(R=I;R<d;R+=c)h[R]=G+p[I-1]}else if(o===f5){for(G=0,R=0;R<d;++R)R%c&&G<h[R]&&(G=h[R]);for(R=0;R<d;++R)R%c&&(h[R]=G+m)}else for(o=!1,I=1;I<c;++I)for(R=I;R<d;R+=c)h[R]+=p[I-1];if(a===tH)for(O=1;O<f;++O){for(G=0,R=O*c,C=R+c;R<C;++R)G<g[R]&&(G=g[R]);for(R=O*c;R<C;++R)g[R]=G+b[O-1]}else if(a===f5){for(G=0,R=c;R<d;++R)G<g[R]&&(G=g[R]);for(R=c;R<d;++R)g[R]=G+y}else for(a=!1,O=1;O<f;++O)for(R=O*c,C=R+c;R<C;++R)g[R]+=b[O-1];for(j=0,R=0;R<d;++R)j=h[R]+(R%c?j:0),x[R]+=j-t[R].x;for(I=0;I<c;++I)for(z=0,R=I;R<d;R+=c)z+=g[R],w[R]+=z-t[R].y;if(o&&uo(n.center,qv)&&f>1)for(R=0;R<d;++R)M=o===f5?m:p[R%c],j=M-S[R].x2-t[R].x-x[R],j>0&&(x[R]+=j/2);if(a&&uo(n.center,Wv)&&c!==1)for(R=0;R<d;++R)M=a===f5?y:b[~~(R/c)],z=M-S[R].y2-t[R].y-w[R],z>0&&(w[R]+=z/2);for(R=0;R<d;++R)s.union(S[R].translate(x[R],w[R]));switch(j=uo(n.anchor,$Ct),z=uo(n.anchor,BCt),uo(n.anchor,qv)){case Qc:j-=s.width();break;case eH:j-=s.width()/2}switch(uo(n.anchor,Wv)){case Qc:z-=s.height();break;case eH:z-=s.height()/2}for(j=Math.round(j),z=Math.round(z),s.clear(),R=0;R<d;++R)t[R].mark.bounds.clear();for(R=0;R<d;++R)L=t[R],L.x+=x[R]+=j,L.y+=w[R]+=z,s.union(L.mark.bounds.union(L.bounds.translate(x[R],w[R]))),r&&e.dirty(L);return s}function tAt(e,t,n){var r=JCt(t),i=r.marks,s=n.bounds===cJ?nAt:rAt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const b=J3e(e,i,n);b.empty()&&b.set(0,0,0,0),r.rowheaders&&(m=uo(n.headerBand,Wv,null),c=p5(e,r.rowheaders,i,a,u,-uo(o,"rowHeader"),Ffe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=uo(n.headerBand,qv,null),f=p5(e,r.colheaders,i,a,a,-uo(o,"columnHeader"),Ffe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=uo(n.footerBand,Wv,null),d=p5(e,r.rowfooters,i,a,u,uo(o,"rowFooter"),$fe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=uo(n.footerBand,qv,null),h=p5(e,r.colfooters,i,a,a,uo(o,"columnFooter"),$fe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=uo(n.titleAnchor,Wv),g=uo(o,"rowTitle"),g=p===Qc?d+g:c-g,m=uo(n.titleBand,Wv,.5),jfe(e,r.rowtitle,g,0,b,m)),r.coltitle&&(p=uo(n.titleAnchor,qv),g=uo(o,"columnTitle"),g=p===Qc?h+g:f-g,m=uo(n.titleBand,qv,.5),jfe(e,r.coltitle,g,1,b,m))}function nAt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function rAt(e,t){return e.bounds[t]}function p5(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,b,y,x,w,S,C,R,I,O;if(!p)return m;for(b=c;b<p;b+=f)n[b]&&(m=o(m,u(n[b],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,y=0,w=t.length;y<w;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(b=c,y=0,w=t.length;y<w;++y,b+=f){for(C=t[y],S=C.mark.bounds,x=b;x>=0&&(R=n[x])==null;x-=d);a?(I=h==null?R.x:Math.round(R.bounds.x1+h*R.bounds.width()),O=m):(I=m,O=h==null?R.y:Math.round(R.bounds.y1+h*R.bounds.height())),S.union(C.bounds.translate(I-(C.x||0),O-(C.y||0))),C.x=I,C.y=O,e.dirty(C),g=o(g,S[l])}return g}function jfe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function iAt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function sAt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function oAt(e,t,n,r,i,s,o){const a=iAt(n,t),u=sAt(e,a("offset",0)),l=a("anchor",sJ),c=l===Qc?1:l===eH?.5:0,f={align:tH,bounds:a("bounds",cJ),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case f0:f.anchor={x:Math.floor(r.x1)-u,column:Qc,y:c*(o||r.height()+2*r.y1),row:l};break;case m0:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case KS:f.anchor={y:Math.floor(i.y1)-u,row:Qc,x:c*(s||i.width()+2*i.x1),column:l};break;case Ib:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case OCt:f.anchor={x:u,y:u};break;case MCt:f.anchor={x:s-u,y:u,column:Qc};break;case LCt:f.anchor={x:u,y:o-u,row:Qc};break;case FCt:f.anchor={x:s-u,y:o-u,column:Qc,row:Qc};break}return f}function aAt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),lAt(e,n,n.items[0].items[0]),s=uAt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===VCt&&cAt(n.items[0].items[0].items[0].items),i!==lJ&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,M1(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function uAt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function lAt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&a3(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case f0:i+=Math.ceil(o.bounds.width())+u;break;case m0:case Ib:break;default:s+=o.bounds.height()+u}switch((i||s)&&a3(e,n,i,s),o.orient){case f0:c+=iE(t,n,o,a,1,1);break;case m0:l+=iE(t,n,o,Qc,0,0)+u,c+=iE(t,n,o,a,1,1);break;case Ib:l+=iE(t,n,o,a,0,0),c+=iE(t,n,o,Qc,-1,0,1)+u;break;default:l+=iE(t,n,o,a,0,0)}(l||c)&&a3(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(a3(e,n,-l,0),a3(e,o,-l,0))}}function iE(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:GQ(n);return Math.round(r===sJ?f:r===Qc?d-h:.5*(c-h))}function a3(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function cAt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function fAt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===f0||a===m0?r:n,p=0,m=0,g=0,b=0,y=0,x;if(o!==hL?a===f0?(p=i.y2,h=i.y1):a===m0?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===f0&&(p=r,h=0),x=u===sJ?p:u===Qc?h:(p+h)/2,d&&d.text){switch(a){case KS:case Ib:y=f.bounds.height()+c;break;case f0:b=f.bounds.width()+c;break;case m0:b=-f.bounds.width()-c;break}Xl.clear().union(d.bounds),Xl.translate(b-(d.x||0),y-(d.y||0)),FE(d,"x",b)|FE(d,"y",y)&&(e.dirty(d),d.bounds.clear().union(Xl),d.mark.bounds.clear().union(Xl),e.dirty(d)),Xl.clear().union(d.bounds)}else Xl.clear();switch(Xl.union(f.bounds),a){case KS:m=x,g=i.y1-Xl.height()-l;break;case f0:m=i.x1-Xl.width()-l,g=x;break;case m0:m=i.x2+Xl.width()+l,g=x;break;case Ib:m=x,g=i.y2+l;break;default:m=s.x,g=s.y}return FE(s,"x",m)|FE(s,"y",g)&&(Xl.translate(m,g),e.dirty(s),s.bounds.clear().union(Xl),t.bounds.clear().union(Xl),e.dirty(s)),s.bounds}function Z3e(e){pt.call(this,null,e)}en(Z3e,pt,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&tAt(n,r,e.layout),hAt(n,r,e)}),dAt(e.mark.group)?t.reflow():t}});function dAt(e){return e&&e.mark.role!=="legend-entry"}function hAt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Wa().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case oJ:h=KCt(f)?a:u,h.union(QCt(e,f,i,s));break;case aJ:c=f;break;case uJ:l.push(aAt(e,f));break;case jCt:case UCt:case $3e:case B3e:case j3e:case U3e:case z3e:case V3e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(b=>{d=b.orient||m0,d!==lJ&&(g[d]||(g[d]=[])).push(b)});for(const b in g){const y=g[b];J3e(e,y,oAt(y,b,n.legends,a,u,i,s))}l.forEach(b=>{const y=b.bounds;if(y.equals(b._bounds)||(b.bounds=b._bounds,e.dirty(b),b.bounds=y,e.dirty(b)),n.autosize&&(n.autosize.type===H3e||n.autosize.type===q3e||n.autosize.type===W3e))switch(b.orient){case f0:case m0:o.add(y.x1,0).add(y.x2,0);break;case KS:case Ib:o.add(0,y.y1).add(0,y.y2)}else o.union(y)})}o.union(a).union(u),c&&o.union(fAt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),pAt(e,t,o,n)}function pAt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===zCt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===lJ?(l=0,f=0,u=o,c=a):s===H3e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===q3e?(u=Math.max(0,o-l-d),a=c+f+h):s===W3e?(o=u+l+d,c=Math.max(0,a-f-h)):s===HCt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const mAt=Object.freeze(Object.defineProperty({__proto__:null,bound:G3e,identifier:fJ,mark:Y3e,overlap:K3e,render:Q3e,viewlayout:Z3e},Symbol.toStringTag,{value:"Module"}));function eke(e){pt.call(this,null,e)}en(eke,pt,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=RQ(s,o,e.minstep),u=e.format||AAe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?CAe(s,e.values,a):IQ(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Vi({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Vi({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function tke(e){pt.call(this,null,e)}function gAt(){return Vi({})}function yAt(e){const t=rC().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}en(tke,pt,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||gAt,s=e.key||Fn,o=this.value;return xt(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&vt("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=yAt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function nke(e){pt.call(this,null,e)}en(nke,pt,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(xt(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||wv,u=i.enter||wv,l=i.exit||wv,c=(s&&!o?i[s]:a)||wv;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==wv&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==wv&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==wv){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function rke(e){pt.call(this,[],e)}en(rke,pt,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||LN,o=e.scale,a=+e.limit,u=RQ(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===LN,c=e.format||PAe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||IAe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===LN?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,Rr(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((b,y)=>Math.max(b,p(y,e)),0)):p=mc(m=p||8),i=i.map((b,y)=>Vi({index:y,label:c(b,y,i),value:b,offset:m,size:p(b,e)})),g&&(g=f[i.length],i.push(Vi({index:i.length,label:`…${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===HEt?(d=o.domain(),h=EAe(o,d[0],pi(d)),f.length<3&&!e.values&&d[0]!==pi(d)&&(f=[d[0],pi(d)]),i=f.map((b,y)=>Vi({index:y,label:c(b,y,f),value:b,perc:h(b)}))):(p=f.length-1,h=tSt(o),i=f.map((b,y)=>Vi({index:y,label:c(b,y,f),value:b,perc:y?h(b):0,perc2:y===p?1:h(f[y+1])}))),r.source=i,r.add=i,this.value=i,r}});const vAt=e=>e.source.x,bAt=e=>e.source.y,xAt=e=>e.target.x,_At=e=>e.target.y;function dJ(e){pt.call(this,{},e)}dJ.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};en(dJ,pt,{transform(e,t){var n=e.sourceX||vAt,r=e.sourceY||bAt,i=e.targetX||xAt,s=e.targetY||_At,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Ufe.get(u+"-"+a)||Ufe.get(u);return l||vt("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const ike=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,wAt=(e,t,n,r)=>ike(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ske=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},EAt=(e,t,n,r)=>ske(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),oke=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},SAt=(e,t,n,r)=>oke(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),TAt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,CAt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,AAt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},kAt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},RAt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},IAt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Ufe=rC({line:ike,"line-radial":wAt,arc:ske,"arc-radial":EAt,curve:oke,"curve-radial":SAt,"orthogonal-horizontal":TAt,"orthogonal-vertical":CAt,"orthogonal-radial":AAt,"diagonal-horizontal":kAt,"diagonal-vertical":RAt,"diagonal-radial":IAt});function hJ(e){pt.call(this,null,e)}hJ.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};en(hJ,pt,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||eC,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/Mwe(l),h=Kd(c),p,m,g;for(e.sort&&h.sort((b,y)=>l[b]-l[y]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const PAt=5;function NAt(e){const t=e.type;return!e.bins&&(t===VS||t===nI||t===rI)}function ake(e){return CQ(e)&&e!==Qm}const DAt=R0(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function uke(e){pt.call(this,null,e),this.modified(!0)}en(uke,pt,{transform(e,t){var n=t.dataflow,r=this.value,i=OAt(e);(!r||i!==r.type)&&(this.value=r=Ii(i)());for(i in e)if(!DAt[i]){if(i==="padding"&&ake(r.type))continue;Rr(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return jAt(r,e,BAt(r,e,LAt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function OAt(e){var t=e.type,n="",r;return t===Qm?Qm+"-"+VS:(MAt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Qm+"-":r===3?aC+"-":""),(n+t||VS).toLowerCase())}function MAt(e){const t=e.type;return CQ(t)&&t!==aw&&t!==uw&&(e.scheme||e.range&&e.range.length&&e.range.every(cn))}function LAt(e,t,n){const r=FAt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&NAt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return ake(s)&&t.padding&&i[0]!==pi(i)&&(i=$At(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(lke(s,i,n)),s===wQ&&e.unknown(t.domainImplicit?rV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&RQ(e,t.nice)||null),i.length}function FAt(e,t,n){return t?(e.domain(lke(e.type,t,n)),t.length):-1}function $At(e,t,n,r,i,s){var o=Math.abs(pi(n)-n[0]),a=o/(o-2*r),u=e===E1?mX(t,null,a):e===rI?qD(t,null,a,.5):e===nI?qD(t,null,a,i||1):e===JM?gX(t,null,a,s||1):pX(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function lke(e,t,n){if(vAe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Jt(t))}return t}function BAt(e,t,n){let r=t.bins;if(r&&!xt(r)){const i=e.domain(),s=i[0],o=pi(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||vt("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Kd(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===EQ&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function jAt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=UAt(r,t,n);else if(t.scheme&&(s=zAt(r,t,n),Rr(s))){if(e.interpolator)return e.interpolator(s);vt(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&bAe(r))return e.interpolator(tL(nH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(AQ(t.interpolate,t.interpolateGamma)):Rr(e.round)?e.round(i):Rr(e.rangeRound)&&e.interpolate(i?UR:Zb),s&&e.range(nH(s,t.reverse))}function UAt(e,t,n){e!==dAe&&e!==UV&&vt("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===UV?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*_Q(n,i,r)]}function zAt(e,t,n){var r=t.schemeExtent,i,s;return xt(t.scheme)?s=tL(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=kQ(i),s||vt(`Unrecognized scheme name: ${t.scheme}`)),n=e===eL?n+1:e===EQ?n-1:e===HS||e===ZM?+t.schemeCount||PAt:n,bAe(e)?zfe(s,r,t.reverse):Rr(s)?wAe(zfe(s,r),n):e===wQ?s:s.slice(0,n)}function zfe(e,t,n){return Rr(e)&&(t||n)?_Ae(e,nH(t||[0,1],n)):e}function nH(e,t){return t?e.slice().reverse():e}function cke(e){pt.call(this,null,e)}en(cke,pt,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Kw(e.sort)),this.modified(n),t}});const Vfe="zero",fke="center",dke="normalize",hke=["y0","y1"];function pJ(e){pt.call(this,null,e)}pJ.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Vfe,values:[Vfe,fke,dke]},{name:"as",type:"string",array:!0,length:2,default:hke}]};en(pJ,pt,{transform(e,t){var n=e.as||hke,r=n[0],i=n[1],s=Kw(e.sort),o=e.field||eC,a=e.offset===fke?VAt:e.offset===dke?HAt:qAt,u,l,c,f;for(u=WAt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function VAt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function HAt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function qAt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function WAt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const GAt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:eke,datajoin:tke,encode:nke,legendentries:rke,linkpath:dJ,pie:hJ,scale:uke,sortitems:cke,stack:pJ},Symbol.toStringTag,{value:"Module"}));var YAt=Math.abs,rH=Math.cos,uO=Math.sin,KAt=1e-6,pke=Math.PI,iH=pke/2,Hfe=XAt(2);function qfe(e){return e>1?iH:e<-1?-iH:Math.asin(e)}function XAt(e){return e>0?Math.sqrt(e):0}function QAt(e,t){var n=e*uO(t),r=30,i;do t-=i=(t+uO(t)-n)/(1+rH(t));while(YAt(i)>KAt&&--r>0);return t/2}function JAt(e,t,n){function r(i,s){return[e*i*rH(s=QAt(n,s)),t*uO(s)]}return r.invert=function(i,s){return s=qfe(s/t),[i/(e*rH(s)),qfe((2*s+uO(2*s))/n)]},r}var ZAt=JAt(Hfe/iH,Hfe,pke);function e3t(){return Sg(ZAt).scale(169.529)}const t3t=lEe(),sH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function n3t(e,t){return function n(){const r=t();return r.type=e,r.path=lEe().projection(r),r.copy=r.copy||function(){const i=n();return sH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},gAe(r)}}function mJ(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(lO[e]=n3t(e,t),this):lO[e]||null}function mke(e){return e&&e.path||t3t}const lO={albers:fEe,albersusa:y0t,azimuthalequalarea:v0t,azimuthalequidistant:b0t,conicconformal:w0t,conicequalarea:_D,conicequidistant:T0t,equalEarth:A0t,equirectangular:E0t,gnomonic:k0t,identity:R0t,mercator:x0t,mollweide:e3t,naturalEarth1:I0t,orthographic:P0t,stereographic:N0t,transversemercator:D0t};for(const e in lO)mJ(e,lO[e]);function r3t(){}const _y=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function gke(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),i3t(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(s3t((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=[],d=[],h,p,m,g,b,y;for(h=p=-1,g=u[0]>=l,_y[g<<1].forEach(x);++h<e-1;)m=g,g=u[h+1]>=l,_y[m|g<<1].forEach(x);for(_y[g<<0].forEach(x);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,b=u[p*e]>=l,_y[g<<1|b<<2].forEach(x);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,y=b,b=u[p*e+h+1]>=l,_y[m|g<<1|b<<2|y<<3].forEach(x);_y[g|b<<3].forEach(x)}for(h=-1,b=u[p*e]>=l,_y[b<<2].forEach(x);++h<e-1;)y=b,b=u[p*e+h+1]>=l,_y[b<<2|y<<3].forEach(x);_y[b<<3].forEach(x);function x(w){var S=[w[0][0]+h,w[0][1]+p],C=[w[1][0]+h,w[1][1]+p],R=o(S),I=o(C),O,M;(O=d[R])?(M=f[I])?(delete d[O.end],delete f[M.start],O===M?(O.ring.push(C),c(O.ring)):f[O.start]=d[M.end]={start:O.start,end:M.end,ring:O.ring.concat(M.ring)}):(delete d[O.end],O.ring.push(C),d[O.end=I]=O):(O=f[I])?(M=d[R])?(delete f[O.start],delete d[M.end],O===M?(O.ring.push(C),c(O.ring)):f[M.start]=d[O.end]={start:M.start,end:O.end,ring:M.ring.concat(O.ring)}):(delete f[O.start],O.ring.unshift(S),f[O.start=R]=O):f[R]=d[I]={start:R,end:I,ring:[S,C]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,b=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(b-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(b-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||vt("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:r3t,r):n===a},r}function i3t(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function s3t(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=o3t(e,t[n]))return i;return 0}function o3t(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(a3t(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function a3t(e,t,n){var r;return u3t(e,t,n)&&l3t(e[r=+(e[0]===t[0])],n[r],t[r])}function u3t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function l3t(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function yke(e,t,n){return function(r){var i=dg(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?xb(s,o,e):a/(e+1);return Kd(s+u,o,u)}}function gJ(e){pt.call(this,null,e)}gJ.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};en(gJ,pt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||pc,s=gke().smooth(e.smooth!==!1),o=e.thresholds||c3t(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,xt(o)?o:o(c.values));f3t(f,c,l,e),f.forEach(d=>{u.push(VM(l,Vi(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function c3t(e,t,n){const r=yke(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>O_(t(i).values)))}function f3t(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Rr(i)&&(i=i(n,r)),Rr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Ri(i)?i:i[0])||1,a=(Ri(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(vke(t,o,a,u,l))}function vke(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Wfe(e,t,n){const r=e>=0?e:MX(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function zB(e){return Rr(e)?e:mc(+e)}function bke(){var e=u=>u[0],t=u=>u[1],n=eC,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=Wfe(r[0],u,e)>>o,f=Wfe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),b=new Float32Array(p*m);let y=g;u.forEach(w=>{const S=d+(+e(w)>>o),C=h+(+t(w)>>o);S>=0&&S<p&&C>=0&&C<m&&(g[S+C*p]+=+n(w))}),c>0&&f>0?(sE(p,m,g,b,c),oE(p,m,b,g,f),sE(p,m,g,b,c),oE(p,m,b,g,f),sE(p,m,g,b,c),oE(p,m,b,g,f)):c>0?(sE(p,m,g,b,c),sE(p,m,b,g,c),sE(p,m,g,b,c),y=b):f>0&&(oE(p,m,g,b,f),oE(p,m,b,g,f),oE(p,m,g,b,f),y=b);const x=l?Math.pow(2,-2*o):1/Mwe(y);for(let w=0,S=p*m;w<S;++w)y[w]*=x;return{values:y,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=zB(u),a):e},a.y=function(u){return arguments.length?(t=zB(u),a):t},a.weight=function(u){return arguments.length?(n=zB(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||vt("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||vt("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=ln(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&vt("invalid bandwidth"),r=u,a):r},a}function sE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function oE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function yJ(e){pt.call(this,null,e)}yJ.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const d3t=["x","y","weight","size","cellSize","bandwidth"];function xke(e,t){return d3t.forEach(n=>t[n]!=null?e[n](t[n]):0),e}en(yJ,pt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=h3t(r,e.groupby),s=(e.groupby||[]).map(Go),o=xke(bke(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Vi(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function h3t(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function vJ(e){pt.call(this,null,e)}vJ.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};en(vJ,pt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=gke().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||yke(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=xke(bke(),e)(i,!0),u=vke(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=xt(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Vi),n}});const oH="Feature",bJ="FeatureCollection",p3t="MultiPoint";function xJ(e){pt.call(this,null,e)}xJ.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};en(xJ,pt,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&pc,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(uc(a))||s&&t.modified(uc(s))||o&&t.modified(uc(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:oH,geometry:{type:p3t,coordinates:r}})),this.value={type:bJ,features:n}}});function _J(e){pt.call(this,null,e)}_J.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};en(_J,pt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||pc,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=mke(e.projection),n.materialize().reflow()):o=i===pc||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=m3t(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function m3t(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function wJ(e){pt.call(this,null,e)}wJ.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};en(wJ,pt,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function EJ(e){pt.call(this,null,e)}EJ.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};en(EJ,pt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=g3t(mke(e.projection),e.field||np("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function g3t(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function SJ(e){pt.call(this,[],e),this.generator=Xpt()}SJ.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};en(SJ,pt,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Rr(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(xCe(n[0],i)):t.add.push(Vi(i)),n[0]=i,t}});function TJ(e){pt.call(this,null,e)}TJ.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};en(TJ,pt,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||pc,s=v3t(e.opacity,e),o=y3t(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?O_(n.map(l=>O_(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=kr({},l,u);r||(f.$max=O_(c.values||[])),l[a]=b3t(c,f,o.dep?o:mc(o(f)),s.dep?s:mc(s(f)))}),t.reflow(!0).modifies(a)}});function y3t(e,t){let n;return Rr(e)?(n=r=>_b(e(r,t)),n.dep=_ke(e)):n=mc(_b(e||"#888")),n}function v3t(e,t){let n;return Rr(e)?(n=r=>e(r,t),n.dep=_ke(e)):e?n=mc(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function _ke(e){if(!Rr(e))return!1;const t=R0(uc(e));return t.$x||t.$y||t.$value||t.$max}function b3t(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:$v,d=sb(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,b=0;g<l;++g){t.$y=g-a;for(let y=o,x=g*i;y<u;++y,b+=4){t.$x=y-o,t.$value=f(y+x);const w=n(t);m[b+0]=w.r,m[b+1]=w.g,m[b+2]=w.b,m[b+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function wke(e){pt.call(this,null,e),this.modified(!0)}en(wke,pt,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=_3t(e.type),sH.forEach(r=>{e[r]!=null&&Gfe(n,r,e[r])})):sH.forEach(r=>{e.modified(r)&&Gfe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&x3t(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function x3t(e,t){const n=w3t(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function _3t(e){const t=mJ((e||"mercator").toLowerCase());return t||vt("Unrecognized projection type: "+e),t()}function Gfe(e,t,n){Rr(e[t])&&e[t](n)}function w3t(e){return e=ln(e),e.length===1?e[0]:{type:bJ,features:e.reduce((t,n)=>t.concat(E3t(n)),[])}}function E3t(e){return e.type===bJ?e.features:ln(e).filter(t=>t!=null).map(t=>t.type===oH?t:{type:oH,geometry:t})}const S3t=Object.freeze(Object.defineProperty({__proto__:null,contour:vJ,geojson:xJ,geopath:_J,geopoint:wJ,geoshape:EJ,graticule:SJ,heatmap:TJ,isocontour:gJ,kde2d:yJ,projection:wke},Symbol.toStringTag,{value:"Module"})),Yfe={center:jht,collide:spt,nbody:gpt,link:apt,x:ypt,y:vpt},ik="forces",aH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],T3t=["static","iterations"],Eke=["x","y","vx","vy"];function CJ(e){pt.call(this,null,e)}CJ.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Eke}]};en(CJ,pt,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(aH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Ske(n,e,0,t)):(this.value=n=A3t(t.source,e),n.on("tick",C3t(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(T3t)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==ik||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Eke)}});function C3t(e,t){return()=>e.touch(t).run()}function A3t(e,t){const n=mpt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),Ske(n,t,!0).on("end",()=>s=!0)}function Ske(e,t,n,r){var i=ln(t.forces),s,o,a,u;for(s=0,o=aH.length;s<o;++s)a=aH[s],a!==ik&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=ik+s,a=n||t.modified(ik,s)?R3t(i[s]):r&&k3t(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(ik+s,null);return e.numForces=i.length,e}function k3t(e,t){var n,r;for(n in e)if(Rr(r=e[n])&&t.modified(uc(r)))return 1;return 0}function R3t(e){var t,n;gn(Yfe,e.force)||vt("Unrecognized force: "+e.force),t=Yfe[e.force]();for(n in e)Rr(t[n])&&I3t(t[n],e[n],e);return t}function I3t(e,t,n){e(Rr(t)?r=>t(r,n):t)}const P3t=Object.freeze(Object.defineProperty({__proto__:null,force:CJ},Symbol.toStringTag,{value:"Module"}));function uH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function AJ(e){pt.call(this,null,e)}AJ.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const N3t=e=>e.values;en(AJ,pt,{transform(e,t){t.source||vt("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&zM(o.data)&&i.rem.push(o.data)}),this.value=s=wK({values:ln(e.keys).reduce((o,a)=>(o.key(a),o),D3t()).entries(i.source)},N3t),n&&s.each(o=>{o.children&&(o=Vi(o.data),i.add.push(o),i.source.push(o))}),uH(s,Fn,Fn)),i.source.root=s,i}});function D3t(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function L1(e){pt.call(this,null,e)}const O3t=(e,t)=>e.parent===t.parent?1:2;en(L1,pt,{transform(e,t){(!t.source||!t.source.root)&&vt(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Kw(e.sort,o=>o.data)),M3t(n,this.params,e),n.separation&&n.separation(e.separation!==!1?O3t:eC);try{this.value=n(i)}catch(o){vt(o)}return i.each(o=>L3t(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function M3t(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function L3t(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const lH=["x","y","r","depth","children"];function kJ(e){L1.call(this,e)}kJ.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:lH.length,default:lH}]};en(kJ,L1,{layout:vmt,params:["radius","size","padding"],fields:lH});const cH=["x0","y0","x1","y1","depth","children"];function RJ(e){L1.call(this,e)}RJ.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:cH.length,default:cH}]};en(RJ,L1,{layout:bmt,params:["size","round","padding"],fields:cH});function IJ(e){pt.call(this,null,e)}IJ.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};en(IJ,pt,{transform(e,t){t.source||vt("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?uH(fue().id(e.key).parentId(e.parentKey)(i.source),e.key,rp):uH(fue()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Kfe={tidy:Rmt,cluster:U0t},fH=["x","y","depth","children"];function PJ(e){L1.call(this,e)}PJ.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:fH.length,default:fH}]};en(PJ,L1,{layout(e){const t=e||"tidy";if(gn(Kfe,t))return Kfe[t]();vt("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:fH});function NJ(e){pt.call(this,[],e)}NJ.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};en(NJ,pt,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||vt("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Fn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Fn(a)]&&s[Fn(u)]&&i.add.push(Vi({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Fn(o)]=1),n.forEach(o=>{(s[Fn(o.source)]||s[Fn(o.target)])&&i.mod.push(o)})),i}});const Xfe={binary:Pmt,dice:qR,slice:gM,slicedice:Nmt,squarify:REe,resquarify:Dmt},dH=["x0","y0","x1","y1","depth","children"];function DJ(e){L1.call(this,e)}DJ.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:dH.length,default:dH}]};en(DJ,L1,{layout(){const e=Imt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{gn(Xfe,t)?e.tile(Xfe[t]):vt("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:dH});const F3t=Object.freeze(Object.defineProperty({__proto__:null,nest:AJ,pack:kJ,partition:RJ,stratify:IJ,tree:PJ,treelinks:NJ,treemap:DJ},Symbol.toStringTag,{value:"Module"})),VB=4278190080;function $3t(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function B3t(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=sb(s,o).getContext("2d"),l=sb(s,o).getContext("2d"),c=a&&sb(s,o).getContext("2d");n.forEach(I=>qN(u,I,!1)),qN(l,t,!1),a&&qN(c,t,!0);const f=HB(u,s,o),d=HB(l,s,o),h=a&&HB(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,b,y,x,w,S,C,R;for(b=0;b<o;++b)for(g=0;g<s;++g)w=b*s+g,S=f[w]&VB,R=d[w]&VB,C=a&&h[w]&VB,(S||C||R)&&(y=e(g),x=e(b),!i&&(S||R)&&p.set(y,x),a&&(S||C)&&m.set(y,x));return[p,m]}function HB(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function qN(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>qN(e,s.items,n))}):mh[r].draw(e,{items:n?t.map(j3t):t})}function j3t(e){const t=VM(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const wy=5,Gc=31,z4=32,Rv=new Uint32Array(z4+1),o0=new Uint32Array(z4+1);o0[0]=0;Rv[0]=~o0[0];for(let e=1;e<=z4;++e)o0[e]=o0[e-1]<<1|1,Rv[e]=~o0[e];function U3t(e,t){const n=new Uint32Array(~~((e*t+z4)/z4));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>wy]&1<<(a&Gc)},set:(s,o)=>{const a=o*e+s;r(a>>>wy,1<<(a&Gc))},clear:(s,o)=>{const a=o*e+s;i(a>>>wy,~(1<<(a&Gc)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>wy,h=f>>>wy,d===h){if(n[d]&Rv[c&Gc]&o0[(f&Gc)+1])return!0}else{if(n[d]&Rv[c&Gc]||n[h]&o0[(f&Gc)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>wy,d=c>>>wy,f===d)r(f,Rv[l&Gc]&o0[(c&Gc)+1]);else for(r(f,Rv[l&Gc]),r(d,o0[(c&Gc)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>wy,d=c>>>wy,f===d)i(f,o0[l&Gc]|Rv[(c&Gc)+1]);else for(i(f,o0[l&Gc]),i(d,Rv[(c&Gc)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function z3t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>U3t(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function V3t(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=nh.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,b,y;for(let x=0;x<u;++x)d=a[x].x,p=a[x].y,h=a[x].x2===void 0?d:a[x].x2,m=a[x].y2===void 0?p:a[x].y2,g=(d+h)/2,b=(p+m)/2,y=Math.abs(h-d+m-p),y>=f&&(f=y,o.x=g,o.y=b);return g=c/2,b=l/2,d=o.x-g,h=o.x+g,p=o.y-b,m=o.y+b,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function cO(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Gv(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function H3t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,b=s,y;if(!cO(p,m,d,h,i,s)&&!Gv(e,p,m,h,d,g,o,a)&&!Gv(e,p,m,h,d,h,o,null)){for(;b-g>=1;)y=(g+b)/2,Gv(e,p,m,h,d,y,o,a)?b=y:g=y;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=nh.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,b=0,y,x,w,S,C,R,I,O,M,L,V,D,j,z,G,ee,ne;for(let ue=0;ue<f;++ue){for(y=c[ue].x,w=c[ue].y,x=c[ue].x2===void 0?y:c[ue].x2,S=c[ue].y2===void 0?w:c[ue].y2,y>x&&(ne=y,y=x,x=ne),w>S&&(ne=w,w=S,S=ne),M=e(y),V=e(x),L=~~((M+V)/2),D=e(w),z=e(S),j=~~((D+z)/2),I=L;I>=M;--I)for(O=j;O>=D;--O)ee=u(I,O,p,h,d),ee&&([l.x,l.y,p,m]=ee);for(I=L;I<=V;++I)for(O=j;O<=z;++O)ee=u(I,O,p,h,d),ee&&([l.x,l.y,p,m]=ee);!m&&!n&&(G=Math.abs(x-y+S-w),C=(y+x)/2,R=(w+S)/2,G>=b&&!cO(C,R,h,d,i,s)&&!Gv(e,C,R,d,h,d,o,null)&&(b=G,l.x=C,l.y=R,g=!0))}return m||g?(C=h/2,R=d/2,o.setRange(e(l.x-C),e(l.y-R),e(l.x+C),e(l.y+R)),l.align="center",l.baseline="middle",!0):!1}}const q3t=[-1,-1,1,1],W3t=[-1,1,-1,1];function G3t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=nh.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,b=!1,y=0,x,w,S,C,R,I,O,M,L,V,D,j;for(let z=0;z<f;++z){for(x=c[z].x,S=c[z].y,w=c[z].x2===void 0?x:c[z].x2,C=c[z].y2===void 0?S:c[z].y2,p.push([e((x+w)/2),e((S+C)/2)]);p.length;)if([O,M]=p.pop(),!(o.get(O,M)||a.get(O,M)||u.get(O,M))){u.set(O,M);for(let G=0;G<4;++G)R=O+q3t[G],I=M+W3t[G],u.outOfBounds(R,I,R,I)||p.push([R,I]);if(R=e.invert(O),I=e.invert(M),L=m,V=s,!cO(R,I,h,d,i,s)&&!Gv(e,R,I,d,h,L,o,a)&&!Gv(e,R,I,d,h,d,o,null)){for(;V-L>=1;)D=(L+V)/2,Gv(e,R,I,d,h,D,o,a)?V=D:L=D;L>m&&(l.x=R,l.y=I,m=L,g=!0)}}!g&&!n&&(j=Math.abs(w-x+C-S),R=(x+w)/2,I=(S+C)/2,j>=y&&!cO(R,I,h,d,i,s)&&!Gv(e,R,I,d,h,d,o,null)&&(y=j,l.x=R,l.y=I,b=!0))}return g||b?(R=h/2,I=d/2,o.setRange(e(l.x-R),e(l.y-I),e(l.x+R),e(l.y+I)),l.align="center",l.baseline="middle",!0):!1}}const Y3t=["right","center","left"],K3t=["bottom","middle","top"];function X3t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,b,y,x,w,S,C,R,I,O,M,L;for(let V=0;V<u;++V){if(h=(n[V]&3)-1,p=(n[V]>>>2&3)-1,m=h===0&&p===0||r[V]<0,g=h&&p?Math.SQRT1_2:1,b=r[V]<0?-1:1,y=c[1+h]+r[V]*h*g,R=c[4+p]+b*f*p/2+r[V]*p*g,w=R-f/2,S=R+f/2,I=e(y),M=e(w),L=e(S),!d)if(Qfe(I,I,M,L,o,a,y,y,w,S,c,m))d=nh.width(l.datum,l.datum.text);else continue;if(C=y+b*d*h/2,y=C-d/2,x=C+d/2,I=e(y),O=e(x),Qfe(I,O,M,L,o,a,y,x,w,S,c,m))return l.x=h?h*b<0?x:y:C,l.y=p?p*b<0?S:w:R,l.align=Y3t[h*b+1],l.baseline=K3t[p*b+1],o.setRange(I,M,O,L),!0}return!1}}function Qfe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const qB=0,WB=4,GB=8,YB=0,KB=1,XB=2,Q3t={"top-left":qB+YB,top:qB+KB,"top-right":qB+XB,left:WB+YB,middle:WB+KB,right:WB+XB,"bottom-left":GB+YB,bottom:GB+KB,"bottom-right":GB+XB},J3t={naive:V3t,"reduced-search":H3t,floodfill:G3t};function Z3t(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=ekt(r,f),h=tkt(i,f),p=nkt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",b=rkt(p,m,a,u),y=l===null||l===1/0,x=g&&c==="naive";let w=-1,S=-1;const C=e.map(M=>{const L=y?nh.width(M,M.text):void 0;return w=Math.max(w,L),S=Math.max(S,M.fontSize),{datum:M,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(M),textWidth:L}});l=l===null||l===1/0?Math.max(w,S)+Math.max(...r):l;const R=z3t(t[0],t[1],l);let I;if(!x){n&&C.sort((V,D)=>n(V.datum,D.datum));let M=!1;for(let V=0;V<h.length&&!M;++V)M=h[V]===5||d[V]<0;const L=(p&&o||g)&&e.map(V=>V.datum);I=s.length||L?B3t(R,L||[],s,M,g):$3t(R,o&&C)}const O=g?J3t[c](R,I,o,u):X3t(R,I,h,d);return C.forEach(M=>M.opacity=+O(M)),C}function ekt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function tkt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Q3t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function nkt(e){return e&&e.mark&&e.mark.marktype}function rkt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const hH=["x","y","opacity","align","baseline"],Tke=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function OJ(e){pt.call(this,null,e)}OJ.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Tke},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:hH.length,default:hH}]};en(OJ,pt,{transform(e,t){function n(s){const o=e[s];return Rr(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&vt("Size parameter should be specified as a [width, height] array.");const i=e.as||hH;return Z3t(t.materialize(t.SOURCE).source||[],e.size,e.sort,ln(e.offset==null?1:e.offset),ln(e.anchor||Tke),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const ikt=Object.freeze(Object.defineProperty({__proto__:null,label:OJ},Symbol.toStringTag,{value:"Module"}));function Cke(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function MJ(e){pt.call(this,null,e)}MJ.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};en(MJ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Cke(r,e.groupby),s=(e.groupby||[]).map(Go),o=s.length,a=e.as||[Go(e.x),Go(e.y)],u=[];i.forEach(l=>{$Ce(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Vi(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const pH={constant:GX,linear:YX,log:OCe,exp:MCe,pow:LCe,quad:KX,poly:FCe},skt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function LJ(e){pt.call(this,null,e)}LJ.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(pH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};en(LJ,pt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Cke(r,e.groupby),s=(e.groupby||[]).map(Go),o=e.method||"linear",a=e.order==null?3:e.order,u=skt(o,a),l=e.as||[Go(e.x),Go(e.y)],c=pH[o],f=[];let d=e.extent;gn(pH,o)||vt("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Vi({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||dg(h,e.x),b=y=>{const x={};for(let w=0;w<s.length;++w)x[s[w]]=h.dims[w];x[l[0]]=y[0],x[l[1]]=y[1],f.push(Vi(x))};o==="linear"||o==="constant"?g.forEach(y=>b([y,m.predict(y)])):XM(m.predict,g,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const okt=Object.freeze(Object.defineProperty({__proto__:null,loess:MJ,regression:LJ},Symbol.toStringTag,{value:"Module"}));function FJ(e){pt.call(this,null,e)}FJ.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const akt=[-1e5,-1e5,1e5,1e5];en(FJ,pt,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:akt;const s=this.value=cK.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!lkt(u)?ukt(u):null}return t.reflow(e.modified()).modifies(n)}});function ukt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function lkt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const ckt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:FJ},Symbol.toStringTag,{value:"Module"}));var QB=Math.PI/180,sk=64,WN=2048;function fkt(){var e=[256,256],t,n,r,i,s,o,a,u=Ake,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(sb()),m=ykt((e[0]>>5)*e[1]),g=null,b=l.length,y=-1,x=[],w=l.map(C=>({text:t(C),font:n(C),style:i(C),weight:s(C),rotate:o(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,R)=>R.size-C.size);++y<b;){var S=w[y];S.x=e[0]*(c()+.5)>>1,S.y=e[1]*(c()+.5)>>1,dkt(p,S,w,y),S.hasText&&h(m,S,g)&&(x.push(S),g?pkt(g,S):g=[{x:S.x+S.x0,y:S.y+S.y0},{x:S.x+S.x1,y:S.y+S.y1}],S.x-=e[0]>>1,S.y-=e[1]>>1)}return x};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(sk<<5)/m,p.height=WN/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var b=m.x,y=m.y,x=Math.hypot(e[0],e[1]),w=u(e),S=c()<.5?1:-1,C=-S,R,I,O;(R=w(C+=S))&&(I=~~R[0],O=~~R[1],!(Math.min(Math.abs(I),Math.abs(O))>=x));)if(m.x=b+I,m.y=y+O,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!hkt(m,p,e[0]))&&(!g||mkt(m,g))){for(var M=m.sprite,L=m.width>>5,V=e[0]>>5,D=m.x-(L<<4),j=D&127,z=32-j,G=m.y1-m.y0,ee=(m.y+m.y0)*V+(D>>5),ne,ue=0;ue<G;ue++){ne=0;for(var X=0;X<=L;X++)p[ee+X]|=ne<<z|(X<L?(ne=M[ue*L+X])>>>j:0);ee+=V}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Vx(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Vx(p),f):i},f.fontWeight=function(p){return arguments.length?(s=Vx(p),f):s},f.rotate=function(p){return arguments.length?(o=Vx(p),f):o},f.text=function(p){return arguments.length?(t=Vx(p),f):t},f.spiral=function(p){return arguments.length?(u=vkt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Vx(p),f):r},f.padding=function(p){return arguments.length?(a=Vx(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function dkt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(sk<<5)/s,WN/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*QB),g=Math.cos(t.rotate*QB),b=c*g,y=c*m,x=d*g,w=d*m;c=Math.max(Math.abs(b+w),Math.abs(b-w))+31>>5<<5,d=~~Math.max(Math.abs(y+x),Math.abs(y-x))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=sk<<5&&(o=0,a+=u,u=0),a+d>=WN)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*QB),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var S=i.getImageData(0,0,(sk<<5)/s,WN/s).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)C[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var R=0,I=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var O=f*p+(h>>5),M=S[(a+p)*(sk<<5)+(o+h)<<2]?1<<31-h%32:0;C[O]|=M,R|=M}R?I=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+I,t.sprite=C.slice(0,(t.y1-t.y0)*f)}}}function hkt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function pkt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function mkt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Ake(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function gkt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function ykt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Vx(e){return typeof e=="function"?e:function(){return e}}var vkt={archimedean:Ake,rectangular:gkt};const kke=["x","y","font","fontSize","fontStyle","fontWeight","angle"],bkt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function $J(e){pt.call(this,fkt(),e)}$J.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:kke}]};en($J,pt,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&vt("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return Rr(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||bkt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||kke;let a=e.fontSize||14,u;if(Rr(a)?u=e.fontSizeRange:a=mc(a),u){const p=a,m=Ii("sqrt")().domain(dg(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(sp).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const xkt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:$J},Symbol.toStringTag,{value:"Module"})),_kt=e=>new Uint8Array(e),wkt=e=>new Uint16Array(e),$k=e=>new Uint32Array(e);function Ekt(){let e=8,t=[],n=$k(0),r=m5(0,e),i=m5(0,e);return{data:()=>t,seen:()=>n=Skt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=m5(s,e,r),i=m5(s,e))}}}function Skt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function m5(e,t,n){const r=(t<257?_kt:t<65537?wkt:$k)(e);return n&&r.set(n),r}function Jfe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Zfe(){let e=$k(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=$k(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=Tkt(h,d),c)p=t,m=e,t=Array(c+f),e=$k(c+f),Ckt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[wlt(u,a[0],0,l),bb(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function Tkt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Clt(e,t)}function Ckt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function BJ(e){pt.call(this,Ekt(),e),this._indices=null,this._dims=null}BJ.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};en(BJ,pt,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Zfe()),s.push(Jfe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,b,y,x,w,S,C,R;if(l.set(u),t.rem.length&&(x=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},y=t.mod,S=0,C=y.length;S<C;++S)w[y[S]._index]=1;for(S=0;S<h;++S)R=r[S],(!o[S]||e.modified("fields",S)||t.modified(R.fields))&&(b=R.fname,(m=p[b])||(s[b]=g=Zfe(),p[b]=m=g.insert(R,t.source,0)),o[S]=Jfe(g,S,i[S]).onAdd(m,u));for(S=0,C=a.data().length;S<C;++S)x[S]||(l[S]!==u[S]?f.push(S):w[S]&&u[S]!==c&&d.push(S));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),b=i.prev(),y=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)b[d]=y,g[d]!==y&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,b,y;if(f<h)for(g=f,b=Math.min(h,d);g<b;++g)y=u[g],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=m;else if(f>h)for(g=h,b=Math.min(f,p);g<b;++g)y=u[g],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=m;if(d>p)for(g=Math.max(f,p),b=d;g<b;++g)y=u[g],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=m;else if(d<p)for(g=Math.max(h,d),b=p;g<b;++g)y=u[g],s[y]!==n&&(a[y]=o[y],s[y]=n,r.push(y)),o[y]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function jJ(e){pt.call(this,null,e)}jJ.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};en(jJ,pt,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const Akt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:BJ,resolvefilter:jJ},Symbol.toStringTag,{value:"Module"})),kkt="RawCode",XS="Literal",Rkt="Property",Ikt="Identifier",Pkt="ArrayExpression",Nkt="BinaryExpression",Rke="CallExpression",Dkt="ConditionalExpression",Okt="LogicalExpression",Mkt="MemberExpression",Lkt="ObjectExpression",Fkt="UnaryExpression";function U0(e){this.type=e}U0.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=$kt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function $kt(e){switch(e.type){case Pkt:return e.elements;case Nkt:case Okt:return[e.left,e.right];case Rke:return[e.callee].concat(e.arguments);case Dkt:return[e.test,e.consequent,e.alternate];case Mkt:return[e.object,e.property];case Lkt:return e.properties;case Rkt:return[e.key,e.value];case Fkt:return[e.argument];case Ikt:case XS:case kkt:default:return[]}}var Rg,Rn,gt,cc,os,pL=1,mI=2,cw=3,ix=4,mL=5,Jw=6,Gf=7,gI=8,Bkt=9;Rg={};Rg[pL]="Boolean";Rg[mI]="<end>";Rg[cw]="Identifier";Rg[ix]="Keyword";Rg[mL]="Null";Rg[Jw]="Numeric";Rg[Gf]="Punctuator";Rg[gI]="String";Rg[Bkt]="RegularExpression";var jkt="ArrayExpression",Ukt="BinaryExpression",zkt="CallExpression",Vkt="ConditionalExpression",Ike="Identifier",Hkt="Literal",qkt="LogicalExpression",Wkt="MemberExpression",Gkt="ObjectExpression",Ykt="Property",Kkt="UnaryExpression",Lu="Unexpected token %0",Xkt="Unexpected number",Qkt="Unexpected string",Jkt="Unexpected identifier",Zkt="Unexpected reserved word",e4t="Unexpected end of input",mH="Invalid regular expression",JB="Invalid regular expression: missing /",Pke="Octal literals are not allowed in strict mode.",t4t="Duplicate data property in object literal not allowed in strict mode",xl="ILLEGAL",V4="Disabled.",n4t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),r4t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function gL(e,t){if(!e)throw new Error("ASSERT: "+t)}function Py(e){return e>=48&&e<=57}function UJ(e){return"0123456789abcdefABCDEF".includes(e)}function Bk(e){return"01234567".includes(e)}function i4t(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function H4(e){return e===10||e===13||e===8232||e===8233}function yI(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&n4t.test(String.fromCharCode(e))}function fO(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&r4t.test(String.fromCharCode(e))}const s4t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Nke(){for(;gt<cc;){const e=Rn.charCodeAt(gt);if(i4t(e)||H4(e))++gt;else break}}function gH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)gt<cc&&UJ(Rn[gt])?(r=Rn[gt++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ci({},Lu,xl);return String.fromCharCode(i)}function o4t(){var e,t,n,r;for(e=Rn[gt],t=0,e==="}"&&Ci({},Lu,xl);gt<cc&&(e=Rn[gt++],!!UJ(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ci({},Lu,xl),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Dke(){var e,t;for(e=Rn.charCodeAt(gt++),t=String.fromCharCode(e),e===92&&(Rn.charCodeAt(gt)!==117&&Ci({},Lu,xl),++gt,e=gH("u"),(!e||e==="\\"||!yI(e.charCodeAt(0)))&&Ci({},Lu,xl),t=e);gt<cc&&(e=Rn.charCodeAt(gt),!!fO(e));)++gt,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Rn.charCodeAt(gt)!==117&&Ci({},Lu,xl),++gt,e=gH("u"),(!e||e==="\\"||!fO(e.charCodeAt(0)))&&Ci({},Lu,xl),t+=e);return t}function a4t(){var e,t;for(e=gt++;gt<cc;){if(t=Rn.charCodeAt(gt),t===92)return gt=e,Dke();if(fO(t))++gt;else break}return Rn.slice(e,gt)}function u4t(){var e,t,n;return e=gt,t=Rn.charCodeAt(gt)===92?Dke():a4t(),t.length===1?n=cw:s4t.hasOwnProperty(t)?n=ix:t==="null"?n=mL:t==="true"||t==="false"?n=pL:n=cw,{type:n,value:t,start:e,end:gt}}function ZB(){var e=gt,t=Rn.charCodeAt(gt),n,r=Rn[gt],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++gt,{type:Gf,value:String.fromCharCode(t),start:e,end:gt};default:if(n=Rn.charCodeAt(gt+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return gt+=2,{type:Gf,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:gt};case 33:case 61:return gt+=2,Rn.charCodeAt(gt)===61&&++gt,{type:Gf,value:Rn.slice(e,gt),start:e,end:gt}}}if(o=Rn.substr(gt,4),o===">>>=")return gt+=4,{type:Gf,value:o,start:e,end:gt};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return gt+=3,{type:Gf,value:s,start:e,end:gt};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return gt+=2,{type:Gf,value:i,start:e,end:gt};if(i==="//"&&Ci({},Lu,xl),"<>=!+-*%&|^/".includes(r))return++gt,{type:Gf,value:r,start:e,end:gt};Ci({},Lu,xl)}function l4t(e){let t="";for(;gt<cc&&UJ(Rn[gt]);)t+=Rn[gt++];return t.length===0&&Ci({},Lu,xl),yI(Rn.charCodeAt(gt))&&Ci({},Lu,xl),{type:Jw,value:parseInt("0x"+t,16),start:e,end:gt}}function c4t(e){let t="0"+Rn[gt++];for(;gt<cc&&Bk(Rn[gt]);)t+=Rn[gt++];return(yI(Rn.charCodeAt(gt))||Py(Rn.charCodeAt(gt)))&&Ci({},Lu,xl),{type:Jw,value:parseInt(t,8),octal:!0,start:e,end:gt}}function ede(){var e,t,n;if(n=Rn[gt],gL(Py(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=gt,e="",n!=="."){if(e=Rn[gt++],n=Rn[gt],e==="0"){if(n==="x"||n==="X")return++gt,l4t(t);if(Bk(n))return c4t(t);n&&Py(n.charCodeAt(0))&&Ci({},Lu,xl)}for(;Py(Rn.charCodeAt(gt));)e+=Rn[gt++];n=Rn[gt]}if(n==="."){for(e+=Rn[gt++];Py(Rn.charCodeAt(gt));)e+=Rn[gt++];n=Rn[gt]}if(n==="e"||n==="E")if(e+=Rn[gt++],n=Rn[gt],(n==="+"||n==="-")&&(e+=Rn[gt++]),Py(Rn.charCodeAt(gt)))for(;Py(Rn.charCodeAt(gt));)e+=Rn[gt++];else Ci({},Lu,xl);return yI(Rn.charCodeAt(gt))&&Ci({},Lu,xl),{type:Jw,value:parseFloat(e),start:t,end:gt}}function f4t(){var e="",t,n,r,i,s=!1;for(t=Rn[gt],gL(t==="'"||t==='"',"String literal must starts with a quote"),n=gt,++gt;gt<cc;)if(r=Rn[gt++],r===t){t="";break}else if(r==="\\")if(r=Rn[gt++],!r||!H4(r.charCodeAt(0)))switch(r){case"u":case"x":Rn[gt]==="{"?(++gt,e+=o4t()):e+=gH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Bk(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),gt<cc&&Bk(Rn[gt])&&(s=!0,i=i*8+"01234567".indexOf(Rn[gt++]),"0123".includes(r)&&gt<cc&&Bk(Rn[gt])&&(i=i*8+"01234567".indexOf(Rn[gt++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Rn[gt]===`
`&&++gt;else{if(H4(r.charCodeAt(0)))break;e+=r}return t!==""&&Ci({},Lu,xl),{type:gI,value:e,octal:s,start:n,end:gt}}function d4t(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ci({},mH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ci({},mH)}try{return new RegExp(e,t)}catch{return null}}function h4t(){var e,t,n,r,i;for(e=Rn[gt],gL(e==="/","Regular expression literal must start with a slash"),t=Rn[gt++],n=!1,r=!1;gt<cc;)if(e=Rn[gt++],t+=e,e==="\\")e=Rn[gt++],H4(e.charCodeAt(0))&&Ci({},JB),t+=e;else if(H4(e.charCodeAt(0)))Ci({},JB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ci({},JB),i=t.substr(1,t.length-2),{value:i,literal:t}}function p4t(){var e,t,n;for(t="",n="";gt<cc&&(e=Rn[gt],!!fO(e.charCodeAt(0)));)++gt,e==="\\"&&gt<cc?Ci({},Lu,xl):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ci({},mH,n),{value:n,literal:t}}function m4t(){var e,t,n,r;return os=null,Nke(),e=gt,t=h4t(),n=p4t(),r=d4t(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:gt}}function g4t(e){return e.type===cw||e.type===ix||e.type===pL||e.type===mL}function Oke(){if(Nke(),gt>=cc)return{type:mI,start:gt,end:gt};const e=Rn.charCodeAt(gt);return yI(e)?u4t():e===40||e===41||e===59?ZB():e===39||e===34?f4t():e===46?Py(Rn.charCodeAt(gt+1))?ede():ZB():Py(e)?ede():ZB()}function Qf(){const e=os;return gt=e.end,os=Oke(),gt=e.end,e}function Mke(){const e=gt;os=Oke(),gt=e}function y4t(e){const t=new U0(jkt);return t.elements=e,t}function tde(e,t,n){const r=new U0(e==="||"||e==="&&"?qkt:Ukt);return r.operator=e,r.left=t,r.right=n,r}function v4t(e,t){const n=new U0(zkt);return n.callee=e,n.arguments=t,n}function b4t(e,t,n){const r=new U0(Vkt);return r.test=e,r.consequent=t,r.alternate=n,r}function zJ(e){const t=new U0(Ike);return t.name=e,t}function ok(e){const t=new U0(Hkt);return t.value=e.value,t.raw=Rn.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function nde(e,t,n){const r=new U0(Wkt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function x4t(e){const t=new U0(Gkt);return t.properties=e,t}function rde(e,t,n){const r=new U0(Ykt);return r.key=t,r.value=n,r.kind=e,r}function _4t(e,t){const n=new U0(Kkt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ci(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(gL(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=gt,n.description=i,n}function yL(e){e.type===mI&&Ci(e,e4t),e.type===Jw&&Ci(e,Xkt),e.type===gI&&Ci(e,Qkt),e.type===cw&&Ci(e,Jkt),e.type===ix&&Ci(e,Zkt),Ci(e,Lu,e.value)}function fc(e){const t=Qf();(t.type!==Gf||t.value!==e)&&yL(t)}function Xs(e){return os.type===Gf&&os.value===e}function ej(e){return os.type===ix&&os.value===e}function w4t(){const e=[];for(gt=os.start,fc("[");!Xs("]");)Xs(",")?(Qf(),e.push(null)):(e.push(fw()),Xs("]")||fc(","));return Qf(),y4t(e)}function ide(){gt=os.start;const e=Qf();return e.type===gI||e.type===Jw?(e.octal&&Ci(e,Pke),ok(e)):zJ(e.value)}function E4t(){var e,t,n,r;if(gt=os.start,e=os,e.type===cw)return n=ide(),fc(":"),r=fw(),rde("init",n,r);if(e.type===mI||e.type===Gf)yL(e);else return t=ide(),fc(":"),r=fw(),rde("init",t,r)}function S4t(){var e=[],t,n,r,i={},s=String;for(gt=os.start,fc("{");!Xs("}");)t=E4t(),t.key.type===Ike?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ci({},t4t):i[r]=!0,e.push(t),Xs("}")||fc(",");return fc("}"),x4t(e)}function T4t(){fc("(");const e=VJ();return fc(")"),e}const C4t={if:1};function A4t(){var e,t,n;if(Xs("("))return T4t();if(Xs("["))return w4t();if(Xs("{"))return S4t();if(e=os.type,gt=os.start,e===cw||C4t[os.value])n=zJ(Qf().value);else if(e===gI||e===Jw)os.octal&&Ci(os,Pke),n=ok(Qf());else{if(e===ix)throw new Error(V4);e===pL?(t=Qf(),t.value=t.value==="true",n=ok(t)):e===mL?(t=Qf(),t.value=null,n=ok(t)):Xs("/")||Xs("/=")?(n=ok(m4t()),Mke()):yL(Qf())}return n}function k4t(){const e=[];if(fc("("),!Xs(")"))for(;gt<cc&&(e.push(fw()),!Xs(")"));)fc(",");return fc(")"),e}function R4t(){gt=os.start;const e=Qf();return g4t(e)||yL(e),zJ(e.value)}function I4t(){return fc("."),R4t()}function P4t(){fc("[");const e=VJ();return fc("]"),e}function N4t(){var e,t,n;for(e=A4t();;)if(Xs("."))n=I4t(),e=nde(".",e,n);else if(Xs("("))t=k4t(),e=v4t(e,t);else if(Xs("["))n=P4t(),e=nde("[",e,n);else break;return e}function sde(){const e=N4t();if(os.type===Gf&&(Xs("++")||Xs("--")))throw new Error(V4);return e}function GN(){var e,t;if(os.type!==Gf&&os.type!==ix)t=sde();else{if(Xs("++")||Xs("--"))throw new Error(V4);if(Xs("+")||Xs("-")||Xs("~")||Xs("!"))e=Qf(),t=GN(),t=_4t(e.value,t);else{if(ej("delete")||ej("void")||ej("typeof"))throw new Error(V4);t=sde()}}return t}function ode(e){let t=0;if(e.type!==Gf&&e.type!==ix)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function D4t(){var e,t,n,r,i,s,o,a,u,l;if(e=os,u=GN(),r=os,i=ode(r),i===0)return u;for(r.prec=i,Qf(),t=[e,os],o=GN(),s=[u,r,o];(i=ode(os))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=tde(a,u,o),s.push(n);r=Qf(),r.prec=i,s.push(r),t.push(os),n=GN(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=tde(s[l-1].value,s[l-2],n),l-=2;return n}function fw(){var e,t,n;return e=D4t(),Xs("?")&&(Qf(),t=fw(),fc(":"),n=fw(),e=b4t(e,t,n)),e}function VJ(){const e=fw();if(Xs(","))throw new Error(V4);return e}function HJ(e){Rn=e,gt=0,cc=Rn.length,os=null,Mke();const t=VJ();if(os.type!==mI)throw new Error("Unexpect token after expression.");return t}var Lke={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Fke(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&vt("Missing arguments to clamp function."),o.length>3&&vt("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&vt("Missing arguments to if function."),o.length>3&&vt("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function O4t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function $ke(e){e=e||{};const t=e.allowed?R0(e.allowed):{},n=e.forbidden?R0(e.forbidden):{},r=e.constants||Lke,i=(e.functions||Fke)(f),s=e.globalvar,o=e.fieldvar,a=Rr(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(cn(p))return p;const m=d[p.type];return m==null&&vt("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:gn(n,m)?vt("Illegal identifier: "+m):gn(r,m)?r[m]:gn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const b=f(p.property);return g===o&&(l[O4t(b)]=1),m&&(c-=1),g+(m?"."+b:"["+b+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&vt("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,b=gn(i,m)&&i[m];return b||vt("Unrecognized function: "+m),Rr(b)?b(g):b+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const M4t="Literal";var Ig,L4t=1,F4t=2,$4t=3,B4t=4,j4t=5,U4t=6,z4t=7,V4t=8,H4t=9;Ig={};Ig[L4t]="Boolean";Ig[F4t]="<end>";Ig[$4t]="Identifier";Ig[B4t]="Keyword";Ig[j4t]="Null";Ig[U4t]="Numeric";Ig[z4t]="Punctuator";Ig[V4t]="String";Ig[H4t]="RegularExpression";const ade=Symbol("vega_selection_getter");function Bke(e){return(!e.getter||!e.getter[ade])&&(e.getter=np(e.field),e.getter[ade]=!0),e.getter}const qJ="intersect",ude="union",q4t="vlMulti",W4t="vlPoint",lde="or",G4t="and",Am="_vgsid_",q4=np(Am),Y4t="E",K4t="R",X4t="R-E",Q4t="R-LE",J4t="R-RE",dO="index:unit";function cde(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=Bke(a)(e),rb(o)&&(o=sc(o)),rb(r[s])&&(r[s]=sc(r[s])),xt(r[s])&&rb(r[s][0])&&(r[s]=r[s].map(sc)),a.type===Y4t){if(xt(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===K4t){if(!ME(o,r[s]))return!1}else if(a.type===J4t){if(!ME(o,r[s],!0,!1))return!1}else if(a.type===X4t){if(!ME(o,r[s],!1,!1))return!1}else if(a.type===Q4t&&!ME(o,r[s],!1,!0))return!1;return!0}function Z4t(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[dO]&&r[dO].value:void 0,o=n===qJ,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=cde(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=cde(t,l),o^h)return h;return a&&o}const jke=GT(q4),eRt=jke.left,tRt=jke.right;function nRt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[dO]&&r[dO].value:void 0,o=n===qJ,a=q4(t),u=eRt(i,a);if(u===i.length||q4(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(tRt(i,a)-u<s.size)return!1}return!0}function rRt(e,t){return e.map(n=>kr(t.fields?{values:t.fields.map(r=>Bke(r)(n.datum))}:{[Am]:q4(n.datum)},t))}function iRt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,b,y,x=s.length,w=0,S,C;w<x;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(S=0,C=c.length;S<C;++S)h=c[S],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=b=h.type.charAt(0),y=tj[`${b}_union`],m[d]=y(g,ln(f[S]));n&&(g=a[d]||(a[d]=[]),g.push(ln(f).reduce((R,I,O)=>(R[c[O].field]=I,R),{})))}else h=Am,p=q4(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Am]:p}));if(t=t||ude,o[Am]?o[Am]=tj[`${Am}_${t}`](...Object.values(o[Am])):Object.keys(o).forEach(R=>{o[R]=Object.keys(o[R]).map(I=>o[R][I]).reduce((I,O)=>I===void 0?O:tj[`${u[R]}_${t}`](I,O))}),s=Object.keys(a),n&&s.length){const R=r?W4t:q4t;o[R]=t===ude?{[lde]:s.reduce((I,O)=>(I.push(...a[O]),I),[])}:{[G4t]:s.map(I=>({[lde]:a[I]}))}}return o}var tj={[`${Am}_union`]:Mlt,[`${Am}_intersect`]:Dlt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=sc(t[0]),r=sc(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=sc(t[0]),r=sc(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const sRt=":",oRt="@";function WJ(e,t,n,r){t[0].type!==M4t&&vt("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&pi(t).value,o="unit",a=oRt+o,u=sRt+i;s===qJ&&!gn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),gn(r,u)||(r[u]=n.getData(i).tuplesRef())}function Uke(e){const t=this.context.data[e];return t?t.values.value:[]}function aRt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function uRt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(rp).insert(t)),1}function lRt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const vI=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},cRt=vI("format"),zke=vI("timeFormat"),fRt=vI("utcFormat"),dRt=vI("timeParse"),hRt=vI("utcParse"),g5=new Date(2e3,0,1);function vL(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(g5.setYear(2e3),g5.setMonth(e),g5.setDate(t),zke.call(this,g5,n))}function pRt(e){return vL.call(this,e,1,"%B")}function mRt(e){return vL.call(this,e,1,"%b")}function gRt(e){return vL.call(this,0,2+e,"%A")}function yRt(e){return vL.call(this,0,2+e,"%a")}const vRt=":",bRt="@",yH="%",Vke="$";function GJ(e,t,n,r){t[0].type!==XS&&vt("First argument to data functions must be a string literal.");const i=t[0].value,s=vRt+i;if(!gn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function xRt(e,t,n,r){t[0].type!==XS&&vt("First argument to indata must be a string literal."),t[1].type!==XS&&vt("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=bRt+s;gn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function uf(e,t,n,r){if(t[0].type===XS)fde(n,r,t[0].value);else for(e in n.scales)fde(n,r,e)}function fde(e,t,n){const r=yH+n;if(!gn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Pg(e,t){if(Rr(e))return e;if(cn(e)){const n=t.scales[e];return n&&LEt(n.value)?n.value:void 0}}function _Rt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=uf,n._range=uf,n._scale=uf;const r=i=>"_["+(i.type===XS?Jt(yH+i.value):Jt(yH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function YJ(e,t){return function(n,r,i){if(n){const s=Pg(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const wRt=YJ("area",Rpt),ERt=YJ("bounds",Dpt),SRt=YJ("centroid",Bpt);function TRt(e,t){const n=Pg(e,(t||this).context);return n&&n.scale()}function CRt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function KJ(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function ARt(){return KJ(this.context.dataflow,"warn",arguments)}function kRt(){return KJ(this.context.dataflow,"info",arguments)}function RRt(){return KJ(this.context.dataflow,"debug",arguments)}function nj(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vH(e){const t=_b(e),n=nj(t.r),r=nj(t.g),i=nj(t.b);return .2126*n+.7152*r+.0722*i}function IRt(e,t){const n=vH(e),r=vH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function PRt(){const e=[].slice.call(arguments);return e.unshift({}),kr(...e)}function Hke(e,t){return e===t||e!==e&&t!==t?!0:xt(e)?xt(t)&&e.length===t.length?NRt(e,t):!1:un(e)&&un(t)?qke(e,t):!1}function NRt(e,t){for(let n=0,r=e.length;n<r;++n)if(!Hke(e[n],t[n]))return!1;return!0}function qke(e,t){for(const n in e)if(!Hke(e[n],t[n]))return!1;return!0}function dde(e){return t=>qke(e,t)}function DRt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?rp:xt(n)||zM(n)?n:dde(n),c.remove(f)),t&&c.insert(t),r&&(f=dde(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function ORt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function MRt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const hde={};function LRt(e,t){const n=hde[t]||(hde[t]=np(t));return xt(e)?e.map(n):n(e)}function XJ(e){return xt(e)||ArrayBuffer.isView(e)?e:null}function QJ(e){return XJ(e)||(cn(e)?e:null)}function FRt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return XJ(e).join(...n)}function $Rt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return QJ(e).indexOf(...n)}function BRt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return QJ(e).lastIndexOf(...n)}function jRt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return QJ(e).slice(...n)}function URt(e,t,n){return Rr(n)&&vt("Function argument passed to replace."),String(e).replace(t,n)}function zRt(e){return XJ(e).slice().reverse()}function VRt(e,t,n){return _Q(e||0,t||0,n||0)}function HRt(e,t){const n=Pg(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function qRt(e,t){const n=Pg(e,(t||this).context);return n?n.copy():void 0}function WRt(e,t){const n=Pg(e,(t||this).context);return n?n.domain():[]}function GRt(e,t,n){const r=Pg(e,(n||this).context);return r?xt(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function YRt(e,t){const n=Pg(e,(t||this).context);return n&&n.range?n.range():[]}function KRt(e,t,n){const r=Pg(e,(n||this).context);return r?r(t):void 0}function XRt(e,t,n,r,i){e=Pg(e,(i||this).context);const s=MAe(t,n);let o=e.domain(),a=o[0],u=pi(o),l=pc;return u-a?l=EAe(e,a,u):e=(e.interpolator?Ii("sequential")().interpolator(e.interpolator()):Ii("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==pi(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function QRt(e,t,n){const r=Pg(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function JRt(e){let t=null;return function(n){return n?B4(n,t=t||WS(e)):e}}const Wke=e=>e.data;function Gke(e,t){const n=Uke.call(t,e);return n.root&&n.root.lookup||{}}function ZRt(e,t,n){const r=Gke(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(Wke):void 0}function eIt(e,t){const n=Gke(e,this)[t];return n?n.ancestors().map(Wke):void 0}const Yke=()=>typeof window<"u"&&window||null;function tIt(){const e=Yke();return e?e.screen:{}}function nIt(){const e=Yke();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function rIt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Kke(e,t,n){if(!e)return[];const[r,i]=e,s=new Wa().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return N3e(o,s,iIt(t))}function iIt(e){let t=null;if(e){const n=ln(e.marktype),r=ln(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function sIt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ln(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function oIt(e){return ln(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function aIt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Wa().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),Kke([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>uIt(u.x,u.y,t))}function uIt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const W4={random(){return sp()},cumulativeNormal:GM,cumulativeLogNormal:UX,cumulativeUniform:qX,densityNormal:LX,densityLogNormal:jX,densityUniform:HX,quantileNormal:YM,quantileLogNormal:zX,quantileUniform:WX,sampleNormal:WM,sampleLogNormal:BX,sampleUniform:VX,isArray:xt,isBoolean:rx,isDate:rb,isDefined(e){return e!==void 0},isNumber:Ri,isObject:un,isRegExp:DTe,isString:cn,isTuple:zM,isValid(e){return e!=null&&e===e},toBoolean:xX,toDate(e){return _X(e)},toNumber:sc,toString:wX,indexof:$Rt,join:FRt,lastindexof:BRt,replace:URt,reverse:zRt,slice:jRt,flush:PTe,lerp:OTe,merge:PRt,pad:FTe,peek:pi,pluck:LRt,span:JR,inrange:ME,truncate:$Te,rgb:_b,lab:K8,hcl:X8,hsl:G8,luminance:vH,contrast:IRt,sequence:Kd,format:cRt,utcFormat:fRt,utcParse:hRt,utcOffset:JTe,utcSequence:tCe,timeFormat:zke,timeParse:dRt,timeOffset:QTe,timeSequence:eCe,timeUnitSpecifier:jTe,monthFormat:pRt,monthAbbrevFormat:mRt,dayFormat:gRt,dayAbbrevFormat:yRt,quarter:ATe,utcquarter:kTe,week:zTe,utcweek:qTe,dayofyear:UTe,utcdayofyear:HTe,warn:ARt,info:kRt,debug:RRt,extent(e){return dg(e)},inScope:CRt,intersect:Kke,clampRange:RTe,pinchDistance:ORt,pinchAngle:MRt,screen:tIt,containerSize:rIt,windowSize:nIt,bandspace:VRt,setdata:uRt,pathShape:JRt,panLinear:ETe,panLog:STe,panPow:TTe,panSymlog:CTe,zoomLinear:pX,zoomLog:mX,zoomPow:qD,zoomSymlog:gX,encode:lRt,modify:DRt,lassoAppend:sIt,lassoPath:oIt,intersectLasso:aIt},lIt=["view","item","group","xy","x","y"],cIt="event.vega.",Xke="this.",JJ={},Qke={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Jt(Vke+e)}]`,functions:fIt,constants:Lke,visitors:JJ},Jke=$ke(Qke);function fIt(e){const t=Fke(e);lIt.forEach(n=>t[n]=cIt+n);for(const n in W4)t[n]=Xke+n;return kr(t,_Rt(e,W4,JJ)),t}function Ea(e,t,n){return arguments.length===1?W4[e]:(W4[e]=t,n&&(JJ[e]=n),Jke.functions[e]=Xke+e,this)}Ea("bandwidth",HRt,uf);Ea("copy",qRt,uf);Ea("domain",WRt,uf);Ea("range",YRt,uf);Ea("invert",GRt,uf);Ea("scale",KRt,uf);Ea("gradient",XRt,uf);Ea("geoArea",wRt,uf);Ea("geoBounds",ERt,uf);Ea("geoCentroid",SRt,uf);Ea("geoShape",QRt,uf);Ea("geoScale",TRt,uf);Ea("indata",aRt,xRt);Ea("data",Uke,GJ);Ea("treePath",ZRt,GJ);Ea("treeAncestors",eIt,GJ);Ea("vlSelectionTest",Z4t,WJ);Ea("vlSelectionIdTest",nRt,WJ);Ea("vlSelectionResolve",iRt,WJ);Ea("vlSelectionTuples",rRt);function pg(e,t){const n={};let r;try{e=cn(e)?e:Jt(e)+"",r=HJ(e)}catch{vt("Expression parse error: "+e)}r.visit(s=>{if(s.type!==Rke)return;const o=s.callee.name,a=Qke.visitors[o];a&&a(o,s.arguments,t,n)});const i=Jke(r);return i.globals.forEach(s=>{const o=Vke+s;!gn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:kr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function dIt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const hIt=R0(["rule"]),pde=R0(["group","image","rect"]);function pIt(e,t){let n="";return hIt[t]||(e.x2&&(e.x?(pde[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(pde[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function ZJ(e){return(e+"").toLowerCase()}function mIt(e){return ZJ(e)==="operator"}function gIt(e){return ZJ(e)==="collect"}function u3(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function yIt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var vIt={operator:(e,t)=>u3(e,["_"],t.code),parameter:(e,t)=>u3(e,["datum","_"],t.code),event:(e,t)=>u3(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return u3(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Jt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=pIt(r,n),i+="return m;",u3(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Jt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),yIt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function bIt(e){const t=this;mIt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function xIt(e){const t=this;if(e.params){const n=t.get(e.id);n||vt("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function _It(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=xt(i)?i.map(s=>mde(s,n,t)):mde(i,n,t)}return t}function mde(e,t,n){if(!e||!un(e))return e;for(let r=0,i=gde.length,s;r<i;++r)if(s=gde[r],gn(e,s.key))return s.parse(e,t,n);return e}var gde=[{key:"$ref",parse:wIt},{key:"$key",parse:SIt},{key:"$expr",parse:EIt},{key:"$field",parse:TIt},{key:"$encode",parse:AIt},{key:"$compare",parse:CIt},{key:"$context",parse:kIt},{key:"$subflow",parse:RIt},{key:"$tupleid",parse:IIt}];function wIt(e,t){return t.get(e.$ref)||vt("Operator not defined: "+e.$ref)}function EIt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=dd(t.parameterExpression(e.$expr),e.$fields))}function SIt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=bX(e.$key,e.$flat,t.expr.codegen))}function TIt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=np(e.$field,e.$name,t.expr.codegen))}function CIt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ln(e.$compare).map(i=>i&&i.$tupleid?Fn:i);return t.fn[n]||(t.fn[n]=yX(r,e.$order,t.expr.codegen))}function AIt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=dd(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function kIt(e,t){return t}function RIt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function IIt(){return Fn}function PIt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&vt("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function NIt(e){var t=this,n=un(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||vt("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const DIt={skip:!0};function OIt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function MIt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],DIt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(rp).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function Zke(e,t,n,r){return new e4e(e,t,n,r)}function e4e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||vIt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function yde(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}e4e.prototype=yde.prototype={fork(){const e=new yde(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),gIt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[ZJ(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:dIt,parseOperator:bIt,parseOperatorParameters:xIt,parseParameters:_It,parseStream:PIt,parseUpdate:NIt,getState:OIt,setState:MIt};function LIt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),t4e(t,e.description()))}function t4e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function FIt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const rj="default";function $It(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:rj,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?cn(i)?i:i.user:rj,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return cn(r)||(i=r.item,r=r.user),bH(e,r&&r!==rj?r:i||r),i},{cursor:t})}function bH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function hO(e,t){var n=e._runtime.data;return gn(n,t)||vt("Unrecognized data set: "+t),n[t]}function BIt(e,t){return arguments.length<2?hO(this,e).values.value:bL.call(this,e,Xw().remove(rp).insert(t))}function bL(e,t){_Ce(t)||vt("Second argument to changes must be a changeset.");const n=hO(this,e);return n.modified=!0,this.pulse(n.input,t)}function jIt(e,t){return bL.call(this,e,Xw().insert(t))}function UIt(e,t){return bL.call(this,e,Xw().remove(t))}function n4e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function r4e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function xL(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function zIt(e){var t=xL(e),n=n4e(e),r=r4e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function VIt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=xL(e),o=t.changedTouches?t.changedTouches[0]:t,s=fL(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=HIt(e,n,s),t}function HIt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;cn(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:mc(e),item:mc(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const vde="view",qIt="timer",WIt="window",GIt={trap:!1};function YIt(e){const t=kr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{xt(r[s])&&(r[s]=R0(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function i4e(e,t,n,r){e._eventListeners.push({type:n,sources:ln(t),handler:r})}function KIt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function y5(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||un(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function XIt(e,t,n){var r=this,i=new qM(n),s=function(l,c){r.runAsync(null,()=>{e===vde&&KIt(r,t)&&l.preventDefault(),i.receive(VIt(r,l,c))})},o;if(e===qIt)y5(r,"timer",t)&&r.timer(s,t);else if(e===vde)y5(r,"view",t)&&r.addEventListener(t,s,GIt);else if(e===WIt?y5(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&y5(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);i4e(r,o,t,s)}return i}function bde(e){return e.item}function xde(e){return e.item.mark.source}function _de(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function QIt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",bde),xde,_de(e)),this.on(this.events("view","pointerout",bde),xde,_de(t)),this}function JIt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function rh(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const ZIt="vega-bind",e6t="vega-bind-name",t6t="vega-bind-radio";function n6t(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=vX(r.debounce,i.update))),(r.input==null&&r.element?r6t:s6t)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function r6t(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),i4e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(i6t(i))}}function i6t(e){return typeof Event<"u"?new Event(e):{type:e}}function s6t(e,t,n,r){const i=r.signal(n.signal),s=rh("div",{class:ZIt}),o=n.input==="radio"?s:s.appendChild(rh("label"));o.appendChild(rh("span",{class:e6t},n.name||n.signal)),t.appendChild(s);let a=o6t;switch(n.input){case"checkbox":a=a6t;break;case"select":a=u6t;break;case"radio":a=l6t;break;case"range":a=c6t;break}a(e,o,n,i)}function o6t(e,t,n,r){const i=rh("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function a6t(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=rh("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function u6t(e,t,n,r){const i=rh("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};pO(o,r)&&(u.selected=!0),i.appendChild(rh("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(pO(n.options[a],o)){i.selectedIndex=a;return}}}function l6t(e,t,n,r){const i=rh("span",{class:t6t}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};pO(o,r)&&(u.checked=!0);const l=rh("input",u);l.addEventListener("change",()=>e.update(o));const c=rh("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)pO(a[l].value,o)&&(a[l].checked=!0)}}function c6t(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||xb(s,i,100),a=rh("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=rh("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function pO(e,t){return e===t||e+""==t+""}function s4e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,n4e(e),r4e(e),xL(e),i,s).background(e.background())}function eZ(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function f6t(e,t,n,r){const i=new r(e.loader(),eZ(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,xL(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function d6t(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=dL(r);e=n._el=e?ij(n,e,!0):null,LIt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||pI,a=e?s.renderer:s.headless;return n._renderer=a?s4e(n,n._renderer,e,a):null,n._handler=f6t(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=ij(n,t,!0):e.appendChild(rh("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=ij(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{n6t(n,u.element||t,u)})),n}function ij(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const l3=e=>+e||0,h6t=e=>({top:e,bottom:e,left:e,right:e});function wde(e){return un(e)?{top:l3(e.top),bottom:l3(e.bottom),left:l3(e.left),right:l3(e.right)}:h6t(l3(e))}async function tZ(e,t,n,r){const i=dL(t),s=i&&i.headless;return s||vt("Unrecognized renderer type: "+t),await e.runAsync(),s4e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function p6t(e,t){e!==Hv.Canvas&&e!==Hv.SVG&&e!==Hv.PNG&&vt("Unrecognized image type: "+e);const n=await tZ(this,e,t);return e===Hv.SVG?m6t(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function m6t(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function g6t(e,t){return(await tZ(this,Hv.Canvas,e,t)).canvas()}async function y6t(e){return(await tZ(this,Hv.SVG,e)).svg()}function v6t(e,t,n){return Zke(e,zS,W4,n).parse(t)}function b6t(e){var t=this._runtime.scales;return gn(t,e)||vt("Unrecognized scale or projection: "+e),t[e].value}var o4e="width",a4e="height",nZ="padding",Ede={skip:!0};function u4e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===nZ?r.left+r.right:0)}function l4e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===nZ?r.top+r.bottom:0)}function x6t(e){var t=e._signals,n=t[o4e],r=t[a4e],i=t[nZ];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=u4e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=l4e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function _6t(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(o4e,n,Ede),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(a4e,r,Ede),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function w6t(e){return this._runtime.getState(e||{data:E6t,signals:S6t,recurse:!0})}function E6t(e,t){return t.modified&&xt(t.input.value)&&!e.startsWith("_:vega:_")}function S6t(e,t){return!(e==="parent"||t instanceof zS.proxy)}function T6t(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function C6t(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(sdt(n,t))}function A6t(e,t,n,r){const i=e.element();i&&i.setAttribute("title",k6t(r))}function k6t(e){return e==null?"":xt(e)?c4e(e):un(e)&&!rb(e)?R6t(e):e+""}function R6t(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(xt(n)?c4e(n):f4e(n))}).join(`
`)}function c4e(e){return"["+e.map(f4e).join(", ")+"]"}function f4e(e){return xt(e)?"[…]":un(e)&&!rb(e)?"{…}":e}function I6t(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function d4e(e,t){const n=this;if(t=t||{},iS.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=kr({},e.locale,t.locale);n.locale(fCe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Hv.Canvas,n._scenegraph=new s3e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||A6t,n._redraw=!0,n._handler=new pI().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=YIt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=v6t(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:kr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=u4e(n,n._width),n._viewHeight=l4e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,x6t(n),FIt(n),$It(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function v5(e,t){return gn(e._signals,t)?e._signals[t]:vt("Unrecognized signal name: "+Jt(t))}function h4e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Sde(e,t,n,r){let i=h4e(n,r);return i||(i=eZ(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Tde(e,t,n){const r=h4e(t,n);return r&&t._targets.remove(r),e}en(d4e,iS,{async evaluate(e,t,n){if(await iS.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,zIt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&ON(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&t4e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=v5(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",wde(e)):wde(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(dL(e)||vt("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(iS.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(v5(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:_6t,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=eZ(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Sde(this,e,v5(this,e),t)},removeSignalListener(e,t){return Tde(this,v5(this,e),t)},addDataListener(e,t){return Sde(this,e,hO(this,e).values,t)},removeDataListener(e,t){return Tde(this,hO(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=bH(this,null);this._globalCursor=!!e,t&&bH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:C6t,events:XIt,finalize:JIt,hover:QIt,data:BIt,change:bL,insert:jIt,remove:UIt,scale:b6t,initialize:d6t,toImageURL:p6t,toCanvas:g6t,toSVG:y6t,getState:w6t,setState:T6t,_watchPixelRatio:I6t});const P6t="view",mO="[",gO="]",p4e="{",m4e="}",N6t=":",g4e=",",D6t="@",O6t=">",M6t=/[[\]{}]/,L6t={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let y4e,v4e;function sx(e,t,n){return y4e=t||P6t,v4e=n||L6t,b4e(e.trim()).map(xH)}function F6t(e){return v4e[e]}function jk(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function b4e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=jk(e,i,g4e,mO+p4e,gO+m4e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function xH(e){return e[0]==="["?$6t(e):B6t(e)}function $6t(e){const t=e.length;let n=1,r;if(n=jk(e,n,gO,mO,gO),n===t)throw"Empty between selector: "+e;if(r=b4e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==O6t)throw"Expected '>' after between selector: "+e;r=r.map(xH);const i=xH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function B6t(e){const t={source:y4e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===m4e){if(a=e.lastIndexOf(p4e),a>=0){try{r=j6t(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===D6t&&(i=++a),u=jk(e,a,N6t),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=jk(e,a,mO),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=jk(e,a,gO),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==mO)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||M6t.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):F6t(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function j6t(e){const t=e.split(g4e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function U6t(e){return un(e)?e:{type:e||"pad"}}const c3=e=>+e||0,z6t=e=>({top:e,bottom:e,left:e,right:e});function V6t(e){return un(e)?e.signal?e:{top:c3(e.top),bottom:c3(e.bottom),left:c3(e.left),right:c3(e.right)}:z6t(c3(e))}const Fu=e=>un(e)&&!xt(e)?kr({},e):{value:e};function Cde(e,t,n,r){return n!=null?(un(n)&&!xt(n)||xt(n)&&n.length&&un(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function kl(e,t,n){for(const r in t)Cde(e,r,t[r]);for(const r in n)Cde(e,r,n[r],"update")}function lC(e,t,n){for(const r in t)n&&gn(n,r)||(e[r]=kr(e[r]||{},t[r]));return e}function CE(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const rZ="mark",iZ="frame",sZ="scope",H6t="axis",q6t="axis-domain",W6t="axis-grid",G6t="axis-label",Y6t="axis-tick",K6t="axis-title",X6t="legend",Q6t="legend-band",J6t="legend-entry",Z6t="legend-gradient",x4e="legend-label",e5t="legend-symbol",t5t="legend-title",n5t="title",r5t="title-text",i5t="title-subtitle";function s5t(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!CE(u,e)&&sj(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===iZ?i.group:n===rZ?kr({},i.mark,i[t]):null;for(u in c)l=CE(u,e)||(u==="fill"||u==="stroke")&&(CE("fill",e)||CE("stroke",e)),l||sj(s,u,c[u]);ln(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)CE(h,e)||sj(s,h,d[h])}),e=kr({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=kr(o,e.enter),a&&(e.update=kr(a,e.update)),e}function sj(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const _4e=e=>cn(e)?Jt(e):e.signal?`(${e.signal})`:w4e(e);function _L(e){if(e.gradient!=null)return a5t(e);let t=e.signal?`(${e.signal})`:e.color?o5t(e.color):e.field!=null?w4e(e.field):e.value!==void 0?Jt(e.value):void 0;return e.scale!=null&&(t=u5t(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${YN(e.exponent)})`),e.mult!=null&&(t+=`*${YN(e.mult)}`),e.offset!=null&&(t+=`+${YN(e.offset)}`),e.round&&(t=`round(${t})`),t}const b5=(e,t,n,r)=>`(${e}(${[t,n,r].map(_L).join(",")})+'')`;function o5t(e){return e.c?b5("hcl",e.h,e.c,e.l):e.h||e.s?b5("hsl",e.h,e.s,e.l):e.l||e.a?b5("lab",e.l,e.a,e.b):e.r||e.g||e.b?b5("rgb",e.r,e.g,e.b):null}function a5t(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Jt(n));for(;t.length&&pi(t)==null;)t.pop();return t.unshift(_4e(e.gradient)),`gradient(${t.join(",")})`}function YN(e){return un(e)?"("+_L(e)+")":e}function w4e(e){return E4e(un(e)?e:{datum:e})}function E4e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):vt("Invalid field reference: "+Jt(e));return e.signal||(r=cn(r)?Ag(r).map(Jt).join("]["):E4e(r)),t+"["+r+"]"}function u5t(e,t){const n=_4e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+YN(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function l5t(e){let t="";return e.forEach(n=>{const r=_L(n);t+=n.test?`(${n.test})?${r}:`:r}),pi(t)===":"&&(t+="null"),t}function S4e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=s5t(e,t,n,r,i.config);for(const a in e)o[a]=c5t(e[a],t,s,i);return s}function c5t(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=d5t(f5t(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function f5t(e){return xt(e)?l5t(e):_L(e)}function d5t(e,t,n,r){const i=pg(e,t);return i.$fields.forEach(s=>r[s]=1),kr(n,i.$params),i.$expr}const h5t="outer",p5t=["value","update","init","react","bind"];function Ade(e,t){vt(e+' for "outer" push: '+Jt(t))}function T4e(e,t){const n=e.name;if(e.push===h5t)t.signals[n]||Ade("No prior signal definition",n),p5t.forEach(r=>{e[r]!==void 0&&Ade("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function _H(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function wL(e,t,n,r){return new _H(e,t,n,r)}function yO(e,t){return wL("operator",e,t)}function Ln(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function G4(e,t){return t?{$field:e,$name:t}:{$field:e}}const wH=G4("key");function kde(e,t){return{$compare:e,$order:t}}function m5t(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const g5t="ascending",y5t="descending";function v5t(e){return un(e)?(e.order===y5t?"-":"+")+EL(e.op,e.field):""}function EL(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const oZ="scope",EH="view";function yu(e){return e&&e.signal}function b5t(e){return e&&e.expr}function KN(e){if(yu(e))return!0;if(un(e)){for(const t in e)if(KN(e[t]))return!0}return!1}function i0(e,t){return e??t}function j_(e){return e&&e.signal||e}const Rde="timer";function Y4(e,t){return(e.merge?_5t:e.stream?w5t:e.type?E5t:vt("Invalid stream specification: "+Jt(e)))(e,t)}function x5t(e){return e===oZ?EH:e||EH}function _5t(e,t){const n=e.merge.map(i=>Y4(i,t)),r=aZ({merge:n},e,t);return t.addStream(r).id}function w5t(e,t){const n=Y4(e.stream,t),r=aZ({stream:n},e,t);return t.addStream(r).id}function E5t(e,t){let n;e.type===Rde?(n=t.event(Rde,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(x5t(e.source),e.type);const r=aZ({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function aZ(e,t,n){let r=t.between;return r&&(r.length!==2&&vt('Stream "between" parameter must have 2 entries: '+Jt(t)),e.between=[Y4(r[0],n),Y4(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(S5t(t.marktype,t.markname,t.markrole)),t.source===oZ&&r.push("inScope(event.item)"),r.length&&(e.filter=pg("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function S5t(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const T5t={code:"_.$value",ast:{type:"Identifier",value:"value"}};function C5t(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||vt("Signal update missing events specification."),cn(s)&&(s=sx(s,t.isSubscope()?oZ:EH)),s=ln(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[k5t(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&vt("Signal encode and update are mutually exclusive."),o="encode(item(),"+Jt(r)+")"),i.update=cn(o)?pg(o,t):o.expr!=null?pg(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:T5t,$params:{$value:t.signalRef(o.signal)}}:vt("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(kr(A5t(u,t),i)))}function A5t(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Y4(e,t)}}function k5t(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function R5t(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?vt("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=pg(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>C5t(i,t,n.id))}const vs=e=>(t,n,r)=>wL(e,n,t||void 0,r),C4e=vs("aggregate"),I5t=vs("axisticks"),A4e=vs("bound"),z0=vs("collect"),Ide=vs("compare"),P5t=vs("datajoin"),k4e=vs("encode"),N5t=vs("expression"),D5t=vs("facet"),O5t=vs("field"),M5t=vs("key"),L5t=vs("legendentries"),F5t=vs("load"),$5t=vs("mark"),B5t=vs("multiextent"),j5t=vs("multivalues"),U5t=vs("overlap"),z5t=vs("params"),R4e=vs("prefacet"),V5t=vs("projection"),H5t=vs("proxy"),q5t=vs("relay"),I4e=vs("render"),W5t=vs("scale"),Zw=vs("sieve"),G5t=vs("sortitems"),P4e=vs("viewlayout"),Y5t=vs("values");let K5t=0;const N4e={min:"min",max:"max",count:"sum"};function X5t(e,t){const n=e.type||"linear";yAe(n)||vt("Unrecognized scale type: "+Jt(n)),t.addScale(e.name,{type:n,domain:void 0})}function Q5t(e,t){const n=t.getScale(e.name).params;let r;n.domain=D4e(e.domain,e,t),e.range!=null&&(n.range=M4e(e,t,n)),e.interpolate!=null&&aPt(e.interpolate,n),e.nice!=null&&(n.nice=oPt(e.nice,t)),e.bins!=null&&(n.bins=sPt(e.bins,t));for(r in e)gn(n,r)||r==="name"||(n[r]=Xh(e[r],t))}function Xh(e,t){return un(e)?e.signal?t.signalRef(e.signal):vt("Unsupported object: "+Jt(e)):e}function XN(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Xh(n,t))}function SL(e){vt("Can not find data set: "+Jt(e))}function D4e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&vt("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(xt(e)?J5t:e.fields?ePt:Z5t)(e,t,n)}function J5t(e,t,n){return e.map(r=>Xh(r,n))}function Z5t(e,t,n){const r=n.getData(e.data);return r||SL(e.data),qS(t.type)?r.valuesRef(n,e.field,O4e(e.sort,!1)):xAe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function ePt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=cn(o)?{data:r,field:o}:xt(o)||o.signal?tPt(o,n):o,s.push(o),s),[]);return(qS(t.type)?nPt:xAe(t.type)?rPt:iPt)(e,n,i)}function tPt(e,t){const n="_:vega:_"+K5t++,r=z0({});if(xt(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Jt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Zw({})]),{data:n,field:"data"}}function nPt(e,t,n){const r=O4e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||SL(l.data),c.countsRef(t,l.field,r)}),a={groupby:wH,pulse:o};r&&(i=r.op||"count",s=r.field?EL(i,r.field):"count",a.ops=[N4e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(C4e(a));const u=t.add(z0({pulse:Ln(i)}));return s=t.add(Y5t({field:wH,sort:t.sortRef(r),pulse:Ln(u)})),Ln(s)}function O4e(e,t){return e&&(!e.field&&!e.op?un(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?vt("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!N4e[e.op]&&vt("Multiple domain scales can not be sorted using "+e.op)),e}function rPt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||SL(i.data),s.domainRef(t,i.field)});return Ln(t.add(j5t({values:r})))}function iPt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||SL(i.data),s.extentRef(t,i.field)});return Ln(t.add(B5t({extents:r})))}function sPt(e,t){return e.signal||xt(e)?XN(e,t):t.objectProperty(e)}function oPt(e,t){return e.signal?t.signalRef(e.signal):un(e)?{interval:Xh(e.interval),step:Xh(e.step)}:Xh(e)}function aPt(e,t){t.interpolate=Xh(e.type||e),e.gamma!=null&&(t.interpolateGamma=Xh(e.gamma))}function M4e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(cn(i)){if(r&&gn(r,i))return e=kr({},e,{range:r[i]}),M4e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=qS(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:vt("Unrecognized scale range value: "+Jt(i))}else if(i.scheme){n.scheme=xt(i.scheme)?XN(i.scheme,t):Xh(i.scheme,t),i.extent&&(n.schemeExtent=XN(i.extent,t)),i.count&&(n.schemeCount=Xh(i.count,t));return}else if(i.step){n.rangeStep=Xh(i.step,t);return}else{if(qS(e.type)&&!xt(i))return D4e(i,e,t);xt(i)||vt("Unsupported range type: "+Jt(i))}return i.map(s=>(xt(s)?XN:Xh)(s,t))}function uPt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=SH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=SH(n[i],i,t));t.addProjection(e.name,r)}function SH(e,t,n){return xt(e)?e.map(r=>SH(r,t,n)):un(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:vt("Unsupported parameter object: "+Jt(e)):e}const V0="top",cC="left",fC="right",Pb="bottom",L4e="center",lPt="vertical",cPt="start",fPt="middle",dPt="end",TH="index",uZ="label",hPt="offset",QS="perc",pPt="perc2",Jh="value",bI="guide-label",lZ="guide-title",mPt="group-title",gPt="group-subtitle",Pde="symbol",QN="gradient",CH="discrete",AH="size",yPt="shape",vPt="fill",bPt="stroke",xPt="strokeWidth",_Pt="strokeDash",wPt="opacity",cZ=[AH,yPt,vPt,bPt,xPt,_Pt,wPt],xI={name:1,style:1,interactive:1},wi={value:0},Zh={value:1},TL="group",F4e="rect",fZ="rule",EPt="symbol",e2="text";function K4(e){return e.type=TL,e.interactive=e.interactive||!1,e}function hd(e,t){const n=(r,i)=>i0(e[r],i0(t[r],i));return n.isVertical=r=>lPt===i0(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>i0(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>i0(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>i0(e.columns,i0(t.columns,+n.isVertical(!0))),n}function $4e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function SPt(e,t,n){const r=t.config.style[n];return r&&r[e]}function CL(e,t,n){return`item.anchor === '${cPt}' ? ${e} : item.anchor === '${dPt}' ? ${t} : ${n}`}const dZ=CL(Jt(cC),Jt(fC),Jt(L4e));function TPt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},un(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function B4e(e,t){return t?e?un(e)?Object.assign({},e,{offset:B4e(e.offset,t)}):{value:e,offset:t}:t:e}function gh(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=lC(e.encode,t,xI)):e.interactive=!1,e}function CPt(e,t,n,r){const i=hd(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:wi,x:wi,y:wi,width:Fu(f),height:Fu(d)},update:kr({},u,{opacity:Zh,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:wi}};return kl(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),gh({type:F4e,role:Z6t,encode:h},r)}function APt(e,t,n,r,i){const s=hd(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:wi,fill:{scale:t,field:Jh}};p[l]={signal:h+"datum."+QS,mult:u},p[c]=wi,p[f]={signal:h+"datum."+pPt,mult:u},p[d]=Fu(a);const m={enter:p,update:kr({},p,{opacity:Zh}),exit:{opacity:wi}};return kl(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),gh({type:F4e,role:Q6t,key:Jh,from:i,encode:m},r)}const kPt=`datum.${QS}<=0?"${cC}":datum.${QS}>=1?"${fC}":"${L4e}"`,RPt=`datum.${QS}<=0?"${Pb}":datum.${QS}>=1?"${V0}":"${fPt}"`;function Nde(e,t,n,r){const i=hd(e,t),s=i.isVertical(),o=Fu(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:wi},update:c={opacity:Zh,text:{field:uZ}},exit:{opacity:wi}};return kl(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:i0(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:RPt},f="y",d="x",h="1-"):(l.align=c.align={signal:kPt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+QS,mult:a},l[d]=c[d]=o,o.offset=i0(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+TH}:void 0,gh({type:e2,role:x4e,style:bI,key:Jh,from:r,encode:p,overlap:u},n)}function IPt(e,t,n,r,i){const s=hd(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${hPt} : datum.${AH}`,h=l?Fu(l):{field:AH},p=`datum.${TH}`,m=`max(1, ${i})`;let g,b,y,x,w;h.mult=.5,g={enter:b={opacity:wi,x:{signal:d,mult:.5,offset:c},y:h},update:y={opacity:Zh,x:b.x,y:b.y},exit:{opacity:wi}};let S=null,C=null;e.fill||(S=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),kl(g,{fill:s("symbolFillColor",S),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",C),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),cZ.forEach(M=>{e[M]&&(y[M]=b[M]={scale:e[M],field:Jh})});const R=gh({type:EPt,role:e5t,key:Jh,from:f,clip:l?!0:void 0,encode:g},n.symbols),I=Fu(c);I.offset=s("labelOffset"),g={enter:b={opacity:wi,x:{signal:d,offset:I},y:h},update:y={opacity:Zh,text:{field:uZ},x:b.x,y:b.y},exit:{opacity:wi}},kl(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const O=gh({type:e2,role:x4e,style:bI,key:Jh,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:wi,height:l?Fu(l):wi,opacity:wi},exit:{opacity:wi},update:y={opacity:Zh,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(x=`ceil(item.mark.items.length / ${m})`,y.row.signal=`${p}%${x}`,y.column.signal=`floor(${p} / ${x})`,w={field:["row",p]}):(y.row.signal=`floor(${p} / ${m})`,y.column.signal=`${p} % ${m}`,w={field:p}),y.column.signal=`(${i})?${y.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:TH}},K4({role:sZ,from:r,encode:lC(g,o,xI),marks:[R,O],name:u,interactive:a,sort:w})}function PPt(e,t){const n=hd(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const hZ='item.orient === "left"',pZ='item.orient === "right"',AL=`(${hZ} || ${pZ})`,NPt=`datum.vgrad && ${AL}`,DPt=CL('"top"','"bottom"','"middle"'),OPt=CL('"right"','"left"','"center"'),MPt=`datum.vgrad && ${pZ} ? (${OPt}) : (${AL} && !(datum.vgrad && ${hZ})) ? "left" : ${dZ}`,LPt=`item._anchor || (${AL} ? "middle" : "start")`,FPt=`${NPt} ? (${hZ} ? -90 : 90) : 0`,$Pt=`${AL} ? (datum.vgrad ? (${pZ} ? "bottom" : "top") : ${DPt}) : "top"`;function BPt(e,t,n,r){const i=hd(e,t),s={enter:{opacity:wi},update:{opacity:Zh,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:wi}};return kl(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:LPt},angle:{signal:FPt},align:{signal:MPt},baseline:{signal:$Pt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),gh({type:e2,role:t5t,style:lZ,from:r,encode:s},n)}function jPt(e,t){let n;return un(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Dde(e.path)+")":e.sphere&&(n="geoShape("+Dde(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Dde(e){return un(e)&&e.signal?e.signal:Jt(e)}function j4e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===TL?sZ:t||rZ}function UPt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||j4e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function zPt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function mZ(e,t){const n=SCe(e.type);n||vt("Unrecognized transform type: "+Jt(e.type));const r=wL(n.type.toLowerCase(),null,U4e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function U4e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=VPt(o,t,n)}return r}function VPt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return HPt(e,t,n);if(i===void 0){e.required&&vt("Missing required "+Jt(t.type)+" parameter: "+Jt(e.name));return}else{if(r==="param")return qPt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!yu(i)?i.map(s=>Ode(e,s,n)):Ode(e,i,n)}function Ode(e,t,n){const r=e.type;if(yu(t))return Lde(r)?vt("Expression references can not be signals."):oj(r)?n.fieldRef(t):Fde(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||oj(r);return i&&WPt(t)?n.exprRef(t.expr,t.as):i&&GPt(t)?G4(t.field,t.as):Lde(r)?pg(t,n):YPt(r)?Ln(n.getData(t).values):oj(r)?G4(t):Fde(r)?n.compareRef(t):t}}function HPt(e,t,n){return cn(t.from)||vt('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function qPt(e,t,n){const r=t[e.name];return e.array?(xt(r)||vt("Expected an array of sub-parameters. Instead: "+Jt(r)),r.map(i=>Mde(e,i,n))):Mde(e,r,n)}function Mde(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||vt("Unsupported parameter: "+Jt(t));const s=kr(U4e(i,t,n),i.key);return Ln(n.add(z5t(s)))}const WPt=e=>e&&e.expr,GPt=e=>e&&e.field,YPt=e=>e==="data",Lde=e=>e==="expr",oj=e=>e==="field",Fde=e=>e==="compare";function KPt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||vt("Only group marks can be faceted."),r.field!=null?o=a=JN(r,n):(e.data?a=Ln(n.getData(e.data).aggregate):(s=mZ(kr({type:"aggregate",groupby:ln(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=JN(r,n),o=a=Ln(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Ln(n.add(z0(null,[{}]))),o||(o=JN(e,n)),{key:i,pulse:o,parent:a}}function JN(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ln(t.getData(e.data).output)}function dw(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}dw.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Ln(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new dw(e,s,i,r,o)};function z4e(e){return cn(e)?e:null}function $de(e,t,n){const r=EL(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function f3(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=v5t(s);let l=z4e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:wH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Ln(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(wL(r,void 0,d)),o&&(t.index[i]=f),c=Ln(f),l!=null&&(a[l]=c)}return c}dw.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=z4e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&$de(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Ln(r.output)},n&&n.field&&$de(e,u,n),a=e.add(C4e(u)),o=e.add(z0({pulse:Ln(a)})),o={agg:a,ref:Ln(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Ln(this.values)},extentRef(e,t){return f3(e,this,"extent","extent",t,!1)},domainRef(e,t){return f3(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return f3(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return f3(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return f3(e,this,"indata","tupleindex",t,!0,!0)}};function XPt(e,t,n){const r=e.from.facet,i=r.name,s=JN(r,t);let o;r.name||vt("Facet must have a name: "+Jt(r)),r.data||vt("Facet must reference a data set: "+Jt(r)),r.field?o=t.add(R4e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(D5t({key:t.keyRef(r.groupby),group:Ln(t.proxy(n.parent)),pulse:s})):vt("Facet must specify groupby or field: "+Jt(r));const a=t.fork(),u=a.add(z0()),l=a.add(Zw({pulse:Ln(u)}));a.addData(i,new dw(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function QPt(e,t,n){const r=t.add(R4e({pulse:n.pulse})),i=t.fork();i.add(Zw()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function V4e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(yO()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=pg(l,t);u.update=c.$expr,u.params=c.$params}function kL(e,t){const n=j4e(e),r=e.type===TL,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===sZ||n===iZ,a,u,l,c,f,d,h;const p=n===rZ||o||i,m=KPt(e.from,r,t);u=t.add(P5t({key:m.key||(e.key?G4(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Ln(u);u=l=t.add(z0({pulse:g})),u=t.add($5t({markdef:UPt(e),interactive:zPt(e.interactive,t),clip:jPt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ln(u)}));const b=Ln(u);u=c=t.add(k4e(S4e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:b}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const R=mZ(C,t),I=R.metadata;(I.generates||I.changes)&&vt("Mark transforms should not generate new data."),I.nomod||(c.params.mod=!0),R.params.pulse=Ln(u),t.add(u=R)}),e.sort&&(u=t.add(G5t({sort:t.compareRef(e.sort),pulse:Ln(u)})));const y=Ln(u);(i||o)&&(o=t.add(P4e({layout:t.objectProperty(e.layout),legends:t.legends,mark:b,pulse:y})),d=Ln(o));const x=t.add(A4e({mark:b,pulse:d||y}));h=Ln(x),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(y,d||h,g),i?XPt(e,t,m):p?QPt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(x))),s&&(h=JPt(s,h,t));const w=t.add(I4e({pulse:h})),S=t.add(Zw({pulse:Ln(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new dw(t,l,w,S)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&vt("Marks only support modify triggers."),V4e(C,t,f)}))}function JPt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:yu(s)?n.signalRef(s.signal):s,method:yu(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=yu(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Ln(n.add(U5t(o)))}function ZPt(e,t){const n=t.config.legend,r=e.encode||{},i=hd(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;cZ.forEach(x=>e[x]?(l[x]=e[x],c=c||e[x]):0),c||vt("Missing valid scale for legend.");const p=eNt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Ln(t.add(z0(null,[m]))),b={enter:{x:{value:0},y:{value:0}}},y=Ln(t.add(L5t(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===QN?(h=[CPt(e,c,n,r.gradient),Nde(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${j_(i.gradientLength())})/100))`)):p===CH?h=[APt(e,c,n,r.gradient,y),Nde(e,n,r.labels,y)]:(f=PPt(e,n),h=[IPt(e,n,r,y,j_(f.columns))],d.size=rNt(e,t,h[0].marks)),h=[K4({role:J6t,from:g,encode:b,marks:h,layout:f,interactive:a})],m.title&&h.push(BPt(e,n,r.title,g)),kL(K4({role:X6t,from:g,encode:lC(nNt(i,e,n),s,xI),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function eNt(e,t){let n=e.type||Pde;return!e.type&&tNt(e)===1&&(e.fill||e.stroke)&&(n=CQ(t)?QN:zV(t)?CH:Pde),n!==QN?n:zV(t)?CH:QN}function tNt(e){return cZ.reduce((t,n)=>t+(e[n]?1:0),0)}function nNt(e,t,n){const r={enter:{},update:{}};return kl(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function rNt(e,t,n){const r=j_(Bde("size",e,n)),i=j_(Bde("strokeWidth",e,n)),s=j_(iNt(n[1].encode,t,bI));return pg(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Bde(e,t,n){return t[e]?`scale("${t[e]}",datum)`:$4e(e,n[0].encode)}function iNt(e,t,n){return $4e("fontSize",e)||SPt("fontSize",t,n)}const sNt=`item.orient==="${cC}"?-90:item.orient==="${fC}"?90:0`;function oNt(e,t){e=cn(e)?{text:e}:e;const n=hd(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Ln(t.add(z0(null,[l])));return u.push(lNt(e,n,aNt(e),c)),e.subtitle&&u.push(cNt(e,n,r.subtitle,c)),kL(K4({role:n5t,from:c,encode:uNt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function aNt(e){const t=e.encode;return t&&t.title||kr({name:e.name,interactive:e.interactive,style:e.style},t)}function uNt(e,t){const n={enter:{},update:{}};return kl(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:dZ},angle:{signal:sNt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),lC(n,t,xI)}function lNt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return kl(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),gh({type:e2,role:r5t,style:mPt,from:r,encode:o},n)}function cNt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return kl(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),gh({type:e2,role:i5t,style:gPt,from:r,encode:o},n)}function fNt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(mZ(r,t))}),e.on&&e.on.forEach(r=>{V4e(r,t,e.name)}),t.addDataPipeline(e.name,dNt(e,t,n))}function dNt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?yu(e.values)||KN(e.format)?(r.push(jde(t,e)),r.push(i=Hx())):r.push(i=Hx({$ingest:e.values,$format:e.format})):e.url?KN(e.url)||KN(e.format)?(r.push(jde(t,e)),r.push(i=Hx())):r.push(i=Hx({$request:e.url,$format:e.format})):e.source&&(i=a=ln(e.source).map(d=>Ln(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Hx()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=q5t({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Hx())),i||r.push(Hx()),r.push(Zw({})),r}function Hx(e){const t=z0({},e);return t.metadata={source:!0},t}function jde(e,t){return F5t({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const H4e=e=>e===Pb||e===V0,RL=(e,t,n)=>yu(e)?gNt(e.signal,t,n):e===cC||e===V0?t:n,$u=(e,t,n)=>yu(e)?pNt(e.signal,t,n):H4e(e)?t:n,E0=(e,t,n)=>yu(e)?mNt(e.signal,t,n):H4e(e)?n:t,q4e=(e,t,n)=>yu(e)?yNt(e.signal,t,n):e===V0?{value:t}:{value:n},hNt=(e,t,n)=>yu(e)?vNt(e.signal,t,n):e===fC?{value:t}:{value:n},pNt=(e,t,n)=>W4e(`${e} === '${V0}' || ${e} === '${Pb}'`,t,n),mNt=(e,t,n)=>W4e(`${e} !== '${V0}' && ${e} !== '${Pb}'`,t,n),gNt=(e,t,n)=>gZ(`${e} === '${cC}' || ${e} === '${V0}'`,t,n),yNt=(e,t,n)=>gZ(`${e} === '${V0}'`,t,n),vNt=(e,t,n)=>gZ(`${e} === '${fC}'`,t,n),W4e=(e,t,n)=>(t=t!=null?Fu(t):t,n=n!=null?Fu(n):n,Ude(t)&&Ude(n)?(t=t?t.signal||Jt(t.value):null,n=n?n.signal||Jt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[kr({test:e},t)].concat(n||[])),Ude=e=>e==null||Object.keys(e).length===1,gZ=(e,t,n)=>({signal:`${e} ? (${$E(t)}) : (${$E(n)})`}),bNt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${cC}' ? (${$E(r)}) : `:"")+(n!=null?`${e} === '${Pb}' ? (${$E(n)}) : `:"")+(i!=null?`${e} === '${fC}' ? (${$E(i)}) : `:"")+(t!=null?`${e} === '${V0}' ? (${$E(t)}) : `:"")+"(null)"}),$E=e=>yu(e)?e.signal:e==null?null:Jt(e),xNt=(e,t)=>t===0?0:yu(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},sS=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function aE(e,t,n,r){let i;if(t&&gn(t,e))return t[e];if(gn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[lZ][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[bI][i]}return null}function zde(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function _Nt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(yu(o)){const f=zde([n.axisX,n.axisY]),d=zde([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=$u(o,aE(l,n.axisX,i,r),aE(l,n.axisY,i,r));u={};for(l of d)u[l]=bNt(o.signal,aE(l,n.axisTop,i,r),aE(l,n.axisBottom,i,r),aE(l,n.axisLeft,i,r),aE(l,n.axisRight,i,r))}else a=o===V0||o===Pb?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?kr({},i,a,u,s):i}function wNt(e,t,n,r){const i=hd(e,t),s=e.orient;let o,a;const u={enter:o={opacity:wi},update:a={opacity:Zh},exit:{opacity:wi}};kl(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Vde(e,0),c=Vde(e,1);return o.x=a.x=$u(s,l,wi),o.x2=a.x2=$u(s,c),o.y=a.y=E0(s,l,wi),o.y2=a.y2=E0(s,c),gh({type:fZ,role:q6t,from:r,encode:u},n)}function Vde(e,t){return{scale:e.scale,range:t}}function ENt(e,t,n,r,i){const s=hd(e,t),o=e.orient,a=e.gridScale,u=RL(o,1,-1),l=SNt(e.offset,u);let c,f,d;const h={enter:c={opacity:wi},update:d={opacity:Zh},exit:f={opacity:wi}};kl(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Jh,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=$u(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},b=a?{scale:a,range:1,mult:u,offset:l}:kr(m,{mult:u,offset:l});return c.x=d.x=$u(o,p,g),c.y=d.y=E0(o,p,g),c.x2=d.x2=E0(o,b),c.y2=d.y2=$u(o,b),f.x=$u(o,p),f.y=E0(o,p),gh({type:fZ,role:W6t,key:Jh,from:r,encode:h},n)}function SNt(e,t){if(t!==1)if(!un(e))e=yu(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=kr({},e);for(;n.mult!=null;)if(un(n.mult))n=n.mult=kr({},n.mult);else return n.mult=yu(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function TNt(e,t,n,r,i,s){const o=hd(e,t),a=e.orient,u=RL(a,-1,1);let l,c,f;const d={enter:l={opacity:wi},update:f={opacity:Zh},exit:c={opacity:wi}};kl(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Fu(i);h.mult=u;const p={scale:e.scale,field:Jh,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=$u(a,wi,p),f.y2=l.y2=$u(a,h),c.x=$u(a,p),f.x=l.x=E0(a,wi,p),f.x2=l.x2=E0(a,h),c.y=E0(a,p),gh({type:fZ,role:Y6t,key:Jh,from:r,encode:d},n)}function aj(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function CNt(e,t,n,r,i,s){const o=hd(e,t),a=e.orient,u=e.scale,l=RL(a,-1,1),c=j_(o("labelFlush")),f=j_(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Fu(i);g.mult=l,g.offset=Fu(o("labelPadding")||0),g.offset.mult=l;const b={scale:u,field:Jh,band:.5,offset:B4e(s.offset,o("labelOffset"))},y=$u(a,p?aj(u,c,'"left"','"right"','"center"'):{value:"center"},hNt(a,"left","right")),x=$u(a,q4e(a,"bottom","top"),p?aj(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=aj(u,c,`-(${f})`,f,0);p=p&&f;const S={opacity:wi,x:$u(a,b,g),y:E0(a,b,g)},C={enter:S,update:m={opacity:Zh,text:{field:uZ},x:S.x,y:S.y,align:y,baseline:x},exit:{opacity:wi,x:S.x,y:S.y}};kl(C,{dx:!d&&p?$u(a,w):null,dy:!h&&p?E0(a,w):null}),kl(C,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const R=o("labelBound");let I=o("labelOverlap");return I=I||R?{separation:o("labelSeparation"),method:I,order:"datum.index",bound:R?{scale:u,orient:a,tolerance:R}:null}:void 0,m.align!==y&&(m.align=sS(m.align,y)),m.baseline!==x&&(m.baseline=sS(m.baseline,x)),gh({type:e2,role:G6t,style:bI,key:Jh,from:r,encode:C,overlap:I},n)}function ANt(e,t,n,r){const i=hd(e,t),s=e.orient,o=RL(s,-1,1);let a,u;const l={enter:a={opacity:wi,anchor:Fu(i("titleAnchor",null)),align:{signal:dZ}},update:u=kr({},a,{opacity:Zh,text:Fu(e.title)}),exit:{opacity:wi}},c={signal:`lerp(range("${e.scale}"), ${CL(0,1,.5)})`};return u.x=$u(s,c),u.y=E0(s,c),a.angle=$u(s,wi,xNt(o,90)),a.baseline=$u(s,q4e(s,Pb,V0),{value:Pb}),u.angle=a.angle,u.baseline=a.baseline,kl(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),kNt(i,s,l,n),l.update.align=sS(l.update.align,a.align),l.update.angle=sS(l.update.angle,a.angle),l.update.baseline=sS(l.update.baseline,a.baseline),gh({type:e2,role:K6t,style:lZ,from:r,encode:l},n)}function kNt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=sS(Fu(a),n.update[u]),!1):!CE(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Fu(o):$u(t,Fu(o),Fu(s))}function RNt(e,t){const n=_Nt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=hd(e,n),l=TPt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Ln(t.add(z0({},[c]))),d=Ln(t.add(I5t({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(ENt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(TNt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(CNt(e,n,r.labels,d,p,l))),c.domain&&h.push(wNt(e,n,r.domain,f)),c.title&&h.push(ANt(e,n,r.title,f)),kL(K4({role:H6t,from:f,encode:lC(INt(u,e),i,xI),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function INt(e,t){const n={enter:{},update:{}};return kl(n,{orient:e("orient"),offset:e("offset")||0,position:i0(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function G4e(e,t,n){const r=ln(e.signals),i=ln(e.scales);return n||r.forEach(s=>T4e(s,t)),ln(e.projections).forEach(s=>uPt(s,t)),i.forEach(s=>X5t(s,t)),ln(e.data).forEach(s=>fNt(s,t)),i.forEach(s=>Q5t(s,t)),(n||r).forEach(s=>R5t(s,t)),ln(e.axes).forEach(s=>RNt(s,t)),ln(e.marks).forEach(s=>kL(s,t)),ln(e.legends).forEach(s=>ZPt(s,t)),e.title&&oNt(e.title,t),t.parseLambdas(),t}const PNt=e=>lC({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function NNt(e,t){const n=t.config,r=Ln(t.root=t.add(yO())),i=DNt(e,n);i.forEach(l=>T4e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(z0()),o=t.add(k4e(S4e(PNt(e.encode),TL,iZ,e.style,t,{pulse:Ln(s)}))),a=t.add(P4e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Ln(o)}));t.operators.pop(),t.pushState(Ln(o),Ln(a),null),G4e(e,t,i),t.operators.push(a);let u=t.add(A4e({mark:r,pulse:Ln(a)}));return u=t.add(I4e({pulse:Ln(u)})),u=t.add(Zw({pulse:Ln(u)})),t.addData("root",new dw(t,s,s,u)),t}function d3(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function DNt(e,t){const n=o=>i0(e[o],t[o]),r=[d3("background",n("background")),d3("autosize",U6t(n("autosize"))),d3("padding",V6t(n("padding"))),d3("width",n("width")||0),d3("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ln(e.signals).forEach(o=>{gn(i,o.name)?o=kr(i[o.name],o):r.push(o),s[o.name]=o}),ln(t.signals).forEach(o=>{!gn(s,o.name)&&!gn(i,o.name)&&r.push(o)}),r}function Y4e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Hde(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Y4e.prototype=Hde.prototype={parse(e){return G4e(e,this)},fork(){return new Hde(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof _H?Ln(e):e;return this.add(H5t({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Ln(this.add(Zw({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ln(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return pi(this._parent)},encode(){return pi(this._encode)},lookup(){return pi(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(cn(e))return G4(e,t);e.signal||vt("Unsupported field reference: "+Jt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Ln(this.add(O5t(i)))}return r},compareRef(e){let t=!1;const n=s=>yu(s)?(t=!0,this.signalRef(s.signal)):b5t(s)?(t=!0,this.exprRef(s.expr)):s,r=ln(e.field).map(n),i=ln(e.order).map(n);return t?Ln(this.add(Ide({fields:r,orders:i}))):kde(r,i)},keyRef(e,t){let n=!1;const r=s=>yu(s)?(n=!0,Ln(i[s.signal])):s,i=this.signals;return e=ln(e).map(r),n?Ln(this.add(M5t({fields:e,flat:t}))):m5t(e,t)},sortRef(e){if(!e)return e;const t=EL(e.op,e.field),n=e.order||g5t;return n.signal?Ln(this.add(Ide({fields:t,orders:this.signalRef(n.signal)}))):kde(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return gn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&vt("Duplicate signal name: "+Jt(e));const n=t instanceof _H?t:this.add(yO(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||vt("Unrecognized signal name: "+Jt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ln(this.signals[e]):(gn(this.lambdas,e)||(this.lambdas[e]=this.add(yO(null))),Ln(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=pg(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!un(e)?e:this.signalRef(e.signal||yZ(e))},exprRef(e,t){const n={expr:pg(e,this)};return t&&(n.expr.$name=t),Ln(this.add(N5t(n)))},addBinding(e,t){this.bindings||vt("Nested signals do not support binding: "+Jt(e)),this.bindings.push(kr({signal:e},t))},addScaleProj(e,t){gn(this.scales,e)&&vt("Duplicate scale or projection name: "+Jt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,W5t(t))},addProjection(e,t){this.addScaleProj(e,V5t(t))},getScale(e){return this.scales[e]||vt("Unrecognized scale name: "+Jt(e)),this.scales[e]},scaleRef(e){return Ln(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return gn(this.data,e)&&vt("Duplicate data set name: "+Jt(e)),this.data[e]=t},getData(e){return this.data[e]||vt("Undefined data set name: "+Jt(e)),this.data[e]},addDataPipeline(e,t){return gn(this.data,e)&&vt("Duplicate data set name: "+Jt(e)),this.addData(e,dw.fromEntries(this,t))}};function yZ(e){return(xt(e)?ONt:MNt)(e)}function ONt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(un(i)?i.signal||yZ(i):Jt(i))}return n+"]"}function MNt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Jt(r)+":"+(un(i)?i.signal||yZ(i):Jt(i));return t+"}"}function LNt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function FNt(e,t,n){return un(e)||vt("Input Vega specification must be an object."),t=tC(LNt(),t,e.config),NNt(e,new Y4e(t,n)).toRuntime()}var $Nt="5.30.0";kr(zS,AEt,mAt,GAt,S3t,P3t,ikt,F3t,okt,ckt,xkt,Akt);const BNt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Wa,CanvasHandler:pI,CanvasRenderer:sO,DATE:ad,DAY:nc,DAYOFYEAR:hg,Dataflow:iS,Debug:vTe,Error:fX,EventStream:qM,Gradient:MAe,GroupItem:iL,HOURS:hh,Handler:QQ,HybridHandler:C3e,HybridRenderer:ZV,Info:yTe,Item:rL,MILLISECONDS:I0,MINUTES:ph,MONTH:lc,Marks:mh,MultiPulse:PX,None:gTe,Operator:Ts,Parameters:HM,Pulse:ib,QUARTER:od,RenderType:Hv,Renderer:hI,ResourceLoader:zAe,SECONDS:ip,SVGHandler:h3e,SVGRenderer:rJ,SVGStringRenderer:T3e,Scenegraph:s3e,TIME_UNITS:EX,Transform:pt,View:d4e,WEEK:du,Warn:dX,YEAR:Sl,accessor:dd,accessorFields:uc,accessorName:Go,array:ln,ascending:$M,bandwidthNRD:MX,bin:ACe,bootstrapCI:kCe,boundClip:L3e,boundContext:lI,boundItem:YV,boundMark:t3e,boundStroke:M1,changeset:Xw,clampRange:RTe,codegenExpression:$ke,compare:yX,constant:mc,cumulativeLogNormal:UX,cumulativeNormal:GM,cumulativeUniform:qX,dayofyear:UTe,debounce:vX,defaultLocale:CX,definition:SCe,densityLogNormal:jX,densityNormal:LX,densityUniform:HX,domChild:fu,domClear:Wh,domCreate:zv,domFind:XQ,dotbin:RCe,error:vt,expressionFunction:Ea,extend:kr,extent:dg,extentIndex:ITe,falsy:wv,fastmap:rC,field:np,flush:PTe,font:lL,fontFamily:dI,fontSize:kg,format:DN,formatLocale:WD,formats:RX,hasOwnProperty:gn,id:QR,identity:pc,inferType:hCe,inferTypes:pCe,ingest:Vi,inherits:en,inrange:ME,interpolate:AQ,interpolateColors:tL,interpolateRange:_Ae,intersect:N3e,intersectBoxLine:LE,intersectPath:MQ,intersectPoint:LQ,intersectRule:HAe,isArray:xt,isBoolean:rx,isDate:rb,isFunction:Rr,isIterable:NTe,isNumber:Ri,isObject:un,isRegExp:DTe,isString:cn,isTuple:zM,key:bX,lerp:OTe,lineHeight:kb,loader:jM,locale:fCe,logger:hX,lruCache:MTe,markup:nJ,merge:LTe,mergeConfig:tC,multiLineOffset:GQ,one:eC,pad:FTe,panLinear:ETe,panLog:STe,panPow:TTe,panSymlog:CTe,parse:FNt,parseExpression:HJ,parseSelector:sx,path:fM,pathCurves:NQ,pathEqual:F3e,pathParse:WS,pathRectangle:$Ae,pathRender:B4,pathSymbols:FAe,pathTrail:BAe,peek:pi,point:fL,projection:mJ,quantileLogNormal:zX,quantileNormal:YM,quantileUniform:WX,quantiles:DX,quantizeInterpolator:wAe,quarter:ATe,quartiles:OX,get random(){return sp},randomInteger:P2t,randomKDE:$X,randomLCG:I2t,randomLogNormal:PCe,randomMixture:NCe,randomNormal:FX,randomUniform:DCe,read:yCe,regressionConstant:GX,regressionExp:MCe,regressionLinear:YX,regressionLoess:$Ce,regressionLog:OCe,regressionPoly:FCe,regressionPow:LCe,regressionQuad:KX,renderModule:dL,repeat:K3,resetDefaultLocale:Awt,resetSVGClipId:UAe,resetSVGDefIds:DCt,responseType:gCe,runtimeContext:Zke,sampleCurve:XM,sampleLogNormal:BX,sampleNormal:WM,sampleUniform:VX,scale:Ii,sceneEqual:iJ,sceneFromJSON:r3e,scenePickVisit:QD,sceneToJSON:n3e,sceneVisit:P0,sceneZOrder:FQ,scheme:kQ,serializeXML:_3e,setHybridRendererOptions:RCt,setRandom:k2t,span:JR,splitAccessPath:Ag,stringValue:Jt,textMetrics:nh,timeBin:iCe,timeFloor:YTe,timeFormatLocale:L4,timeInterval:iC,timeOffset:QTe,timeSequence:eCe,timeUnitSpecifier:jTe,timeUnits:SX,toBoolean:xX,toDate:_X,toNumber:sc,toSet:R0,toString:wX,transform:TCe,transforms:zS,truncate:$Te,truthy:rp,tupleid:Fn,typeParsers:BV,utcFloor:KTe,utcInterval:sC,utcOffset:JTe,utcSequence:tCe,utcdayofyear:HTe,utcquarter:kTe,utcweek:qTe,version:$Nt,visitArray:Av,week:zTe,writeConfig:nC,zero:$v,zoomLinear:pX,zoomLog:mX,zoomPow:qD,zoomSymlog:gX},Symbol.toStringTag,{value:"Module"}));function jNt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var UNt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},zNt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},VNt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const HNt=Array.prototype.slice,qx=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,HNt.call(t,1))},qNt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var WNt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:qNt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return qx("join",arguments)},indexof:function(){return qx("indexOf",arguments)},lastindexof:function(){return qx("lastIndexOf",arguments)},slice:function(){return qx("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return qx("substring",arguments,String)},split:function(){return qx("split",arguments,String)},replace:function(){return qx("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const GNt=["view","item","group","xy","x","y"],kH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&kH.add(setImmediate);const YNt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:UNt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),kH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||WNt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>zNt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>VNt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,kH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function h3(e,t,n,r,i,s){const o=a=>YNt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,GNt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var KNt={operator(e,t){const n=t.ast,r=e.functions;return i=>h3(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>h3(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>h3(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return h3(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=h3(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&jNt(o,r,s),l}}};const XNt="vega-lite",QNt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',JNt="5.23.0",ZNt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],e8t="https://vega.github.io/vega-lite/",t8t="Vega-Lite is a concise high-level language for interactive visualization.",n8t=["vega","chart","visualization"],r8t="build/vega-lite.js",i8t="build/vega-lite.min.js",s8t="build/vega-lite.min.js",o8t="build/src/index",a8t="build/src/index.d.ts",u8t={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},l8t=["bin","build","src","vega-lite*","tsconfig.json"],c8t={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},f8t={type:"git",url:"https://github.com/vega/vega-lite.git"},d8t="BSD-3-Clause",h8t={url:"https://github.com/vega/vega-lite/issues"},p8t={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},m8t={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},g8t={vega:"^5.24.0"},y8t={node:">=18"},v8t="yarn@1.22.22",b8t={name:XNt,author:QNt,version:JNt,collaborators:ZNt,homepage:e8t,description:t8t,keywords:n8t,main:r8t,unpkg:i8t,jsdelivr:s8t,module:o8t,types:a8t,bin:u8t,files:l8t,scripts:c8t,repository:f8t,license:d8t,bugs:h8t,devDependencies:p8t,dependencies:m8t,peerDependencies:g8t,engines:y8t,packageManager:v8t};function vZ(e){return zt(e,"or")}function bZ(e){return zt(e,"and")}function xZ(e){return zt(e,"not")}function ZN(e,t){if(xZ(e))ZN(e.not,t);else if(bZ(e))for(const n of e.and)ZN(n,t);else if(vZ(e))for(const n of e.or)ZN(n,t);else t(e)}function oS(e,t){return xZ(e)?{not:oS(e.not,t)}:bZ(e)?{and:e.and.map(n=>oS(n,t))}:vZ(e)?{or:e.or.map(n=>oS(n,t))}:t(e)}const ur=structuredClone;function K4e(e){throw new Error(e)}function JS(e,t){const n={};for(const r of t)gn(e,r)&&(n[r]=e[r]);return n}function nd(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>gs(e)).join(",")})`};function ii(e){if(Ri(e))return e;const t=cn(e)?e:gs(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function RH(e){return e===!1||e===null}function Gr(e,t){return e.includes(t)}function ZS(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function _Z(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function X4e(e,...t){for(const n of t)x8t(e,n??{});return e}function x8t(e,t){for(const n of $t(t))nC(e,n,t[n],!0)}function Bm(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function _8t(e,t){const n=$t(e),r=$t(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Q4e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function wZ(e,t){for(const n of e)if(t.has(n))return!0;return!1}function IH(e){const t=new Set;for(const n of e){const i=Ag(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function EZ(e,t){return e===void 0||t===void 0?!0:wZ(IH(e),IH(t))}function ms(e){return $t(e).length===0}const $t=Object.keys,Tl=Object.values,Nb=Object.entries;function X4(e){return e===!0||e===!1}function fo(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Uk(e,t){return xZ(e)?`!(${Uk(e.not,t)})`:bZ(e)?`(${e.and.map(n=>Uk(n,t)).join(") && (")})`:vZ(e)?`(${e.or.map(n=>Uk(n,t)).join(") || (")})`:t(e)}function vO(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&vO(e[n],t)&&delete e[n],ms(e)}function _I(e){return e.charAt(0).toUpperCase()+e.substr(1)}function SZ(e,t="datum"){const n=Ag(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Jt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function J4e(e,t="datum"){return`${t}[${Jt(Ag(e).join("."))}]`}function ss(e){return`datum['${e.replaceAll("'","\\'")}']`}function w8t(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function op(e){return`${Ag(e).map(w8t).join("\\.")}`}function hw(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function dC(e){return`${Ag(e).join(".")}`}function eT(e){return e?Ag(e).length:0}function xa(...e){return e.find(t=>t!==void 0)}let Z4e=42;function eRe(e){const t=++Z4e;return e?String(e)+t:t}function E8t(){Z4e=42}function tRe(e){return nRe(e)?e:`__${e}`}function nRe(e){return e.startsWith("__")}function Q4(e){if(e!==void 0)return(e%360+360)%360}function IL(e){return Ri(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const qde=Object.getPrototypeOf(structuredClone({}));function Qd(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Qd(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Qd(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==qde.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==qde.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Qd(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function gs(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}function zt(e,t){return un(e)&&gn(e,t)&&e[t]!==void 0}const n1="row",r1="column",PL="facet",po="x",Wu="y",H0="x2",Ng="y2",ox="xOffset",hC="yOffset",q0="radius",F1="radius2",yp="theta",$1="theta2",W0="latitude",G0="longitude",Y0="latitude2",ap="longitude2",ax="time",ud="color",Dg="fill",Og="stroke",ld="shape",B1="size",t2="angle",j1="opacity",ux="fillOpacity",lx="strokeOpacity",cx="strokeWidth",fx="strokeDash",wI="text",tT="order",EI="detail",NL="key",pw="tooltip",DL="href",OL="url",ML="description",S8t={x:1,y:1,x2:1,y2:1},rRe={theta:1,theta2:1,radius:1,radius2:1};function iRe(e){return gn(rRe,e)}const TZ={longitude:1,longitude2:1,latitude:1,latitude2:1};function sRe(e){switch(e){case W0:return"y";case Y0:return"y2";case G0:return"x";case ap:return"x2"}}function oRe(e){return gn(TZ,e)}const T8t=$t(TZ),CZ={...S8t,...rRe,...TZ,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function aS(e){return e===ud||e===Dg||e===Og}const aRe={row:1,column:1,facet:1},Qh=$t(aRe),AZ={...CZ,...aRe},C8t=$t(AZ),{order:LHt,detail:FHt,tooltip:$Ht,...A8t}=AZ,{row:BHt,column:jHt,facet:UHt,...k8t}=A8t;function R8t(e){return gn(k8t,e)}function uRe(e){return gn(AZ,e)}const I8t=[H0,Ng,Y0,ap,$1,F1];function lRe(e){return n2(e)!==e}function n2(e){switch(e){case H0:return po;case Ng:return Wu;case Y0:return W0;case ap:return G0;case $1:return yp;case F1:return q0}return e}function Db(e){if(iRe(e))switch(e){case yp:return"startAngle";case $1:return"endAngle";case q0:return"outerRadius";case F1:return"innerRadius"}return e}function Mg(e){switch(e){case po:return H0;case Wu:return Ng;case W0:return Y0;case G0:return ap;case yp:return $1;case q0:return F1}}function cd(e){switch(e){case po:case H0:return"width";case Wu:case Ng:return"height"}}function cRe(e){switch(e){case po:return"xOffset";case Wu:return"yOffset";case H0:return"x2Offset";case Ng:return"y2Offset";case yp:return"thetaOffset";case q0:return"radiusOffset";case $1:return"theta2Offset";case F1:return"radius2Offset"}}function kZ(e){switch(e){case po:return"xOffset";case Wu:return"yOffset"}}function P8t(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const N8t=$t(CZ),{x:zHt,y:VHt,x2:HHt,y2:qHt,xOffset:WHt,yOffset:GHt,latitude:YHt,longitude:KHt,latitude2:XHt,longitude2:QHt,theta:JHt,theta2:ZHt,radius:eqt,radius2:tqt,...RZ}=CZ,D8t=$t(RZ),IZ={x:1,y:1},U1=$t(IZ);function _a(e){return gn(IZ,e)}const PZ={theta:1,radius:1},O8t=$t(PZ);function LL(e){return e==="width"?po:Wu}const fRe={xOffset:1,yOffset:1};function SI(e){return gn(fRe,e)}const M8t={time:1};function uj(e){return e in M8t}const{text:nqt,tooltip:rqt,href:iqt,url:sqt,description:oqt,detail:aqt,key:uqt,order:lqt,...dRe}=RZ,L8t=$t(dRe);function F8t(e){return gn(RZ,e)}function $8t(e){switch(e){case ud:case Dg:case Og:case B1:case ld:case j1:case cx:case fx:return!0;case ux:case lx:case t2:case ax:return!1}}const hRe={...IZ,...PZ,...fRe,...dRe},NZ=$t(hRe);function Lg(e){return gn(hRe,e)}function B8t(e,t){return U8t(e)[t]}const pRe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:cqt,...j8t}=pRe;function U8t(e){switch(e){case ud:case Dg:case Og:case ML:case EI:case NL:case pw:case DL:case tT:case j1:case ux:case lx:case cx:case PL:case n1:case r1:return pRe;case po:case Wu:case ox:case hC:case W0:case G0:case ax:return j8t;case H0:case Ng:case Y0:case ap:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case B1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case fx:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ld:return{point:"always",geoshape:"always"};case wI:return{text:"always"};case t2:return{point:"always",square:"always",text:"always"};case OL:return{image:"always"};case yp:return{text:"always",arc:"always"};case q0:return{text:"always",arc:"always"};case $1:case F1:return{arc:"always"}}}function lj(e){switch(e){case po:case Wu:case yp:case q0:case ox:case hC:case B1:case t2:case cx:case j1:case ux:case lx:case ax:case H0:case Ng:case $1:case F1:return;case PL:case n1:case r1:case ld:case fx:case wI:case pw:case DL:case OL:case ML:return"discrete";case ud:case Dg:case Og:return"flexible";case W0:case G0:case Y0:case ap:case EI:case NL:case tT:return}}const z8t={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},V8t={count:1,min:1,max:1};function S1(e){return zt(e,"argmin")}function dx(e){return zt(e,"argmax")}function DZ(e){return cn(e)&&gn(z8t,e)}const H8t=new Set(["count","valid","missing","distinct"]);function FL(e){return cn(e)&&H8t.has(e)}function q8t(e){return cn(e)&&Gr(["min","max"],e)}const W8t=new Set(["count","sum","distinct","valid","missing"]),G8t=new Set(["mean","average","median","q1","q3","min","max"]);function mRe(e){return rx(e)&&(e=KL(e,void 0)),"bin"+$t(e).map(t=>$L(e[t])?fo(`_${t}_${Nb(e[t])}`):fo(`_${t}_${e[t]}`)).join("")}function Bs(e){return e===!0||r2(e)&&!e.binned}function hl(e){return e==="binned"||r2(e)&&e.binned===!0}function r2(e){return un(e)}function $L(e){return zt(e,"param")}function Wde(e){switch(e){case n1:case r1:case B1:case ud:case Dg:case Og:case cx:case j1:case ux:case lx:case ld:return 6;case fx:return 4;default:return 10}}function TI(e){return zt(e,"expr")}function pl(e,{level:t}={level:0}){const n=$t(e||{}),r={};for(const i of n)r[i]=t===0?qd(e[i]):pl(e[i],{level:t-1});return r}function gRe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},b={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},y={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},x=JS(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:x,nonMarkTitleProperties:b,subtitle:y}}function Iv(e){return cn(e)||xt(e)&&cn(e[0])}function Pn(e){return zt(e,"signal")}function i2(e){return zt(e,"step")}function Y8t(e){return xt(e)?!1:zt(e,"fields")&&!zt(e,"data")}function K8t(e){return xt(e)?!1:zt(e,"fields")&&zt(e,"data")}function Wy(e){return xt(e)?!1:zt(e,"field")&&zt(e,"data")}const X8t={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Q8t=$t(X8t),J8t={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},PH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function yRe(e){const t=xt(e.condition)?e.condition.map(Gde):Gde(e.condition);return{...qd(e),condition:t}}function qd(e){if(TI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Gde(e){if(TI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Qs(e){if(TI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Pn(e)?e:e!==void 0?{value:e}:void 0}function Z8t(e){return Pn(e)?e.signal:Jt(e)}function Yde(e){return Pn(e)?e.signal:Jt(e.value)}function g0(e){return Pn(e)?e.signal:e==null?null:Jt(e)}function eDt(e,t,n){for(const r of n){const i=mg(r,t.markDef,t.config);i!==void 0&&(e[r]=Qs(i))}return e}function vRe(e){return[].concat(e.type,e.style??[])}function ps(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&zt(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:mg(e,t,n,r)}function mg(e,t,n,{vgChannel:r}={}){const i=NH(e,t,n.style);return xa(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function NH(e,t,n){return bRe(e,vRe(t),n)}function bRe(e,t,n){t=ln(t);let r;for(const i of t){const s=n[i];zt(s,e)&&(r=s[e])}return r}function xRe(e,t){return ln(e).reduce((n,r)=>(n.field.push(tn(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function _Re(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Qd(i,r))return;n.push(r)}),n}function wRe(e,t){return Qd(e,t)||!t?e:e?[...ln(e),...ln(t)].join(", "):t}function ERe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Iv(n)||Pn(n))&&(Iv(r)||Pn(r)))return{explicit:e.explicit,value:wRe(n,r)};if(Iv(n)||Pn(n))return{explicit:e.explicit,value:n};if(Iv(r)||Pn(r))return{explicit:e.explicit,value:r};if(!Iv(n)&&!Pn(n)&&!Iv(r)&&!Pn(r))return{explicit:e.explicit,value:_Re(n,r)};throw new Error("It should never reach here")}function OZ(e){return`Invalid specification ${gs(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const tDt='Autosize "fit" only works for single views and layered views.';function Kde(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Xde(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Qde(e){return e?`Dropping "fit-${e}" because spec has discrete ${cd(e)}.`:'Dropping "fit" because spec has discrete size.'}function MZ(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Jde(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function nDt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function rDt(e){return`The "nearest" transform is not supported for ${e} marks.`}function SRe(e){return`Selection not supported for ${e} yet.`}function iDt(e){return`Cannot find a selection named "${e}".`}const sDt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",oDt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",aDt="Legend bindings are only supported for selections over an individual field or encoding channel.";function uDt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function lDt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const cDt="The same selection must be used to override scale domains in a layered view.",fDt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function dDt(e){return`Unknown repeated value "${e}".`}function Zde(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const hDt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",LZ="Animation involving facet, layer, or concat is currently unsupported.";function pDt(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Jt(e)}.`}function mDt(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${Jt(t)} encoding found for selection ${Jt(n.param)}. Using "field": ${Jt(r)}.`}const gDt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function yDt(e){return`Unrecognized parse "${e}".`}function ehe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const vDt="Attempt to add the same child twice.";function bDt(e){return`Ignoring an invalid transform: ${gs(e)}.`}const xDt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function the(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function _Dt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${gs(t)} is overridden by a child projection ${gs(n)}.`}const wDt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function EDt(e){return`${e}Offset dropped because ${e} is continuous`}function SDt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${gs(n)}}.`}function TRe(e){return`Invalid field type "${e}".`}function TDt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function CDt(e){return`Invalid aggregation operator "${e}".`}function CRe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function ADt(e){return`Position range does not support relative band size for ${e}.`}function DH(e,t){return`Dropping ${gs(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const kDt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function BL(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function RDt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function IDt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function PDt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function NDt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function cj(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function DDt(e){return`The ${e} for range marks cannot be an expression`}function ODt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function MDt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function LDt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function FDt(e){return`Cannot use the relative band size with ${e} scale.`}function $Dt(e){return`Using unaggregated domain with raw field has no effect (${gs(e)}).`}function BDt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function jDt(e){return`Unaggregated domain is currently unsupported for log scale (${gs(e)}).`}function UDt(e){return`Cannot apply size to non-oriented mark "${e}".`}function zDt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function VDt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function ARe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function kRe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function HDt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${gs(n)} and ${gs(r)}). Using ${gs(n)}.`}function qDt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${gs(n)} and ${gs(r)}). Using the union of the two domains.`}function WDt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function GDt(e){return`Dropping sort property ${gs(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const nhe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",YDt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",KDt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",XDt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function QDt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function JDt(e){return`Stack is applied to a non-linear scale (${e}).`}function ZDt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function bO(e,t){return`Invalid ${e}: ${gs(t)}.`}function eOt(e){return`Dropping day from datetime ${gs(e)} as day cannot be combined with other units.`}function tOt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function nOt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function rOt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function rhe(e){return`1D error band does not support ${e}.`}function RRe(e){return`Channel ${e} is required for "binned" bin.`}function iOt(e){return`Channel ${e} should not be used with "binned" bin.`}function sOt(e){return`Domain for ${e} is required for threshold scale.`}const IRe=hX(dX);let mw=IRe;function oOt(e){return mw=e,mw}function aOt(){return mw=IRe,mw}function FZ(...e){mw.error(...e)}function qt(...e){mw.warn(...e)}function uOt(...e){mw.debug(...e)}function s2(e){if(e&&un(e)){for(const t of BZ)if(zt(e,t))return!0}return!1}const PRe=["january","february","march","april","may","june","july","august","september","october","november","december"],lOt=PRe.map(e=>e.substr(0,3)),NRe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],cOt=NRe.map(e=>e.substr(0,3));function fOt(e){if(IL(e)&&(e=+e),Ri(e))return e>4&&qt(bO("quarter",e)),e-1;throw new Error(bO("quarter",e))}function dOt(e){if(IL(e)&&(e=+e),Ri(e))return e-1;{const t=e.toLowerCase(),n=PRe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=lOt.indexOf(r);if(i!==-1)return i;throw new Error(bO("month",e))}}function hOt(e){if(IL(e)&&(e=+e),Ri(e))return e%7;{const t=e.toLowerCase(),n=NRe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=cOt.indexOf(r);if(i!==-1)return i;throw new Error(bO("day",e))}}function $Z(e,t){const n=[];if(t&&e.day!==void 0&&$t(e).length>1&&(qt(eOt(e)),e=ur(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?dOt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?fOt(e.quarter):e.quarter;n.push(Ri(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?hOt(e.day):e.day;n.push(Ri(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function gw(e){const n=$Z(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function pOt(e){const n=$Z(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function mOt(e){const t=$Z(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const DRe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},BZ=$t(DRe);function gOt(e){return gn(DRe,e)}function o2(e){return un(e)?e.binned:ORe(e)}function ORe(e){return e&&e.startsWith("binned")}function jZ(e){return e.startsWith("utc")}function yOt(e){return e.substring(3)}const vOt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function jL(e){return BZ.filter(t=>LRe(e,t))}function MRe(e){const t=jL(e);return t[t.length-1]}function LRe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function bOt(e,t,{end:n}={end:!1}){const r=SZ(t),i=jZ(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of BZ)LRe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),pOt(a)}function FRe(e){if(!e)return;const t=jL(e);return`timeUnitSpecifier(${gs(t)}, ${gs(vOt)})`}function xOt(e,t,n){if(!e)return;const r=FRe(e);return`${n||jZ(e)?"utc":"time"}Format(${t}, ${r})`}function Bu(e){if(!e)return;let t;return cn(e)?ORe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:un(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),jZ(t.unit)&&(t.utc=!0,t.unit=yOt(t.unit)),t}function _Ot(e){const{utc:t,...n}=Bu(e);return n.unit?(t?"utc":"")+$t(n).map(r=>fo(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+$t(n).map(r=>fo(`_${r}_${n[r]}`)).join("")}function $Re(e,t=n=>n){const n=Bu(e),r=MRe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=BRe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(gw(a))} - ${t(gw(i))}`}}const wOt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function EOt(e){return gn(wOt,e)}function BRe(e,t=1){if(EOt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function SOt(e){return zt(e,"param")}function UZ(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function zZ(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function VZ(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function HZ(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function qZ(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function WZ(e){if(e!=null&&e.field){if(xt(e.range)&&e.range.length===2)return!0;if(Pn(e.range))return!0}return!1}function GZ(e){return!!(e!=null&&e.field)&&(xt(e.oneOf)||xt(e.in))}function TOt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function jRe(e){return GZ(e)||UZ(e)||WZ(e)||zZ(e)||HZ(e)||VZ(e)||qZ(e)}function xm(e,t){return XL(e,{timeUnit:t,wrapTime:!0})}function COt(e,t){return e.map(n=>xm(n,t))}function URe(e,t=!0){const{field:n}=e,r=Bu(e.timeUnit),{unit:i,binned:s}=r||{},o=tn(e,{expr:"datum"}),a=i?`time(${s?o:bOt(i,n)})`:o;if(UZ(e))return`${a}===${xm(e.equal,i)}`;if(zZ(e)){const u=e.lt;return`${a}<${xm(u,i)}`}else if(HZ(e)){const u=e.gt;return`${a}>${xm(u,i)}`}else if(VZ(e)){const u=e.lte;return`${a}<=${xm(u,i)}`}else if(qZ(e)){const u=e.gte;return`${a}>=${xm(u,i)}`}else{if(GZ(e))return`indexof([${COt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(TOt(e))return UL(a,e.valid);if(WZ(e)){const{range:u}=pl(e),l=Pn(u)?{signal:`${u.signal}[0]`}:u[0],c=Pn(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+xm(l,i)+", "+xm(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${xm(l,i)}`),c!==null&&f.push(`${a} <= ${xm(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${gs(e)}`)}function UL(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function AOt(e){return jRe(e)&&e.timeUnit?{...e,timeUnit:Bu(e.timeUnit)}:e}const CI={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function kOt(e){return e==="quantitative"||e==="temporal"}function zRe(e){return e==="ordinal"||e==="nominal"}const yw=CI.quantitative,YZ=CI.ordinal,nT=CI.temporal,KZ=CI.nominal,pC=CI.geojson;function ROt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case yw:return"quantitative";case"t":case nT:return"temporal";case"o":case YZ:return"ordinal";case"n":case KZ:return"nominal";case pC:return"geojson"}}const ml={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},OH={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function IOt(e,t){const n=OH[e],r=OH[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const POt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function ihe(e){return POt[e]}const VRe=new Set(["linear","log","pow","sqrt","symlog"]),HRe=new Set([...VRe,"time","utc"]);function qRe(e){return VRe.has(e)}const WRe=new Set(["quantile","quantize","threshold"]),NOt=new Set([...HRe,...WRe,"sequential","identity"]),DOt=new Set(["ordinal","bin-ordinal","point","band"]);function zu(e){return DOt.has(e)}function N0(e){return NOt.has(e)}function jm(e){return HRe.has(e)}function rT(e){return WRe.has(e)}const OOt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function MOt(e){return!cn(e)&&zt(e,"name")}function GRe(e){return zt(e,"param")}function LOt(e){return zt(e,"unionWith")}function FOt(e){return un(e)&&"field"in e}const $Ot={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:fqt,domain:dqt,range:hqt,rangeMax:pqt,rangeMin:mqt,scheme:gqt,...BOt}=$Ot,jOt=$t(BOt);function MH(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return jm(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return jm(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return jm(e);case"nice":return jm(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return N0(e)&&!Gr(["log","time","utc","threshold","quantile"],e)}}function YRe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return aS(e)?void 0:LDt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function UOt(e,t){return Gr([YZ,KZ],t)?e===void 0||zu(e):t===nT?Gr([ml.TIME,ml.UTC,void 0],e):t===yw?qRe(e)||rT(e)||e===void 0:!0}function zOt(e,t,n=!1){if(!Lg(e))return!1;switch(e){case po:case Wu:case ox:case hC:case yp:case q0:return jm(t)||t==="band"?!0:t==="point"?!n:!1;case ax:return Gr(["linear","band"],t);case B1:case cx:case j1:case ux:case lx:case t2:return jm(t)||rT(t)||Gr(["band","point","ordinal"],t);case ud:case Dg:case Og:return t!=="band";case fx:case ld:return t==="ordinal"||rT(t)}}function VOt(e){return un(e)&&"value"in e}const pf={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},KRe=pf.arc,zL=pf.area,VL=pf.bar,HOt=pf.image,HL=pf.line,qL=pf.point,qOt=pf.rect,xO=pf.rule,XRe=pf.text,XZ=pf.tick,WOt=pf.trail,QZ=pf.circle,JZ=pf.square,QRe=pf.geoshape;function hx(e){return["line","area","trail"].includes(e)}function J4(e){return["rect","bar","image","arc","tick"].includes(e)}const GOt=new Set($t(pf));function gg(e){return zt(e,"type")}const YOt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],KOt=["fill","fillOpacity"],XOt=[...YOt,...KOt],QOt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},she=$t(QOt),fj=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],JOt={area:["line","point"],bar:fj,rect:fj,line:["point"],tick:["bandSize","thickness",...fj]},ZOt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},e9t={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},JRe=$t(e9t);function vw(e){return zt(e,"band")}const t9t={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},n9t=5,ZZ={binSpacing:0,continuousBandSize:n9t,minBandSize:.25,timeUnitBandPosition:.5},r9t={...ZZ,binSpacing:1},i9t={...ZZ,thickness:1};function s9t(e){return gg(e)?e.type:e}function ZRe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function eee({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!N0(r)||i)return"always-valid";const s=ZRe(ps("invalid",e,t),{isPath:hx(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":s}function o9t(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function eIe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function tIe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=O0(t),u=FL(a==null?void 0:a.aggregate),l=eee({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:u});if(a&&l==="show"){const f=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:UL(tn(a,{expr:"datum"}),!1),...a9t(f,n,r)}}}function a9t(e,t,n){if(VOt(e)){const{value:r}=e;return Pn(r)?{signal:r.signal}:{value:r}}return eIe({scale:t,scaleName:n,mode:"zeroOrMin"})}function tee(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=n2(t),u=nee(e),l=tIe({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return l!==void 0?[l,u]:u}function u9t(e){const{datum:t}=e;return s2(t)?gw(t):`${gs(t)}`}function U_(e,t,n,r){const i={};if(t&&(i.scale=t),Fg(e)){const{datum:s}=e;s2(s)?i.signal=gw(s):Pn(s)?i.signal=s.signal:TI(s)?i.signal=s.expr:i.value=s}else i.field=tn(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function _O({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Pn(o)&&0<o&&o<1?"datum":void 0,u=tn(t,{expr:a,suffix:i}),l=n!==void 0?tn(n,{expr:a}):tn(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Pn(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function l9t({scaleName:e,fieldDef:t}){const n=tn(t,{expr:"datum"}),r=tn(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function nee({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(gr(t)){const f=o==null?void 0:o.get("type");if(ff(t)){c??(c=Ob({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Bs(d)||c&&h&&p===nT)return a!=null&&a.impute?U_(t,s,{binSuffix:"mid"},{offset:u}):c&&!zu(f)?_O({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):U_(t,s,PI(t,e)?{binSuffix:"range"}:{},{offset:u});if(hl(d)){if(Kt(n))return _O({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});qt(RRe(e===po?H0:Ng))}}return U_(t,s,zu(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(D0(t)){const f=t.value,d=u?{offset:u}:{};return{...zk(e,f),...d}}}return Rr(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function zk(e,t){return Gr(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Gr(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Qs(t)}function bw(e){return e&&e!=="number"&&e!=="time"}function nIe(e,t,n){return`${e}(${t}${n?`, ${gs(n)}`:""})`}const c9t=" – ";function ree({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(bw(n))return y0({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=rIe(e,r,i),a=iT(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return y0({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return y0({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Kt(e)&&e.timeUnit===void 0)return y0({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(oT(e)){const c=d9t({field:o,timeUnit:Kt(e)?(u=Bu(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:a2(e)&&((l=e.scale)==null?void 0:l.type)===ml.UTC});return c?{signal:c}:void 0}if(t=LH({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Kt(e)&&Bs(e.bin)){const c=tn(e,{expr:r,binSuffix:"end"});return{signal:AI(o,c,t,n,s)}}else return t||iT(e)==="quantitative"?{signal:`${oIe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function rIe(e,t,n){return Kt(e)?n?`${tn(e,{expr:t,suffix:"end"})}-${tn(e,{expr:t,suffix:"start"})}`:tn(e,{expr:t}):u9t(e)}function y0({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=rIe(e,r,i)),o!=="datum.value"&&Kt(e)&&Bs(e.bin)){const a=tn(e,{expr:r,binSuffix:"end"});return{signal:AI(o,a,t,n,s)}}return{signal:nIe(n,o,t)}}function iIe(e,t,n,r,i,s){var o;if(!(cn(r)&&bw(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&iT(e)==="quantitative"&&(i.normalizedNumberFormatType&&sT(e)&&e.stack==="normalize"||i.numberFormatType))){if(sT(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return LH({type:"quantitative",config:i,normalizeStack:!0});if(oT(e)){const a=Kt(e)?(o=Bu(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:f9t({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return LH({type:t,specifiedFormat:n,config:i})}}function sIe(e,t,n){var r;if(e&&(Pn(e)||e==="number"||e==="time"))return e;if(oT(t)&&n!=="time"&&n!=="utc")return Kt(t)&&((r=Bu(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function LH({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(cn(t))return t;if(e===yw)return r?n.normalizedNumberFormat:n.numberFormat}function f9t({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:FRe(t)}:r?void 0:n.timeFormat)}function oIe(e,t){return`format(${e}, "${t||""}")`}function ohe(e,t,n,r){return bw(n)?nIe(n,e,t):oIe(e,(cn(t)?t:void 0)??r.numberFormat)}function AI(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return AI(e,t,i.numberFormat,i.numberFormatType,i);const s=ohe(e,n,r,i),o=ohe(t,n,r,i);return`${UL(e,!1)} ? "null" : ${s} + "${c9t}" + ${o}`}function d9t({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=cn(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):xOt(t,e,s)}const WL="min",h9t={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function ahe(e){return gn(h9t,e)}function p9t(e){return zt(e,"encoding")}function i1(e){return e&&(e.op==="count"||zt(e,"field"))}function aIe(e){return e&&xt(e)}function kI(e){return zt(e,"row")||zt(e,"column")}function iee(e){return zt(e,"header")}function GL(e){return zt(e,"facet")}function m9t(e){return zt(e,"param")}function g9t(e){return!cn(e)&&zt(e,"repeat")}function uhe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function see(e){return zt(e,"sort")}function Ob({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(gr(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Kt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return mg("timeUnitBandPosition",n,r);if(Bs(s))return .5}}function uIe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=cd(e),u=ps(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Kt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:mg("timeUnitBandSize",r,i)};if(Bs(h)&&!zu(s))return{band:1}}if(J4(r.type))return s?zu(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function lIe(e,t,n,r){return Bs(e.bin)||e.timeUnit&&ff(e)&&e.type==="temporal"?Ob({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function cIe(e){return zt(e,"sort")&&!zt(e,"field")}function RI(e){return zt(e,"condition")}function YL(e){const t=e==null?void 0:e.condition;return!!t&&!xt(t)&&Kt(t)}function II(e){const t=e==null?void 0:e.condition;return!!t&&!xt(t)&&gr(t)}function y9t(e){const t=e==null?void 0:e.condition;return!!t&&(xt(t)||D0(t))}function Kt(e){return zt(e,"field")||(e==null?void 0:e.aggregate)==="count"}function iT(e){return e==null?void 0:e.type}function Fg(e){return zt(e,"datum")}function Yv(e){return ff(e)&&!EO(e)||wO(e)}function lhe(e){return ff(e)&&e.type==="quantitative"&&!e.bin||wO(e)}function wO(e){return Fg(e)&&Ri(e.datum)}function gr(e){return Kt(e)||Fg(e)}function ff(e){return e&&(zt(e,"field")||e.aggregate==="count")&&zt(e,"type")}function D0(e){return zt(e,"value")}function a2(e){return zt(e,"scale")||zt(e,"sort")}function sT(e){return zt(e,"axis")||zt(e,"stack")||zt(e,"impute")}function fIe(e){return zt(e,"legend")}function dIe(e){return zt(e,"format")||zt(e,"formatType")}function v9t(e){return nd(e,["legend","axis","header","scale"])}function b9t(e){return zt(e,"op")}function tn(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(_9t(e))n=tRe("count");else{let o;if(!t.nofn)if(b9t(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Bs(a)?(o=mRe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?dx(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):S1(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!o2(l)&&(o=_Ot(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?dC(n):t.expr?J4e(n,t.expr)+s:op(n)+s}function EO(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Kt(e)&&!!e.bin;case"temporal":return!1}throw new Error(TRe(e.type))}function x9t(e){var t;return a2(e)&&rT((t=e.scale)==null?void 0:t.type)}function _9t(e){return e.aggregate==="count"}function w9t(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Bs(r))return`${n} (binned)`;if(i&&!o2(i)){const a=(o=Bu(i))==null?void 0:o.unit;if(a)return`${n} (${jL(a).join("-")})`}else if(s)return dx(s)?`${n} for max ${s.argmax}`:S1(s)?`${n} for min ${s.argmin}`:`${_I(s)} of ${n}`;return n}function E9t(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(dx(t))return`${i} for argmax(${t.argmax})`;if(S1(t))return`${i} for argmin(${t.argmin})`;const s=r&&!o2(r)?Bu(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Bs(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const hIe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return E9t(e);default:return w9t(e,t)}};let pIe=hIe;function mIe(e){pIe=e}function S9t(){mIe(hIe)}function uS(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=oee(e))==null?void 0:a.title;if(!Kt(e))return i??e.title;const s=e,o=r?aee(s,t):void 0;return n?xa(i,s.title,o):i??s.title??o}function oee(e){if(sT(e)&&e.axis)return e.axis;if(fIe(e)&&e.legend)return e.legend;if(iee(e)&&e.header)return e.header}function aee(e,t){return pIe(e,t)}function SO(e){if(dIe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=oee(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function T9t(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(see(e)&&xt(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!dx(n)&&!S1(n))return"quantitative";if(a2(e)&&((s=e.scale)!=null&&s.type))switch(OH[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function O0(e){if(Kt(e))return e;if(YL(e))return e.condition}function hu(e){if(gr(e))return e;if(II(e))return e.condition}function gIe(e,t,n,r={}){if(cn(e)||Ri(e)||rx(e)){const i=cn(e)?"string":Ri(e)?"number":"boolean";return qt(SDt(t,i,e)),{value:e}}return gr(e)?TO(e,t,n,r):II(e)?{...e,condition:TO(e.condition,t,n,r)}:e}function TO(e,t,n,r){if(dIe(e)){const{format:i,formatType:s,...o}=e;if(bw(s)&&!n.customFormatTypes)return qt(the(t)),TO(o,t,n,r)}else{const i=sT(e)?"axis":fIe(e)?"legend":iee(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(bw(o)&&!n.customFormatTypes)return qt(the(t)),TO({...e,[i]:a},t,n,r)}}return Kt(e)?uee(e,t,r):C9t(e)}function C9t(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Ri(n)?"quantitative":cn(n)?"nominal":s2(n)?"temporal":void 0,{...e,type:t}}function uee(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!DZ(r)&&!dx(r)&&!S1(r)&&(qt(CDt(r)),delete a.aggregate),i&&(a.timeUnit=Bu(i)),o&&(a.field=`${o}`),Bs(s)&&(a.bin=KL(s,t)),hl(s)&&!_a(t)&&qt(iOt(t)),ff(a)){const{type:u}=a,l=ROt(u);u!==l&&(a.type=l),u!=="quantitative"&&FL(r)&&(qt(TDt(u,r)),a.type="quantitative")}else if(!lRe(t)){const u=T9t(a,t);a.type=u}if(ff(a)){const{compatible:u,warning:l}=A9t(a,t)||{};u===!1&&qt(l)}if(see(a)&&cn(a.sort)){const{sort:u}=a;if(ahe(u))return{...a,sort:{encoding:u}};const l=u.substring(1);if(u.charAt(0)==="-"&&ahe(l))return{...a,sort:{encoding:l,order:"descending"}}}if(iee(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function KL(e,t){return rx(e)?{maxbins:Wde(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Wde(t)}:e}const uE={compatible:!0};function A9t(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case n1:case r1:case PL:return EO(e)?uE:{compatible:!1,warning:IDt(t)};case po:case Wu:case ox:case hC:case ud:case Dg:case Og:case wI:case EI:case NL:case pw:case DL:case OL:case t2:case yp:case q0:case ML:return uE;case G0:case ap:case W0:case Y0:return n!==yw?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:uE;case j1:case ux:case lx:case cx:case B1:case $1:case F1:case H0:case Ng:case ax:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:uE;case ld:case fx:return!EO(e)&&!x9t(e)?{compatible:!1,warning:PDt(t)}:uE;case tT:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:uE}}function oT(e){const{formatType:t}=SO(e);return t==="time"||!t&&k9t(e)}function k9t(e){return e&&(e.type==="temporal"||Kt(e)&&!!e.timeUnit)}function XL(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Bu(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return TI(e)?a=e.expr:Pn(e)?a=e.signal:s2(e)?(o=!0,a=gw(e)):(cn(e)||Ri(e))&&o&&(a=`datetime(${gs(e)})`,gOt(s)&&(Ri(e)&&e<1e4||cn(e)&&isNaN(Date.parse(e)))&&(a=gw({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:gs(e)}function yIe(e,t){const{type:n}=e;return t.map(r=>{const i=Kt(e)&&!o2(e.timeUnit)?e.timeUnit:void 0,s=XL(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function PI(e,t){return Bs(e.bin)?Lg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const che={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function NI(e){return e==null?void 0:e.condition}const vIe=["domain","grid","labels","ticks","title"],R9t={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},bIe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},I9t={...bIe,style:1,labelExpr:1,encoding:1};function fhe(e){return gn(I9t,e)}const P9t={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},xIe=$t(P9t);function z1(e){return zt(e,"mark")}class QL{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return z1(t)?s9t(t.mark)===this.name:!1}}function z_(e,t){const n=e&&e[t];return n?xt(n)?ZS(n,r=>!!r.field):Kt(n)||YL(n):!1}function _Ie(e,t){const n=e&&e[t];return n?xt(n)?ZS(n,r=>!!r.field):Kt(n)||Fg(n)||II(n):!1}function wIe(e,t){if(_a(t)){const n=e[t];if((Kt(n)||Fg(n))&&(zRe(n.type)||Kt(n)&&n.timeUnit)){const r=kZ(t);return _Ie(e,r)}}return!1}function EIe(e){return ZS(C8t,t=>{if(z_(e,t)){const n=e[t];if(xt(n))return ZS(n,r=>!!r.aggregate);{const r=O0(n);return r&&!!r.aggregate}}return!1})}function SIe(e,t){const n=[],r=[],i=[],s=[],o={};return lee(e,(a,u)=>{if(Kt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=oee(a),m=p==null?void 0:p.title;let g=tn(a,{forAs:!0});const b={...m?[]:{title:uS(a,t,{allowDisabling:!0})},...h,field:g};if(c){let y;if(dx(c)?(y="argmax",g=tn({op:"argmax",field:c.argmax},{forAs:!0}),b.field=`${g}.${l}`):S1(c)?(y="argmin",g=tn({op:"argmin",field:c.argmin},{forAs:!0}),b.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(y=c),y){const x={op:y,as:g};l&&(x.field=l),s.push(x)}}else if(n.push(g),ff(a)&&Bs(f)){if(r.push({bin:f,field:l,as:g}),n.push(tn(a,{binSuffix:"end"})),PI(a,u)&&n.push(tn(a,{binSuffix:"range"})),_a(u)){const y={field:`${g}_end`};o[`${u}2`]=y}b.bin="binned",lRe(u)||(b.type=yw)}else if(d&&!o2(d)){i.push({timeUnit:d,field:l,as:g});const y=ff(a)&&a.type!==nT&&"time";y&&(u===wI||u===pw?b.formatType=y:F8t(u)?b.legend={formatType:y,...b.legend}:_a(u)&&(b.axis={formatType:y,...b.axis}))}o[u]=b}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function N9t(e,t,n){const r=B8t(t,n);if(r){if(r==="binned"){const i=e[t===H0?po:Wu];return!!(Kt(i)&&Kt(e[t])&&hl(i.bin))}}else return!1;return!0}function D9t(e,t,n,r){const i={};for(const s of $t(e))uRe(s)||qt(RDt(s));for(let s of N8t){if(!e[s])continue;const o=e[s];if(SI(s)){const a=P8t(s),u=i[a];if(Kt(u)&&kOt(u.type)&&Kt(o)&&!u.timeUnit){qt(EDt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(qt(wDt),s=yp),!N9t(e,s,t)){qt(BL(s,t));continue}if(s===B1&&t==="line"){const a=O0(e[s]);if(a!=null&&a.aggregate){qt(kDt);continue}}if(s===ud&&(n?"fill"in e:"stroke"in e)){qt(CRe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===EI||s===tT&&!xt(o)&&!D0(o)||s===pw&&xt(o)){if(o){if(s===tT){const a=e[s];if(cIe(a)){i[s]=a;continue}}i[s]=ln(o).reduce((a,u)=>(Kt(u)?a.push(uee(u,s)):qt(DH(u,s)),a),[])}}else{if(s===pw&&o===null)i[s]=null;else if(!Kt(o)&&!Fg(o)&&!D0(o)&&!RI(o)&&!Pn(o)){qt(DH(o,s));continue}i[s]=gIe(o,s,r)}}return i}function JL(e,t){const n={};for(const r of $t(e)){const i=gIe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function O9t(e){const t=[];for(const n of $t(e))if(z_(e,n)){const r=e[n],i=ln(r);for(const s of i)Kt(s)?t.push(s):YL(s)&&t.push(s.condition)}return t}function lee(e,t,n){if(e)for(const r of $t(e)){const i=e[r];if(xt(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function M9t(e,t,n,r){return e?$t(e).reduce((i,s)=>{const o=e[s];return xt(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function TIe(e,t){return $t(t).reduce((n,r)=>{switch(r){case po:case Wu:case DL:case ML:case OL:case H0:case Ng:case ox:case hC:case yp:case $1:case q0:case F1:case ax:case W0:case G0:case Y0:case ap:case wI:case ld:case t2:case pw:return n;case tT:if(e==="line"||e==="trail")return n;case EI:case NL:{const i=t[r];if(xt(i)||Kt(i))for(const s of ln(i))s.aggregate||n.push(tn(s,{}));return n}case B1:if(e==="trail")return n;case ud:case Dg:case Og:case j1:case ux:case lx:case fx:case cx:{const i=O0(t[r]);return i&&!i.aggregate&&n.push(tn(i,{})),n}}},[])}function L9t(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(xt(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return xt(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function FH(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${cee(t)}`:"";return{field:o+t.field,type:t.type,title:Pn(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=O9t(n).map(v9t);return{tooltip:[...i,...Bm(s,ii)]}}function cee(e){const{title:t,field:n}=e;return xa(t,n)}function fee(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=cee(n);return CIe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...cn(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function CIe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...gg(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...rx(e[t])?{}:e[t]}}]:[]}function AIe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:x5(s,n),continuousAxisChannelDef2:x5(o,n),continuousAxisChannelDefError:x5(a,n),continuousAxisChannelDefError2:x5(u,n),continuousAxis:i}}function x5(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&qt(rOt(n,t)),r}else return e}function kIe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(gg(n)&&n.orient)return n.orient;if(Yv(i)){if(Yv(s)){const o=Kt(i)&&i.aggregate,a=Kt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return oT(s)&&!oT(i)?"horizontal":"vertical"}return"horizontal"}else{if(Yv(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const CO="boxplot",F9t=["box","median","outliers","rule","ticks"],$9t=new QL(CO,IIe);function RIe(e){return Ri(e)?"tukey":e}function IIe(e,{config:t}){e={...e,encoding:JL(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=gg(n)?n:{type:n};i&&qt(SRe("boxplot"));const u=a.extent??t.boxplot.extent,l=ps("size",a,t),c=a.invalid,f=RIe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:b,aggregate:y,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:S,customTooltipWithoutAggregatedField:C}=B9t(e,u,t),R=dC(m.field),{color:I,size:O,...M}=x,L=nt=>fee(a,g,m,nt,t.boxplot),V=L(M),D=L(x),j=(un(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",z=L({...M,...O?{size:O}:{},color:{condition:{test:`${ss(`lower_box_${m.field}`)} >= ${ss(`upper_box_${m.field}`)}`,...I||{value:j}}}}),G=FH([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,x),ee={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},ne=f==="min-max"?G:FH([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,x),ue=[...V({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:ne}),...V({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:ne}),...V({partName:"ticks",mark:ee,positionPrefix:"lower_whisker",extraEncoding:ne}),...V({partName:"ticks",mark:ee,positionPrefix:"upper_whisker",extraEncoding:ne})],X=[...f!=="tukey"?ue:[],...D({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:S,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:G}),...z({partName:"median",mark:{type:"tick",invalid:c,...un(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:G})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:X};const W=ss(`lower_box_${m.field}`),te=ss(`upper_box_${m.field}`),q=`(${te} - ${W})`,J=`${W} - ${u} * ${q}`,oe=`${te} + ${u} * ${q}`,de=ss(m.field),ce={joinaggregate:PIe(m.field),groupby:b},pe={transform:[{filter:`(${J} <= ${de}) && (${de} <= ${oe})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${R}`},{op:"max",field:m.field,as:`upper_whisker_${R}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${R}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${R}`},...y],groupby:b}],layer:ue},{tooltip:Ee,...Ae}=M,{scale:ge,axis:me}=m,Oe=cee(m),Me=nd(me,["title"]),Ye=CIe(a,"outliers",t.boxplot,{transform:[{filter:`(${de} < ${J}) || (${de} > ${oe})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Oe!==void 0?{title:Oe}:{},...ge!==void 0?{scale:ge}:{},...ms(Me)?{}:{axis:Me}},...Ae,...I?{color:I}:{},...C?{tooltip:C}:{}}})[0];let lt;const We=[...d,...h,ce];return Ye?lt={transform:We,layer:[Ye,pe]}:(lt=pe,lt.transform.unshift(...We)),{...o,layer:[lt,{transform:p,layer:X}]}}function PIe(e){const t=dC(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function B9t(e,t,n){const r=kIe(e,CO),{continuousAxisChannelDef:i,continuousAxis:s}=AIe(e,r,CO),o=i.field,a=dC(o),u=RIe(t),l=[...PIe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`${ss(`upper_box_${a}`)} - ${ss(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${ss(`upper_box_${a}`)} + ${ss(`iqr_${a}`)} * ${t}, ${ss(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${ss(`lower_box_${a}`)} - ${ss(`iqr_${a}`)} * ${t}, ${ss(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=L9t(d),{bins:m,timeUnits:g,aggregate:b,groupby:y,encoding:x}=SIe(p,n),w=r==="vertical"?"horizontal":"vertical",S=r,C=[...m,...g,{aggregate:[...b,...l],groupby:y},...c];return{bins:m,timeUnits:g,transform:C,groupby:y,aggregate:b,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:S,customTooltipWithoutAggregatedField:h}}const dee="errorbar",j9t=["ticks","rule"],U9t=new QL(dee,NIe);function NIe(e,{config:t}){e={...e,encoding:JL(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=DIe(e,dee,t);delete s.size;const c=fee(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function z9t(e,t){const{encoding:n}=e;if(V9t(n))return{orient:kIe(e,t),inputType:"raw"};const r=H9t(n),i=q9t(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(gr(a)&&gr(u))throw new Error(`${t} cannot have both x2 and y2`);if(gr(a)){if(Yv(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(gr(u)){if(Yv(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(gr(u)&&!gr(a))throw new Error(`${t} cannot have xError2 without xError`);if(gr(c)&&!gr(l))throw new Error(`${t} cannot have yError2 without yError`);if(gr(a)&&gr(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(gr(a)){if(Yv(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(gr(l)){if(Yv(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function V9t(e){return(gr(e.x)||gr(e.y))&&!gr(e.x2)&&!gr(e.y2)&&!gr(e.xError)&&!gr(e.xError2)&&!gr(e.yError)&&!gr(e.yError2)}function H9t(e){return gr(e.x2)||gr(e.y2)}function q9t(e){return gr(e.xError)||gr(e.xError2)||gr(e.yError)||gr(e.yError2)}function DIe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=gg(r)?r:{type:r};s&&qt(SRe(t));const{orient:l,inputType:c}=z9t(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=AIe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:b,tooltipSummary:y,tooltipTitleWithFieldName:x}=W9t(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:S,[m==="x"?"xError":"yError"]:C,[m==="x"?"xError2":"yError2"]:R,...I}=i,{bins:O,timeUnits:M,aggregate:L,groupby:V,encoding:D}=SIe(I,n),j=[...L,...g],z=c!=="raw"?[]:V,G=FH(y,f,D,x);return{transform:[...a.transform??[],...O,...M,...j.length===0?[]:[{aggregate:j,groupby:z}],...b],groupby:z,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:D,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:G}}function W9t(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&qt(nOt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`${ss(`center_${c}`)} + ${ss(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${ss(`center_${c}`)} - ${ss(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:_I(h)},{fieldPrefix:"upper_",titlePrefix:dhe(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:dhe(h,p,"-")}],d=!0;else{let m,g,b;p==="ci"?(m="mean",g="ci0",b="ci1"):(m="median",g="q1",b="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:b,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:uS({field:c,aggregate:b,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:uS({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:uS({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&qt(tOt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:ss(n.field),as:`upper_${c}`},{calculate:ss(c),as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`${ss(c)} + ${ss(r.field)}`,as:`upper_${c}`}],i?l.push({calculate:`${ss(c)} + ${ss(i.field)}`,as:`lower_${c}`}):l.push({calculate:`${ss(c)} - ${ss(r.field)}`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:hw(hw(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function dhe(e,t,n){return`${_I(e)} ${n} ${t}`}const hee="errorband",G9t=["band","borders"],Y9t=new QL(hee,OIe);function OIe(e,{config:t}){e={...e,encoding:JL(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=DIe(e,hee,t),l=o,c=fee(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?qt(rhe("interpolate")):l.tension&&qt(rhe("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const MIe={};function pee(e,t,n){const r=new QL(e,t);MIe[e]={normalizer:r,parts:n}}function K9t(){return $t(MIe)}pee(CO,IIe,F9t);pee(dee,NIe,j9t);pee(hee,OIe,G9t);const X9t=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],LIe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},FIe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Q9t=$t(LIe),J9t=$t(FIe),Z9t={header:1,headerRow:1,headerColumn:1,headerFacet:1},$Ie=$t(Z9t),BIe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],eMt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},tMt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},M0="_vgsid_",nMt={point:{on:"click",fields:[M0],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function mee(e){return e==="legend"||!!(e!=null&&e.legend)}function dj(e){return mee(e)&&un(e)}function gee(e){return!!(e!=null&&e.select)}function jIe(e){const t=[];for(const n of e||[]){if(gee(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function rMt(e){return ZL(e)||vee(e)||yee(e)}function yee(e){return zt(e,"concat")}function ZL(e){return zt(e,"vconcat")}function vee(e){return zt(e,"hconcat")}function UIe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function yg(e){return zt(e,"step")}function hhe(e){return zt(e,"view")||zt(e,"width")||zt(e,"height")}const phe=20,iMt={align:1,bounds:1,center:1,columns:1,spacing:1},sMt=$t(iMt);function oMt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(GL(e)&&!kI(e.facet)||yee(e))&&(i.columns=o),ZL(e)&&(i.columns=1);for(const a of sMt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Ri(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function $H(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function BH(e,t){const n=AO(e,t);return yg(n)?n.step:zIe}function AO(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return xa(n,{step:e.step})}const zIe=20,aMt={continuousWidth:200,continuousHeight:200,step:zIe},uMt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:aMt,mark:ZOt,arc:{},area:{},bar:r9t,circle:{},geoshape:{},image:{},line:{},point:{},rect:ZZ,rule:{color:"black"},square:{},text:{color:"black"},tick:i9t,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:OOt,projection:{},legend:eMt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:nMt,style:{},title:{},facet:{spacing:phe},concat:{spacing:phe},normalizedNumberFormat:".0%"},Ey=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],mhe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},ghe={blue:Ey[0],orange:Ey[1],red:Ey[2],teal:Ey[3],green:Ey[4],yellow:Ey[5],purple:Ey[6],pink:Ey[7],brown:Ey[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function lMt(e={}){return{signals:[{name:"color",value:un(e)?{...ghe,...e}:ghe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function cMt(e){return{signals:[{name:"fontSize",value:un(e)?{...mhe,...e}:mhe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function fMt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function VIe(e){const t=$t(e||{}),n={};for(const r of t){const i=e[r];n[r]=NI(i)?yRe(i):qd(i)}return n}function dMt(e){const t=$t(e),n={};for(const r of t)n[r]=VIe(e[r]);return n}const hMt=[...JRe,...xIe,...$Ie,"background","padding","legend","lineBreak","scale","style","title","view"];function HIe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=tC({},ur(uMt),n?fMt(n):{},t?lMt(t):{},r?cMt(r):{},s||{});i&&nC(o,"selection",i,!0);const a=nd(o,hMt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=qd(o[u]));for(const u of JRe)o[u]&&(a[u]=pl(o[u]));for(const u of xIe)o[u]&&(a[u]=VIe(o[u]));for(const u of $Ie)o[u]&&(a[u]=pl(o[u]));if(o.legend&&(a.legend=pl(o.legend)),o.scale){const{invalid:u,...l}=o.scale,c=pl(u,{level:1});a.scale={...pl(l),...$t(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=dMt(o.style)),o.title&&(a.title=pl(o.title)),o.view&&(a.view=pl(o.view)),a}const pMt=new Set(["view",...GOt]),mMt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],gMt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...JOt};function yMt(e){e=ur(e);for(const t of mMt)delete e[t];if(e.axis)for(const t in e.axis)NI(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of X9t)delete e.legend[t];if(e.mark){for(const t of she)delete e.mark[t];e.mark.tooltip&&un(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(jIe(e.params)),delete e.params);for(const t of pMt){for(const r of she)delete e[t][r];const n=gMt[t];if(n)for(const r of n)delete e[t][r];bMt(e,t)}for(const t of K9t())delete e[t];vMt(e);for(const t in e)un(e[t])&&ms(e[t])&&delete e[t];return ms(e)?void 0:e}function vMt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=gRe(e.title);ms(t)||(e.style["group-title"]={...e.style["group-title"],...t}),ms(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),ms(r)?delete e.title:e.title=r}function bMt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};ms(s)||(e.style[n??t]=s),delete e[t]}function e7(e){return zt(e,"layer")}function xMt(e){return zt(e,"repeat")}function _Mt(e){return!xt(e.repeat)&&zt(e.repeat,"layer")}class bee{map(t,n){return GL(t)?this.mapFacet(t,n):xMt(t)?this.mapRepeat(t,n):vee(t)?this.mapHConcat(t,n):ZL(t)?this.mapVConcat(t,n):yee(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(e7(t))return this.mapLayer(t,n);if(z1(t))return this.mapUnit(t,n);throw new Error(OZ(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const wMt={zero:1,center:1,normalize:1};function EMt(e){return gn(wMt,e)}const SMt=new Set([KRe,VL,zL,xO,qL,QZ,JZ,HL,XRe,XZ]),TMt=new Set([VL,zL,KRe]);function lE(e){return Kt(e)&&iT(e)==="quantitative"&&!e.bin}function yhe(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Kt(o)&&Kt(a))if(lE(o)&&lE(a)){if(o.stack)return t;if(a.stack)return i;const u=Kt(o)&&!!o.aggregate,l=Kt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(lE(o))return t;if(lE(a))return i}else{if(lE(o))return s&&n==="vertical"?void 0:t;if(lE(a))return s&&n==="horizontal"?void 0:i}}function CMt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function qIe(e,t){var m,g;const n=gg(e)?e:{type:e},r=n.type;if(!SMt.has(r))return null;const i=yhe(t,"x",n)||yhe(t,"theta",n);if(!i)return null;const s=t[i],o=Kt(s)?tn(s,{}):void 0,a=CMt(i),u=[],l=new Set;if(t[a]){const b=t[a],y=Kt(b)?tn(b,{}):void 0;y&&y!==o&&(u.push(a),l.add(y))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Kt(f)?tn(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=D8t.reduce((b,y)=>{if(y!=="tooltip"&&z_(t,y)){const x=t[y];for(const w of ln(x)){const S=O0(w);if(S.aggregate)continue;const C=tn(S,{});(!C||!l.has(C))&&b.push({channel:y,fieldDef:S})}}return b},[]);let p;return s.stack!==void 0?rx(s.stack)?p=s.stack?"zero":null:p=s.stack:TMt.has(r)&&(p="zero"),!p||!EMt(p)||EIe(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==ml.LINEAR&&s!=null&&s.stack&&qt(JDt(s.scale.type)),gr(t[Mg(i)])?(s.stack!==void 0&&qt(QDt(i)),null):(Kt(s)&&s.aggregate&&!W8t.has(s.aggregate)&&qt(ZDt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:hx(r),stackBy:h,offset:p}))}function WIe(e,t,n){const r=pl(e),i=ps("orient",r,n);if(r.orient=IMt(r.type,t,i),i!==void 0&&i!==r.orient&&qt(MDt(r.orient,i)),r.type==="bar"&&r.orient){const u=ps("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:t9t[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=ps("opacity",r,n),o=ps("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=kMt(r.type,t)),ps("cursor",r,n)===void 0&&(r.cursor=AMt(r,t,n)),r}function AMt(e,t,n){return t.href||e.href||ps("href",e,n)?"pointer":e.cursor}function kMt(e,t){if(Gr([qL,XZ,QZ,JZ],e)&&!EIe(t))return .7}function RMt(e,t,{graticule:n}){if(n)return!1;const r=mg("filled",e,t),i=e.type;return xa(r,i!==qL&&i!==HL&&i!==xO)}function IMt(e,t,n){switch(e){case qL:case QZ:case JZ:case XRe:case qOt:case HOt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case VL:if(Kt(r)&&(hl(r.bin)||Kt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Kt(i)&&(hl(i.bin)||Kt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Kt(r)&&r.type===yw&&!Bs(r.bin)||wO(r))&&Kt(i)&&hl(i.bin)?"horizontal":"vertical";if(!o)return(Kt(i)&&i.type===yw&&!Bs(i.bin)||wO(i))&&Kt(r)&&hl(r.bin)?"vertical":"horizontal"}case xO:if(s&&!(Kt(r)&&hl(r.bin))&&o&&!(Kt(i)&&hl(i.bin)))return;case zL:if(o)return Kt(i)&&hl(i.bin)?"horizontal":"vertical";if(s)return Kt(r)&&hl(r.bin)?"vertical":"horizontal";if(e===xO){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case HL:case XZ:{const a=lhe(r),u=lhe(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ff(r)&&r.type===nT,c=ff(i)&&i.type===nT;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function PMt(e){const{point:t,line:n,...r}=e;return $t(r).length>1?r:r.type}function NMt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:nd(e[t],["point","line"])});return e}function hj(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?un(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?un(t.point)?t.point:{}:void 0}function vhe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class DMt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(z1(t)){const{mark:r,encoding:i}=t,s=gg(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!hj(s,n[s.type],i);case"area":return!!hj(s,n[s.type],i)||!!vhe(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=JL(l,i),d=gg(a)?a:{type:a},h=hj(d,i[d.type],f),p=d.type==="area"&&vhe(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:PMt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:nd(f,["shape"])}],g=qIe(WIe(d,f,i),f);let b=f;if(g){const{fieldChannel:y,offset:x}=g;b={...f,[y]:{...f[y],...x?{stack:x}:{}}}}return b=nd(b,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...JS(d,["clip","interpolate","tension","tooltip"]),...p},encoding:b}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...JS(d,["clip","tooltip"]),...h},encoding:b}),r({...c,layer:m},{...n,config:NMt(i)})}}function OMt(e,t){return t?kI(e)?YIe(e,t):GIe(e,t):e}function pj(e,t){return t?YIe(e,t):e}function jH(e,t,n){const r=t[e];if(g9t(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};qt(dDt(r.repeat));return}return t}function GIe(e,t){if(e=jH("field",e,t),e!==void 0){if(e===null)return null;if(see(e)&&i1(e.sort)){const n=jH("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function bhe(e,t){if(Kt(e))return GIe(e,t);{const n=jH("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function xhe(e,t){if(gr(e)){const n=bhe(e,t);if(n)return n;if(RI(e))return{condition:e.condition}}else{if(II(e)){const n=bhe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function YIe(e,t){const n={};for(const r in e)if(zt(e,r)){const i=e[r];if(xt(i))n[r]=i.map(s=>xhe(s,t)).filter(s=>s);else{const s=xhe(i,t);s!==void 0&&(n[r]=s)}}return n}class MMt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(z1(t)){const{encoding:n,mark:r}=t;if(r==="line"||gg(r)&&r.type==="line")for(const i of I8t){const s=n2(i),o=n[s];if(n[i]&&(Kt(o)&&!hl(o.bin)||Fg(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return qt(ODt(!!i.x2,!!i.y2)),r({...t,mark:un(s)?{...s,type:"rule"}:"rule"},n)}}class LMt extends bee{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[$9t,U9t,Y9t,new DMt,new MMt]}map(t,n){if(z1(t)){const r=z_(t.encoding,n1),i=z_(t.encoding,r1),s=z_(t.encoding,PL);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=pj(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return _Mt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${fo(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!xt(r)&&t.columns&&(t=nd(t,["columns"]),qt(Zde("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!xt(r)&&r.row||[u?u.row:null],f=!xt(r)&&r.column||[u?u.column:null],d=xt(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const b={repeat:p,row:m,column:g,layer:u.layer},y=(i.name?`${i.name}_`:"")+l+"child__"+(xt(r)?`${fo(p)}`:(r.row?`row_${fo(m)}`:"")+(r.column?`column_${fo(g)}`:"")),x=this.map(i,{...n,repeater:b,repeaterPrefix:y});x.name=y,a.push(nd(x,["data"]))}const h=xt(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return kI(r)&&t.columns&&(t=nd(t,["columns"]),qt(Zde("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=whe({parentProjection:o,projection:i}),l=_he({parentEncoding:s,encoding:pj(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),b=pj(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:b,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&qt(NDt([...r?[n1]:[],...i?[r1]:[]]));const o={},a={};for(const u of[n1,r1]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:OMt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:_he({parentEncoding:n,encoding:s,layer:!0}),parentProjection:whe({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function _he({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...$t(e),...$t(t)]);for(const s of i){const o=t[s],a=e[s];if(gr(o)){const u={...a,...o};r[s]=u}else II(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||D0(a)||Pn(a)||gr(a)||xt(a))&&(r[s]=a)}}else r=t;return!r||ms(r)?void 0:r}function whe(e){const{parentProjection:t,projection:n}=e;return t&&n&&qt(_Dt({parentProjection:t,projection:n})),n??t}function xee(e){return zt(e,"filter")}function FMt(e){return zt(e,"stop")}function KIe(e){return zt(e,"lookup")}function $Mt(e){return zt(e,"data")}function BMt(e){return zt(e,"param")}function jMt(e){return zt(e,"pivot")}function UMt(e){return zt(e,"density")}function zMt(e){return zt(e,"quantile")}function VMt(e){return zt(e,"regression")}function HMt(e){return zt(e,"loess")}function qMt(e){return zt(e,"sample")}function WMt(e){return zt(e,"window")}function GMt(e){return zt(e,"joinaggregate")}function YMt(e){return zt(e,"flatten")}function KMt(e){return zt(e,"calculate")}function XIe(e){return zt(e,"bin")}function XMt(e){return zt(e,"impute")}function QMt(e){return zt(e,"timeUnit")}function JMt(e){return zt(e,"aggregate")}function ZMt(e){return zt(e,"stack")}function eLt(e){return zt(e,"fold")}function tLt(e){return zt(e,"extent")&&!zt(e,"density")&&!zt(e,"regression")}function nLt(e){return e.map(t=>xee(t)?{filter:oS(t.filter,AOt)}:t)}class rLt extends bee{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Ehe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Ehe(t,n),t.encoding){const r={};for(const[i,s]of Nb(t.encoding))r[i]=QIe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Nb(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Tl(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Ehe(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(xee(s))return{filter:UH(s,t)};if(XIe(s)&&r2(s.bin))return{...s,bin:JIe(s.bin)};if(KIe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function QIe(e,t){var r,i;const n=ur(e);if(Kt(n)&&r2(n.bin)&&(n.bin=JIe(n.bin)),a2(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(RI(n))if(xt(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:UH(s,t)}});else{const{selection:s,param:o,test:a,...u}=QIe(n.condition,t);n.condition=o?n.condition:{...u,test:UH(n.condition,t)}}return n}function JIe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function UH(e,t){const n=r=>oS(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):oS(e.test||e.filter,r=>r.selection?n(r.selection):r)}class zH extends bee{map(t,n){const r=n.selections??[];if(t.params&&!z1(t)){const i=[];for(const s of t.params)gee(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(cn(a)&&(a===t.name||i.includes(a))||xt(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=zH.prototype[e];zH.prototype[e]=function(n,r){return t.call(this,n,iLt(n,r))}}function iLt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function ZIe(e,t){t===void 0&&(t=HIe(e.config));const n=uLt(e,t),{width:r,height:i}=e,s=lLt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const sLt=new LMt,oLt=new rLt,aLt=new zH;function uLt(e,t={}){const n={config:t};return aLt.map(sLt.map(oLt.map(e,n),n),n)}function She(e){return cn(e)?{type:e}:e??{}}function lLt(e,t,n){let{width:r,height:i}=t;const s=z1(e)||e7(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(qt(Kde("width")),r=void 0),i=="container"&&(qt(Kde("height")),i=void 0));const a={type:"pad",...o,...n?She(n.autosize):{},...She(e.autosize)};if(a.type==="fit"&&!s&&(qt(tDt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&qt(Xde("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&qt(Xde("height")),!Qd(a,{type:"pad"}))return a}function cLt(e){return["fit","fit-x","fit-y"].includes(e)}function fLt(e){return e?`fit-${LL(e)}`:"fit"}const dLt=["background","padding"];function The(e,t){const n={};for(const r of dLt)e&&e[r]!==void 0&&(n[r]=qd(e[r]));return t&&(n.params=e.params),n}class V1{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new V1(ur(this.explicit),ur(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return xa(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of $t(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Cm(e){return{explicit:!0,value:e}}function Ud(e){return{explicit:!1,value:e}}function e6e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:t7(t,n,r,i)}}function t7(e,t,n,r){return e.explicit&&t.explicit&&qt(HDt(n,r,e.value,t.value)),e}function Mb(e,t,n,r,i=t7){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Qd(e.value,t.value)?e:i(e,t,n,r)}class hLt extends V1{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function aT(e){return zt(e,"url")}function Z4(e){return zt(e,"values")}function t6e(e){return zt(e,"name")&&!aT(e)&&!Z4(e)&&!ab(e)}function ab(e){return e&&(n6e(e)||r6e(e)||_ee(e))}function n6e(e){return zt(e,"sequence")}function r6e(e){return zt(e,"sphere")}function _ee(e){return zt(e,"graticule")}var So;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(So||(So={}));function i6e({invalid:e,isPath:t}){switch(ZRe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function pLt(e){const{marks:t,scales:n}=i6e(e);return t===n?So.Main:n==="include-invalid-values"?So.PreFilterInvalid:So.PostFilterInvalid}class us{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){qt(vDt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class rd extends us{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${eRe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function mj(e){return e.as!==void 0}function Che(e){return`${e}_end`}class Jm extends us{clone(){return new Jm(null,ur(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(o2(u)){if(wo(n)){const{mark:c,markDef:f,config:d}=n,h=Ob({fieldDef:s,markDef:f,config:d});(J4(c)||h)&&(l={timeUnit:Bu(u),field:a})}}else l={as:tn(s,{forAs:!0}),field:a,timeUnit:u};if(wo(n)){const{mark:c,markDef:f,config:d}=n,h=Ob({fieldDef:s,markDef:f,config:d});J4(c)&&_a(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[ii(l)]=l)}return i},{});return ms(r)?null:new Jm(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Bu(r),o={...i,timeUnit:s};return new Jm(t,{[ii(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Nb(this.timeUnits)){const s=mj(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Tl(this.timeUnits).map(t=>mj(t)?t.as:Che(t.field)))}dependentFields(){return new Set(Tl(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${ii(this.timeUnits)}`}assemble(){const t=[];for(const n of Tl(this.timeUnits)){const{rectBandPosition:r}=n,i=Bu(n.timeUnit);if(mj(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:op(s),type:"timeunit",...a?{units:jL(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Ahe(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=s6e({timeUnit:i,field:o}),u=Che(o);t.push({type:"formula",expr:a,as:u}),t.push(...Ahe([o,u],r,i))}}return t}}const n7="offsetted_rect_start",r7="offsetted_rect_end";function s6e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=MRe(r),{part:o,step:a}=BRe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${ss(t)}, ${n?-a:a})`}function Ahe([e,t],n,r){if(n!==void 0&&n!==.5){const i=ss(e),s=ss(t);return[{type:"formula",expr:khe([s6e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${n7}`},{type:"formula",expr:khe([i,s],n+.5),as:`${e}_${r7}`}]}return[]}function khe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const DI="_tuple_fields";class mLt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const gLt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new mLt),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let b=fo(`${r}_${g}`);for(let y=1;a.has(b);y++)b=fo(`${r}_${g}_${y}`);return a.add(b),{[m]:b}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?ln(n.value):null;let{fields:d,encodings:h}=un(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(un(p))for(const m of $t(p))R8t(m)?(h||(h=[])).push(m):l==="interval"?(qt(fDt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){qt(nDt(p,m.aggregate));continue}else if(!g){qt(Jde(p));continue}if(m.timeUnit&&!o2(m.timeUnit)){g=e.vgField(p);const b={timeUnit:m.timeUnit,as:g,field:m.field};o[ii(b)]=b}if(!s[g]){const b=l==="interval"&&Lg(p)&&N0(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",y={field:g,channel:p,type:b,index:i.items.length};y.signals={...u(y,"data"),...u(y,"visual")},i.items.push(s[g]=y),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===M0,oRe(p)?(y.geoChannel=p,y.channel=sRe(p),i.hasChannel[y.channel]=s[g]):i.hasChannel[p]=s[g]}}else qt(Jde(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===M0}f&&(t.init=f.map(p=>i.items.map(m=>un(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),ms(o)||(i.timeUnit=new Jm(null,o))},signals:(e,t,n)=>{const r=t.name+DI;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(l6e)})}},o6e="_curr",e8="anim_value",AE="anim_clock",VH="eased_anim_clock",a6e="min_extent",u6e="max_range_extent",gj="last_tick_at",yj="is_playing",yLt=1/60*1e3,vLt=(e,t)=>[{name:VH,update:AE},{name:`${e}_domain`,init:`domain('${t}')`},{name:a6e,init:`extent(${e}_domain)[0]`},{name:u6e,init:`extent(range('${t}'))[1]`},{name:e8,update:`invert('${t}', ${VH})`}],bLt={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Zm(t)&&(n=n.concat([{name:AE,init:"0",on:[{events:{type:"timer",throttle:yLt},update:`${yj} ? (${AE} + (now() - ${gj}) > ${u6e} ? 0 : ${AE} + (now() - ${gj})) : ${AE}`}]},{name:gj,init:"now()",on:[{events:[{signal:AE},{signal:yj}],update:"now()"}]},{name:yj,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+DI,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Tl(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+lS):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${V_(e)}, `;if(t.project.hasSelectionId)l+=`${M0}: ${o}[${Jt(M0)}]`;else if(Zm(t))l+=`fields: ${i}, values: [${e8} ? ${e8} : ${a6e}]`;else{const c=s.items.map(f=>{const d=e.fieldDef(f.channel);return d!=null&&d.bin?`[${o}[${Jt(e.vgField(f.channel,{}))}], ${o}[${Jt(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${o}[${Jt(f.field)}]`}).join(", ");l+=`fields: ${i}, values: [${c}]`}if(Zm(t))return n.concat(vLt(t.name,e.scaleName(ax)),[{name:r+C1,on:[{events:[{signal:VH},{signal:e8}],update:`{${l}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+C1,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}}};function l6e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=op(i.field),i}function xw(e,t=!0,n=pc){if(xt(e)){const r=e.map(i=>xw(i,t,n));return t?`[${r.join(", ")}]`:r}else if(s2(e))return n(t?gw(e):mOt(e));return t?n(gs(e)):e}function xLt(e,t){for(const n of Tl(e.component.selection??{})){const r=n.name;let i=`${r}${C1}, ${n.resolve==="global"?"true":`{unit: ${V_(e)}}`}`;for(const s of s7)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+GLt,on:[{events:{signal:n.name+C1},update:`modify(${Jt(n.name+_w)}, ${i})`}]})}return wee(t)}function _Lt(e,t){if(e.component.selection&&$t(e.component.selection).length){const n=Jt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:sx("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return wee(t)}function wLt(e,t){let n=!1;for(const r of Tl(e.component.selection??{})){const i=r.name,s=Jt(i+_w);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${C6e}(${s}, ${Jt(a)}${u}`})}n=!0;for(const a of s7)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),wee(t)}function ELt(e,t){const n=[],r=[],i=V_(e,{escape:!1});for(const s of Tl(e.component.selection??{})){const o={name:s.name+_w};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:M0}}]),s.init){const u=s.project.items.map(l6e);o.values=s.project.hasSelectionId?s.init.map(l=>({unit:i,[M0]:xw(l,!1)[0]})):s.init.map(l=>({unit:i,fields:u,values:xw(l,!1)}))}if([...n,...t].filter(u=>u.name===s.name+_w).length||n.push(o),Zm(s)&&t.length){const u=e.lookupDataSource(e.getDataName(So.Main)),l=t.find(f=>f.name===u),c=l.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){l.transform=l.transform.filter(d=>d!==c);const f={name:l.name+o6e,source:l.name,transform:[c]};r.push(f)}}}return n.concat(t,r)}function c6e(e,t){for(const n of Tl(e.component.selection??{}))for(const r of s7)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function SLt(e,t){for(const n of e.children)wo(n)&&(t=c6e(n,t));return t}function TLt(e,t,n,r){const i=P6e(e,t.param,t);return{signal:N0(n.get("type"))&&xt(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function wee(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const s1={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Lg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&qt(oDt),!s||!N0(o)){qt(sDt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||qH(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(C6e))i.update=`{${r.map(o=>`${Jt(op(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Jt(op(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!qH(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function HH(e,t){return`domain(${Jt(e.scaleName(t))})`}function qH(e){return e.parent&&bC(e.parent)&&(!e.parent.parent||qH(e.parent.parent))}const lS="_brush",f6e="_scale_trigger",p3="geo_interval_init_tick",d6e="_init",CLt="_center",ALt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...un(n.select)?n.select:{}};i.fields=[M0],i.encodings||(i.encodings=n.value?$t(n.value):[G0,W0]),n.select={type:"interval",...i}}if(t.translate&&!s1.defined(t)){const i=`!event.item || event.item.mark.name !== ${Jt(t.name+lS)}`;for(const s of t.events){if(!s.between){qt(`${s} is not an ordered event stream for interval selections.`);continue}const o=ln((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+C1,s=Tl(t.project.hasChannel).filter(a=>a.channel===po||a.channel===Wu),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(kLt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Jt(e.projectionName()),u=e.projectionName()+CLt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=S=>e.getSizeSignalRef(S).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+d6e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(C=>C.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const b=`intersect(${g}, {markname: ${Jt(e.getName("marks"))}}, unit.mark)`,y=`{unit: ${V_(e)}}`,x=`vlSelectionTuples(${b}, ${y})`,w=s.map(S=>S.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:p3}]:[]],update:x}]})}else{if(!s1.defined(t)){const l=r+f6e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Jt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),b=N0(g)?"+":"";return`(!isArray(${h}) || (${b}invert(${m}, ${p})[0] === ${b}${h}[0] && ${b}invert(${m}, ${p})[1] === ${b}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${V_(e)}, fields: ${r+DI}, values`;return n.concat({name:i,...o?{init:`{${u}: ${xw(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(wo(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===p3).length||n.unshift({name:p3,value:null,on:[{events:"timer{1}",update:`${p3} === null ? {} : ${p3}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Jt(t.name+_w)})`;if(s1.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of $t(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${V_(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=$t(h).reduce((g,b)=>(g[b]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(y=>y).join(" && "),value:h[b]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+lS}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+lS,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function kLt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Jt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===po?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=s1.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:xw(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+f6e},update:N0(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:xw(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===po?0:1,h=t.name+d6e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}function mC({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=RI(t)&&t.condition;let o=[];s&&(o=ln(s).map(l=>{const c=i(l);if(m9t(l)){const{param:f,empty:d}=l;return{test:I6e(e,{param:f,empty:d}),...c}}else return{test:IO(e,l.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function Eee(e,t="text"){const n=e.encoding[t];return mC({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>i7(r,e.config),invalidValueRef:void 0})}function i7(e,t,n="datum"){if(e){if(D0(e))return Qs(e.value);if(gr(e)){const{format:r,formatType:i}=SO(e);return ree({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function h6e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(xt(o))return{tooltip:Rhe({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return mC({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const c=i7(l,i,a);if(c)return c;if(l===null)return;let f=ps("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),cn(f))return{value:f};if(un(f))return Pn(f)?f:f.content==="encoding"?Rhe(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function p6e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function u(c,f){const d=n2(f),h=ff(c)?c:{...c,type:e[d].type},p=h.title||aee(h,i),m=ln(p).join(", ").replaceAll(/"/g,'\\"');let g;if(_a(f)){const b=f==="x"?"x2":"y2",y=O0(e[b]);if(hl(h.bin)&&y){const x=tn(h,{expr:o}),w=tn(y,{expr:o}),{format:S,formatType:C}=SO(h);g=AI(x,w,S,C,i),s.add(b)}}if((_a(f)||f===yp||f===q0)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:b,formatType:y}=SO(h);g=ree({fieldOrDatumDef:h,format:b,formatType:y,expr:o,config:i,normalizeStack:!0}).signal}g??(g=i7(h,i,o).signal),a.push({channel:f,key:m,value:g})}lee(e,(c,f)=>{Kt(c)?u(c,f):YL(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s.has(c)&&!l[f]&&(l[f]=d);return l}function Rhe(e,t,n,{reactiveGeom:r}={}){const i=p6e(e,t,n,{reactiveGeom:r}),s=Nb(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function RLt(e){const{markDef:t,config:n}=e,r=ps("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...ILt(e),...PLt(e)}}function ILt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=ps("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:gn(J8t,t)?{}:{ariaRoleDescription:{value:t}}}function PLt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return mC({model:e,channelDef:s,vgChannel:"description",mainRefFn:u=>i7(u,e.config),invalidValueRef:void 0});const o=ps("description",n,r);if(o!=null)return{description:Qs(o)};if(r.aria===!1)return{};const a=p6e(t,i,r);if(!ms(a))return{description:{signal:Nb(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function vl(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;const l=i[e];a===void 0&&(u??(u=ps(e,r,s,{vgChannel:o,ignoreVgConfig:!RI(l)})),u!==void 0&&(a=Qs(u)));const c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=tIe({...c,scaleChannel:e,channelDef:l});return mC({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:f,mainRefFn:h=>nee({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function m6e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??ps("filled",n,i),a=Gr(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=ps(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=ps(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Qs(u)}:{},...l?{stroke:Qs(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&qt(CRe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...vl("color",e,{vgChannel:c,defaultValue:o?u:l}),...vl("fill",e,{defaultValue:r.fill?u:void 0}),...vl("stroke",e,{defaultValue:r.stroke?l:void 0})}}function NLt(e){const{encoding:t,mark:n}=e,r=t.order;return!hx(n)&&D0(r)?mC({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Qs(i.value),invalidValueRef:void 0}):{}}function uT({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:nee({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Qs(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function sf(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Mg(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=uT({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=See({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&_a(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:DLt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function DLt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(gr(n)&&i&&t===i.fieldChannel){if(Kt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return _O({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return U_(n,r,{suffix:"end"},{offset:s})}return tee(e)}function See({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=n2(n),u=Db(n),l=ps(n,s,o,{vgChannel:u});if(l!==void 0)return zk(n,l);switch(t){case"zeroOrMin":return Ihe({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return Ihe({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[cd(n)],mult:.5}}}}function Ihe({mainChannel:e,config:t,...n}){const r=eIe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const OLt={left:"x",center:"xc",right:"x2"},MLt={top:"y",middle:"yc",bottom:"y2"};function g6e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Db(e);const i=e==="x"?"align":"baseline",s=ps(i,t,n);let o;return Pn(s)?(qt(DDt(i)),o=void 0):o=s,e==="x"?OLt[o||(r==="top"?"left":"center")]:MLt[o||r]}function kO(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?y6e(e,t,{defaultPos:n,defaultPos2:r}):sf(e,t,{defaultPos:n})}function y6e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Mg(e),a=cd(e),u=LLt(t,r,o),l=u[a]?g6e(e,i,s):Db(e);return{...sf(e,t,{defaultPos:n,vgChannel:l}),...u}}function LLt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=n2(n),l=cd(n),c=Db(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?uT({channel:n,markDef:s,encoding:r,model:e}):uT({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=cd(n),b=e.markDef[g];return b!=null?{[g]:{value:b}}:{[c]:{field:e.getName(n)}}}const m=FLt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:_5(n,s)||_5(n,{[n]:NH(n,s,a.style),[l]:NH(l,s,a.style)})||_5(n,a[i])||_5(n,a.mark)||{[c]:See({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function FLt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return gr(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?U_(t,s,{suffix:"start"},{offset:u}):tee({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function _5(e,t){const n=cd(e),r=Db(e);if(t[r]!==void 0)return{[r]:zk(e,t[r])};if(t[e]!==void 0)return{[r]:zk(e,t[e])};if(t[n]){const i=t[n];if(vw(i))qt(ADt(n));else return{[n]:zk(e,i)}}}function T1(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Mg(t),a=cd(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??ps("size",i,n,{vgChannel:a}),p=cRe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||s==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return Kt(u)&&(Bs(u.bin)||hl(u.bin)||u.timeUnit&&!l)&&!(h&&!vw(h))&&!r[p]&&!zu(f)?jLt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(gr(u)&&zu(f)||m)&&!l?BLt(u,t,e):y6e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function $Lt(e,t,n,r,i,s,o){if(vw(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=mg("minBandSize",{type:o},r);return{signal:c?`max(${g0(c)}, ${l})`:l}}else i.band!==1&&(qt(FDt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Pn(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(i2(u)&&Ri(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=xa(u,o==="tick"?f:o==="bar"?l:c);if(Pn(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Ri(d))return{signal:`${1-d} * ${e}`}}return{value:BH(r.view,e)-2}}function BLt(e,t,n){var O,M;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=cd(t),f=Mg(t),d=cRe(t),h=n.scaleName(d),p=n.getScaleComponent(kZ(t)),m=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=vl("size",n,{vgChannel:c,defaultRef:Qs(r.size)}):qt(UDt(r.type)));const b=!!g,y=uIe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(O=l||p)==null?void 0:O.get("type"),useVlSizeChannel:m});g=g||{[c]:$Lt(c,h||u,p||l,s,y,!!e,r.type)};const x=((M=l||p)==null?void 0:M.get("type"))==="band"&&vw(y)&&!b?"top":"middle",w=g6e(t,r,s,x),S=w==="xc"||w==="yc",{offset:C,offsetType:R}=uT({channel:t,markDef:r,encoding:i,model:n,bandPosition:S?.5:0}),I=tee({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:C,defaultRef:See({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:S?R==="encoding"?0:.5:Pn(y)?{signal:`(1-${y})/2`}:vw(y)?(1-y.band)/2:0});if(c)return{[w]:I,...g};{const L=Db(f),V=g[c],D=C?{...V,offset:C}:V;return{[w]:I,[L]:xt(I)?[I[0],{...I[1],offset:D}]:{...I,offset:D}}}}function Phe(e,t,n,r,i,s,o){if(iRe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Pn(n)||Pn(i)||Pn(r)||s){const l=g0(n),c=g0(i),f=g0(r),d=g0(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",b=c?`(${c} + ${p})`:p;return{signal:m+g+b}}else return i=i||0,r+(n?-i-u:+i+u)}function jLt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var M;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=uIe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(M=r.component.axes[n])==null?void 0:M[0],h=(d==null?void 0:d.get("translate"))??.5,p=_a(n)?ps("binSpacing",s,i)??0:0,m=Mg(n),g=Db(n),b=Db(m),y=mg("minBandSize",s,i),{offset:x}=uT({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=uT({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),S=l9t({fieldDef:e,scaleName:u}),C=Phe(n,p,c,h,x,y,S),R=Phe(m,p,c,h,w??x,y,S),I=Pn(f)?{signal:`(1-${f.signal})/2`}:vw(f)?(1-f.band)/2:.5,O=Ob({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Bs(e.bin)||e.timeUnit){const L=e.timeUnit&&O!==.5;return{[b]:Nhe({fieldDef:e,scaleName:u,bandPosition:I,offset:R,useRectOffsetField:L}),[g]:Nhe({fieldDef:e,scaleName:u,bandPosition:Pn(I)?{signal:`1-${I.signal}`}:1-I,offset:C,useRectOffsetField:L})}}else if(hl(e.bin)){const L=U_(e,u,{},{offset:R});if(Kt(t))return{[b]:L,[g]:U_(t,u,{},{offset:C})};if(r2(e.bin)&&e.bin.step)return{[b]:L,[g]:{signal:`scale("${u}", ${tn(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}qt(RRe(m))}function Nhe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return _O({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:n7,endSuffix:r7}:{}})}const ULt=new Set(["aria","width","height"]);function vp(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?m6e(e):{};return{...zLt(e.markDef,t),...Dhe("fill",n),...Dhe("stroke",r),...vl("opacity",e),...vl("fillOpacity",e),...vl("strokeOpacity",e),...vl("strokeWidth",e),...vl("strokeDash",e),...NLt(e),...h6e(e),...Eee(e,"href"),...RLt(e)}}function Dhe(e,t){return t?{[e]:t}:{}}function zLt(e,t){return Q8t.reduce((n,r)=>(!ULt.has(r)&&zt(e,r)&&t[r]!=="ignore"&&(n[r]=Qs(e[r])),n),{})}function Tee(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var l;let o;if(!Lg(s)||!(o=e.getScaleType(s)))return;const a=FL(i.aggregate),u=eee({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(o9t(u)){const c=e.vgField(s,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>UL(s,!0)).join(" && ")}}}function Ohe(e,t){if(t!==void 0)return{[e]:Qs(t)}}const vj="voronoi",v6e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(vj)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(hx(s))return qt(rDt(s)),n;const o={name:e.getName(vj),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...h6e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.includes(vj)&&(u=!0)}),u||n.splice(a+1,0,o),n}},b6e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!mee(e.bind),parse:(e,t,n)=>A6e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=v6e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=fo(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:xw(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Jt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(l=>l.name===r+C1),o=r+DI,a=i.items.map(l=>fo(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},RO="_toggle",x6e={defined:e=>e.type==="point"&&!Zm(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+RO,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+C1,r=t.name+RO;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${V_(e)}}, `)+`${r} ? ${n} : null`}},VLt={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Zm(e),parse:(e,t)=>{t.clear&&(t.clear=cn(t.clear)?sx(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(b6e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===fo(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+C1);r(i,"null"),x6e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+RO),r(i,"false"))}return n}},_6e={defined:e=>{const t=e.resolve==="global"&&e.bind&&mee(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==M0;return t&&!n&&qt(aDt),t&&n},parse:(e,t,n)=>{const r=ur(n);if(r.select=cn(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},A6e(t,r),un(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ln(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=dj(t.bind)?t.bind.legend:"click",s=cn(i)?sx(i,"view"):ln(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=dj(t.bind)&&t.bind.legend,s=o=>a=>{const u=ur(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${fo(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+C1),o=r+DI,a=i.items.filter(d=>d.hasLegend).map(d=>fo(`${r}_${fo(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+RO),f=dj(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function HLt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Tl(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&_6e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const w6e="_translate_anchor",E6e="_translate_delta",qLt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=s1.defined(t),s=r+w6e,{x:o,y:a}=t.project.hasChannel;let u=sx(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+lS,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?HH(e,po):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?HH(e,Wu):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+E6e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Mhe(e,t,o,"width",n),a!==void 0&&Mhe(e,t,a,"height",n),n}};function Mhe(e,t,n,r,i){const s=t.name,o=s+w6e,a=s+E6e,u=n.channel,l=s1.defined(t),c=i.find(S=>S.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===po?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,b=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,y=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",x=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${y}(${g}, ${b}${x})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const S6e="_zoom_anchor",T6e="_zoom_delta",WLt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=s1.defined(t),s=r+T6e,{x:o,y:a}=t.project.hasChannel,u=Jt(e.scaleName(po)),l=Jt(e.scaleName(Wu));let c=sx(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+lS,f))),n.push({name:r+S6e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Lhe(e,t,o,"width",n),a!==void 0&&Lhe(e,t,a,"height",n),n}};function Lhe(e,t,n,r,i){const s=t.name,o=n.channel,a=s1.defined(t),u=i.find(y=>y.name===n.signals[a?"data":"visual"]),l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?HH(e,o):u.name,h=s+T6e,p=`${s}${S6e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",b=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?b:`clampRange(${b}, 0, ${l})`})}const _w="_store",C1="_tuple",GLt="_modify",C6e="vlSelectionResolve",s7=[bLt,ALt,gLt,x6e,b6e,s1,_6e,VLt,qLt,WLt,v6e];function YLt(e){let t=e.parent;for(;t&&!ih(t);)t=t.parent;return t}function V_(e,{escape:t}={escape:!0}){let n=t?Jt(e.name):e.name;const r=YLt(e);if(r){const{facet:i}=r;for(const s of Qh)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Jt(r.vgField(s))}])`)}return n}function Cee(e){return Tl(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function A6e(e,t){(cn(t.select)||!t.select.on)&&delete e.events,(cn(t.select)||!t.select.clear)&&delete e.clear,(cn(t.select)||!t.select.toggle)&&delete e.toggle}function Zm(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function WH(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...WH(e.object)),t.push(...WH(e.property))),t)}function k6e(e){return e.object.type==="MemberExpression"?k6e(e.object):e.object.name==="datum"}function R6e(e){const t=HJ(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&k6e(r)&&n.add(WH(r).slice(1).join("."))}),n}class gC extends us{clone(){return new gC(null,this.model,ur(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=IO(this.model,this.filter,this),this._dependentFields=R6e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function KLt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const o=fo(s.name),a=s.select,u=cn(a)?a:a.type,l=un(a)?ur(a):{type:u},c=r[u];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l.mark={...c.mark,...l.mark}),(l[h]===void 0||l[h]===!0)&&(l[h]=ur(c[h]??l[h])));const f=n[o]={...l,name:o,type:u,init:s.value,bind:s.bind,events:cn(l.on)?sx(l.on,"scope"):ln(ur(l.on))};if(Zm(f)&&(i++,i>1)){delete n[o];continue}const d=ur(s);for(const h of s7)h.defined(f)&&h.parse&&h.parse(e,f,d)}return i>1&&qt(hDt),n}function I6e(e,t,n,r="datum"){const i=cn(t)?t:t.param,s=fo(i),o=Jt(s+_w);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Jt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function P6e(e,t,n){const r=fo(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&qt(pDt(s));else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,qt(mDt(a,i,n,s))):s=a[0].field}return`${o.name}[${Jt(op(s))}]`}function XLt(e,t){for(const[n,r]of Nb(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new rd(new gC(t,e,{param:n}),i,So.Lookup,e.component.data.outputNodeRefCounts)}}function IO(e,t,n){return Uk(t,r=>cn(r)?r:SOt(r)?I6e(e,r,n):URe(r))}function QLt(e,t){if(e)return xt(e)&&!Iv(e)?e.map(n=>aee(n,t)).join(", "):e}function bj(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function ak(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=h,m=R9t[p],g=c[p];if(m&&m!==t&&m!=="both")delete c[p];else if(NI(g)){const{condition:b,...y}=g,x=ln(b),w=che[p];if(w){const{vgProp:S,part:C}=w,R=[...x.map(I=>{const{test:O,...M}=I;return{test:IO(null,O),...M}}),y];bj(c,C,S,R),delete c[p]}else if(w===null){const S={signal:x.map(C=>{const{test:R,...I}=C;return`${IO(null,R)} ? ${Yde(I)} : `}).join("")+Yde(y)};c[p]=S}}else if(Pn(g)){const b=che[p];if(b){const{vgProp:y,part:x}=b;bj(c,x,y,g),delete c[p]}}Gr(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},ms(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:xa(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Pn(c.encode.labels.update.text)&&(p=hw(a,"datum.label",c.encode.labels.update.text.signal)),bj(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of vIe)e.hasAxisPart(p)||delete c.encode[p];ms(c.encode)&&delete c.encode}const h=QLt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:xa(l,0)}}}}function N6e(e){const{axes:t}=e.component,n=[];for(const r of U1)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function JLt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>ak(i,"grid",t)),...r.map(i=>ak(i,"grid",t)),...n.map(i=>ak(i,"main",t)),...r.map(i=>ak(i,"main",t))].filter(i=>i)}function Fhe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...$t(o),...$t(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${g0(o[c])} : ${g0(a[c])}`};return l}return t[i]})])}function ZLt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:qRe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Pn(n)?"axisOrient":`axis${_I(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Fhe(a,r,e,n),vgAxisConfig:Fhe(u,r,e,n),axisConfigStyle:e7t([...u,...a],r)}}function e7t(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=ln(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function GH(e,t,n,r={}){var s;const i=bRe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const $he={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??t7t(n,e),gridScale:({model:e,channel:t})=>n7t(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||O6e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||D6e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??i7t(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??s7t(t.type,n,Kt(t)&&!!t.timeUnit,Kt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??a7t({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:u7t,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=M6e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return _Re(i?[uhe(i)]:[],Kt(o)?[uhe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>l7t(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??c7t(n,t)};function t7t(e,t){return!zu(e)&&Kt(t)&&!Bs(t==null?void 0:t.bin)&&!hl(t==null?void 0:t.bin)}function n7t(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function r7t(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Pn(s)?s:Q4(s);{const{configValue:o}=GH("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?Q4(o):n===po&&Gr([KZ,YZ],e.type)&&!(Kt(e)&&e.timeUnit)?270:void 0}}function YH(e){return`(((${e.signal} % 360) + 360) % 360)`}function D6e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Pn(e)){const i=YH(e),s=Pn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Pn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Pn(e)){const i=YH(e),s=Pn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Pn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function O6e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Pn(e)){const o=YH(e),a=Pn(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Pn(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function i7t(e,t){if(t==="x"&&Gr(["quantitative","temporal"],e))return!0}function s7t(e,t,n,r){if(n&&!un(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function o7t(e){return e==="x"?"bottom":"left"}function a7t({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!zu(t)&&t!=="log"){if(Kt(e)){if(Bs(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Gr(["month","hours","day","quarter"],(i=Bu(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function u7t({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Kt(t)){const{timeUnit:n}=t;if(n){const r=$Re(n);if(r)return{signal:r}}}}function M6e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return wRe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function l7t(e,t){const n=e.values;if(xt(n))return yIe(t,n);if(Pn(n))return n}function c7t(e,t){return e==="rect"&&EO(t)?1:0}class lT extends us{clone(){return new lT(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=R6e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(a2(r)&&aIe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${URe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new lT(t,{calculate:u,as:cT(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${ii(this.transform)}`}}function cT(e,t,n){return tn(e,{prefix:t,suffix:"sort_index",...n})}function o7(e,t){return Gr(["top","bottom"],t)?"column":Gr(["left","right"],t)||e==="row"?"row":"column"}function fT(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return xa((t||{})[e],i[e],n.header[e])}function a7(e,t,n,r){const i={};for(const s of e){const o=fT(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Aee=["row","column"],kee=["header","footer"];function f7t(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=a7(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=o7(t,a),l=Q4(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...F6e(l,u),...L6e(u,l,s),...$6e(r,i,t,Q9t,LIe)}}}function L6e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=O6e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function F6e(e,t){const n=D6e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function d7t(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of kee)if(n[i])for(const s of n[i]){const o=p7t(e,t,i,n,s);o!=null&&r.push(o)}return r}function h7t(e,t){const{sort:n}=e;return i1(n)?{field:tn(n,{expr:"datum"}),order:n.order??"ascending"}:xt(n)?{field:cT(e,t,{expr:"datum"}),order:"ascending"}:{field:tn(e,{expr:"datum"}),order:n??"ascending"}}function KH(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=a7(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=ree({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=o7(t,a);return{text:{signal:u?hw(hw(u,"datum.label",l),"datum.value",tn(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...F6e(s,c),...L6e(c,s,o),...$6e(n,e,t,J9t,FIe)}}function p7t(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=a7(["labelOrient"],o.header,a,t);(t==="row"&&!Gr(["top","bottom"],f)||t==="column"&&!Gr(["left","right"],f))&&(s=KH(o,t,a))}const u=ih(e)&&!kI(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:h7t(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const m7t={column:{start:0,end:1},row:{start:1,end:0}};function g7t(e,t){return m7t[t][e]}function y7t(e,t){const n={};for(const r of Qh){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=a7(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=o7(r,o),u=g7t(s,a);u!==void 0&&(n[a]=u)}}return ms(n)?void 0:n}function $6e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=fT(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Ree(e){return[...w5(e,"width"),...w5(e,"height"),...w5(e,"childWidth"),...w5(e,"childHeight")]}function w5(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(zu(o)&&i2(a)){const u=e.scaleName(n);return ih(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Bhe(u,a)]:[Bhe(u,a),{name:i,update:B6e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=$H(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Bhe(e,t){const n=`${e}_step`;return Pn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function B6e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=xa(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${g0(o)}, ${g0(s)}) * ${e}_step`}function j6e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function U6e(e,t){return $t(e).reduce((n,r)=>({...n,...mC({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Qs(i.value),invalidValueRef:void 0})}),{})}function z6e(e,t){if(ih(t))return e==="theta"?"independent":"shared";if(bC(t))return"shared";if(Lee(t))return _a(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Iee(e,t){const n=e.scale[t],r=_a(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&qt(WDt(t)),"independent"):e[r][t]||"shared"}const v7t={...tMt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},V6e=$t(v7t);class b7t extends V1{}const jhe={symbols:x7t,gradient:_7t,labels:w7t,entries:E7t};function x7t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...eDt({},n,XOt),...m6e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?H6e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===ud)delete f.fill;else if(zt(f.fill,"field"))h?delete f.fill:(f.fill=Qs(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Qs(m??1));else if(xt(f.fill)){const g=XH(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=Qs(g))}}if(f.stroke){if(r==="stroke"||!c&&r===ud)delete f.stroke;else if(zt(f.stroke,"field")||p)delete f.stroke;else if(xt(f.stroke)){const g=xa(XH(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==j1){const g=Kt(t)&&W6e(n,i,t);g?f.opacity=[{test:g,...Qs(m??1)},Qs(u.legend.unselectedOpacity)]:m&&(f.opacity=Qs(m))}return f={...f,...e},ms(f)?void 0:f}function _7t(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?H6e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Qs(l)),a={...a,...e},ms(a)?void 0:a}function w7t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Kt(t)?W6e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;bw(c)?f=y0({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=y0({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Kt(t)&&t.timeUnit===void 0&&(f=y0({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return ms(d)?void 0:d}function E7t(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function H6e(e){return q6e(e,(t,n)=>Math.max(t,n.value))}function XH(e){return q6e(e,(t,n)=>xa(t,n.value))}function q6e(e,t){if(y9t(e))return ln(e.condition).reduce(t,e.value);if(D0(e))return e.value}function W6e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Jt(n.field);return r.map(s=>`(!length(data(${Jt(fo(s)+_w)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Uhe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return iIe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return sIe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??I7t(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??P7t(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??T7t(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>uS(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(aS(n)&&jm(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>S7t(t,e)};function S7t(e,t){const n=e.values;if(xt(n))return yIe(t,n);if(Pn(n))return n}function T7t(e,t,n,r){if(t!=="shape"){const i=XH(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function C7t(e){const{legend:t}=e;return xa(t.type,A7t(e))}function A7t({channel:e,timeUnit:t,scaleType:n}){if(aS(e)){if(Gr(["quarter","month","day"],t))return"symbol";if(jm(n))return"gradient"}return"symbol"}function k7t({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??R7t(n,t)}function R7t(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function I7t({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(jm(i))return n==="horizontal"?r==="top"||r==="bottom"?zhe(t,"width",o,s):o:zhe(t,"height",u,a)}function zhe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function P7t(e){if(Gr(["quantile","threshold","log","symlog"],e))return"greedy"}function G6e(e){const t=wo(e)?N7t(e):L7t(e);return e.component.legends=t,t}function N7t(e){const{encoding:t}=e,n={};for(const r of[ud,...BIe]){const i=hu(t[r]);!i||!e.getScaleComponent(r)||r===ld&&Kt(i)&&i.type===pC||(n[r]=M7t(e,r))}return n}function D7t(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function O7t(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function M7t(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new b7t({},D7t(e,t));HLt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=hu(i[t]),f=Kt(c)?(w=Bu(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=C7t({legend:n,channel:t,timeUnit:f,scaleType:l}),p=k7t({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const S of V6e){if(h==="gradient"&&S.startsWith("symbol")||h==="symbol"&&S.startsWith("gradient"))continue;const C=S in Uhe?Uhe[S](m):n[S];if(C!==void 0){const R=O7t(C,S,n,e.fieldDef(t));(R||s.legend[S]===void 0)&&a.set(S,C,R)}}const g=(n==null?void 0:n.encoding)??{},b=a.get("selections"),y={},x={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const S of["labels","legend","title","symbols","gradient","entries"]){const C=U6e(g[S]??{},e),R=S in jhe?jhe[S](C,x):C;R!==void 0&&!ms(R)&&(y[S]={...b!=null&&b.length&&Kt(c)?{name:`${fo(c.field)}_legend_${S}`}:{},...b!=null&&b.length?{interactive:!!b}:{},update:R})}return ms(y)||a.set("encode",y,!!(n!=null&&n.encoding)),a}function L7t(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){G6e(r);for(const i of $t(r.component.legends))n.legend[i]=Iee(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Y6e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of $t(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Y6e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of V6e){const c=Mb(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return F7t(f,d);case"title":return ERe(f,d);case"type":return i=!0,Ud("symbol")}return t7(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&vO(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&vO(e.explicit,["encode","gradient"])),e}function F7t(e,t){return t.value==="circle"?t:e}function $7t(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function K6e(e){const t=e.component.legends,n={};for(const i of $t(t)){const s=e.getScaleComponent(i),o=gs(s.get("domains"));if(n[o])for(const a of n[o])Y6e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Tl(n).flat().map(i=>B7t(i,e.config)).filter(i=>i!==void 0)}function B7t(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of BIe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Pn(s.encode.labels.update.text)&&(l=hw(r,"datum.label",s.encode.labels.update.text.signal)),$7t(s,"labels","text",{signal:l})}return s}}function j7t(e){return bC(e)||Lee(e)?U7t(e):X6e(e)}function U7t(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),X6e(e))}function X6e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Pn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Gr(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const z7t=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Q6e extends V1{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function J6e(e){e.component.projection=wo(e)?V7t(e):W7t(e)}function V7t(e){if(e.hasProjection){const t=pl(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?H7t(e):void 0,s=new Q6e(e.projectionName(!0),{...pl(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function H7t(e){const t=[],{encoding:n}=e;for(const r of[[G0,W0],[ap,Y0]])(hu(n[r[0]])||hu(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ld)&&e.typedFieldDef(ld).type===pC&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(So.Main)),t}function q7t(e,t){const n=_Z(z7t,i=>!!(!gn(e.explicit,i)&&!gn(t.explicit,i)||gn(e.explicit,i)&&gn(t.explicit,i)&&Qd(e.get(i),t.get(i))));if(Qd(e.size,t.size)){if(n)return e;if(Qd(e.explicit,{}))return t;if(Qd(t.explicit,{}))return e}return null}function W7t(e){if(e.children.length===0)return;let t;for(const r of e.children)J6e(r);const n=_Z(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=q7t(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Q6e(r,t.specifiedProjection,t.size,ur(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function G7t(e,t,n,r){if(PI(t,n)){const i=wo(e)?e.axis(n)??e.legend(n)??{}:{},s=tn(t,{expr:"datum"}),o=tn(t,{expr:"datum",binSuffix:"end"});return{formulaAs:tn(t,{binSuffix:"range",forAs:!0}),formula:AI(s,o,i.format,i.formatType,r)}}return{}}function Z6e(e,t){return`${mRe(e)}_${t}`}function Y7t(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Pee(e,t,n){const r=KL(n,void 0)??{},i=Z6e(r,t);return e.getName(`${i}_bins`)}function K7t(e){return"as"in e}function Vhe(e,t,n){let r,i;K7t(e)?r=cn(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[tn(e,{forAs:!0}),tn(e,{binSuffix:"end",forAs:!0})];const s={...KL(t,void 0)},o=Z6e(s,e.field),{signal:a,extentSignal:u}=Y7t(n,o);if($L(s.extent)){const c=s.extent;i=P6e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class eg extends us{clone(){return new eg(null,ur(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ff(s)&&Bs(s.bin)){const{key:a,binComponent:u}=Vhe(s,s.bin,n);i[a]={...u,...i[a],...G7t(n,s,o,n.config)}}return i},{});return ms(r)?null:new eg(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Vhe(n,n.bin,r);return new eg(t,{[i]:s})}merge(t,n){for(const r of $t(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Bm([...this.bins[r].as,...t.bins[r].as],ii)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Tl(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Tl(this.bins).map(t=>t.field))}hash(){return`Bin ${ii(this.bins)}`}assemble(){return Tl(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:op(t.field),as:r,signal:t.signal,...$L(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:op(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:tn({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function X7t(e,t,n,r){var s;const i=wo(r)?r.encoding[Mg(t)]:void 0;if(ff(n)&&wo(r)&&lIe(n,i,r.markDef,r.config)){e.add(tn(n,{})),e.add(tn(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=Ob({fieldDef:n,markDef:a,config:u});J4(o)&&l!==.5&&_a(t)&&(e.add(tn(n,{suffix:n7})),e.add(tn(n,{suffix:r7}))),n.bin&&PI(n,t)&&e.add(tn(n,{binSuffix:"range"}))}else if(oRe(t)){const o=sRe(t);e.add(r.getName(o))}else e.add(tn(n));return a2(n)&&FOt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Q7t(e,t){for(const n of $t(t)){const r=t[n];for(const i of $t(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class S0 extends us{clone(){return new S0(null,new Set(this.dimensions),ur(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([tn(o,{forAs:!0})]);else{if(S1(u)||dx(u)){const c=S1(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([tn({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([tn(o,{forAs:!0})]);Lg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([tn({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([tn({field:l,aggregate:"max"},{forAs:!0})]))}else X7t(s,a,o,n)}),s.size+$t(i).length===0)?null:new S0(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:u,as:l}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([l||tn(o,{forAs:!0})])):(s[u]??(s[u]={}),(r=s[u])[a]??(r[a]=new Set),s[u][a].add(l||tn(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+$t(s).length===0?null:new S0(t,i,s)}merge(t){return Q4e(this.dimensions,t.dimensions)?(Q7t(this.measures,t.measures),!0):(uOt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...$t(this.measures)])}producedFields(){const t=new Set;for(const n of $t(this.measures))for(const r of $t(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${ii({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of $t(this.measures))for(const o of $t(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:op(s));return{type:"aggregate",groupby:[...this.dimensions].map(op),ops:t,fields:n,as:r}}}class yC extends us{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Qh){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[tn(o),...Bs(a)?[tn(o,{binSuffix:"end"})]:[]],...i1(u)?{sortField:u}:xt(u)?{sortIndexField:cT(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Qh)this[n]&&(t+=` ${n.charAt(0)}:${ii(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Qh)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Qh)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of U1){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(zu(i)&&i2(s)){const o=u7(this.childModel,n),a=Mee(o);a?t[n]=a:qt(MZ(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=WL,field:f}=u;s.push(f),o.push(c),a.push(tn(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Aee){for(const c of kee){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[r1,n1])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Hhe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function J7t(e,t){const n=SZ(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Hhe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Hhe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return qt(yDt(t)),null}function Z7t(e){const t={};return ZN(e.filter,n=>{if(jRe(n)){let r=null;UZ(n)?r=qd(n.equal):VZ(n)?r=qd(n.lte):zZ(n)?r=qd(n.lt):HZ(n)?r=qd(n.gt):qZ(n)?r=qd(n.gte):WZ(n)?r=n.range[0]:GZ(n)&&(r=(n.oneOf??n.in)[0]),r&&(s2(r)?t[n.field]="date":Ri(r)?t[n.field]="number":cn(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function eFt(e){const t={};function n(r){oT(r)?t[r.field]="date":r.type==="quantitative"&&q8t(r.aggregate)?t[r.field]="number":eT(r.field)>1?r.field in t||(t[r.field]="flatten"):a2(r)&&i1(r.sort)&&eT(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((wo(e)||ih(e))&&e.forEachFieldDef((r,i)=>{if(ff(r))n(r);else{const s=n2(i),o=e.fieldDef(s);n({...r,type:o.type})}}),wo(e)){const{mark:r,markDef:i,encoding:s}=e;if(hx(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Kt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function tFt(e){const t={};if(wo(e)&&e.component.selection)for(const n of $t(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&eT(i.field)>1&&(t[i.field]="flatten")}return t}class oc extends us{clone(){return new oc(null,ur(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${ii(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!ab(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of $t(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:qt(ehe(a,r[a],u.value)))}for(const a of $t(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:qt(ehe(a,n[a],u)))}const s=new V1(n,r);i.copyAll(s);const o={};for(const a of $t(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return $t(o).length===0||i.parseNothing?null:new oc(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of $t(this._parse)){const r=this._parse[n];eT(n)===1&&(t[n]=r)}return t}producedFields(){return new Set($t(this._parse))}dependentFields(){return new Set($t(this._parse))}assembleTransforms(t=!1){return $t(this._parse).filter(n=>t?eT(n)>1:!0).map(n=>{const r=J7t(n,this._parse[n]);return r?{type:"formula",expr:r,as:dC(n)}:null}).filter(n=>n!==null)}}class Lb extends us{clone(){return new Lb(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([M0])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:M0}}}class OI extends us{clone(){return new OI(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${ii(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class MI extends us{clone(){return new MI(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${ii(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class ww extends us{constructor(t){super(null),t??(t={name:"source"});let n;if(ab(t)||(n=t.format?{...nd(t.format,["parse"])}:{}),Z4(t))this._data={values:t.values};else if(aT(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Gr(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else r6e(t)?this._data={values:[{type:"Sphere"}]}:(t6e(t)||ab(t))&&(this._data={});this._generator=ab(t),t.name&&(this._name=t.name),n&&!ms(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var qhe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},nFt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},uk;function Nee(e){return e instanceof ww||e instanceof OI||e instanceof MI}class Dee{constructor(){uk.set(this,void 0),qhe(this,uk,!1,"f")}setModified(){qhe(this,uk,!0,"f")}get modifiedFlag(){return nFt(this,uk,"f")}}uk=new WeakMap;class u2 extends Dee{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Oee extends Dee{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class rFt extends Oee{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of $t(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class iFt extends Oee{constructor(t){super(),this.requiresSelectionId=t&&Cee(t)}run(t){t instanceof Lb&&(this.requiresSelectionId&&(Nee(t.parent)||t.parent instanceof S0||t.parent instanceof oc)||(this.setModified(),t.remove()))}}class sFt extends Dee{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Jm&&(r=t.producedFields(),wZ(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class oFt extends Oee{constructor(){super()}run(t){t instanceof rd&&!t.isRequired()&&(this.setModified(),t.remove())}}class aFt extends u2{run(t){if(!Nee(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof oc)if(t instanceof oc)this.setModified(),t.merge(n);else{if(EZ(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class uFt extends u2{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof oc);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of $t(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!ms(i)){this.setModified();const o=new oc(t,i);for(const a of n){if(a instanceof oc)for(const u of $t(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof oc&&$t(a.parse).length===0&&a.remove()}}}}}class lFt extends u2{run(t){t instanceof rd||t.numChildren()>0||t instanceof yC||t instanceof ww||(this.setModified(),t.remove())}}class cFt extends u2{run(t){const n=t.children.filter(i=>i instanceof Jm),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class fFt extends u2{run(t){const n=t.children.filter(i=>i instanceof S0),r={};for(const i of n){const s=ii(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of $t(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class dFt extends u2{constructor(t){super(),this.model=t}run(t){const n=!(Nee(t)||t instanceof gC||t instanceof oc||t instanceof Lb),r=[],i=[];for(const s of t.children)s instanceof eg&&(n&&!EZ(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof eg?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class hFt extends u2{run(t){const n=[...t.children];if(!ZS(n,o=>o instanceof rd)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof rd){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof rd)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class l2 extends us{clone(){return new l2(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Bm(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??tn(t)}hash(){return`JoinAggregateTransform ${ii(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class dT extends us{clone(){return new dT(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=Lg(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,m=eee({scaleChannel:f,markDef:s,config:i,scaleType:h,isCountAggregate:FL(p)});m!=="show"&&m!=="always-valid"&&(l[c.field]=c)}return l},{});return $t(u).length?new dT(t,u):null}dependentFields(){return new Set($t(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${ii(this.filter)}`}assemble(){const t=$t(this.filter).reduce((n,r)=>{const i=this.filter[r],s=tn(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${QH(s)}))`):i.type==="quantitative"&&n.push(QH(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function QH(e){return`isValid(${e}) && isFinite(+${e})`}function pFt(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=tn(r);return i&&t.push(i),t},[])}function mFt(e){return xt(e)&&e.every(t=>cn(t))&&e.length>1}class o1 extends us{clone(){return new o1(null,ur(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(xa(f.order,"ascending"));const l={field:a,order:u};let c;return mFt(s)?c=s:cn(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new o1(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return O0(p)}).filter(h=>!!h),c=pFt(n),f=n.encoding.order;let d;if(xt(f)||Kt(f))d=xRe(f);else{const h=cIe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new o1(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${ii(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[tn(i,{binSuffix:"mid"})]:[tn(i,{}),tn(i,{binSuffix:"end"})]:[tn(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=tn(c,{expr:"datum"}),p=tn(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${QH(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:tn(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:tn(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class vC extends us{clone(){return new vC(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Bm(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??tn(t)}hash(){return`WindowTransform ${ii(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>DZ(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function gFt(e){function t(n){if(!(n instanceof yC)){const r=n.clone();if(r instanceof rd){const i=ZH+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof S0||r instanceof o1||r instanceof vC||r instanceof l2)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function JH(e){if(e instanceof yC)if(e.numChildren()===1&&!(e.children[0]instanceof rd)){const t=e.children[0];(t instanceof S0||t instanceof o1||t instanceof vC||t instanceof l2)&&t.addDimensions(e.fields),t.swapWithParent(),JH(e)}else{const t=e.model.component.data.main;e5e(t);const n=gFt(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(JH)}function e5e(e){if(e instanceof rd&&e.type===So.Main&&e.numChildren()===1){const t=e.children[0];t instanceof yC||(t.swapWithParent(),e5e(e))}}const ZH="scale_",E5=5;function eq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!eq(t.children))return!1}return!0}function Qp(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Whe(e,t,n){let r=e.sources,i=!1;return i=Qp(new oFt,r)||i,i=Qp(new iFt(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Qp(new lFt,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Qp(new aFt,r)||i,i=Qp(new dFt(t),r)||i,i=Qp(new sFt,r)||i,i=Qp(new uFt,r)||i,i=Qp(new fFt,r)||i,i=Qp(new cFt,r)||i,i=Qp(new rFt,r)||i,i=Qp(new hFt,r)||i),e.sources=r,i}function yFt(e,t){eq(e.sources);let n=0,r=0;for(let i=0;i<E5&&Whe(e,t,!0);i++)n++;e.sources.map(JH);for(let i=0;i<E5&&Whe(e,t,!1);i++)r++;eq(e.sources),Math.max(n,r)===E5&&qt(`Maximum optimization runs(${E5}) reached.`)}class Nu{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Nu(()=>t(n))}}function t5e(e){wo(e)?vFt(e):bFt(e)}function vFt(e){const t=e.component.scales;for(const n of $t(t)){const r=_Ft(e,n);if(t[n].setWithExplicit("domains",r),EFt(e,n),e.component.data.isFaceted){let s=e;for(;!ih(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Wy(a)&&(a.data=ZH+a.data.replace(ZH,""))}}}function bFt(e){for(const n of e.children)t5e(n);const t=e.component.scales;for(const n of $t(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Mb(r,o.getWithExplicit("domains"),"domains","scale",tq);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&qt(cDt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function xFt(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Ghe(t,n);if(!i){qt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Ghe(t,n);if(i)return"unaggregated"}return e}function _Ft(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=xFt(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&hu(r.x2)?hu(r.x)?Mb(Sv(n,i,e,"x"),Sv(n,i,e,"x2"),"domain","scale",tq):Sv(n,i,e,"x2"):t==="y"&&hu(r.y2)?hu(r.y)?Mb(Sv(n,i,e,"y"),Sv(n,i,e,"y2"),"domain","scale",tq):Sv(n,i,e,"y2"):Sv(n,i,e,t)}function wFt(e,t,n){return e.map(r=>({signal:`{data: ${XL(r,{timeUnit:n,type:t})}}`}))}function xj(e,t,n){var i;const r=(i=Bu(n))==null?void 0:i.unit;return t==="temporal"||r?wFt(e,t,r):[e]}function Sv(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=hu(i[r]),{type:c}=l,f=l.timeUnit,d=pLt({invalid:mg("invalid",s,a),isPath:hx(o)});if(LOt(t)){const m=Sv(e,void 0,n,r),g=xj(t.unionWith,c,f);return Cm([...g,...m.value])}else{if(Pn(t))return Cm([t]);if(t&&t!=="unaggregated"&&!GRe(t))return Cm(xj(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Ud([[0,1]]);const m=n.requestDataName(d);return Ud([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=Lg(r)&&Kt(l)?SFt(n,r,e):void 0;if(Fg(l)){const m=xj([l.datum],c,f);return Ud(m)}const p=l;if(t==="unaggregated"){const{field:m}=l;return Ud([{data:n.requestDataName(d),field:tn({field:m,aggregate:"min"})},{data:n.requestDataName(d),field:tn({field:m,aggregate:"max"})}])}else if(Bs(p.bin)){if(zu(e))return Ud(e==="bin-ordinal"?[]:[{data:X4(h)?n.requestDataName(d):n.requestDataName(So.Raw),field:n.vgField(r,PI(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!un(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(Bs(m)){const g=Pee(n,p.field,m);return Ud([new Nu(()=>{const b=n.getSignalName(g);return`[${b}.start, ${b}.stop]`})])}else return Ud([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Gr(["time","utc"],e)){const m=i[Mg(r)];if(lIe(p,m,s,a)){const g=n.requestDataName(d),b=Ob({fieldDef:p,fieldDef2:m,markDef:s,config:a}),y=J4(o)&&b!==.5&&_a(r);return Ud([{data:g,field:n.vgField(r,y?{suffix:n7}:{})},{data:g,field:n.vgField(r,{suffix:y?r7:"end"})}])}}return Ud(h?[{data:X4(h)?n.requestDataName(d):n.requestDataName(So.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function _j(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":WL),...r?{field:op(r)}:{},...i?{order:i}:{}}}function EFt(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=GRe(r)?r:void 0,o=r2(i)&&$L(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function SFt(e,t,n){if(!zu(n))return;const r=e.fieldDef(t),i=r.sort;if(aIe(i))return{op:"min",field:cT(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(i1(i)){const a=s&&!o.has(i.field);return _j(i,a)}else if(p9t(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(S1(c)||dx(c))return _j({field:tn(l),order:u},d);if(DZ(c)||!c)return _j({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Gr(["ascending",void 0],i))return!0}}function Ghe(e,t){const{aggregate:n,type:r}=e;return n?cn(n)&&!G8t.has(n)?{valid:!1,reason:BDt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:jDt(e)}:{valid:!0}:{valid:!1,reason:$Dt(e)}}function tq(e,t,n,r){return e.explicit&&t.explicit&&qt(qDt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function TFt(e){const t=Bm(e.map(o=>{if(Wy(o)){const{sort:a,...u}=o;return u}return o}),ii),n=Bm(e.map(o=>{if(Wy(o)){const a=o.sort;return a!==void 0&&!X4(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),ii);if(t.length===0)return;if(t.length===1){const o=e[0];if(Wy(o)&&n.length>0){let a=n[0];if(n.length>1){qt(nhe);const u=n.filter(l=>un(l)&&"op"in l&&l.op!=="min");n.every(l=>un(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(un(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Bm(n.map(o=>X4(o)||!("op"in o)||cn(o.op)&&gn(V8t,o.op)?o:(qt(GDt(o)),!0)),ii);let i;r.length===1?i=r[0]:r.length>1&&(qt(nhe),i=!0);const s=Bm(e.map(o=>Wy(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Mee(e){if(Wy(e)&&cn(e.field))return e.field;if(Y8t(e)){let t;for(const n of e.fields)if(Wy(n)&&cn(n.field)){if(!t)t=n.field;else if(t!==n.field)return qt(YDt),t}return qt(KDt),t}else if(K8t(e)){qt(XDt);const t=e.fields[0];return cn(t)?t:void 0}}function u7(e,t){const r=e.component.scales[t].get("domains").map(i=>(Wy(i)&&(i.data=e.lookupDataSource(i.data)),i));return TFt(r)}function n5e(e){return bC(e)||Lee(e)?e.children.reduce((t,n)=>t.concat(n5e(n)),Yhe(e)):Yhe(e)}function Yhe(e){return $t(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=CFt(i.range,s,n,e),h=u7(e,n),p=a?TLt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function CFt(e,t,n,r){if(_a(n)){if(i2(e))return{step:{signal:`${t}_step`}}}else if(un(e)&&Wy(e))return{...e,data:r.lookupDataSource(e.data)};return e}class r5e extends V1{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Gr([ml.LOG,ml.TIME,ml.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Gr([ml.LINEAR,ml.SQRT,ml.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(xt(a)){const u=a[0],l=a[a.length-1];if(Ri(u)&&Ri(l))if(u<=0&&l>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const AFt=["range","scheme"];function kFt(e){const t=e.component.scales;for(const n of NZ){const r=t[n];if(!r)continue;const i=RFt(n,e);r.setWithExplicit("range",i)}}function Khe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=cd(t),o=e.getName(s);if(un(r)&&r.binned&&r.step!==void 0)return new Nu(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Bs(r)){const a=Pee(e,i,r);return new Nu(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function RFt(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of AFt)if(n[f]!==void 0){const d=MH(s,f),h=YRe(e,f);if(!d)qt(ARe(s,f,e));else if(h)qt(h);else switch(f){case"range":{const p=n.range;if(xt(p)){if(_a(e))return Cm(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),b=t.getSignalName.bind(t);return Nu.fromName(b,g)}return m}))}else if(un(p))return Cm({data:t.requestDataName(So.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Cm(p)}case"scheme":return Cm(IFt(n[f]))}}const o=e===po||e==="xOffset"?"width":"height",a=r[o];if(yg(a)){if(_a(e))if(zu(s)){const f=s5e(a,t,e);if(f)return Cm({step:f})}else qt(kRe(o));else if(SI(e)){const f=e===ox?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=o5e(a,s);if(p)return Cm(p)}}}const{rangeMin:u,rangeMax:l}=n,c=PFt(e,t);return(u!==void 0||l!==void 0)&&MH(s,"rangeMin")&&xt(c)&&c.length===2?Cm([u??c[0],l??c[1]]):Ud(c)}function IFt(e){return MOt(e)?{scheme:e.name,...nd(e,["name"])}:{scheme:e}}function i5e(e,t,n,{center:r}={}){const i=cd(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Wu&&N0(n)?r?[Nu.fromName(a=>`${o(a)}/2`,s),Nu.fromName(a=>`-${o(a)}/2`,s)]:[Nu.fromName(o,s),0]:r?[Nu.fromName(a=>`-${o(a)}/2`,s),Nu.fromName(a=>`${o(a)}/2`,s)]:[0,Nu.fromName(o,s)]}function PFt(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=hu(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case po:case Wu:{if(Gr(["point","band"],u)){const f=a5e(e,n,r.view);if(yg(f))return{step:s5e(f,t,e)}}return i5e(e,t,u)}case ox:case hC:return NFt(e,t,u);case B1:{const f=MFt(i,r),d=LFt(i,n,t,r);return rT(u)?OFt(f,d,DFt(u,r,l,e)):[f,d]}case yp:return[0,Math.PI*2];case t2:return[0,360];case q0:return[0,new Nu(()=>{const f=t.getSignalName(ih(t.parent)?"child_width":"width"),d=t.getSignalName(ih(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case ax:return{step:1e3/r.scale.framesPerSecond};case cx:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case fx:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ld:return"symbol";case ud:case Dg:case Og:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case j1:case ux:case lx:return[r.scale.minOpacity,r.scale.maxOpacity]}}function s5e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=kZ(n),o=r[s];if(UIe({step:e,offsetIsDiscrete:gr(o)&&zRe(o.type)})==="offset"&&_Ie(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${Z8t(f)})`}}else return e.step}function o5e(e,t){if(UIe({step:e,offsetIsDiscrete:zu(t)})==="offset")return{step:e.step}}function NFt(e,t,n){const r=e===ox?"x":"y",i=t.getScaleComponent(r);if(!i)return i5e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=a5e(r,t.size,t.config.view);if(yg(l)){const c=o5e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Kt(l)&&l.timeUnit){const c=$Re(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Ob({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Pn(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Pn(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return K4e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function a5e(e,t,n){const r=e===po?"width":"height",i=t[r];return i||AO(n,r)}function DFt(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&xt(n)?n.length+1:(qt(sOt(r)),3)}}function OFt(e,t,n){const r=()=>{const i=g0(t),s=g0(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Pn(t)?new Nu(r):{signal:r()}}function MFt(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(BL("size",e))}const Xhe=.95;function LFt(e,t,n,r){const i={x:Khe(n,"x"),y:Khe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Qhe(t,i,r.view);return Ri(s)?s-1:new Nu(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Qhe(t,i,r.view);return Ri(s)?Math.pow(Xhe*s,2):new Nu(()=>`pow(${Xhe} * ${s.signal}, 2)`)}}throw new Error(BL("size",e))}function Qhe(e,t,n){const r=yg(e.width)?e.width.step:BH(n,"width"),i=yg(e.height)?e.height.step:BH(n,"height");return t.x||t.y?new Nu(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function u5e(e,t){wo(e)?FFt(e,t):c5e(e,t)}function FFt(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of $t(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=hu(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=MH(h,t),b=YRe(a,t);if(d!==void 0&&(g?b&&qt(b):qt(ARe(h,t,a))),g&&b===void 0)if(d!==void 0){const y=f.timeUnit,x=f.type;switch(t){case"domainMax":case"domainMin":s2(u[t])||x==="temporal"||y?l.set(t,{signal:XL(u[t],{type:x,timeUnit:y})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const y=zt(Jhe,t)?Jhe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:wIe(i,a),hasSecondaryRangeChannel:!!i[Mg(a)]}):r.scale[t];y!==void 0&&l.set(t,y,!1)}}}const Jhe={bins:({model:e,fieldOrDatumDef:t})=>Kt(t)?$Ft(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>BFt(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>jFt(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>UFt(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>zFt(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>VFt(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Kt(e)?e.sort:void 0;return HFt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>qFt(e,t,n,r,i,s.scale,o)};function l5e(e){wo(e)?kFt(e):c5e(e,"range")}function c5e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?l5e(r):u5e(r,t);for(const r of $t(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Mb(i,a,t,"scale",e6e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function $Ft(e,t){const n=t.bin;if(Bs(n)){const r=Pee(e,t.field,n);return new Nu(()=>e.getSignalName(r))}else if(hl(n)&&r2(n)&&n.step!==void 0)return{step:n.step}}function BFt(e,t){if(Gr([ud,Dg,Og],e)&&t!=="nominal")return"hcl"}function jFt(e,t,n,r,i,s){var o;if(!((o=O0(s))!=null&&o.bin||xt(n)||i!=null||r!=null||Gr([ml.TIME,ml.UTC],e)))return _a(t)?!0:void 0}function UFt(e,t,n,r,i,s){if(_a(e)){if(jm(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Kt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===ml.POINT)return n.pointPadding}}function zFt(e,t,n,r,i,s=!1){if(e===void 0){if(_a(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=i;return s?c:xa(o,n==="bar"?a:n==="tick"?l:u)}else if(SI(t)&&r===ml.BAND)return i.offsetBandPaddingInner}}function VFt(e,t,n,r,i,s=!1){if(e===void 0){if(_a(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===ml.BAND)return xa(o,Pn(r)?{signal:`${r.signal}/2`}:r/2)}else if(SI(t)){if(n===ml.POINT)return .5;if(n===ml.BAND)return i.offsetBandPaddingOuter}}}function HFt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return N0(e)&&t==="descending"?Pn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(N0(e)&&t==="descending")return!0}function qFt(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&N0(i)){if(xt(n)){const u=n[0],l=n[n.length-1];if(Ri(u)&&u<=0&&Ri(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!rT(i))return!0;if(!(Kt(t)&&t.bin)&&Gr([...U1,...O8t],e)){const{orient:u,type:l}=r;return Gr(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Gr(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function WFt(e,t,n,r,i=!1){const s=GFt(t,n,r,i),{type:o}=e;return Lg(t)?o!==void 0?zOt(t,o)?Kt(n)&&!UOt(o,n.type)?(qt(VDt(o,s)),s):o:(qt(zDt(t,o,s)),s):s:null}function GFt(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(aS(e)||lj(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&qt(cj(e,"ordinal")),"ordinal";if(uj(e))return"band";if(_a(e)||SI(e)){if(Gr(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in PZ)return"band";const s=n[cd(e)];return vw(s)||sT(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return aS(e)?"time":lj(e)==="discrete"?(qt(cj(e,"temporal")),"ordinal"):Kt(t)&&t.timeUnit&&Bu(t.timeUnit).utc?"utc":uj(e)?"band":"time";case"quantitative":return aS(e)?Kt(t)&&Bs(t.bin)?"bin-ordinal":"linear":lj(e)==="discrete"?(qt(cj(e,"quantitative")),"ordinal"):uj(e)?"band":"linear";case"geojson":return}throw new Error(TRe(t.type))}function YFt(e,{ignoreRange:t}={}){f5e(e),t5e(e);for(const n of jOt)u5e(e,n);t||l5e(e)}function f5e(e){wo(e)?e.component.scales=KFt(e):e.component.scales=QFt(e)}function KFt(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of NZ){const o=hu(t[s]);if(o&&n===QRe&&s===ld&&o.type===pC)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=wIe(t,s),l=WFt(a,s,o,r,u);i[s]=new r5e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const XFt=e6e((e,t)=>ihe(e)-ihe(t));function QFt(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){f5e(s);for(const o of $t(s.component.scales))if((t=i.scale)[o]??(t[o]=z6e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?IOt(a.value,u.value)?r[o]=Mb(a,u,"type","scale",XFt):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of $t(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new r5e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class wj{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function wo(e){return(e==null?void 0:e.type)==="unit"}function ih(e){return(e==null?void 0:e.type)==="facet"}function Lee(e){return(e==null?void 0:e.type)==="concat"}function bC(e){return(e==null?void 0:e.type)==="layer"}class Fee{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=pl(a),this.name=t.name??i,this.title=Iv(t.title)?{text:t.title}:t.title?pl(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new wj,this.projectionNameMap=r?r.projectionNameMap:new wj,this.signalNameMap=r?r.signalNameMap:new wj,this.data=t.data,this.description=t.description,this.transforms=nLt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:oMt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:GL(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new V1,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?ur(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){YFt(this)}parseProjection(){J6e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){G6e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of $t(r)){const o=r[s];o!==void 0&&(i[s]=Qs(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Qs(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:ms(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=y7t(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Qh)t[r].title&&n.push(f7t(this,r));for(const r of Aee)n=n.concat(d7t(this,r));return n}assembleAxes(){return JLt(this.component.axes,this.config)}assembleLegends(){return K6e(this)}assembleProjections(){return j7t(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...gRe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Gr(["unit","layer"],this.type)?Gr(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),ms(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||ih(this.parent)?n5e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return fo((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(So[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(ih(this.parent)){const n=j6e(t),r=LL(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(zu(s)&&i2(o)){const a=i.get("name"),u=u7(this,r),l=Mee(u);if(l){const c=tn({aggregate:"distinct",field:l},{expr:"datum"});return{signal:B6e(a,i,c)}}else return qt(MZ(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(uRe(t)&&Lg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(iDt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class d5e extends Fee{vgField(t,n={}){const r=this.fieldDef(t);if(r)return tn(r,n)}reduceFieldDef(t,n){return M9t(this.getMapping(),(r,i,s)=>{const o=O0(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){lee(this.getMapping(),(r,i)=>{const s=O0(r);s&&t(s,i)},n)}}class l7 extends us{clone(){return new l7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${ii(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class c7 extends us{clone(){return new c7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${ii(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class f7 extends us{clone(){return new f7(this.parent,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${ii(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class d7 extends us{clone(){return new d7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${ii(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class cS extends us{clone(){return new cS(null,ur(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[G0,W0],[ap,Y0]]){const s=i.map(o=>{const a=hu(n.encoding[o]);return Kt(a)?a.field:Fg(a)?{expr:`${a.datum}`}:D0(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new cS(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ld)){const i=n.typedFieldDef(ld);i.type===pC&&(t=new cS(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(cn);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${ii(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class eR extends us{clone(){return new eR(null,this.projection,ur(this.fields),ur(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[G0,W0],[ap,Y0]]){const i=r.map(o=>{const a=hu(n.encoding[o]);return Kt(a)?a.field:Fg(a)?{expr:`${a.datum}`}:D0(a)?{expr:`${a.value}`}:void 0}),s=r[0]===ap?"2":"";(i[0]||i[1])&&(t=new eR(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(cn))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${ii(this.fields)} ${ii(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class H_ extends us{clone(){return new H_(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new H_(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Kt(i)&&Kt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=TIe(n.mark,r);return new H_(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${ii(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:FMt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class h7 extends us{clone(){return new h7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${ii(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class tR extends us{clone(){return new tR(null,ur(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if($Mt(o)){let u=m5e(o.data,s);u||(u=new ww(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new rd(u,l,So.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(BMt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(fo(u),u)}catch{throw new Error(uDt(u))}if(a=l.materialized,!a)throw new Error(lDt(u))}return new tR(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ln(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${ii({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ln(this.transform.as)}:{}};else{let n=this.transform.as;cn(n)||(qt(xDt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class p7 extends us{clone(){return new p7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${ii(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class m7 extends us{clone(){return new m7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ur(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${ii(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class g7 extends us{clone(){return new g7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Bm((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${ii(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class y7 extends us{clone(){return new y7(null,ur(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${ii(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function h5e(e){let t=0;function n(r,i){if(r instanceof ww&&!r.isGenerator&&!aT(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof oc&&(r.parent instanceof ww&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof yC){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof OI||r instanceof MI||r instanceof dT||r instanceof gC||r instanceof lT||r instanceof eR||r instanceof S0||r instanceof tR||r instanceof vC||r instanceof l2||r instanceof d7||r instanceof f7||r instanceof l7||r instanceof h7||r instanceof p7||r instanceof m7||r instanceof Lb||r instanceof y7||r instanceof g7||r instanceof c7)&&i.transform.push(r.assemble()),(r instanceof eg||r instanceof Jm||r instanceof H_||r instanceof o1||r instanceof cS)&&i.transform.push(...r.assemble()),r instanceof rd&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof rd?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof rd&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function JFt(e){const t=[],n=h5e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function ZFt(e,t){const n=[],r=h5e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function e$t(e){return e==="top"||e==="left"||Pn(e)?"header":"footer"}function t$t(e){for(const t of Qh)n$t(e,t);Zhe(e,"x"),Zhe(e,"y")}function n$t(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=fT("title",null,r,t);let l=uS(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=xt(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=fT("labelOrient",a.header,r,t),f=a.header!==null?xa((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Gr(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[p5e(e,t,f)]}}}function p5e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Zhe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Iee(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=e$t(a.get("orient"));o[u]??(o[u]=[p5e(e,s,!1)]);const l=ak(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function r$t(e){$ee(e),PO(e,"width"),PO(e,"height")}function i$t(e){$ee(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";PO(e,t),PO(e,n)}function $ee(e){for(const t of e.children)t.parseLayoutSize()}function PO(e,t){const n=j6e(t),r=LL(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??z6e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=Mb(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function s$t(e){const{size:t,component:n}=e;for(const r of U1){const i=cd(r);if(t[i]){const s=t[i];n.layoutSize.set(i,yg(s)?"step":s,!0)}else{const s=o$t(e,i);n.layoutSize.set(i,s,!1)}}}function o$t(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(zu(s)){const a=AO(r.view,t);return i2(o)||yg(a)?"step":a}else return $H(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return $H(r.view,t);{const s=AO(r.view,t);return yg(s)?s.step:s}}}function nq(e,t,n){return tn(t,{suffix:`by_${tn(e)}`,...n})}class Vk extends d5e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Vee(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!kI(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=$t(t),r={};for(const i of n){if(![n1,r1].includes(i)){qt(BL(i,"facet"));break}const s=t[i];if(s.field===void 0){qt(DH(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=uee(t,n);return r.header?r.header=pl(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return zt(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=v7(this),this.child.parseData()}parseLayoutSize(){$ee(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>Zm(t))&&FZ(LZ)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),t$t(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Qh)for(const r of kee){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=fT("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=o7(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Vk))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Vk?{...this.channelHasField("column")?{encode:{update:{columns:{field:tn(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Vk){if(this.child.channelHasField("column")){const i=tn(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of U1){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(zu(o)&&i2(a)){const u=u7(this.child,i),l=Mee(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):qt(MZ(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Qh){const f=this.facet[c];if(f){u.push(tn(f));const{bin:d,sort:h}=f;if(Bs(d)&&u.push(tn(f,{binSuffix:"end"})),i1(h)){const{field:p,op:m=WL}=h,g=nq(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(xt(h)){const p=cT(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?i1(r.sort)?[nq(r,r.sort,{expr:"datum"})]:xt(r.sort)?[cT(r,t,{expr:"datum"})]:[tn(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(i1(i)?i.order:!xt(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return KH(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Aee)if(t[s]){const o=fT("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return KH(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=JFt(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Qh.map(u=>this.facetSortFields(u)).flat(),order:Qh.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(_Lt(this,[]))}]}getMapping(){return this.facet}}function a$t(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(i1(s.sort)){const{field:o,op:a=WL}=s.sort;e=i=new l2(e,{joinaggregate:[{op:a,field:o,as:nq(s,s.sort,{forAs:!0})}],groupby:[tn(s)]})}return i}return null}function m5e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(Z4(e)&&Z4(a)){if(Qd(e.values,a.values))return o}else if(aT(e)&&aT(a)){if(e.url===a.url)return o}else if(t6e(e)&&e.name===o.dataName)return o}}return null}function u$t(e,t){if(e.data||!e.parent){if(e.data===null){const r=new ww({values:[]});return t.push(r),r}const n=m5e(e.data,t);if(n)return ab(e.data)||(n.data.format=X4e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new ww(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function l$t(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(KMt(i))o=e=new lT(e,i),s="derived";else if(xee(i)){const a=Z7t(i);o=e=oc.makeWithAncestors(e,{},a,n)??e,e=new gC(e,t,i.filter)}else if(XIe(i))o=e=eg.makeFromTransform(e,i,t),s="number";else if(QMt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new oc(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Jm.makeFromTransform(e,i);else if(JMt(i))o=e=S0.makeFromTransform(e,i),s="number",Cee(t)&&(e=new Lb(e));else if(KIe(i))o=e=tR.make(e,t,i,r++),s="derived";else if(WMt(i))o=e=new vC(e,i),s="number";else if(GMt(i))o=e=new l2(e,i),s="number";else if(ZMt(i))o=e=o1.makeFromTransform(e,i),s="derived";else if(eLt(i))o=e=new d7(e,i),s="derived";else if(tLt(i))o=e=new c7(e,i),s="derived";else if(YMt(i))o=e=new f7(e,i),s="derived";else if(jMt(i))o=e=new g7(e,i),s="derived";else if(qMt(i))e=new y7(e,i);else if(XMt(i))o=e=H_.makeFromTransform(e,i),s="derived";else if(UMt(i))o=e=new l7(e,i),s="derived";else if(zMt(i))o=e=new p7(e,i),s="derived";else if(VMt(i))o=e=new m7(e,i),s="derived";else if(HMt(i))o=e=new h7(e,i),s="derived";else{qt(bDt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function v7(e){var g;let t=u$t(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(ab(i)||aT(i)||Z4(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new hLt;ab(i)?(n6e(i)?t=new MI(t,i.sequence):_ee(i)&&(t=new OI(t,i.graticule)),o.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(o.parseNothing=!0),t=oc.makeExplicit(t,e,o)??t,t=new Lb(t);const a=e.parent&&bC(e.parent);(wo(e)||ih(e))&&a&&(t=eg.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=l$t(t,e,o));const u=tFt(e),l=eFt(e);t=oc.makeWithAncestors(t,{},{...u,...l},o)??t,wo(e)&&(t=cS.parseAll(t,e),t=eR.parseAll(t,e)),(wo(e)||ih(e))&&(a||(t=eg.makeFromEncoding(t,e)??t),t=Jm.makeFromEncoding(t,e)??t,t=lT.parseAllForSortIndex(t,e));const c=t=S5(So.Raw,e,t);if(wo(e)){const b=S0.makeFromEncoding(t,e);b&&(t=b,Cee(e)&&(t=new Lb(t))),t=H_.makeFromEncoding(t,e)??t,t=o1.makeFromEncoding(t,e)??t}let f,d;if(wo(e)){const{markDef:b,mark:y,config:x}=e,w=ps("invalid",b,x),{marks:S,scales:C}=d=i6e({invalid:w,isPath:hx(y)});S!==C&&C==="include-invalid-values"&&(f=t=S5(So.PreFilterInvalid,e,t)),S==="exclude-invalid-values"&&(t=dT.make(t,e,d)??t)}const h=t=S5(So.Main,e,t);let p;if(wo(e)&&d){const{marks:b,scales:y}=d;b==="include-invalid-values"&&y==="exclude-invalid-values"&&(t=dT.make(t,e,d)??t,p=t=S5(So.PostFilterInvalid,e,t))}wo(e)&&XLt(e,h);let m=null;if(ih(e)){const b=e.getName("facet");t=a$t(t,e.facet)??t,m=new yC(t,e,b,h.getSource()),n[b]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:f,postFilterInvalid:p}}function S5(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new rd(n,s,e,i);return r[s]=o,o}class c$t extends Fee{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&qt(gDt),this.children=this.getChildren(t).map((l,c)=>Vee(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=v7(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of $t(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Zm(t))&&FZ(LZ)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return ZL(t)?t.vconcat:vee(t)?t.hconcat:t.concat}parseLayoutSize(){i$t(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Ree(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function f$t(e){return e===!1||e===null}const d$t={disable:1,gridScale:1,scale:1,...bIe,labelExpr:1,encode:1},g5e=$t(d$t);class Bee extends V1{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Bee(ur(this.explicit),ur(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!f$t(this.get(t))}hasOrientSignalRef(){return Pn(this.explicit.orient)}}function h$t(e,t,n){const{encoding:r,config:i}=e,s=hu(r[t])??hu(r[Mg(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(bw(u))return{text:y0({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(iT(s)==="quantitative"){if(sT(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:y0({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:y0({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(iT(s)==="temporal"&&i.timeFormatType&&Kt(s)&&!s.timeUnit)return{text:y0({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function p$t(e){return U1.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[_$t(n,e)]),t),{})}const m$t={bottom:"top",top:"bottom",left:"right",right:"left"};function g$t(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of $t(i.component.axes))n.axis[s]=Iee(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=y$t(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of U1){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Pn(a)){if(r[a]>0&&!u){const l=m$t[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function y$t(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=v$t(i,s)}}}else return t.map(n=>n.clone());return e}function v$t(e,t){for(const n of g5e){const r=Mb(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return ERe(i,s);case"gridScale":return{explicit:i.explicit,value:xa(i.value,s.value)}}return t7(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function b$t(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Pn(n.labelAngle)?n.labelAngle:Q4(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===M6e(r,i))return!0}return e===n[t]}const x$t=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function _$t(e,t){var b,y;let n=t.axis(e);const r=new Bee,i=hu(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((b=o[e==="x"?"axisX":"axisY"])==null?void 0:b.orient)||((y=o.axis)==null?void 0:y.orient)||o7t(e),u=t.getScaleComponent(e).get("type"),l=ZLt(e,u,a,t.config),c=n!==void 0?!n:GH("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=r7t(i,n,e,o.style,l),d=sIe(n.formatType,i,u),h=iIe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const x of g5e){const w=x in $he?$he[x](p):fhe(x)?n[x]:void 0,S=w!==void 0,C=b$t(w,x,n,t,e);if(S&&C)r.set(x,w,C);else{const{configValue:R=void 0,configFrom:I=void 0}=fhe(x)&&x!=="values"?GH(x,o.style,n.style,l):{},O=R!==void 0;S&&!O?r.set(x,w,C):(I!=="vgAxisConfig"||x$t.has(x)&&O||NI(R)||Pn(R))&&r.set(x,R,!1)}}const m=n.encoding??{},g=vIe.reduce((x,w)=>{if(!r.hasAxisPart(w))return x;const S=U6e(m[w]??{},t),C=w==="labels"?h$t(t,e,S):S;return C!==void 0&&!ms(C)&&(x[w]={update:C}),x},{});return ms(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function w$t({encoding:e,size:t}){for(const n of U1){const r=cd(n);yg(t[r])&&Yv(e[n])&&(delete t[r],qt(kRe(r)))}return t}const E$t={vgMark:"arc",encodeEntry:e=>({...vp(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...sf("x",e,{defaultPos:"mid"}),...sf("y",e,{defaultPos:"mid"}),...T1(e,"radius"),...T1(e,"theta")})},S$t={vgMark:"area",encodeEntry:e=>({...vp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...kO("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...kO("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Tee(e)})},T$t={vgMark:"rect",encodeEntry:e=>({...vp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...T1(e,"x"),...T1(e,"y")})},C$t={vgMark:"shape",encodeEntry:e=>({...vp(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Kt(n)&&n.type===pC?{field:tn(n,{expr:"datum"})}:{}}]}},A$t={vgMark:"image",encodeEntry:e=>({...vp(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...T1(e,"x"),...T1(e,"y"),...Eee(e,"url")})},k$t={vgMark:"line",encodeEntry:e=>({...vp(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...sf("x",e,{defaultPos:"mid"}),...sf("y",e,{defaultPos:"mid"}),...vl("size",e,{vgChannel:"strokeWidth"}),...Tee(e)})},R$t={vgMark:"trail",encodeEntry:e=>({...vp(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...sf("x",e,{defaultPos:"mid"}),...sf("y",e,{defaultPos:"mid"}),...vl("size",e),...Tee(e)})};function jee(e,t){const{config:n}=e;return{...vp(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...sf("x",e,{defaultPos:"mid"}),...sf("y",e,{defaultPos:"mid"}),...vl("size",e),...vl("angle",e),...I$t(e,n,t)}}function I$t(e,t,n){return n?{shape:{value:n}}:vl("shape",e)}const P$t={vgMark:"symbol",encodeEntry:e=>jee(e)},N$t={vgMark:"symbol",encodeEntry:e=>jee(e,"circle")},D$t={vgMark:"symbol",encodeEntry:e=>jee(e,"square")},O$t={vgMark:"rect",encodeEntry:e=>({...vp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...T1(e,"x"),...T1(e,"y")})},M$t={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...vp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...kO("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...kO("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...vl("size",e,{vgChannel:"strokeWidth"})}}},L$t={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...vp(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...sf("x",e,{defaultPos:"mid"}),...sf("y",e,{defaultPos:"mid"}),...Eee(e),...vl("size",e,{vgChannel:"fontSize"}),...vl("angle",e),...Ohe("align",F$t(e.markDef,n,t)),...Ohe("baseline",$$t(e.markDef,n,t)),...sf("radius",e,{defaultPos:null}),...sf("theta",e,{defaultPos:null})}}};function F$t(e,t,n){if(ps("align",e,n)===void 0)return"center"}function $$t(e,t,n){if(ps("baseline",e,n)===void 0)return"middle"}const B$t={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...vp(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...T1(e,i),...sf(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:Qs(ps("thickness",n,t))}}},T5={arc:E$t,area:S$t,bar:T$t,circle:N$t,geoshape:C$t,image:A$t,line:k$t,point:P$t,rect:O$t,rule:M$t,square:D$t,text:L$t,tick:B$t,trail:R$t};function j$t(e){if(Gr([HL,zL,WOt],e.mark)){const t=TIe(e.mark,e.encoding);if(t.length>0)return U$t(e,t)}else if(e.mark===VL){const t=PH.some(n=>ps(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return z$t(e)}return Uee(e)}const epe="faceted_path_";function U$t(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:epe+e.requestDataName(So.Main),data:e.requestDataName(So.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Uee(e,{fromPrefix:epe})}]}const tpe="stack_group_";function z$t(e){var l;const[t]=Uee(e,{fromPrefix:tpe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...JS(t.encode.update,["y","yc","y2","height",...PH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...nd(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...JS(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...nd(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of PH){const f=mg(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Qs(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=tn(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(tn(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=mg(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Qs(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(So.Main),name:tpe+e.requestDataName(So.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function V$t(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!xt(o)&&D0(o)&&RH(o.value)||!o&&RH(ps("order",i,s)))){if((xt(o)||Kt(o))&&!n)return xRe(o,{expr:"datum"});if(hx(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(Kt(u))return{field:a}}}}function Uee(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=xa(r.clip,H$t(e),q$t(e)),a=vRe(r),u=i.key,l=V$t(e),c=W$t(e),f=ps("aria",r,s),d=T5[n].postEncodingTransform?T5[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:T5[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(So.Main)},encode:{update:T5[n].encodeEntry(e)},...d?{transform:d}:{}}]}function H$t(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function q$t(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function W$t(e){if(!e.component.selection)return null;const t=$t(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=$t(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class y5e extends d5e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,hhe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=l=>{var c,f,d;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data),"time"in this.encoding&&(l.from.data=l.from.data+o6e)),(d=(f=l.from)==null?void 0:f.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l};const o=gg(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=RMt(o,s,{graticule:t.data&&_ee(t.data)}));const u=this.encoding=D9t(t.encoding||{},a,o.filled,s);this.markDef=WIe(o,u,s),this.size=w$t({encoding:u,size:hhe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=qIe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>gee(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===QRe,r=t&&T8t.some(i=>gr(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return NZ.reduce((r,i)=>{const s=hu(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=pl(t);return xt(n)&&(i.domain=n.map(qd)),xt(r)&&(i.range=r.map(qd)),i}initAxes(t){return U1.reduce((n,r)=>{const i=t[r];if(gr(i)||r===po&&gr(t.x2)||r===Wu&&gr(t.y2)){const s=gr(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=$t(t),r={};for(const i of n){const s=t[i];r[i]=NI(s)?yRe(s):qd(s)}return r}initLegends(t){return L8t.reduce((n,r)=>{const i=hu(t[r]);if(i&&$8t(r)){const s=i.legend;n[r]=s&&pl(s)}return n},{})}parseData(){this.component.data=v7(this)}parseLayoutSize(){s$t(this)}parseSelections(){this.component.selection=KLt(this,this.selection)}parseMarkGroup(){this.component.mark=j$t(this)}parseAxesAndHeaders(){this.component.axes=p$t(this)}assembleSelectionTopLevelSignals(t){return wLt(this,t)}assembleSignals(){return[...N6e(this),...xLt(this,[])]}assembleSelectionData(t){return ELt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Ree(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!bC(this.parent))&&(t=c6e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return z_(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return O0(n)}typedFieldDef(t){const n=this.fieldDef(t);return ff(n)?n:null}}class zee extends Fee{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(e7(a))return new zee(a,this,this.getName(`layer_${u}`),o,s);if(z1(a))return new y5e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(OZ(a))})}parseData(){this.component.data=v7(this);for(const t of this.children)t.parseData()}parseLayoutSize(){r$t(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of $t(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Zm(t))&&FZ(LZ)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){g$t(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),N6e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Ree(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ln(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return SLt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),K6e(this))}}function Vee(e,t,n,r,i){if(GL(e))return new Vk(e,t,n,i);if(e7(e))return new zee(e,t,n,r,i);if(z1(e))return new y5e(e,t,n,r,i);if(rMt(e))return new c$t(e,t,n,i);throw new Error(OZ(e))}function G$t(e,t={}){t.logger&&oOt(t.logger),t.fieldTitle&&mIe(t.fieldTitle);try{const n=HIe(tC(t.config,e.config)),r=ZIe(e,n),i=Vee(r,null,"",void 0,n);return i.parse(),yFt(i.component.data,i),{spec:K$t(i,Y$t(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&aOt(),t.fieldTitle&&S9t()}}function Y$t(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):cn(t)&&(t={type:t}),i&&s&&cLt(t.type)){if(i==="step"&&s==="step")qt(Qde()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";qt(Qde(LL(o)));const a=o==="width"?"height":"width";t.type=fLt(a)}}return{...$t(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...The(n,!1),...The(e,!0)}}function K$t(e,t,n={},r){const i=e.config?yMt(e.config):void 0,s=ZFt(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),u=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...u?{title:u}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...jIe(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const X$t=b8t.version,Q$t=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:eT,accessPathWithDatum:SZ,accessWithDatumToUnescapedPath:ss,compile:G$t,contains:Gr,deepEqual:Qd,deleteNestedProperty:vO,duplicate:ur,entries:Nb,every:_Z,fieldIntersection:EZ,flatAccessWithDatum:J4e,getFirstDefined:xa,hasIntersection:wZ,hasProperty:zt,hash:ii,internalField:tRe,isBoolean:X4,isEmpty:ms,isEqual:_8t,isInternalField:nRe,isNullOrFalse:RH,isNumeric:IL,keys:$t,logicalExpr:Uk,mergeDeep:X4e,never:K4e,normalize:ZIe,normalizeAngle:Q4,omit:nd,pick:JS,prefixGenerator:IH,removePathFromField:dC,replaceAll:hw,replacePathInField:op,resetIdCounter:E8t,setEqual:Q4e,some:ZS,stringify:gs,titleCase:_I,unique:Bm,uniqueId:eRe,vals:Tl,varName:fo,version:X$t},Symbol.toStringTag,{value:"Module"}));function v5e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var J$t="vega-themes",Z$t="2.15.0",eBt="Themes for stylized Vega and Vega-Lite visualizations.",tBt=["vega","vega-lite","themes","style"],nBt="BSD-3-Clause",rBt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},iBt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],sBt="build/vega-themes.js",Hee="build/vega-themes.module.js",oBt="build/vega-themes.min.js",aBt="build/vega-themes.min.js",uBt="build/vega-themes.module.d.ts",lBt={type:"git",url:"https://github.com/vega/vega-themes.git"},cBt=["src","build"],fBt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},dBt={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},hBt={vega:"*","vega-lite":"*"},pBt={},mBt={name:J$t,version:Z$t,description:eBt,keywords:tBt,license:nBt,author:rBt,contributors:iBt,main:sBt,module:Hee,unpkg:oBt,jsdelivr:aBt,types:uBt,repository:lBt,files:cBt,scripts:fBt,devDependencies:dBt,peerDependencies:hBt,dependencies:pBt};const cE="#fff",npe="#888",gBt={background:"#333",view:{stroke:npe},title:{color:cE,subtitleColor:cE},style:{"guide-label":{fill:cE},"guide-title":{fill:cE}},axis:{domainColor:cE,gridColor:npe,tickColor:cE}},Wx="#4572a7",yBt={background:"#fff",arc:{fill:Wx},area:{fill:Wx},line:{stroke:Wx,strokeWidth:2},path:{stroke:Wx},rect:{fill:Wx},shape:{stroke:Wx},symbol:{fill:Wx,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Gx="#30a2da",Ej="#cbcbcb",vBt="#999",bBt="#333",rpe="#f0f0f0",ipe="#333",xBt={arc:{fill:Gx},area:{fill:Gx},axis:{domainColor:Ej,grid:!0,gridColor:Ej,gridWidth:1,labelColor:vBt,labelFontSize:10,titleColor:bBt,tickColor:Ej,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:rpe,group:{fill:rpe},legend:{labelColor:ipe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:ipe,titleFontSize:14,titlePadding:10},line:{stroke:Gx,strokeWidth:2},path:{stroke:Gx,strokeWidth:.5},rect:{fill:Gx},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Gx},bar:{binSpacing:2,fill:Gx,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Yx="#000",_Bt={group:{fill:"#e5e5e5"},arc:{fill:Yx},area:{fill:Yx},line:{stroke:Yx},path:{stroke:Yx},rect:{fill:Yx},shape:{stroke:Yx},symbol:{fill:Yx,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},wBt=22,EBt="normal",spe="Benton Gothic, sans-serif",ope=11.5,SBt="normal",Kx="#82c6df",Sj="Benton Gothic Bold, sans-serif",ape="normal",upe=13,m3={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},TBt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Sj,fontSize:wBt,fontWeight:EBt},arc:{fill:Kx},area:{fill:Kx},line:{stroke:Kx,strokeWidth:2},path:{stroke:Kx},rect:{fill:Kx},shape:{stroke:Kx},symbol:{fill:Kx,size:30},axis:{labelFont:spe,labelFontSize:ope,labelFontWeight:SBt,titleFont:Sj,titleFontSize:upe,titleFontWeight:ape},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:spe,labelFontSize:ope,symbolType:"square",titleFont:Sj,titleFontSize:upe,titleFontWeight:ape},range:{category:m3["category-6"],diverging:m3["fireandice-6"],heatmap:m3["fire-7"],ordinal:m3["fire-7"],ramp:m3["fire-7"]}},Xx="#ab5787",C5="#979797",CBt={background:"#f9f9f9",arc:{fill:Xx},area:{fill:Xx},line:{stroke:Xx},path:{stroke:Xx},rect:{fill:Xx},shape:{stroke:Xx},symbol:{fill:Xx,size:30},axis:{domainColor:C5,domainWidth:.5,gridWidth:.2,labelColor:C5,tickColor:C5,tickWidth:.2,titleColor:C5},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Qx="#3e5c69",ABt={background:"#fff",arc:{fill:Qx},area:{fill:Qx},line:{stroke:Qx},path:{stroke:Qx},rect:{fill:Qx},shape:{stroke:Qx},symbol:{fill:Qx},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},zh="#1696d2",lpe="#000000",kBt="#FFFFFF",A5="Lato",Tj="Lato",RBt="Lato",IBt="#DEDDDD",PBt=18,g3={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},NBt={background:kBt,title:{anchor:"start",fontSize:PBt,font:A5},axisX:{domain:!0,domainColor:lpe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Tj,labelAngle:0,tickColor:lpe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:A5},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:IBt,gridWidth:1,labelFontSize:12,labelFont:Tj,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:A5,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Tj,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:A5,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:g3["six-groups-cat-1"],diverging:g3["diverging-colors"],heatmap:g3["diverging-colors"],ordinal:g3["six-groups-seq"],ramp:g3["shades-blue"]},area:{fill:zh},rect:{fill:zh},line:{color:zh,stroke:zh,strokeWidth:5},trail:{color:zh,stroke:zh,strokeWidth:0,size:1},path:{stroke:zh,strokeWidth:.5},point:{filled:!0},text:{font:RBt,color:zh,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:zh,stroke:null}},arc:{fill:zh},shape:{stroke:zh},symbol:{fill:zh,size:30}},Jx="#3366CC",cpe="#ccc",k5="Arial, sans-serif",DBt={arc:{fill:Jx},area:{fill:Jx},path:{stroke:Jx},rect:{fill:Jx},shape:{stroke:Jx},symbol:{stroke:Jx},circle:{fill:Jx},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:k5,fontSize:12},"guide-title":{font:k5,fontSize:12},"group-title":{font:k5,fontSize:12}},title:{font:k5,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:cpe,tickColor:cpe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},qee=e=>e*(1/3+1),fpe=qee(9),dpe=qee(10),hpe=qee(12),y3="Segoe UI",ppe="wf_standard-font, helvetica, arial, sans-serif",mpe="#252423",v3="#605E5C",gpe="transparent",OBt="#C8C6C4",e0="#118DFF",MBt="#12239E",LBt="#E66C37",FBt="#6B007B",$Bt="#E044A7",BBt="#744EC2",jBt="#D9B300",UBt="#D64550",b5e=e0,x5e="#DEEFFF",ype=[x5e,b5e],zBt=[x5e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",b5e],VBt={view:{stroke:gpe},background:gpe,font:y3,header:{titleFont:ppe,titleFontSize:hpe,titleColor:mpe,labelFont:y3,labelFontSize:dpe,labelColor:v3},axis:{ticks:!1,grid:!1,domain:!1,labelColor:v3,labelFontSize:fpe,titleFont:ppe,titleColor:mpe,titleFontSize:hpe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:OBt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:e0},line:{stroke:e0,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:y3,fontSize:fpe,fill:v3},arc:{fill:e0},area:{fill:e0,line:!0,opacity:.6},path:{stroke:e0},rect:{fill:e0},point:{fill:e0,filled:!0,size:75},shape:{stroke:e0},symbol:{fill:e0,strokeWidth:1.5,size:50},legend:{titleFont:y3,titleFontWeight:"bold",titleColor:v3,labelFont:y3,labelFontSize:dpe,labelColor:v3,symbolType:"circle",symbolSize:75},range:{category:[e0,MBt,LBt,FBt,$Bt,BBt,jBt,UBt],diverging:ype,heatmap:ype,ordinal:zBt}},Cj='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',HBt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',Aj=400,R5={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},qBt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],WBt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function b7({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=R5.gridBg[e],i=R5.textPrimary[e],s=R5.textSecondary[e],o=n==="dark"?qBt:WBt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:Cj,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:HBt,labelFontWeight:Aj,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:R5.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:Cj,fill:s,fontWeight:Aj},"guide-title":{font:Cj,fill:s,fontWeight:Aj}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const GBt=b7({theme:"white",background:"#ffffff"}),YBt=b7({theme:"g10",background:"#f4f4f4"}),KBt=b7({theme:"g90",background:"#262626"}),XBt=b7({theme:"g100",background:"#161616"}),QBt=mBt.version,JBt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:YBt,carbong100:XBt,carbong90:KBt,carbonwhite:GBt,dark:gBt,excel:yBt,fivethirtyeight:xBt,ggplot2:_Bt,googlecharts:DBt,latimes:TBt,powerbi:VBt,quartz:CBt,urbaninstitute:NBt,version:QBt,vox:ABt},Symbol.toStringTag,{value:"Module"}));function ZBt(e,t,n,r){if(xt(e))return`[${e.map(i=>t(cn(i)?i:vpe(i,n))).join(", ")}]`;if(un(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(un(c)&&(c=vpe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function ejt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function vpe(e,t){return JSON.stringify(e,ejt(t))}var tjt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const _5e="vg-tooltip-element",njt={offsetX:10,offsetY:10,id:_5e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:rjt,maxDepth:2,formatTooltip:ZBt,baseURL:""};function rjt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function ijt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return tjt.toString().replace(_5e,e)}function sjt(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class ojt{constructor(t){this.options={...njt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=ijt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=sjt(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var kj={};function ajt(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rj,bpe;function ujt(){return bpe||(bpe=1,Rj=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Rj}var ljt=Pi;Pi.Node=Ew;Pi.create=Pi;function Pi(e){var t=this;if(t instanceof Pi||(t=new Pi),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Pi.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Pi.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Pi.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Pi.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)fjt(this,arguments[e]);return this.length};Pi.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)djt(this,arguments[e]);return this.length};Pi.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Pi.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Pi.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Pi.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Pi.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Pi.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Pi.prototype.map=function(e,t){t=t||this;for(var n=new Pi,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Pi.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Pi,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Pi.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Pi.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Pi.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Pi.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Pi.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Pi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Pi.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Pi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Pi.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=cjt(this,i,n[r]);return s};Pi.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function cjt(e,t,n){var r=t===e.head?new Ew(n,null,t,e):new Ew(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function fjt(e,t){e.tail=new Ew(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function djt(e,t){e.head=new Ew(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Ew(e,t,n,r){if(!(this instanceof Ew))return new Ew(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{ujt()(Pi)}catch{}const hjt=ljt,x_=Symbol("max"),Ny=Symbol("length"),fE=Symbol("lengthCalculator"),Hk=Symbol("allowStale"),I_=Symbol("maxAge"),Ry=Symbol("dispose"),xpe=Symbol("noDisposeOnSet"),Iu=Symbol("lruList"),t0=Symbol("cache"),w5e=Symbol("updateAgeOnGet"),Ij=()=>1;class pjt{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[x_]=t.max||1/0;const n=t.length||Ij;if(this[fE]=typeof n!="function"?Ij:n,this[Hk]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[I_]=t.maxAge||0,this[Ry]=t.dispose,this[xpe]=t.noDisposeOnSet||!1,this[w5e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[x_]=t||1/0,b3(this)}get max(){return this[x_]}set allowStale(t){this[Hk]=!!t}get allowStale(){return this[Hk]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[I_]=t,b3(this)}get maxAge(){return this[I_]}set lengthCalculator(t){typeof t!="function"&&(t=Ij),t!==this[fE]&&(this[fE]=t,this[Ny]=0,this[Iu].forEach(n=>{n.length=this[fE](n.value,n.key),this[Ny]+=n.length})),b3(this)}get lengthCalculator(){return this[fE]}get length(){return this[Ny]}get itemCount(){return this[Iu].length}rforEach(t,n){n=n||this;for(let r=this[Iu].tail;r!==null;){const i=r.prev;_pe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Iu].head;r!==null;){const i=r.next;_pe(this,t,r,n),r=i}}keys(){return this[Iu].toArray().map(t=>t.key)}values(){return this[Iu].toArray().map(t=>t.value)}reset(){this[Ry]&&this[Iu]&&this[Iu].length&&this[Iu].forEach(t=>this[Ry](t.key,t.value)),this[t0]=new Map,this[Iu]=new hjt,this[Ny]=0}dump(){return this[Iu].map(t=>NO(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Iu]}set(t,n,r){if(r=r||this[I_],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[fE](n,t);if(this[t0].has(t)){if(s>this[x_])return fS(this,this[t0].get(t)),!1;const u=this[t0].get(t).value;return this[Ry]&&(this[xpe]||this[Ry](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Ny]+=s-u.length,u.length=s,this.get(t),b3(this),!0}const o=new mjt(t,n,s,i,r);return o.length>this[x_]?(this[Ry]&&this[Ry](t,n),!1):(this[Ny]+=o.length,this[Iu].unshift(o),this[t0].set(t,this[Iu].head),b3(this),!0)}has(t){if(!this[t0].has(t))return!1;const n=this[t0].get(t).value;return!NO(this,n)}get(t){return Pj(this,t,!0)}peek(t){return Pj(this,t,!1)}pop(){const t=this[Iu].tail;return t?(fS(this,t),t.value):null}del(t){fS(this,this[t0].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[t0].forEach((t,n)=>Pj(this,n,!1))}}const Pj=(e,t,n)=>{const r=e[t0].get(t);if(r){const i=r.value;if(NO(e,i)){if(fS(e,r),!e[Hk])return}else n&&(e[w5e]&&(r.value.now=Date.now()),e[Iu].unshiftNode(r));return i.value}},NO=(e,t)=>{if(!t||!t.maxAge&&!e[I_])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[I_]&&n>e[I_]},b3=e=>{if(e[Ny]>e[x_])for(let t=e[Iu].tail;e[Ny]>e[x_]&&t!==null;){const n=t.prev;fS(e,t),t=n}},fS=(e,t)=>{if(t){const n=t.value;e[Ry]&&e[Ry](n.key,n.value),e[Ny]-=n.length,e[t0].delete(n.key),e[Iu].removeNode(t)}};class mjt{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const _pe=(e,t,n,r)=>{let i=n.value;NO(e,i)&&(fS(e,n),e[Hk]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var gjt=pjt;const yjt=Object.freeze({loose:!0}),vjt=Object.freeze({}),bjt=e=>e?typeof e!="object"?yjt:e:vjt;var Wee=bjt,rq={exports:{}};const xjt="2.0.0",E5e=256,_jt=Number.MAX_SAFE_INTEGER||9007199254740991,wjt=16,Ejt=E5e-6,Sjt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Gee={MAX_LENGTH:E5e,MAX_SAFE_COMPONENT_LENGTH:wjt,MAX_SAFE_BUILD_LENGTH:Ejt,MAX_SAFE_INTEGER:_jt,RELEASE_TYPES:Sjt,SEMVER_SPEC_VERSION:xjt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Tjt=typeof process=="object"&&kj&&kj.NODE_DEBUG&&/\bsemver\b/i.test(kj.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var x7=Tjt;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Gee,s=x7;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,b]of d)m=m.split(`${g}*`).join(`${g}{0,${b}}`).split(`${g}+`).join(`${g}{1,${b}}`);return m},p=(m,g,b)=>{const y=h(g),x=c++;s(m,x,g),l[m]=x,u[x]=g,o[x]=new RegExp(g,b?"g":void 0),a[x]=new RegExp(y,b?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(rq,rq.exports);var Yee=rq.exports;const wpe=/^[0-9]+$/,S5e=(e,t)=>{const n=wpe.test(e),r=wpe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Cjt=(e,t)=>S5e(t,e);var Ajt={compareIdentifiers:S5e,rcompareIdentifiers:Cjt};const I5=x7,{MAX_LENGTH:Epe,MAX_SAFE_INTEGER:P5}=Gee,{safeRe:Spe,t:Tpe}=Yee,kjt=Wee,{compareIdentifiers:dE}=Ajt;let Rjt=class _m{constructor(t,n){if(n=kjt(n),t instanceof _m){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Epe)throw new TypeError(`version is longer than ${Epe} characters`);I5("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Spe[Tpe.LOOSE]:Spe[Tpe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>P5||this.major<0)throw new TypeError("Invalid major version");if(this.minor>P5||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>P5||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<P5)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(I5("SemVer.compare",this.version,this.options,t),!(t instanceof _m)){if(typeof t=="string"&&t===this.version)return 0;t=new _m(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof _m||(t=new _m(t,this.options)),dE(this.major,t.major)||dE(this.minor,t.minor)||dE(this.patch,t.patch)}comparePre(t){if(t instanceof _m||(t=new _m(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(I5("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return dE(r,i)}while(++n)}compareBuild(t){t instanceof _m||(t=new _m(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(I5("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return dE(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),dE(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Kee=Rjt;const Cpe=Kee,Ijt=(e,t,n)=>new Cpe(e,n).compare(new Cpe(t,n));var xC=Ijt;const Pjt=xC,Njt=(e,t,n)=>Pjt(e,t,n)===0;var Djt=Njt;const Ojt=xC,Mjt=(e,t,n)=>Ojt(e,t,n)!==0;var Ljt=Mjt;const Fjt=xC,$jt=(e,t,n)=>Fjt(e,t,n)>0;var Bjt=$jt;const jjt=xC,Ujt=(e,t,n)=>jjt(e,t,n)>=0;var zjt=Ujt;const Vjt=xC,Hjt=(e,t,n)=>Vjt(e,t,n)<0;var qjt=Hjt;const Wjt=xC,Gjt=(e,t,n)=>Wjt(e,t,n)<=0;var Yjt=Gjt;const Kjt=Djt,Xjt=Ljt,Qjt=Bjt,Jjt=zjt,Zjt=qjt,eUt=Yjt,tUt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Kjt(e,n,r);case"!=":return Xjt(e,n,r);case">":return Qjt(e,n,r);case">=":return Jjt(e,n,r);case"<":return Zjt(e,n,r);case"<=":return eUt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var nUt=tUt,Nj,Ape;function rUt(){if(Ape)return Nj;Ape=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Nj=t;const n=Wee,{safeRe:r,t:i}=Yee,s=nUt,o=x7,a=Kee,u=T5e();return Nj}var Dj,kpe;function T5e(){if(kpe)return Dj;kpe=1;class e{constructor(j,z){if(z=r(z),j instanceof e)return j.loose===!!z.loose&&j.includePrerelease===!!z.includePrerelease?j:new e(j.raw,z);if(j instanceof i)return this.raw=j.value,this.set=[[j]],this.format(),this;if(this.options=z,this.loose=!!z.loose,this.includePrerelease=!!z.includePrerelease,this.raw=j.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(G=>this.parseRange(G.trim())).filter(G=>G.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const G=this.set[0];if(this.set=this.set.filter(ee=>!p(ee[0])),this.set.length===0)this.set=[G];else if(this.set.length>1){for(const ee of this.set)if(ee.length===1&&m(ee[0])){this.set=[ee];break}}}this.format()}format(){return this.range=this.set.map(j=>j.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(j){const G=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+j,ee=n.get(G);if(ee)return ee;const ne=this.options.loose,ue=ne?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];j=j.replace(ue,L(this.options.includePrerelease)),s("hyphen replace",j),j=j.replace(a[u.COMPARATORTRIM],l),s("comparator trim",j),j=j.replace(a[u.TILDETRIM],c),s("tilde trim",j),j=j.replace(a[u.CARETTRIM],f),s("caret trim",j);let X=j.split(" ").map(J=>b(J,this.options)).join(" ").split(/\s+/).map(J=>M(J,this.options));ne&&(X=X.filter(J=>(s("loose invalid filter",J,this.options),!!J.match(a[u.COMPARATORLOOSE])))),s("range list",X);const W=new Map,te=X.map(J=>new i(J,this.options));for(const J of te){if(p(J))return[J];W.set(J.value,J)}W.size>1&&W.has("")&&W.delete("");const q=[...W.values()];return n.set(G,q),q}intersects(j,z){if(!(j instanceof e))throw new TypeError("a Range is required");return this.set.some(G=>g(G,z)&&j.set.some(ee=>g(ee,z)&&G.every(ne=>ee.every(ue=>ne.intersects(ue,z)))))}test(j){if(!j)return!1;if(typeof j=="string")try{j=new o(j,this.options)}catch{return!1}for(let z=0;z<this.set.length;z++)if(V(this.set[z],j,this.options))return!0;return!1}}Dj=e;const t=gjt,n=new t({max:1e3}),r=Wee,i=rUt(),s=x7,o=Kee,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Yee,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Gee,p=D=>D.value==="<0.0.0-0",m=D=>D.value==="",g=(D,j)=>{let z=!0;const G=D.slice();let ee=G.pop();for(;z&&G.length;)z=G.every(ne=>ee.intersects(ne,j)),ee=G.pop();return z},b=(D,j)=>(s("comp",D,j),D=S(D,j),s("caret",D),D=x(D,j),s("tildes",D),D=R(D,j),s("xrange",D),D=O(D,j),s("stars",D),D),y=D=>!D||D.toLowerCase()==="x"||D==="*",x=(D,j)=>D.trim().split(/\s+/).map(z=>w(z,j)).join(" "),w=(D,j)=>{const z=j.loose?a[u.TILDELOOSE]:a[u.TILDE];return D.replace(z,(G,ee,ne,ue,X)=>{s("tilde",D,G,ee,ne,ue,X);let W;return y(ee)?W="":y(ne)?W=`>=${ee}.0.0 <${+ee+1}.0.0-0`:y(ue)?W=`>=${ee}.${ne}.0 <${ee}.${+ne+1}.0-0`:X?(s("replaceTilde pr",X),W=`>=${ee}.${ne}.${ue}-${X} <${ee}.${+ne+1}.0-0`):W=`>=${ee}.${ne}.${ue} <${ee}.${+ne+1}.0-0`,s("tilde return",W),W})},S=(D,j)=>D.trim().split(/\s+/).map(z=>C(z,j)).join(" "),C=(D,j)=>{s("caret",D,j);const z=j.loose?a[u.CARETLOOSE]:a[u.CARET],G=j.includePrerelease?"-0":"";return D.replace(z,(ee,ne,ue,X,W)=>{s("caret",D,ee,ne,ue,X,W);let te;return y(ne)?te="":y(ue)?te=`>=${ne}.0.0${G} <${+ne+1}.0.0-0`:y(X)?ne==="0"?te=`>=${ne}.${ue}.0${G} <${ne}.${+ue+1}.0-0`:te=`>=${ne}.${ue}.0${G} <${+ne+1}.0.0-0`:W?(s("replaceCaret pr",W),ne==="0"?ue==="0"?te=`>=${ne}.${ue}.${X}-${W} <${ne}.${ue}.${+X+1}-0`:te=`>=${ne}.${ue}.${X}-${W} <${ne}.${+ue+1}.0-0`:te=`>=${ne}.${ue}.${X}-${W} <${+ne+1}.0.0-0`):(s("no pr"),ne==="0"?ue==="0"?te=`>=${ne}.${ue}.${X}${G} <${ne}.${ue}.${+X+1}-0`:te=`>=${ne}.${ue}.${X}${G} <${ne}.${+ue+1}.0-0`:te=`>=${ne}.${ue}.${X} <${+ne+1}.0.0-0`),s("caret return",te),te})},R=(D,j)=>(s("replaceXRanges",D,j),D.split(/\s+/).map(z=>I(z,j)).join(" ")),I=(D,j)=>{D=D.trim();const z=j.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return D.replace(z,(G,ee,ne,ue,X,W)=>{s("xRange",D,G,ee,ne,ue,X,W);const te=y(ne),q=te||y(ue),J=q||y(X),oe=J;return ee==="="&&oe&&(ee=""),W=j.includePrerelease?"-0":"",te?ee===">"||ee==="<"?G="<0.0.0-0":G="*":ee&&oe?(q&&(ue=0),X=0,ee===">"?(ee=">=",q?(ne=+ne+1,ue=0,X=0):(ue=+ue+1,X=0)):ee==="<="&&(ee="<",q?ne=+ne+1:ue=+ue+1),ee==="<"&&(W="-0"),G=`${ee+ne}.${ue}.${X}${W}`):q?G=`>=${ne}.0.0${W} <${+ne+1}.0.0-0`:J&&(G=`>=${ne}.${ue}.0${W} <${ne}.${+ue+1}.0-0`),s("xRange return",G),G})},O=(D,j)=>(s("replaceStars",D,j),D.trim().replace(a[u.STAR],"")),M=(D,j)=>(s("replaceGTE0",D,j),D.trim().replace(a[j.includePrerelease?u.GTE0PRE:u.GTE0],"")),L=D=>(j,z,G,ee,ne,ue,X,W,te,q,J,oe,de)=>(y(G)?z="":y(ee)?z=`>=${G}.0.0${D?"-0":""}`:y(ne)?z=`>=${G}.${ee}.0${D?"-0":""}`:ue?z=`>=${z}`:z=`>=${z}${D?"-0":""}`,y(te)?W="":y(q)?W=`<${+te+1}.0.0-0`:y(J)?W=`<${te}.${+q+1}.0-0`:oe?W=`<=${te}.${q}.${J}-${oe}`:D?W=`<${te}.${q}.${+J+1}-0`:W=`<=${W}`,`${z} ${W}`.trim()),V=(D,j,z)=>{for(let G=0;G<D.length;G++)if(!D[G].test(j))return!1;if(j.prerelease.length&&!z.includePrerelease){for(let G=0;G<D.length;G++)if(s(D[G].semver),D[G].semver!==i.ANY&&D[G].semver.prerelease.length>0){const ee=D[G].semver;if(ee.major===j.major&&ee.minor===j.minor&&ee.patch===j.patch)return!0}return!1}return!0};return Dj}const iUt=T5e(),sUt=(e,t,n)=>{try{t=new iUt(t,n)}catch{return!1}return t.test(e)};var oUt=sUt,C5e=ajt(oUt);function aUt(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var uUt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function A5e(e,...t){for(const n of t)lUt(e,n);return e}function lUt(e,t){for(const n of Object.keys(t))nC(e,n,t[n],!0)}const n0=BNt;let nR=Q$t;const N5=typeof window<"u"?window:void 0;var fme;nR===void 0&&((fme=N5==null?void 0:N5.vl)!=null&&fme.compile)&&(nR=N5.vl);const cUt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},fUt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},lk={vega:"Vega","vega-lite":"Vega-Lite"},DO={vega:n0.version,"vega-lite":nR?nR.version:"not available"},dUt={vega:e=>e,"vega-lite":(e,t)=>nR.compile(e,{config:t}).spec},hUt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,pUt="chart-wrapper";function mUt(e){return typeof e=="function"}function Rpe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${lk[r]} JSON Source`}function gUt(e,t){if(e.$schema){const n=v5e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${lk[n.library]}, but mode argument sets ${lk[t]??t}.`);const r=n.library;return C5e(DO[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${lk[r]} ${n.version}, but the current version of ${lk[r]} is v${DO[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function k5e(e){return!!(e&&"load"in e)}function Ipe(e){return k5e(e)?e:n0.loader(e)}function yUt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return cn(t.defaultStyle)&&(t.defaultStyle=!1),t}async function vUt(e,t,n={}){let r,i;cn(t)?(i=Ipe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=yUt(r),o=s.loader;(!i||o)&&(i=Ipe(n.loader??o));const a=await Ppe(s,i),u=await Ppe(n,i),l={...A5e(u,a),config:tC(u.config??{},a.config??{})};return await xUt(e,r,l,i)}async function Ppe(e,t){const n=cn(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=cn(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function bUt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function xUt(e,t,n={},r){const i=n.theme?tC(JBt[n.theme],n.config??{}):n.config,s=rx(n.actions)?n.actions:A5e({},cUt,n.actions??{}),o={...fUt,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??n0.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const S="vega-embed-style",{root:C,rootContainer:R}=bUt(c);if(!C.getElementById(S)){const I=document.createElement("style");I.id=S,I.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?uUt.toString():n.defaultStyle,R.appendChild(I)}}const f=gUt(t,n.mode);let d=dUt[f](t,i);if(f==="vega-lite"&&d.$schema){const S=v5e(d.$schema);C5e(DO.vega,`^${S.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${S.version}, but current version is v${DO.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const S=document.createElement("div");S.classList.add(pUt),c.appendChild(S),h=S}const p=n.patch;if(p&&(d=p instanceof Function?p(d):MM(d,p,!0,!1).newDocument),n.formatLocale&&n0.formatLocale(n.formatLocale),n.timeFormatLocale&&n0.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const S in n.expressionFunctions){const C=n.expressionFunctions[S];"fn"in C?n0.expressionFunction(S,C.fn,C.visitor):C instanceof Function&&n0.expressionFunction(S,C)}const{ast:m}=n,g=n0.parse(d,f==="vega-lite"?{}:i,{ast:m}),b=new(n.viewClass||n0.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:n0.expressionInterpreter??n.expr??KNt}:{}});if(b.addSignalListener("autosize",(S,C)=>{const{type:R}=C;R=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):R=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):R=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:S,tooltip:C}=n,R=S&&!k5e(S)?S==null?void 0:S.baseURL:void 0,I=mUt(C)?C:new ojt({baseURL:R,...C===!0?{}:C}).call;b.tooltip(I)}let{hover:y}=n;if(y===void 0&&(y=f==="vega"),y){const{hoverSet:S,updateSet:C}=typeof y=="boolean"?{}:y;b.hover(S,C)}n&&(n.width!=null&&b.width(n.width),n.height!=null&&b.height(n.height),n.padding!=null&&b.padding(n.padding)),await b.initialize(h,n.bind).runAsync();let x;if(s!==!1){let S=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const R=document.createElement("details");R.title=o.CLICK_TO_VIEW_ACTIONS,c.append(R),S=R;const I=document.createElement("summary");I.innerHTML=hUt,R.append(I),x=O=>{R.contains(O.target)||R.removeAttribute("open")},document.addEventListener("click",x)}const C=document.createElement("div");if(S.append(C),C.classList.add("vega-actions"),s===!0||s.export!==!1){for(const R of["svg","png"])if(s===!0||s.export===!0||s.export[R]){const I=o[`${R.toUpperCase()}_ACTION`],O=document.createElement("a"),M=un(n.scaleFactor)?n.scaleFactor[R]:n.scaleFactor;O.text=I,O.href="#",O.target="_blank",O.download=`${l}.${R}`,O.addEventListener("mousedown",async function(L){L.preventDefault();const V=await b.toImageURL(R,M);this.href=V}),C.append(O)}}if(s===!0||s.source!==!1){const R=document.createElement("a");R.text=o.SOURCE_ACTION,R.href="#",R.addEventListener("click",function(I){Rpe(IB(t),n.sourceHeader??"",n.sourceFooter??"",f),I.preventDefault()}),C.append(R)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const R=document.createElement("a");R.text=o.COMPILED_ACTION,R.href="#",R.addEventListener("click",function(I){Rpe(IB(d),n.sourceHeader??"",n.sourceFooter??"","vega"),I.preventDefault()}),C.append(R)}if(s===!0||s.editor!==!1){const R=n.editorUrl??"https://vega.github.io/editor/",I=document.createElement("a");I.text=o.EDITOR_ACTION,I.href="#",I.addEventListener("click",function(O){aUt(window,R,{config:i,mode:f,renderer:a,spec:IB(t)}),O.preventDefault()}),C.append(I)}}function w(){x&&document.removeEventListener("click",x),b.finalize()}return{view:b,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function _Ut(e){return!!e&&{}.toString.call(e)==="[object Function]"}function wUt(e,t,n){n&&(_Ut(n)?n(e.data(t)):e.change(t,n0.changeset().remove(()=>!0).insert(n)))}function EUt(e,t){Object.keys(t).forEach(n=>{wUt(e,n,t[n])})}function R5e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const I5e=()=>{};function Oj(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function SUt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=R5e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!O3(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Npe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Mj(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function ck(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class P5e extends sr.PureComponent{constructor(){super(...arguments),ck(this,"containerRef",sr.createRef()),ck(this,"resultPromise",void 0),ck(this,"handleError",t=>{const{onError:n=I5e}=this.props;n(t,this.containerRef.current),console.warn(t)}),ck(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=R5e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=SUt(Mj(this.props),Mj(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!TV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Npe(a,s),i&&Oj(a,i)),a.run()})}else TV(i,s)||this.modifyView(o=>{s&&Npe(o,s),i&&Oj(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=Mj(this.props);this.resultPromise=vUt(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;Oj(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return sr.createElement("div",{ref:this.containerRef,className:t,style:n})}}ck(P5e,"propTypes",{className:Hne.string,onError:Hne.func});function iq(){return iq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iq.apply(this,arguments)}function sq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const TUt={};class Xee extends sr.PureComponent{constructor(){super(...arguments),sq(this,"vegaEmbed",sr.createRef()),sq(this,"handleNewView",t=>{this.update();const{onNewView:n=I5e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){TV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{EUt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return sr.createElement(P5e,iq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}sq(Xee,"defaultProps",{data:TUt});function oq(){return oq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oq.apply(this,arguments)}function Dpe(e){return sr.createElement(Xee,oq({},e,{mode:"vega-lite"}))}function CUt({currentConfig:e,provState:t}){const n=mp(),r=B0(),i=bc(),[s,o]=B.useState(null),[a,u]=B.useState(!0),{updateResponseBlockValidation:l,setreactiveAnswers:c}=Al(),[f,d]=B.useState(),{actions:h,trrack:p}=B.useMemo(()=>{const x=O1.create(),w=x.register("signal",(C,R)=>(C.event=R,C)),S=Yw({registry:x,initialState:{event:{}}});return{actions:{signalAction:w},trrack:S}},[]),m=B.useCallback(({status:x,provenanceGraph:w,answers:S})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:x,values:S,provenanceGraph:w})),i(c(S))},[r,n,i,c,l]),g=B.useCallback((x,w)=>{p.apply(x,h.signalAction({key:x,value:w}))},[h,p]),b=B.useCallback((x,w)=>{const{responseId:S,response:C}=w;m({status:!0,provenanceGraph:p.graph.backend,answers:{[S]:C}})},[m,p.graph.backend]),y=B.useMemo(()=>{var w;const x=(w=s==null?void 0:s.config)==null?void 0:w.signals;return x?x.reduce((S,C)=>(C.name==="revisitAnswer"?S[C.name]=b:S[C.name]=g,S),{}):{}},[b,g,s]);return B.useEffect(()=>{async function x(){u(!0);let w;"path"in e?w=await glt(e.path):w=e.config,w!==void 0&&o(w),u(!1)}e&&x()},[e]),B.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?A.jsx("div",{children:"Loading..."}):"path"in e&&!s?A.jsx(vb,{path:e.path}):s?A.jsx(Xee,{spec:structuredClone(s),signalListeners:y,onNewView:x=>d(x)}):A.jsx("div",{children:"Failed to load vega config"})}function AUt(){const e=v1(),t=mp(),n=B0()||"Notfound",r=e.components[n],{storageEngine:i}=Ko(),s=B.useRef(null),[o,a]=B.useState(null),{setIsRecording:u}=Al(),l=Ai(O=>O.analysisProvState),c=WT(),f=YY(),d=Ai(O=>O.sequence),[h]=D1(),p=Ai(O=>O.participantId),m=B.useMemo(()=>h.get("participantId"),[h]);lTe();const g=bc(),{setAlertModal:b}=Al();B.useEffect(()=>{(i==null?void 0:i.getEngine())!=="firebase"&&g(b({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[b,i,g]),B.useEffect(()=>{!e||!e.uiConfig.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(O=>{var M;O.stop(),(M=s.current)==null||M.stream.removeTrack(O)}),s.current.stream.getAudioTracks().forEach(O=>{var M;O.stop(),(M=s.current)==null||M.stream.removeTrack(O)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(O=>{const M=new MediaRecorder(O);s.current=M,s.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[y,x]=B.useState([]),w=B.useRef([]);B.useEffect(()=>{async function O(){var V;const L=((V=zY(d,t))==null?void 0:V.map(D=>D.currentBlock.id).filter(D=>D!==void 0))||[];x(L)}async function M(){const L=w.current;JSON.stringify(L)!==JSON.stringify(y)&&y.length>0&&i&&await i.addParticipantTags(y),w.current=y}O().then(M)},[t,i,d]);const S=B.useMemo(()=>{var O;return n!=="end"&&!n.startsWith("__")&&ZT(r)&&e.baseComponents?GY({},(O=e.baseComponents)==null?void 0:O[r.baseComponent],r):r},[r,e]);if(n==="end")return A.jsx(A_t,{});if(n==="__trainingFailed")return A.jsx(k_t,{});if(n==="__timedOut")return A.jsx(R_t,{});if(n==="Notfound")return A.jsx(vb,{email:e.uiConfig.contactEmail});if(m&&p!==m)return A.jsx(l1,{style:{height:"80vh"},children:A.jsx(xg,{})});const C=S.instruction||"",{instructionLocation:R}=S,I=e.uiConfig.sidebar&&(R==="sidebar"||R===void 0);return A.jsxs(A.Fragment,{children:[R==="aboveStimulus"&&A.jsx(dc,{text:C}),A.jsx(z8,{status:f,config:S,location:"aboveStimulus"},`${t}-above-response-block`),A.jsxs(B.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:[S.type==="markdown"&&A.jsx(g_t,{currentConfig:S}),S.type==="website"&&A.jsx(mlt,{currentConfig:S}),S.type==="image"&&A.jsx(vlt,{currentConfig:S}),S.type==="react-component"&&A.jsx(m_t,{currentConfig:S,provState:l}),S.type==="vega"&&A.jsx(CUt,{currentConfig:S,provState:l})]},`${t}-stimulus`),(R==="belowStimulus"||R===void 0&&!I)&&A.jsx(dc,{text:C}),A.jsx(z8,{status:f,config:S,location:"belowStimulus"},`${t}-below-response-block`)]})}function N5e(e){const[t]=D1();return A.jsx(oG,{...e,to:{pathname:e.to,search:t.toString()}})}var Lj,Ope;function kUt(){if(Ope)return Lj;Ope=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,u=typeof va=="object"&&va&&va.Object===Object&&va,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),f=Object.prototype,d=f.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function g(S,C,R){var I,O,M,L,V,D,j=0,z=!1,G=!1,ee=!0;if(typeof S!="function")throw new TypeError(e);C=w(C)||0,b(R)&&(z=!!R.leading,G="maxWait"in R,M=G?h(w(R.maxWait)||0,C):M,ee="trailing"in R?!!R.trailing:ee);function ne(ce){var pe=I,Ee=O;return I=O=void 0,j=ce,L=S.apply(Ee,pe),L}function ue(ce){return j=ce,V=setTimeout(te,C),z?ne(ce):L}function X(ce){var pe=ce-D,Ee=ce-j,Ae=C-pe;return G?p(Ae,M-Ee):Ae}function W(ce){var pe=ce-D,Ee=ce-j;return D===void 0||pe>=C||pe<0||G&&Ee>=M}function te(){var ce=m();if(W(ce))return q(ce);V=setTimeout(te,X(ce))}function q(ce){return V=void 0,ee&&I?ne(ce):(I=O=void 0,L)}function J(){V!==void 0&&clearTimeout(V),j=0,I=D=O=V=void 0}function oe(){return V===void 0?L:q(m())}function de(){var ce=m(),pe=W(ce);if(I=arguments,O=this,D=ce,pe){if(V===void 0)return ue(D);if(G)return V=setTimeout(te,C),ne(D)}return V===void 0&&(V=setTimeout(te,C)),L}return de.cancel=J,de.flush=oe,de}function b(S){var C=typeof S;return!!S&&(C=="object"||C=="function")}function y(S){return!!S&&typeof S=="object"}function x(S){return typeof S=="symbol"||y(S)&&d.call(S)==n}function w(S){if(typeof S=="number")return S;if(x(S))return t;if(b(S)){var C=typeof S.valueOf=="function"?S.valueOf():S;S=b(C)?C+"":C}if(typeof S!="string")return S===0?S:+S;S=S.replace(r,"");var R=s.test(S);return R||o.test(S)?a(S.slice(2),R?2:8):i.test(S)?t:+S}return Lj=g,Lj}var RUt=kUt();const Sy=gc(RUt);function D5e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=D5e(o,t,n,r),r.includes(o.orderPath))break}return i}function O5e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=O5e(s,r)}}),n}function IUt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function PUt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Vw(),c=F0(),f=mp(),[d,{close:h,open:p}]=hq(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?D5e(n,e,r,a.orderPath):-1,{trialId:b}=ig(),[y]=D1(),x=B.useMemo(()=>y.get("participantId"),[y]),w=b===e,S=s?f===g:f===`reviewer-${e}`,C=u?w:S,R=B.useCallback(()=>c(b?`./../${e}`:`./${e}`),[c,e,b]),O=u?R:()=>c(s?x?`/${l}/${u0(g)}?participantId=${x}`:`/${l}/${u0(g)}`:`/${l}/reviewer-${e}`),M=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,L=e.includes("$")&&M&&e.includes(M)?e.split(M).at(-1):e;return A.jsxs(wl,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[A.jsx(wl.Target,{children:A.jsx(je,{onMouseEnter:p,onMouseLeave:h,children:A.jsx(l9,{active:C,style:{lineHeight:"32px",height:"32px"},label:A.jsxs(je,{children:[i&&A.jsx(qze,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==L&&A.jsx(sVe,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),A.jsx(At,{size:"sm",span:C,fw:C?"700":void 0,display:"inline",children:L})]}),onClick:O,disabled:t})})}),m&&(m.description||m.meta)&&A.jsx(wl.Dropdown,{onMouseLeave:h,children:A.jsxs(je,{children:[m.description&&A.jsxs(je,{children:[A.jsx(At,{fw:900,display:"inline-block",mr:2,children:"Description:"}),A.jsx(At,{fw:400,component:"span",children:m.description})]}),m.meta&&A.jsxs(je,{children:[A.jsx(At,{fw:"900",component:"span",children:"Task Meta: "}),A.jsx(At,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function OO({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=Jy(e.components);return n&&r&&(o=IUt(Jy(e.components),Jy(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),A.jsx(A.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return A.jsx(PUt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?k0(c).length-O5e(u,c):0,d=k0(u);return A.jsx(l9,{label:A.jsxs(je,{style:{opacity:f>0?1:.5},children:[A.jsx(At,{size:"sm",display:"inline",fw:700,children:u.id?u.id:u.order}),u.order==="random"||u.order==="latinSquare"?A.jsx(Ys,{label:u.order,position:"right",withArrow:!0,children:A.jsx(Vze,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&A.jsxs(v0,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&A.jsx(v0,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:A.jsx(je,{style:{borderLeft:"1px solid #e9ecef"},children:A.jsx(OO,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function M5e(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Mpe({text:e}){return A.jsx(Ys,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:A.jsx(fG,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function NUt(){const e=Ai(h=>h.sequence),t=Ai(h=>h.metadata),{toggleStudyBrowser:n}=Al(),r=v1(),i=bc(),s=Vw(),o=rG(`/${s}`),{storageEngine:a}=Ko(),u=WT(),l=B.useMemo(()=>{let h=Jy(r.sequence);return h=VY(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=B.useState("participant"),d=B.useMemo(()=>c==="allTrials"||u,[c,u]);return A.jsxs(hs.Aside,{p:"0",children:[A.jsx(hs.Section,{p:"md",children:A.jsxs(An,{direction:"row",justify:"space-between",children:[A.jsx(At,{size:"md",fw:700,pt:3,children:"Study Browser"}),A.jsx(Ys,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:A.jsx(In,{variant:"light",leftSection:A.jsx(dG,{size:14}),onClick:()=>M5e(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),A.jsx(Hb,{onClick:()=>i(n()),mt:1})]})}),A.jsx(hs.Section,{grow:!0,component:a1,p:"md",children:A.jsxs(ci,{value:c,onChange:f,children:[A.jsx(je,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:A.jsxs(ci.List,{grow:!0,children:[A.jsxs(ci.Tab,{value:"participant",children:["Participant View",A.jsx(Mpe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),A.jsxs(ci.Tab,{value:"allTrials",disabled:u,children:["All Trials View",A.jsx(Mpe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),A.jsx(ci.Panel,{value:"participant",children:A.jsx(OO,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),A.jsx(ci.Panel,{value:"allTrials",children:A.jsx(OO,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}const DUt=B.createContext(null);function rc(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let LI=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const D5={decode:function(e,t){return rc(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function L5e(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(L5e(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function Lpe(e,t,n){const r=L5e(e,t||{});return n==null||n.appendChild(r),r}var OUt=Object.freeze({__proto__:null,createElement:Lpe,default:Lpe});const MUt={fetchBlob:function(e,t,n){return rc(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){rc(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>rc(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>rc(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class LUt extends LI{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return rc(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class hT extends LI{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=S=>{if(S.preventDefault(),S.stopPropagation(),u&&Date.now()-m<a)return;const C=S.clientX,R=S.clientY,I=C-d,O=R-h;if(p||Math.abs(I)>s||Math.abs(O)>s){const M=t.getBoundingClientRect(),{left:L,top:V}=M;p||(r==null||r(d-L,h-V),p=!0),n(I,O,C-L,R-V),d=C,h=R}},b=S=>{if(p){const C=S.clientX,R=S.clientY,I=t.getBoundingClientRect(),{left:O,top:M}=I;i==null||i(C-O,R-M)}l()},y=S=>{S.relatedTarget&&S.relatedTarget!==document.documentElement||b(S)},x=S=>{p&&(S.stopPropagation(),S.preventDefault())},w=S=>{p&&S.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",b),document.addEventListener("pointerout",y),document.addEventListener("pointercancel",y),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",x,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",b),document.removeEventListener("pointerout",y),document.removeEventListener("pointercancel",y),document.removeEventListener("touchmove",w),setTimeout(()=>{document.removeEventListener("click",x,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let b=0,y=0,x=0;for(let w=0;w<=a;w++){const S=Math.round(w*m);if(S>b){const I=Math.round(y*c*i),O=I+Math.round(x*c*i)||1;let M=c-I;n.barAlign==="top"?M=0:n.barAlign==="bottom"&&(M=l-O),r[g](b*(d+h),M,d,O,p),b=S,y=0,x=0}const C=Math.abs(s[w]||0),R=Math.abs(o[w]||0);C>y&&(y=C),R>x&&(x=R)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const b=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,b),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(hT.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,b=g+(n.barGap||g/2);c%b!=0&&(c=Math.floor(c/b)*b)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const b=g*c,y=Math.min(l-b,c);if(y<=0)return;const x=t.map(w=>{const S=Math.floor(b/l*w.length),C=Math.floor((b+y)/l*w.length);return w.slice(S,C)});this.renderSingleCanvas(x,n,y,i,b,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(d(m-1),d(m),d(m+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:b}=this.scrollContainer,y=Math.floor(b/l*h);Object.keys(f).length>hT.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(y-1),d(y),d(y+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return rc(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return rc(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}}hT.MAX_CANVAS_WIDTH=8e3,hT.MAX_NODES=10;class FUt extends LI{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Fpe extends LI{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return rc(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return rc(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return rc(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const $Ut={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class rR extends LUt{static create(t){return new rR(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Fpe:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},$Ut,t),this.timer=new FUt;const r=n?void 0:this.getMediaElement();this.renderer=new hT(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=D5.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=D5.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return rc(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=c=>this.emit("loading",c);n=yield MUt.fetchBlob(t,u,a);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof Fpe&&(a.duration=o)}if(r)this.decodedData=D5.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield D5.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return rc(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return rc(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return rc(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return rc(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}rR.BasePlugin=class extends LI{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},rR.dom=OUt;function BUt(e){return rR.create(e)}function jUt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const $pe=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),UUt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:$pe(i),enabled:$pe(s)}};function Bpe(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=jUt(i)}return n}function zUt({container:e,plugins:t=[],onMount:n,...r}){const i=B.useRef(!1),[s,o]=B.useState({}),a=B.useRef([]),[u,l]=B.useState(null);return B.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=Bpe(s,t);a.current=Object.keys(f);const d=BUt({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),B.useEffect(()=>{if(u){const c=Bpe(s,t),{disabled:f,enabled:d}=UUt(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function F5e({children:e,plugins:t=[],onMount:n,...r}){const i=zUt({plugins:t,onMount:n,...r});return sr.createElement(DUt.Provider,{value:i},e)}const $5e=({id:e="waveform",children:t})=>sr.createElement("div",{id:e},t);function Fj(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}class B5e{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}class VUt extends B5e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}}class HUt extends B5e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const qUt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Qee extends VUt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new HUt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new Qee(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const b=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),b)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return Fj(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return Fj(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||qUt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return Fj(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function WUt({width:e=70,height:t=36}){const n=B.useRef(null),r=B.useRef(null),[i,s]=B.useState(!1);B.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(Qee.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,navigator.userAgent.includes("Firefox")||a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=B.useCallback(a=>{n.current=a,s(!0)},[]);return A.jsx(je,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:A.jsx(F5e,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:A.jsx($5e,{id:"waveform",height:t})})})}function GUt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=Ai(I=>I.config),r=Ai(I=>I.metadata),i=HY(),s=bc(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=Al(),{storageEngine:l}=Ko(),c=B0(),f=mp(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=B.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,b=n==null?void 0:n.uiConfig.withProgressBar,y=Vw(),x=rG(`/${y}`),w=B.useRef(null),[S,C]=B.useState(!1),R=Ai(I=>I.isRecording);return B.useEffect(()=>{const I=w.current;I&&C(I.scrollWidth>I.offsetWidth)},[n]),A.jsx(hs.Header,{p:"md",children:A.jsxs(Mm,{mt:-7,align:"center",children:[A.jsx(Mm.Col,{span:4,children:A.jsxs(An,{align:"center",children:[A.jsx(Wb,{w:40,src:`${Uu}${g}`,alt:"Study Logo"}),A.jsx(eh,{w:"md"}),A.jsx(co,{ref:w,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:S?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),A.jsx(Mm.Col,{span:4,children:b&&A.jsx(CT,{radius:"md",size:"lg",value:h})}),A.jsx(Mm.Col,{span:4,children:A.jsxs(Js,{wrap:"nowrap",justify:"right",children:[R?A.jsxs(Js,{ml:"xl",gap:20,wrap:"nowrap",children:[A.jsx(At,{color:"red",children:"Recording audio"}),A.jsx(WUt,{})]}):null,!t&&A.jsx(Ys,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, we’re not collecting any data.",children:A.jsx(v0,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&A.jsx(In,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),A.jsxs(Xc,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[A.jsx(Xc.Target,{children:A.jsx(Vb,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:A.jsx(Jze,{})})}),A.jsxs(Xc.Dropdown,{children:[e&&A.jsx(Xc.Item,{leftSection:A.jsx(cVe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),A.jsx(Xc.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:A.jsx(rVe,{size:14}),children:"Contact"}),e&&A.jsx(Xc.Item,{leftSection:A.jsx(dG,{size:14}),onClick:()=>M5e(l,n,r,x),children:"Next Participant"}),e&&A.jsx(Xc.Item,{leftSection:A.jsx(k1e,{size:14}),component:"a",href:`${Uu}analysis/stats/${y}`,children:"Analyze & Manage"})]})]})]})})]})})}function j5e(e,t){var n;return ZT(e)&&t.baseComponents?GY({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function YUt(){var u;const e=(u=v1())==null?void 0:u.uiConfig.sidebar,t=v1(),n=B0(),r=t.components[n],i=B.useMemo(()=>r?j5e(r,t):null,[r,t]),s=YY(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?A.jsxs(hs.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&A.jsxs(hs.Section,{bg:"gray.3",p:"md",children:[A.jsx(At,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),A.jsx(dc,{text:o})]}),A.jsx(hs.Section,{p:"md",children:A.jsx(z8,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):A.jsx(hs.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:A.jsx(z8,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function KUt(){const e=Ai(u=>u.showHelpText),t=Ai(u=>u.config),n=bc(),{toggleShowHelpText:r}=Al(),[i,s]=B.useState(""),[o,a]=B.useState(!0);return B.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await XY(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),A.jsx(Eo,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?A.jsx(dc,{text:i}):A.jsx(vb,{path:t.uiConfig.helpTextPath})})}function XUt(){const e=Ai(o=>o.alertModal),{setAlertModal:t}=Al(),n=bc(),[r,i]=B.useState(e.show),s=B.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return B.useEffect(()=>i(e.show),[e.show]),A.jsx(Eo,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:A.jsxs(Yy,{color:"red",radius:"xs",title:"Alert",icon:A.jsx(zze,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[A.jsx(At,{my:"md",children:e.message}),A.jsx(Js,{w:"100%",justify:"end",children:A.jsx(In,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const jpe=15,Upe=3;function QUt({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){const o=["var(--mantine-color-yellow-8)","var(--mantine-color-green-8)","var(--mantine-color-indigo-8)","var(--mantine-color-violet-8)","var(--mantine-color-cyan-8)","var(--mantine-color-orange-3)","var(--mantine-color-lime-3)","var(--mantine-color-teal-3)","var(--mantine-color-pink-3)"],a=new Map;if(a.set("Root","var(--mantine-color-grape-3)"),t.provenanceGraph){let u=0;Object.entries(t.provenanceGraph.nodes).forEach(l=>{const[,c]=l;a.has(c.label)||(a.set(c.label,o[u]),u=(u+1)%o.length)})}return A.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(u=>{const[l,c]=u;return A.jsx("g",{onClick:()=>i(l,c.createdOn,s),children:A.jsx("rect",{fill:l===r?"#e15759":a.get(c.label),x:e(c.createdOn)-Upe/2,y:n/2-jpe/2,width:Upe,height:jpe})},l)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?A.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null,A.jsx(Kq,{position:{bottom:10,left:10},children:A.jsxs(wl,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[A.jsx(wl.Target,{children:A.jsx(In,{children:"Show Legend"})}),A.jsx(wl.Dropdown,{children:A.jsx(El,{children:Array.from(a.keys()).map(u=>A.jsxs(Js,{children:[A.jsx(_W,{color:a.get(u)}),A.jsx("span",{children:u})]},u))})})]})})]})}const zpe={left:5,top:0,right:5,bottom:0};function JUt({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=B.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=B.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=B.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return A.jsx(QUt,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return A.jsxs("svg",{style:{width:n,height:r},children:[A.jsx("line",{stroke:"black",strokeWidth:1,x1:zpe.left,x2:n+zpe.left,y1:r/2,y2:r/2}),c]})}function ZUt(e){const t=B.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return B.useLayoutEffect(()=>{t.current=e}),B.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function ezt({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=B.useRef(0),u=B.useRef(Date.now()),[l,c]=B.useState(0);B.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=ZUt(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});B.useEffect(()=>{i&&a.current>=r&&(n(o,0),u.current=Date.now()-a.current,a.current=0)},[o,i,r,n]),B.useEffect(()=>{let h=null;return i&&a.current<r&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[r,f,i]);const d=B.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return A.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:A.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function aq(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const $j={left:0,top:0,right:0,bottom:0};function tzt(e,t){return t?t.getParticipantData(e):null}function nzt({setTimeString:e}){const[t]=D1(),n=B.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=Ko(),i=Ai(te=>te.analysisIsPlaying),s=Ai(te=>te.analysisHasAudio),o=Ai(te=>te.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l,setAnalysisIsPlaying:c}=Al(),f=bc(),d=B0(),h=mp();B.useEffect(()=>{f(a(null))},[h,a,f]);const[p,{width:m}]=sR(),[g,b]=B.useState(0),[y,x]=B.useState(null),[w,S]=B.useState(0),{value:C,status:R}=UD(tzt,[n,r]),[I,O]=rOe(0,100),M=B.useRef(null),[L,V]=B.useState(!0),D=B.useRef(null),j=B.useMemo(()=>`${d}_${h}`,[d,h]);B.useEffect(()=>{f(c(!1))},[n,d,h,f,c]),B.useEffect(()=>{var te;if(j&&C&&((te=C.answers[j])!=null&&te.provenanceGraph)){const q=O1.create(),J=Yw({registry:q,initialState:{}});C.answers[j].provenanceGraph&&(J.importObject(Jy(C.answers[j].provenanceGraph)),f(l(!0)),D.current=J)}else f(l(!1))},[C,j,f,l]);const z=B.useCallback(te=>{var q;te&&(j&&C&&D.current&&(f(a(D.current.getState((q=C.answers[j].provenanceGraph)==null?void 0:q.nodes[te]))),D.current.to(te)),x(te))},[C,a,f,j]);B.useEffect(()=>{var J;if(!j||!C||!D.current||!((J=C.answers[j])!=null&&J.provenanceGraph))return;const te=C.answers[j].provenanceGraph;if(!te)return;if(!y||!te.nodes[y]){z(te.root);return}let q=te.nodes[y];for(;;)if(I<q.createdOn){if(uvt(q))break;{const oe=q.parent;q=te.nodes[oe]}}else if(q.children.length>0){const oe=q.children[0];if(I>te.nodes[oe].createdOn)q=te.nodes[oe];else break}else break;q.id!==y&&z(q.id)},[z,y,C,n,I,j]);const G=B.useMemo(()=>(C==null?void 0:C.answers[j].startTime)||0,[C,j]);B.useEffect(()=>{w===0?e(""):I!==0&&e(`${aq(I-G)} / ${aq(w*1e3)}`)},[j,C,I,e,G,w]),B.useEffect(()=>{if(!s&&o&&C){const te=C.answers[j].endTime-C.answers[j].startTime;S(te>-1?te/1e3:0)}},[s,o,j,C]);const ee=WT(),ne=B.useRef(null),ue=B.useCallback(async te=>{if(ne.current=te,te&&C&&ee&&j&&r)try{const q=await r.getAudio(j,n);await te.load(q),V(!1),f(u(!0)),S(te.getDuration()),b(te.getWidth()),te.seekTo(0),te.on("redrawcomplete",()=>b(te.getWidth()))}catch(q){throw f(u(!1)),new Error(q)}else f(u(!1)),S(0)},[C,ee,j,r,n,f,u]),X=B.useCallback((te,q)=>{if(te>w*1e3+G){f(c(!1)),O(te);return}O(te),ne.current&&q!==void 0&&setTimeout(()=>{var J;(J=ne.current)==null||J.seekTo(q)})},[c,O,G,f,w]);B.useEffect(()=>{ne.current&&(i?ne.current.play():ne.current.pause())},[ne,i,w,G,O]);const W=B.useMemo(()=>{var J,oe;if(!C||!((J=C.answers[j])!=null&&J.startTime)||!((oe=C.answers[j])!=null&&oe.endTime))return null;const te=w>0?C.answers[j].startTime+w*1e3:C.answers[j].endTime;return vM([$j.left,m+$j.left+$j.right]).domain([C.answers[j].startTime,te]).clamp(!0)},[C,j,m,w]);return B.useEffect(()=>{ue(ne.current)},[X,ue,C,n,ne]),A.jsx(Js,{wrap:"nowrap",gap:10,mx:10,children:A.jsxs(El,{ref:p,style:{width:"100%"},gap:0,children:[A.jsx(l1,{}),C!==null&&j?A.jsxs(je,{ref:M,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[A.jsx(F5e,{onMount:ue,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:A.jsx($5e,{id:"waveform",height:50})}),L?A.jsx(xg,{}):null]}):null,R==="success"&&C&&W&&j&&C.answers[j].provenanceGraph?A.jsx(JUt,{xScale:W,trialName:j,setPlayTime:X,currentNode:y,setCurrentNode:z,participantData:C,width:g||m,height:25}):null,W&&C&&(s||o)?A.jsx(ezt,{duration:w*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:G,width:m,xScale:W,updateTimer:X}):null]})})}function rzt(e,t){return t?t.getParticipantData(e):null}function izt(e){return e?e.getAllParticipantsData():null}function szt(){const[e]=D1(),t=B.useMemo(()=>e.get("participantId")||void 0,[e]),n=B0(),r=mp(),i=F0(),{setAnalysisIsPlaying:s}=Al(),o=bc(),a=Ai(b=>b.analysisIsPlaying),{storageEngine:u}=Ko(),{value:l,status:c}=UD(rzt,[t,u]),{value:f}=UD(izt,[u]),[d,h]=B.useMemo(()=>{if(f&&l&&t&&n){const b=f.filter(S=>S.participantConfigHash===l.participantConfigHash),y=b.findIndex(S=>S.participantId===t),x=y<b.length-1?b[y+1]:b[0],w=y>0?b[y-1]:b[b.length-1];return[[x.participantId,k0(x.sequence).indexOf(n)],[w.participantId,k0(w.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=B.useMemo(()=>{const b={};return f==null||f.forEach(y=>{b[y.participantConfigHash]||(b[y.participantConfigHash]=new Set),b[y.participantConfigHash].add(y.participantId)}),Object.keys(b).sort((y,x)=>y===(l==null?void 0:l.participantConfigHash)?-1:x===(l==null?void 0:l.participantConfigHash)?1:0).map(y=>({group:`Config version: ${y}`,items:[...b[y]].map(x=>({value:x,label:x,disabled:y!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[m,g]=B.useState("");return A.jsx(hs.Footer,{zIndex:101,withBorder:!1,children:A.jsxs(je,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[A.jsx(oh,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),A.jsx(nzt,{setTimeString:g}),A.jsx(l1,{children:A.jsxs(Js,{gap:"xs",style:{height:"50px"},children:[A.jsx(At,{size:"sm",ff:"monospace",children:m}),A.jsx(Vb,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?A.jsx(gVe,{}):A.jsx(yVe,{})}),A.jsx(At,{mx:"0",children:"Participant:"}),A.jsx(AT,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:b=>{i(`./../${u0(0)}?participantId=${b}`)},data:p}),A.jsx(In,{onClick:()=>i(`../${u0(+r-1)}?participantId=${t}`,{relative:"path"}),children:A.jsx(tre,{})}),A.jsx(In,{onClick:()=>i(`../${u0(+r+1)}?participantId=${t}`,{relative:"path"}),children:A.jsx(nre,{})}),A.jsxs(In,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${u0(h[1])}?participantId=${h[0]}`),children:[A.jsx(tre,{}),A.jsx(rre,{})]}),A.jsxs(In,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${u0(d[1])}?participantId=${d[0]}`),children:[A.jsx(rre,{}),A.jsx(nre,{})]})]})})]})})}function ozt(){const e=B.useRef([]),t=v1(),n=t.uiConfig.windowEventDebounceTime??100,r=Ai(d=>d.showStudyBrowser),i=Ai(d=>d.analysisHasAudio),s=Ai(d=>d.analysisHasProvenance),o=Ai(d=>d.modes);B.useEffect(()=>{const d=Sy(S=>{e.current.push([Date.now(),"focus",S.target instanceof HTMLElement?S.target.tagName:""])},n,{maxWait:n}),h=Sy(S=>{e.current.push([Date.now(),"input",S.data??""])},n,{maxWait:n}),p=Sy(S=>{e.current.push([Date.now(),"keypress",S.key])},n,{maxWait:n}),m=Sy(S=>{e.current.push([Date.now(),"mousedown",[S.clientX,S.clientY]])},n,{maxWait:n}),g=Sy(S=>{e.current.push([Date.now(),"mouseup",[S.clientX,S.clientY]])},n,{maxWait:n}),b=Sy(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),y=Sy(S=>{e.current.push([Date.now(),"mousemove",[S.clientX,S.clientY]])},n,{maxWait:n}),x=Sy(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Sy(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",b),window.addEventListener("mousemove",y),window.addEventListener("scroll",x),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",b),window.removeEventListener("mousemove",y),window.removeEventListener("scroll",x),document.removeEventListener("visibilitychange",w)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=B.useMemo(()=>o,[o]),c=B.useMemo(()=>u&&r,[u,r]),f=WT();return A.jsx(bwe.Provider,{value:e,children:A.jsxs(hs,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[A.jsx(YUt,{}),A.jsx(NUt,{}),A.jsx(GUt,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),A.jsx(KUt,{}),A.jsx(XUt,{}),A.jsx(hs.Main,{children:A.jsx(QUe,{})}),f&&A.jsx(szt,{})]})})}function azt(e,t=!1){return typeof e=="number"?Vpe(e,t):Vpe(e.length,t).map(r=>r.map(i=>e[i]))}function Vpe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function U5e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=U5e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function uzt(e,t){const n=Jy(e);return U5e(n,t,"root")}function z5e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&z5e(s,t,i,o)})}function lzt(e){const t=[];return z5e(e,t,"",0),t}function Hpe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return azt(i.sort(()=>.5-Math.random()),!0)}function qpe(e){const n=lzt(e.sequence).map(s=>({[s]:Hpe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=uzt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Hpe(e,o))})}),i}var O5={exports:{}},Bj={},Ty={},Zx={},jj={},Uj={},zj={},Wpe;function MO(){return Wpe||(Wpe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(y){if(super(),!e.IDENTIFIER.test(y))throw new Error("CodeGen: name must be a valid identifier");this.str=y}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(y){super(),this._items=typeof y=="string"?[y]:y}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const y=this._items[0];return y===""||y==='""'}get str(){var y;return(y=this._str)!==null&&y!==void 0?y:this._str=this._items.reduce((x,w)=>`${x}${w}`,"")}get names(){var y;return(y=this._names)!==null&&y!==void 0?y:this._names=this._items.reduce((x,w)=>(w instanceof n&&(x[w.str]=(x[w.str]||0)+1),x),{})}}e._Code=r,e.nil=new r("");function i(b,...y){const x=[b[0]];let w=0;for(;w<y.length;)a(x,y[w]),x.push(b[++w]);return new r(x)}e._=i;const s=new r("+");function o(b,...y){const x=[h(b[0])];let w=0;for(;w<y.length;)x.push(s),a(x,y[w]),x.push(s,h(b[++w]));return u(x),new r(x)}e.str=o;function a(b,y){y instanceof r?b.push(...y._items):y instanceof n?b.push(y):b.push(f(y))}e.addCodeArg=a;function u(b){let y=1;for(;y<b.length-1;){if(b[y]===s){const x=l(b[y-1],b[y+1]);if(x!==void 0){b.splice(y-1,3,x);continue}b[y++]="+"}y++}}function l(b,y){if(y==='""')return b;if(b==='""')return y;if(typeof b=="string")return y instanceof n||b[b.length-1]!=='"'?void 0:typeof y!="string"?`${b.slice(0,-1)}${y}"`:y[0]==='"'?b.slice(0,-1)+y.slice(1):void 0;if(typeof y=="string"&&y[0]==='"'&&!(b instanceof n))return`"${b}${y.slice(1)}`}function c(b,y){return y.emptyStr()?b:b.emptyStr()?y:o`${b}${y}`}e.strConcat=c;function f(b){return typeof b=="number"||typeof b=="boolean"||b===null?b:h(Array.isArray(b)?b.join(","):b)}function d(b){return new r(h(b))}e.stringify=d;function h(b){return JSON.stringify(b).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(b){return typeof b=="string"&&e.IDENTIFIER.test(b)?new r(`.${b}`):i`[${b}]`}e.getProperty=p;function m(b){if(typeof b=="string"&&e.IDENTIFIER.test(b))return new r(`${b}`);throw new Error(`CodeGen: invalid export name: ${b}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(b){return new r(b.toString())}e.regexpCode=g}(zj)),zj}var Vj={},Gpe;function Ype(){return Gpe||(Gpe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=MO();class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const y=m.get(p);if(y)return y}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),b=g.length;return g[b]=c.ref,d.setValue(c,{property:h,itemIndex:b}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(b=>{if(g.has(b))return;g.set(b,r.Started);let y=c(b);if(y){const x=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${x} ${b} = ${y};${this.opts._n}`}else if(y=d==null?void 0:d(b))h=(0,t._)`${h}${y}${this.opts._n}`;else throw new n(b);g.set(b,r.Completed)})}return h}}e.ValueScope=a}(Vj)),Vj}var Kpe;function Jr(){return Kpe||(Kpe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=MO(),n=Ype();var r=MO();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Ype();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(J,oe){return this}}class o extends s{constructor(J,oe,de){super(),this.varKind=J,this.name=oe,this.rhs=de}render({es5:J,_n:oe}){const de=J?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${de} ${this.name}${ce};`+oe}optimizeNames(J,oe){if(J[this.name.str])return this.rhs&&(this.rhs=j(this.rhs,J,oe)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(J,oe,de){super(),this.lhs=J,this.rhs=oe,this.sideEffects=de}render({_n:J}){return`${this.lhs} = ${this.rhs};`+J}optimizeNames(J,oe){if(!(this.lhs instanceof t.Name&&!J[this.lhs.str]&&!this.sideEffects))return this.rhs=j(this.rhs,J,oe),this}get names(){const J=this.lhs instanceof t.Name?{}:{...this.lhs.names};return D(J,this.rhs)}}class u extends a{constructor(J,oe,de,ce){super(J,de,ce),this.op=oe}render({_n:J}){return`${this.lhs} ${this.op}= ${this.rhs};`+J}}class l extends s{constructor(J){super(),this.label=J,this.names={}}render({_n:J}){return`${this.label}:`+J}}class c extends s{constructor(J){super(),this.label=J,this.names={}}render({_n:J}){return`break${this.label?` ${this.label}`:""};`+J}}class f extends s{constructor(J){super(),this.error=J}render({_n:J}){return`throw ${this.error};`+J}get names(){return this.error.names}}class d extends s{constructor(J){super(),this.code=J}render({_n:J}){return`${this.code};`+J}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(J,oe){return this.code=j(this.code,J,oe),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(J=[]){super(),this.nodes=J}render(J){return this.nodes.reduce((oe,de)=>oe+de.render(J),"")}optimizeNodes(){const{nodes:J}=this;let oe=J.length;for(;oe--;){const de=J[oe].optimizeNodes();Array.isArray(de)?J.splice(oe,1,...de):de?J[oe]=de:J.splice(oe,1)}return J.length>0?this:void 0}optimizeNames(J,oe){const{nodes:de}=this;let ce=de.length;for(;ce--;){const pe=de[ce];pe.optimizeNames(J,oe)||(z(J,pe.names),de.splice(ce,1))}return de.length>0?this:void 0}get names(){return this.nodes.reduce((J,oe)=>V(J,oe.names),{})}}class p extends h{render(J){return"{"+J._n+super.render(J)+"}"+J._n}}class m extends h{}class g extends p{}g.kind="else";class b extends p{constructor(J,oe){super(oe),this.condition=J}render(J){let oe=`if(${this.condition})`+super.render(J);return this.else&&(oe+="else "+this.else.render(J)),oe}optimizeNodes(){super.optimizeNodes();const J=this.condition;if(J===!0)return this.nodes;let oe=this.else;if(oe){const de=oe.optimizeNodes();oe=this.else=Array.isArray(de)?new g(de):de}if(oe)return J===!1?oe instanceof b?oe:oe.nodes:this.nodes.length?this:new b(G(J),oe instanceof b?[oe]:oe.nodes);if(!(J===!1||!this.nodes.length))return this}optimizeNames(J,oe){var de;if(this.else=(de=this.else)===null||de===void 0?void 0:de.optimizeNames(J,oe),!!(super.optimizeNames(J,oe)||this.else))return this.condition=j(this.condition,J,oe),this}get names(){const J=super.names;return D(J,this.condition),this.else&&V(J,this.else.names),J}}b.kind="if";class y extends p{}y.kind="for";class x extends y{constructor(J){super(),this.iteration=J}render(J){return`for(${this.iteration})`+super.render(J)}optimizeNames(J,oe){if(super.optimizeNames(J,oe))return this.iteration=j(this.iteration,J,oe),this}get names(){return V(super.names,this.iteration.names)}}class w extends y{constructor(J,oe,de,ce){super(),this.varKind=J,this.name=oe,this.from=de,this.to=ce}render(J){const oe=J.es5?n.varKinds.var:this.varKind,{name:de,from:ce,to:pe}=this;return`for(${oe} ${de}=${ce}; ${de}<${pe}; ${de}++)`+super.render(J)}get names(){const J=D(super.names,this.from);return D(J,this.to)}}class S extends y{constructor(J,oe,de,ce){super(),this.loop=J,this.varKind=oe,this.name=de,this.iterable=ce}render(J){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(J)}optimizeNames(J,oe){if(super.optimizeNames(J,oe))return this.iterable=j(this.iterable,J,oe),this}get names(){return V(super.names,this.iterable.names)}}class C extends p{constructor(J,oe,de){super(),this.name=J,this.args=oe,this.async=de}render(J){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(J)}}C.kind="func";class R extends h{render(J){return"return "+super.render(J)}}R.kind="return";class I extends p{render(J){let oe="try"+super.render(J);return this.catch&&(oe+=this.catch.render(J)),this.finally&&(oe+=this.finally.render(J)),oe}optimizeNodes(){var J,oe;return super.optimizeNodes(),(J=this.catch)===null||J===void 0||J.optimizeNodes(),(oe=this.finally)===null||oe===void 0||oe.optimizeNodes(),this}optimizeNames(J,oe){var de,ce;return super.optimizeNames(J,oe),(de=this.catch)===null||de===void 0||de.optimizeNames(J,oe),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(J,oe),this}get names(){const J=super.names;return this.catch&&V(J,this.catch.names),this.finally&&V(J,this.finally.names),J}}class O extends p{constructor(J){super(),this.error=J}render(J){return`catch(${this.error})`+super.render(J)}}O.kind="catch";class M extends p{render(J){return"finally"+super.render(J)}}M.kind="finally";class L{constructor(J,oe={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...oe,_n:oe.lines?`
`:""},this._extScope=J,this._scope=new n.Scope({parent:J}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(J){return this._scope.name(J)}scopeName(J){return this._extScope.name(J)}scopeValue(J,oe){const de=this._extScope.value(J,oe);return(this._values[de.prefix]||(this._values[de.prefix]=new Set)).add(de),de}getScopeValue(J,oe){return this._extScope.getValue(J,oe)}scopeRefs(J){return this._extScope.scopeRefs(J,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(J,oe,de,ce){const pe=this._scope.toName(oe);return de!==void 0&&ce&&(this._constants[pe.str]=de),this._leafNode(new o(J,pe,de)),pe}const(J,oe,de){return this._def(n.varKinds.const,J,oe,de)}let(J,oe,de){return this._def(n.varKinds.let,J,oe,de)}var(J,oe,de){return this._def(n.varKinds.var,J,oe,de)}assign(J,oe,de){return this._leafNode(new a(J,oe,de))}add(J,oe){return this._leafNode(new u(J,e.operators.ADD,oe))}code(J){return typeof J=="function"?J():J!==t.nil&&this._leafNode(new d(J)),this}object(...J){const oe=["{"];for(const[de,ce]of J)oe.length>1&&oe.push(","),oe.push(de),(de!==ce||this.opts.es5)&&(oe.push(":"),(0,t.addCodeArg)(oe,ce));return oe.push("}"),new t._Code(oe)}if(J,oe,de){if(this._blockNode(new b(J)),oe&&de)this.code(oe).else().code(de).endIf();else if(oe)this.code(oe).endIf();else if(de)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(J){return this._elseNode(new b(J))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(b,g)}_for(J,oe){return this._blockNode(J),oe&&this.code(oe).endFor(),this}for(J,oe){return this._for(new x(J),oe)}forRange(J,oe,de,ce,pe=this.opts.es5?n.varKinds.var:n.varKinds.let){const Ee=this._scope.toName(J);return this._for(new w(pe,Ee,oe,de),()=>ce(Ee))}forOf(J,oe,de,ce=n.varKinds.const){const pe=this._scope.toName(J);if(this.opts.es5){const Ee=oe instanceof t.Name?oe:this.var("_arr",oe);return this.forRange("_i",0,(0,t._)`${Ee}.length`,Ae=>{this.var(pe,(0,t._)`${Ee}[${Ae}]`),de(pe)})}return this._for(new S("of",ce,pe,oe),()=>de(pe))}forIn(J,oe,de,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(J,(0,t._)`Object.keys(${oe})`,de);const pe=this._scope.toName(J);return this._for(new S("in",ce,pe,oe),()=>de(pe))}endFor(){return this._endBlockNode(y)}label(J){return this._leafNode(new l(J))}break(J){return this._leafNode(new c(J))}return(J){const oe=new R;if(this._blockNode(oe),this.code(J),oe.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(R)}try(J,oe,de){if(!oe&&!de)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new I;if(this._blockNode(ce),this.code(J),oe){const pe=this.name("e");this._currNode=ce.catch=new O(pe),oe(pe)}return de&&(this._currNode=ce.finally=new M,this.code(de)),this._endBlockNode(O,M)}throw(J){return this._leafNode(new f(J))}block(J,oe){return this._blockStarts.push(this._nodes.length),J&&this.code(J).endBlock(oe),this}endBlock(J){const oe=this._blockStarts.pop();if(oe===void 0)throw new Error("CodeGen: not in self-balancing block");const de=this._nodes.length-oe;if(de<0||J!==void 0&&de!==J)throw new Error(`CodeGen: wrong number of nodes: ${de} vs ${J} expected`);return this._nodes.length=oe,this}func(J,oe=t.nil,de,ce){return this._blockNode(new C(J,oe,de)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(J=1){for(;J-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(J){return this._currNode.nodes.push(J),this}_blockNode(J){this._currNode.nodes.push(J),this._nodes.push(J)}_endBlockNode(J,oe){const de=this._currNode;if(de instanceof J||oe&&de instanceof oe)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${oe?`${J.kind}/${oe.kind}`:J.kind}"`)}_elseNode(J){const oe=this._currNode;if(!(oe instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=oe.else=J,this}get _root(){return this._nodes[0]}get _currNode(){const J=this._nodes;return J[J.length-1]}set _currNode(J){const oe=this._nodes;oe[oe.length-1]=J}}e.CodeGen=L;function V(q,J){for(const oe in J)q[oe]=(q[oe]||0)+(J[oe]||0);return q}function D(q,J){return J instanceof t._CodeOrName?V(q,J.names):q}function j(q,J,oe){if(q instanceof t.Name)return de(q);if(!ce(q))return q;return new t._Code(q._items.reduce((pe,Ee)=>(Ee instanceof t.Name&&(Ee=de(Ee)),Ee instanceof t._Code?pe.push(...Ee._items):pe.push(Ee),pe),[]));function de(pe){const Ee=oe[pe.str];return Ee===void 0||J[pe.str]!==1?pe:(delete J[pe.str],Ee)}function ce(pe){return pe instanceof t._Code&&pe._items.some(Ee=>Ee instanceof t.Name&&J[Ee.str]===1&&oe[Ee.str]!==void 0)}}function z(q,J){for(const oe in J)q[oe]=(q[oe]||0)-(J[oe]||0)}function G(q){return typeof q=="boolean"||typeof q=="number"||q===null?!q:(0,t._)`!${te(q)}`}e.not=G;const ee=W(e.operators.AND);function ne(...q){return q.reduce(ee)}e.and=ne;const ue=W(e.operators.OR);function X(...q){return q.reduce(ue)}e.or=X;function W(q){return(J,oe)=>J===t.nil?oe:oe===t.nil?J:(0,t._)`${te(J)} ${q} ${te(oe)}`}function te(q){return q instanceof t.Name?q:(0,t._)`(${q})`}}(Uj)),Uj}var jr={},Xpe;function Ni(){if(Xpe)return jr;Xpe=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.checkStrictMode=jr.getErrorPath=jr.Type=jr.useFunc=jr.setEvaluated=jr.evaluatedPropsToName=jr.mergeEvaluated=jr.eachItem=jr.unescapeJsonPointer=jr.escapeJsonPointer=jr.escapeFragment=jr.unescapeFragment=jr.schemaRefOrVal=jr.schemaHasRulesButRef=jr.schemaHasRules=jr.checkUnknownRules=jr.alwaysValidSchema=jr.toHash=void 0;const e=Jr(),t=MO();function n(S){const C={};for(const R of S)C[R]=!0;return C}jr.toHash=n;function r(S,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(i(S,C),!s(C,S.self.RULES.all))}jr.alwaysValidSchema=r;function i(S,C=S.schema){const{opts:R,self:I}=S;if(!R.strictSchema||typeof C=="boolean")return;const O=I.RULES.keywords;for(const M in C)O[M]||w(S,`unknown keyword: "${M}"`)}jr.checkUnknownRules=i;function s(S,C){if(typeof S=="boolean")return!S;for(const R in S)if(C[R])return!0;return!1}jr.schemaHasRules=s;function o(S,C){if(typeof S=="boolean")return!S;for(const R in S)if(R!=="$ref"&&C.all[R])return!0;return!1}jr.schemaHasRulesButRef=o;function a({topSchemaRef:S,schemaPath:C},R,I,O){if(!O){if(typeof R=="number"||typeof R=="boolean")return R;if(typeof R=="string")return(0,e._)`${R}`}return(0,e._)`${S}${C}${(0,e.getProperty)(I)}`}jr.schemaRefOrVal=a;function u(S){return f(decodeURIComponent(S))}jr.unescapeFragment=u;function l(S){return encodeURIComponent(c(S))}jr.escapeFragment=l;function c(S){return typeof S=="number"?`${S}`:S.replace(/~/g,"~0").replace(/\//g,"~1")}jr.escapeJsonPointer=c;function f(S){return S.replace(/~1/g,"/").replace(/~0/g,"~")}jr.unescapeJsonPointer=f;function d(S,C){if(Array.isArray(S))for(const R of S)C(R);else C(S)}jr.eachItem=d;function h({mergeNames:S,mergeToName:C,mergeValues:R,resultToName:I}){return(O,M,L,V)=>{const D=L===void 0?M:L instanceof e.Name?(M instanceof e.Name?S(O,M,L):C(O,M,L),L):M instanceof e.Name?(C(O,L,M),M):R(M,L);return V===e.Name&&!(D instanceof e.Name)?I(O,D):D}}jr.mergeEvaluated={props:h({mergeNames:(S,C,R)=>S.if((0,e._)`${R} !== true && ${C} !== undefined`,()=>{S.if((0,e._)`${C} === true`,()=>S.assign(R,!0),()=>S.assign(R,(0,e._)`${R} || {}`).code((0,e._)`Object.assign(${R}, ${C})`))}),mergeToName:(S,C,R)=>S.if((0,e._)`${R} !== true`,()=>{C===!0?S.assign(R,!0):(S.assign(R,(0,e._)`${R} || {}`),m(S,R,C))}),mergeValues:(S,C)=>S===!0?!0:{...S,...C},resultToName:p}),items:h({mergeNames:(S,C,R)=>S.if((0,e._)`${R} !== true && ${C} !== undefined`,()=>S.assign(R,(0,e._)`${C} === true ? true : ${R} > ${C} ? ${R} : ${C}`)),mergeToName:(S,C,R)=>S.if((0,e._)`${R} !== true`,()=>S.assign(R,C===!0?!0:(0,e._)`${R} > ${C} ? ${R} : ${C}`)),mergeValues:(S,C)=>S===!0?!0:Math.max(S,C),resultToName:(S,C)=>S.var("items",C)})};function p(S,C){if(C===!0)return S.var("props",!0);const R=S.var("props",(0,e._)`{}`);return C!==void 0&&m(S,R,C),R}jr.evaluatedPropsToName=p;function m(S,C,R){Object.keys(R).forEach(I=>S.assign((0,e._)`${C}${(0,e.getProperty)(I)}`,!0))}jr.setEvaluated=m;const g={};function b(S,C){return S.scopeValue("func",{ref:C,code:g[C.code]||(g[C.code]=new t._Code(C.code))})}jr.useFunc=b;var y;(function(S){S[S.Num=0]="Num",S[S.Str=1]="Str"})(y||(jr.Type=y={}));function x(S,C,R){if(S instanceof e.Name){const I=C===y.Num;return R?I?(0,e._)`"[" + ${S} + "]"`:(0,e._)`"['" + ${S} + "']"`:I?(0,e._)`"/" + ${S}`:(0,e._)`"/" + ${S}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return R?(0,e.getProperty)(S).toString():"/"+c(S)}jr.getErrorPath=x;function w(S,C,R=S.opts.strictSchema){if(R){if(C=`strict mode: ${C}`,R===!0)throw new Error(C);S.self.logger.warn(C)}}return jr.checkStrictMode=w,jr}var M5={},Qpe;function px(){if(Qpe)return M5;Qpe=1,Object.defineProperty(M5,"__esModule",{value:!0});const e=Jr(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return M5.default=t,M5}var Jpe;function _7(){return Jpe||(Jpe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Jr(),n=Ni(),r=px();e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:b})=>b?(0,t.str)`"${g}" keyword must be ${b} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,b=e.keywordError,y,x){const{it:w}=g,{gen:S,compositeRule:C,allErrors:R}=w,I=f(g,b,y);x??(C||R)?u(S,I):l(w,(0,t._)`[${I}]`)}e.reportError=i;function s(g,b=e.keywordError,y){const{it:x}=g,{gen:w,compositeRule:S,allErrors:C}=x,R=f(g,b,y);u(w,R),S||C||l(x,r.default.vErrors)}e.reportExtraError=s;function o(g,b){g.assign(r.default.errors,b),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(b,()=>g.assign((0,t._)`${r.default.vErrors}.length`,b),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:b,schemaValue:y,data:x,errsCount:w,it:S}){if(w===void 0)throw new Error("ajv implementation error");const C=g.name("err");g.forRange("i",w,r.default.errors,R=>{g.const(C,(0,t._)`${r.default.vErrors}[${R}]`),g.if((0,t._)`${C}.instancePath === undefined`,()=>g.assign((0,t._)`${C}.instancePath`,(0,t.strConcat)(r.default.instancePath,S.errorPath))),g.assign((0,t._)`${C}.schemaPath`,(0,t.str)`${S.errSchemaPath}/${b}`),S.opts.verbose&&(g.assign((0,t._)`${C}.schema`,y),g.assign((0,t._)`${C}.data`,x))})}e.extendErrors=a;function u(g,b){const y=g.const("err",b);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${y}]`),(0,t._)`${r.default.vErrors}.push(${y})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,b){const{gen:y,validateName:x,schemaEnv:w}=g;w.$async?y.throw((0,t._)`new ${g.ValidationError}(${b})`):(y.assign((0,t._)`${x}.errors`,b),y.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,b,y){const{createErrors:x}=g.it;return x===!1?(0,t._)`{}`:d(g,b,y)}function d(g,b,y={}){const{gen:x,it:w}=g,S=[h(w,y),p(g,y)];return m(g,b,S),x.object(...S)}function h({errorPath:g},{instancePath:b}){const y=b?(0,t.str)`${g}${(0,n.getErrorPath)(b,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,y)]}function p({keyword:g,it:{errSchemaPath:b}},{schemaPath:y,parentSchema:x}){let w=x?b:(0,t.str)`${b}/${g}`;return y&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(y,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:b,message:y},x){const{keyword:w,data:S,schemaValue:C,it:R}=g,{opts:I,propertyName:O,topSchemaRef:M,schemaPath:L}=R;x.push([c.keyword,w],[c.params,typeof b=="function"?b(g):b||(0,t._)`{}`]),I.messages&&x.push([c.message,typeof y=="function"?y(g):y]),I.verbose&&x.push([c.schema,C],[c.parentSchema,(0,t._)`${M}${L}`],[r.default.data,S]),O&&x.push([c.propertyName,O])}}(jj)),jj}var Zpe;function czt(){if(Zpe)return Zx;Zpe=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.boolOrEmptySchema=Zx.topBoolOrEmptySchema=void 0;const e=_7(),t=Jr(),n=px(),r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?o(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}Zx.topBoolOrEmptySchema=i;function s(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),o(a)):l.var(u,!0)}Zx.boolOrEmptySchema=s;function o(a,u){const{gen:l,data:c}=a,f={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(f,r,void 0,u)}return Zx}var ul={},e_={},e0e;function V5e(){if(e0e)return e_;e0e=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.getRules=e_.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}e_.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return e_.getRules=r,e_}var Cy={},t0e;function H5e(){if(t0e)return Cy;t0e=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.shouldUseRule=Cy.shouldUseGroup=Cy.schemaHasRulesForType=void 0;function e({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&t(r,o)}Cy.schemaHasRulesForType=e;function t(r,i){return i.rules.some(s=>n(r,s))}Cy.shouldUseGroup=t;function n(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return Cy.shouldUseRule=n,Cy}var n0e;function LO(){if(n0e)return ul;n0e=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.reportTypeError=ul.checkDataTypes=ul.checkDataType=ul.coerceAndCheckDataType=ul.getJSONTypes=ul.getSchemaTypes=ul.DataType=void 0;const e=V5e(),t=H5e(),n=_7(),r=Jr(),i=Ni();var s;(function(y){y[y.Correct=0]="Correct",y[y.Wrong=1]="Wrong"})(s||(ul.DataType=s={}));function o(y){const x=a(y.type);if(x.includes("null")){if(y.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!x.length&&y.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');y.nullable===!0&&x.push("null")}return x}ul.getSchemaTypes=o;function a(y){const x=Array.isArray(y)?y:y?[y]:[];if(x.every(e.isJSONType))return x;throw new Error("type must be JSONType or JSONType[]: "+x.join(","))}ul.getJSONTypes=a;function u(y,x){const{gen:w,data:S,opts:C}=y,R=c(x,C.coerceTypes),I=x.length>0&&!(R.length===0&&x.length===1&&(0,t.schemaHasRulesForType)(y,x[0]));if(I){const O=p(x,S,C.strictNumbers,s.Wrong);w.if(O,()=>{R.length?f(y,x,R):g(y)})}return I}ul.coerceAndCheckDataType=u;const l=new Set(["string","number","integer","boolean","null"]);function c(y,x){return x?y.filter(w=>l.has(w)||x==="array"&&w==="array"):[]}function f(y,x,w){const{gen:S,data:C,opts:R}=y,I=S.let("dataType",(0,r._)`typeof ${C}`),O=S.let("coerced",(0,r._)`undefined`);R.coerceTypes==="array"&&S.if((0,r._)`${I} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>S.assign(C,(0,r._)`${C}[0]`).assign(I,(0,r._)`typeof ${C}`).if(p(x,C,R.strictNumbers),()=>S.assign(O,C))),S.if((0,r._)`${O} !== undefined`);for(const L of w)(l.has(L)||L==="array"&&R.coerceTypes==="array")&&M(L);S.else(),g(y),S.endIf(),S.if((0,r._)`${O} !== undefined`,()=>{S.assign(C,O),d(y,O)});function M(L){switch(L){case"string":S.elseIf((0,r._)`${I} == "number" || ${I} == "boolean"`).assign(O,(0,r._)`"" + ${C}`).elseIf((0,r._)`${C} === null`).assign(O,(0,r._)`""`);return;case"number":S.elseIf((0,r._)`${I} == "boolean" || ${C} === null
              || (${I} == "string" && ${C} && ${C} == +${C})`).assign(O,(0,r._)`+${C}`);return;case"integer":S.elseIf((0,r._)`${I} === "boolean" || ${C} === null
              || (${I} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(O,(0,r._)`+${C}`);return;case"boolean":S.elseIf((0,r._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign(O,!1).elseIf((0,r._)`${C} === "true" || ${C} === 1`).assign(O,!0);return;case"null":S.elseIf((0,r._)`${C} === "" || ${C} === 0 || ${C} === false`),S.assign(O,null);return;case"array":S.elseIf((0,r._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${C} === null`).assign(O,(0,r._)`[${C}]`)}}}function d({gen:y,parentData:x,parentDataProperty:w},S){y.if((0,r._)`${x} !== undefined`,()=>y.assign((0,r._)`${x}[${w}]`,S))}function h(y,x,w,S=s.Correct){const C=S===s.Correct?r.operators.EQ:r.operators.NEQ;let R;switch(y){case"null":return(0,r._)`${x} ${C} null`;case"array":R=(0,r._)`Array.isArray(${x})`;break;case"object":R=(0,r._)`${x} && typeof ${x} == "object" && !Array.isArray(${x})`;break;case"integer":R=I((0,r._)`!(${x} % 1) && !isNaN(${x})`);break;case"number":R=I();break;default:return(0,r._)`typeof ${x} ${C} ${y}`}return S===s.Correct?R:(0,r.not)(R);function I(O=r.nil){return(0,r.and)((0,r._)`typeof ${x} == "number"`,O,w?(0,r._)`isFinite(${x})`:r.nil)}}ul.checkDataType=h;function p(y,x,w,S){if(y.length===1)return h(y[0],x,w,S);let C;const R=(0,i.toHash)(y);if(R.array&&R.object){const I=(0,r._)`typeof ${x} != "object"`;C=R.null?I:(0,r._)`!${x} || ${I}`,delete R.null,delete R.array,delete R.object}else C=r.nil;R.number&&delete R.integer;for(const I in R)C=(0,r.and)(C,h(I,x,w,S));return C}ul.checkDataTypes=p;const m={message:({schema:y})=>`must be ${y}`,params:({schema:y,schemaValue:x})=>typeof y=="string"?(0,r._)`{type: ${y}}`:(0,r._)`{type: ${x}}`};function g(y){const x=b(y);(0,n.reportError)(x,m)}ul.reportTypeError=g;function b(y){const{gen:x,data:w,schema:S}=y,C=(0,i.schemaRefOrVal)(y,S,"type");return{gen:x,keyword:"type",data:w,schema:S.type,schemaCode:C,schemaValue:C,parentSchema:S,params:{},it:y}}return ul}var x3={},r0e;function fzt(){if(r0e)return x3;r0e=1,Object.defineProperty(x3,"__esModule",{value:!0}),x3.assignDefaults=void 0;const e=Jr(),t=Ni();function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const u in o)r(i,u,o[u].default);else s==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}x3.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(o===void 0)return;const f=(0,e._)`${l}${(0,e.getProperty)(s)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${f}`);return}let d=(0,e._)`${f} === undefined`;c.useDefaults==="empty"&&(d=(0,e._)`${d} || ${f} === null || ${f} === ""`),a.if(d,(0,e._)`${f} = ${(0,e.stringify)(o)}`)}return x3}var Jp={},is={},i0e;function K0(){if(i0e)return is;i0e=1,Object.defineProperty(is,"__esModule",{value:!0}),is.validateUnion=is.validateArray=is.usePattern=is.callValidateCode=is.schemaProperties=is.allSchemaProperties=is.noPropertyInData=is.propertyInData=is.isOwnProperty=is.hasPropFunc=is.reportMissingProp=is.checkMissingProp=is.checkReportMissingProp=void 0;const e=Jr(),t=Ni(),n=px(),r=Ni();function i(y,x){const{gen:w,data:S,it:C}=y;w.if(c(w,S,x,C.opts.ownProperties),()=>{y.setParams({missingProperty:(0,e._)`${x}`},!0),y.error()})}is.checkReportMissingProp=i;function s({gen:y,data:x,it:{opts:w}},S,C){return(0,e.or)(...S.map(R=>(0,e.and)(c(y,x,R,w.ownProperties),(0,e._)`${C} = ${R}`)))}is.checkMissingProp=s;function o(y,x){y.setParams({missingProperty:x},!0),y.error()}is.reportMissingProp=o;function a(y){return y.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}is.hasPropFunc=a;function u(y,x,w){return(0,e._)`${a(y)}.call(${x}, ${w})`}is.isOwnProperty=u;function l(y,x,w,S){const C=(0,e._)`${x}${(0,e.getProperty)(w)} !== undefined`;return S?(0,e._)`${C} && ${u(y,x,w)}`:C}is.propertyInData=l;function c(y,x,w,S){const C=(0,e._)`${x}${(0,e.getProperty)(w)} === undefined`;return S?(0,e.or)(C,(0,e.not)(u(y,x,w))):C}is.noPropertyInData=c;function f(y){return y?Object.keys(y).filter(x=>x!=="__proto__"):[]}is.allSchemaProperties=f;function d(y,x){return f(x).filter(w=>!(0,t.alwaysValidSchema)(y,x[w]))}is.schemaProperties=d;function h({schemaCode:y,data:x,it:{gen:w,topSchemaRef:S,schemaPath:C,errorPath:R},it:I},O,M,L){const V=L?(0,e._)`${y}, ${x}, ${S}${C}`:x,D=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,R)],[n.default.parentData,I.parentData],[n.default.parentDataProperty,I.parentDataProperty],[n.default.rootData,n.default.rootData]];I.opts.dynamicRef&&D.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const j=(0,e._)`${V}, ${w.object(...D)}`;return M!==e.nil?(0,e._)`${O}.call(${M}, ${j})`:(0,e._)`${O}(${j})`}is.callValidateCode=h;const p=(0,e._)`new RegExp`;function m({gen:y,it:{opts:x}},w){const S=x.unicodeRegExp?"u":"",{regExp:C}=x.code,R=C(w,S);return y.scopeValue("pattern",{key:R.toString(),ref:R,code:(0,e._)`${C.code==="new RegExp"?p:(0,r.useFunc)(y,C)}(${w}, ${S})`})}is.usePattern=m;function g(y){const{gen:x,data:w,keyword:S,it:C}=y,R=x.name("valid");if(C.allErrors){const O=x.let("valid",!0);return I(()=>x.assign(O,!1)),O}return x.var(R,!0),I(()=>x.break()),R;function I(O){const M=x.const("len",(0,e._)`${w}.length`);x.forRange("i",0,M,L=>{y.subschema({keyword:S,dataProp:L,dataPropType:t.Type.Num},R),x.if((0,e.not)(R),O)})}}is.validateArray=g;function b(y){const{gen:x,schema:w,keyword:S,it:C}=y;if(!Array.isArray(w))throw new Error("ajv implementation error");if(w.some(M=>(0,t.alwaysValidSchema)(C,M))&&!C.opts.unevaluated)return;const I=x.let("valid",!1),O=x.name("_valid");x.block(()=>w.forEach((M,L)=>{const V=y.subschema({keyword:S,schemaProp:L,compositeRule:!0},O);x.assign(I,(0,e._)`${I} || ${O}`),y.mergeValidEvaluated(V,O)||x.if((0,e.not)(I))})),y.result(I,()=>y.reset(),()=>y.error(!0))}return is.validateUnion=b,is}var s0e;function dzt(){if(s0e)return Jp;s0e=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.validateKeywordUsage=Jp.validSchemaType=Jp.funcKeywordCode=Jp.macroKeywordCode=void 0;const e=Jr(),t=px(),n=K0(),r=_7();function i(d,h){const{gen:p,keyword:m,schema:g,parentSchema:b,it:y}=d,x=h.macro.call(y.self,g,b,y),w=l(p,m,x);y.opts.validateSchema!==!1&&y.self.validateSchema(x,!0);const S=p.name("valid");d.subschema({schema:x,schemaPath:e.nil,errSchemaPath:`${y.errSchemaPath}/${m}`,topSchemaRef:w,compositeRule:!0},S),d.pass(S,()=>d.error(!0))}Jp.macroKeywordCode=i;function s(d,h){var p;const{gen:m,keyword:g,schema:b,parentSchema:y,$data:x,it:w}=d;u(w,h);const S=!x&&h.compile?h.compile.call(w.self,b,y,w):h.validate,C=l(m,g,S),R=m.let("valid");d.block$data(R,I),d.ok((p=h.valid)!==null&&p!==void 0?p:R);function I(){if(h.errors===!1)L(),h.modifying&&o(d),V(()=>d.error());else{const D=h.async?O():M();h.modifying&&o(d),V(()=>a(d,D))}}function O(){const D=m.let("ruleErrs",null);return m.try(()=>L((0,e._)`await `),j=>m.assign(R,!1).if((0,e._)`${j} instanceof ${w.ValidationError}`,()=>m.assign(D,(0,e._)`${j}.errors`),()=>m.throw(j))),D}function M(){const D=(0,e._)`${C}.errors`;return m.assign(D,null),L(e.nil),D}function L(D=h.async?(0,e._)`await `:e.nil){const j=w.opts.passContext?t.default.this:t.default.self,z=!("compile"in h&&!x||h.schema===!1);m.assign(R,(0,e._)`${D}${(0,n.callValidateCode)(d,C,j,z)}`,h.modifying)}function V(D){var j;m.if((0,e.not)((j=h.valid)!==null&&j!==void 0?j:R),D)}}Jp.funcKeywordCode=s;function o(d){const{gen:h,data:p,it:m}=d;h.if(m.parentData,()=>h.assign(p,(0,e._)`${m.parentData}[${m.parentDataProperty}]`))}function a(d,h){const{gen:p}=d;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(d)},()=>d.error())}function u({schemaEnv:d},h){if(h.async&&!d.$async)throw new Error("async keyword in sync schema")}function l(d,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return d.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(d,h,p=!1){return!h.length||h.some(m=>m==="array"?Array.isArray(d):m==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==m||p&&typeof d>"u")}Jp.validSchemaType=c;function f({schema:d,opts:h,self:p,errSchemaPath:m},g,b){if(Array.isArray(g.keyword)?!g.keyword.includes(b):g.keyword!==b)throw new Error("ajv implementation error");const y=g.dependencies;if(y!=null&&y.some(x=>!Object.prototype.hasOwnProperty.call(d,x)))throw new Error(`parent schema must have dependencies of ${b}: ${y.join(",")}`);if(g.validateSchema&&!g.validateSchema(d[b])){const w=`keyword "${b}" value is invalid at path "${m}": `+p.errorsText(g.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(w);else throw new Error(w)}}return Jp.validateKeywordUsage=f,Jp}var Ay={},o0e;function hzt(){if(o0e)return Ay;o0e=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.extendSubschemaMode=Ay.extendSubschemaData=Ay.getSubschema=void 0;const e=Jr(),t=Ni();function n(s,{keyword:o,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:f}){if(o!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const d=s.schema[o];return a===void 0?{schema:d,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:d[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:f,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}Ay.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:f}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=o;if(a!==void 0){const{errorPath:p,dataPathArr:m,opts:g}=o,b=d.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(b),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,u,g.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...m,s.parentDataProperty]}if(l!==void 0){const p=l instanceof e.Name?l:d.let("data",l,!0);h(p),f!==void 0&&(s.propertyName=f)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}Ay.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(s.compositeRule=u),l!==void 0&&(s.createErrors=l),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return Ay.extendSubschemaMode=i,Ay}var Yc={},Hj={exports:{}},a0e;function pzt(){if(a0e)return Hj.exports;a0e=1;var e=Hj.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(i,o,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,s,o,a,u,l,c,f,d){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,u,l,c,f,d);for(var h in o){var p=o[h];if(Array.isArray(p)){if(h in e.arrayKeywords)for(var m=0;m<p.length;m++)t(r,i,s,p[m],a+"/"+h+"/"+m,u,a,h,o,m)}else if(h in e.propsKeywords){if(p&&typeof p=="object")for(var g in p)t(r,i,s,p[g],a+"/"+h+"/"+n(g),u,a,h,o,g)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,s,p,a+"/"+h,u,a,h,o)}s(o,a,u,l,c,f,d)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return Hj.exports}var u0e;function w7(){if(u0e)return Yc;u0e=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.getSchemaRefs=Yc.resolveUrl=Yc.normalizeId=Yc._getFullPath=Yc.getFullPath=Yc.inlineRef=void 0;const e=Ni(),t=KY(),n=pzt(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(m,g=!0){return typeof m=="boolean"?!0:g===!0?!o(m):g?a(m)<=g:!1}Yc.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(m){for(const g in m){if(s.has(g))return!0;const b=m[g];if(Array.isArray(b)&&b.some(o)||typeof b=="object"&&o(b))return!0}return!1}function a(m){let g=0;for(const b in m){if(b==="$ref")return 1/0;if(g++,!r.has(b)&&(typeof m[b]=="object"&&(0,e.eachItem)(m[b],y=>g+=a(y)),g===1/0))return 1/0}return g}function u(m,g="",b){b!==!1&&(g=f(g));const y=m.parse(g);return l(m,y)}Yc.getFullPath=u;function l(m,g){return m.serialize(g).split("#")[0]+"#"}Yc._getFullPath=l;const c=/#\/?$/;function f(m){return m?m.replace(c,""):""}Yc.normalizeId=f;function d(m,g,b){return b=f(b),m.resolve(g,b)}Yc.resolveUrl=d;const h=/^[a-z_][-a-z0-9._]*$/i;function p(m,g){if(typeof m=="boolean")return{};const{schemaId:b,uriResolver:y}=this.opts,x=f(m[b]||g),w={"":x},S=u(y,x,!1),C={},R=new Set;return n(m,{allKeys:!0},(M,L,V,D)=>{if(D===void 0)return;const j=S+L;let z=w[D];typeof M[b]=="string"&&(z=G.call(this,M[b])),ee.call(this,M.$anchor),ee.call(this,M.$dynamicAnchor),w[L]=z;function G(ne){const ue=this.opts.uriResolver.resolve;if(ne=f(z?ue(z,ne):ne),R.has(ne))throw O(ne);R.add(ne);let X=this.refs[ne];return typeof X=="string"&&(X=this.refs[X]),typeof X=="object"?I(M,X.schema,ne):ne!==f(j)&&(ne[0]==="#"?(I(M,C[ne],ne),C[ne]=M):this.refs[ne]=j),ne}function ee(ne){if(typeof ne=="string"){if(!h.test(ne))throw new Error(`invalid anchor "${ne}"`);G.call(this,`#${ne}`)}}}),C;function I(M,L,V){if(L!==void 0&&!t(M,L))throw O(V)}function O(M){return new Error(`reference "${M}" resolves to more than one schema`)}}return Yc.getSchemaRefs=p,Yc}var l0e;function E7(){if(l0e)return Ty;l0e=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.getData=Ty.KeywordCxt=Ty.validateFunctionCode=void 0;const e=czt(),t=LO(),n=H5e(),r=LO(),i=fzt(),s=dzt(),o=hzt(),a=Jr(),u=px(),l=w7(),c=Ni(),f=_7();function d(ge){if(S(ge)&&(R(ge),w(ge))){g(ge);return}h(ge,()=>(0,e.topBoolOrEmptySchema)(ge))}Ty.validateFunctionCode=d;function h({gen:ge,validateName:me,schema:Oe,schemaEnv:Me,opts:Ye},lt){Ye.code.es5?ge.func(me,(0,a._)`${u.default.data}, ${u.default.valCxt}`,Me.$async,()=>{ge.code((0,a._)`"use strict"; ${y(Oe,Ye)}`),m(ge,Ye),ge.code(lt)}):ge.func(me,(0,a._)`${u.default.data}, ${p(Ye)}`,Me.$async,()=>ge.code(y(Oe,Ye)).code(lt))}function p(ge){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${ge.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function m(ge,me){ge.if(u.default.valCxt,()=>{ge.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),ge.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),ge.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),ge.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),me.dynamicRef&&ge.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{ge.var(u.default.instancePath,(0,a._)`""`),ge.var(u.default.parentData,(0,a._)`undefined`),ge.var(u.default.parentDataProperty,(0,a._)`undefined`),ge.var(u.default.rootData,u.default.data),me.dynamicRef&&ge.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function g(ge){const{schema:me,opts:Oe,gen:Me}=ge;h(ge,()=>{Oe.$comment&&me.$comment&&D(ge),M(ge),Me.let(u.default.vErrors,null),Me.let(u.default.errors,0),Oe.unevaluated&&b(ge),I(ge),j(ge)})}function b(ge){const{gen:me,validateName:Oe}=ge;ge.evaluated=me.const("evaluated",(0,a._)`${Oe}.evaluated`),me.if((0,a._)`${ge.evaluated}.dynamicProps`,()=>me.assign((0,a._)`${ge.evaluated}.props`,(0,a._)`undefined`)),me.if((0,a._)`${ge.evaluated}.dynamicItems`,()=>me.assign((0,a._)`${ge.evaluated}.items`,(0,a._)`undefined`))}function y(ge,me){const Oe=typeof ge=="object"&&ge[me.schemaId];return Oe&&(me.code.source||me.code.process)?(0,a._)`/*# sourceURL=${Oe} */`:a.nil}function x(ge,me){if(S(ge)&&(R(ge),w(ge))){C(ge,me);return}(0,e.boolOrEmptySchema)(ge,me)}function w({schema:ge,self:me}){if(typeof ge=="boolean")return!ge;for(const Oe in ge)if(me.RULES.all[Oe])return!0;return!1}function S(ge){return typeof ge.schema!="boolean"}function C(ge,me){const{schema:Oe,gen:Me,opts:Ye}=ge;Ye.$comment&&Oe.$comment&&D(ge),L(ge),V(ge);const lt=Me.const("_errs",u.default.errors);I(ge,lt),Me.var(me,(0,a._)`${lt} === ${u.default.errors}`)}function R(ge){(0,c.checkUnknownRules)(ge),O(ge)}function I(ge,me){if(ge.opts.jtd)return G(ge,[],!1,me);const Oe=(0,t.getSchemaTypes)(ge.schema),Me=(0,t.coerceAndCheckDataType)(ge,Oe);G(ge,Oe,!Me,me)}function O(ge){const{schema:me,errSchemaPath:Oe,opts:Me,self:Ye}=ge;me.$ref&&Me.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(me,Ye.RULES)&&Ye.logger.warn(`$ref: keywords ignored in schema at path "${Oe}"`)}function M(ge){const{schema:me,opts:Oe}=ge;me.default!==void 0&&Oe.useDefaults&&Oe.strictSchema&&(0,c.checkStrictMode)(ge,"default is ignored in the schema root")}function L(ge){const me=ge.schema[ge.opts.schemaId];me&&(ge.baseId=(0,l.resolveUrl)(ge.opts.uriResolver,ge.baseId,me))}function V(ge){if(ge.schema.$async&&!ge.schemaEnv.$async)throw new Error("async schema in sync schema")}function D({gen:ge,schemaEnv:me,schema:Oe,errSchemaPath:Me,opts:Ye}){const lt=Oe.$comment;if(Ye.$comment===!0)ge.code((0,a._)`${u.default.self}.logger.log(${lt})`);else if(typeof Ye.$comment=="function"){const We=(0,a.str)`${Me}/$comment`,nt=ge.scopeValue("root",{ref:me.root});ge.code((0,a._)`${u.default.self}.opts.$comment(${lt}, ${We}, ${nt}.schema)`)}}function j(ge){const{gen:me,schemaEnv:Oe,validateName:Me,ValidationError:Ye,opts:lt}=ge;Oe.$async?me.if((0,a._)`${u.default.errors} === 0`,()=>me.return(u.default.data),()=>me.throw((0,a._)`new ${Ye}(${u.default.vErrors})`)):(me.assign((0,a._)`${Me}.errors`,u.default.vErrors),lt.unevaluated&&z(ge),me.return((0,a._)`${u.default.errors} === 0`))}function z({gen:ge,evaluated:me,props:Oe,items:Me}){Oe instanceof a.Name&&ge.assign((0,a._)`${me}.props`,Oe),Me instanceof a.Name&&ge.assign((0,a._)`${me}.items`,Me)}function G(ge,me,Oe,Me){const{gen:Ye,schema:lt,data:We,allErrors:nt,opts:yt,self:_t}=ge,{RULES:It}=_t;if(lt.$ref&&(yt.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(lt,It))){Ye.block(()=>ce(ge,"$ref",It.all.$ref.definition));return}yt.jtd||ne(ge,me),Ye.block(()=>{for(const Ke of It.rules)Et(Ke);Et(It.post)});function Et(Ke){(0,n.shouldUseGroup)(lt,Ke)&&(Ke.type?(Ye.if((0,r.checkDataType)(Ke.type,We,yt.strictNumbers)),ee(ge,Ke),me.length===1&&me[0]===Ke.type&&Oe&&(Ye.else(),(0,r.reportTypeError)(ge)),Ye.endIf()):ee(ge,Ke),nt||Ye.if((0,a._)`${u.default.errors} === ${Me||0}`))}}function ee(ge,me){const{gen:Oe,schema:Me,opts:{useDefaults:Ye}}=ge;Ye&&(0,i.assignDefaults)(ge,me.type),Oe.block(()=>{for(const lt of me.rules)(0,n.shouldUseRule)(Me,lt)&&ce(ge,lt.keyword,lt.definition,me.type)})}function ne(ge,me){ge.schemaEnv.meta||!ge.opts.strictTypes||(ue(ge,me),ge.opts.allowUnionTypes||X(ge,me),W(ge,ge.dataTypes))}function ue(ge,me){if(me.length){if(!ge.dataTypes.length){ge.dataTypes=me;return}me.forEach(Oe=>{q(ge.dataTypes,Oe)||oe(ge,`type "${Oe}" not allowed by context "${ge.dataTypes.join(",")}"`)}),J(ge,me)}}function X(ge,me){me.length>1&&!(me.length===2&&me.includes("null"))&&oe(ge,"use allowUnionTypes to allow union type keyword")}function W(ge,me){const Oe=ge.self.RULES.all;for(const Me in Oe){const Ye=Oe[Me];if(typeof Ye=="object"&&(0,n.shouldUseRule)(ge.schema,Ye)){const{type:lt}=Ye.definition;lt.length&&!lt.some(We=>te(me,We))&&oe(ge,`missing type "${lt.join(",")}" for keyword "${Me}"`)}}}function te(ge,me){return ge.includes(me)||me==="number"&&ge.includes("integer")}function q(ge,me){return ge.includes(me)||me==="integer"&&ge.includes("number")}function J(ge,me){const Oe=[];for(const Me of ge.dataTypes)q(me,Me)?Oe.push(Me):me.includes("integer")&&Me==="number"&&Oe.push("integer");ge.dataTypes=Oe}function oe(ge,me){const Oe=ge.schemaEnv.baseId+ge.errSchemaPath;me+=` at "${Oe}" (strictTypes)`,(0,c.checkStrictMode)(ge,me,ge.opts.strictTypes)}class de{constructor(me,Oe,Me){if((0,s.validateKeywordUsage)(me,Oe,Me),this.gen=me.gen,this.allErrors=me.allErrors,this.keyword=Me,this.data=me.data,this.schema=me.schema[Me],this.$data=Oe.$data&&me.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(me,this.schema,Me,this.$data),this.schemaType=Oe.schemaType,this.parentSchema=me.schema,this.params={},this.it=me,this.def=Oe,this.$data)this.schemaCode=me.gen.const("vSchema",Ae(this.$data,me));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,Oe.schemaType,Oe.allowUndefined))throw new Error(`${Me} value must be ${JSON.stringify(Oe.schemaType)}`);("code"in Oe?Oe.trackErrors:Oe.errors!==!1)&&(this.errsCount=me.gen.const("_errs",u.default.errors))}result(me,Oe,Me){this.failResult((0,a.not)(me),Oe,Me)}failResult(me,Oe,Me){this.gen.if(me),Me?Me():this.error(),Oe?(this.gen.else(),Oe(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(me,Oe){this.failResult((0,a.not)(me),void 0,Oe)}fail(me){if(me===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(me),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(me){if(!this.$data)return this.fail(me);const{schemaCode:Oe}=this;this.fail((0,a._)`${Oe} !== undefined && (${(0,a.or)(this.invalid$data(),me)})`)}error(me,Oe,Me){if(Oe){this.setParams(Oe),this._error(me,Me),this.setParams({});return}this._error(me,Me)}_error(me,Oe){(me?f.reportExtraError:f.reportError)(this,this.def.error,Oe)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(me){this.allErrors||this.gen.if(me)}setParams(me,Oe){Oe?Object.assign(this.params,me):this.params=me}block$data(me,Oe,Me=a.nil){this.gen.block(()=>{this.check$data(me,Me),Oe()})}check$data(me=a.nil,Oe=a.nil){if(!this.$data)return;const{gen:Me,schemaCode:Ye,schemaType:lt,def:We}=this;Me.if((0,a.or)((0,a._)`${Ye} === undefined`,Oe)),me!==a.nil&&Me.assign(me,!0),(lt.length||We.validateSchema)&&(Me.elseIf(this.invalid$data()),this.$dataError(),me!==a.nil&&Me.assign(me,!1)),Me.else()}invalid$data(){const{gen:me,schemaCode:Oe,schemaType:Me,def:Ye,it:lt}=this;return(0,a.or)(We(),nt());function We(){if(Me.length){if(!(Oe instanceof a.Name))throw new Error("ajv implementation error");const yt=Array.isArray(Me)?Me:[Me];return(0,a._)`${(0,r.checkDataTypes)(yt,Oe,lt.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function nt(){if(Ye.validateSchema){const yt=me.scopeValue("validate$data",{ref:Ye.validateSchema});return(0,a._)`!${yt}(${Oe})`}return a.nil}}subschema(me,Oe){const Me=(0,o.getSubschema)(this.it,me);(0,o.extendSubschemaData)(Me,this.it,me),(0,o.extendSubschemaMode)(Me,me);const Ye={...this.it,...Me,items:void 0,props:void 0};return x(Ye,Oe),Ye}mergeEvaluated(me,Oe){const{it:Me,gen:Ye}=this;Me.opts.unevaluated&&(Me.props!==!0&&me.props!==void 0&&(Me.props=c.mergeEvaluated.props(Ye,me.props,Me.props,Oe)),Me.items!==!0&&me.items!==void 0&&(Me.items=c.mergeEvaluated.items(Ye,me.items,Me.items,Oe)))}mergeValidEvaluated(me,Oe){const{it:Me,gen:Ye}=this;if(Me.opts.unevaluated&&(Me.props!==!0||Me.items!==!0))return Ye.if(Oe,()=>this.mergeEvaluated(me,a.Name)),!0}}Ty.KeywordCxt=de;function ce(ge,me,Oe,Me){const Ye=new de(ge,Oe,me);"code"in Oe?Oe.code(Ye,Me):Ye.$data&&Oe.validate?(0,s.funcKeywordCode)(Ye,Oe):"macro"in Oe?(0,s.macroKeywordCode)(Ye,Oe):(Oe.compile||Oe.validate)&&(0,s.funcKeywordCode)(Ye,Oe)}const pe=/^\/(?:[^~]|~0|~1)*$/,Ee=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ae(ge,{dataLevel:me,dataNames:Oe,dataPathArr:Me}){let Ye,lt;if(ge==="")return u.default.rootData;if(ge[0]==="/"){if(!pe.test(ge))throw new Error(`Invalid JSON-pointer: ${ge}`);Ye=ge,lt=u.default.rootData}else{const _t=Ee.exec(ge);if(!_t)throw new Error(`Invalid JSON-pointer: ${ge}`);const It=+_t[1];if(Ye=_t[2],Ye==="#"){if(It>=me)throw new Error(yt("property/index",It));return Me[me-It]}if(It>me)throw new Error(yt("data",It));if(lt=Oe[me-It],!Ye)return lt}let We=lt;const nt=Ye.split("/");for(const _t of nt)_t&&(lt=(0,a._)`${lt}${(0,a.getProperty)((0,c.unescapeJsonPointer)(_t))}`,We=(0,a._)`${We} && ${lt}`);return We;function yt(_t,It){return`Cannot access ${_t} ${It} levels up, current level is ${me}`}}return Ty.getData=Ae,Ty}var L5={},c0e;function Jee(){if(c0e)return L5;c0e=1,Object.defineProperty(L5,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return L5.default=e,L5}var F5={},f0e;function S7(){if(f0e)return F5;f0e=1,Object.defineProperty(F5,"__esModule",{value:!0});const e=w7();class t extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return F5.default=t,F5}var Bd={},d0e;function Zee(){if(d0e)return Bd;d0e=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.resolveSchema=Bd.getCompilingSchema=Bd.resolveRef=Bd.compileSchema=Bd.SchemaEnv=void 0;const e=Jr(),t=Jee(),n=px(),r=w7(),i=Ni(),s=E7();class o{constructor(b){var y;this.refs={},this.dynamicAnchors={};let x;typeof b.schema=="object"&&(x=b.schema),this.schema=b.schema,this.schemaId=b.schemaId,this.root=b.root||this,this.baseId=(y=b.baseId)!==null&&y!==void 0?y:(0,r.normalizeId)(x==null?void 0:x[b.schemaId||"$id"]),this.schemaPath=b.schemaPath,this.localRefs=b.localRefs,this.meta=b.meta,this.$async=x==null?void 0:x.$async,this.refs={}}}Bd.SchemaEnv=o;function a(g){const b=c.call(this,g);if(b)return b;const y=(0,r.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:x,lines:w}=this.opts.code,{ownProperties:S}=this.opts,C=new e.CodeGen(this.scope,{es5:x,lines:w,ownProperties:S});let R;g.$async&&(R=C.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const I=C.scopeName("validate");g.validateName=I;const O={gen:C,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:C.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,e.stringify)(g.schema)}:{ref:g.schema}),validateName:I,ValidationError:R,schema:g.schema,schemaEnv:g,rootId:y,baseId:g.baseId||y,schemaPath:e.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let M;try{this._compilations.add(g),(0,s.validateFunctionCode)(O),C.optimize(this.opts.code.optimize);const L=C.toString();M=`${C.scopeRefs(n.default.scope)}return ${L}`,this.opts.code.process&&(M=this.opts.code.process(M,g));const D=new Function(`${n.default.self}`,`${n.default.scope}`,M)(this,this.scope.get());if(this.scope.value(I,{ref:D}),D.errors=null,D.schema=g.schema,D.schemaEnv=g,g.$async&&(D.$async=!0),this.opts.code.source===!0&&(D.source={validateName:I,validateCode:L,scopeValues:C._values}),this.opts.unevaluated){const{props:j,items:z}=O;D.evaluated={props:j instanceof e.Name?void 0:j,items:z instanceof e.Name?void 0:z,dynamicProps:j instanceof e.Name,dynamicItems:z instanceof e.Name},D.source&&(D.source.evaluated=(0,e.stringify)(D.evaluated))}return g.validate=D,g}catch(L){throw delete g.validate,delete g.validateName,M&&this.logger.error("Error compiling schema, function code:",M),L}finally{this._compilations.delete(g)}}Bd.compileSchema=a;function u(g,b,y){var x;y=(0,r.resolveUrl)(this.opts.uriResolver,b,y);const w=g.refs[y];if(w)return w;let S=d.call(this,g,y);if(S===void 0){const C=(x=g.localRefs)===null||x===void 0?void 0:x[y],{schemaId:R}=this.opts;C&&(S=new o({schema:C,schemaId:R,root:g,baseId:b}))}if(S!==void 0)return g.refs[y]=l.call(this,S)}Bd.resolveRef=u;function l(g){return(0,r.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:a.call(this,g)}function c(g){for(const b of this._compilations)if(f(b,g))return b}Bd.getCompilingSchema=c;function f(g,b){return g.schema===b.schema&&g.root===b.root&&g.baseId===b.baseId}function d(g,b){let y;for(;typeof(y=this.refs[b])=="string";)b=y;return y||this.schemas[b]||h.call(this,g,b)}function h(g,b){const y=this.opts.uriResolver.parse(b),x=(0,r._getFullPath)(this.opts.uriResolver,y);let w=(0,r.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&x===w)return m.call(this,y,g);const S=(0,r.normalizeId)(x),C=this.refs[S]||this.schemas[S];if(typeof C=="string"){const R=h.call(this,g,C);return typeof(R==null?void 0:R.schema)!="object"?void 0:m.call(this,y,R)}if(typeof(C==null?void 0:C.schema)=="object"){if(C.validate||a.call(this,C),S===(0,r.normalizeId)(b)){const{schema:R}=C,{schemaId:I}=this.opts,O=R[I];return O&&(w=(0,r.resolveUrl)(this.opts.uriResolver,w,O)),new o({schema:R,schemaId:I,root:g,baseId:w})}return m.call(this,y,C)}}Bd.resolveSchema=h;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function m(g,{baseId:b,schema:y,root:x}){var w;if(((w=g.fragment)===null||w===void 0?void 0:w[0])!=="/")return;for(const R of g.fragment.slice(1).split("/")){if(typeof y=="boolean")return;const I=y[(0,i.unescapeFragment)(R)];if(I===void 0)return;y=I;const O=typeof y=="object"&&y[this.opts.schemaId];!p.has(R)&&O&&(b=(0,r.resolveUrl)(this.opts.uriResolver,b,O))}let S;if(typeof y!="boolean"&&y.$ref&&!(0,i.schemaHasRulesButRef)(y,this.RULES)){const R=(0,r.resolveUrl)(this.opts.uriResolver,b,y.$ref);S=h.call(this,x,R)}const{schemaId:C}=this.opts;if(S=S||new o({schema:y,schemaId:C,root:x,baseId:b}),S.schema!==S.root.schema)return S}return Bd}const mzt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",gzt="Meta-schema for $data reference (JSON AnySchema extension proposal)",yzt="object",vzt=["$data"],bzt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},xzt=!1,_zt={$id:mzt,description:gzt,type:yzt,required:vzt,properties:bzt,additionalProperties:xzt};var $5={},_3={exports:{}},qj,h0e;function wzt(){return h0e||(h0e=1,qj={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),qj}var Wj,p0e;function Ezt(){if(p0e)return Wj;p0e=1;const{HEX:e}=wzt(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(m){if(a(m,".")<3)return{host:m,isIPV4:!1};const g=m.match(t)||[],[b]=g;return b?{host:o(b,"."),isIPV4:!0}:{host:m,isIPV4:!1}}function r(m,g=!1){let b="",y=!0;for(const x of m){if(e[x]===void 0)return;x!=="0"&&y===!0&&(y=!1),y||(b+=x)}return g&&b.length===0&&(b="0"),b}function i(m){let g=0;const b={error:!1,address:"",zone:""},y=[],x=[];let w=!1,S=!1,C=!1;function R(){if(x.length){if(w===!1){const I=r(x);if(I!==void 0)y.push(I);else return b.error=!0,!1}x.length=0}return!0}for(let I=0;I<m.length;I++){const O=m[I];if(!(O==="["||O==="]"))if(O===":"){if(S===!0&&(C=!0),!R())break;if(g++,y.push(":"),g>7){b.error=!0;break}I-1>=0&&m[I-1]===":"&&(S=!0);continue}else if(O==="%"){if(!R())break;w=!0}else{x.push(O);continue}}return x.length&&(w?b.zone=x.join(""):C?y.push(x.join("")):y.push(r(x))),b.address=y.join(""),b}function s(m){if(a(m,":")<2)return{host:m,isIPV6:!1};const g=i(m);if(g.error)return{host:m,isIPV6:!1};{let b=g.address,y=g.address;return g.zone&&(b+="%"+g.zone,y+="%25"+g.zone),{host:b,escapedHost:y,isIPV6:!0}}}function o(m,g){let b="",y=!0;const x=m.length;for(let w=0;w<x;w++){const S=m[w];S==="0"&&y?(w+1<=x&&m[w+1]===g||w+1===x)&&(b+=S,y=!1):(S===g?y=!0:y=!1,b+=S)}return b}function a(m,g){let b=0;for(let y=0;y<m.length;y++)m[y]===g&&b++;return b}const u=/^\.\.?\//u,l=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,f=/^\/?(?:.|\n)*?(?=\/|$)/u;function d(m){const g=[];for(;m.length;)if(m.match(u))m=m.replace(u,"");else if(m.match(l))m=m.replace(l,"/");else if(m.match(c))m=m.replace(c,"/"),g.pop();else if(m==="."||m==="..")m="";else{const b=m.match(f);if(b){const y=b[0];m=m.slice(y.length),g.push(y)}else throw new Error("Unexpected dot segment condition")}return g.join("")}function h(m,g){const b=g!==!0?escape:unescape;return m.scheme!==void 0&&(m.scheme=b(m.scheme)),m.userinfo!==void 0&&(m.userinfo=b(m.userinfo)),m.host!==void 0&&(m.host=b(m.host)),m.path!==void 0&&(m.path=b(m.path)),m.query!==void 0&&(m.query=b(m.query)),m.fragment!==void 0&&(m.fragment=b(m.fragment)),m}function p(m){const g=[];if(m.userinfo!==void 0&&(g.push(m.userinfo),g.push("@")),m.host!==void 0){let b=unescape(m.host);const y=n(b);if(y.isIPV4)b=y.host;else{const x=s(y.host);x.isIPV6===!0?b=`[${x.escapedHost}]`:b=m.host}g.push(b)}return(typeof m.port=="number"||typeof m.port=="string")&&(g.push(":"),g.push(String(m.port))),g.length?g.join(""):void 0}return Wj={recomposeAuthority:p,normalizeComponentEncoding:h,removeDotSegments:d,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},Wj}var Gj,m0e;function Szt(){if(m0e)return Gj;m0e=1;const e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(y){return typeof y.secure=="boolean"?y.secure:String(y.scheme).toLowerCase()==="wss"}function r(y){return y.host||(y.error=y.error||"HTTP URIs must have a host."),y}function i(y){const x=String(y.scheme).toLowerCase()==="https";return(y.port===(x?443:80)||y.port==="")&&(y.port=void 0),y.path||(y.path="/"),y}function s(y){return y.secure=n(y),y.resourceName=(y.path||"/")+(y.query?"?"+y.query:""),y.path=void 0,y.query=void 0,y}function o(y){if((y.port===(n(y)?443:80)||y.port==="")&&(y.port=void 0),typeof y.secure=="boolean"&&(y.scheme=y.secure?"wss":"ws",y.secure=void 0),y.resourceName){const[x,w]=y.resourceName.split("?");y.path=x&&x!=="/"?x:void 0,y.query=w,y.resourceName=void 0}return y.fragment=void 0,y}function a(y,x){if(!y.path)return y.error="URN can not be parsed",y;const w=y.path.match(t);if(w){const S=x.scheme||y.scheme||"urn";y.nid=w[1].toLowerCase(),y.nss=w[2];const C=`${S}:${x.nid||y.nid}`,R=b[C];y.path=void 0,R&&(y=R.parse(y,x))}else y.error=y.error||"URN can not be parsed.";return y}function u(y,x){const w=x.scheme||y.scheme||"urn",S=y.nid.toLowerCase(),C=`${w}:${x.nid||S}`,R=b[C];R&&(y=R.serialize(y,x));const I=y,O=y.nss;return I.path=`${S||x.nid}:${O}`,x.skipEscape=!0,I}function l(y,x){const w=y;return w.uuid=w.nss,w.nss=void 0,!x.tolerant&&(!w.uuid||!e.test(w.uuid))&&(w.error=w.error||"UUID is not valid."),w}function c(y){const x=y;return x.nss=(y.uuid||"").toLowerCase(),x}const f={scheme:"http",domainHost:!0,parse:r,serialize:i},d={scheme:"https",domainHost:f.domainHost,parse:r,serialize:i},h={scheme:"ws",domainHost:!0,parse:s,serialize:o},p={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},b={http:f,https:d,ws:h,wss:p,urn:{scheme:"urn",parse:a,serialize:u,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:l,serialize:c,skipNormalize:!0}};return Gj=b,Gj}var g0e;function Tzt(){if(g0e)return _3.exports;g0e=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:i}=Ezt(),s=Szt();function o(g,b){return typeof g=="string"?g=c(p(g,b),b):typeof g=="object"&&(g=p(c(g,b),b)),g}function a(g,b,y){const x=Object.assign({scheme:"null"},y),w=u(p(g,x),p(b,x),x,!0);return c(w,{...x,skipEscape:!0})}function u(g,b,y,x){const w={};return x||(g=p(c(g,y),y),b=p(c(b,y),y)),y=y||{},!y.tolerant&&b.scheme?(w.scheme=b.scheme,w.userinfo=b.userinfo,w.host=b.host,w.port=b.port,w.path=n(b.path||""),w.query=b.query):(b.userinfo!==void 0||b.host!==void 0||b.port!==void 0?(w.userinfo=b.userinfo,w.host=b.host,w.port=b.port,w.path=n(b.path||""),w.query=b.query):(b.path?(b.path.charAt(0)==="/"?w.path=n(b.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?w.path="/"+b.path:g.path?w.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+b.path:w.path=b.path,w.path=n(w.path)),w.query=b.query):(w.path=g.path,b.query!==void 0?w.query=b.query:w.query=g.query),w.userinfo=g.userinfo,w.host=g.host,w.port=g.port),w.scheme=g.scheme),w.fragment=b.fragment,w}function l(g,b,y){return typeof g=="string"?(g=unescape(g),g=c(i(p(g,y),!0),{...y,skipEscape:!0})):typeof g=="object"&&(g=c(i(g,!0),{...y,skipEscape:!0})),typeof b=="string"?(b=unescape(b),b=c(i(p(b,y),!0),{...y,skipEscape:!0})):typeof b=="object"&&(b=c(i(b,!0),{...y,skipEscape:!0})),g.toLowerCase()===b.toLowerCase()}function c(g,b){const y={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},x=Object.assign({},b),w=[],S=s[(x.scheme||y.scheme||"").toLowerCase()];S&&S.serialize&&S.serialize(y,x),y.path!==void 0&&(x.skipEscape?y.path=unescape(y.path):(y.path=escape(y.path),y.scheme!==void 0&&(y.path=y.path.split("%3A").join(":")))),x.reference!=="suffix"&&y.scheme&&w.push(y.scheme,":");const C=r(y);if(C!==void 0&&(x.reference!=="suffix"&&w.push("//"),w.push(C),y.path&&y.path.charAt(0)!=="/"&&w.push("/")),y.path!==void 0){let R=y.path;!x.absolutePath&&(!S||!S.absolutePath)&&(R=n(R)),C===void 0&&(R=R.replace(/^\/\//u,"/%2F")),w.push(R)}return y.query!==void 0&&w.push("?",y.query),y.fragment!==void 0&&w.push("#",y.fragment),w.join("")}const f=Array.from({length:127},(g,b)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(b)));function d(g){let b=0;for(let y=0,x=g.length;y<x;++y)if(b=g.charCodeAt(y),b>126||f[b])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p(g,b){const y=Object.assign({},b),x={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},w=g.indexOf("%")!==-1;let S=!1;y.reference==="suffix"&&(g=(y.scheme?y.scheme+":":"")+"//"+g);const C=g.match(h);if(C){if(x.scheme=C[1],x.userinfo=C[3],x.host=C[4],x.port=parseInt(C[5],10),x.path=C[6]||"",x.query=C[7],x.fragment=C[8],isNaN(x.port)&&(x.port=C[5]),x.host){const I=t(x.host);if(I.isIPV4===!1){const O=e(I.host);x.host=O.host.toLowerCase(),S=O.isIPV6}else x.host=I.host,S=!0}x.scheme===void 0&&x.userinfo===void 0&&x.host===void 0&&x.port===void 0&&!x.path&&x.query===void 0?x.reference="same-document":x.scheme===void 0?x.reference="relative":x.fragment===void 0?x.reference="absolute":x.reference="uri",y.reference&&y.reference!=="suffix"&&y.reference!==x.reference&&(x.error=x.error||"URI is not a "+y.reference+" reference.");const R=s[(y.scheme||x.scheme||"").toLowerCase()];if(!y.unicodeSupport&&(!R||!R.unicodeSupport)&&x.host&&(y.domainHost||R&&R.domainHost)&&S===!1&&d(x.host))try{x.host=URL.domainToASCII(x.host.toLowerCase())}catch(I){x.error=x.error||"Host's domain name can not be converted to ASCII: "+I}(!R||R&&!R.skipNormalize)&&(w&&x.scheme!==void 0&&(x.scheme=unescape(x.scheme)),w&&x.host!==void 0&&(x.host=unescape(x.host)),x.path&&x.path.length&&(x.path=escape(unescape(x.path))),x.fragment&&x.fragment.length&&(x.fragment=encodeURI(decodeURIComponent(x.fragment)))),R&&R.parse&&R.parse(x,y)}else x.error=x.error||"URI can not be parsed.";return x}const m={SCHEMES:s,normalize:o,resolve:a,resolveComponents:u,equal:l,serialize:c,parse:p};return _3.exports=m,_3.exports.default=m,_3.exports.fastUri=m,_3.exports}var y0e;function Czt(){if(y0e)return $5;y0e=1,Object.defineProperty($5,"__esModule",{value:!0});const e=Tzt();return e.code='require("ajv/dist/runtime/uri").default',$5.default=e,$5}var v0e;function Azt(){return v0e||(v0e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=E7();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Jr();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Jee(),i=S7(),s=V5e(),o=Zee(),a=Jr(),u=w7(),l=LO(),c=Ni(),f=_zt,d=Czt(),h=(X,W)=>new RegExp(X,W);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},b={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},y=200;function x(X){var W,te,q,J,oe,de,ce,pe,Ee,Ae,ge,me,Oe,Me,Ye,lt,We,nt,yt,_t,It,Et,Ke,Lt,sn;const Fe=X.strict,Qe=(W=X.code)===null||W===void 0?void 0:W.optimize,wt=Qe===!0||Qe===void 0?1:Qe||0,Vt=(q=(te=X.code)===null||te===void 0?void 0:te.regExp)!==null&&q!==void 0?q:h,Wt=(J=X.uriResolver)!==null&&J!==void 0?J:d.default;return{strictSchema:(de=(oe=X.strictSchema)!==null&&oe!==void 0?oe:Fe)!==null&&de!==void 0?de:!0,strictNumbers:(pe=(ce=X.strictNumbers)!==null&&ce!==void 0?ce:Fe)!==null&&pe!==void 0?pe:!0,strictTypes:(Ae=(Ee=X.strictTypes)!==null&&Ee!==void 0?Ee:Fe)!==null&&Ae!==void 0?Ae:"log",strictTuples:(me=(ge=X.strictTuples)!==null&&ge!==void 0?ge:Fe)!==null&&me!==void 0?me:"log",strictRequired:(Me=(Oe=X.strictRequired)!==null&&Oe!==void 0?Oe:Fe)!==null&&Me!==void 0?Me:!1,code:X.code?{...X.code,optimize:wt,regExp:Vt}:{optimize:wt,regExp:Vt},loopRequired:(Ye=X.loopRequired)!==null&&Ye!==void 0?Ye:y,loopEnum:(lt=X.loopEnum)!==null&&lt!==void 0?lt:y,meta:(We=X.meta)!==null&&We!==void 0?We:!0,messages:(nt=X.messages)!==null&&nt!==void 0?nt:!0,inlineRefs:(yt=X.inlineRefs)!==null&&yt!==void 0?yt:!0,schemaId:(_t=X.schemaId)!==null&&_t!==void 0?_t:"$id",addUsedSchema:(It=X.addUsedSchema)!==null&&It!==void 0?It:!0,validateSchema:(Et=X.validateSchema)!==null&&Et!==void 0?Et:!0,validateFormats:(Ke=X.validateFormats)!==null&&Ke!==void 0?Ke:!0,unicodeRegExp:(Lt=X.unicodeRegExp)!==null&&Lt!==void 0?Lt:!0,int32range:(sn=X.int32range)!==null&&sn!==void 0?sn:!0,uriResolver:Wt}}class w{constructor(W={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,W=this.opts={...W,...x(W)};const{es5:te,lines:q}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:te,lines:q}),this.logger=V(W.logger);const J=W.validateFormats;W.validateFormats=!1,this.RULES=(0,s.getRules)(),S.call(this,g,W,"NOT SUPPORTED"),S.call(this,b,W,"DEPRECATED","warn"),this._metaOpts=M.call(this),W.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),W.keywords&&O.call(this,W.keywords),typeof W.meta=="object"&&this.addMetaSchema(W.meta),R.call(this),W.validateFormats=J}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:W,meta:te,schemaId:q}=this.opts;let J=f;q==="id"&&(J={...f},J.id=J.$id,delete J.$id),te&&W&&this.addMetaSchema(J,J[q],!1)}defaultMeta(){const{meta:W,schemaId:te}=this.opts;return this.opts.defaultMeta=typeof W=="object"?W[te]||W:void 0}validate(W,te){let q;if(typeof W=="string"){if(q=this.getSchema(W),!q)throw new Error(`no schema with key or ref "${W}"`)}else q=this.compile(W);const J=q(te);return"$async"in q||(this.errors=q.errors),J}compile(W,te){const q=this._addSchema(W,te);return q.validate||this._compileSchemaEnv(q)}compileAsync(W,te){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:q}=this.opts;return J.call(this,W,te);async function J(Ae,ge){await oe.call(this,Ae.$schema);const me=this._addSchema(Ae,ge);return me.validate||de.call(this,me)}async function oe(Ae){Ae&&!this.getSchema(Ae)&&await J.call(this,{$ref:Ae},!0)}async function de(Ae){try{return this._compileSchemaEnv(Ae)}catch(ge){if(!(ge instanceof i.default))throw ge;return ce.call(this,ge),await pe.call(this,ge.missingSchema),de.call(this,Ae)}}function ce({missingSchema:Ae,missingRef:ge}){if(this.refs[Ae])throw new Error(`AnySchema ${Ae} is loaded but ${ge} cannot be resolved`)}async function pe(Ae){const ge=await Ee.call(this,Ae);this.refs[Ae]||await oe.call(this,ge.$schema),this.refs[Ae]||this.addSchema(ge,Ae,te)}async function Ee(Ae){const ge=this._loading[Ae];if(ge)return ge;try{return await(this._loading[Ae]=q(Ae))}finally{delete this._loading[Ae]}}}addSchema(W,te,q,J=this.opts.validateSchema){if(Array.isArray(W)){for(const de of W)this.addSchema(de,void 0,q,J);return this}let oe;if(typeof W=="object"){const{schemaId:de}=this.opts;if(oe=W[de],oe!==void 0&&typeof oe!="string")throw new Error(`schema ${de} must be string`)}return te=(0,u.normalizeId)(te||oe),this._checkUnique(te),this.schemas[te]=this._addSchema(W,q,te,J,!0),this}addMetaSchema(W,te,q=this.opts.validateSchema){return this.addSchema(W,te,!0,q),this}validateSchema(W,te){if(typeof W=="boolean")return!0;let q;if(q=W.$schema,q!==void 0&&typeof q!="string")throw new Error("$schema must be a string");if(q=q||this.opts.defaultMeta||this.defaultMeta(),!q)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const J=this.validate(q,W);if(!J&&te){const oe="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(oe);else throw new Error(oe)}return J}getSchema(W){let te;for(;typeof(te=C.call(this,W))=="string";)W=te;if(te===void 0){const{schemaId:q}=this.opts,J=new o.SchemaEnv({schema:{},schemaId:q});if(te=o.resolveSchema.call(this,J,W),!te)return;this.refs[W]=te}return te.validate||this._compileSchemaEnv(te)}removeSchema(W){if(W instanceof RegExp)return this._removeAllSchemas(this.schemas,W),this._removeAllSchemas(this.refs,W),this;switch(typeof W){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const te=C.call(this,W);return typeof te=="object"&&this._cache.delete(te.schema),delete this.schemas[W],delete this.refs[W],this}case"object":{const te=W;this._cache.delete(te);let q=W[this.opts.schemaId];return q&&(q=(0,u.normalizeId)(q),delete this.schemas[q],delete this.refs[q]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(W){for(const te of W)this.addKeyword(te);return this}addKeyword(W,te){let q;if(typeof W=="string")q=W,typeof te=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),te.keyword=q);else if(typeof W=="object"&&te===void 0){if(te=W,q=te.keyword,Array.isArray(q)&&!q.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(j.call(this,q,te),!te)return(0,c.eachItem)(q,oe=>z.call(this,oe)),this;ee.call(this,te);const J={...te,type:(0,l.getJSONTypes)(te.type),schemaType:(0,l.getJSONTypes)(te.schemaType)};return(0,c.eachItem)(q,J.type.length===0?oe=>z.call(this,oe,J):oe=>J.type.forEach(de=>z.call(this,oe,J,de))),this}getKeyword(W){const te=this.RULES.all[W];return typeof te=="object"?te.definition:!!te}removeKeyword(W){const{RULES:te}=this;delete te.keywords[W],delete te.all[W];for(const q of te.rules){const J=q.rules.findIndex(oe=>oe.keyword===W);J>=0&&q.rules.splice(J,1)}return this}addFormat(W,te){return typeof te=="string"&&(te=new RegExp(te)),this.formats[W]=te,this}errorsText(W=this.errors,{separator:te=", ",dataVar:q="data"}={}){return!W||W.length===0?"No errors":W.map(J=>`${q}${J.instancePath} ${J.message}`).reduce((J,oe)=>J+te+oe)}$dataMetaSchema(W,te){const q=this.RULES.all;W=JSON.parse(JSON.stringify(W));for(const J of te){const oe=J.split("/").slice(1);let de=W;for(const ce of oe)de=de[ce];for(const ce in q){const pe=q[ce];if(typeof pe!="object")continue;const{$data:Ee}=pe.definition,Ae=de[ce];Ee&&Ae&&(de[ce]=ue(Ae))}}return W}_removeAllSchemas(W,te){for(const q in W){const J=W[q];(!te||te.test(q))&&(typeof J=="string"?delete W[q]:J&&!J.meta&&(this._cache.delete(J.schema),delete W[q]))}}_addSchema(W,te,q,J=this.opts.validateSchema,oe=this.opts.addUsedSchema){let de;const{schemaId:ce}=this.opts;if(typeof W=="object")de=W[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof W!="boolean")throw new Error("schema must be object or boolean")}let pe=this._cache.get(W);if(pe!==void 0)return pe;q=(0,u.normalizeId)(de||q);const Ee=u.getSchemaRefs.call(this,W,q);return pe=new o.SchemaEnv({schema:W,schemaId:ce,meta:te,baseId:q,localRefs:Ee}),this._cache.set(pe.schema,pe),oe&&!q.startsWith("#")&&(q&&this._checkUnique(q),this.refs[q]=pe),J&&this.validateSchema(W,!0),pe}_checkUnique(W){if(this.schemas[W]||this.refs[W])throw new Error(`schema with key or id "${W}" already exists`)}_compileSchemaEnv(W){if(W.meta?this._compileMetaSchema(W):o.compileSchema.call(this,W),!W.validate)throw new Error("ajv implementation error");return W.validate}_compileMetaSchema(W){const te=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,W)}finally{this.opts=te}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function S(X,W,te,q="error"){for(const J in X){const oe=J;oe in W&&this.logger[q](`${te}: option ${J}. ${X[oe]}`)}}function C(X){return X=(0,u.normalizeId)(X),this.schemas[X]||this.refs[X]}function R(){const X=this.opts.schemas;if(X)if(Array.isArray(X))this.addSchema(X);else for(const W in X)this.addSchema(X[W],W)}function I(){for(const X in this.opts.formats){const W=this.opts.formats[X];W&&this.addFormat(X,W)}}function O(X){if(Array.isArray(X)){this.addVocabulary(X);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const W in X){const te=X[W];te.keyword||(te.keyword=W),this.addKeyword(te)}}function M(){const X={...this.opts};for(const W of p)delete X[W];return X}const L={log(){},warn(){},error(){}};function V(X){if(X===!1)return L;if(X===void 0)return console;if(X.log&&X.warn&&X.error)return X;throw new Error("logger must implement log, warn and error methods")}const D=/^[a-z_$][a-z0-9_$:-]*$/i;function j(X,W){const{RULES:te}=this;if((0,c.eachItem)(X,q=>{if(te.keywords[q])throw new Error(`Keyword ${q} is already defined`);if(!D.test(q))throw new Error(`Keyword ${q} has invalid name`)}),!!W&&W.$data&&!("code"in W||"validate"in W))throw new Error('$data keyword must have "code" or "validate" function')}function z(X,W,te){var q;const J=W==null?void 0:W.post;if(te&&J)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:oe}=this;let de=J?oe.post:oe.rules.find(({type:pe})=>pe===te);if(de||(de={type:te,rules:[]},oe.rules.push(de)),oe.keywords[X]=!0,!W)return;const ce={keyword:X,definition:{...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)}};W.before?G.call(this,de,ce,W.before):de.rules.push(ce),oe.all[X]=ce,(q=W.implements)===null||q===void 0||q.forEach(pe=>this.addKeyword(pe))}function G(X,W,te){const q=X.rules.findIndex(J=>J.keyword===te);q>=0?X.rules.splice(q,0,W):(X.rules.push(W),this.logger.warn(`rule ${te} is not defined`))}function ee(X){let{metaSchema:W}=X;W!==void 0&&(X.$data&&this.opts.$data&&(W=ue(W)),X.validateSchema=this.compile(W,!0))}const ne={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ue(X){return{anyOf:[X,ne]}}}(Bj)),Bj}var B5={},j5={},U5={},b0e;function kzt(){if(b0e)return U5;b0e=1,Object.defineProperty(U5,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return U5.default=e,U5}var bv={},x0e;function Rzt(){if(x0e)return bv;x0e=1,Object.defineProperty(bv,"__esModule",{value:!0}),bv.callRef=bv.getValidate=void 0;const e=S7(),t=K0(),n=Jr(),r=px(),i=Zee(),s=Ni(),o={keyword:"$ref",schemaType:"string",code(l){const{gen:c,schema:f,it:d}=l,{baseId:h,schemaEnv:p,validateName:m,opts:g,self:b}=d,{root:y}=p;if((f==="#"||f==="#/")&&h===y.baseId)return w();const x=i.resolveRef.call(b,y,h,f);if(x===void 0)throw new e.default(d.opts.uriResolver,h,f);if(x instanceof i.SchemaEnv)return S(x);return C(x);function w(){if(p===y)return u(l,m,p,p.$async);const R=c.scopeValue("root",{ref:y});return u(l,(0,n._)`${R}.validate`,y,y.$async)}function S(R){const I=a(l,R);u(l,I,R,R.$async)}function C(R){const I=c.scopeValue("schema",g.code.source===!0?{ref:R,code:(0,n.stringify)(R)}:{ref:R}),O=c.name("valid"),M=l.subschema({schema:R,dataTypes:[],schemaPath:n.nil,topSchemaRef:I,errSchemaPath:f},O);l.mergeEvaluated(M),l.ok(O)}}};function a(l,c){const{gen:f}=l;return c.validate?f.scopeValue("validate",{ref:c.validate}):(0,n._)`${f.scopeValue("wrapper",{ref:c})}.validate`}bv.getValidate=a;function u(l,c,f,d){const{gen:h,it:p}=l,{allErrors:m,schemaEnv:g,opts:b}=p,y=b.passContext?r.default.this:n.nil;d?x():w();function x(){if(!g.$async)throw new Error("async schema referenced by sync schema");const R=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(l,c,y)}`),C(c),m||h.assign(R,!0)},I=>{h.if((0,n._)`!(${I} instanceof ${p.ValidationError})`,()=>h.throw(I)),S(I),m||h.assign(R,!1)}),l.ok(R)}function w(){l.result((0,t.callValidateCode)(l,c,y),()=>C(c),()=>S(c))}function S(R){const I=(0,n._)`${R}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${I} : ${r.default.vErrors}.concat(${I})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function C(R){var I;if(!p.opts.unevaluated)return;const O=(I=f==null?void 0:f.validate)===null||I===void 0?void 0:I.evaluated;if(p.props!==!0)if(O&&!O.dynamicProps)O.props!==void 0&&(p.props=s.mergeEvaluated.props(h,O.props,p.props));else{const M=h.var("props",(0,n._)`${R}.evaluated.props`);p.props=s.mergeEvaluated.props(h,M,p.props,n.Name)}if(p.items!==!0)if(O&&!O.dynamicItems)O.items!==void 0&&(p.items=s.mergeEvaluated.items(h,O.items,p.items));else{const M=h.var("items",(0,n._)`${R}.evaluated.items`);p.items=s.mergeEvaluated.items(h,M,p.items,n.Name)}}}return bv.callRef=u,bv.default=o,bv}var _0e;function Izt(){if(_0e)return j5;_0e=1,Object.defineProperty(j5,"__esModule",{value:!0});const e=kzt(),t=Rzt(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return j5.default=n,j5}var z5={},V5={},w0e;function Pzt(){if(w0e)return V5;w0e=1,Object.defineProperty(V5,"__esModule",{value:!0});const e=Jr(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${n[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:u}=s;s.fail$data((0,e._)`${a} ${n[o].fail} ${u} || isNaN(${a})`)}};return V5.default=i,V5}var H5={},E0e;function Nzt(){if(E0e)return H5;E0e=1,Object.defineProperty(H5,"__esModule",{value:!0});const e=Jr(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,u=a.opts.multipleOfPrecision,l=i.let("res"),c=u?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${u}`:(0,e._)`${l} !== parseInt(${l})`;r.fail$data((0,e._)`(${o} === 0 || (${l} = ${s}/${o}, ${c}))`)}};return H5.default=n,H5}var q5={},W5={},S0e;function Dzt(){if(S0e)return W5;S0e=1,Object.defineProperty(W5,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,s;for(;i<n;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<n&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}return W5.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',W5}var T0e;function Ozt(){if(T0e)return q5;T0e=1,Object.defineProperty(q5,"__esModule",{value:!0});const e=Jr(),t=Ni(),n=Dzt(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:u,it:l}=s,c=o==="maxLength"?e.operators.GT:e.operators.LT,f=l.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${f} ${c} ${u}`)}};return q5.default=i,q5}var G5={},C0e;function Mzt(){if(C0e)return G5;C0e=1,Object.defineProperty(G5,"__esModule",{value:!0});const e=K0(),t=Jr(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:u,it:l}=i,c=l.opts.unicodeRegExp?"u":"",f=o?(0,t._)`(new RegExp(${u}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${f}.test(${s})`)}};return G5.default=r,G5}var Y5={},A0e;function Lzt(){if(A0e)return Y5;A0e=1,Object.defineProperty(Y5,"__esModule",{value:!0});const e=Jr(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return Y5.default=n,Y5}var K5={},k0e;function Fzt(){if(k0e)return K5;k0e=1,Object.defineProperty(K5,"__esModule",{value:!0});const e=K0(),t=Jr(),n=Ni(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:u,data:l,$data:c,it:f}=s,{opts:d}=f;if(!c&&a.length===0)return;const h=a.length>=d.loopRequired;if(f.allErrors?p():m(),d.strictRequired){const y=s.parentSchema.properties,{definedProperties:x}=s.it;for(const w of a)if((y==null?void 0:y[w])===void 0&&!x.has(w)){const S=f.schemaEnv.baseId+f.errSchemaPath,C=`required property "${w}" is not defined at "${S}" (strictRequired)`;(0,n.checkStrictMode)(f,C,f.opts.strictRequired)}}function p(){if(h||c)s.block$data(t.nil,g);else for(const y of a)(0,e.checkReportMissingProp)(s,y)}function m(){const y=o.let("missing");if(h||c){const x=o.let("valid",!0);s.block$data(x,()=>b(y,x)),s.ok(x)}else o.if((0,e.checkMissingProp)(s,a,y)),(0,e.reportMissingProp)(s,y),o.else()}function g(){o.forOf("prop",u,y=>{s.setParams({missingProperty:y}),o.if((0,e.noPropertyInData)(o,l,y,d.ownProperties),()=>s.error())})}function b(y,x){s.setParams({missingProperty:y}),o.forOf(y,u,()=>{o.assign(x,(0,e.propertyInData)(o,l,y,d.ownProperties)),o.if((0,t.not)(x),()=>{s.error(),o.break()})},t.nil)}}};return K5.default=i,K5}var X5={},R0e;function $zt(){if(R0e)return X5;R0e=1,Object.defineProperty(X5,"__esModule",{value:!0});const e=Jr(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return X5.default=n,X5}var Q5={},J5={},I0e;function ete(){if(I0e)return J5;I0e=1,Object.defineProperty(J5,"__esModule",{value:!0});const e=KY();return e.code='require("ajv/dist/runtime/equal").default',J5.default=e,J5}var P0e;function Bzt(){if(P0e)return Q5;P0e=1,Object.defineProperty(Q5,"__esModule",{value:!0});const e=LO(),t=Jr(),n=Ni(),r=ete(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:u,$data:l,schema:c,parentSchema:f,schemaCode:d,it:h}=o;if(!l&&!c)return;const p=a.let("valid"),m=f.items?(0,e.getSchemaTypes)(f.items):[];o.block$data(p,g,(0,t._)`${d} === false`),o.ok(p);function g(){const w=a.let("i",(0,t._)`${u}.length`),S=a.let("j");o.setParams({i:w,j:S}),a.assign(p,!0),a.if((0,t._)`${w} > 1`,()=>(b()?y:x)(w,S))}function b(){return m.length>0&&!m.some(w=>w==="object"||w==="array")}function y(w,S){const C=a.name("item"),R=(0,e.checkDataTypes)(m,C,h.opts.strictNumbers,e.DataType.Wrong),I=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${w}--;`,()=>{a.let(C,(0,t._)`${u}[${w}]`),a.if(R,(0,t._)`continue`),m.length>1&&a.if((0,t._)`typeof ${C} == "string"`,(0,t._)`${C} += "_"`),a.if((0,t._)`typeof ${I}[${C}] == "number"`,()=>{a.assign(S,(0,t._)`${I}[${C}]`),o.error(),a.assign(p,!1).break()}).code((0,t._)`${I}[${C}] = ${w}`)})}function x(w,S){const C=(0,n.useFunc)(a,r.default),R=a.name("outer");a.label(R).for((0,t._)`;${w}--;`,()=>a.for((0,t._)`${S} = ${w}; ${S}--;`,()=>a.if((0,t._)`${C}(${u}[${w}], ${u}[${S}])`,()=>{o.error(),a.assign(p,!1).break(R)})))}}};return Q5.default=s,Q5}var Z5={},N0e;function jzt(){if(N0e)return Z5;N0e=1,Object.defineProperty(Z5,"__esModule",{value:!0});const e=Jr(),t=Ni(),n=ete(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:u,schemaCode:l,schema:c}=s;u||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,n.default)}(${a}, ${l})`):s.fail((0,e._)`${c} !== ${a}`)}};return Z5.default=i,Z5}var eP={},D0e;function Uzt(){if(D0e)return eP;D0e=1,Object.defineProperty(eP,"__esModule",{value:!0});const e=Jr(),t=Ni(),n=ete(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:u,schema:l,schemaCode:c,it:f}=s;if(!u&&l.length===0)throw new Error("enum must have non-empty array");const d=l.length>=f.opts.loopEnum;let h;const p=()=>h??(h=(0,t.useFunc)(o,n.default));let m;if(d||u)m=o.let("valid"),s.block$data(m,g);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const y=o.const("vSchema",c);m=(0,e.or)(...l.map((x,w)=>b(y,w)))}s.pass(m);function g(){o.assign(m,!1),o.forOf("v",c,y=>o.if((0,e._)`${p()}(${a}, ${y})`,()=>o.assign(m,!0).break()))}function b(y,x){const w=l[x];return typeof w=="object"&&w!==null?(0,e._)`${p()}(${a}, ${y}[${x}])`:(0,e._)`${a} === ${w}`}}};return eP.default=i,eP}var O0e;function zzt(){if(O0e)return z5;O0e=1,Object.defineProperty(z5,"__esModule",{value:!0});const e=Pzt(),t=Nzt(),n=Ozt(),r=Mzt(),i=Lzt(),s=Fzt(),o=$zt(),a=Bzt(),u=jzt(),l=Uzt(),c=[e.default,t.default,n.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,l.default];return z5.default=c,z5}var tP={},hE={},M0e;function q5e(){if(M0e)return hE;M0e=1,Object.defineProperty(hE,"__esModule",{value:!0}),hE.validateAdditionalItems=void 0;const e=Jr(),t=Ni(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:u}=o;if(!Array.isArray(u)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,u)}};function i(s,o){const{gen:a,schema:u,data:l,keyword:c,it:f}=s;f.items=!0;const d=a.const("len",(0,e._)`${l}.length`);if(u===!1)s.setParams({len:o.length}),s.pass((0,e._)`${d} <= ${o.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(f,u)){const p=a.var("valid",(0,e._)`${d} <= ${o.length}`);a.if((0,e.not)(p),()=>h(p)),s.ok(p)}function h(p){a.forRange("i",o.length,d,m=>{s.subschema({keyword:c,dataProp:m,dataPropType:t.Type.Num},p),f.allErrors||a.if((0,e.not)(p),()=>a.break())})}}return hE.validateAdditionalItems=i,hE.default=r,hE}var nP={},pE={},L0e;function W5e(){if(L0e)return pE;L0e=1,Object.defineProperty(pE,"__esModule",{value:!0}),pE.validateTuple=void 0;const e=Jr(),t=Ni(),n=K0(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,n.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:u,parentSchema:l,data:c,keyword:f,it:d}=s;m(l),d.opts.unevaluated&&a.length&&d.items!==!0&&(d.items=t.mergeEvaluated.items(u,a.length,d.items));const h=u.name("valid"),p=u.const("len",(0,e._)`${c}.length`);a.forEach((g,b)=>{(0,t.alwaysValidSchema)(d,g)||(u.if((0,e._)`${p} > ${b}`,()=>s.subschema({keyword:f,schemaProp:b,dataProp:b},h)),s.ok(h))});function m(g){const{opts:b,errSchemaPath:y}=d,x=a.length,w=x===g.minItems&&(x===g.maxItems||g[o]===!1);if(b.strictTuples&&!w){const S=`"${f}" is ${x}-tuple, but minItems or maxItems/${o} are not specified or different at path "${y}"`;(0,t.checkStrictMode)(d,S,b.strictTuples)}}}return pE.validateTuple=i,pE.default=r,pE}var F0e;function Vzt(){if(F0e)return nP;F0e=1,Object.defineProperty(nP,"__esModule",{value:!0});const e=W5e(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return nP.default=t,nP}var rP={},$0e;function Hzt(){if($0e)return rP;$0e=1,Object.defineProperty(rP,"__esModule",{value:!0});const e=Jr(),t=Ni(),n=K0(),r=q5e(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:u,it:l}=o,{prefixItems:c}=u;l.items=!0,!(0,t.alwaysValidSchema)(l,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,n.validateArray)(o)))}};return rP.default=s,rP}var iP={},B0e;function qzt(){if(B0e)return iP;B0e=1,Object.defineProperty(iP,"__esModule",{value:!0});const e=Jr(),t=Ni(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:u,it:l}=i;let c,f;const{minContains:d,maxContains:h}=a;l.opts.next?(c=d===void 0?1:d,f=h):c=1;const p=s.const("len",(0,e._)`${u}.length`);if(i.setParams({min:c,max:f}),f===void 0&&c===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&c>f){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(l,o)){let x=(0,e._)`${p} >= ${c}`;f!==void 0&&(x=(0,e._)`${x} && ${p} <= ${f}`),i.pass(x);return}l.items=!0;const m=s.name("valid");f===void 0&&c===1?b(m,()=>s.if(m,()=>s.break())):c===0?(s.let(m,!0),f!==void 0&&s.if((0,e._)`${u}.length > 0`,g)):(s.let(m,!1),g()),i.result(m,()=>i.reset());function g(){const x=s.name("_valid"),w=s.let("count",0);b(x,()=>s.if(x,()=>y(w)))}function b(x,w){s.forRange("i",0,p,S=>{i.subschema({keyword:"contains",dataProp:S,dataPropType:t.Type.Num,compositeRule:!0},x),w()})}function y(x){s.code((0,e._)`${x}++`),f===void 0?s.if((0,e._)`${x} >= ${c}`,()=>s.assign(m,!0).break()):(s.if((0,e._)`${x} > ${f}`,()=>s.assign(m,!1).break()),c===1?s.assign(m,!0):s.if((0,e._)`${x} >= ${c}`,()=>s.assign(m,!0)))}}};return iP.default=r,iP}var Yj={},j0e;function Wzt(){return j0e||(j0e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Jr(),n=Ni(),r=K0();e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const b of m)(0,r.checkReportMissingProp)(u,b)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i}(Yj)),Yj}var sP={},U0e;function Gzt(){if(U0e)return sP;U0e=1,Object.defineProperty(sP,"__esModule",{value:!0});const e=Jr(),t=Ni(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:u}=i;if((0,t.alwaysValidSchema)(u,o))return;const l=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},l),s.if((0,e.not)(l),()=>{i.error(!0),u.allErrors||s.break()})}),i.ok(l)}};return sP.default=r,sP}var oP={},z0e;function G5e(){if(z0e)return oP;z0e=1,Object.defineProperty(oP,"__esModule",{value:!0});const e=K0(),t=Jr(),n=px(),r=Ni(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:u,parentSchema:l,data:c,errsCount:f,it:d}=o;if(!f)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=d;if(d.props=!0,p.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(d,u))return;const m=(0,e.allSchemaProperties)(l.properties),g=(0,e.allSchemaProperties)(l.patternProperties);b(),o.ok((0,t._)`${f} === ${n.default.errors}`);function b(){a.forIn("key",c,C=>{!m.length&&!g.length?w(C):a.if(y(C),()=>w(C))})}function y(C){let R;if(m.length>8){const I=(0,r.schemaRefOrVal)(d,l.properties,"properties");R=(0,e.isOwnProperty)(a,I,C)}else m.length?R=(0,t.or)(...m.map(I=>(0,t._)`${C} === ${I}`)):R=t.nil;return g.length&&(R=(0,t.or)(R,...g.map(I=>(0,t._)`${(0,e.usePattern)(o,I)}.test(${C})`))),(0,t.not)(R)}function x(C){a.code((0,t._)`delete ${c}[${C}]`)}function w(C){if(p.removeAdditional==="all"||p.removeAdditional&&u===!1){x(C);return}if(u===!1){o.setParams({additionalProperty:C}),o.error(),h||a.break();return}if(typeof u=="object"&&!(0,r.alwaysValidSchema)(d,u)){const R=a.name("valid");p.removeAdditional==="failing"?(S(C,R,!1),a.if((0,t.not)(R),()=>{o.reset(),x(C)})):(S(C,R),h||a.if((0,t.not)(R),()=>a.break()))}}function S(C,R,I){const O={keyword:"additionalProperties",dataProp:C,dataPropType:r.Type.Str};I===!1&&Object.assign(O,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(O,R)}}};return oP.default=s,oP}var aP={},V0e;function Yzt(){if(V0e)return aP;V0e=1,Object.defineProperty(aP,"__esModule",{value:!0});const e=E7(),t=K0(),n=Ni(),r=G5e(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:u,data:l,it:c}=s;c.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const f=(0,t.allSchemaProperties)(a);for(const g of f)c.definedProperties.add(g);c.opts.unevaluated&&f.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(f),c.props));const d=f.filter(g=>!(0,n.alwaysValidSchema)(c,a[g]));if(d.length===0)return;const h=o.name("valid");for(const g of d)p(g)?m(g):(o.if((0,t.propertyInData)(o,l,g,c.opts.ownProperties)),m(g),c.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(g),s.ok(h);function p(g){return c.opts.useDefaults&&!c.compositeRule&&a[g].default!==void 0}function m(g){s.subschema({keyword:"properties",schemaProp:g,dataProp:g},h)}}};return aP.default=i,aP}var uP={},H0e;function Kzt(){if(H0e)return uP;H0e=1,Object.defineProperty(uP,"__esModule",{value:!0});const e=K0(),t=Jr(),n=Ni(),r=Ni(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:u,parentSchema:l,it:c}=s,{opts:f}=c,d=(0,e.allSchemaProperties)(a),h=d.filter(w=>(0,n.alwaysValidSchema)(c,a[w]));if(d.length===0||h.length===d.length&&(!c.opts.unevaluated||c.props===!0))return;const p=f.strictSchema&&!f.allowMatchingProperties&&l.properties,m=o.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:g}=c;b();function b(){for(const w of d)p&&y(w),c.allErrors?x(w):(o.var(m,!0),x(w),o.if(m))}function y(w){for(const S in p)new RegExp(w).test(S)&&(0,n.checkStrictMode)(c,`property ${S} matches pattern ${w} (use allowMatchingProperties)`)}function x(w){o.forIn("key",u,S=>{o.if((0,t._)`${(0,e.usePattern)(s,w)}.test(${S})`,()=>{const C=h.includes(w);C||s.subschema({keyword:"patternProperties",schemaProp:w,dataProp:S,dataPropType:r.Type.Str},m),c.opts.unevaluated&&g!==!0?o.assign((0,t._)`${g}[${S}]`,!0):!C&&!c.allErrors&&o.if((0,t.not)(m),()=>o.break())})})}}};return uP.default=i,uP}var lP={},q0e;function Xzt(){if(q0e)return lP;q0e=1,Object.defineProperty(lP,"__esModule",{value:!0});const e=Ni(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:s}=n;if((0,e.alwaysValidSchema)(s,i)){n.fail();return}const o=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),n.failResult(o,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return lP.default=t,lP}var cP={},W0e;function Qzt(){if(W0e)return cP;W0e=1,Object.defineProperty(cP,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:K0().validateUnion,error:{message:"must match a schema in anyOf"}};return cP.default=t,cP}var fP={},G0e;function Jzt(){if(G0e)return fP;G0e=1,Object.defineProperty(fP,"__esModule",{value:!0});const e=Jr(),t=Ni(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:u}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(u.opts.discriminator&&a.discriminator)return;const l=o,c=s.let("valid",!1),f=s.let("passing",null),d=s.name("_valid");i.setParams({passing:f}),s.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){l.forEach((p,m)=>{let g;(0,t.alwaysValidSchema)(u,p)?s.var(d,!0):g=i.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},d),m>0&&s.if((0,e._)`${d} && ${c}`).assign(c,!1).assign(f,(0,e._)`[${f}, ${m}]`).else(),s.if(d,()=>{s.assign(c,!0),s.assign(f,m),g&&i.mergeEvaluated(g,e.Name)})})}}};return fP.default=r,fP}var dP={},Y0e;function Zzt(){if(Y0e)return dP;Y0e=1,Object.defineProperty(dP,"__esModule",{value:!0});const e=Ni(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,u)=>{if((0,e.alwaysValidSchema)(s,a))return;const l=n.subschema({keyword:"allOf",schemaProp:u},o);n.ok(o),n.mergeEvaluated(l)})}};return dP.default=t,dP}var hP={},K0e;function eVt(){if(K0e)return hP;K0e=1,Object.defineProperty(hP,"__esModule",{value:!0});const e=Jr(),t=Ni(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:u}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const l=i(u,"then"),c=i(u,"else");if(!l&&!c)return;const f=o.let("valid",!0),d=o.name("_valid");if(h(),s.reset(),l&&c){const m=o.let("ifClause");s.setParams({ifClause:m}),o.if(d,p("then",m),p("else",m))}else l?o.if(d,p("then")):o.if((0,e.not)(d),p("else"));s.pass(f,()=>s.error(!0));function h(){const m=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);s.mergeEvaluated(m)}function p(m,g){return()=>{const b=s.subschema({keyword:m},d);o.assign(f,d),s.mergeValidEvaluated(b,f),g?o.assign(g,(0,e._)`${m}`):s.setParams({ifClause:m})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return hP.default=r,hP}var pP={},X0e;function tVt(){if(X0e)return pP;X0e=1,Object.defineProperty(pP,"__esModule",{value:!0});const e=Ni(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return pP.default=t,pP}var Q0e;function nVt(){if(Q0e)return tP;Q0e=1,Object.defineProperty(tP,"__esModule",{value:!0});const e=q5e(),t=Vzt(),n=W5e(),r=Hzt(),i=qzt(),s=Wzt(),o=Gzt(),a=G5e(),u=Yzt(),l=Kzt(),c=Xzt(),f=Qzt(),d=Jzt(),h=Zzt(),p=eVt(),m=tVt();function g(b=!1){const y=[c.default,f.default,d.default,h.default,p.default,m.default,o.default,a.default,s.default,u.default,l.default];return b?y.push(t.default,r.default):y.push(e.default,n.default),y.push(i.default),y}return tP.default=g,tP}var mP={},gP={},J0e;function rVt(){if(J0e)return gP;J0e=1,Object.defineProperty(gP,"__esModule",{value:!0});const e=Jr(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:u,schemaCode:l,it:c}=r,{opts:f,errSchemaPath:d,schemaEnv:h,self:p}=c;if(!f.validateFormats)return;a?m():g();function m(){const b=s.scopeValue("formats",{ref:p.formats,code:f.code.formats}),y=s.const("fDef",(0,e._)`${b}[${l}]`),x=s.let("fType"),w=s.let("format");s.if((0,e._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>s.assign(x,(0,e._)`${y}.type || "string"`).assign(w,(0,e._)`${y}.validate`),()=>s.assign(x,(0,e._)`"string"`).assign(w,y)),r.fail$data((0,e.or)(S(),C()));function S(){return f.strictSchema===!1?e.nil:(0,e._)`${l} && !${w}`}function C(){const R=h.$async?(0,e._)`(${y}.async ? await ${w}(${o}) : ${w}(${o}))`:(0,e._)`${w}(${o})`,I=(0,e._)`(typeof ${w} == "function" ? ${R} : ${w}.test(${o}))`;return(0,e._)`${w} && ${w} !== true && ${x} === ${i} && !${I}`}}function g(){const b=p.formats[u];if(!b){S();return}if(b===!0)return;const[y,x,w]=C(b);y===i&&r.pass(R());function S(){if(f.strictSchema===!1){p.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${u}" ignored in schema at path "${d}"`}}function C(I){const O=I instanceof RegExp?(0,e.regexpCode)(I):f.code.formats?(0,e._)`${f.code.formats}${(0,e.getProperty)(u)}`:void 0,M=s.scopeValue("formats",{key:u,ref:I,code:O});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,e._)`${M}.validate`]:["string",I,M]}function R(){if(typeof b=="object"&&!(b instanceof RegExp)&&b.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${w}(${o})`}return typeof x=="function"?(0,e._)`${w}(${o})`:(0,e._)`${w}.test(${o})`}}}};return gP.default=n,gP}var Z0e;function iVt(){if(Z0e)return mP;Z0e=1,Object.defineProperty(mP,"__esModule",{value:!0});const t=[rVt().default];return mP.default=t,mP}var t_={},eme;function sVt(){return eme||(eme=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.contentVocabulary=t_.metadataVocabulary=void 0,t_.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t_.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),t_}var tme;function oVt(){if(tme)return B5;tme=1,Object.defineProperty(B5,"__esModule",{value:!0});const e=Izt(),t=zzt(),n=nVt(),r=iVt(),i=sVt(),s=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return B5.default=s,B5}var yP={},w3={},nme;function aVt(){if(nme)return w3;nme=1,Object.defineProperty(w3,"__esModule",{value:!0}),w3.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(w3.DiscrError=e={})),w3}var rme;function uVt(){if(rme)return yP;rme=1,Object.defineProperty(yP,"__esModule",{value:!0});const e=Jr(),t=aVt(),n=Zee(),r=S7(),i=Ni(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:u}})=>a===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:a,tag:u,tagName:l}})=>(0,e._)`{error: ${a}, tag: ${l}, tagValue: ${u}}`},code(a){const{gen:u,data:l,schema:c,parentSchema:f,it:d}=a,{oneOf:h}=f;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const m=u.let("valid",!1),g=u.const("tag",(0,e._)`${l}${(0,e.getProperty)(p)}`);u.if((0,e._)`typeof ${g} == "string"`,()=>b(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:g,tagName:p})),a.ok(m);function b(){const w=x();u.if(!1);for(const S in w)u.elseIf((0,e._)`${g} === ${S}`),u.assign(m,y(w[S]));u.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:g,tagName:p}),u.endIf()}function y(w){const S=u.name("valid"),C=a.subschema({keyword:"oneOf",schemaProp:w},S);return a.mergeEvaluated(C,e.Name),S}function x(){var w;const S={},C=I(f);let R=!0;for(let L=0;L<h.length;L++){let V=h[L];if(V!=null&&V.$ref&&!(0,i.schemaHasRulesButRef)(V,d.self.RULES)){const j=V.$ref;if(V=n.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,j),V instanceof n.SchemaEnv&&(V=V.schema),V===void 0)throw new r.default(d.opts.uriResolver,d.baseId,j)}const D=(w=V==null?void 0:V.properties)===null||w===void 0?void 0:w[p];if(typeof D!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);R=R&&(C||I(V)),O(D,L)}if(!R)throw new Error(`discriminator: "${p}" must be required`);return S;function I({required:L}){return Array.isArray(L)&&L.includes(p)}function O(L,V){if(L.const)M(L.const,V);else if(L.enum)for(const D of L.enum)M(D,V);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function M(L,V){if(typeof L!="string"||L in S)throw new Error(`discriminator: "${p}" values must be unique strings`);S[L]=V}}}};return yP.default=o,yP}const lVt="http://json-schema.org/draft-07/schema#",cVt="http://json-schema.org/draft-07/schema#",fVt="Core schema meta-schema",dVt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},hVt=["object","boolean"],pVt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},mVt={$schema:lVt,$id:cVt,title:fVt,definitions:dVt,type:hVt,properties:pVt,default:!0};var ime;function gVt(){return ime||(ime=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Azt(),r=oVt(),i=uVt(),s=mVt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=E7();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Jr();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Jee();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=S7();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(O5,O5.exports)),O5.exports}var yVt=gVt();const tte=gc(yVt),vVt="#/definitions/StudyConfig",bVt="http://json-schema.org/draft-07/schema#",xVt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.1/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"importedLibraries":{"description":"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.","items":{"type":"string"},"type":"array"},"sequence":{"$ref":"#/definitions/ComponentBlock","description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"sidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. Defaults to false.","type":"boolean"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.","type":"number"},"participantNameField":{"description":"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response \'prolificId\' from the task \'introduction\' to be the name, this field would be \'introduction.prolificId\'","type":"string"},"recordStudyAudio":{"description":"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.","type":"boolean"},"sidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"timeoutReject":{"description":"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.","type":"boolean"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"}},"required":["contactEmail","logoPath","withProgressBar","sidebar"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),_Vt={$ref:vVt,$schema:bVt,definitions:xVt},wVt="#/definitions/GlobalConfig",EVt="http://json-schema.org/draft-07/schema#",SVt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},TVt={$ref:wVt,$schema:EVt,definitions:SVt},CVt="#/definitions/LibraryConfig",AVt="http://json-schema.org/draft-07/schema#",kVt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LibraryConfig":{"additionalProperties":false,"description":"LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\\n\\nBelow is the general template that should be followed when constructing a Library configuration file.\\n\\n```js {  \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.1/src/parser/LibraryConfigSchema.json\\",  \\"baseComponents\\": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  \\"components\\": {    // Components here are defined exactly as is in the StudyConfig  },  \\"sequences\\": {   // Sequences here are defined as \\"key\\": \\"value\\" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"description":{"description":"A description of the library.","type":"string"},"doi":{"description":"The DOI of the paper where the content of the library is based on.","type":"string"},"externalLink":{"description":"The external link to the paper/website where the content of the library is based on.","type":"string"},"reference":{"description":"The reference to the paper where the content of the library is based on.","type":"string"},"sequences":{"additionalProperties":{"$ref":"#/definitions/ComponentBlock"},"description":"The order of the components in the study. This might include some randomness.","type":"object"}},"required":["$schema","description","components","sequences"],"type":"object"},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),RVt={$ref:CVt,$schema:AVt,definitions:kVt},Y5e=new tte;Y5e.addSchema(RVt);const IVt=Y5e.getSchema("#/definitions/LibraryConfig");function K5e(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?K5e(n,t):`$${t}.components.${n}`)}}function X5e(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return X5e(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=K5e(l,a),l}return r})}}function PVt(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;ZT(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function NVt(e,t){let n=!1,r;try{r=JSON.parse(e),n=IVt(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function DVt(e){const t=await(await fetch(`${Uu}libraries/${e}/config.json`)).text();return NVt(t,e)}async function OVt(e,t,n){const r=e.map(async s=>{const o=await DVt(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(ZT(a)){const u=gSe.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const Q5e=new tte;Q5e.addSchema(TVt);const sme=Q5e.getSchema("#/definitions/GlobalConfig"),J5e=new tte;J5e.addSchema(_Vt);const ome=J5e.getSchema("#/definitions/StudyConfig");function MVt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function LVt(e){const t=JSON.parse(e),n=sme(t),r=MVt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...sme.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function Z5e(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):Z5e(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function FVt(e,t){const n=[],r=[];PVt(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;ZT(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=dwe(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return Z5e(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function nte(e){let t=!1,n;try{n=JSON.parse(e),t=ome(n)}catch{t=!1}let r=ome.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await OVt(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=X5e(n.sequence,o,r);const{errors:a,warnings:u}=FVt(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function $Vt(e){const t=await(await fetch(`${Uu}${e}`)).text();return await nte(t)}async function rte(e,t){const n=t.configsList.find(r=>M1e(r)===e);if(n){const r=t.configs[n];return await $Vt(`${r.path}`)}return null}async function BVt(e){const t={},n=e.configsList.map(async i=>rte(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function jVt({globalConfig:e}){const t=Vw(),[n,r]=B.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";B.useEffect(()=>{if(t!=="__revisit-widget")return rte(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&nte(m.data.payload).then(async g=>{r(g);const b=await qpe(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:b},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=B.useState([]),[a,u]=B.useState(null),{storageEngine:l}=Ko(),[c]=D1(),f=B.useMemo(()=>c.get("participantId"),[c]);B.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await qpe(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,b=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(I=>""),x=y instanceof Response?await y.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:x.ip},S=await l.initializeParticipantSession(t,b,n,w,f||g),C=await l.getModes(t),R=await mat(t,n,S.sequence,w,S.answers,C,S.participantId);u(R),o([{element:A.jsx(ozt,{}),children:[{path:"/",element:A.jsx(N5e,{to:u0(0),replace:!0})},{path:"/:index",element:n.errors.length>0?A.jsxs(A.Fragment,{children:[A.jsx(co,{order:2,mb:8,children:"Error loading config"}),A.jsx(PP,{issues:n.errors,type:"error"})]}):A.jsx(AUt,{})}]}])}p()},[l,n,t,c,f]);const d=x1e(s);let h=null;return i?s.length===0?h=A.jsx(oh,{visible:!0}):h=d&&a?A.jsx(gwe.Provider,{value:a,children:A.jsx(mot,{store:a.store,children:d})}):A.jsx(vb,{}):h=A.jsx(vb,{}),h}function t8({studyIds:e}){const t=F0(),{studyId:n}=ig(),r=hp(),i=e.map(o=>({value:o,label:o})).sort((o,a)=>o.label.localeCompare(a.label)),s=r.pathname.includes("analysis");return A.jsx(hs.Header,{p:"md",children:A.jsxs(Mm,{mt:-7,align:"center",children:[A.jsx(Mm.Col,{span:6,children:A.jsxs(An,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[A.jsx(Wb,{w:40,src:`${Uu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),A.jsx(eh,{w:"md"}),A.jsx(co,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),A.jsx(Mm.Col,{span:6,children:A.jsxs(An,{justify:"flex-end",direction:"row",children:[s&&A.jsxs(A.Fragment,{children:[A.jsx(AT,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),A.jsx(In,{component:"a",href:`${Uu}${n}`,target:"_blank",leftSection:A.jsx(I1e,{}),mr:"sm",children:"Go to Study"})]}),A.jsx(N1e,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function ePe({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=hq(!1),[a,u]=B.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;uX(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return A.jsxs(A.Fragment,{children:[A.jsxs(Js,{style:{gap:n},children:[A.jsx(Ys,{label:"Download all participants data as JSON",children:A.jsx(In,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:A.jsx(Qze,{})})}),A.jsx(Ys,{label:"Download all participants data as a tidy CSV",children:A.jsx(In,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:A.jsx(D1e,{})})})]}),i&&a.length>0&&A.jsx(C_t,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function UVt({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?A.jsx(zn.Td,{children:A.jsx(El,{miw:100,children:e.timedOut?A.jsx(At,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>A.jsxs(je,{children:[A.jsxs(At,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?A.jsx(At,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):A.jsx(At,{span:!0,children:n})]},`cell-${t}`))})}):A.jsx(zn.Td,{children:"N/A"})}function ame({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=cTe(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?A.jsxs(zn.Td,{children:[t.toFixed(1)," ","s",n&&A.jsxs(A.Fragment,{children:[A.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):A.jsx(zn.Td,{children:"N/A"})}function zVt(e){const{metaData:t}=e;return A.jsx(zn.Td,{children:A.jsx(qW,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:A.jsxs(El,{gap:"xs",children:[A.jsxs(je,{children:["IP:"," ",t.ip]}),A.jsxs(je,{children:["Language:"," ",t.language]}),A.jsxs(je,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),A.jsxs(je,{children:["User Agent:"," ",t.userAgent]})]})})})}function VVt({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=Ko(),{studyId:i}=ig(),{user:s}=qT(),o=async(w,S)=>{if(r&&i)if(s.isAdmin){const C=S===""?"Rejected by admin":S;await r.rejectParticipant(i,w,C),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=B.useState([]),[l,c]=B.useState(!1),[f,d]=B.useState(!1),[h,p]=B.useState(""),m=async()=>{c(!0),d(!1);const w=a.map(async S=>await o(S,h));await Promise.all(w),u([]),await n(),c(!1)};function g(w){w==="all"?a.length===e.length?u([]):u(e.map(S=>S.participantId)):a.includes(w)?u(a.filter(S=>S!==w)):u([...a,w])}const b=mwe(t.sequence),y=[A.jsx(zn.Th,{children:A.jsx(An,{justify:"center",children:A.jsx(ic,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),A.jsx(zn.Th,{children:"ID"},"ID"),A.jsx(zn.Th,{children:"Status"},"status"),A.jsx(zn.Th,{children:"Tags"},"tags"),A.jsx(zn.Th,{children:"Meta"},"meta"),...b.flatMap(w=>[A.jsx(zn.Th,{children:w.componentName},`header-${w.componentName}-${w.timesSeenInBlock}`),A.jsxs(zn.Th,{children:[A.jsx("span",{style:{whiteSpace:"nowrap"},children:w.componentName})," ","Duration (clean)"]},`header-${w.componentName}-${w.timesSeenInBlock}-duration`)]),A.jsx(zn.Th,{children:"Total Duration (clean)"},"total-duration")],x=e.map(w=>A.jsxs(zn.Tr,{children:[A.jsx(zn.Td,{children:A.jsx(An,{justify:"center",children:A.jsx(ic,{mb:-4,checked:a.includes(w.participantId),onChange:()=>g(w.participantId)})})}),A.jsx(zn.Td,{style:{whiteSpace:"nowrap"},children:w.participantId}),A.jsx(zn.Td,{children:A.jsxs(An,{direction:"column",miw:100,children:[A.jsxs(An,{direction:"row",align:"center",children:[w.rejected?A.jsx(Ys,{label:"Rejected",children:A.jsx(vR,{size:16,color:"red",style:{marginBottom:-3}})}):w.completed?A.jsx(Ys,{label:"Completed",children:A.jsx(v9,{size:16,color:"teal",style:{marginBottom:-3}})}):A.jsx(Ys,{label:"In Progress",children:A.jsx(P1e,{size:16,color:"orange",style:{marginBottom:-3}})}),!w.completed&&A.jsxs(At,{size:"sm",mb:-1,ml:4,children:[(Object.entries(w.answers).filter(([S,C])=>C.endTime!==-1&&C.endTime!==void 0).length/(k0(w.sequence).length-1)*100).toFixed(2),"%"]})]}),w.rejected&&A.jsx(At,{mt:5,fz:10,children:w.rejected.reason})]})}),A.jsx(zn.Td,{children:A.jsx(An,{direction:"column",miw:100,children:(w.participantTags||[]).map(S=>A.jsxs(At,{fz:10,children:["-"," ",S]},`tag-${S}`))})}),w.metadata?A.jsx(zVt,{metaData:w.metadata}):A.jsx(zn.Td,{children:"N/A"}),b.map(S=>{const C=zY(w.sequence,S.orderPath),R=C&&Object.entries(w.answers).sort((I,O)=>{const M=parseInt(I[0].slice(I[0].lastIndexOf("_")+1),10),L=parseInt(O[0].slice(O[0].lastIndexOf("_")+1),10);return M-L}).filter(([I])=>{const O=I.slice(0,I.lastIndexOf("_")),M=parseInt(I.slice(I.lastIndexOf("_")+1),10);return O===S.componentName&&M<=C[0].lastIndex&&M>=C[0].firstIndex});return R!==null&&R.length>=S.timesSeenInBlock+1&&R[S.timesSeenInBlock][1].endTime!==-1?A.jsxs(sr.Fragment,{children:[A.jsx(UVt,{cellData:R[S.timesSeenInBlock][1]}),A.jsx(ame,{cellData:R[S.timesSeenInBlock][1]})]},`cellgroup-${w.participantId}-${S.componentName}-${S.timesSeenInBlock}`):A.jsxs(sr.Fragment,{children:[A.jsx(zn.Td,{children:"N/A"}),A.jsx(zn.Td,{children:"N/A"})]},`cellgroup-${w.participantId}-${S.componentName}-${S.timesSeenInBlock}`)}),A.jsx(ame,{cellData:{startTime:Math.min(...Object.values(w.answers).filter(S=>S.endTime!==-1&&S.endTime!==void 0).map(S=>S.startTime)),endTime:Math.max(...Object.values(w.answers).filter(S=>S.endTime!==-1&&S.endTime!==void 0).map(S=>S.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(w.answers).flatMap(S=>S.windowEvents),timedOut:!1}},`cell-${w.participantId}-total-duration`)]},w.participantId));return e.length>0?A.jsxs(A.Fragment,{children:[A.jsx(oh,{visible:l,overlayProps:{blur:2}}),A.jsxs(An,{justify:"space-between",mb:8,p:8,children:[A.jsx(Js,{children:A.jsx(AT,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(w=>w.participantId))],searchable:!0,value:null,leftSection:A.jsx(fVe,{size:14}),onChange:w=>w&&g(w)})}),A.jsxs(Js,{children:[A.jsx(ePe,{visibleParticipants:e,studyId:i||""}),A.jsxs(In,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),A.jsx(An,{direction:"column",style:{width:"100%",overflow:"auto"},children:A.jsxs(zn,{striped:!0,withTableBorder:!0,children:[A.jsx(zn.Thead,{children:A.jsx(zn.Tr,{children:y})}),A.jsx(zn.Tbody,{children:x})]})}),A.jsxs(Eo,{opened:f,onClose:()=>d(!1),title:A.jsxs(At,{children:["Reject Participants (",a.length,")"]}),children:[A.jsx(Fy,{label:"Please enter the reason for rejection.",onChange:w=>p(w.target.value)}),A.jsxs(An,{mt:"sm",justify:"right",children:[A.jsx(In,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),A.jsx(In,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):A.jsxs(A.Fragment,{children:[A.jsx(eh,{h:"xl"}),A.jsx(An,{justify:"center",align:"center",children:A.jsx(At,{children:"No data available"})})]})}function HVt({studyId:e,refresh:t}){const[n,r]=B.useState(!1),[i,s]=B.useState(!1),[o,a]=B.useState(!1),[u,l]=B.useState(!1),[c,f]=B.useState(""),[d,h]=B.useState([]),[p,m]=B.useState(""),[g,b]=B.useState(""),[y,x]=B.useState(!1),[w,S]=B.useState(!1),{storageEngine:C}=Ko(),R=C,I=B.useCallback(async()=>{S(!0);const X=await R.getSnapshots(e);h(X),S(!1)},[R,e]);B.useEffect(()=>{I()},[I]);const O=async(X,...W)=>{x(!0);const te=await X(...W);te.status==="SUCCESS"?(I(),x(!1),await t(),te.notifications&&te.notifications.forEach(q=>{O4(q)})):(x(!1),O4({title:te.error.title,message:te.error.message,color:"red"}))},M=async()=>{await O(R.createSnapshot.bind(R),e,!1)},L=async()=>{m(""),r(!1),await O(R.createSnapshot.bind(R),e,!0)},V=async()=>{a(!1),await O(R.renameSnapshot.bind(R),c,g)},D=async X=>{await O(R.restoreSnapshot.bind(R),e,X)},j=async()=>{m(""),s(!1),await O(R.removeSnapshotOrLive.bind(R),c,!0)},z=async()=>{m(""),l(!1),await O(R.removeSnapshotOrLive.bind(R),e,!0)},G=()=>Zne({title:"Create a Snapshot",children:A.jsx(At,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>M()}),ee=X=>Zne({title:"Restore Snapshot",children:A.jsx(At,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>D(X)}),ne=X=>{const W=/-snapshot-(.+)$/,te=X.match(W);return te&&te[1]?te[1].replace("T"," "):null},ue=async X=>{const W=X.slice(X.indexOf("-")+1);return await R.getAllParticipantsDataByStudy(W)};return A.jsxs(A.Fragment,{children:[A.jsx(oh,{visible:y}),A.jsxs(An,{justify:"space-between",align:"center",children:[A.jsxs(je,{style:{width:"70%"},children:[A.jsx(co,{order:5,children:"Create a Snapshot"}),A.jsxs(At,{children:["This will create a snapshot of the live"," ",A.jsx(At,{span:!0,fw:700,children:e})," ","database. It will"," ",A.jsx(At,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),A.jsx(Ys,{label:"Create a snapshot",children:A.jsx(In,{onClick:G,children:"Snapshot"})})]}),A.jsx(eh,{h:"lg"}),A.jsxs(An,{justify:"space-between",align:"center",children:[A.jsxs(je,{style:{width:"70%"},children:[A.jsx(co,{order:5,children:"Archive Data"}),A.jsxs(At,{children:["This will create a snapshot of the live"," ",A.jsx(At,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),A.jsx(Ys,{label:"Snapshot and Delete Data",children:A.jsx(In,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),A.jsx(eh,{h:"lg"}),A.jsxs(An,{justify:"space-between",align:"center",children:[A.jsxs(je,{style:{width:"70%"},children:[A.jsx(co,{order:5,children:"Delete Data"}),A.jsxs(At,{children:["This will delete the live"," ",A.jsx(At,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),A.jsx(Ys,{label:"Delete Data",children:A.jsx(In,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),A.jsx(eh,{h:"xl"}),A.jsxs(An,{direction:"column",children:[A.jsx(An,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:A.jsx(co,{order:5,children:"Snapshots"})}),A.jsxs(je,{style:{position:"relative"},children:[A.jsx(oh,{visible:w}),d.length>0?A.jsxs(zn,{children:[A.jsx(zn.Thead,{children:A.jsxs(zn.Tr,{children:[A.jsx(zn.Th,{children:"Snapshot Name"}),A.jsx(zn.Th,{children:"Date Created"}),A.jsx(zn.Th,{children:"Actions"})]})}),A.jsx(zn.Tbody,{children:d.map(X=>A.jsxs(zn.Tr,{children:[A.jsx(zn.Td,{children:X.alternateName}),A.jsx(zn.Td,{children:ne(X.originalName)}),A.jsx(zn.Td,{children:A.jsxs(An,{children:[A.jsx(Ys,{label:"Rename",children:A.jsx(In,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(X.originalName)},children:A.jsx(oVe,{})})}),A.jsx(Ys,{label:"Restore Snapshot",children:A.jsx(In,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{ee(X.originalName)},children:A.jsx(lVe,{})})}),A.jsx(Ys,{label:"Delete Snapshot",children:A.jsx(In,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(X.originalName)},children:A.jsx(O1e,{})})}),A.jsx(ePe,{visibleParticipants:()=>ue(X.originalName),studyId:e,gap:"10px",fileName:X.alternateName})]})})]},X.originalName))})]}):A.jsx(At,{children:"No snapshots."})]})]}),A.jsxs(Eo,{opened:n,onClose:()=>{r(!1),m("")},title:A.jsx(At,{children:"Archive Data"}),children:[A.jsx(At,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),A.jsx(Fy,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:X=>m(X.target.value)}),A.jsxs(An,{mt:"sm",justify:"right",children:[A.jsx(In,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),A.jsx(In,{color:"red",onClick:L,disabled:p!==e,children:"Archive"})]})]}),A.jsxs(Eo,{opened:i,onClose:()=>{s(!1),m("")},title:A.jsx(At,{children:"Delete Snapshot"}),children:[A.jsxs(At,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",A.jsx(At,{span:!0,fw:700,children:"irreversible"}),"."]}),A.jsx(Fy,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:X=>m(X.target.value)}),A.jsxs(An,{mt:"sm",justify:"right",children:[A.jsx(In,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),A.jsx(In,{color:"red",onClick:j,disabled:p!==e,children:"Delete"})]})]}),A.jsxs(Eo,{opened:o,onClose:()=>{a(!1),b("")},title:A.jsx(At,{children:"Rename Snapshot"}),children:[A.jsx(Fy,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:X=>b(X.target.value)}),A.jsxs(An,{mt:"sm",justify:"right",children:[A.jsx(In,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),b("")},children:"Cancel"}),A.jsx(In,{color:"green",onClick:V,disabled:!g||g.length===0,children:"Rename"})]})]}),A.jsxs(Eo,{opened:u,onClose:()=>{l(!1),m("")},title:A.jsx(At,{children:"Delete Live Data"}),children:[A.jsxs(At,{mb:"sm",children:["This will permanently delete the live"," ",A.jsx(At,{span:!0,fw:700,children:e})," ","data. This action is"," ",A.jsx(At,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),A.jsx(Fy,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:X=>m(X.target.value)}),A.jsxs(An,{mt:"sm",justify:"right",children:[A.jsx(In,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),A.jsx(In,{color:"red",onClick:z,disabled:p!==e,children:"Delete"})]})]})]})}function qVt({studyId:e}){const{storageEngine:t}=Ko(),[n,r]=B.useState(!1),[i,s]=B.useState(!1),[o,a]=B.useState(!1),[u,l]=B.useState(!1);B.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&A.jsxs(El,{children:[A.jsx(N_,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),A.jsx(N_,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),A.jsx(N_,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function WVt({studyId:e,refresh:t}){const{storageEngine:n}=Ko();return A.jsx(c1,{children:A.jsxs(Zl,{multiple:!0,variant:"contained",children:[A.jsxs(Zl.Item,{value:"ReVISit Modes",children:[A.jsx(Zl.Control,{children:A.jsx(co,{order:5,children:"ReVISit Modes"})}),A.jsx(Zl.Panel,{children:A.jsx(qVt,{studyId:e})})]},"modes"),A.jsxs(Zl.Item,{value:"Data Management",children:[A.jsx(Zl.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:A.jsx(co,{order:5,children:"Data Management"})}),A.jsx(Zl.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&A.jsx(HVt,{studyId:e,refresh:t})})]},"dataManagement")]})})}function GVt({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=hq(!0),[o,a]=sR(),u=B.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=B.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=B.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,b])=>b.endTime!==-1).map(([g,b])=>(b.endTime-b.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return A.jsxs(mT,{p:"lg",withBorder:!0,ref:o,children:[A.jsxs(An,{direction:"row",justify:"space-between",onClick:s,children:[A.jsxs(An,{align:"center",children:[e.type==="metadata"&&A.jsx(Xze,{size:20}),e.type==="numerical"&&A.jsx(iVe,{size:20}),(e.type==="shortText"||e.type==="longText")&&A.jsx(Gze,{size:20}),e.type==="likert"&&A.jsx(Zze,{size:20}),e.type==="dropdown"&&A.jsx(dVe,{size:20}),e.type==="slider"&&A.jsx(Uze,{size:20}),e.type==="radio"&&A.jsx(uVe,{size:20}),e.type==="checkbox"&&A.jsx(hVe,{size:20}),e.type==="reactive"&&A.jsx(tVe,{size:20}),A.jsx(co,{order:5,ml:4,children:e.id})]}),A.jsx(Kze,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),A.jsxs(VO,{in:i,mah:400,children:[A.jsx(je,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:A.jsx(Zd,{})}),A.jsxs(HW,{cols:2,h:360,children:[A.jsx(a1,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="reactive"?A.jsx(Dpe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):A.jsxs(An,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&A.jsx(dk,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&A.jsxs(A.Fragment,{children:[A.jsx(At,{fw:700,children:"Response Values: "}),u.map((f,d)=>A.jsx(An,{align:"center",gap:"xs",children:A.jsx(At,{children:f[e.id]})},d))]})]})}),A.jsx(a1,{mih:200,children:e.type==="metadata"?A.jsx(Dpe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):A.jsxs(A.Fragment,{children:[A.jsx(At,{fw:700,children:"Response Specification: "}),A.jsx(dk,{block:!0,children:JSON.stringify(e,null,2)}),A.jsx("br",{}),l&&A.jsxs(A.Fragment,{children:[A.jsx(At,{fw:700,children:"Correct Answer: "}),A.jsx(dk,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function YVt({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&j5e(t.components[n],t),i=B.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?A.jsx(An,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>A.jsx(GVt,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):A.jsx(An,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:A.jsx(At,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function KVt({studyConfig:e,visibleParticipants:t}){const n=B.useMemo(()=>{let i=Jy(e.sequence);return i=VY(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=ig();return A.jsx(mT,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?A.jsx(An,{justify:"center",align:"center",pt:"lg",pb:"md",children:A.jsx(At,{children:"No data available."})}):A.jsxs(An,{direction:"row",children:[A.jsx(je,{w:340,children:A.jsx(OO,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),A.jsx(Zd,{orientation:"vertical",mx:"md"}),A.jsx(YVt,{participantData:t,studyConfig:e,trialId:r})]})})}function XVt({xScale:e,answer:t,height:n,labelHeight:r=0}){return A.jsx("g",{children:A.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const vP=3,mE=25,bP=25,xP=20,ume=1,Kj=15;function QVt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0,isCorrect:a,hasCorrect:u}){const[l,c]=B.useState(!1),[f,{width:d}]=sR();return A.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{cursor:"pointer"},children:[A.jsx("rect",{opacity:1,fill:l||s?"cornflowerblue":"lightgray",x:e(t.startTime)+ume,width:e(t.endTime)-e(t.startTime)-ume*2,y:r-mE,height:mE}),A.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-vP,width:d+vP*2+(u?Kj:0),y:r-mE-bP-o,height:xP,fill:"whitesmoke"}),A.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-vP,x2:d+e(t.startTime)+vP+(u?Kj:0),y1:r-mE-bP+xP-o,y2:r-mE-bP+xP-o}),A.jsx("foreignObject",{x:e(t.startTime),width:d+(u?Kj:0),y:r-mE-bP-o,height:xP,children:A.jsx(l1,{style:{width:"fit-content"},children:A.jsxs(Js,{wrap:"nowrap",gap:2,children:[A.jsx(At,{lineClamp:1,ref:f,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n}),u?a?A.jsx(v9,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):A.jsx(vR,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const lme=25,JVt=8,Xj={left:20,top:0,right:20,bottom:0};function ZVt({participantData:e,width:t,height:n,selectedTask:r,studyId:i,studyConfig:s,maxLength:o}){const a=B.useCallback(g=>{const b=g.split("_"),y=+b[b.length-1];window.open(`${Uu}${i}/${u0(y)}?participantId=${e.participantId}`,"_blank")},[e.participantId,i]),u=B.useMemo(()=>{const g=Object.values(e.answers||{}).filter(x=>x.startTime).map(x=>[x.startTime,x.endTime]).flat(),b=Tlt(g);return vM([Xj.left,t-Xj.left-Xj.right]).domain([b[0],o?b[0]+o:b[1]]).clamp(!0)},[o,e.answers,t]),[l,c,f]=B.useMemo(()=>{let g=0;const b=Object.entries(e.answers||{}).filter(S=>!!S[1].startTime).sort((S,C)=>S[1].startTime-C[1].startTime);let y=0,x=0;const w=b.map((S,C)=>{const[R,I]=S,O=C>0?b[C-g-1]:null;O&&O[0].length*(JVt+1)+u(O[1].startTime)>u(I.startTime)?g+=1:g=0;const M=R.split("_"),L=M.slice(0,M.length-1).join("_"),V=s==null?void 0:s.components[L];let D=!0,j=!1;return V&&V.correctAnswer?(V.correctAnswer.forEach(z=>{const{id:G,answer:ee}=z;(!V||!V.correctAnswer||I.answer[G]!==ee)&&(D=!1)}),j=!0):j=!1,j&&(x+=1,D&&(y+=1)),{line:A.jsx(XVt,{labelHeight:g*lme,answer:I,height:n,xScale:u},R),label:A.jsx(Ys,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:A.jsx(El,{gap:0,children:Object.entries(I.answer).map(z=>{var ue,X;const[G,ee]=z,ne=(X=(ue=V==null?void 0:V.correctAnswer)==null?void 0:ue.find(W=>W.id===G))==null?void 0:X.answer;return A.jsx(At,{children:`${G}: ${ee} ${ne?`[${ne}]`:""}`},G)})}),children:A.jsx("g",{children:A.jsx(QVt,{isCorrect:D,hasCorrect:j,labelHeight:g*lme,isSelected:r===R,setSelectedTask:a,answer:I,height:n,name:R,xScale:u},R)})})}});return[y,x,w]},[e.answers,u,s==null?void 0:s.components,n,r,a]),d=B.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const g=Object.values(e.answers).filter(b=>b.startTime).sort((b,y)=>b.startTime-y.startTime);return new Date(g[g.length-1].endTime-(g[0]?g[0].startTime:0)).getTime()},[e]),h=B.useMemo(()=>Object.entries(e.answers||{}).sort((b,y)=>b[1].startTime-y[1].startTime).map(b=>{const[y,x]=b,w=[];let S=[-1,-1],C="visible";if(x.windowEvents)for(let R=0;R<x.windowEvents.length;R+=1)x.windowEvents[R][1]==="visibility"&&(x.windowEvents[R][2]==="hidden"&&C==="visible"?(S=[x.windowEvents[R][0],-1],C="hidden"):x.windowEvents[R][2]==="visible"&&C==="hidden"&&(S[1]=x.windowEvents[R][0],w.push(S),S=[-1,-1],C="visible"));return w.map((R,I)=>A.jsx(Ys,{withinPortal:!0,label:"Browsed away",children:A.jsx("rect",{x:u(R[0]),width:u(R[1])-u(R[0]),y:n-5,height:10})},I))}),[u,n,e.answers]),p=B.useMemo(()=>{if(s!=null&&s.uiConfig&&s.uiConfig.participantNameField){const[g,b]=s.uiConfig.participantNameField.split("."),y=Object.keys(e.answers).find(x=>x.startsWith(g));if(y)return`${e.answers[y].answer[b]}`}return null},[e.answers,s]),m=B.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return"";const g=Object.values(e.answers).filter(y=>y.startTime).sort((y,x)=>y.startTime-x.startTime),b=new Date(g[g.length-1].endTime);return e.completed?`${b.toLocaleDateString()} ${b.toLocaleTimeString()}`:""},[e]);return A.jsx(l1,{children:A.jsxs(El,{gap:15,style:{width:"100%"},children:[A.jsx(Zd,{size:"md"}),A.jsxs(Js,{justify:"space-between",children:[A.jsxs(Js,{justify:"center",children:[e.participantIndex?A.jsx(At,{children:`P-${e.participantIndex<10?"0":"none"}${e.participantIndex}`}):null,A.jsx(At,{size:"md",fw:700,children:p||e.participantId}),A.jsx(At,{size:"md",children:m}),e.completed?null:A.jsx(At,{size:"xl",c:"red",children:"Not completed"}),A.jsxs(Js,{gap:10,children:[A.jsx(v0,{variant:"light",size:"lg",color:"green",leftSection:A.jsx(v9,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:l}),A.jsx(v0,{variant:"light",size:"lg",color:"red",leftSection:A.jsx(vR,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:c-l}),A.jsx(v0,{variant:"light",size:"lg",color:"gray",leftSection:A.jsx(eVe,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:aq(d)})]})]}),A.jsx(In,{rightSection:A.jsx(R1e,{size:14}),component:"a",href:`${Uu}${i}/${u0(0)}?participantId=${e.participantId}`,target:"_blank",children:"Go to replay"})]}),e.completed?A.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[f.map(g=>g.line),f.map(g=>g.label),h]}):null]})})}function eHt({visibleParticipants:e,studyConfig:t}){const{studyId:n}=ig(),[r,{width:i}]=sR(),[s,o]=B.useState(!1),a=B.useMemo(()=>s?Math.max(...e.map(l=>{const c=Math.min(...Object.values(l.answers).map(d=>d.startTime||0)),f=Math.max(...Object.values(l.answers).map(d=>d.endTime||0));return f&&c?f-c:0})):void 0,[s,e]);return A.jsxs(El,{ref:r,style:{width:"100%"},children:[A.jsx(Js,{children:A.jsx(N_,{checked:s,label:"Scale by time",onChange:u=>o(u.currentTarget.checked)})}),e.map(u=>A.jsx(ZVt,{maxLength:a,studyConfig:t,studyId:n||"",height:200,participantData:u,width:i},u.participantId))]})}function tHt({globalConfig:e}){const{studyId:t}=ig(),[n,r]=B.useState([]),[i,s]=B.useState(void 0),[o,a]=B.useState(!1),{storageEngine:u}=Ko(),l=F0(),{tab:c}=ig(),{user:f}=qT();B.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const x=async w=>{if(w.data.type==="revisitWidget/CONFIG"&&u){const S=await nte(w.data.payload);s(S)}};return window.addEventListener("message",x),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",x)}}return rte(t,e).then(x=>{x&&s(x)}),()=>{}},[t,e,u]);const d=B.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const x=await u.getAllParticipantsData();r(x),a(!1)}},[u,t,i]);B.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=B.useState([]),[m,g,b]=B.useMemo(()=>{const x=n.filter(C=>!C.rejected&&C.completed),w=n.filter(C=>!C.rejected&&!C.completed),S=n.filter(C=>C.rejected);return p([...x,...w,...S]),[x,w,S]},[n]),y=B.useCallback(x=>{const w=[];x.includes("completed")&&w.push(...m),x.includes("inprogress")&&w.push(...g),x.includes("rejected")&&w.push(...b),p(w)},[m,g,b]);return A.jsxs(A.Fragment,{children:[A.jsx(t8,{studyIds:e.configsList}),A.jsx(hs.Main,{children:A.jsxs(c1,{fluid:!0,style:{height:"100%",position:"relative"},children:[A.jsx(oh,{visible:o}),A.jsxs(An,{direction:"row",align:"center",justify:"space-between",children:[A.jsx(co,{order:5,children:t}),A.jsxs(An,{direction:"row",align:"center",children:[A.jsx(At,{mt:-2,size:"sm",children:"Participants: "}),A.jsx(ic.Group,{defaultValue:["completed","inprogress","rejected"],onChange:y,mb:"xs",mt:8,ml:"xs",children:A.jsxs(Js,{children:[A.jsx(ic,{value:"completed",label:"Completed"}),A.jsx(ic,{value:"inprogress",label:"In Progress"}),A.jsx(ic,{value:"rejected",label:"Rejected"})]})})]})]}),A.jsx(eh,{h:"xs"}),A.jsxs(ci,{variant:"outline",value:c,onChange:x=>l(`/analysis/stats/${t}/${x}`),style:{height:"100%"},children:[A.jsxs(ci.List,{children:[A.jsx(ci.Tab,{value:"table",leftSection:A.jsx(pVe,{size:16}),children:"Table View"}),A.jsx(ci.Tab,{value:"stats",leftSection:A.jsx(Yze,{size:16}),children:"Trial Stats"}),A.jsx(ci.Tab,{value:"replay",leftSection:A.jsx(aVe,{size:16}),children:"Participant Replay"}),A.jsx(ci.Tab,{value:"manage",leftSection:A.jsx(N1e,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),A.jsx(ci.Panel,{value:"table",pt:"xs",children:i&&A.jsx(VVt,{visibleParticipants:h,studyConfig:i,refresh:d})}),A.jsx(ci.Panel,{value:"stats",pt:"xs",children:i&&A.jsx(KVt,{studyConfig:i,visibleParticipants:h})}),A.jsx(ci.Panel,{value:"replay",pt:"xs",children:A.jsx(eHt,{visibleParticipants:h,studyConfig:i})}),A.jsx(ci.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?A.jsx(WVt,{studyId:t,refresh:d}):A.jsx(c1,{mt:20,children:A.jsx(Yy,{title:"Unauthorized Access",variant:"light",color:"red",icon:A.jsx(fG,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function cme({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=qT(),{storageEngine:o}=Ko(),[a,u]=B.useState(!1),l=ig();return B.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?A.jsx(oh,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?A.jsx(oG,{to:"/login"}):A.jsx(A.Fragment,{children:e})}async function tPe(e,t){if(e instanceof Hh){t(!0);const n=new Oy,r=O8();try{await est(r,n,G_e)}catch(i){O4({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function nHt(){const{user:e}=qT(),[t,n]=B.useState(!1),{storageEngine:r}=Ko();return B.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&O4({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?A.jsx(oG,{to:"/"}):A.jsx(c1,{children:A.jsx(ET,{padding:"lg",children:A.jsxs(An,{align:"center",direction:"column",justify:"center",children:[A.jsx(Wb,{maw:200,mt:50,mb:100,src:`${Uu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),A.jsxs(A.Fragment,{children:[A.jsx(At,{mb:20,children:"To access admin settings, please sign in using your Google account."}),A.jsx(In,{onClick:()=>tPe(r,n),leftSection:A.jsx(mVe,{}),variant:"filled",children:"Sign In With Google"})]}),A.jsx(oh,{visible:t})]})})})}function rHt(){const{user:e,triggerAuth:t,logout:n}=qT(),{storageEngine:r}=Ko(),[i,s]=B.useState(!1),[o,a]=B.useState([]),[u,l]=B.useState(!1),[c,f]=B.useState(!1),[d,h]=B.useState(!1),[p,m]=B.useState(!1),[g,b]=B.useState(!1),[y,x]=B.useState(""),[w,S]=B.useState(null),C=_we({initialValues:{email:""},validate:{email:Kut("Invalid email")}});B.useEffect(()=>{(async()=>{if(l(!0),r instanceof Hh){const j=await(r==null?void 0:r.getUserManagementData("authentication"));s((j==null?void 0:j.isEnabled)||!1);const z=await(r==null?void 0:r.getUserManagementData("adminUsers"));z&&z.adminUsersList&&a(z==null?void 0:z.adminUsersList.map(G=>G.email))}else s(!1);l(!1)})()},[r]);const R=async()=>{if(l(!0),r instanceof Hh){const D=await tPe(r,l);D&&D.email?(S({email:D.email,uid:D.uid}),m(!0)):b(!0)}l(!1)},I=async D=>{l(!0),r instanceof Hh&&D&&(await r.changeAuth(!0),await r.addAdminUser(D),a([D.email]),s(!0),t()),m(!1),l(!1)},O=async()=>{if(l(!0),r instanceof Hh){await r.addAdminUser({email:C.values.email,uid:null});const D=await r.getUserManagementData("adminUsers");a((D==null?void 0:D.adminUsersList.map(j=>j.email))||[])}l(!1),f(!1),C.setValues({email:""})},M=D=>{h(!0),x(D)},L=async()=>{if(l(!0),r instanceof Hh){await r.removeAdminUser(y);const D=await r.getUserManagementData("adminUsers");a((D==null?void 0:D.adminUsersList.map(j=>j.email))||[])}h(!1),l(!1)},V=B.useMemo(()=>r instanceof Hh,[r]);return A.jsxs(A.Fragment,{children:[A.jsx(c1,{children:A.jsxs(ET,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[A.jsx(co,{mb:20,order:3,children:"Authentication"}),i?A.jsx(An,{children:A.jsx(At,{children:"Authentication is enabled."})}):A.jsxs(An,{justify:"space-between",children:[A.jsx(je,{children:A.jsx(At,{children:"Authentication is currently disabled."})}),A.jsx(Ys,{label:"You can only enable auth when using Firebase",disabled:V,children:A.jsx(In,{onClick:D=>V?R():D.preventDefault(),color:"green","data-disabled":V?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),i?A.jsxs(An,{mt:40,direction:"column",children:[A.jsxs(An,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[A.jsx(co,{order:6,children:"Enabled Users"}),A.jsx(dG,{style:{cursor:"pointer"},onClick:()=>f(!0)})]}),o.length>0?o.map(D=>{var j;return A.jsxs(An,{justify:"space-between",mb:10,children:[A.jsx(At,{children:D}),D===((j=e.user)==null?void 0:j.email)?A.jsx(At,{color:"blue",size:"xs",children:"You"}):A.jsx(Vb,{variant:"subtle",onClick:()=>M(D),children:A.jsx(O1e,{color:"red"})})]},D)}):null,A.jsx(An,{direction:"row",justify:"left",children:A.jsx(In,{onClick:()=>n(),mt:20,children:"Log out"})})]}):null]})}),A.jsx(Eo,{opened:c,onClose:()=>f(!1),title:"Add Admin User",children:A.jsxs(je,{component:"form",onSubmit:C.onSubmit(()=>O()),children:[A.jsx(Fy,{leftSection:A.jsx(Hze,{}),placeholder:"User Gmail Account",...C.getInputProps("email")}),A.jsxs(An,{mt:30,justify:"right",children:[A.jsx(In,{mr:5,variant:"subtle",color:"red",onClick:()=>f(!1),children:"Cancel"}),A.jsx(In,{type:"submit",children:"Save"})]})]})}),A.jsxs(Eo,{opened:d,size:"large",onClose:()=>h(!1),title:A.jsxs(At,{fw:700,children:["Remove",y,"?"]}),children:[A.jsxs(At,{mt:40,children:["Are you sure you want to remove",A.jsx("b",{children:y})," ","as an administrator?"]}),A.jsxs(An,{mt:40,justify:"right",children:[A.jsx(In,{mr:5,variant:"subtle",color:"red",onClick:()=>h(!1),children:"Cancel"}),A.jsx(In,{onClick:()=>L(),children:"Yes, I'm sure."})]})]}),A.jsxs(Eo,{opened:p,size:"md",onClose:()=>m(!1),title:A.jsx(At,{fw:700,children:"Enable Authentication?"}),children:[A.jsxs(At,{mt:40,children:["User"," ",A.jsx("b",{children:w==null?void 0:w.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),A.jsxs(An,{mt:40,justify:"right",children:[A.jsx(In,{mr:5,variant:"subtle",color:"red",onClick:()=>m(!1),children:"Cancel"}),A.jsx(In,{onClick:()=>I(w),children:"Yes, I'm sure."})]})]}),A.jsxs(Eo,{opened:g,size:"md",onClose:()=>b(!1),title:A.jsx(At,{fw:700,children:"An Error Occurred."}),children:[A.jsxs(At,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",A.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),A.jsx(An,{mt:40,justify:"right",children:A.jsx(In,{mr:5,onClick:()=>b(!1),children:"Okay"})})]}),A.jsx(oh,{visible:u})]})}class iHt extends Y_e{constructor(){super("localStorage");Vc(this,"studyDatabase");Vc(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await EE.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await L8(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var h;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await L8(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence(),d={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((h=this.studyDatabase)==null?void 0:h.setItem(this.currentParticipantId,d)),d}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await EE.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=M8();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),{currentRow:i,creationIndex:1e3-n.length}}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=EE.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=M8();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await EE.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await EE.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function sHt(){let e,t=!1;{const n=new Hh;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new iHt;await n.connect(),e=n}return e}function E3({title:e}){const t=hp();return B.useEffect(()=>{document.title=e},[t,e]),null}async function oHt(){const t=await(await fetch(`${Uu}global.json`)).text();return LVt(t)}function aHt(){const[e,t]=B.useState(null),[n,r]=B.useState({});B.useEffect(()=>{async function a(){e&&r(await BVt(e))}a()},[e]),B.useEffect(()=>{e||oHt().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Ko();B.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await sHt();s(u)}a()},[s,i]);const o=async a=>i instanceof Hh?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?A.jsx(Sze,{basename:Uu,children:A.jsx(Qst,{children:A.jsx(Bze,{children:A.jsxs(ZUe,{children:[A.jsx(i_,{path:"/",element:A.jsxs(A.Fragment,{children:[A.jsx(E3,{title:"ReVISit | Home"}),A.jsxs(hs,{padding:"md",header:{height:70},children:[A.jsx(t8,{studyIds:e.configsList}),A.jsx(eot,{globalConfig:e,studyConfigs:n})]})]})}),A.jsx(i_,{path:"/:studyId/*",element:A.jsxs(A.Fragment,{children:[A.jsx(E3,{title:"ReVISit | Study"}),A.jsx(jVt,{globalConfig:e})]})}),A.jsx(i_,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:A.jsxs(A.Fragment,{children:[A.jsx(E3,{title:"ReVISit | Analysis"}),A.jsx(cme,{paramToCheck:"studyId",paramCallback:o,children:A.jsx(hs,{padding:"md",header:{height:70},children:A.jsx(tHt,{globalConfig:e})})})]})}),A.jsx(i_,{path:"/analysis/stats/:studyId",element:A.jsx(N5e,{to:"./table",replace:!0})}),A.jsx(i_,{path:"/settings",element:A.jsxs(cme,{children:[A.jsx(E3,{title:"ReVISit | Settings"}),A.jsxs(hs,{padding:"md",header:{height:70},children:[A.jsx(t8,{studyIds:e.configsList}),A.jsx(hs.Main,{children:A.jsx(rHt,{})})]})]})}),A.jsx(i_,{path:"/login",element:A.jsxs(A.Fragment,{children:[A.jsx(E3,{title:"ReVISit | Login"}),A.jsxs(hs,{padding:"md",header:{height:70},children:[A.jsx(t8,{studyIds:e.configsList}),A.jsx(hs.Main,{children:A.jsx(nHt,{})})]})]})})]})})})}):null}B8e.createRoot(document.getElementById("root")).render(A.jsx(sr.StrictMode,{children:A.jsx(uUe,{children:A.jsxs(Dme,{children:[A.jsx(N1,{}),A.jsx(aHt,{})]})})}))});export default uHt();
